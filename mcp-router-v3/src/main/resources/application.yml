server:
  port: 8052
  address: 0.0.0.0

spring:
  application:
    name: mcp-router-v3.01
  
  # 数据源配置
  datasource:
    url: jdbc:mysql://127.0.0.1:3306/mcp_bridge?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: mcp_user
    password: mcp_user
    driver-class-name: com.mysql.cj.jdbc.Driver
    
    # HikariCP 连接池配置
    hikari:
      pool-name: McpRouterPool
      minimum-idle: 5
      maximum-pool-size: 20
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      connection-test-query: SELECT 1
  
  ai:
    mcp:
      server:
        name: ${spring.application.name}
#        version: 1.0.1
#        type: ASYNC  # Recommended for reactive applications
#        instructions: "MCP Router provides intelligent routing to backend MCP servers"
        sse-message-endpoint: /mcp/message  # 与 mcp-server-v6 相同
#        sse-endpoint: /sse                  # 与 mcp-server-v6 相同
#        capabilities:
#          tool: true
#          resource: true
#          prompt: true
#          completion: true
    alibaba:
      mcp:
        nacos:
          namespace: public
          server-addr: 127.0.0.1:8848
          username: nacos
          password: nacos
          registry:
            enabled: true
            # 支持多个服务组，用于查询不同组的 MCP 服务实例  暂时只支持一个元素 mcp-server
            # TODO 后续添加多节点
            # 服务发现时会遍历这些组来查找 MCP 服务 
            service-groups: 
              - mcp-server
              - mcp-endpoints
            # 当前服务注册到的组（默认使用第一个组）
            service-group: mcp-server
            service-name: ${spring.application.name}
            app-name: ${spring.application.name}  # 配置应用名称，用于 Nacos 配置发布时的 appName 字段
            src-user: ${spring.application.name}  # 配置源用户，用于 Nacos 配置历史记录

# MyBatis 配置
mybatis:
  mapper-locations: classpath:mapper/**/*.xml
  type-aliases-package: com.pajk.mcpbridge.persistence.entity
  configuration:
    map-underscore-to-camel-case: true
    default-fetch-size: 100
    default-statement-timeout: 30
    # 禁用缓存以确保读取实时数据
    cache-enabled: false
    local-cache-scope: STATEMENT

# MCP 持久化配置
mcp:
  persistence:
    enabled: true
    async: true
    batch-size: 100
    flush-interval: 5000
        
# 日志配置现在由 logback-spring.xml 管理
# 这里只保留必要的 Spring Boot 日志配置
logging:
  config: classpath:logback-spring.xml
  level:
    root: INFO
    com.pajk.mcpbridge: DEBUG
    
#management:
#  endpoints:
#    web:
#      exposure:
#        include: "*"
