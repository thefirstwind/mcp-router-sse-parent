# MCP Router v3 UI 快速测试指南

## 🚀 快速开始

### 1. 启动应用

```bash
cd mcp-router-v3
mvn spring-boot:run
```

或者如果已经打包：

```bash
java -jar target/mcp-router-v3-*.jar
```

### 2. 访问管理界面

打开浏览器访问：
```
http://localhost:8052/admin
```

## ✅ 功能测试清单

### 测试 1: 协议概览页面（默认页面）

**预期效果：**
- [ ] 页面默认显示"协议概览"标签页
- [ ] 看到三个协议卡片：RESTful（蓝色）、SSE（绿色）、Streamable（紫色）
- [ ] 每个卡片显示：
  - 协议徽章
  - 端点信息
  - Content-Type
  - 特点列表
- [ ] 看到 JSON-RPC 2.0 格式说明卡片
  - 语法高亮的 JSON 示例
  - 字段说明和注释
- [ ] 看到协议工作流程图
  - RESTful 流程（4 步）
  - SSE 流程（4 步）
  - Streamable 流程（4 步）

**验证步骤：**
1. 打开 `http://localhost:8052/admin`
2. 检查是否默认显示"协议概览"标签页
3. 滚动查看所有内容
4. 检查协议卡片的悬停效果（鼠标悬停时卡片应该上移）

### 测试 2: SSE 会话页面

**预期效果：**
- [ ] 点击"SSE 会话"标签页
- [ ] 会话列表中每个会话显示：
  - "SSE" 绿色协议徽章
  - Session ID
  - 服务名称
  - 状态（🟢 Active 或 🔴 Closed）
  - 最后活跃时间
- [ ] 点击会话可以查看详情
- [ ] 筛选功能正常工作

**验证步骤：**
1. 切换到"SSE 会话"标签页
2. 检查会话列表中的协议标识
3. 如果有活跃会话，检查状态显示
4. 测试筛选功能（按服务名称、Session ID）

### 测试 3: RESTful 请求页面

**预期效果：**
- [ ] 点击"RESTful 请求"标签页
- [ ] 请求列表中每个请求显示：
  - "RESTful" 蓝色协议徽章
  - 服务名称
  - MCP 方法标签（如果有）
  - 工具名称或方法名
  - 状态码（颜色编码）
  - 时间
- [ ] 点击请求可以查看详情
- [ ] 筛选功能正常工作

**验证步骤：**
1. 切换到"RESTful 请求"标签页
2. 检查请求列表中的协议标识
3. 检查 MCP 方法标签显示
4. 测试筛选功能（按服务名称、MCP 方法、时间范围）
5. 点击请求查看详情，检查 JSON-RPC 格式显示

### 测试 4: JSON 语法高亮

**预期效果：**
- [ ] 协议概览页面中的 JSON-RPC 示例有语法高亮
  - 键显示为蓝色
  - 字符串显示为绿色
  - 数字显示为黄色
  - 注释显示为灰色斜体
- [ ] 请求详情中的 JSON 代码块有深色背景

**验证步骤：**
1. 在协议概览页面检查 JSON-RPC 格式说明
2. 在 RESTful 请求详情中查看 JSON 代码块
3. 检查颜色是否正确

### 测试 5: 响应式设计

**预期效果：**
- [ ] 在桌面浏览器中正常显示
- [ ] 调整浏览器窗口大小时布局自适应
- [ ] 协议卡片在小屏幕上堆叠显示

**验证步骤：**
1. 调整浏览器窗口大小
2. 检查布局是否自适应
3. 使用浏览器开发者工具测试不同屏幕尺寸

### 测试 6: 交互功能

**预期效果：**
- [ ] 标签页切换流畅
- [ ] 协议卡片有悬停效果
- [ ] 列表项点击可以查看详情
- [ ] 复制按钮可以复制 JSON 内容

**验证步骤：**
1. 切换不同的标签页
2. 鼠标悬停在协议卡片上
3. 点击列表项查看详情
4. 测试复制功能

## 🐛 常见问题排查

### 问题 1: 页面无法加载

**检查：**
- 应用是否正常启动
- 端口是否正确（默认 8052）
- 浏览器控制台是否有错误

**解决：**
```bash
# 检查应用日志
tail -f logs/application.log

# 检查端口占用
lsof -i :8052
```

### 问题 2: 协议概览页面不显示

**检查：**
- 浏览器控制台是否有 JavaScript 错误
- 网络请求是否成功（F12 → Network）
- HTML 文件是否正确加载

**解决：**
- 清除浏览器缓存
- 检查浏览器控制台错误
- 验证 HTML 文件完整性

### 问题 3: 协议标识不显示

**检查：**
- CSS 样式是否正确加载
- `.protocol-badge` 类是否存在
- 浏览器开发者工具检查元素样式

**解决：**
- 检查 CSS 样式是否在 `<style>` 标签中
- 验证协议徽章的 HTML 结构

### 问题 4: 数据不更新

**检查：**
- API 请求是否成功
- 后端服务是否正常运行
- 浏览器控制台是否有 API 错误

**解决：**
```bash
# 测试 API 端点
curl http://localhost:8052/admin/api/summary
curl http://localhost:8052/admin/api/sessions
curl http://localhost:8052/admin/api/restful-requests?hours=1
```

## 📊 性能检查

### 页面加载时间
- 首次加载应该在 1-2 秒内完成
- 数据刷新应该在 500ms 内完成

### 资源大小
- HTML 文件大小：约 40-50 KB
- 无外部依赖，所有样式和脚本内联

### 浏览器兼容性
- Chrome/Edge（推荐）
- Firefox
- Safari

## 🎯 测试数据准备

### 创建测试 SSE 连接

```bash
# 建立 SSE 连接
curl -N -H "Accept: text/event-stream" \
  "http://localhost:8052/sse/mcp-server-v6?clientId=test-client-001"
```

### 创建测试 RESTful 请求

```bash
# 发送 RESTful 请求
curl -X POST http://localhost:8052/mcp/router/route/mcp-server-v6 \
  -H "Content-Type: application/json" \
  -d '{
    "jsonrpc": "2.0",
    "method": "tools/list",
    "id": "test-001",
    "params": {}
  }'
```

## ✅ 验收标准

所有测试通过后，UI 应该具备：

1. ✅ **协议可视化** - 清晰展示三种协议
2. ✅ **标准协议突出** - JSON-RPC 2.0 格式说明
3. ✅ **协议标识** - SSE 和 RESTful 都有协议徽章
4. ✅ **现代化设计** - 统一的颜色系统和视觉风格
5. ✅ **响应式布局** - 适配不同屏幕尺寸
6. ✅ **交互流畅** - 标签页切换、悬停效果、点击交互

## 📝 测试报告模板

```
测试日期: ___________
测试人员: ___________
浏览器: ___________
版本: ___________

功能测试:
- [ ] 协议概览页面
- [ ] SSE 会话页面
- [ ] RESTful 请求页面
- [ ] JSON 语法高亮
- [ ] 响应式设计
- [ ] 交互功能

问题记录:
1. ___________
2. ___________

总体评价: ___________
```

---

**创建日期**: 2025-01-12  
**版本**: v1.0









