# MCP Router v3 UI 改进方案

## 📋 设计目标

创建一个更直观、更专业的 UI 界面，突出展示：
1. **RESTful API** - 同步请求/响应模式
2. **SSE (Server-Sent Events)** - 长连接、事件流模式
3. **Streamable (NDJSON)** - 流式响应模式

## 🎨 核心设计理念

### 1. 协议可视化对比
- **并排展示**三种协议的特点
- **流程图**展示每种协议的工作流程
- **实时状态**显示当前连接和请求情况

### 2. 标准协议特点突出
- **JSON-RPC 2.0** 格式高亮显示
- **MCP 标准方法**分类展示（tools, resources, prompts）
- **传输层协议**清晰标识（HTTP, SSE, NDJSON）

### 3. 实时监控
- **连接状态**实时更新
- **消息流**实时展示
- **性能指标**可视化

## 🎯 主要功能模块

### 模块 1: 协议概览面板
```
┌─────────────────────────────────────────────────────────┐
│  MCP Router v3 - 标准协议监控面板                        │
│  JSON-RPC 2.0 | SSE | Streamable | RESTful              │
└─────────────────────────────────────────────────────────┘

┌──────────────┬──────────────┬──────────────┐
│  RESTful     │  SSE         │  Streamable  │
│  ┌────────┐  │  ┌────────┐  │  ┌────────┐  │
│  │ POST   │  │  │ GET    │  │  │ GET    │  │
│  │ /route │  │  │ /sse   │  │  │ /mcp   │  │
│  └────────┘  │  └────────┘  │  └────────┘  │
│              │              │              │
│  同步响应    │  事件流      │  NDJSON流    │
│  无状态      │  长连接      │  流式响应    │
└──────────────┴──────────────┴──────────────┘
```

### 模块 2: 协议流程图
每种协议都有清晰的流程图展示：
- **RESTful**: Client → Router → Server → Response
- **SSE**: Client ←→ Router ←→ Server (双向流)
- **Streamable**: Client ← Router ← Server (NDJSON流)

### 模块 3: 实时连接监控
- SSE 连接列表（实时心跳状态）
- Streamable 连接列表
- RESTful 请求历史

### 模块 4: 消息流追踪
- JSON-RPC 2.0 消息格式展示
- 请求/响应配对
- 错误追踪

## 🚀 实现方案

### 技术栈
- 原生 HTML/CSS/JavaScript（保持轻量）
- 使用现代 CSS Grid/Flexbox
- 实时数据通过 WebSocket 或轮询更新

### 关键改进点

1. **协议卡片设计**
   - 每种协议独立卡片
   - 颜色区分（RESTful=蓝色, SSE=绿色, Streamable=紫色）
   - 实时状态指示器

2. **交互式流程图**
   - SVG 或 Canvas 绘制
   - 动画展示数据流动
   - 点击查看详情

3. **消息查看器**
   - JSON 语法高亮
   - 可折叠/展开
   - 搜索和过滤

4. **性能仪表盘**
   - 请求速率图表
   - 响应时间分布
   - 成功率趋势

## 📊 数据展示优化

### RESTful 请求
- 请求方法、路径、状态码
- 请求/响应体（JSON 格式化）
- 时间线视图

### SSE 连接
- 连接状态（连接中/已连接/已断开）
- 心跳间隔显示
- 事件流实时展示
- 消息计数

### Streamable 连接
- NDJSON 流实时显示
- 消息分隔符清晰标识
- 流状态监控

## 🎨 UI/UX 改进

1. **视觉层次**
   - 使用卡片式布局
   - 清晰的视觉分组
   - 一致的间距和颜色

2. **交互反馈**
   - 加载状态动画
   - 操作成功/失败提示
   - 悬停效果

3. **响应式设计**
   - 移动端适配
   - 平板端优化
   - 桌面端充分利用空间

## 📝 下一步实施

1. 创建新的 HTML 文件结构
2. 实现协议对比卡片
3. 添加实时数据更新
4. 优化消息展示组件
5. 添加交互式测试功能

