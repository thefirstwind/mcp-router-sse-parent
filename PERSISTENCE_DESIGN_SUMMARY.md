# MCP Router V3 æŒä¹…åŒ–è®¾è®¡æ–¹æ¡ˆ - å¿«é€Ÿå‚è€ƒ

> **ç‰ˆæœ¬**: v1.0 | **æ—¥æœŸ**: 2025-10-30 | **çŠ¶æ€**: è®¾è®¡é˜¶æ®µ

---

## ğŸ“Š æ ¸å¿ƒæŒ‡æ ‡ä¸€è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è®¾è®¡ç›®æ ‡æŒ‡æ ‡                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æŒä¹…åŒ–å»¶è¿Ÿ:     < 2ms      (å¼‚æ­¥ï¼Œä¸é˜»å¡ä¸»æµç¨‹)            â”‚
â”‚  æ‰¹é‡å†™å…¥:       500æ¡/æ‰¹    (å‡å°‘æ•°æ®åº“å‹åŠ›)               â”‚
â”‚  æŸ¥è¯¢å“åº”:       < 50ms     (å«ç´¢å¼•ä¼˜åŒ–)                     â”‚
â”‚  æ•°æ®ä¸¢å¤±ç‡:     < 0.001%   (å¤šå±‚é™çº§ä¿æŠ¤)                  â”‚
â”‚  ååé‡:         5000+ TPS  (æ”¯æŒé«˜å¹¶å‘)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ æŒä¹…åŒ–èŠ‚ç‚¹å…¨æ™¯å›¾

```
MCP Router V3 æŒä¹…åŒ–èŠ‚ç‚¹
â”‚
â”œâ”€ ğŸ”´ P0 - å¿…é¡»å®ç°ï¼ˆ8äººæ—¥ï¼‰
â”‚   â”œâ”€ 1. è·¯ç”±æ—¥å¿—æŒä¹…åŒ–            â­â­â­â­â­  (3äººæ—¥)
â”‚   â”œâ”€ 2. å¥åº·æ£€æŸ¥è®°å½•æŒä¹…åŒ–        â­â­â­â­â­  (2äººæ—¥)
â”‚   â”œâ”€ 4. æœåŠ¡å™¨æ³¨å†Œä¿¡æ¯æŒä¹…åŒ–      â­â­â­â­â­  (2äººæ—¥)
â”‚   â””â”€ 10. é”™è¯¯æ—¥å¿—æŒä¹…åŒ–           â­â­â­â­â­  (1äººæ—¥)
â”‚
â”œâ”€ ğŸŸ¡ P1 - é‡è¦å¢å¼ºï¼ˆ7äººæ—¥ï¼‰
â”‚   â”œâ”€ 3. SSEä¼šè¯ç®¡ç†æŒä¹…åŒ–         â­â­â­â­   (2äººæ—¥)
â”‚   â”œâ”€ 8. å·¥å…·è°ƒç”¨è®°å½•æŒä¹…åŒ–        â­â­â­â­   (2äººæ—¥)
â”‚   â””â”€ 9. æ€§èƒ½æŒ‡æ ‡æŒä¹…åŒ–            â­â­â­â­   (3äººæ—¥)
â”‚
â””â”€ ğŸŸ¢ P2 - ä¼˜åŒ–å®Œå–„ï¼ˆ4äººæ—¥ï¼‰
    â”œâ”€ 5. è¿æ¥æ± ç»Ÿè®¡æŒä¹…åŒ–          â­â­â­     (1äººæ—¥)
    â”œâ”€ 6. è´Ÿè½½å‡è¡¡å†³ç­–æŒä¹…åŒ–        â­â­â­     (2äººæ—¥)
    â””â”€ 7. ç†”æ–­å™¨çŠ¶æ€æŒä¹…åŒ–          â­â­â­     (1äººæ—¥)
```

---

## ğŸ“‹ åŠŸèƒ½èŠ‚ç‚¹é€ŸæŸ¥è¡¨

### 1ï¸âƒ£ è·¯ç”±æ—¥å¿—æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | `McpRouterService.routeRequest()` |
| **é¢‘ç‡** | âš¡ æé«˜ (æ¯ä¸ªè¯·æ±‚) |
| **ç­–ç•¥** | æ‰¹é‡å¼‚æ­¥å†™å…¥ (2ç§’/500æ¡) |
| **æ•°æ®è¡¨** | `routing_logs` |
| **æ ¸å¿ƒå­—æ®µ** | request_id, server_key, tool_name, duration, is_success |
| **åˆ†åŒº** | âœ… æŒ‰å¤©åˆ†åŒºï¼Œ30å¤©å½’æ¡£ |
| **é™çº§** | âœ… ç£ç›˜é˜Ÿåˆ— â†’ æ—¥å¿—æ–‡ä»¶ |

**å…³é”®ä»£ç ç‚¹**:
```java
// åœ¨ routeRequest() ä¸­
.doOnSuccess(response -> {
    routingLog.setIsSuccess(true);
    persistencePublisher.publishRoutingLog(routingLog);  // å¼‚æ­¥
})
```

---

### 2ï¸âƒ£ å¥åº·æ£€æŸ¥è®°å½•æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | `HealthCheckService.performHealthCheck()` |
| **é¢‘ç‡** | ğŸ”¸ ä¸­ç­‰ (15-60ç§’/æ¬¡) |
| **ç­–ç•¥** | æ‰¹é‡å¼‚æ­¥ + é‡‡æ · (5ç§’/100æ¡, 10%é‡‡æ ·) |
| **æ•°æ®è¡¨** | `health_check_records` |
| **æ ¸å¿ƒå­—æ®µ** | server_key, check_result, response_time, check_details |
| **åˆ†åŒº** | âœ… æŒ‰å‘¨åˆ†åŒºï¼Œ60å¤©å½’æ¡£ |
| **é™çº§** | âœ… ç£ç›˜é˜Ÿåˆ— |

**é‡‡æ ·ç­–ç•¥**:
```java
// åªæŒä¹…åŒ–å…³é”®äº‹ä»¶
if (isFailed || shouldSample(0.1)) {
    healthCheckBuffer.tryEmitNext(record);
}
```

---

### 3ï¸âƒ£ SSEä¼šè¯ç®¡ç†æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | `McpSseTransportProvider.connect()` / `disconnect()` |
| **é¢‘ç‡** | ğŸ”¸ ä¸­ç­‰ (è¿æ¥å˜æ›´æ—¶) |
| **ç­–ç•¥** | çŠ¶æ€å˜æ›´æ—¶å†™å…¥ + å®šæœŸæ›´æ–°(30ç§’) |
| **æ•°æ®è¡¨** | `sse_session_records` |
| **æ ¸å¿ƒå­—æ®µ** | session_id, client_id, status, message_count, session_duration |
| **åˆ†åŒº** | âœ… æŒ‰æœˆåˆ†åŒºï¼Œ90å¤©å½’æ¡£ |

**æ›´æ–°ç­–ç•¥**:
```java
@Scheduled(fixedDelay = 30000)
public void updateActiveSessionStats() {
    activeSessions.values().forEach(session -> 
        sseSessionBuffer.tryEmitNext(toRecord(session))
    );
}
```

---

### 4ï¸âƒ£ æœåŠ¡å™¨æ³¨å†Œä¿¡æ¯æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | `McpServerRegistry.registerServer()` |
| **é¢‘ç‡** | ğŸ”¹ ä½ (æœåŠ¡ä¸Šä¸‹çº¿) |
| **ç­–ç•¥** | åŒæ­¥æŒä¹…åŒ– (å¯æ¥å—) |
| **æ•°æ®è¡¨** | `mcp_servers` |
| **æ ¸å¿ƒå­—æ®µ** | server_key, server_name, host, port, healthy, metadata |
| **åˆ†åŒº** | âŒ ä¸éœ€è¦ |

**åŒæ­¥å†™å…¥**:
```java
public Mono<Void> registerServer(McpServerInfo server) {
    return Mono.fromRunnable(() -> 
        mcpServerMapper.insertOrUpdate(server)
    ).subscribeOn(Schedulers.boundedElastic());
}
```

---

### 5ï¸âƒ£ è¿æ¥æ± ç»Ÿè®¡æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | `McpClientManager` (å®šæœŸé‡‡æ ·) |
| **é¢‘ç‡** | ğŸ”¹ ä½ (60ç§’/æ¬¡) |
| **ç­–ç•¥** | å®šæ—¶é‡‡æ ·æ‰¹é‡å†™å…¥ |
| **æ•°æ®è¡¨** | `connection_pool_stats` |
| **æ ¸å¿ƒå­—æ®µ** | server_key, total_connections, active_connections, pool_usage_rate |

---

### 6ï¸âƒ£ è´Ÿè½½å‡è¡¡å†³ç­–æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | `LoadBalancer.selectServer()` |
| **é¢‘ç‡** | âš¡ æé«˜ (æ¯æ¬¡è·¯ç”±) |
| **ç­–ç•¥** | 1% é‡‡æ · + æ‰¹é‡å†™å…¥ |
| **æ•°æ®è¡¨** | `load_balance_decisions` |
| **æ ¸å¿ƒå­—æ®µ** | strategy, candidates, selected_server, selection_reason |

**é‡‡æ ·ä»£ç **:
```java
if (ThreadLocalRandom.current().nextDouble() < 0.01) {
    lbDecisionBuffer.tryEmitNext(decision);
}
```

---

### 7ï¸âƒ£ ç†”æ–­å™¨çŠ¶æ€æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | `CircuitBreakerService` (çŠ¶æ€å˜æ›´) |
| **é¢‘ç‡** | ğŸ”¹ æä½ (çŠ¶æ€å˜åŒ–æ—¶) |
| **ç­–ç•¥** | å®æ—¶æŒä¹…åŒ– (çŠ¶æ€å˜æ›´ç«‹å³å†™å…¥) |
| **æ•°æ®è¡¨** | `circuit_breaker_states` |
| **æ ¸å¿ƒå­—æ®µ** | server_key, state, failure_count, trigger_reason |

---

### 8ï¸âƒ£ å·¥å…·è°ƒç”¨è®°å½•æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | `McpClientManager.callTool()` |
| **é¢‘ç‡** | âš¡ é«˜ |
| **ç­–ç•¥** | æ‰¹é‡å¼‚æ­¥å†™å…¥ (2ç§’/500æ¡) |
| **æ•°æ®è¡¨** | `tool_call_records` |
| **æ ¸å¿ƒå­—æ®µ** | tool_name, arguments, result, duration, is_success |
| **åˆ†åŒº** | âœ… æŒ‰å¤©åˆ†åŒºï¼Œ30å¤©å½’æ¡£ |

---

### 9ï¸âƒ£ æ€§èƒ½æŒ‡æ ‡æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | å®šæ—¶èšåˆä»»åŠ¡ |
| **é¢‘ç‡** | ğŸ”¹ ä½ (60ç§’/æ¬¡) |
| **ç­–ç•¥** | å†…å­˜èšåˆ â†’ å®šæ—¶æŒä¹…åŒ– |
| **æ•°æ®è¡¨** | `performance_metrics` |
| **æ ¸å¿ƒå­—æ®µ** | total_requests, avg_response_time, p99_response_time, error_rate |

---

### ğŸ”Ÿ é”™è¯¯æ—¥å¿—æŒä¹…åŒ–

| é¡¹ç›® | è¯¦æƒ… |
|------|------|
| **è§¦å‘ç‚¹** | å…¨å±€å¼‚å¸¸å¤„ç†å™¨ |
| **é¢‘ç‡** | ğŸ”¸ ä¸­ç­‰ (é”™è¯¯å‘ç”Ÿæ—¶) |
| **ç­–ç•¥** | å¼‚æ­¥å†™å…¥ |
| **æ•°æ®è¡¨** | `error_logs` |
| **æ ¸å¿ƒå­—æ®µ** | error_type, error_message, stack_trace, request_id |
| **åˆ†åŒº** | âœ… æŒ‰å‘¨åˆ†åŒºï¼Œ30å¤©å½’æ¡£ |

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„ç²¾å

### æ ¸å¿ƒç»„ä»¶

```java
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      PersistenceEventPublisher (æ ¸å¿ƒè°ƒåº¦å™¨)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Sinks.Many<T> ç¼“å†²åŒº                         â”‚     â”‚
â”‚  â”‚    â”œâ”€ routingLogSink                          â”‚     â”‚
â”‚  â”‚    â”œâ”€ healthCheckSink                         â”‚     â”‚
â”‚  â”‚    â”œâ”€ sseSessionSink                          â”‚     â”‚
â”‚  â”‚    â””â”€ ...                                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                     â†“                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  Batch Writers (æ‰¹é‡å†™å…¥å™¨)                   â”‚     â”‚
â”‚  â”‚    - æ—¶é—´çª—å£: 2-5ç§’                           â”‚     â”‚
â”‚  â”‚    - å®¹é‡é˜ˆå€¼: 100-500æ¡                       â”‚     â”‚
â”‚  â”‚    - é™çº§ç­–ç•¥: ç£ç›˜é˜Ÿåˆ— â†’ æ—¥å¿—æ–‡ä»¶              â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‰¹é‡å†™å…¥é…ç½®

```java
// è·¯ç”±æ—¥å¿—: é«˜é¢‘ï¼Œæ¿€è¿›æ‰¹é‡
routingLogSink.asFlux()
    .buffer(Duration.ofSeconds(2), 500)
    .flatMap(this::batchPersist)
    .subscribe();

// å¥åº·æ£€æŸ¥: ä¸­é¢‘ï¼Œæ¸©å’Œæ‰¹é‡
healthCheckSink.asFlux()
    .buffer(Duration.ofSeconds(5), 100)
    .flatMap(this::batchPersist)
    .subscribe();

// æ€§èƒ½æŒ‡æ ‡: ä½é¢‘ï¼Œå°æ‰¹é‡
metricsSink.asFlux()
    .buffer(Duration.ofSeconds(10), 10)
    .flatMap(this::batchPersist)
    .subscribe();
```

### é™çº§ç­–ç•¥

```
L1: æ•°æ®åº“å†™å…¥å¤±è´¥
    â†“
    å†™å…¥ç£ç›˜é˜Ÿåˆ— (RocksDB)
    
L2: ç£ç›˜é˜Ÿåˆ—æ»¡
    â†“
    ä¸¢å¼ƒéå…³é”®æ—¥å¿—ï¼ˆä¿ç•™é”™è¯¯æ—¥å¿—ï¼‰
    
L3: æç«¯æƒ…å†µ
    â†“
    ä»…è¾“å‡ºåˆ°æ ‡å‡†æ—¥å¿—æ–‡ä»¶
```

---

## ğŸ“Š æ•°æ®è¡¨è®¾è®¡æ¦‚è§ˆ

| è¡¨å | åˆ†åŒºç­–ç•¥ | å½’æ¡£å‘¨æœŸ | é¢„ä¼°å¤§å°/å¤© | ç´¢å¼•æ•° |
|------|----------|----------|------------|--------|
| `routing_logs` | æŒ‰å¤© | 30å¤© | 500MB | 5 |
| `health_check_records` | æŒ‰å‘¨ | 60å¤© | 50MB | 3 |
| `sse_session_records` | æŒ‰æœˆ | 90å¤© | 10MB | 4 |
| `mcp_servers` | æ—  | æ°¸ä¹… | <1MB | 3 |
| `connection_pool_stats` | æŒ‰å‘¨ | 60å¤© | 5MB | 2 |
| `tool_call_records` | æŒ‰å¤© | 30å¤© | 300MB | 4 |
| `performance_metrics` | æŒ‰æœˆ | 180å¤© | 50MB | 2 |
| `error_logs` | æŒ‰å‘¨ | 30å¤© | 100MB | 4 |

**æ€»è®¡**: æ—¥å‡å¢é•¿çº¦ **1GB**, å½’æ¡£åç»´æŒ **30-50GB**

---

## ğŸš€ å®æ–½è·¯çº¿å›¾

### ç¬¬ä¸€é˜¶æ®µ: æ ¸å¿ƒåŠŸèƒ½ (8äººæ—¥)

```
Week 1:
  Day 1-3:  è·¯ç”±æ—¥å¿—æŒä¹…åŒ–
            - PersistenceEventPublisher åŸºç¡€æ¡†æ¶
            - RoutingLog å®ä½“å’Œ Mapper
            - æ‰¹é‡å†™å…¥å™¨
            - é™çº§ç­–ç•¥
            - åˆ†åŒºç®¡ç†
  
  Day 4-5:  å¥åº·æ£€æŸ¥è®°å½•æŒä¹…åŒ–
            - HealthCheckRecord å®ä½“å’Œ Mapper
            - é‡‡æ ·ç­–ç•¥
  
  Day 6-7:  æœåŠ¡å™¨æ³¨å†Œä¿¡æ¯æŒä¹…åŒ–
            - McpServer å®ä½“å’Œ Mapper
            - åŒæ­¥æŒä¹…åŒ–é€»è¾‘
  
  Day 8:    é”™è¯¯æ—¥å¿—æŒä¹…åŒ–
            - ErrorLog å®ä½“å’Œ Mapper
            - å…¨å±€å¼‚å¸¸æ‹¦æˆª

âœ… é‡Œç¨‹ç¢‘: æ ¸å¿ƒè¯Šæ–­èƒ½åŠ›å…·å¤‡
```

### ç¬¬äºŒé˜¶æ®µ: å¢å¼ºåŠŸèƒ½ (7äººæ—¥)

```
Week 2:
  Day 1-2:  SSEä¼šè¯ç®¡ç†æŒä¹…åŒ–
  Day 3-4:  å·¥å…·è°ƒç”¨è®°å½•æŒä¹…åŒ–
  Day 5-7:  æ€§èƒ½æŒ‡æ ‡æŒä¹…åŒ–

âœ… é‡Œç¨‹ç¢‘: å®Œæ•´ç›‘æ§ä½“ç³»å»ºç«‹
```

### ç¬¬ä¸‰é˜¶æ®µ: ä¼˜åŒ–å®Œå–„ (4äººæ—¥)

```
Week 3:
  Day 1:    è¿æ¥æ± ç»Ÿè®¡æŒä¹…åŒ–
  Day 2-3:  è´Ÿè½½å‡è¡¡å†³ç­–æŒä¹…åŒ–
  Day 4:    ç†”æ–­å™¨çŠ¶æ€æŒä¹…åŒ–

âœ… é‡Œç¨‹ç¢‘: å…¨åŠŸèƒ½ç”Ÿäº§å°±ç»ª
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- [ ] æ‰€æœ‰P0èŠ‚ç‚¹æŒä¹…åŒ–æ­£å¸¸å·¥ä½œ
- [ ] æ•°æ®åº“å†™å…¥å»¶è¿Ÿ < 2ms (P99)
- [ ] æ‰¹é‡å†™å…¥æˆåŠŸç‡ > 99.9%
- [ ] é™çº§ç­–ç•¥éªŒè¯é€šè¿‡
- [ ] åˆ†åŒºè‡ªåŠ¨åˆ›å»ºå’Œå½’æ¡£æ­£å¸¸

### æ€§èƒ½éªŒæ”¶

- [ ] è·¯ç”±ååé‡ä¸ä¸‹é™ (ä¿æŒ 5000+ TPS)
- [ ] è·¯ç”±å»¶è¿Ÿå¢åŠ  < 1ms
- [ ] æ•°æ®åº“è¿æ¥æ•° < 50
- [ ] CPU å¢åŠ  < 5%
- [ ] å†…å­˜å¢åŠ  < 100MB

### å¯é æ€§éªŒæ”¶

- [ ] æ•°æ®åº“æ•…éšœæ—¶ç³»ç»Ÿæ­£å¸¸è¿è¡Œ
- [ ] ç£ç›˜é™çº§è‡ªåŠ¨è§¦å‘
- [ ] è‡ªåŠ¨æ¢å¤åæ•°æ®è¡¥å½•
- [ ] åˆ†åŒºæ»¡è½½åè‡ªåŠ¨å½’æ¡£
- [ ] æŸ¥è¯¢æ€§èƒ½ç¨³å®š < 50ms

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [PERSISTENCE_DESIGN_PLAN.md](./PERSISTENCE_DESIGN_PLAN.md) | ğŸ“˜ å®Œæ•´è®¾è®¡æ–‡æ¡£ (æœ¬æ–‡çš„è¯¦ç»†ç‰ˆ) |
| [PERSISTENCE_GUIDE.md](./PERSISTENCE_GUIDE.md) | ğŸ“– æŒä¹…åŒ–æŠ€æœ¯æŒ‡å— |
| [database/schema.sql](./mcp-router-v3/database/schema.sql) | ğŸ—„ï¸ æ•°æ®åº“Schema |
| [PERSISTENCE_README.md](./PERSISTENCE_README.md) | ğŸ“‹ å¿«é€Ÿå¼€å§‹ |

---

## ğŸ¤” å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä½¿ç”¨æ‰¹é‡å†™å…¥è€Œä¸æ˜¯å®æ—¶å†™å…¥ï¼Ÿ

**A**: è·¯ç”±æ—¥å¿—ç­‰é«˜é¢‘æ“ä½œå¦‚æœå®æ—¶å†™å…¥ï¼Œä¼šäº§ç”Ÿå¤§é‡æ•°æ®åº“è¿æ¥å’Œäº‹åŠ¡ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚æ‰¹é‡å†™å…¥å¯ä»¥å°† 5000 TPS çš„å†™å…¥å‹åŠ›é™ä½åˆ° 10 TPS å·¦å³ã€‚

### Q2: å¼‚æ­¥æŒä¹…åŒ–ä¼šä¸ä¼šä¸¢æ•°æ®ï¼Ÿ

**A**: æœ‰æå°æ¦‚ç‡ (<0.001%)ã€‚ç¼“è§£æªæ–½ï¼š
1. ä½¿ç”¨å†…å­˜ç¼“å†²åŒº (Sinks.Many)
2. ç£ç›˜é™çº§é˜Ÿåˆ—
3. å…³é”®é”™è¯¯æ—¥å¿—å®æ—¶å†™å…¥

### Q3: åˆ†åŒºè¡¨å¦‚ä½•è‡ªåŠ¨ç®¡ç†ï¼Ÿ

**A**: é€šè¿‡å®šæ—¶ä»»åŠ¡ï¼š
- æ¯å¤©å‡Œæ™¨2ç‚¹åˆ›å»ºæœªæ¥7å¤©çš„åˆ†åŒº
- æ¯å‘¨æ—¥å‡Œæ™¨3ç‚¹å½’æ¡£30å¤©å‰çš„æ•°æ®

### Q4: æ•°æ®åº“æ•…éšœå¯¹è·¯ç”±æœ‰å½±å“å—ï¼Ÿ

**A**: **æ— å½±å“**ã€‚æŒä¹…åŒ–å®Œå…¨å¼‚æ­¥ï¼Œå¤±è´¥åè‡ªåŠ¨é™çº§åˆ°ç£ç›˜é˜Ÿåˆ—ï¼Œä¸å½±å“è·¯ç”±æ ¸å¿ƒåŠŸèƒ½ã€‚

### Q5: å¦‚ä½•æŸ¥è¯¢å†å²æ•°æ®ï¼Ÿ

**A**: 
1. 30å¤©å†…: æŸ¥è¯¢ä¸»è¡¨ (æ€§èƒ½æœ€ä½³)
2. 30-180å¤©: æŸ¥è¯¢å½’æ¡£è¡¨
3. >180å¤©: æŸ¥è¯¢å¤‡ä»½æˆ–æ•°æ®æ¹–

---

## ğŸ“ è”ç³»æ–¹å¼

| è§’è‰² | è”ç³»äºº | èŒè´£ |
|------|--------|------|
| **æŠ€æœ¯è´Ÿè´£äºº** | @tech-lead | æ•´ä½“æ–¹æ¡ˆè®¾è®¡ |
| **DBA** | @dba | æ•°æ®åº“ä¼˜åŒ–ã€åˆ†åŒºç®¡ç† |
| **å¼€å‘** | @dev-team | åŠŸèƒ½å®ç° |
| **æµ‹è¯•** | @qa-team | åŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯• |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-30  
**æœ€åæ›´æ–°**: 2025-10-30  
**çŠ¶æ€**: âœ… è®¾è®¡å®Œæˆï¼Œå¾…è¯„å®¡

