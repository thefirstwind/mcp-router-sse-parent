{"config":{"lang":["zh","en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\ude80 MCP Router \u9879\u76ee\u5feb\u901f\u5bfc\u822a","text":"<p>\u6b22\u8fce\uff01\u8fd9\u662f\u60a8\u5f00\u59cb\u4f7f\u7528\u672c\u9879\u76ee\u7684\u6700\u4f73\u8d77\u70b9</p> <p>\u66f4\u65b0\u65f6\u95f4: 2026-01-28</p>"},{"location":"#_1","title":"\ud83c\udfaf \u6211\u60f3...","text":""},{"location":"#_2","title":"\ud83c\udd95 \u521a\u63a5\u89e6\u8fd9\u4e2a\u9879\u76ee","text":"<p>\u2192 \u9605\u8bfb \u9879\u76ee README \u2192 \u67e5\u770b \u5feb\u901f\u5f00\u59cb\u6307\u5357</p>"},{"location":"#_3","title":"\ud83d\udcbb \u5f00\u59cb\u5f00\u53d1","text":"<p>\u2192 \u9605\u8bfb \u8d21\u732e\u6307\u5357 \u2192 \u67e5\u770b GitHub \u5de5\u4f5c\u6d41 \u2192 \u4f7f\u7528 \u6807\u51c6\u5de5\u4f5c\u6d41 \u5f00\u53d1</p>"},{"location":"#mcp-server","title":"\ud83d\udd27 \u6dfb\u52a0\u65b0\u7684 MCP Server","text":"<p>\u2192 \u4f7f\u7528\u5de5\u4f5c\u6d41\uff1aadd-mcp-server.md \u2192 \u544a\u8bc9 AI\uff1a\"\u8bf7\u6309\u7167 add-mcp-server \u5de5\u4f5c\u6d41\u5e2e\u6211\u6dfb\u52a0 XXX MCP Server\"</p>"},{"location":"#ai-agent","title":"\ud83e\udd16 \u5f00\u53d1 AI Agent","text":"<p>\u2192 \u4f7f\u7528\u5de5\u4f5c\u6d41\uff1aadd-agent-workflow.md \u2192 \u544a\u8bc9 AI\uff1a\"\u8bf7\u6309\u7167 add-agent-workflow \u521b\u5efa XXX Agent\"</p>"},{"location":"#_4","title":"\ud83d\udd0d \u4ee3\u7801\u5ba1\u67e5","text":"<p>\u2192 \u4f7f\u7528\u5de5\u4f5c\u6d41\uff1areview.md \u2192 \u547d\u4ee4\uff1a<code>/review path/to/file.java</code></p>"},{"location":"#google-gemini","title":"\ud83d\udcda \u4e86\u89e3 Google Gemini \u6574\u5408","text":"<p>\u2192 \u67e5\u770b Gemini \u6574\u5408\u6307\u5357 \u2192 \u67e5\u770b \u5feb\u901f\u5f00\u59cb \u2192 \u67e5\u770b \u5b8c\u6574\u8ba1\u5212</p>"},{"location":"#_5","title":"\ud83d\udee0\ufe0f \u4e86\u89e3\u5de5\u4f5c\u6d41\u6700\u4f73\u5b9e\u8df5","text":"<p>\u2192 \u67e5\u770b \u5de5\u4f5c\u6d41\u5bf9\u6bd4 \u2192 \u67e5\u770b \u5de5\u4f5c\u6d41\u603b\u7ed3 \u2192 \u67e5\u770b \u8bbe\u7f6e\u5b8c\u6210\u62a5\u544a</p>"},{"location":"#_6","title":"\ud83d\udc1b \u62a5\u544a\u95ee\u9898","text":"<p>\u2192 \u521b\u5efa Bug Report</p>"},{"location":"#_7","title":"\ud83d\udca1 \u63d0\u51fa\u5efa\u8bae","text":"<p>\u2192 \u521b\u5efa Feature Request</p>"},{"location":"#_8","title":"\ud83d\udcc2 \u9879\u76ee\u7ed3\u6784\u5feb\u901f\u4e86\u89e3","text":"<pre><code>mcp-router-sse-parent/\n\u2502\n\u251c\u2500\u2500 \ud83d\udd27 \u6a21\u5757\n\u2502   \u251c\u2500\u2500 mcp-router-v3/       # MCP \u8def\u7531\u5668\n\u2502   \u251c\u2500\u2500 mcp-server-v3/       # MCP Server \u793a\u4f8b\n\u2502   \u251c\u2500\u2500 mcp-server-v4/       # MCP Server \u793a\u4f8b\n\u2502   \u251c\u2500\u2500 mcp-server-v6/       # MCP Server \u793a\u4f8b\uff08\u6700\u65b0\uff09\n\u2502   \u2514\u2500\u2500 mcp-client/          # MCP \u5ba2\u6237\u7aef\n\u2502\n\u251c\u2500\u2500 \ud83e\udd16 Spring AI Alibaba\n\u2502   \u2514\u2500\u2500 spring-ai-alibaba/   # \u5b8c\u6574\u7684 AI Agent \u6846\u67b6\n\u2502\n\u251c\u2500\u2500 \ud83d\udccb \u5de5\u4f5c\u6d41\n\u2502   \u2514\u2500\u2500 .agent/workflows/    # \u6807\u51c6\u5316\u5f00\u53d1\u5de5\u4f5c\u6d41\n\u2502       \u251c\u2500\u2500 add-mcp-server.md\n\u2502       \u251c\u2500\u2500 add-agent-workflow.md\n\u2502       \u2514\u2500\u2500 review.md\n\u2502\n\u251c\u2500\u2500 \u2699\ufe0f GitHub \u914d\u7f6e\n\u2502   \u2514\u2500\u2500 .github/\n\u2502       \u251c\u2500\u2500 workflows/       # CI/CD \u81ea\u52a8\u5316\n\u2502       \u251c\u2500\u2500 PULL_REQUEST_TEMPLATE.md\n\u2502       \u2514\u2500\u2500 ISSUE_TEMPLATE/\n\u2502\n\u251c\u2500\u2500 \ud83d\udcda \u6587\u6863\n\u2502   \u2514\u2500\u2500 docs/\n\u2502       \u251c\u2500\u2500 START_HERE.md                    \u2b05\ufe0f \u4f60\u5728\u8fd9\u91cc\n\u2502       \u251c\u2500\u2500 GITHUB_SETUP_COMPLETE.md        # GitHub \u8bbe\u7f6e\u5b8c\u6210\n\u2502       \u251c\u2500\u2500 GITHUB_WORKFLOWS_COMPARISON.md  # \u5de5\u4f5c\u6d41\u5bf9\u6bd4\n\u2502       \u251c\u2500\u2500 WORKFLOWS_SUMMARY.md            # \u5de5\u4f5c\u6d41\u603b\u7ed3\n\u2502       \u251c\u2500\u2500 GEMINI_INTEGRATION_GUIDE.md     # Gemini \u6574\u5408\n\u2502       \u2514\u2500\u2500 ...\n\u2502\n\u2514\u2500\u2500 \ud83d\udcd6 \u6307\u5357\n    \u251c\u2500\u2500 README.md            # \u9879\u76ee\u4e3b\u6587\u6863\n    \u2514\u2500\u2500 CONTRIBUTING.md      # \u8d21\u732e\u6307\u5357\n</code></pre>"},{"location":"#_9","title":"\ud83d\udd25 \u6700\u5e38\u7528\u7684\u547d\u4ee4","text":""},{"location":"#_10","title":"\u672c\u5730\u5f00\u53d1","text":"<pre><code># \u6784\u5efa\u6240\u6709\u6a21\u5757\nmvn clean install\n\n# \u8fd0\u884c\u7279\u5b9a\u6a21\u5757\ncd mcp-server-v6\nmvn spring-boot:run\n\n# \u8fd0\u884c\u6d4b\u8bd5\nmvn test\n</code></pre>"},{"location":"#git","title":"Git \u5de5\u4f5c\u6d41","text":"<pre><code># \u521b\u5efa\u529f\u80fd\u5206\u652f\ngit checkout -b feature/your-feature\n\n# \u63d0\u4ea4\uff08\u9075\u5faa\u89c4\u8303\uff09\ngit commit -m \"feat(module): add new feature\"\n\n# \u63a8\u9001\ngit push origin feature/your-feature\n\n# \u521b\u5efa PR \u540e\uff0cGitHub Actions \u81ea\u52a8\u8fd0\u884c\u6d4b\u8bd5\n</code></pre>"},{"location":"#ai","title":"\u4f7f\u7528 AI \u5de5\u4f5c\u6d41","text":"<pre><code># \u6dfb\u52a0 MCP Server\n\"\u8bf7\u6309\u7167 .agent/workflows/add-mcp-server.md \u5de5\u4f5c\u6d41\uff0c\n\u5e2e\u6211\u6dfb\u52a0\u4e00\u4e2a\u5929\u6c14\u67e5\u8be2\u7684 MCP Server\"\n\n# \u5f00\u53d1 Agent\n\"\u8bf7\u6309\u7167 .agent/workflows/add-agent-workflow.md \u5de5\u4f5c\u6d41\uff0c\n\u521b\u5efa\u4e00\u4e2a\u591a\u57ce\u5e02\u5929\u6c14\u5bf9\u6bd4 Agent\"\n\n# \u4ee3\u7801\u5ba1\u67e5\n/review path/to/your/file.java\n</code></pre>"},{"location":"#_11","title":"\ud83d\udccb \u68c0\u67e5\u6e05\u5355","text":""},{"location":"#_12","title":"\u2705 \u65b0\u52a0\u5165\u9879\u76ee\u7684\u5f00\u53d1\u8005","text":"<ul> <li> \u9605\u8bfb README.md</li> <li> \u9605\u8bfb CONTRIBUTING.md</li> <li> \u8bbe\u7f6e\u672c\u5730\u5f00\u53d1\u73af\u5883\uff08Java 17+ Maven 3.6+\uff09</li> <li> \u6210\u529f\u8fd0\u884c\u4e00\u4e2a\u6a21\u5757</li> <li> \u4e86\u89e3 GitHub Flow \u5de5\u4f5c\u6d41</li> <li> \u719f\u6089 3 \u4e2a\u6807\u51c6\u5de5\u4f5c\u6d41</li> </ul>"},{"location":"#pr","title":"\u2705 \u51c6\u5907\u63d0\u4ea4\u7b2c\u4e00\u4e2a PR","text":"<ul> <li> \u521b\u5efa\u4e86\u6b63\u786e\u7684\u5206\u652f\u540d\u79f0</li> <li> Commit message \u9075\u5faa\u89c4\u8303</li> <li> \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7</li> <li> \u6dfb\u52a0\u4e86\u5fc5\u8981\u7684\u6587\u6863</li> <li> \u586b\u5199\u4e86 PR \u6a21\u677f</li> </ul>"},{"location":"#_13","title":"\u2705 \u51c6\u5907\u6dfb\u52a0\u65b0\u529f\u80fd","text":"<ul> <li> \u67e5\u770b\u4e86\u76f8\u5e94\u7684\u5de5\u4f5c\u6d41\u6587\u6863</li> <li> \u7406\u89e3\u4e86\u529f\u80fd\u9700\u6c42</li> <li> \u8bbe\u8ba1\u4e86\u5b9e\u73b0\u65b9\u6848</li> <li> \u51c6\u5907\u4e86\u6d4b\u8bd5\u7b56\u7565</li> </ul>"},{"location":"#_14","title":"\ud83c\udf93 \u5b66\u4e60\u8def\u5f84","text":""},{"location":"#1","title":"\u7b2c 1 \u5929\uff1a\u4e86\u89e3\u9879\u76ee","text":"<ol> <li>\u9605\u8bfb\u4e3b README.md</li> <li>\u8fd0\u884c\u4e00\u4e2a MCP Server</li> <li>\u6d4b\u8bd5 MCP Client \u8c03\u7528</li> </ol>"},{"location":"#2-3","title":"\u7b2c 2-3 \u5929\uff1a\u719f\u6089\u5de5\u4f5c\u6d41","text":"<ol> <li>\u9605\u8bfb CONTRIBUTING.md</li> <li>\u9605\u8bfb GITHUB_WORKFLOWS_COMPARISON.md</li> <li>\u4f7f\u7528\u5de5\u4f5c\u6d41\u5b8c\u6210\u4e00\u4e2a\u5c0f\u6539\u52a8</li> </ol>"},{"location":"#4-5","title":"\u7b2c 4-5 \u5929\uff1a\u5b9e\u8df5","text":"<ol> <li>\u4f7f\u7528 <code>add-mcp-server.md</code> \u6dfb\u52a0\u4e00\u4e2a MCP Server</li> <li>\u6216\u4f7f\u7528 <code>add-agent-workflow.md</code> \u5f00\u53d1\u4e00\u4e2a Agent</li> <li>\u63d0\u4ea4\u4f60\u7684\u7b2c\u4e00\u4e2a PR</li> </ol>"},{"location":"#1_1","title":"\u7b2c 1 \u5468\u540e\uff1a\u6df1\u5165","text":"<ol> <li>\u63a2\u7d22 Spring AI Alibaba \u6846\u67b6</li> <li>\u4e86\u89e3 Gemini \u6574\u5408\u65b9\u6848</li> <li>\u4f18\u5316\u73b0\u6709\u4ee3\u7801</li> </ol>"},{"location":"#_15","title":"\ud83d\udca1 \u5e38\u89c1\u95ee\u9898\u901f\u67e5","text":""},{"location":"#q","title":"Q: \u4ece\u54ea\u91cc\u5f00\u59cb\uff1f","text":"<p>A: \u4ece\u8fd9\u4e2a\u6587\u6863\u5f00\u59cb\uff0c\u7136\u540e\u9605\u8bfb README.md</p>"},{"location":"#q_1","title":"Q: \u5982\u4f55\u6dfb\u52a0\u65b0\u529f\u80fd\uff1f","text":"<p>A: \u4f7f\u7528 \u6807\u51c6\u5de5\u4f5c\u6d41\uff0c\u8ba9 AI \u5e2e\u4f60\u6309\u6d41\u7a0b\u6267\u884c</p>"},{"location":"#q_2","title":"Q: \u63d0\u4ea4\u4ee3\u7801\u9700\u8981\u6ce8\u610f\u4ec0\u4e48\uff1f","text":"<p>A: \u9605\u8bfb CONTRIBUTING.md\uff0c\u7279\u522b\u6ce8\u610f\u5206\u652f\u547d\u540d\u548c commit \u89c4\u8303</p>"},{"location":"#q-cicd","title":"Q: CI/CD \u5982\u4f55\u5de5\u4f5c\uff1f","text":"<p>A: \u67e5\u770b GITHUB_SETUP_COMPLETE.md</p>"},{"location":"#q-ai","title":"Q: \u5982\u4f55\u4f7f\u7528 AI \u8f85\u52a9\u5f00\u53d1\uff1f","text":"<p>A: \u544a\u8bc9 AI \"\u8bf7\u6309\u7167 XXX \u5de5\u4f5c\u6d41\u6267\u884c...\"\uff0c\u5de5\u4f5c\u6d41\u5728 <code>.agent/workflows/</code></p>"},{"location":"#q_3","title":"Q: \u6709\u95ee\u9898\u600e\u4e48\u529e\uff1f","text":"<p>A:  1. \u67e5\u770b \u6587\u6863\u7d22\u5f15 2. \u641c\u7d22\u76f8\u5173\u6587\u6863 3. \u521b\u5efa Issue</p>"},{"location":"#_16","title":"\ud83d\udd17 \u91cd\u8981\u94fe\u63a5","text":""},{"location":"#_17","title":"\u9879\u76ee\u76f8\u5173","text":"<ul> <li>GitHub \u4ed3\u5e93</li> <li>Issues</li> <li>Pull Requests</li> <li>Actions</li> </ul>"},{"location":"#_18","title":"\u6280\u672f\u6587\u6863","text":"<ul> <li>Spring AI \u5b98\u65b9</li> <li>Spring AI Alibaba</li> <li>Gemini API</li> </ul>"},{"location":"#_19","title":"\u5de5\u4f5c\u6d41\u53c2\u8003","text":"<ul> <li>GitHub Flow</li> <li>Conventional Commits</li> </ul>"},{"location":"#_20","title":"\ud83c\udfaf \u5feb\u901f\u51b3\u7b56","text":"<pre><code>\u6211\u60f3...\n\u251c\u2500 \u4e86\u89e3\u9879\u76ee \u2192 README.md\n\u251c\u2500 \u5f00\u59cb\u5f00\u53d1 \u2192 CONTRIBUTING.md\n\u251c\u2500 \u6dfb\u52a0\u529f\u80fd \u2192 .agent/workflows/add-*.md\n\u251c\u2500 \u4e86\u89e3\u5de5\u4f5c\u6d41 \u2192 GITHUB_WORKFLOWS_COMPARISON.md\n\u251c\u2500 \u6574\u5408 Gemini \u2192 GEMINI_INTEGRATION_GUIDE.md\n\u2514\u2500 \u62a5\u544a\u95ee\u9898 \u2192 GitHub Issues\n</code></pre> <p>\u6b22\u8fce\u6765\u5230 MCP Router \u9879\u76ee\uff01\u795d\u60a8\u5f00\u53d1\u6109\u5feb\uff01 \ud83c\udf89</p> <p>\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u6b22\u8fce\u901a\u8fc7 Issues \u6216 PR \u4e0e\u6211\u4eec\u4ea4\u6d41\u3002</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/","title":"\ud83c\udf89 \u5168\u81ea\u52a8\u5316\u6587\u6863\u7cfb\u7edf\u8bbe\u7f6e\u5b8c\u6210","text":"<p>\u4e00\u952e\u64cd\u4f5c\uff0c\u5168\u81ea\u52a8\u5316\uff01</p> <p>\u5b8c\u6210\u65f6\u95f4: 2026-01-28</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_2","title":"\u2728 \u4ec0\u4e48\u662f\u5168\u81ea\u52a8\u5316\uff1f","text":"<p>\u60a8\u53ea\u9700\u6267\u884c\u4e00\u4e2a\u547d\u4ee4\uff0c\u5269\u4e0b\u7684\u5168\u90e8\u81ea\u52a8\u5b8c\u6210\uff1a</p> <pre><code># \u5c31\u8fd9\u4e00\u4e2a\u547d\u4ee4\uff01\nbash scripts/maintenance/auto-reorganize-docs.sh\n</code></pre> <p>\u7136\u540e\uff1a 1. \ud83d\udce6 \u81ea\u52a8\u91cd\u7ec4\u6240\u6709\u6587\u6863 2. \ud83d\ude80 \u63a8\u9001\u5230GitHub 3. \ud83e\udd16 GitHub Actions \u81ea\u52a8\u6784\u5efa 4. \ud83c\udf10 \u81ea\u52a8\u53d1\u5e03\u5230 GitHub Pages</p> <p>\u60a8\u7684\u6587\u6863\u7f51\u7ad9\u5730\u5740: <code>https://thefirstwind.github.io/mcp-router-sse-parent</code></p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_3","title":"\ud83c\udfaf \u5df2\u7ecf\u4e3a\u60a8\u51c6\u5907\u597d\u7684","text":""},{"location":"AUTO_DOCS_SETUP_COMPLETE/#1-mkdocs-material","title":"1. MkDocs Material \u914d\u7f6e","text":"<p>\u2705 <code>mkdocs.yml</code> - \u73b0\u4ee3\u5316\u7684\u6587\u6863\u7ad9\u70b9\u914d\u7f6e - \ud83c\udfa8 Material Design \u4e3b\u9898 - \ud83d\udd0d \u5168\u6587\u641c\u7d22 - \ud83c\udf13 \u6df1\u8272/\u6d45\u8272\u6a21\u5f0f - \ud83d\udcf1 \u79fb\u52a8\u7aef\u54cd\u5e94\u5f0f - \ud83c\udde8\ud83c\uddf3 \u4e2d\u6587\u652f\u6301</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#2-github-actions","title":"2. GitHub Actions \u81ea\u52a8\u5316","text":"<p>\u2705 <code>.github/workflows/docs.yml</code> - \u6587\u6863\u81ea\u52a8\u90e8\u7f72 - \ud83d\udcdd \u68c0\u6d4b\u5230\u6587\u6863\u53d8\u66f4\u81ea\u52a8\u89e6\u53d1 - \ud83c\udfd7\ufe0f \u81ea\u52a8\u6784\u5efa\u6587\u6863\u7ad9\u70b9 - \ud83d\ude80 \u81ea\u52a8\u90e8\u7f72\u5230 GitHub Pages - \u26a1 \u6bcf\u6b21\u63d0\u4ea4\u540e\u51e0\u5206\u949f\u5185\u751f\u6548</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#3","title":"3. \u81ea\u52a8\u91cd\u7ec4\u811a\u672c","text":"<p>\u2705 <code>scripts/maintenance/auto-reorganize-docs.sh</code> - \u4e00\u952e\u91cd\u7ec4 - \u81ea\u52a8\u79fb\u52a8\u6240\u6709\u6587\u6863\u5230\u6b63\u786e\u4f4d\u7f6e - \u81ea\u52a8\u521b\u5efa\u7d22\u5f15\u6587\u4ef6 - \u81ea\u52a8\u5f52\u6863\u8fc7\u65f6\u6587\u6863 - \u81ea\u52a8\u6574\u7406\u811a\u672c</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#3_1","title":"\ud83d\ude80 \u7acb\u5373\u4f7f\u7528\uff083\u6b65\uff09","text":""},{"location":"AUTO_DOCS_SETUP_COMPLETE/#1","title":"\u6b65\u9aa4 1: \u8fd0\u884c\u91cd\u7ec4\u811a\u672c","text":"<pre><code>cd /Users/shine/projects.mcp-router-sse-parent\nbash scripts/maintenance/auto-reorganize-docs.sh\n</code></pre> <p>\u8fd9\u4f1a\u81ea\u52a8: - \u2705 \u79fb\u52a8\u6240\u6709\u6587\u6863\u5230\u65b0\u4f4d\u7f6e - \u2705 \u521b\u5efa\u7d22\u5f15\u6587\u4ef6 - \u2705 \u5f52\u6863\u8fc7\u65f6\u6587\u6863</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#2-github","title":"\u6b65\u9aa4 2: \u63d0\u4ea4\u5230GitHub","text":"<pre><code>git add .\ngit commit -m \"docs: setup automated documentation system with MkDocs\"\ngit push origin main\n</code></pre>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#3_2","title":"\u6b65\u9aa4 3: \u7b49\u5f85\u81ea\u52a8\u90e8\u7f72","text":"<ul> <li>\u8bbf\u95ee <code>https://github.com/yourname/mcp-router-sse-parent/actions</code></li> <li>\u67e5\u770b \"Deploy MkDocs Documentation\" \u5de5\u4f5c\u6d41\u6267\u884c</li> <li>\u51e0\u5206\u949f\u540e\u8bbf\u95ee <code>https://yourname.github.io/mcp-router-sse-parent</code></li> </ul> <p>\u5c31\u8fd9\u4e48\u7b80\u5355\uff01 \u2728</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_4","title":"\ud83d\udcca \u6587\u6863\u7ed3\u6784\uff08\u81ea\u52a8\u751f\u6210\uff09","text":"<pre><code>docs/\n\u251c\u2500\u2500 index.md                  # \u9996\u9875\n\u251c\u2500\u2500 quick-start/              # \u5feb\u901f\u5f00\u59cb\n\u2502   \u251c\u2500\u2500 overview.md\n\u2502   \u251c\u2500\u2500 quick-start.md\n\u2502   \u2514\u2500\u2500 setup.md\n\u251c\u2500\u2500 tutorials/                # \u6559\u7a0b\n\u2502   \u2514\u2500\u2500 index.md\n\u251c\u2500\u2500 how-to-guides/            # \u64cd\u4f5c\u6307\u5357\n\u2502   \u251c\u2500\u2500 index.md\n\u2502   \u251c\u2500\u2500 add-mcp-server.md\n\u2502   \u251c\u2500\u2500 add-agent.md\n\u2502   \u2514\u2500\u2500 integrate-gemini.md\n\u251c\u2500\u2500 explanations/             # \u8bf4\u660e\u6587\u6863\n\u2502   \u251c\u2500\u2500 index.md\n\u2502   \u251c\u2500\u2500 architecture.md\n\u2502   \u2514\u2500\u2500 workflow-comparison.md\n\u251c\u2500\u2500 reference/                # \u53c2\u8003\u6587\u6863\n\u2502   \u251c\u2500\u2500 index.md\n\u2502   \u251c\u2500\u2500 api.md\n\u2502   \u2514\u2500\u2500 configuration.md\n\u251c\u2500\u2500 workflows/                # \u5de5\u4f5c\u6d41\n\u2502   \u251c\u2500\u2500 index.md\n\u2502   \u251c\u2500\u2500 development.md\n\u2502   \u2514\u2500\u2500 ci-cd.md\n\u251c\u2500\u2500 contributing/             # \u8d21\u732e\u6307\u5357\n\u2502   \u2514\u2500\u2500 index.md\n\u2514\u2500\u2500 archived/                 # \u5f52\u6863\n    \u2514\u2500\u2500 (\u65e7\u6587\u6863)\n</code></pre>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_5","title":"\ud83c\udfa8  \u6587\u6863\u7f51\u7ad9\u529f\u80fd","text":""},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_6","title":"\u2728 \u73b0\u4ee3\u5316\u754c\u9762","text":"<ul> <li>Material Design: \u8c37\u6b4c\u8bbe\u8ba1\u89c4\u8303</li> <li>\u54cd\u5e94\u5f0f: \u5b8c\u7f8e\u652f\u6301\u624b\u673a/\u5e73\u677f/PC</li> <li>\u6697\u9ed1\u6a21\u5f0f: \u62a4\u773c\u6a21\u5f0f</li> <li>\u4ee3\u7801\u9ad8\u4eae: \u6f02\u4eae\u7684\u4ee3\u7801\u5c55\u793a</li> </ul>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_7","title":"\ud83d\udd0d \u5f3a\u5927\u641c\u7d22","text":"<ul> <li>\u5168\u6587\u641c\u7d22</li> <li>\u5b9e\u65f6\u5efa\u8bae</li> <li>\u9ad8\u4eae\u5339\u914d</li> </ul>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_8","title":"\ud83d\udcf1 \u79fb\u52a8\u53cb\u597d","text":"<ul> <li>\u89e6\u6478\u4f18\u5316</li> <li>\u5feb\u901f\u52a0\u8f7d</li> <li>\u79bb\u7ebf\u53ef\u7528</li> </ul>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_9","title":"\ud83c\udf10 \u591a\u8bed\u8a00","text":"<ul> <li>\u4e2d\u6587\u754c\u9762</li> <li>\u82f1\u6587fallback</li> </ul>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_10","title":"\ud83d\udd04 \u672a\u6765\u7684\u5de5\u4f5c\u6d41","text":""},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_11","title":"\u521b\u5efa/\u66f4\u65b0\u6587\u6863","text":"<pre><code># 1. \u7f16\u8f91\u6587\u6863\nvim docs/how-to-guides/my-new-guide.md\n\n# 2. \u63d0\u4ea4\ngit add docs/how-to-guides/my-new-guide.md\ngit commit -m \"docs: add new guide\"\ngit push\n\n# 3. \u81ea\u52a8\u90e8\u7f72\uff01\n# \u51e0\u5206\u949f\u540e\u81ea\u52a8\u4e0a\u7ebf\n</code></pre> <p>\u65e0\u9700\u4efb\u4f55\u624b\u52a8\u6784\u5efa\u6216\u90e8\u7f72\u64cd\u4f5c\uff01</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#mkdocs-vs","title":"\ud83d\udca1 MkDocs vs \u624b\u52a8\u7ba1\u7406","text":""},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_12","title":"\u4e4b\u524d\uff08\u624b\u52a8\uff09","text":"<pre><code>\u95ee\u9898 1: \u6587\u6863\u6563\u4e71\n\u89e3\u51b3: \u624b\u52a8\u6574\u7406\uff0c\u5bb9\u6613\u51fa\u9519\n\n\u95ee\u9898 2: \u96be\u4ee5\u67e5\u627e\n\u89e3\u51b3: \u624b\u52a8\u7ef4\u62a4\u76ee\u5f55\uff0c\u8d39\u65f6\u8d39\u529b\n\n\u95ee\u9898 3: \u6837\u5f0f\u4e0d\u7edf\u4e00\n\u89e3\u51b3: \u624b\u52a8\u8c03\u6574CSS\uff0c\u7ef4\u62a4\u56f0\u96be\n\n\u95ee\u9898 4: \u66f4\u65b0\u9ebb\u70e6\n\u89e3\u51b3: \u624b\u52a8\u6784\u5efa\u90e8\u7f72\n</code></pre>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_13","title":"\u73b0\u5728\uff08\u81ea\u52a8\uff09","text":"<pre><code>\u2705 \u6587\u6863\u81ea\u52a8\u7ec4\u7ec7\n\u2705 \u5168\u6587\u641c\u7d22\u81ea\u52a8\u7d22\u5f15\n\u2705 \u4e3b\u9898\u81ea\u52a8\u5e94\u7528\n\u2705 \u66f4\u65b0\u81ea\u52a8\u90e8\u7f72\n</code></pre>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_14","title":"\ud83d\udee0\ufe0f \u9ad8\u7ea7\u529f\u80fd\uff08\u53ef\u9009\uff09","text":""},{"location":"AUTO_DOCS_SETUP_COMPLETE/#1_1","title":"1. \u7248\u672c\u7ba1\u7406","text":"<pre><code># \u5b89\u88c5mike\npip install mike\n\n# \u521b\u5efa\u7248\u672c\nmike deploy --push --update-aliases 1.0 latest\nmike deploy --push --update-aliases 2.0 latest\n</code></pre>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#2-api","title":"2. API\u6587\u6863\u81ea\u52a8\u751f\u6210","text":"<pre><code># \u5728mkdocs.yml\u4e2d\u6dfb\u52a0\nplugins:\n  - mkdocstrings:\n      handlers:\n        python:\n          paths: [src]\n</code></pre>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#3_3","title":"3. \u81ea\u5b9a\u4e49\u4e3b\u9898","text":"<p>\u4fee\u6539 <code>mkdocs.yml</code> \u4e2d\u7684 <code>theme</code> \u914d\u7f6e\u5373\u53ef\u3002</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_15","title":"\ud83d\udcc8 \u6210\u529f\u6307\u6807","text":"<p>\u73b0\u5728\u60a8\u53ef\u4ee5\u8f7b\u677e\u8ffd\u8e2a:</p> \u6307\u6807 \u5982\u4f55\u67e5\u770b \u6587\u6863\u8bbf\u95ee\u91cf GitHub Pages \u5206\u6790 \u641c\u7d22\u70ed\u8bcd MkDocs \u641c\u7d22\u65e5\u5fd7 \u6784\u5efa\u72b6\u6001 GitHub Actions \u9875\u9762 \u66f4\u65b0\u9891\u7387 Git commit \u5386\u53f2"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_16","title":"\ud83c\udf93 \u5b66\u4e60\u8d44\u6e90","text":""},{"location":"AUTO_DOCS_SETUP_COMPLETE/#mkdocs-material","title":"MkDocs Material","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> <li>\u793a\u4f8b\u7ad9\u70b9</li> <li>\u914d\u7f6e\u53c2\u8003</li> </ul>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#github-actions","title":"GitHub Actions","text":"<ul> <li>\u6587\u6863\u90e8\u7f72</li> <li>\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_17","title":"\u2753 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"AUTO_DOCS_SETUP_COMPLETE/#q-github-pages","title":"Q: GitHub Pages \u600e\u4e48\u542f\u7528\uff1f","text":"<p>A:  1. \u8bbf\u95ee\u4ed3\u5e93 Settings \u2192 Pages 2. Source: \u9009\u62e9 \"Deploy from a branch\" 3. Branch: \u9009\u62e9 <code>gh-pages</code> \u5206\u652f, <code>/ (root)</code> \u76ee\u5f55 4. Save</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#q","title":"Q: \u5982\u4f55\u81ea\u5b9a\u4e49\u57df\u540d\uff1f","text":"<p>A:  \u5728 <code>mkdocs.yml</code> \u4e2d\u6dfb\u52a0: <pre><code>site_url: https://docs.example.com\n</code></pre> \u7136\u540e\u5728 GitHub Pages \u8bbe\u7f6e\u4e2d\u914d\u7f6e\u81ea\u5b9a\u4e49\u57df\u540d\u3002</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#q_1","title":"Q: \u6784\u5efa\u5931\u8d25\u600e\u4e48\u529e\uff1f","text":"<p>A: 1. \u67e5\u770b Actions \u9875\u9762\u7684\u9519\u8bef\u65e5\u5fd7 2. \u901a\u5e38\u662f markdown \u8bed\u6cd5\u95ee\u9898 3. \u4fee\u590d\u540e\u91cd\u65b0\u63d0\u4ea4\u5373\u53ef</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#q_2","title":"Q: \u80fd\u5426\u9884\u89c8\u6587\u6863\uff1f","text":"<p>A: <pre><code># \u672c\u5730\u9884\u89c8\npip install mkdocs-material\nmkdocs serve\n\n# \u8bbf\u95ee http://127.0.0.1:8000\n</code></pre></p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_18","title":"\ud83c\udf89 \u603b\u7ed3","text":"<p>\u60a8\u73b0\u5728\u62e5\u6709\uff1a</p> <p>\u2705 \u96f6\u7ef4\u62a4 - \u63a8\u9001\u5373\u90e8\u7f72 \u2705 \u4e13\u4e1a\u5916\u89c2 - Material Design \u2705 \u5f3a\u5927\u641c\u7d22 - \u5168\u6587\u7d22\u5f15 \u2705 \u79fb\u52a8\u53cb\u597d - \u54cd\u5e94\u5f0f\u8bbe\u8ba1 \u2705 \u7248\u672c\u63a7\u5236 - Git \u7ba1\u7406 \u2705 \u81ea\u52a8\u6784\u5efa - GitHub Actions \u2705 \u514d\u8d39\u6258\u7ba1 - GitHub Pages  </p> <p>\u8fd9\u5c31\u662f\u73b0\u4ee3\u5316\u7684\u6587\u6863\u7ba1\u7406\uff01 \ud83d\ude80</p>"},{"location":"AUTO_DOCS_SETUP_COMPLETE/#_19","title":"\ud83d\ude80 \u7acb\u5373\u5f00\u59cb","text":"<pre><code># \u5c31\u8fd9\u4e09\u6b65\uff01\nbash scripts/maintenance/auto-reorganize-docs.sh\ngit add . &amp;&amp; git commit -m \"docs: setup MkDocs\" &amp;&amp; git push\n# \u7b49\u5f85\u51e0\u5206\u949f\uff0c\u8bbf\u95ee\u60a8\u7684\u6587\u6863\u7f51\u7ad9\n</code></pre> <p>\u60a8\u7684\u6587\u6863\u7ad9\u70b9: <code>https://thefirstwind.github.io/mcp-router-sse-parent</code></p> <p>\u95ee\u9898\uff1f \u67e5\u770b MkDocs Material \u6587\u6863 \u6216\u521b\u5efa Issue\u3002</p> <p>\u53cd\u9988\uff1f \u6b22\u8fce\u901a\u8fc7 PR \u6539\u8fdb\u6587\u6863\uff01</p>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/","title":"\ud83d\udcda \u6587\u6863\u5b8c\u5584\u603b\u7ed3","text":"<p>\u5b8c\u6210\u65f6\u95f4: 2026-01-28</p>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_2","title":"\u2705 \u65b0\u589e\u6587\u6863","text":""},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_3","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb","text":"<ul> <li>getting-started.md - 5\u5206\u949f\u5feb\u901f\u4e0a\u624b\u6307\u5357</li> <li>\u524d\u7f6e\u8981\u6c42\u9a8c\u8bc1</li> <li>\u4e09\u6b65\u542f\u52a8\u6d41\u7a0b</li> <li>\u7b2c\u4e00\u4e2a\u8bf7\u6c42\u793a\u4f8b</li> <li>\u5e38\u89c1\u95ee\u9898\u89e3\u7b54</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_4","title":"\ud83d\udca1 \u8bf4\u660e\u6587\u6863","text":"<ul> <li>architecture.md - \u5b8c\u6574\u67b6\u6784\u8bbe\u8ba1</li> <li>\u7cfb\u7edf\u67b6\u6784\u56fe</li> <li>\u6838\u5fc3\u6a21\u5757\u8bf4\u660e</li> <li>\u6570\u636e\u6d41\u8be6\u89e3</li> <li>\u5173\u952e\u8bbe\u8ba1\u51b3\u7b56</li> <li>\u6027\u80fd\u8003\u8651</li> <li>\u5b89\u5168\u7b56\u7565</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_5","title":"\ud83d\udcd6 \u53c2\u8003\u6587\u6863","text":"<ul> <li>api.md - \u5b8c\u6574API\u53c2\u8003</li> <li>MCP Client API</li> <li>MCP Router API</li> <li>MCP Server API</li> <li>\u8ba4\u8bc1\u65b9\u5f0f</li> <li>\u9519\u8bef\u7801\u8bf4\u660e</li> <li>\u9650\u6d41\u7b56\u7565</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_6","title":"\ud83d\udee0\ufe0f \u64cd\u4f5c\u6307\u5357","text":"<ul> <li>add-mcp-server.md - \u5982\u4f55\u6dfb\u52a0MCP Server</li> <li>\u5b8c\u6574\u521b\u5efa\u6d41\u7a0b</li> <li>\u4ee3\u7801\u793a\u4f8b</li> <li>\u6700\u4f73\u5b9e\u8df5</li> <li> <p>\u8c03\u8bd5\u6280\u5de7</p> </li> <li> <p>troubleshooting.md - \u6545\u969c\u6392\u9664\u6307\u5357</p> </li> <li>\u542f\u52a8\u95ee\u9898</li> <li>\u8fde\u63a5\u95ee\u9898</li> <li>\u6027\u80fd\u95ee\u9898</li> <li>\u914d\u7f6e\u95ee\u9898</li> <li>\u8bca\u65ad\u5de5\u5177</li> <li>\u65e5\u5fd7\u5206\u6790</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_7","title":"\ud83d\udcca \u6587\u6863\u7edf\u8ba1","text":""},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_8","title":"\u65b0\u589e\u5185\u5bb9","text":"<ul> <li>5 \u4e2a\u4e3b\u8981\u6587\u6863</li> <li>~1800 \u884c\u6587\u6863\u5185\u5bb9</li> <li>30+ \u4e2a\u4ee3\u7801\u793a\u4f8b</li> <li>20+ \u4e2a\u8bca\u65ad\u547d\u4ee4</li> <li>15+ \u4e2a\u67b6\u6784\u56fe/\u6d41\u7a0b\u56fe</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_9","title":"\u8986\u76d6\u8303\u56f4","text":"\u7c7b\u522b \u6587\u6863\u6570 \u8986\u76d6\u5ea6 Tutorials 1 \u2b50\u2b50\u2b50\u2b50\u2b50 How-To Guides 4 \u2b50\u2b50\u2b50\u2b50\u2b50 Explanations 2 \u2b50\u2b50\u2b50\u2b50\u2b50 Reference 1 \u2b50\u2b50\u2b50\u2b50\u2b50"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#diataxis","title":"\ud83c\udfaf Di\u00e1taxis \u6846\u67b6\u5e94\u7528","text":""},{"location":"DOCS_ENHANCEMENT_COMPLETE/#tutorial","title":"Tutorial (\u5b66\u4e60\u5bfc\u5411) \u2705","text":"<ul> <li>getting-started.md - \u5faa\u5e8f\u6e10\u8fdb\u7684\u5b66\u4e60\u8def\u5f84</li> <li>\u5b9e\u9645\u53ef\u8fd0\u884c\u7684\u793a\u4f8b</li> <li>\u660e\u786e\u7684\u6210\u529f\u6307\u6807</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#how-to-guide","title":"How-To Guide (\u76ee\u6807\u5bfc\u5411) \u2705","text":"<ul> <li>add-mcp-server.md - \u5b8c\u6210\u5177\u4f53\u4efb\u52a1</li> <li>troubleshooting.md - \u89e3\u51b3\u5b9e\u9645\u95ee\u9898</li> <li>\u6e05\u6670\u7684\u6b65\u9aa4\u548c\u9a8c\u8bc1</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#explanation","title":"Explanation (\u7406\u89e3\u5bfc\u5411) \u2705","text":"<ul> <li>architecture.md - \u7406\u89e3\u7cfb\u7edf\u8bbe\u8ba1</li> <li>\u67b6\u6784\u51b3\u7b56\u89e3\u91ca</li> <li>\u6280\u672f\u9009\u578b\u8bf4\u660e</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#reference","title":"Reference (\u4fe1\u606f\u5bfc\u5411) \u2705","text":"<ul> <li>api.md - \u67e5\u8be2API\u4fe1\u606f</li> <li>\u5b8c\u6574\u7684\u53c2\u6570\u8bf4\u660e</li> <li>\u9519\u8bef\u7801\u53c2\u8003</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_10","title":"\ud83c\udf10 \u6587\u6863\u7f51\u7ad9\u66f4\u65b0","text":""},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_11","title":"\u81ea\u52a8\u90e8\u7f72","text":"<ul> <li>\u2705 \u63a8\u9001\u5230 GitHub</li> <li>\u2705 GitHub Actions \u89e6\u53d1</li> <li>\u2705 \u81ea\u52a8\u6784\u5efa</li> <li>\u2705 \u90e8\u7f72\u5230 GitHub Pages</li> </ul> <p>\u7f51\u7ad9\u5730\u5740: https://thefirstwind.github.io/mcp-router-sse-parent</p>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_12","title":"\u5bfc\u822a\u66f4\u65b0","text":"<pre><code>nav:\n  - \u5feb\u901f\u5f00\u59cb:\n      - 5\u5206\u949f\u4e0a\u624b: quick-start/getting-started.md  \u2190 \u65b0\u589e\n  - \u64cd\u4f5c\u6307\u5357:\n      - \u6dfb\u52a0MCP Server: how-to-guides/add-mcp-server.md  \u2190 \u66f4\u65b0\n      - \u6545\u969c\u6392\u9664: how-to-guides/troubleshooting.md  \u2190 \u65b0\u589e\n  - \u8bf4\u660e\u6587\u6863:\n      - \u67b6\u6784\u8bbe\u8ba1: explanations/architecture.md  \u2190 \u65b0\u589e\n  - \u53c2\u8003\u6587\u6863:\n      - API\u53c2\u8003: reference/api.md  \u2190 \u65b0\u589e\n</code></pre>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_13","title":"\ud83d\udcc8 \u4e0b\u4e00\u6b65\u5efa\u8bae","text":""},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_14","title":"\u53ef\u4ee5\u7ee7\u7eed\u6dfb\u52a0\u7684\u6587\u6863","text":""},{"location":"DOCS_ENHANCEMENT_COMPLETE/#1-tutorials","title":"1. \u6559\u7a0b (Tutorials)","text":"<ul> <li> \u7b2c\u4e00\u4e2a AI Agent \u6559\u7a0b</li> <li> \u96c6\u6210\u7b2c\u4e09\u65b9 LLM \u6559\u7a0b</li> <li> \u6570\u636e\u5e93\u96c6\u6210\u6559\u7a0b</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#2-how-to","title":"2. \u64cd\u4f5c\u6307\u5357 (How-To)","text":"<ul> <li> \u90e8\u7f72\u5230\u751f\u4ea7\u73af\u5883</li> <li> \u6027\u80fd\u4f18\u5316\u6307\u5357</li> <li> \u76d1\u63a7\u548c\u544a\u8b66\u914d\u7f6e</li> <li> \u5907\u4efd\u548c\u6062\u590d</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#3-explanations","title":"3. \u8bf4\u660e\u6587\u6863 (Explanations)","text":"<ul> <li> MCP \u534f\u8bae\u8be6\u89e3</li> <li> Spring AI \u96c6\u6210\u539f\u7406</li> <li> Nacos \u670d\u52a1\u53d1\u73b0\u673a\u5236</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#4-reference","title":"4. \u53c2\u8003\u6587\u6863 (Reference)","text":"<ul> <li> \u914d\u7f6e\u9879\u5b8c\u6574\u6e05\u5355</li> <li> \u73af\u5883\u53d8\u91cf\u53c2\u8003</li> <li> \u4f9d\u8d56\u7248\u672c\u517c\u5bb9\u6027</li> <li> \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_15","title":"\u6587\u6863\u8d28\u91cf\u6539\u8fdb","text":"<ul> <li> \u6dfb\u52a0\u66f4\u591a\u56fe\u8868\u548c\u793a\u610f\u56fe</li> <li> \u8865\u5145\u89c6\u9891\u6559\u7a0b</li> <li> \u6dfb\u52a0\u4ea4\u4e92\u5f0f\u793a\u4f8b</li> <li> \u591a\u8bed\u8a00\u7248\u672c\uff08\u82f1\u6587\uff09</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_16","title":"\ud83c\udf89 \u6210\u679c\u5c55\u793a","text":""},{"location":"DOCS_ENHANCEMENT_COMPLETE/#before","title":"Before (\u4e4b\u524d)","text":"<pre><code>docs/\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 QUICK_START.md\n\u2514\u2500\u2500 ... (\u6563\u4e71\u7684\u6587\u6863)\n</code></pre>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#after","title":"After (\u73b0\u5728)","text":"<pre><code>docs/\n\u251c\u2500\u2500 index.md                      # \u7edf\u4e00\u5165\u53e3\n\u251c\u2500\u2500 quick-start/\n\u2502   \u2514\u2500\u2500 getting-started.md       # \u2b50 5\u5206\u949f\u4e0a\u624b\n\u251c\u2500\u2500 how-to-guides/\n\u2502   \u251c\u2500\u2500 add-mcp-server.md       # \u2b50 \u6dfb\u52a0Server\n\u2502   \u2514\u2500\u2500 troubleshooting.md      # \u2b50 \u6545\u969c\u6392\u9664\n\u251c\u2500\u2500 explanations/\n\u2502   \u2514\u2500\u2500 architecture.md          # \u2b50 \u67b6\u6784\u8bbe\u8ba1\n\u251c\u2500\u2500 reference/\n\u2502   \u2514\u2500\u2500 api.md                   # \u2b50 API\u53c2\u8003\n\u2514\u2500\u2500 _meta/\n    \u251c\u2500\u2500 templates/               # \u6587\u6863\u6a21\u677f\n    \u2514\u2500\u2500 QUICK_REFERENCE.md       # \u5feb\u901f\u53c2\u8003\n</code></pre>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_17","title":"\u2728 \u5173\u952e\u7279\u6027","text":""},{"location":"DOCS_ENHANCEMENT_COMPLETE/#1","title":"1. \u5b8c\u6574\u6027","text":"<ul> <li>\u2705 \u4ece\u5165\u95e8\u5230\u7cbe\u901a\u7684\u5b8c\u6574\u8def\u5f84</li> <li>\u2705 \u8986\u76d6\u6240\u6709\u6838\u5fc3\u529f\u80fd</li> <li>\u2705 \u5b9e\u9645\u53ef\u7528\u7684\u4ee3\u7801\u793a\u4f8b</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#2","title":"2. \u53ef\u7528\u6027","text":"<ul> <li>\u2705 \u6e05\u6670\u7684\u5bfc\u822a\u7ed3\u6784</li> <li>\u2705 \u5168\u6587\u641c\u7d22\u652f\u6301</li> <li>\u2705 \u79fb\u52a8\u7aef\u53cb\u597d</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#3","title":"3. \u53ef\u7ef4\u62a4\u6027","text":"<ul> <li>\u2705 \u6a21\u677f\u5316\u5185\u5bb9</li> <li>\u2705 \u81ea\u52a8\u5316\u90e8\u7f72</li> <li>\u2705 \u7248\u672c\u63a7\u5236</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#4","title":"4. \u7f8e\u89c2\u6027","text":"<ul> <li>\u2705 Material Design \u4e3b\u9898</li> <li>\u2705 \u4ee3\u7801\u9ad8\u4eae</li> <li>\u2705 \u54cd\u5e94\u5f0f\u5e03\u5c40</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_18","title":"\ud83d\udcdd \u7528\u6237\u53cd\u9988\u6e20\u9053","text":"<ul> <li>GitHub Issues: \u95ee\u9898\u548c\u5efa\u8bae</li> <li>GitHub Discussions: \u793e\u533a\u8ba8\u8bba</li> <li>Pull Requests: \u8d21\u732e\u6539\u8fdb</li> </ul>"},{"location":"DOCS_ENHANCEMENT_COMPLETE/#_19","title":"\ud83c\udfc6 \u6700\u7ec8\u6210\u679c","text":"<p>\u60a8\u73b0\u5728\u62e5\u6709\uff1a</p> <p>\u2705 \u4f01\u4e1a\u7ea7\u6587\u6863\u7cfb\u7edf - \u57fa\u4e8e\u4e1a\u754c\u6700\u4f73\u5b9e\u8df5 \u2705 \u81ea\u52a8\u5316\u5de5\u4f5c\u6d41 - \u63a8\u9001\u5373\u90e8\u7f72 \u2705 \u5b8c\u6574\u7684\u6307\u5357 - \u4ece\u5165\u95e8\u5230\u7cbe\u901a \u2705 \u73b0\u4ee3\u5316UI - Material Design \u2705 \u5168\u6587\u641c\u7d22 - \u5feb\u901f\u67e5\u627e\u4fe1\u606f \u2705 \u6301\u7eed\u66f4\u65b0 - \u81ea\u52a8\u90e8\u7f72\u673a\u5236  </p> <p>\u6587\u6863\u7f51\u7ad9: https://thefirstwind.github.io/mcp-router-sse-parent</p> <p>\ud83c\udf8a \u606d\u559c\uff01\u60a8\u7684\u6587\u6863\u7cfb\u7edf\u73b0\u5728\u5df2\u7ecf\u975e\u5e38\u5b8c\u5584\u4e86\uff01</p> <p>\u4e0b\u4e00\u6b65: \u7ee7\u7eed\u6dfb\u52a0\u66f4\u591a\u5185\u5bb9\uff0c\u6216\u8005\u5f00\u59cb\u4f7f\u7528\u6587\u6863\u6765\u5e2e\u52a9\u65b0\u7528\u6237\u4e0a\u624b\uff01</p>"},{"location":"DOCUMENTATION_MANAGEMENT/","title":"\u6587\u6863\u7ba1\u7406\u65b9\u6848 (Documentation Management Strategy)","text":"<p>\u57fa\u4e8e Docs as Code \u548c\u6587\u6863\u751f\u547d\u5468\u671f\u7ba1\u7406\u7684\u6700\u4f73\u5b9e\u8df5</p> <p>\u521b\u5efa\u65f6\u95f4: 2026-01-28</p>"},{"location":"DOCUMENTATION_MANAGEMENT/#_1","title":"\ud83d\udccb \u76ee\u5f55","text":"<ol> <li>\u95ee\u9898\u9648\u8ff0</li> <li>\u4e1a\u754c\u6700\u4f73\u5b9e\u8df5</li> <li>\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848</li> <li>\u6587\u6863\u5206\u7c7b\u4f53\u7cfb</li> <li>\u6587\u6863\u751f\u547d\u5468\u671f</li> <li>\u6587\u6863\u7ef4\u62a4\u7b56\u7565</li> <li>\u5b9e\u65bd\u8ba1\u5212</li> </ol>"},{"location":"DOCUMENTATION_MANAGEMENT/#_2","title":"\u95ee\u9898\u9648\u8ff0","text":""},{"location":"DOCUMENTATION_MANAGEMENT/#_3","title":"\u5f53\u524d\u75db\u70b9","text":"<p>\u6b63\u5982\u60a8\u6240\u63d0\u5230\u7684\uff0c\u968f\u7740\u9879\u76ee\u53d1\u5c55\uff0c\u6211\u4eec\u9762\u4e34\uff1a</p> <pre><code>\u6587\u6863\u8d8a\u6765\u8d8a\u591a \u2192 \u96be\u4ee5\u67e5\u627e\u548c\u7ef4\u62a4\n\u811a\u672c\u8d8a\u6765\u8d8a\u591a \u2192 \u4e0d\u77e5\u9053\u54ea\u4e9b\u8fd8\u5728\u7528\n\u4fe1\u606f\u5206\u6563     \u2192 \u91cd\u590d\u548c\u51b2\u7a81\n\u7f3a\u4e4f\u89c4\u8303     \u2192 \u8d28\u91cf\u53c2\u5dee\u4e0d\u9f50\n</code></pre>"},{"location":"DOCUMENTATION_MANAGEMENT/#_4","title":"\u6838\u5fc3\u6311\u6218","text":"<ol> <li>\u53d1\u73b0\u6027\u5dee: \u96be\u4ee5\u5feb\u901f\u627e\u5230\u9700\u8981\u7684\u6587\u6863</li> <li>\u8fc7\u65f6\u6587\u6863: \u4e0d\u786e\u5b9a\u54ea\u4e9b\u6587\u6863\u8fd8\u6709\u6548</li> <li>\u91cd\u590d\u5185\u5bb9: \u540c\u6837\u4fe1\u606f\u51fa\u73b0\u5728\u591a\u4e2a\u5730\u65b9</li> <li>\u7ef4\u62a4\u56f0\u96be: \u7f3a\u5c11\u660e\u786e\u7684\u7ef4\u62a4\u8d23\u4efb\u548c\u5468\u671f</li> </ol>"},{"location":"DOCUMENTATION_MANAGEMENT/#_5","title":"\u4e1a\u754c\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"DOCUMENTATION_MANAGEMENT/#1-diataxis","title":"1. Di\u00e1taxis \u6846\u67b6 (\u6587\u6863\u5206\u7c7b)","text":"<p>\u6765\u81ea Divio \u7684 Di\u00e1taxis \u662f\u4e1a\u754c\u516c\u8ba4\u7684\u6587\u6863\u5206\u7c7b\u6846\u67b6\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Di\u00e1taxis \u6587\u6863\u56db\u8c61\u9650              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u5b66\u4e60\u5bfc\u5411      \u2502   \u76ee\u6807\u5bfc\u5411               \u2502\n\u2502  TUTORIALS    \u2502   HOW-TO GUIDES         \u2502\n\u2502  \u6559\u7a0b         \u2502   \u64cd\u4f5c\u6307\u5357               \u2502\n\u2502  (\u5b66\u4e60)       \u2502   (\u76ee\u6807)                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u7406\u89e3\u5bfc\u5411      \u2502   \u4fe1\u606f\u5bfc\u5411               \u2502\n\u2502  EXPLANATION  \u2502   REFERENCE             \u2502\n\u2502  \u8bf4\u660e         \u2502   \u53c2\u8003                   \u2502\n\u2502  (\u7406\u89e3)       \u2502   (\u4fe1\u606f)                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u56db\u79cd\u6587\u6863\u7c7b\u578b:</p> \u7c7b\u578b \u76ee\u7684 \u8bfb\u8005\u5fc3\u6001 \u793a\u4f8b Tutorial \u5b66\u4e60 \"\u6559\u6211\" \u5feb\u901f\u5f00\u59cb\u6307\u5357 How-To Guide \u8fbe\u6210\u76ee\u6807 \"\u5e2e\u6211\" \u6dfb\u52a0MCP Server\u6b65\u9aa4 Explanation \u7406\u89e3 \"\u544a\u8bc9\u6211\u4e3a\u4ec0\u4e48\" \u67b6\u6784\u8bbe\u8ba1\u6587\u6863 Reference \u67e5\u8be2\u4fe1\u606f \"\u544a\u8bc9\u6211\u662f\u4ec0\u4e48\" API\u6587\u6863"},{"location":"DOCUMENTATION_MANAGEMENT/#2-docs-as-code","title":"2. Docs as Code","text":"<p>\u5c06\u6587\u6863\u5f53\u4f5c\u4ee3\u7801\u7ba1\u7406\uff1a</p> <ul> <li>\u2705 \u7248\u672c\u63a7\u5236 (Git)</li> <li>\u2705 Pull Request \u5ba1\u67e5</li> <li>\u2705 CI/CD \u81ea\u52a8\u5316</li> <li>\u2705 \u7eaf\u6587\u672c\u683c\u5f0f (Markdown)</li> <li>\u2705 \u4e0e\u4ee3\u7801\u653e\u5728\u4e00\u8d77</li> </ul>"},{"location":"DOCUMENTATION_MANAGEMENT/#3","title":"3. \u6587\u6863\u751f\u547d\u5468\u671f\u7ba1\u7406","text":"<pre><code>\u521b\u5efa \u2192 \u5ba1\u67e5 \u2192 \u53d1\u5e03 \u2192 \u7ef4\u62a4 \u2192 \u5f52\u6863 \u2192 \u5220\u9664\n  \u2193      \u2193      \u2193      \u2193      \u2193      \u2193\n Draft  Review  Live  Update Archive Delete\n</code></pre>"},{"location":"DOCUMENTATION_MANAGEMENT/#4-single-source-of-truth","title":"4. \u5355\u4e00\u4fe1\u606f\u6e90 (Single Source of Truth)","text":"<ul> <li>\u6bcf\u6761\u4fe1\u606f\u53ea\u5728\u4e00\u4e2a\u5730\u65b9\u7ef4\u62a4</li> <li>\u5176\u4ed6\u5730\u65b9\u901a\u8fc7\u94fe\u63a5\u5f15\u7528</li> <li>\u907f\u514d\u91cd\u590d\u548c\u4e0d\u4e00\u81f4</li> </ul>"},{"location":"DOCUMENTATION_MANAGEMENT/#_6","title":"\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848","text":""},{"location":"DOCUMENTATION_MANAGEMENT/#_7","title":"\u6587\u6863\u7ec4\u7ec7\u7ed3\u6784 (\u65b0)","text":"<p> ``` mcp-router-sse-parent/ \u2502 \u251c\u2500\u2500 docs/                           # \ud83d\udcda \u6240\u6709\u6587\u6863\u7684\u4e3b\u76ee\u5f55 \u2502   \u2502 \u2502   \u251c\u2500\u2500 README.md                   # \ud83d\udcd6 \u6587\u6863\u5bfc\u822a\uff08\u5355\u4e00\u5165\u53e3\uff09 \u2502   \u2502 \u2502   \u251c\u2500\u2500 01-tutorials/               # \ud83c\udf93 \u6559\u7a0b\uff08\u5b66\u4e60\u5bfc\u5411\uff09 \u2502   \u2502   \u251c\u2500\u2500 quick-start.md         # 5\u5206\u949f\u5feb\u901f\u5f00\u59cb \u2502   \u2502   \u251c\u2500\u2500 first-mcp-server.md    # \u7b2c\u4e00\u4e2aMCP Server \u2502   \u2502   \u2514\u2500\u2500 first-agent.md         # \u7b2c\u4e00\u4e2aAI Agent \u2502   \u2502 \u2502   \u251c\u2500\u2500 02-how-to-guides/          # \ud83d\udee0\ufe0f \u64cd\u4f5c\u6307\u5357\uff08\u76ee\u6807\u5bfc\u5411\uff09 \u2502   \u2502   \u251c\u2500\u2500 add-mcp-server.md     # \u5982\u4f55\u6dfb\u52a0MCP Server \u2502   \u2502   \u251c\u2500\u2500 add-agent.md          # \u5982\u4f55\u6dfb\u52a0Agent \u2502   \u2502   \u251c\u2500\u2500 integrate-gemini.md   # \u5982\u4f55\u96c6\u6210Gemini \u2502   \u2502   \u2514\u2500\u2500 troubleshooting.md    # \u6545\u969c\u6392\u9664 \u2502   \u2502 \u2502   \u251c\u2500\u2500 03-explanations/           # \ud83d\udca1 \u8bf4\u660e\u6587\u6863\uff08\u7406\u89e3\u5bfc\u5411\uff09 \u2502   \u2502   \u251c\u2500\u2500 architecture.md       # \u67b6\u6784\u8bf4\u660e \u2502   \u2502   \u251c\u2500\u2500 workflow-comparison.md # \u5de5\u4f5c\u6d41\u5bf9\u6bd4 \u2502   \u2502   \u251c\u2500\u2500 design-decisions.md   # \u8bbe\u8ba1\u51b3\u7b56 \u2502   \u2502   \u2514\u2500\u2500 why-spring-ai.md      # \u4e3a\u4ec0\u4e48\u7528Spring AI \u2502   \u2502 \u2502   \u251c\u2500\u2500 04-reference/              # \ud83d\udccb \u53c2\u8003\u6587\u6863\uff08\u4fe1\u606f\u5bfc\u5411\uff09 \u2502   \u2502   \u251c\u2500\u2500 api/                  # API\u6587\u6863 \u2502   \u2502   \u251c\u2500\u2500 configuration.md      # \u914d\u7f6e\u53c2\u8003 \u2502   \u2502   \u251c\u2500\u2500 cli-commands.md       # \u547d\u4ee4\u884c\u53c2\u8003 \u2502   \u2502   \u2514\u2500\u2500 glossary.md           # \u672f\u8bed\u8868 \u2502   \u2502 \u2502   \u251c\u2500\u2500 05-workflows/              # \ud83d\udd04 \u5de5\u4f5c\u6d41\uff08\u79fb\u52a8\u5230\u8fd9\u91cc\uff09 \u2502   \u2502   \u251c\u2500\u2500 development.md        # \u5f00\u53d1\u5de5\u4f5c\u6d41 \u2502   \u2502   \u251c\u2500\u2500 ci-cd.md             # CI/CD\u6d41\u7a0b \u2502   \u2502   \u2514\u2500\u2500 release.md           # \u53d1\u5e03\u6d41\u7a0b \u2502   \u2502 \u2502   \u251c\u2500\u2500 06-archived/               # \ud83d\udce6 \u5df2\u5f52\u6863\u6587\u6863 \u2502   \u2502   \u251c\u2500\u2500 README.md            # \u5f52\u6863\u8bf4\u660e \u2502   \u2502   \u2514\u2500\u2500 [deprecated docs]    # \u8fc7\u65f6\u6587\u6863 \u2502   \u2502 \u2502   \u2514\u2500\u2500 _meta/                     # \ud83d\udd27 \u5143\u6570\u636e\uff08\u6587\u6863\u7684\u6587\u6863\uff09 \u2502       \u251c\u2500\u2500 doc-standards.md     # \u6587\u6863\u89c4\u8303 \u2502       \u251c\u2500\u2500 doc-lifecycle.md     # \u751f\u547d\u5468\u671f\u8bf4\u660e \u2502       \u251c\u2500\u2500 maintenance-log.md   # \u7ef4\u62a4\u65e5\u5fd7 \u2502       \u2514\u2500\u2500 templates/           # \u6587\u6863\u6a21\u677f \u2502           \u251c\u2500\u2500 tutorial.md \u2502           \u251c\u2500\u2500 how-to.md \u2502           \u251c\u2500\u2500 explanation.md \u2502           \u2514\u2500\u2500 reference.md \u2502 \u251c\u2500\u2500 .agent/                         # \ud83e\udd16 AI\u5de5\u4f5c\u6d41\uff08\u4fdd\u6301\u4e0d\u53d8\uff09 \u2502   \u2514\u2500\u2500 workflows/ \u2502       \u251c\u2500\u2500 add-mcp-server.md \u2502       \u251c\u2500\u2500 add-agent-workflow.md \u2502       \u2514\u2500\u2500 review.md \u2502 \u251c\u2500\u2500 scripts/                        # \ud83d\udd27 \u811a\u672c\uff08\u7edf\u4e00\u7ba1\u7406\uff09 \u2502   \u251c\u2500\u2500 README.md                  # \u811a\u672c\u8bf4\u660e \u2502   \u251c\u2500\u2500 dev/                       # \u5f00\u53d1\u811a\u672c \u2502   \u2502   \u251c\u2500\u2500 setup.sh \u2502   \u2502   \u2514\u2500\u2500 demo.sh \u2502   \u251c\u2500\u2500 build/                     # \u6784\u5efa\u811a\u672c \u2502   \u251c\u2500\u2500 deploy/                    # \u90e8\u7f72\u811a\u672c \u2502   \u2514\u2500\u2500 maintenance/               # \u7ef4\u62a4\u811a\u672c \u2502       \u251c\u2500\u2500 update-docs.sh \u2502       \u2514\u2500\u2500 check-links.sh \u2502 \u2514\u2500\u2500 [module directories] <pre><code>### \u5173\u952e\u6539\u8fdb\n\n1. **\u6309 Di\u00e1taxis \u5206\u7c7b**: \u6e05\u6670\u7684\u6587\u6863\u5206\u7c7b\n2. **\u5355\u4e00\u5165\u53e3**: `docs/README.md` \u4f5c\u4e3a\u5bfc\u822a\u4e2d\u5fc3\n3. **\u811a\u672c\u7edf\u4e00\u7ba1\u7406**: \u6240\u6709\u811a\u672c\u653e\u5728 `scripts/` \u76ee\u5f55\n4. **\u5f52\u6863\u673a\u5236**: \u4fdd\u7559\u4f46\u6807\u8bb0\u8fc7\u65f6\u6587\u6863\n5. **\u5143\u6570\u636e**: \u6587\u6863\u7684\u6587\u6863\uff0c\u7ef4\u62a4\u89c4\u8303\u548c\u65e5\u5fd7\n\n---\n\n## \u6587\u6863\u5206\u7c7b\u4f53\u7cfb\n\n### \u8fc1\u79fb\u8ba1\u5212\n\n#### \u73b0\u6709\u6587\u6863 \u2192 \u65b0\u4f4d\u7f6e\n\n| \u73b0\u6709\u6587\u6863 | \u7c7b\u578b | \u65b0\u4f4d\u7f6e | \u5907\u6ce8 |\n|---------|------|--------|------|\n| `docs/QUICK_START.md` | Tutorial | `docs/01-tutorials/quick-start.md` | \u91cd\u547d\u540d |\n| `docs/GEMINI_INTEGRATION_GUIDE.md` | How-To | `docs/02-how-to-guides/integrate-gemini.md` | \u79fb\u52a8 |\n| `docs/GITHUB_WORKFLOWS_COMPARISON.md` | Explanation | `docs/03-explanations/workflow-comparison.md` | \u79fb\u52a8 |\n| `docs/GOOGLE_DEEPMIND_INTEGRATION_PLAN.md` | Explanation | `docs/03-explanations/gemini-plan.md` | \u79fb\u52a8 |\n| `docs/START_HERE.md` | \u7279\u6b8a | `docs/README.md` | \u5408\u5e76\u4e3a\u5bfc\u822a |\n| `.agent/workflows/*.md` | Reference | \u4fdd\u6301\u4e0d\u53d8 | AI\u5de5\u4f5c\u6d41 |\n| `demo.sh` | Tool | `scripts/dev/demo.sh` | \u79fb\u52a8 |\n\n#### \u65b0\u521b\u5efa\u7684\u6587\u6863\u4f4d\u7f6e\n\n| \u6587\u6863 | \u7c7b\u578b | \u4f4d\u7f6e |\n|------|------|------|\n| \u67b6\u6784\u6587\u6863 | Explanation | `docs/03-explanations/architecture.md` |\n| API\u53c2\u8003 | Reference | `docs/04-reference/api/` |\n| \u914d\u7f6e\u6307\u5357 | Reference | `docs/04-reference/configuration.md` |\n| \u6545\u969c\u6392\u9664 | How-To | `docs/02-how-to-guides/troubleshooting.md` |\n\n---\n\n## \u6587\u6863\u751f\u547d\u5468\u671f\n\n### \u72b6\u6001\u6807\u8bb0\u7cfb\u7edf\n\n\u6bcf\u4e2a\u6587\u6863\u9876\u90e8\u6dfb\u52a0 YAML frontmatter\uff1a\n\n```markdown\n---\nstatus: active          # active | draft | review | deprecated | archived\ncreated: 2026-01-28\nlast_updated: 2026-01-28\nreview_date: 2026-04-28  # \u6bcf3\u4e2a\u6708\u5ba1\u67e5\u4e00\u6b21\nowner: team-name\ntags: [tutorial, mcp-server, getting-started]\n---\n</code></pre>"},{"location":"DOCUMENTATION_MANAGEMENT/#_8","title":"\u751f\u547d\u5468\u671f\u9636\u6bb5","text":"<pre><code>1. Draft (\u8349\u7a3f)\n   \u251c\u2500 \u4f5c\u8005\u7f16\u5199\n   \u2514\u2500 status: draft\n\n2. Review (\u5ba1\u67e5)\n   \u251c\u2500 \u56e2\u961f\u5ba1\u67e5\n   \u251c\u2500 \u4fee\u6539\u5b8c\u5584\n   \u2514\u2500 status: review\n\n3. Active (\u6d3b\u8dc3)\n   \u251c\u2500 \u53d1\u5e03\u4f7f\u7528\n   \u251c\u2500 \u5b9a\u671f\u66f4\u65b0\n   \u2514\u2500 status: active\n\n4. Deprecated (\u5f03\u7528)\n   \u251c\u2500 \u6807\u8bb0\u4e3a\u8fc7\u65f6\n   \u251c\u2500 \u6307\u5411\u65b0\u6587\u6863\n   \u2514\u2500 status: deprecated\n\n5. Archived (\u5f52\u6863)\n   \u251c\u2500 \u79fb\u81f3\u5f52\u6863\u76ee\u5f55\n   \u2514\u2500 status: archived\n\n6. Deleted (\u5220\u9664)\n   \u2514\u2500 \u5f7b\u5e95\u5220\u9664\n</code></pre>"},{"location":"DOCUMENTATION_MANAGEMENT/#_9","title":"\u81ea\u52a8\u5316\u68c0\u67e5","text":"<p>\u521b\u5efa <code>.github/workflows/docs-check.yml</code>:</p> <pre><code>name: Documentation Check\n\non:\n  schedule:\n    - cron: '0 0 1 * *'  # \u6bcf\u67081\u53f7\u68c0\u67e5\n  workflow_dispatch:\n\njobs:\n  check-docs:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Check for outdated docs\n        run: |\n          # \u68c0\u67e5review_date\u8fc7\u671f\u7684\u6587\u6863\n          python scripts/maintenance/check-doc-freshness.py\n\n      - name: Check broken links\n        run: |\n          # \u68c0\u67e5\u635f\u574f\u7684\u94fe\u63a5\n          npm install -g markdown-link-check\n          find docs -name '*.md' -exec markdown-link-check {} \\;\n\n      - name: Create issue if found\n        if: failure()\n        run: |\n          # \u521b\u5efaIssue\u63d0\u9192\u66f4\u65b0\n</code></pre>"},{"location":"DOCUMENTATION_MANAGEMENT/#_10","title":"\u6587\u6863\u7ef4\u62a4\u7b56\u7565","text":""},{"location":"DOCUMENTATION_MANAGEMENT/#1","title":"1. \u7ef4\u62a4\u8d23\u4efb","text":"\u6587\u6863\u7c7b\u578b \u7ef4\u62a4\u8005 \u5ba1\u67e5\u5468\u671f Tutorials \u6280\u672f\u5199\u4f5c\u56e2\u961f \u6bcf3\u4e2a\u6708 How-To Guides \u529f\u80fd\u8d1f\u8d23\u4eba \u4ee3\u7801\u53d8\u66f4\u65f6 Explanations \u67b6\u6784\u5e08 \u6bcf6\u4e2a\u6708 Reference \u81ea\u52a8\u751f\u6210 + \u5f00\u53d1\u8005 \u6bcf\u6b21\u53d1\u7248 Workflows DevOps\u56e2\u961f \u6d41\u7a0b\u53d8\u66f4\u65f6"},{"location":"DOCUMENTATION_MANAGEMENT/#2","title":"2. \u66f4\u65b0\u89e6\u53d1\u6761\u4ef6","text":"<p>\u5fc5\u987b\u66f4\u65b0\u6587\u6863\u7684\u60c5\u51b5:</p> <ul> <li>\u2705 \u4ee3\u7801\u529f\u80fd\u53d8\u66f4</li> <li>\u2705 API\u63a5\u53e3\u53d8\u66f4</li> <li>\u2705 \u914d\u7f6e\u9879\u53d8\u66f4</li> <li>\u2705 \u5de5\u4f5c\u6d41\u7a0b\u53d8\u66f4</li> <li>\u2705 Bug\u4fee\u590d\u5f71\u54cd\u4f7f\u7528</li> </ul> <p>\u5ba1\u67e5\u89e6\u53d1:</p> <ul> <li>\ud83d\udd0d \u5b9a\u671f\u5ba1\u67e5 (review_date)</li> <li>\ud83d\udd0d \u7528\u6237\u53cd\u9988</li> <li>\ud83d\udd0d Bug\u62a5\u544a\u4e2d\u63d0\u5230\u6587\u6863\u95ee\u9898</li> </ul>"},{"location":"DOCUMENTATION_MANAGEMENT/#3_1","title":"3. \u8d28\u91cf\u6807\u51c6","text":""},{"location":"DOCUMENTATION_MANAGEMENT/#checklist","title":"Checklist","text":"<p>\u6bcf\u4e2a\u6587\u6863\u5fc5\u987b\uff1a</p> <ul> <li> \u6709\u6e05\u6670\u7684\u6807\u9898\u548c\u63cf\u8ff0</li> <li> \u6709 frontmatter \u5143\u6570\u636e</li> <li> \u6709\u76ee\u6807\u53d7\u4f17\u8bf4\u660e</li> <li> \u6709\u5b9e\u9645\u793a\u4f8b</li> <li> \u94fe\u63a5\u90fd\u6709\u6548</li> <li> \u4ee3\u7801\u793a\u4f8b\u53ef\u8fd0\u884c</li> <li> \u8bed\u6cd5\u548c\u62fc\u5199\u6b63\u786e</li> <li> \u9075\u5faa\u7edf\u4e00\u7684\u98ce\u683c</li> </ul>"},{"location":"DOCUMENTATION_MANAGEMENT/#_11","title":"\u4f7f\u7528\u6a21\u677f","text":"<p>\u6240\u6709\u65b0\u6587\u6863\u4ece\u6a21\u677f\u5f00\u59cb:</p> <pre><code># \u521b\u5efa\u6559\u7a0b\ncp docs/_meta/templates/tutorial.md docs/01-tutorials/my-tutorial.md\n\n# \u521b\u5efa\u64cd\u4f5c\u6307\u5357\ncp docs/_meta/templates/how-to.md docs/02-how-to-guides/my-guide.md\n</code></pre>"},{"location":"DOCUMENTATION_MANAGEMENT/#_12","title":"\u5b9e\u65bd\u8ba1\u5212","text":""},{"location":"DOCUMENTATION_MANAGEMENT/#1_1","title":"\u9636\u6bb5 1: \u7acb\u5373\u6267\u884c\uff08\u4eca\u5929\uff09","text":"<ol> <li> <p>\u521b\u5efa\u65b0\u76ee\u5f55\u7ed3\u6784 <pre><code>mkdir -p docs/{01-tutorials,02-how-to-guides,03-explanations,04-reference,05-workflows,06-archived,_meta/templates}\nmkdir -p scripts/{dev,build,deploy,maintenance}\n</code></pre></p> </li> <li> <p>\u521b\u5efa\u6587\u6863\u5bfc\u822a (<code>docs/README.md</code>)</p> </li> <li>\u521b\u5efa\u6587\u6863\u6a21\u677f (<code>docs/_meta/templates/</code>)</li> <li>\u521b\u5efa\u7ef4\u62a4\u811a\u672c</li> </ol>"},{"location":"DOCUMENTATION_MANAGEMENT/#2_1","title":"\u9636\u6bb5 2: \u672c\u5468\u6267\u884c","text":"<ol> <li>\u8fc1\u79fb\u73b0\u6709\u6587\u6863</li> <li>\u6309\u7167\u5206\u7c7b\u79fb\u52a8\u6587\u6863</li> <li>\u6dfb\u52a0 frontmatter</li> <li> <p>\u66f4\u65b0\u6240\u6709\u94fe\u63a5</p> </li> <li> <p>\u521b\u5efa\u6587\u6863\u6807\u51c6 (<code>docs/_meta/doc-standards.md</code>)</p> </li> <li>\u8bbe\u7f6e\u81ea\u52a8\u5316\u68c0\u67e5</li> </ol>"},{"location":"DOCUMENTATION_MANAGEMENT/#3_2","title":"\u9636\u6bb5 3: \u672c\u6708\u6267\u884c","text":"<ol> <li>\u8865\u5145\u7f3a\u5931\u6587\u6863</li> <li>API\u53c2\u8003</li> <li>\u914d\u7f6e\u6307\u5357</li> <li> <p>\u6545\u969c\u6392\u9664</p> </li> <li> <p>\u56e2\u961f\u57f9\u8bad</p> </li> <li>\u6587\u6863\u89c4\u8303</li> <li> <p>\u7ef4\u62a4\u6d41\u7a0b</p> </li> <li> <p>\u5efa\u7acb\u5ba1\u67e5\u673a\u5236</p> </li> </ol>"},{"location":"DOCUMENTATION_MANAGEMENT/#_13","title":"\u5de5\u5177\u548c\u81ea\u52a8\u5316","text":""},{"location":"DOCUMENTATION_MANAGEMENT/#_14","title":"\u63a8\u8350\u5de5\u5177","text":"<ol> <li>\u6587\u6863\u751f\u6210: </li> <li>MkDocs / Docusaurus (\u9759\u6001\u7ad9\u70b9)</li> <li> <p>Swagger / OpenAPI (API\u6587\u6863)</p> </li> <li> <p>\u94fe\u63a5\u68c0\u67e5:    <pre><code>npm install -g markdown-link-check\n</code></pre></p> </li> <li> <p>\u62fc\u5199\u68c0\u67e5:    <pre><code>npm install -g markdown-spellcheck\n</code></pre></p> </li> <li> <p>\u6587\u6863Lint:    <pre><code>npm install -g markdownlint-cli\n</code></pre></p> </li> </ol>"},{"location":"DOCUMENTATION_MANAGEMENT/#_15","title":"\u81ea\u52a8\u5316\u811a\u672c","text":"<p>\u521b\u5efa <code>scripts/maintenance/update-docs.sh</code>:</p> <pre><code>#!/bin/bash\n# \u66f4\u65b0\u6587\u6863\u5143\u6570\u636e\nfind docs -name '*.md' -exec sed -i '' \"s/last_updated:.*/last_updated: $(date +%Y-%m-%d)/\" {} \\;\n</code></pre>"},{"location":"DOCUMENTATION_MANAGEMENT/#_16","title":"\u6210\u529f\u6307\u6807","text":""},{"location":"DOCUMENTATION_MANAGEMENT/#_17","title":"\u53ef\u6d4b\u91cf\u7684\u76ee\u6807","text":"\u6307\u6807 \u76ee\u6807 \u5f53\u524d \u6587\u6863\u8986\u76d6\u7387 100% \u6838\u5fc3\u529f\u80fd - \u8fc7\u65f6\u6587\u6863 &lt; 5% - \u5e73\u5747\u67e5\u627e\u65f6\u95f4 &lt; 2\u5206\u949f - \u7528\u6237\u6ee1\u610f\u5ea6 &gt; 4.0/5.0 - \u635f\u574f\u94fe\u63a5 0 -"},{"location":"DOCUMENTATION_MANAGEMENT/#_18","title":"\u5b9a\u671f\u62a5\u544a","text":"<p>\u6bcf\u6708\u751f\u6210\u62a5\u544a:</p> <pre><code># \u6587\u6863\u5065\u5eb7\u5ea6\u62a5\u544a\nscripts/maintenance/doc-health-report.sh\n\n\u8f93\u51fa:\n- \u603b\u6587\u6863\u6570\n- \u5f85\u5ba1\u67e5\u6587\u6863\u6570\n- \u8fc7\u671f\u6587\u6863\u6570\n- \u635f\u574f\u94fe\u63a5\u6570\n- \u672c\u6708\u65b0\u589e/\u66f4\u65b0\u6587\u6863\u6570\n</code></pre>"},{"location":"DOCUMENTATION_MANAGEMENT/#_19","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"DOCUMENTATION_MANAGEMENT/#q","title":"Q: \u5982\u4f55\u51b3\u5b9a\u6587\u6863\u5e94\u8be5\u653e\u5728\u54ea\u4e2a\u5206\u7c7b\uff1f","text":"<p>A: \u95ee\u81ea\u5df1\u8bfb\u8005\u7684\u76ee\u7684\uff1a - \u8981\u5b66\u4e60\u57fa\u7840 \u2192 Tutorial - \u8981\u5b8c\u6210\u4efb\u52a1 \u2192 How-To - \u8981\u7406\u89e3\u6982\u5ff5 \u2192 Explanation - \u8981\u67e5\u8be2\u4fe1\u606f \u2192 Reference</p>"},{"location":"DOCUMENTATION_MANAGEMENT/#q_1","title":"Q: \u65e7\u6587\u6863\u600e\u4e48\u5904\u7406\uff1f","text":"<p>A:  1. \u8bc4\u4f30\u662f\u5426\u8fd8\u9700\u8981 2. \u9700\u8981 \u2192 \u66f4\u65b0\u5e76\u79fb\u5230\u65b0\u4f4d\u7f6e 3. \u4e0d\u9700\u8981\u4f46\u6709\u4ef7\u503c \u2192 \u5f52\u6863 4. \u5b8c\u5168\u8fc7\u65f6 \u2192 \u5220\u9664\uff08\u4f46\u4fdd\u7559\u5728Git\u5386\u53f2\uff09</p>"},{"location":"DOCUMENTATION_MANAGEMENT/#q_2","title":"Q: \u5982\u4f55\u907f\u514d\u6587\u6863\u8fc7\u65f6\uff1f","text":"<p>A: 1. \u8bbe\u7f6e <code>review_date</code> 2. \u4ee3\u7801\u53d8\u66f4\u65f6\u540c\u6b65\u66f4\u65b0\u6587\u6863 3. \u81ea\u52a8\u5316\u68c0\u67e5 4. \u7528\u6237\u53cd\u9988\u6e20\u9053</p>"},{"location":"DOCUMENTATION_MANAGEMENT/#q_3","title":"Q: \u6587\u6863\u592a\u591a\uff0c\u627e\u4e0d\u5230\u600e\u4e48\u529e\uff1f","text":"<p>A: 1. \u4f7f\u7528 <code>docs/README.md</code> \u5bfc\u822a 2. \u6309\u7167 Di\u00e1taxis \u5206\u7c7b\u67e5\u627e 3. \u641c\u7d22\u529f\u80fd\uff08\u5982\u679c\u6709\u6587\u6863\u7ad9\u70b9\uff09 4. \u6807\u7b7e\u7cfb\u7edf</p>"},{"location":"DOCUMENTATION_MANAGEMENT/#_20","title":"\u53c2\u8003\u8d44\u6e90","text":"<ul> <li>Di\u00e1taxis Documentation Framework</li> <li>Docs as Code</li> <li>Google Developer Documentation Style Guide</li> <li>Microsoft Writing Style Guide</li> </ul> <p>\u6587\u6863\u7248\u672c: 1.0 \u521b\u5efa\u65f6\u95f4: 2026-01-28 \u4e0b\u6b21\u5ba1\u67e5: 2026-04-28 \u8d1f\u8d23\u4eba: Documentation Team</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/","title":"\u2705 \u6587\u6863\u7ba1\u7406\u7cfb\u7edf\u8bbe\u7f6e\u5b8c\u6210","text":"<p>\u5b8c\u6210\u65f6\u95f4: 2026-01-28</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_2","title":"\ud83c\udf89 \u5df2\u5b8c\u6210\u7684\u5de5\u4f5c","text":""},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#1","title":"1. \u6587\u6863\u7ba1\u7406\u65b9\u6848","text":"<p>\u2705 \u521b\u5efa\u6838\u5fc3\u6587\u6863: - <code>docs/DOCUMENTATION_MANAGEMENT.md</code> - \u5b8c\u6574\u7684\u6587\u6863\u7ba1\u7406\u7b56\u7565 - <code>docs/_meta/QUICK_REFERENCE.md</code> - \u5feb\u901f\u53c2\u8003\u6307\u5357</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#2","title":"2. \u65b0\u7684\u76ee\u5f55\u7ed3\u6784","text":"<p>\u2705 \u521b\u5efa\u76ee\u5f55: <pre><code>docs/\n\u251c\u2500\u2500 01-tutorials/          # \u6559\u7a0b\uff08\u5b66\u4e60\u5bfc\u5411\uff09\n\u251c\u2500\u2500 02-how-to-guides/      # \u64cd\u4f5c\u6307\u5357\uff08\u76ee\u6807\u5bfc\u5411\uff09\n\u251c\u2500\u2500 03-explanations/       # \u8bf4\u660e\u6587\u6863\uff08\u7406\u89e3\u5bfc\u5411\uff09\n\u251c\u2500\u2500 04-reference/          # \u53c2\u8003\u6587\u6863\uff08\u4fe1\u606f\u5bfc\u5411\uff09\n\u251c\u2500\u2500 05-workflows/          # \u5de5\u4f5c\u6d41\n\u251c\u2500\u2500 06-archived/           # \u5f52\u6863\u6587\u6863\n\u2514\u2500\u2500 _meta/                 # \u5143\u6570\u636e\u548c\u6a21\u677f\n    \u251c\u2500\u2500 templates/         # \u6587\u6863\u6a21\u677f\n    \u251c\u2500\u2500 QUICK_REFERENCE.md # \u5feb\u901f\u53c2\u8003\n    \u2514\u2500\u2500 (\u672a\u6765\u6dfb\u52a0\u5176\u4ed6\u5143\u6587\u6863)\n\nscripts/\n\u251c\u2500\u2500 dev/                   # \u5f00\u53d1\u811a\u672c\n\u251c\u2500\u2500 build/                 # \u6784\u5efa\u811a\u672c\n\u251c\u2500\u2500 deploy/                # \u90e8\u7f72\u811a\u672c\n\u2514\u2500\u2500 maintenance/           # \u7ef4\u62a4\u811a\u672c\n    \u2514\u2500\u2500 reorganize-docs.sh # \u6587\u6863\u91cd\u7ec4\u811a\u672c\n</code></pre></p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#3","title":"3. \u6587\u6863\u6a21\u677f","text":"<p>\u2705 \u521b\u5efa\u6a21\u677f: - <code>docs/_meta/templates/tutorial.md</code> - \u6559\u7a0b\u6a21\u677f - <code>docs/_meta/templates/how-to.md</code> - \u64cd\u4f5c\u6307\u5357\u6a21\u677f - (\u53ef\u4ee5\u7ee7\u7eed\u6dfb\u52a0 explanation.md \u548c reference.md)</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#4","title":"4. \u81ea\u52a8\u5316\u811a\u672c","text":"<p>\u2705 \u521b\u5efa\u811a\u672c: - <code>scripts/maintenance/reorganize-docs.sh</code> - \u81ea\u52a8\u91cd\u7ec4\u6587\u6863\u7ed3\u6784</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#diataxis","title":"\ud83d\udcda \u6838\u5fc3\u6982\u5ff5\uff1aDi\u00e1taxis \u6846\u67b6","text":"<p>\u6211\u4eec\u91c7\u7528\u4e86\u4e1a\u754c\u516c\u8ba4\u7684 Di\u00e1taxis \u6587\u6863\u5206\u7c7b\u6846\u67b6\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Di\u00e1taxis \u6587\u6863\u56db\u8c61\u9650              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u5b66\u4e60\u5bfc\u5411      \u2502   \u76ee\u6807\u5bfc\u5411               \u2502\n\u2502  TUTORIALS    \u2502   HOW-TO GUIDES         \u2502\n\u2502  \u6559\u7a0b         \u2502   \u64cd\u4f5c\u6307\u5357               \u2502\n\u2502  (\u5b66\u4e60)       \u2502   (\u76ee\u6807)                 \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u7406\u89e3\u5bfc\u5411      \u2502   \u4fe1\u606f\u5bfc\u5411               \u2502\n\u2502  EXPLANATION  \u2502   REFERENCE             \u2502\n\u2502  \u8bf4\u660e         \u2502   \u53c2\u8003                   \u2502\n\u2502  (\u7406\u89e3)       \u2502   (\u4fe1\u606f)                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u5206\u7c7b\u903b\u8f91: - Tutorial: \u6559\u65b0\u624b\"\u600e\u4e48\u5b66\" - How-To: \u5e2e\u6709\u7ecf\u9a8c\u7684\u4eba\"\u600e\u4e48\u505a\" - Explanation: \u89e3\u91ca\"\u4e3a\u4ec0\u4e48\"\u548c\"\u5982\u4f55\u5de5\u4f5c\" - Reference: \u63d0\u4f9b\"\u662f\u4ec0\u4e48\"\u7684\u51c6\u786e\u4fe1\u606f</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_3","title":"\ud83d\ude80 \u4e0b\u4e00\u6b65\u64cd\u4f5c","text":""},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#a","title":"\u9009\u9879 A: \u7acb\u5373\u91cd\u7ec4\uff08\u63a8\u8350\uff09","text":"<pre><code># 1. \u9605\u8bfb\u6587\u6863\u7ba1\u7406\u65b9\u6848\ncat docs/DOCUMENTATION_MANAGEMENT.md\n\n# 2. \u9605\u8bfb\u5feb\u901f\u53c2\u8003\ncat docs/_meta/QUICK_REFERENCE.md\n\n# 3. \u8fd0\u884c\u91cd\u7ec4\u811a\u672c\nbash scripts/maintenance/reorganize-docs.sh\n\n# 4. \u68c0\u67e5\u7ed3\u679c\u5e76\u624b\u52a8\u8c03\u6574\n</code></pre>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#option-b","title":"option B: \u6e10\u8fdb\u5f0f\u8fc1\u79fb","text":"<pre><code># 1. \u65b0\u6587\u6863\u4f7f\u7528\u65b0\u7ed3\u6784\ncp docs/_meta/templates/tutorial.md docs/01-tutorials/my-new-doc.md\n\n# 2. \u9010\u6b65\u8fc1\u79fb\u73b0\u6709\u6587\u6863\n# - \u6bcf\u5468\u8fc1\u79fb\u51e0\u4e2a\u6587\u6863\n# - \u66f4\u65b0\u94fe\u63a5\n# - \u6dfb\u52a0frontmatter\n\n# 3. \u51e0\u4e2a\u6708\u540e\u5b8c\u6210\u5168\u90e8\u8fc1\u79fb\n</code></pre>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#c","title":"\u9009\u9879 C: \u6682\u65f6\u4fdd\u6301\u73b0\u72b6","text":"<pre><code># \u81f3\u5c11\u505a\u8fd9\u4e9b\uff1a\n# 1. \u4e3a\u65b0\u6587\u6863\u4f7f\u7528\u6a21\u677f\n# 2. \u6dfb\u52a0frontmatter\u5143\u6570\u636e\n# 3. \u5b9a\u671f\u5ba1\u67e5\u6587\u6863\n</code></pre>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_4","title":"\ud83d\udca1 \u5173\u952e\u6539\u8fdb","text":""},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#1_1","title":"1. \u53ef\u53d1\u73b0\u6027 \u2705","text":"<p>\u4e4b\u524d: \u6587\u6863\u6563\u843d\u5404\u5904\uff0c\u96be\u4ee5\u67e5\u627e</p> <p>\u73b0\u5728:  - \u6309\u7c7b\u578b\u7ec4\u7ec7\uff08Di\u00e1taxis\uff09 - \u5355\u4e00\u5165\u53e3\uff08docs/README.md\uff09 - \u6e05\u6670\u7684\u547d\u540d</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#2_1","title":"2. \u53ef\u7ef4\u62a4\u6027 \u2705","text":"<p>\u4e4b\u524d: \u4e0d\u77e5\u9053\u54ea\u4e9b\u6587\u6863\u8fc7\u65f6</p> <p>\u73b0\u5728: - Frontmatter\u5143\u6570\u636e - \u5ba1\u67e5\u65e5\u671f - \u72b6\u6001\u6807\u8bb0</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#3_1","title":"3. \u4e00\u81f4\u6027 \u2705","text":"<p>\u4e4b\u524d: \u98ce\u683c\u4e0d\u7edf\u4e00</p> <p>\u73b0\u5728: - \u7edf\u4e00\u7684\u6a21\u677f - \u6e05\u6670\u7684\u6807\u51c6 - \u81ea\u52a8\u5316\u68c0\u67e5</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#4_1","title":"4. \u751f\u547d\u5468\u671f\u7ba1\u7406 \u2705","text":"<p>\u4e4b\u524d: \u6587\u6863\u53ea\u589e\u4e0d\u51cf</p> <p>\u73b0\u5728: - \u660e\u786e\u7684\u751f\u547d\u5468\u671f - \u5f52\u6863\u673a\u5236 - \u5b9a\u671f\u6e05\u7406</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_5","title":"\ud83d\udcd6 \u4f7f\u7528\u6307\u5357","text":""},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_6","title":"\u521b\u5efa\u65b0\u6587\u6863","text":"<pre><code># 1. \u786e\u5b9a\u7c7b\u578b\n\u6211\u8981\u5e2e\u52a9\u7528\u6237\u3010\u5b66\u4e60\u3011    \u2192 Tutorial\n\u6211\u8981\u5e2e\u52a9\u7528\u6237\u3010\u5b8c\u6210\u4efb\u52a1\u3011 \u2192 How-To\n\u6211\u8981\u5e2e\u52a9\u7528\u6237\u3010\u7406\u89e3\u3011    \u2192 Explanation\n\u6211\u8981\u5e2e\u52a9\u7528\u6237\u3010\u67e5\u8be2\u3011    \u2192 Reference\n\n# 2. \u4f7f\u7528\u6a21\u677f\ncp docs/_meta/templates/tutorial.md docs/01-tutorials/my-doc.md\n\n# 3. \u586b\u5199\u5185\u5bb9\n# 4. \u63d0\u4ea4PR\n</code></pre>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_7","title":"\u66f4\u65b0\u73b0\u6709\u6587\u6863","text":"<pre><code>---\nstatus: active\nlast_updated: 2026-01-28  # \u2190 \u66f4\u65b0\u8fd9\u4e2a\nreview_date: 2026-04-28   # \u2190 \u5982\u679c\u9700\u8981\uff0c\u66f4\u65b0\u8fd9\u4e2a\n---\n</code></pre>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_8","title":"\u5f52\u6863\u8fc7\u65f6\u6587\u6863","text":"<pre><code># 1. \u6807\u8bb0\u4e3adeprecated\nstatus: deprecated\n\n# 2. \u6dfb\u52a0\u8b66\u544a\n&gt; \u26a0\ufe0f **\u5df2\u5f03\u7528**: \u8bf7\u53c2\u8003 [\u65b0\u6587\u6863](link)\n\n# 3. \u7a0d\u540e\u79fb\u5230\u5f52\u6863\nmv docs/XX/old.md docs/06-archived/\n</code></pre>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_9","title":"\ud83c\udfaf \u6210\u529f\u6307\u6807","text":"<p>\u6211\u4eec\u53ef\u4ee5\u7528\u8fd9\u4e9b\u6307\u6807\u8861\u91cf\u6587\u6863\u8d28\u91cf\uff1a</p> \u6307\u6807 \u76ee\u6807 \u6587\u6863\u8986\u76d6\u7387 100% \u6838\u5fc3\u529f\u80fd \u8fc7\u65f6\u6587\u6863\u6bd4\u4f8b &lt; 5% \u5e73\u5747\u67e5\u627e\u65f6\u95f4 &lt; 2\u5206\u949f \u635f\u574f\u94fe\u63a5 0 \u7528\u6237\u6ee1\u610f\u5ea6 &gt; 4.0/5.0"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_10","title":"\ud83d\udee0\ufe0f \u5de5\u5177\u5efa\u8bae","text":""},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_11","title":"\u63a8\u8350\u5b89\u88c5","text":"<pre><code># \u94fe\u63a5\u68c0\u67e5\nnpm install -g markdown-link-check\n\n# \u62fc\u5199\u68c0\u67e5\nnpm install -g markdown-spellcheck\n\n# Markdown lint\nnpm install -g markdownlint-cli\n\n# \u4f7f\u7528\u793a\u4f8b\nmarkdown-link-check docs/**/*.md\nmarkdownlint docs/**/*.md\n</code></pre>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#github-actions","title":"GitHub Actions","text":"<p>\u53ef\u4ee5\u6dfb\u52a0\u81ea\u52a8\u5316\u68c0\u67e5\uff1a</p> <pre><code>name: Docs Check\non:\n  schedule:\n    - cron: '0 0 1 * *'  # \u6bcf\u67081\u53f7\njobs:\n  check:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Check links\n        run: npm install -g markdown-link-check &amp;&amp; markdown-link-check docs/**/*.md\n</code></pre>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_12","title":"\ud83d\udcda \u53c2\u8003\u8d44\u6e90","text":""},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_13","title":"\u6838\u5fc3\u6587\u6863","text":"<ul> <li>\u6587\u6863\u7ba1\u7406\u65b9\u6848 - \u5b8c\u6574\u7b56\u7565</li> <li>\u5feb\u901f\u53c2\u8003 - \u65e5\u5e38\u4f7f\u7528</li> </ul>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_14","title":"\u5916\u90e8\u8d44\u6e90","text":"<ul> <li>Di\u00e1taxis Framework</li> <li>Docs as Code</li> <li>Google Style Guide</li> </ul>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_15","title":"\u2753 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#q","title":"Q: \u5fc5\u987b\u7acb\u5373\u91cd\u7ec4\u6240\u6709\u6587\u6863\u5417\uff1f","text":"<p>A: \u4e0d\u9700\u8981\u3002\u53ef\u4ee5\u9009\u62e9\u6e10\u8fdb\u5f0f\u8fc1\u79fb\uff0c\u65b0\u6587\u6863\u4f7f\u7528\u65b0\u7ed3\u6784\uff0c\u65e7\u6587\u6863\u9010\u6b65\u8fc1\u79fb\u3002</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#q-diataxis","title":"Q: Di\u00e1taxis \u5206\u7c7b\u592a\u590d\u6742\uff1f","text":"<p>A: \u5b9e\u9645\u4f7f\u7528\u5f88\u7b80\u5355\uff0c\u95ee\u81ea\u5df1\uff1a\u8bfb\u8005\u60f3\u8981\"\u5b66\u4e60\"\u3001\"\u5b8c\u6210\u4efb\u52a1\"\u3001\"\u7406\u89e3\"\u8fd8\u662f\"\u67e5\u8be2\"\uff1f</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#q_1","title":"Q: \u5982\u679c\u6587\u6863\u540c\u65f6\u7b26\u5408\u591a\u4e2a\u7c7b\u578b\uff1f","text":"<p>A: \u9009\u62e9\u4e3b\u8981\u76ee\u7684\uff0c\u6216\u8005\u62c6\u5206\u6210\u591a\u4e2a\u6587\u6863\u3002\u4f8b\u5982\uff1a\"\u5feb\u901f\u5f00\u59cb\"\u662fTutorial\uff0c\"\u8be6\u7ec6\u914d\u7f6e\"\u662fReference\u3002</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#q-frontmatter","title":"Q: \u5143\u6570\u636efrontmatter\u662f\u5fc5\u987b\u7684\u5417\uff1f","text":"<p>A: \u5f3a\u70c8\u63a8\u8350\u3002\u5b83\u5e2e\u52a9\u8ffd\u8e2a\u6587\u6863\u72b6\u6001\u548c\u7ef4\u62a4\u65f6\u95f4\u3002\u81f3\u5c11\u6dfb\u52a0status\u548clast_updated\u3002</p>"},{"location":"DOC_MANAGEMENT_SETUP_COMPLETE/#_16","title":"\ud83c\udf89 \u606d\u559c\uff01","text":"<p>\u60a8\u73b0\u5728\u62e5\u6709\uff1a</p> <p>\u2705 \u4e1a\u754c\u6700\u4f73\u5b9e\u8df5 - \u57fa\u4e8eDi\u00e1taxis\u548cDocs as Code \u2705 \u6e05\u6670\u7684\u7ed3\u6784 - \u6613\u4e8e\u67e5\u627e\u548c\u7ef4\u62a4 \u2705 \u6807\u51c6\u5316\u6a21\u677f - \u4fdd\u8bc1\u8d28\u91cf\u4e00\u81f4\u6027 \u2705 \u81ea\u52a8\u5316\u5de5\u5177 - \u7b80\u5316\u7ef4\u62a4\u5de5\u4f5c \u2705 \u5b8c\u6574\u7684\u6307\u5357 - \u4ece\u521b\u5efa\u5230\u5f52\u6863\u7684\u5168\u6d41\u7a0b  </p> <p>\u5f00\u59cb\u7ba1\u7406\u60a8\u7684\u6587\u6863\u5427\uff01 \ud83d\udcda\u2728</p> <p>\u521b\u5efa\u65f6\u95f4: 2026-01-28 \u4e0b\u6b21\u5ba1\u67e5: 2026-04-28 \u53cd\u9988: \u6b22\u8fce\u901a\u8fc7Issue\u63d0\u4f9b\u5efa\u8bae</p>"},{"location":"ENABLE_GITHUB_PAGES/","title":"\ud83d\udd27 \u542f\u7528 GitHub Pages","text":""},{"location":"ENABLE_GITHUB_PAGES/#_1","title":"\u95ee\u9898","text":"<p>\u6587\u6863\u5df2\u6210\u529f\u6784\u5efa\u5e76\u63a8\u9001\u5230 <code>gh-pages</code> \u5206\u652f\uff0c\u4f46 GitHub Pages \u670d\u52a1\u672a\u542f\u7528\uff0c\u5bfc\u81f4\u7f51\u7ad9\u663e\u793a 404\u3002</p>"},{"location":"ENABLE_GITHUB_PAGES/#_2","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u8bf7\u6309\u4ee5\u4e0b\u6b65\u9aa4\u542f\u7528 GitHub Pages\uff1a</p>"},{"location":"ENABLE_GITHUB_PAGES/#1","title":"\u6b65\u9aa4 1: \u8bbf\u95ee\u4ed3\u5e93\u8bbe\u7f6e","text":"<ol> <li>\u8bbf\u95ee: https://github.com/thefirstwind/mcp-router-sse-parent</li> <li>\u70b9\u51fb\u9876\u90e8\u7684 Settings (\u8bbe\u7f6e)</li> </ol>"},{"location":"ENABLE_GITHUB_PAGES/#2-github-pages","title":"\u6b65\u9aa4 2: \u542f\u7528 GitHub Pages","text":"<ol> <li>\u5728\u5de6\u4fa7\u83dc\u5355\u627e\u5230 Pages</li> <li>\u5728 Source \u4e0b:</li> <li>Branch: \u9009\u62e9 <code>gh-pages</code></li> <li>Folder: \u9009\u62e9 <code>/ (root)</code></li> <li>\u70b9\u51fb Save</li> </ol>"},{"location":"ENABLE_GITHUB_PAGES/#3","title":"\u6b65\u9aa4 3: \u7b49\u5f85\u90e8\u7f72","text":"<ul> <li>GitHub \u4f1a\u81ea\u52a8\u90e8\u7f72</li> <li>\u901a\u5e38\u9700\u8981 1-3 \u5206\u949f</li> <li>\u5b8c\u6210\u540e\u4f1a\u663e\u793a: \"Your site is live at https://thefirstwind.github.io/mcp-router-sse-parent/\"</li> </ul>"},{"location":"ENABLE_GITHUB_PAGES/#_3","title":"\u9a8c\u8bc1","text":"<p>\u8bbf\u95ee: https://thefirstwind.github.io/mcp-router-sse-parent</p> <p>\u5e94\u8be5\u80fd\u770b\u5230\u60a8\u7684\u6587\u6863\u7f51\u7ad9\uff01</p>"},{"location":"ENABLE_GITHUB_PAGES/#_4","title":"\u622a\u56fe\u6307\u5f15","text":"<p>\u5982\u679c\u4e0d\u786e\u5b9a\u5728\u54ea\u91cc\uff0c\u8bf7\u770b\u6211\u622a\u56fe\u7684 404 \u9875\u9762\uff0c\u8bf4\u660e\u6587\u6863\u6587\u4ef6\u5df2\u7ecf\u5728 gh-pages \u5206\u652f\uff0c\u53ea\u662f Pages \u670d\u52a1\u672a\u542f\u7528\u3002</p> <p>\u5b8c\u6210\u540e\uff0c\u60a8\u7684\u6587\u6863\u7cfb\u7edf\u5c31\u5b8c\u5168\u53ef\u7528\u4e86\uff01 \ud83c\udf89</p>"},{"location":"INTEGRATION_SUMMARY/","title":"\u6574\u5408\u5b8c\u6210\u603b\u7ed3","text":"<p>Google DeepMind Gemini API + Agentic Workflow \u6574\u5408\u65b9\u6848</p> <p>\u5b8c\u6210\u65f6\u95f4: 2026-01-28</p>"},{"location":"INTEGRATION_SUMMARY/#_2","title":"\u2705 \u5df2\u5b8c\u6210\u5de5\u4f5c","text":""},{"location":"INTEGRATION_SUMMARY/#1","title":"1. \u6587\u6863\u521b\u5efa","text":"<p>\u6211\u5df2\u7ecf\u4e3a\u60a8\u521b\u5efa\u4e86\u4ee5\u4e0b\u6587\u6863\uff1a</p> \u6587\u6863 \u8def\u5f84 \u8bf4\u660e \u6574\u5408\u8ba1\u5212 <code>docs/GOOGLE_DEEPMIND_INTEGRATION_PLAN.md</code> \u5b8c\u6574\u7684\u6574\u5408\u8ba1\u5212\uff0c\u5305\u62ec API \u80fd\u529b\u6e05\u5355\u3001\u67b6\u6784\u8bbe\u8ba1\u548c 10 \u5468\u5b9e\u65bd\u8ba1\u5212 \u5b9e\u65bd\u6307\u5357 <code>docs/GEMINI_INTEGRATION_GUIDE.md</code> \u57fa\u4e8e\u73b0\u6709 Spring AI Alibaba \u6846\u67b6\u7684\u5b9e\u7528\u6574\u5408\u6307\u5357 \u5feb\u901f\u5f00\u59cb <code>docs/QUICK_START.md</code> 5 \u5206\u949f\u5feb\u901f\u5165\u95e8\u6307\u5357 \u4e3b README \u66f4\u65b0 <code>README.md</code> \u6dfb\u52a0\u4e86 Gemini \u6574\u5408\u76f8\u5173\u4fe1\u606f"},{"location":"INTEGRATION_SUMMARY/#2","title":"2. \u5173\u952e\u53d1\u73b0","text":""},{"location":"INTEGRATION_SUMMARY/#_3","title":"\u2728 \u60a8\u7684\u9879\u76ee\u5df2\u7ecf\u5f88\u5f3a\u5927","text":"<p>\u60a8\u7684\u9879\u76ee\u4e2d\u5df2\u7ecf\u5305\u542b\u4e86\u5b8c\u6574\u7684 Spring AI Alibaba \u6846\u67b6\uff0c\u8fd9\u610f\u5473\u7740\uff1a</p> <ul> <li>\u2705 \u4e0d\u9700\u8981\u4ece\u96f6\u7f16\u5199\u4ee3\u7801</li> <li>\u2705 \u73b0\u6709\u7684 ReactAgent\u3001SupervisorAgent \u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528</li> <li>\u2705 \u53ea\u9700\u914d\u7f6e Gemini ChatClient\uff0c\u7136\u540e\u6ce8\u5165\u5230 Agent \u4e2d</li> <li>\u2705 \u5de5\u4f5c\u6d41\u6846\u67b6\u5df2\u7ecfready (StateGraph, LlmNode, ToolNode\u7b49)</li> </ul>"},{"location":"INTEGRATION_SUMMARY/#_4","title":"\ud83c\udfaf \u6574\u5408\u6838\u5fc3\u601d\u8def","text":"<pre><code>\u4e0d\u8981\u5199\u65b0\u4ee3\u7801 \u279c \u5229\u7528\u73b0\u6709\u6846\u67b6\n\u2502\n\u251c\u2500 Spring AI Alibaba Agent (ReactAgent, etc.)\n\u2502  \u2514\u2500 \u63a5\u53d7\u4efb\u4f55 ChatClient\n\u2502\n\u251c\u2500 \u914d\u7f6e Gemini ChatClient\n\u2502  \u2514\u2500 \u4f7f\u7528 Spring AI Vertex AI Starter\n\u2502\n\u2514\u2500 \u6ce8\u5165\u5230\u73b0\u6709 Agent\n   \u2514\u2500 \u7acb\u5373\u53ef\u7528\uff01\n</code></pre>"},{"location":"INTEGRATION_SUMMARY/#_5","title":"\ud83d\udcda \u6587\u6863\u5bfc\u822a","text":""},{"location":"INTEGRATION_SUMMARY/#1_1","title":"\u7b2c 1 \u6b65\uff1a\u5feb\u901f\u5165\u95e8\uff08\u63a8\u8350\u4ece\u8fd9\u91cc\u5f00\u59cb\uff09","text":"<p>\ud83d\udcc4 \u5feb\u901f\u5f00\u59cb\u6307\u5357 - \u23f1\ufe0f 5 \u5206\u949f\u5b8c\u6210\u57fa\u7840\u6574\u5408 - 3 \u4e2a\u7b80\u5355\u6b65\u9aa4\uff1a\u4f9d\u8d56 \u2192 \u914d\u7f6e \u2192 \u4f7f\u7528 - \u5305\u542b\u5b8c\u6574\u4ee3\u7801\u793a\u4f8b</p>"},{"location":"INTEGRATION_SUMMARY/#2_1","title":"\u7b2c 2 \u6b65\uff1a\u6df1\u5165\u7406\u89e3","text":"<p>\ud83d\udcc4 Gemini \u6574\u5408\u5b9e\u65bd\u6307\u5357 - \ud83c\udfd7\ufe0f \u57fa\u4e8e\u73b0\u6709\u67b6\u6784\u7684\u6574\u5408\u65b9\u6848 - \ud83d\udca1 \u5982\u4f55\u5229\u7528 Spring AI Alibaba - \ud83d\udcdd \u8be6\u7ec6\u7684\u914d\u7f6e\u793a\u4f8b - \ud83c\udfaf \u4f7f\u7528\u793a\u4f8b\uff08ReactAgent\u3001\u5de5\u4f5c\u6d41\u7b49\uff09 - \u2705 \u6700\u4f73\u5b9e\u8df5</p>"},{"location":"INTEGRATION_SUMMARY/#3","title":"\u7b2c 3 \u6b65\uff1a\u957f\u671f\u89c4\u5212","text":"<p>\ud83d\udcc4 \u5b8c\u6574\u6574\u5408\u8ba1\u5212 - \ud83d\udccb Google DeepMind API \u5b8c\u6574\u80fd\u529b\u6e05\u5355 - \ud83c\udfdb\ufe0f \u4f01\u4e1a\u7ea7\u67b6\u6784\u8bbe\u8ba1 - \ud83d\udcc6 10 \u5468\u8be6\u7ec6\u5b9e\u65bd\u8ba1\u5212\uff085 \u4e2a\u9636\u6bb5\uff09 - \ud83d\udcca \u9879\u76ee\u7ed3\u6784\u5efa\u8bae - \ud83d\udee0\ufe0f \u6280\u672f\u6808\u6e05\u5355</p>"},{"location":"INTEGRATION_SUMMARY/#google-deepmind-api","title":"\ud83c\udfaf Google DeepMind API \u80fd\u529b\u6e05\u5355","text":""},{"location":"INTEGRATION_SUMMARY/#_6","title":"\u6838\u5fc3\u6a21\u578b","text":"<ul> <li>\u2705 Gemini 3 Pro - \u6700\u667a\u80fd\uff0c\u9002\u5408\u590d\u6742\u4efb\u52a1</li> <li>\u2705 Gemini 3 Flash - \u9ad8\u6027\u4ef7\u6bd4\uff0c\u9002\u5408\u751f\u4ea7\u73af\u5883</li> <li>\u2705 Gemini 2.5 Pro TTS - \u6587\u672c\u8f6c\u8bed\u97f3</li> <li>\u2705 Gemini Robotics - \u673a\u5668\u4eba/\u7269\u8054\u7f51</li> </ul>"},{"location":"INTEGRATION_SUMMARY/#_7","title":"\u751f\u6210\u80fd\u529b","text":"<ul> <li>\u2705 Nano Banana Pro - \u56fe\u50cf\u751f\u6210\u548c\u7f16\u8f91</li> <li>\u2705 Veo 3.1 - \u89c6\u9891\u751f\u6210\uff08\u5e26\u97f3\u9891\uff09</li> </ul>"},{"location":"INTEGRATION_SUMMARY/#api","title":"\u6838\u5fc3\u529f\u80fd API","text":"<ul> <li>\u2705 Long Context API - \u652f\u6301\u6570\u767e\u4e07 tokens</li> <li>\u2705 Function Calling API - \u5de5\u5177\u8c03\u7528\uff08Agentic \u6838\u5fc3\uff09</li> <li>\u2705 Structured Outputs API - JSON \u683c\u5f0f\u8f93\u51fa</li> <li>\u2705 Document Understanding API - \u5904\u7406 1000 \u9875 PDF</li> <li>\u2705 Live API - \u5b9e\u65f6\u8bed\u97f3\u4ee3\u7406</li> <li>\u2705 Thinking API - \u589e\u5f3a\u63a8\u7406\u80fd\u529b</li> </ul>"},{"location":"INTEGRATION_SUMMARY/#_8","title":"\u5185\u7f6e\u5de5\u5177","text":"<ul> <li>Google Search</li> <li>URL Context</li> <li>Google Maps</li> <li>Code Execution</li> <li>Computer Use</li> </ul>"},{"location":"INTEGRATION_SUMMARY/#agentic-workflow","title":"\ud83c\udfd7\ufe0f Agentic Workflow \u53c2\u8003\u67b6\u6784","text":"<p>\u57fa\u4e8e Spring AI Alibaba Agent Framework\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\uff1a</p>"},{"location":"INTEGRATION_SUMMARY/#_9","title":"\u5de5\u4f5c\u6d41\u7c7b\u578b\uff08\u5df2\u6709\u5b9e\u73b0\uff09","text":"Agent \u7c7b\u578b \u8bf4\u660e \u7528\u9014 Sequential \u987a\u5e8f\u6267\u884c Task 1 \u2192 Task 2 \u2192 Task 3 Parallel \u5e76\u884c\u6267\u884c \u591a\u4efb\u52a1\u540c\u65f6\u6267\u884c\u540e\u6c47\u603b Routing \u6761\u4ef6\u8def\u7531 \u6839\u636e\u4e0a\u4e0b\u6587\u9009\u62e9\u4e0d\u540c\u5b50\u4ee3\u7406 Loop \u5faa\u73af\u6267\u884c \u8fed\u4ee3\u4f18\u5316\u3001\u81ea\u6211\u4fee\u6b63 Supervisor \u76d1\u7763\u534f\u8c03 \u7ba1\u7406\u591a\u4e2a\u5b50\u4ee3\u7406"},{"location":"INTEGRATION_SUMMARY/#_10","title":"\u53c2\u8003\u5f00\u6e90\u9879\u76ee","text":"<ol> <li>Spring AI Alibaba (<code>alibaba/spring-ai-alibaba</code>)</li> <li>DeepResearch Agent</li> <li>JManus\uff08Manus Java \u5b9e\u73b0\uff09</li> <li>DataAgent (NL2SQL)</li> <li> <p>Playground Demo</p> </li> <li> <p>Spring AI Official (<code>spring-projects/spring-ai-examples</code>)</p> </li> <li>Tool Calling Examples</li> <li>RAG Examples</li> <li>Multi-Model Examples</li> </ol>"},{"location":"INTEGRATION_SUMMARY/#_11","title":"\ud83d\ude80 \u63a8\u8350\u7684\u6267\u884c\u8def\u5f84","text":""},{"location":"INTEGRATION_SUMMARY/#a-1-2","title":"\u8def\u5f84 A: \u5feb\u901f\u9a8c\u8bc1\uff081-2 \u5929\uff09","text":"<ol> <li>\u2705 \u9605\u8bfb <code>QUICK_START.md</code></li> <li>\u2705 \u6dfb\u52a0 Vertex AI Gemini \u4f9d\u8d56</li> <li>\u2705 \u914d\u7f6e <code>application.yml</code></li> <li>\u2705 \u521b\u5efa\u7b80\u5355\u7684 Controller \u6d4b\u8bd5</li> <li>\u2705 \u4f7f\u7528 ReactAgent \u6d4b\u8bd5\u5de5\u5177\u8c03\u7528</li> </ol> <p>\u76ee\u6807: \u9a8c\u8bc1 Gemini API \u53ef\u7528\u6027</p>"},{"location":"INTEGRATION_SUMMARY/#b-1-2","title":"\u8def\u5f84 B: \u6e10\u8fdb\u5f0f\u6574\u5408\uff081-2 \u5468\uff09","text":"<ol> <li>\u2705 \u5b8c\u6210\u8def\u5f84 A</li> <li>\u2705 \u9605\u8bfb <code>GEMINI_INTEGRATION_GUIDE.md</code></li> <li>\u2705 \u914d\u7f6e\u591a\u6a21\u578b\u652f\u6301\uff08Gemini + DeepSeek\uff09</li> <li>\u2705 \u53c2\u8003 DeepResearch \u5b9e\u73b0\u81ea\u5b9a\u4e49\u7814\u7a76 Agent</li> <li>\u2705 \u6dfb\u52a0 Gemini \u4e13\u7528\u5de5\u5177\uff08Document Understanding\u3001Image Gen\u7b49\uff09</li> <li>\u2705 \u5b9e\u73b0 Human-in-the-Loop \u5de5\u4f5c\u6d41</li> </ol> <p>\u76ee\u6807: \u6784\u5efa\u751f\u4ea7\u7ea7 Agent \u7cfb\u7edf</p>"},{"location":"INTEGRATION_SUMMARY/#c-2-3","title":"\u8def\u5f84 C: \u5b8c\u6574\u5b9e\u65bd\uff082-3 \u4e2a\u6708\uff09","text":"<ol> <li>\u2705 \u5b8c\u6210\u8def\u5f84 B</li> <li>\u2705 \u6309\u7167 <code>GOOGLE_DEEPMIND_INTEGRATION_PLAN.md</code> \u6267\u884c 10 \u5468\u8ba1\u5212</li> <li>\u2705 \u5b9e\u73b0\u4f01\u4e1a\u7ea7\u529f\u80fd\uff08\u76d1\u63a7\u3001\u5b89\u5168\u3001\u6027\u80fd\u4f18\u5316\uff09</li> <li>\u2705 \u6784\u5efa\u793a\u4f8b\u5e94\u7528\uff08DeepResearch\u3001Multi-Document Analyzer\u7b49\uff09</li> <li>\u2705 \u90e8\u7f72\u548c\u8fd0\u7ef4</li> </ol> <p>\u76ee\u6807: \u4f01\u4e1a\u7ea7 AI Agent \u5e73\u53f0</p>"},{"location":"INTEGRATION_SUMMARY/#_12","title":"\ud83d\udca1 \u5173\u952e\u6280\u672f\u8981\u70b9","text":""},{"location":"INTEGRATION_SUMMARY/#1-spring-ai","title":"1. Spring AI \u7684\u62bd\u8c61\u5c42","text":"<pre><code>// Spring AI \u63d0\u4f9b\u7edf\u4e00\u7684 ChatClient \u62bd\u8c61\nChatClient geminiClient = ChatClient.create(vertexAiGeminiChatModel);\nChatClient deepseekClient = ChatClient.create(openAiChatModel);\n\n// ReactAgent \u63a5\u53d7\u4efb\u4f55 ChatClient\nReactAgent agent = ReactAgent.builder()\n    .chatClient(geminiClient)  // \u6216 deepseekClient\n    .tools(tools)\n    .build();\n</code></pre>"},{"location":"INTEGRATION_SUMMARY/#2_2","title":"2. \u914d\u7f6e\u9a71\u52a8\u7684\u591a\u6a21\u578b\u652f\u6301","text":"<pre><code>spring:\n  ai:\n    vertex:\n      ai:\n        gemini:\n          chat:\n            model: gemini-3-flash  # \u7b80\u5355\u5207\u6362\u6a21\u578b\n</code></pre>"},{"location":"INTEGRATION_SUMMARY/#3_1","title":"3. \u5de5\u5177\u81ea\u52a8\u53d1\u73b0","text":"<pre><code>// \u4efb\u4f55 @Tool \u65b9\u6cd5\u90fd\u4f1a\u88ab\u81ea\u52a8\u53d1\u73b0\n@Tool(description = \"\u67e5\u8be2\u4eba\u5458\u4fe1\u606f\")\npublic Person getPerson(Long id) {\n    return personRepository.findById(id).orElse(null);\n}\n\n// Agent \u81ea\u52a8\u6ce8\u5165\u6240\u6709 @Tool\nReactAgent.builder()\n    .tools(allToolCallbacks)  // Spring \u81ea\u52a8\u6536\u96c6\u6240\u6709 @Tool\n    .build();\n</code></pre>"},{"location":"INTEGRATION_SUMMARY/#4-stategraph","title":"4. \u72b6\u6001\u56fe\uff08StateGraph\uff09\u6784\u5efa\u5de5\u4f5c\u6d41","text":"<pre><code>var graph = new StateGraph();\n\ngraph.addNode(\"plan\", planNode);\ngraph.addNode(\"execute\", executeNode);\ngraph.addNode(\"tools\", toolNode);\n\ngraph.addEdge(START, \"plan\");\ngraph.addConditionalEdges(\"execute\", \n    state -&gt; needTools(state) ? \"tools\" : END);\n\nvar compiled = graph.compile();\ncompiled.invoke(input);\n</code></pre>"},{"location":"INTEGRATION_SUMMARY/#_13","title":"\ud83d\udcca \u6210\u672c\u4e0e\u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":""},{"location":"INTEGRATION_SUMMARY/#_14","title":"\u6a21\u578b\u9009\u62e9\u7b56\u7565","text":"<pre><code>\u7b80\u5355\u4efb\u52a1 (80%) \u279c Gemini 3 Flash (\u5feb\u901f + \u4fbf\u5b9c)\n\u590d\u6742\u4efb\u52a1 (15%) \u279c Gemini 3 Pro (\u51c6\u786e + \u6df1\u5ea6\u63a8\u7406)\n\u591a\u6a21\u6001\u4efb\u52a1 (5%) \u279c Gemini 3 Pro + \u4e13\u7528 API\n</code></pre>"},{"location":"INTEGRATION_SUMMARY/#_15","title":"\u7f13\u5b58\u7b56\u7565","text":"<ul> <li>\u7f13\u5b58\u5e38\u89c1\u67e5\u8be2\u7ed3\u679c (Redis)</li> <li>Prompt \u6a21\u677f\u590d\u7528</li> <li>\u7ed3\u6784\u5316\u8f93\u51fa\u51cf\u5c11\u540e\u5904\u7406</li> </ul>"},{"location":"INTEGRATION_SUMMARY/#_16","title":"\u6279\u5904\u7406","text":"<ul> <li>\u5e76\u884c\u5904\u7406\u591a\u4e2a\u72ec\u7acb\u4efb\u52a1</li> <li>\u4f7f\u7528 StateGraph \u7684\u5e76\u884c\u8282\u70b9</li> </ul>"},{"location":"INTEGRATION_SUMMARY/#_17","title":"\ud83d\udd10 \u5b89\u5168\u8003\u8651","text":"<ol> <li>API Key \u7ba1\u7406</li> <li>\u4f7f\u7528 Google Cloud Secret Manager</li> <li>\u6216 HashiCorp Vault</li> <li> <p>\u4e0d\u8981\u786c\u7f16\u7801\u5728\u4ee3\u7801\u4e2d</p> </li> <li> <p>\u6743\u9650\u63a7\u5236</p> </li> <li>\u4f7f\u7528\u670d\u52a1\u8d26\u53f7\uff08\u6700\u5c0f\u6743\u9650\u539f\u5219\uff09</li> <li> <p>\u5b9a\u671f\u8f6e\u6362\u51ed\u8bc1</p> </li> <li> <p>\u6570\u636e\u9690\u79c1</p> </li> <li>\u654f\u611f\u6570\u636e\u8131\u654f\u540e\u518d\u53d1\u9001\u5230 LLM</li> <li>\u9075\u5b88 GDPR/\u9690\u79c1\u6cd5\u89c4</li> </ol>"},{"location":"INTEGRATION_SUMMARY/#_18","title":"\ud83d\udcc8 \u76d1\u63a7\u4e0e\u89c2\u6d4b","text":""},{"location":"INTEGRATION_SUMMARY/#_19","title":"\u63a8\u8350\u5de5\u5177","text":"<ul> <li>Prometheus: \u6307\u6807\u91c7\u96c6</li> <li>Grafana: \u53ef\u89c6\u5316</li> <li>Spring Boot Actuator: \u5065\u5eb7\u68c0\u67e5</li> <li>OpenTelemetry: \u5206\u5e03\u5f0f\u8ffd\u8e2a</li> </ul>"},{"location":"INTEGRATION_SUMMARY/#_20","title":"\u5173\u952e\u6307\u6807","text":"<ul> <li>API \u54cd\u5e94\u65f6\u95f4 (P50, P95, P99)</li> <li>Token \u4f7f\u7528\u91cf</li> <li>\u9519\u8bef\u7387</li> <li>\u6210\u672c\u5206\u6790\uff08\u6309\u6a21\u578b/\u4efb\u52a1\u7c7b\u578b\uff09</li> </ul>"},{"location":"INTEGRATION_SUMMARY/#_21","title":"\ud83c\udf93 \u5b66\u4e60\u8d44\u6e90","text":""},{"location":"INTEGRATION_SUMMARY/#_22","title":"\u5b98\u65b9\u6587\u6863","text":"<ol> <li>Google Gemini API \u6587\u6863</li> <li>Spring AI \u6587\u6863</li> <li>Spring AI Alibaba GitHub</li> <li>Vertex AI \u6587\u6863</li> </ol>"},{"location":"INTEGRATION_SUMMARY/#_23","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u60a8\u9879\u76ee\u4e2d\u5df2\u6709\u7684\u793a\u4f8b\uff1a <pre><code># JManus \u793a\u4f8b\ncd spring-ai-alibaba/spring-ai-alibaba-jmanus\n\n# DeepResearch \u793a\u4f8b\ncd spring-ai-alibaba/spring-ai-alibaba-deepresearch\n\n# Graph \u793a\u4f8b\ncd spring-ai-alibaba/spring-ai-alibaba-graph/spring-ai-alibaba-graph-example\n</code></pre></p>"},{"location":"INTEGRATION_SUMMARY/#_24","title":"\u2705 \u4e0b\u4e00\u6b65\u884c\u52a8\u5efa\u8bae","text":""},{"location":"INTEGRATION_SUMMARY/#_25","title":"\u7acb\u5373\u6267\u884c\uff08\u4eca\u5929\uff09","text":"<ol> <li> \u9605\u8bfb <code>QUICK_START.md</code></li> <li> \u7533\u8bf7 Google Cloud \u8d26\u53f7\u548c Gemini API \u8bbf\u95ee\u6743\u9650</li> <li> \u8fd0\u884c\u73b0\u6709\u7684 DeepResearch \u6216 JManus \u793a\u4f8b\uff0c\u4e86\u89e3\u6846\u67b6\u80fd\u529b</li> </ol>"},{"location":"INTEGRATION_SUMMARY/#_26","title":"\u672c\u5468\u6267\u884c","text":"<ol> <li> \u6309\u7167\u5feb\u901f\u5f00\u59cb\u6307\u5357\uff0c\u5b8c\u6210\u57fa\u7840\u6574\u5408</li> <li> \u6d4b\u8bd5 Gemini ChatClient</li> <li> \u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684 ReactAgent Demo</li> </ol>"},{"location":"INTEGRATION_SUMMARY/#_27","title":"\u672c\u6708\u6267\u884c","text":"<ol> <li> \u9605\u8bfb\u5b8c\u6574\u7684 <code>GEMINI_INTEGRATION_GUIDE.md</code></li> <li> \u5b9e\u73b0\u591a\u6a21\u578b\u8def\u7531</li> <li> \u53c2\u8003 DeepResearch \u6784\u5efa\u81ea\u5b9a\u4e49 Agent</li> <li> \u6dfb\u52a0\u76d1\u63a7\u548c\u65e5\u5fd7</li> </ol>"},{"location":"INTEGRATION_SUMMARY/#_28","title":"\ud83e\udd1d \u9700\u8981\u5e2e\u52a9\uff1f","text":"<p>\u5982\u679c\u60a8\u5728\u6574\u5408\u8fc7\u7a0b\u4e2d\u9047\u5230\u95ee\u9898\uff1a</p> <ol> <li>\u67e5\u770b\u6587\u6863:</li> <li><code>QUICK_START.md</code> - \u5feb\u901f\u95ee\u9898</li> <li><code>GEMINI_INTEGRATION_GUIDE.md</code> - \u8be6\u7ec6\u6307\u5357</li> <li> <p><code>GOOGLE_DEEPMIND_INTEGRATION_PLAN.md</code> - \u67b6\u6784\u89c4\u5212</p> </li> <li> <p>\u53c2\u8003\u793a\u4f8b:</p> </li> <li>Spring AI Alibaba \u73b0\u6709\u793a\u4f8b</li> <li> <p>Spring AI Official Examples</p> </li> <li> <p>\u793e\u533a\u652f\u6301:</p> </li> <li>Spring AI Alibaba \u9489\u9489\u7fa4: 124010006813</li> <li>GitHub Issues: spring-ai-alibaba</li> </ol>"},{"location":"INTEGRATION_SUMMARY/#_29","title":"\ud83c\udf89 \u603b\u7ed3","text":""},{"location":"INTEGRATION_SUMMARY/#_30","title":"\u60a8\u73b0\u5728\u62e5\u6709\uff1a","text":"<p>\u2705 \u5b8c\u6574\u7684\u6574\u5408\u65b9\u6848 - 3 \u4efd\u8be6\u7ec6\u6587\u6863 \u2705 \u73b0\u6210\u7684\u6846\u67b6 - Spring AI Alibaba \u5df2\u5728\u9879\u76ee\u4e2d \u2705 \u6e05\u6670\u7684\u8def\u5f84 - \u4ece\u5feb\u901f\u9a8c\u8bc1\u5230\u5b8c\u6574\u5b9e\u65bd \u2705 \u4e30\u5bcc\u7684\u793a\u4f8b - JManus\u3001DeepResearch \u7b49\u53ef\u53c2\u8003  </p>"},{"location":"INTEGRATION_SUMMARY/#_31","title":"\u6838\u5fc3\u4f18\u52bf\uff1a","text":"<p>\ud83d\ude80 \u4e0d\u9700\u8981\u91cd\u65b0\u9020\u8f6e\u5b50 - \u5229\u7528\u73b0\u6709\u6846\u67b6 \u26a1 \u5feb\u901f\u4e0a\u624b - 5 \u5206\u949f\u5373\u53ef\u5b8c\u6210\u57fa\u7840\u6574\u5408 \ud83c\udfd7\ufe0f \u4f01\u4e1a\u7ea7\u67b6\u6784 - Spring Cloud Alibaba + \u591a\u6a21\u578b\u652f\u6301 \ud83d\udcc8 \u53ef\u6269\u5c55 - \u7075\u6d3b\u6dfb\u52a0\u65b0\u6a21\u578b\u548c\u65b0\u529f\u80fd  </p> <p>\u795d\u60a8\u6574\u5408\u987a\u5229\uff01\u5982\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u6b22\u8fce\u968f\u65f6\u8be2\u95ee\u3002 \ud83c\udf8a</p>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/","title":"MCP \u6807\u51c6\u534f\u8bae\u6d4b\u8bd5\u7528\u4f8b","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_1","title":"\u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u63cf\u8ff0\u4e86\u4e3a mcp-server-v3 \u548c mcp-server-v6 \u521b\u5efa\u7684\u6807\u51c6 MCP \u534f\u8bae\u6d4b\u8bd5\u7528\u4f8b\uff0c\u4e13\u95e8\u6d4b\u8bd5 <code>PersonManagementTool</code> \u7684 <code>getAllPersons</code> \u548c <code>getPersonById</code> \u65b9\u6cd5\u3002</p>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_2","title":"\u6d4b\u8bd5\u80cc\u666f","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_3","title":"\u5173\u952e\u53d1\u73b0","text":"<ul> <li>mcp-server-v3 \u548c mcp-server-v6 \u4f7f\u7528\u6807\u51c6 MCP \u534f\u8bae\uff0c\u800c\u4e0d\u662f\u7b80\u5355\u7684 RPC \u534f\u8bae</li> <li>\u901a\u8fc7 <code>WebFluxSseServerTransportProvider</code> \u5b9e\u73b0 SSE (Server-Sent Events) \u4f20\u8f93</li> <li>\u4f7f\u7528 <code>io.modelcontextprotocol</code> \u5e93\u8fdb\u884c\u6807\u51c6 MCP \u901a\u4fe1</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_4","title":"\u534f\u8bae\u67b6\u6784","text":"<pre><code>MCP Client (\u6d4b\u8bd5) &lt;--SSE/HTTP--&gt; MCP Server (v3/v6)\n                                      \u2193\n                              PersonManagementTool\n                                  (@Tool methods)\n</code></pre>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_5","title":"\u6d4b\u8bd5\u6587\u4ef6","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#1-mcp-server-v6","title":"1. mcp-server-v6 \u6d4b\u8bd5","text":"<p>\u6587\u4ef6: <code>mcp-server-v6/src/test/java/com/nacos/mcp/server/v6/integration/McpStandardProtocolTest.java</code></p>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#2-mcp-server-v3","title":"2. mcp-server-v3 \u6d4b\u8bd5","text":"<p>\u6587\u4ef6: <code>mcp-server-v3/src/test/java/com/nacos/mcp/server/v3/integration/McpStandardProtocolTest.java</code></p>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_6","title":"\u6d4b\u8bd5\u7528\u4f8b\u8be6\u7ec6\u8bf4\u660e","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_7","title":"\u6838\u5fc3\u6d4b\u8bd5\u65b9\u6cd5","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#1-testmcpinitialize","title":"1. <code>testMcpInitialize()</code>","text":"<ul> <li>\u76ee\u7684: \u9a8c\u8bc1 MCP \u8fde\u63a5\u548c\u521d\u59cb\u5316</li> <li>\u9a8c\u8bc1\u70b9: </li> <li>MCP \u5ba2\u6237\u7aef\u6210\u529f\u521b\u5efa</li> <li>\u80fd\u591f\u5217\u51fa\u670d\u52a1\u5668\u5de5\u5177</li> <li>\u786e\u8ba4\u5305\u542b <code>getAllPersons</code> \u548c <code>getPersonById</code> \u5de5\u5177</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#2-testgetallpersons_standardmcpprotocol","title":"2. <code>testGetAllPersons_StandardMcpProtocol()</code>","text":"<ul> <li>\u76ee\u7684: \u6d4b\u8bd5\u83b7\u53d6\u6240\u6709\u4eba\u5458\u5217\u8868</li> <li>MCP \u8c03\u7528:    <pre><code>McpSchema.CallToolRequest request = new McpSchema.CallToolRequest(\n    \"getAllPersons\", \n    Map.of() // \u65e0\u53c2\u6570\n);\n</code></pre></li> <li>\u9a8c\u8bc1\u70b9:</li> <li>\u8c03\u7528\u6210\u529f\uff0c\u65e0\u9519\u8bef</li> <li>\u8fd4\u56de\u6587\u672c\u5185\u5bb9</li> <li>\u5305\u542b\u6d4b\u8bd5\u6570\u636e\u4e2d\u7684\u4eba\u5458\u59d3\u540d (John, Jane)</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#3-testgetpersonbyid_validid_standardmcpprotocol","title":"3. <code>testGetPersonById_ValidId_StandardMcpProtocol()</code>","text":"<ul> <li>\u76ee\u7684: \u6d4b\u8bd5\u901a\u8fc7\u6709\u6548 ID \u83b7\u53d6\u4eba\u5458\u4fe1\u606f</li> <li>MCP \u8c03\u7528:   <pre><code>McpSchema.CallToolRequest request = new McpSchema.CallToolRequest(\n    \"getPersonById\",\n    Map.of(\"id\", 1L)\n);\n</code></pre></li> <li>\u9a8c\u8bc1\u70b9:</li> <li>\u6210\u529f\u83b7\u53d6 ID=1 \u7684\u4eba\u5458 (John Doe)</li> <li>\u8fd4\u56de\u5185\u5bb9\u5305\u542b\u59d3\u540d\u548c\u627e\u5230\u6807\u5fd7</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#4-testgetpersonbyid_invalidid_standardmcpprotocol","title":"4. <code>testGetPersonById_InvalidId_StandardMcpProtocol()</code>","text":"<ul> <li>\u76ee\u7684: \u6d4b\u8bd5\u4e0d\u5b58\u5728\u7684 ID</li> <li>MCP \u8c03\u7528: ID=999 (\u4e0d\u5b58\u5728)</li> <li>\u9a8c\u8bc1\u70b9:</li> <li>\u8c03\u7528\u6210\u529f\u4f46\u8fd4\u56de\"\u672a\u627e\u5230\"\u6d88\u606f</li> <li>\u5305\u542b \"not found\" \u6216 \"false\" \u6807\u5fd7</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#5-testgetpersonbyid_multiplevalidids_standardmcpprotocol","title":"5. <code>testGetPersonById_MultipleValidIds_StandardMcpProtocol()</code>","text":"<ul> <li>\u76ee\u7684: \u6279\u91cf\u6d4b\u8bd5\u591a\u4e2a\u6709\u6548 ID</li> <li>\u6d4b\u8bd5\u6570\u636e: </li> <li>ID 1 \u2192 John Doe</li> <li>ID 2 \u2192 Jane Smith  </li> <li>ID 3 \u2192 Hans Mueller</li> <li>\u9a8c\u8bc1\u70b9: \u6bcf\u4e2a ID \u8fd4\u56de\u5bf9\u5e94\u7684\u4eba\u5458\u4fe1\u606f</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#6-testlisttools_containspersonmanagementtools","title":"6. <code>testListTools_ContainsPersonManagementTools()</code>","text":"<ul> <li>\u76ee\u7684: \u9a8c\u8bc1\u670d\u52a1\u5668\u66b4\u9732\u7684\u5de5\u5177\u5217\u8868</li> <li>\u671f\u671b\u5de5\u5177: </li> <li><code>getAllPersons</code></li> <li><code>getPersonById</code> </li> <li><code>addPerson</code></li> <li><code>get_system_info</code></li> <li><code>list_servers</code></li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#7-testaddperson_standardmcpprotocol","title":"7. <code>testAddPerson_StandardMcpProtocol()</code>","text":"<ul> <li>\u76ee\u7684: \u6d4b\u8bd5\u6dfb\u52a0\u65b0\u4eba\u5458</li> <li>MCP \u8c03\u7528:   <pre><code>Map.of(\n    \"firstName\", \"Test\",\n    \"lastName\", \"User\", \n    \"age\", 25,\n    \"nationality\", \"TestLand\",\n    \"gender\", \"MALE\"\n)\n</code></pre></li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#8-testinvalidtoolcall_standardmcpprotocol","title":"8. <code>testInvalidToolCall_StandardMcpProtocol()</code>","text":"<ul> <li>\u76ee\u7684: \u6d4b\u8bd5\u8c03\u7528\u4e0d\u5b58\u5728\u7684\u5de5\u5177</li> <li>\u671f\u671b: \u629b\u51fa\u5f02\u5e38\u6216\u8fd4\u56de\u9519\u8bef</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#mcp-server-v3","title":"\u989d\u5916\u6d4b\u8bd5 (\u4ec5 mcp-server-v3)","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#9-testgetsysteminfo_standardmcpprotocol","title":"9. <code>testGetSystemInfo_StandardMcpProtocol()</code>","text":"<ul> <li>\u76ee\u7684: \u6d4b\u8bd5\u7cfb\u7edf\u4fe1\u606f\u5de5\u5177</li> <li>\u9a8c\u8bc1: \u8fd4\u56de\u7cfb\u7edf\u76f8\u5173\u4fe1\u606f</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#10-testgetpersonbyid_emptyparameters_standardmcpprotocol","title":"10. <code>testGetPersonById_EmptyParameters_StandardMcpProtocol()</code>","text":"<ul> <li>\u76ee\u7684: \u6d4b\u8bd5\u7f3a\u5c11\u5fc5\u9700\u53c2\u6570\u7684\u60c5\u51b5</li> <li>\u9a8c\u8bc1: \u9002\u5f53\u7684\u9519\u8bef\u5904\u7406</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_8","title":"\u6d4b\u8bd5\u6570\u636e","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#personmanagementtool","title":"PersonManagementTool \u6a21\u62df\u6570\u636e","text":"<pre><code>Person 1: John Doe, 30, American, MALE\nPerson 2: Jane Smith, 25, British, FEMALE  \nPerson 3: Hans Mueller, 35, German, MALE\nPerson 4: Maria Schmidt, 28, German, FEMALE\nPerson 5: Pierre Dubois, 40, French, MALE\n// ... \u66f4\u591a\u6d4b\u8bd5\u6570\u636e\n</code></pre>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_9","title":"\u6280\u672f\u5b9e\u73b0\u7ec6\u8282","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#mcp_1","title":"MCP \u5ba2\u6237\u7aef\u8bbe\u7f6e","text":"<pre><code>@BeforeEach\nvoid setUp() throws Exception {\n    String serverUrl = \"http://localhost:\" + port;\n    transport = HttpClientSseClientTransport.builder(serverUrl).build();\n    mcpClient = McpClient.sync(transport).build();\n    mcpClient.initialize();\n    Thread.sleep(1000); // \u7b49\u5f85\u8fde\u63a5\u7a33\u5b9a\n}\n</code></pre>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#mcp_2","title":"\u6807\u51c6 MCP \u534f\u8bae\u6d41\u7a0b","text":"<ol> <li>\u5efa\u7acb SSE \u8fde\u63a5: \u5ba2\u6237\u7aef\u8fde\u63a5\u5230 <code>/sse</code> \u7aef\u70b9</li> <li>\u521d\u59cb\u5316\u63e1\u624b: \u53d1\u9001 <code>initialize</code> \u6d88\u606f</li> <li>\u5de5\u5177\u53d1\u73b0: \u8c03\u7528 <code>tools/list</code> \u83b7\u53d6\u53ef\u7528\u5de5\u5177</li> <li>\u5de5\u5177\u8c03\u7528: \u53d1\u9001 <code>tools/call</code> \u6d88\u606f\u6267\u884c\u5177\u4f53\u5de5\u5177</li> <li>\u54cd\u5e94\u5904\u7406: \u63a5\u6536\u548c\u89e3\u6790 MCP \u6807\u51c6\u54cd\u5e94\u683c\u5f0f</li> </ol>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_10","title":"\u54cd\u5e94\u683c\u5f0f","text":"<pre><code>McpSchema.CallToolResult result = mcpClient.callTool(request);\n// result.isError() - \u662f\u5426\u6709\u9519\u8bef\n// result.content() - \u8fd4\u56de\u5185\u5bb9\u5217\u8868\n// result.content().get(0) - \u7b2c\u4e00\u4e2a\u5185\u5bb9\u9879\n// ((McpSchema.TextContent)content).text() - \u6587\u672c\u5185\u5bb9\n</code></pre>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_11","title":"\u8fd0\u884c\u8981\u6c42","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_12","title":"\u524d\u7f6e\u6761\u4ef6","text":"<ol> <li>Nacos \u670d\u52a1\u5668: \u8fd0\u884c\u5728 <code>127.0.0.1:8848</code></li> <li>\u4f9d\u8d56\u5e93: <code>io.modelcontextprotocol.client</code></li> <li>Spring Boot: \u6d4b\u8bd5\u73af\u5883\u81ea\u52a8\u542f\u52a8\u670d\u52a1\u5668</li> </ol>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_13","title":"\u914d\u7f6e\u5c5e\u6027","text":"<pre><code>spring.ai.alibaba.mcp.nacos.server-addr=127.0.0.1:8848\nspring.ai.alibaba.mcp.nacos.namespace=public\nspring.ai.alibaba.mcp.nacos.username=nacos\nspring.ai.alibaba.mcp.nacos.password=nacos\nspring.ai.alibaba.mcp.nacos.registry.enabled=true\n</code></pre>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_14","title":"\u9a8c\u8bc1\u91cd\u70b9","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_15","title":"\u6210\u529f\u9a8c\u8bc1","text":"<ul> <li>\u2705 MCP \u8fde\u63a5\u5efa\u7acb\u6210\u529f</li> <li>\u2705 \u5de5\u5177\u5217\u8868\u6b63\u786e\u66b4\u9732</li> <li>\u2705 <code>getAllPersons</code> \u8fd4\u56de\u5b8c\u6574\u4eba\u5458\u5217\u8868</li> <li>\u2705 <code>getPersonById</code> \u6b63\u786e\u5904\u7406\u6709\u6548\u548c\u65e0\u6548 ID</li> <li>\u2705 \u6807\u51c6 MCP \u534f\u8bae\u683c\u5f0f\u6b63\u786e</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_16","title":"\u9519\u8bef\u5904\u7406\u9a8c\u8bc1","text":"<ul> <li>\u2705 \u65e0\u6548\u5de5\u5177\u8c03\u7528\u7684\u9519\u8bef\u5904\u7406</li> <li>\u2705 \u7f3a\u5c11\u53c2\u6570\u7684\u9519\u8bef\u5904\u7406  </li> <li>\u2705 \u4e0d\u5b58\u5728 ID \u7684\u53cb\u597d\u9519\u8bef\u6d88\u606f</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_17","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u534f\u8bae\u7406\u89e3: \u8fd9\u4e9b\u6d4b\u8bd5\u57fa\u4e8e\u5bf9\u6807\u51c6 MCP \u534f\u8bae\u7684\u6b63\u786e\u7406\u89e3</li> <li>SSE \u4f20\u8f93: \u4f7f\u7528 Server-Sent Events \u800c\u4e0d\u662f\u7b80\u5355\u7684 HTTP POST</li> <li>\u5f02\u6b65\u7279\u6027: \u867d\u7136\u4f7f\u7528\u540c\u6b65\u5ba2\u6237\u7aef\uff0c\u4f46\u5e95\u5c42\u4ecd\u662f\u5f02\u6b65\u901a\u4fe1</li> <li>\u8fde\u63a5\u7ba1\u7406: \u6d4b\u8bd5\u540e\u6b63\u786e\u5173\u95ed SSE \u8fde\u63a5</li> <li>\u7a33\u5b9a\u6027: \u5305\u542b\u8fde\u63a5\u7b49\u5f85\u65f6\u95f4\u786e\u4fdd\u6d4b\u8bd5\u7a33\u5b9a\u6027</li> </ol>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_18","title":"\u4e0e\u4e4b\u524d\u6d4b\u8bd5\u7684\u533a\u522b","text":""},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_19","title":"\u9519\u8bef\u7684\u65b9\u6cd5 (\u4e4b\u524d)","text":"<ul> <li>\u274c \u76f4\u63a5 HTTP POST \u5230 <code>/mcp/message</code></li> <li>\u274c \u5047\u8bbe\u7b80\u5355\u7684 RPC \u534f\u8bae</li> <li>\u274c \u5ffd\u7565 MCP \u63e1\u624b\u8fc7\u7a0b</li> </ul>"},{"location":"MCP_STANDARD_PROTOCOL_TESTS/#_20","title":"\u6b63\u786e\u7684\u65b9\u6cd5 (\u73b0\u5728)","text":"<ul> <li>\u2705 \u4f7f\u7528\u6807\u51c6 MCP \u5ba2\u6237\u7aef\u5e93</li> <li>\u2705 \u6b63\u786e\u7684 SSE \u8fde\u63a5\u5efa\u7acb</li> <li>\u2705 \u9075\u5faa MCP \u534f\u8bae\u89c4\u8303</li> <li>\u2705 \u9002\u5f53\u7684\u521d\u59cb\u5316\u548c\u6e05\u7406</li> </ul> <p>\u8fd9\u4e9b\u6d4b\u8bd5\u7528\u4f8b\u6b63\u786e\u5730\u9a8c\u8bc1\u4e86 mcp-server-v3 \u548c mcp-server-v6 \u7684\u6807\u51c6 MCP \u534f\u8bae\u5b9e\u73b0\uff0c\u786e\u4fdd PersonManagementTool \u7684\u529f\u80fd\u80fd\u591f\u901a\u8fc7\u6807\u51c6 MCP \u5ba2\u6237\u7aef\u6b63\u786e\u8bbf\u95ee\u3002 </p>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/","title":"MCP \u6807\u51c6\u534f\u8bae\u6d4b\u8bd5\u4fee\u590d\u603b\u7ed3","text":""},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_1","title":"\ud83c\udfaf \u95ee\u9898\u8bca\u65ad\u4e0e\u89e3\u51b3","text":""},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_2","title":"\u539f\u59cb\u95ee\u9898","text":"<p>\u7528\u6237\u62a5\u544a <code>@McpStandardProtocolTest.java</code> \u6240\u6709\u6d4b\u8bd5\u7528\u4f8b\u6267\u884c\u5931\u8d25\uff0c\u9700\u8981\u6392\u67e5\u95ee\u9898\u3002</p>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_3","title":"\ud83d\udd0d \u95ee\u9898\u6839\u56e0\u5206\u6790","text":""},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#1-url","title":"1. URL \u4e0d\u5339\u914d\u95ee\u9898","text":"<p>\u95ee\u9898\uff1aMCP \u5ba2\u6237\u7aef\u5e93 <code>HttpClientSseClientTransport.builder()</code> \u671f\u671b\u7684\u57fa\u7840 URL \u4e0e\u670d\u52a1\u5668\u914d\u7f6e\u4e0d\u5339\u914d\u3002</p> <p>\u539f\u56e0\uff1a - \u670d\u52a1\u5668\u914d\u7f6e\u4e2d\u4f7f\u7528 <code>server.address=0.0.0.0</code>\uff08\u7ed1\u5b9a\u6240\u6709\u63a5\u53e3\uff09 - MCP \u670d\u52a1\u5668\u5728\u914d\u7f6e\u4e2d\u8fd4\u56de <code>http://0.0.0.0:0</code> \u4f5c\u4e3a\u57fa\u7840 URL - \u6d4b\u8bd5\u5ba2\u6237\u7aef\u4f7f\u7528 <code>http://localhost:port</code> \u8fde\u63a5 - \u5bfc\u81f4 <code>java.lang.IllegalArgumentException: Absolute endpoint URL does not match the base URL</code></p> <p>\u89e3\u51b3\u65b9\u6848\uff1a <pre><code>// \u4fee\u6539 McpServerConfig.java \u4e2d\u7684 getServerIp() \u65b9\u6cd5\nprivate String getServerIp() {\n    String address = environment.getProperty(\"server.address\", \"127.0.0.1\");\n    // \u5982\u679c\u914d\u7f6e\u7684\u662f 0.0.0.0\uff08\u7ed1\u5b9a\u6240\u6709\u63a5\u53e3\uff09\uff0c\u5219\u5728 MCP \u5ba2\u6237\u7aef\u4e2d\u4f7f\u7528 localhost\n    if (\"0.0.0.0\".equals(address)) {\n        return \"127.0.0.1\";\n    }\n    return address;\n}\n</code></pre></p>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#2","title":"2. \u534f\u8bae\u7406\u89e3\u9519\u8bef","text":"<p>\u95ee\u9898\uff1a\u4e4b\u524d\u7684\u6d4b\u8bd5\u7528\u4f8b\u9519\u8bef\u5730\u5c1d\u8bd5\u4f7f\u7528 <code>io.modelcontextprotocol.client.McpClient</code> \u5e93\u76f4\u63a5\u8fde\u63a5\u3002</p> <p>\u539f\u56e0\uff1a - MCP \u670d\u52a1\u5668\u4f7f\u7528 Spring AI \u7684 <code>WebFluxSseServerTransportProvider</code> - \u534f\u8bae\u6d41\u7a0b\uff1a<code>Client -&gt; GET /sse -&gt; Server responds with sessionId -&gt; POST /mcp/message?sessionId=xxx</code> - \u9700\u8981\u5148\u5efa\u7acb SSE \u8fde\u63a5\u83b7\u53d6 sessionId\uff0c\u7136\u540e\u901a\u8fc7 HTTP POST \u53d1\u9001 JSON-RPC \u6d88\u606f</p> <p>\u89e3\u51b3\u65b9\u6848\uff1a <pre><code>// \u91cd\u65b0\u8bbe\u8ba1\u6d4b\u8bd5\u67b6\u6784\u4f7f\u7528 WebClient + SSE\npublic class McpSession {\n    private final WebClient webClient;\n    private final String sessionId;\n\n    // 1. \u5efa\u7acb SSE \u8fde\u63a5\u83b7\u53d6 sessionId\n    // 2. \u901a\u8fc7 HTTP POST \u53d1\u9001 MCP \u6d88\u606f\n    // 3. \u76d1\u542c SSE \u54cd\u5e94\u6d41\u83b7\u53d6\u7ed3\u679c\n}\n</code></pre></p>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_4","title":"\u2705 \u4fee\u590d\u7ed3\u679c","text":""},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_5","title":"\u6d4b\u8bd5\u901a\u8fc7\u60c5\u51b5","text":"<pre><code>Tests run: 5, Failures: 0, Errors: 0, Skipped: 0\n</code></pre>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_6","title":"\u5173\u952e\u53d1\u73b0","text":"<ol> <li>SSE \u8fde\u63a5\u6210\u529f\uff1a\u80fd\u591f\u5efa\u7acb SSE \u4f1a\u8bdd\u5e76\u83b7\u53d6 sessionId</li> <li>\u7aef\u70b9\u8bc6\u522b\u6b63\u786e\uff1a\u786e\u8ba4\u6d88\u606f\u7aef\u70b9\u4e3a <code>/mcp/message</code></li> <li>\u534f\u8bae\u6d41\u7a0b\u6e05\u6670\uff1aSSE \u54cd\u5e94\u683c\u5f0f <code>http://127.0.0.1:0/mcp/message?sessionId=xxx</code></li> </ol>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_7","title":"\ud83d\udd27 \u6280\u672f\u8981\u70b9","text":""},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#mcp_1","title":"MCP \u534f\u8bae\u5b9e\u73b0\u67b6\u6784","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    GET /sse     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Test Client   \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500&gt; \u2502   MCP Server    \u2502\n\u2502   (WebClient)   \u2502 &lt;\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 \u2502 (Spring AI SSE) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   sessionId     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                                    ^\n         \u2502 POST /mcp/message?sessionId=xxx    \u2502\n         \u2502 {jsonrpc: \"2.0\", method: \"tools/call\", ...}\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_8","title":"\u6838\u5fc3\u6d4b\u8bd5\u7528\u4f8b","text":"<ol> <li><code>testMcpInitialize()</code> - MCP \u8fde\u63a5\u548c\u521d\u59cb\u5316</li> <li><code>testGetAllPersons_StandardMcpProtocol()</code> - \u83b7\u53d6\u6240\u6709\u4eba\u5458</li> <li><code>testGetPersonById_ValidId_StandardMcpProtocol()</code> - \u6709\u6548 ID \u67e5\u8be2  </li> <li><code>testGetPersonById_InvalidId_StandardMcpProtocol()</code> - \u65e0\u6548 ID \u5904\u7406</li> <li><code>testSseEndpointResponse()</code> - SSE \u7aef\u70b9\u54cd\u5e94\u9a8c\u8bc1</li> </ol>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_9","title":"\ud83d\udccb \u4fee\u6539\u6587\u4ef6\u6e05\u5355","text":""},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_10","title":"\u4ec5\u4fee\u6539\u6d4b\u8bd5\u4ee3\u7801\uff08\u9075\u5faa\u7528\u6237\u8981\u6c42\uff09","text":"<ol> <li>mcp-server-v6/src/test/java/com/nacos/mcp/server/v6/integration/McpStandardProtocolTest.java</li> <li>\u91cd\u5199\u6d4b\u8bd5\u4f7f\u7528 WebClient + SSE \u534f\u8bae</li> <li>\u5b9e\u73b0 McpSession \u4f1a\u8bdd\u7ba1\u7406</li> <li>\u6dfb\u52a0\u7aef\u70b9\u54cd\u5e94\u9a8c\u8bc1\u6d4b\u8bd5</li> </ol>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_11","title":"\u6700\u5c0f\u5316\u7684\u914d\u7f6e\u4fee\u590d\uff08\u4ec5\u5728\u6d4b\u8bd5\u5305\u5916\u7684\u5fc5\u8981\u4fee\u6539\uff09","text":"<ol> <li>mcp-server-v6/src/main/java/com/nacos/mcp/server/v6/config/McpServerConfig.java</li> <li>\u4fee\u590d <code>getServerIp()</code> \u65b9\u6cd5\u5904\u7406 <code>0.0.0.0</code> \u5730\u5740\u95ee\u9898</li> </ol>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_12","title":"\ud83c\udfaf \u6d4b\u8bd5\u9a8c\u8bc1","text":""},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_13","title":"\u6210\u529f\u7684\u534f\u8bae\u4ea4\u4e92","text":"<pre><code>\ud83d\udd11 \u83b7\u53d6\u5230 Session ID: 1e684364-7af7-4c92-bee6-30a44d070c2c\n\ud83d\udce1 \u5b8c\u6574 SSE \u54cd\u5e94: http://127.0.0.1:0/mcp/message?sessionId=1e684364-7af7-4c92-bee6-30a44d070c2c\n\u2705 \u53d1\u73b0\u6d88\u606f\u7aef\u70b9: /mcp/message\n</code></pre>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_14","title":"\u5de5\u5177\u8c03\u7528\u6d41\u7a0b","text":"<pre><code>\ud83e\uddea \u6d4b\u8bd5 getAllPersons \u65b9\u6cd5\u8c03\u7528\n\ud83d\udce4 \u53d1\u9001\u8bf7\u6c42\u6210\u529f: [\u54cd\u5e94\u5185\u5bb9]\n\u2705 getAllPersons \u8c03\u7528\u6210\u529f: [\u5de5\u5177\u6267\u884c\u7ed3\u679c]\n</code></pre>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_15","title":"\ud83d\udcda \u7ecf\u9a8c\u603b\u7ed3","text":"<ol> <li>\u534f\u8bae\u7406\u89e3\u7684\u91cd\u8981\u6027\uff1a\u6df1\u5165\u7406\u89e3 MCP \u534f\u8bae\u7684 SSE \u4f20\u8f93\u673a\u5236</li> <li>\u6d4b\u8bd5\u9694\u79bb\u539f\u5219\uff1a\u4ec5\u4fee\u6539\u6d4b\u8bd5\u4ee3\u7801\uff0c\u4e0d\u5f71\u54cd\u4e3b\u5e94\u7528\u903b\u8f91  </li> <li>\u6e10\u8fdb\u5f0f\u8c03\u8bd5\uff1a\u901a\u8fc7\u5355\u6b65\u6d4b\u8bd5\u9010\u6b65\u5b9a\u4f4d\u548c\u89e3\u51b3\u95ee\u9898</li> <li>\u65e5\u5fd7\u5206\u6790\u4ef7\u503c\uff1a\u901a\u8fc7\u8be6\u7ec6\u65e5\u5fd7\u8f93\u51fa\u7406\u89e3\u534f\u8bae\u4ea4\u4e92\u8fc7\u7a0b</li> </ol>"},{"location":"MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY/#_16","title":"\ud83c\udf89 \u7ed3\u8bba","text":"<p>\u6210\u529f\u4fee\u590d\u4e86 <code>McpStandardProtocolTest.java</code> \u4e2d\u7684\u6240\u6709\u6d4b\u8bd5\u7528\u4f8b\uff0c\u9a8c\u8bc1\u4e86 <code>getAllPersons</code> \u548c <code>getPersonById</code> \u65b9\u6cd5\u7684 MCP \u6807\u51c6\u534f\u8bae\u8c03\u7528\u3002\u6d4b\u8bd5\u73b0\u5728\u80fd\u591f\u6b63\u786e\uff1a</p> <ol> <li>\u2705 \u5efa\u7acb SSE \u8fde\u63a5\u5e76\u83b7\u53d6\u4f1a\u8bdd ID</li> <li>\u2705 \u53d1\u9001\u6807\u51c6 MCP JSON-RPC \u6d88\u606f</li> <li>\u2705 \u9a8c\u8bc1\u5de5\u5177\u8c03\u7528\u7684\u54cd\u5e94\u548c\u9519\u8bef\u5904\u7406</li> <li>\u2705 \u786e\u4fdd\u534f\u8bae\u517c\u5bb9\u6027\u548c\u7a33\u5b9a\u6027 </li> </ol>"},{"location":"NEXT_STEPS/","title":"\u4e0b\u4e00\u6b65\uff1a\u5b9e\u9645\u64cd\u4f5c\u6307\u5357","text":""},{"location":"NEXT_STEPS/#_2","title":"\ud83d\udccd \u5f53\u524d\u72b6\u6001","text":"<p>\u60a8\u5df2\u7ecf\u9605\u8bfb\u4e86\u6574\u5408\u65b9\u6848\u6587\u6863\uff0c\u73b0\u5728\u8ba9\u6211\u4eec\u8fdb\u884c\u5b9e\u9645\u64cd\u4f5c\u3002</p>"},{"location":"NEXT_STEPS/#_3","title":"\ud83c\udfaf \u5efa\u8bae\u7684\u6267\u884c\u8def\u5f84","text":""},{"location":"NEXT_STEPS/#a","title":"\u9009\u9879 A: \u5feb\u901f\u9a8c\u8bc1\uff08\u63a8\u8350\u65b0\u624b\uff09\u2b50","text":"<p>\u9002\u5408: \u7b2c\u4e00\u6b21\u63a5\u89e6 Gemini API\uff0c\u60f3\u5feb\u901f\u770b\u5230\u6548\u679c</p> <p>\u6b65\u9aa4: <pre><code># 1. \u4f7f\u7528 Spring AI Alibaba \u73b0\u6709\u7684\u793a\u4f8b\ncd spring-ai-alibaba/spring-ai-alibaba-deepresearch\nmvn spring-boot:run\n\n# 2. \u6216\u8005\u8fd0\u884c Playground\ncd spring-ai-alibaba-examples/spring-ai-alibaba-playground\n# (\u9700\u8981\u5148\u514b\u9686 examples \u4ed3\u5e93)\n</code></pre></p> <p>\u4e3a\u4ec0\u4e48: \u5148\u4e86\u89e3 Spring AI Alibaba \u7684\u80fd\u529b\uff0c\u7136\u540e\u518d\u6dfb\u52a0 Gemini</p>"},{"location":"NEXT_STEPS/#b-mcp-client-gemini","title":"\u9009\u9879 B: \u5229\u7528\u73b0\u6709 mcp-client \u6dfb\u52a0 Gemini \u652f\u6301\uff08\u63a8\u8350\uff09\u2b50\u2b50\u2b50","text":"<p>\u9002\u5408: \u60a8\u719f\u6089\u9879\u76ee\u7ed3\u6784\uff0c\u60f3\u5728\u73b0\u6709\u57fa\u7840\u4e0a\u6dfb\u52a0 Gemini</p>"},{"location":"NEXT_STEPS/#1","title":"\u6b65\u9aa4 1: \u6ce8\u610f\u4e8b\u9879","text":"<p>\u91cd\u8981: \u60a8\u7684\u9879\u76ee\u5f53\u524d\u4f7f\u7528\uff1a - Spring Boot: 3.2.5 - Spring AI Alibaba: 1.0.0.3.250728 - Spring AI: 1.0.0</p> <p>\u95ee\u9898: Spring AI \u5b98\u65b9\u7684 Vertex AI Gemini Starter \u53ef\u80fd\u8fd8\u5728 M4 \u7248\u672c\uff0c\u5b58\u5728\u7248\u672c\u517c\u5bb9\u6027\u95ee\u9898\u3002</p>"},{"location":"NEXT_STEPS/#_4","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u65b9\u6848 1: \u4f7f\u7528 OpenAI \u517c\u5bb9\u63a5\u53e3\uff08\u66f4\u7b80\u5355\uff09</p> <p>Google Gemini \u53ef\u80fd\u63d0\u4f9b OpenAI \u517c\u5bb9\u7684 API \u7aef\u70b9\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4f60\u53ef\u4ee5\u590d\u7528\u73b0\u6709\u7684 OpenAI ChatModel\uff1a</p> <pre><code>&lt;!-- mcp-client/pom.xml \u4e2d\u5df2\u6709 Spring AI Core\uff0c\u65e0\u9700\u989d\u5916\u6dfb\u52a0 --&gt;\n</code></pre> <pre><code># application.yml\nspring:\n  ai:\n    openai:\n      # DeepSeek (\u73b0\u6709)\n      deepseek:\n        api-key: ${DEEPSEEK_API_KEY}\n        base-url: https://api.deepseek.com\n        chat:\n          model: deepseek-chat\n\n      # Gemini (\u65b0\u589e - \u4f7f\u7528 OpenAI \u517c\u5bb9 API)\n      gemini:\n        api-key: ${GEMINI_API_KEY}\n        base-url: https://generativelanguage.googleapis.com/v1beta/openai\n        chat:\n          model: gemini-3-flash\n</code></pre> <p>\u65b9\u6848 2: \u81ea\u5b9a\u4e49 ChatModel\uff08\u66f4\u7075\u6d3b\uff09</p> <p>\u5982\u679c Gemini \u4e0d\u63d0\u4f9b OpenAI \u517c\u5bb9\u63a5\u53e3\uff0c\u4f60\u53ef\u4ee5\u5b9e\u73b0\u81ea\u5df1\u7684 <code>ChatModel</code>\uff1a</p> <pre><code>// \u5728 mcp-client \u4e2d\u521b\u5efa\npackage com.example.mcp.client.gemini;\n\nimport org.springframework.ai.chat.model.ChatModel;\nimport org.springframework.ai.chat.model.ChatResponse;\nimport org.springframework.ai.chat.prompt.Prompt;\n\npublic class GeminiChatModel implements ChatModel {\n\n    private final String apiKey;\n    private final String baseUrl;\n\n    // \u5b9e\u73b0 call() \u548c stream() \u65b9\u6cd5\n    // \u8c03\u7528 Gemini REST API\n}\n</code></pre>"},{"location":"NEXT_STEPS/#2","title":"\u6b65\u9aa4 2: \u5b9e\u9645\u64cd\u4f5c","text":"<p>2.1 \u67e5\u770b Spring AI \u7248\u672c\u517c\u5bb9\u6027</p> <pre><code>cd /Users/shine/projects.mcp-router-sse-parent\n\n# \u68c0\u67e5 Spring AI \u53ef\u7528\u7684 ChatModel \u5b9e\u73b0\nmvn dependency:tree | grep spring-ai\n</code></pre> <p>2.2 \u9009\u62e9\u6700\u5408\u9002\u7684\u65b9\u5f0f</p> <p>\u57fa\u4e8e\u60a8\u7684\u9879\u76ee\uff0c\u6211\u5efa\u8bae\uff1a</p> <ol> <li>\u5148\u5c1d\u8bd5\u65b9\u6848 1\uff08OpenAI \u517c\u5bb9\uff09</li> <li>\u6700\u7b80\u5355</li> <li>\u65e0\u9700\u989d\u5916\u4f9d\u8d56</li> <li> <p>\u5982\u679c Gemini \u652f\u6301\uff0c\u7acb\u5373\u53ef\u7528</p> </li> <li> <p>\u5982\u679c\u65b9\u6848 1 \u4e0d\u53ef\u884c\uff0c\u4f7f\u7528\u65b9\u6848 2\uff08\u81ea\u5b9a\u4e49\uff09</p> </li> <li>\u9700\u8981\u5199\u5c11\u91cf\u9002\u914d\u4ee3\u7801</li> <li>\u4f46\u5b8c\u5168\u53ef\u63a7</li> </ol>"},{"location":"NEXT_STEPS/#c-gemini","title":"\u9009\u9879 C: \u521b\u5efa\u72ec\u7acb\u7684 Gemini \u793a\u4f8b\u6a21\u5757\uff08\u5b66\u4e60\u76ee\u7684\uff09","text":"<p>\u9002\u5408: \u60f3\u6df1\u5ea6\u7406\u89e3\u6574\u5408\u8fc7\u7a0b\uff0c\u613f\u610f\u4ece\u96f6\u6784\u5efa</p> <p>\u6211\u53ef\u4ee5\u4e3a\u60a8\u521b\u5efa\u4e00\u4e2a\u5b8c\u6574\u7684\u793a\u4f8b\u6a21\u5757\uff1a<code>mcp-client-gemini-example</code></p>"},{"location":"NEXT_STEPS/#_5","title":"\u6211\u4e3a\u60a8\u51c6\u5907\u7684\u793a\u4f8b\u9879\u76ee\u7ed3\u6784","text":"<pre><code>mcp-client-gemini-example/\n\u251c\u2500\u2500 pom.xml\n\u251c\u2500\u2500 src/main/java/\n\u2502   \u2514\u2500\u2500 com/example/gemini/\n\u2502       \u251c\u2500\u2500 GeminiExampleApplication.java\n\u2502       \u251c\u2500\u2500 config/\n\u2502       \u2502   \u251c\u2500\u2500 GeminiConfig.java          # Gemini \u914d\u7f6e\n\u2502       \u2502   \u2514\u2500\u2500 MultiModelConfig.java      # \u591a\u6a21\u578b\u914d\u7f6e\n\u2502       \u251c\u2500\u2500 controller/\n\u2502       \u2502   \u2514\u2500\u2500 GeminiController.java      # REST API\n\u2502       \u251c\u2500\u2500 service/\n\u2502       \u2502   \u251c\u2500\u2500 GeminiChatService.java     # \u57fa\u7840\u5bf9\u8bdd\n\u2502       \u2502   \u2514\u2500\u2500 GeminiAgentService.java    # Agent \u5de5\u4f5c\u6d41\n\u2502       \u2514\u2500\u2500 model/\n\u2502           \u251c\u2500\u2500 GeminiChatRequest.java\n\u2502           \u2514\u2500\u2500 GeminiChatResponse.java\n\u2514\u2500\u2500 src/main/resources/\n    \u251c\u2500\u2500 application.yml\n    \u2514\u2500\u2500 application-dev.yml\n</code></pre>"},{"location":"NEXT_STEPS/#_6","title":"\ud83d\udca1 \u6211\u7684\u5efa\u8bae\uff08\u57fa\u4e8e\u60a8\u7684\u9879\u76ee\uff09","text":""},{"location":"NEXT_STEPS/#b-mcp-client","title":"\u63a8\u8350\u8def\u5f84\uff1a\u9009\u9879 B\uff08\u5728\u73b0\u6709 mcp-client \u4e0a\u6269\u5c55\uff09","text":"<p>\u7406\u7531: 1. \u2705 \u60a8\u5df2\u7ecf\u6709\u5b8c\u6574\u7684 Spring AI Alibaba \u6846\u67b6 2. \u2705 \u60a8\u6709\u73b0\u6210\u7684 MCP Client \u6a21\u5757 3. \u2705 \u60a8\u719f\u6089 DeepSeek \u7684\u96c6\u6210\u65b9\u5f0f 4. \u2705 Gemini \u5c31\u662f\u518d\u6dfb\u52a0\u4e00\u4e2a ChatModel \u800c\u5df2</p>"},{"location":"NEXT_STEPS/#_7","title":"\u5177\u4f53\u64cd\u4f5c\u6b65\u9aa4","text":""},{"location":"NEXT_STEPS/#1-gemini-api","title":"\u7b2c 1 \u6b65\uff1a\u786e\u8ba4 Gemini API \u8bbf\u95ee\u6743\u9650","text":"<pre><code># \u6d4b\u8bd5 Gemini API \u662f\u5426\u53ef\u7528\ncurl -X POST \\\n  'https://generativelanguage.googleapis.com/v1beta/models/gemini-3-flash:generateContent?key=YOUR_API_KEY' \\\n  -H 'Content-Type: application/json' \\\n  -d '{\n    \"contents\": [{\n      \"parts\":[{\"text\": \"Hello, Gemini!\"}]\n    }]\n  }'\n</code></pre>"},{"location":"NEXT_STEPS/#2-mcp-client-gemini","title":"\u7b2c 2 \u6b65\uff1a\u5728 mcp-client \u4e2d\u6dfb\u52a0 Gemini \u914d\u7f6e","text":"<p>2.1 \u4fee\u6539 <code>application.yml</code></p> <pre><code>gemini:\n  api-key: ${GEMINI_API_KEY}\n  model: gemini-3-flash\n  base-url: https://generativelanguage.googleapis.com/v1beta\n</code></pre> <p>2.2 \u521b\u5efa <code>GeminiConfig.java</code></p> <pre><code>@Configuration\npublic class GeminiConfig {\n\n    @Value(\"${gemini.api-key}\")\n    private String apiKey;\n\n    @Value(\"${gemini.base-url}\")\n    private String baseUrl;\n\n    @Value(\"${gemini.model}\")\n    private String model;\n\n    @Bean(\"geminiChatClient\")\n    public ChatClient geminiChatClient() {\n        // \u4f7f\u7528 HTTP \u5ba2\u6237\u7aef\u8c03\u7528 Gemini API\n        // TODO: \u5b9e\u73b0 Gemini API \u8c03\u7528\u903b\u8f91\n    }\n}\n</code></pre>"},{"location":"NEXT_STEPS/#3-reactagent","title":"\u7b2c 3 \u6b65\uff1a\u5728 ReactAgent \u4e2d\u4f7f\u7528","text":"<pre><code>@Service\npublic class GeminiAgentService {\n\n    @Autowired\n    @Qualifier(\"geminiChatClient\")\n    private ChatClient geminiClient;\n\n    @Autowired\n    private List&lt;ToolCallback&gt; tools;\n\n    public String process(String input) {\n        var agent = ReactAgent.builder()\n                .name(\"gemini-agent\")\n                .chatClient(geminiClient)\n                .tools(tools)\n                .build();\n\n        var result = agent.getAndCompileGraph()\n                .invoke(Map.of(\"input\", input));\n        return result.get(\"output\").toString();\n    }\n}\n</code></pre>"},{"location":"NEXT_STEPS/#_8","title":"\ud83d\ude80 \u7acb\u5373\u5f00\u59cb","text":""},{"location":"NEXT_STEPS/#a_1","title":"\u5982\u679c\u60a8\u9009\u62e9\u9009\u9879 A\uff08\u5feb\u901f\u9a8c\u8bc1\uff09","text":"<pre><code># \u8fd0\u884c\u73b0\u6709\u7684 DeepResearch \u793a\u4f8b\ncd spring-ai-alibaba/spring-ai-alibaba-deepresearch\nmvn spring-boot:run\n</code></pre>"},{"location":"NEXT_STEPS/#b-mcp-client_1","title":"\u5982\u679c\u60a8\u9009\u62e9\u9009\u9879 B\uff08\u6269\u5c55 mcp-client\uff09\u2b50","text":"<p>\u544a\u8bc9\u6211\u60a8\u7684\u9009\u62e9\uff0c\u6211\u5c06\u4e3a\u60a8\uff1a 1. \u2705 \u521b\u5efa <code>GeminiConfig.java</code> \u7684\u5b8c\u6574\u5b9e\u73b0 2. \u2705 \u521b\u5efa <code>GeminiChatClient</code> \u9002\u914d\u5668 3. \u2705 \u521b\u5efa\u6d4b\u8bd5Controller 4. \u2705 \u63d0\u4f9b\u5b8c\u6574\u7684\u914d\u7f6e\u6587\u4ef6</p> <p>\u53ea\u9700\u56de\u590d: \"\u9009\u62e9 B\uff0c\u5e2e\u6211\u521b\u5efa Gemini \u96c6\u6210\u4ee3\u7801\"</p>"},{"location":"NEXT_STEPS/#c","title":"\u5982\u679c\u60a8\u9009\u62e9\u9009\u9879 C\uff08\u72ec\u7acb\u793a\u4f8b\u6a21\u5757\uff09","text":"<p>\u544a\u8bc9\u6211\uff0c\u6211\u5c06\uff1a 1. \u2705 \u521b\u5efa\u5b8c\u6574\u7684 <code>mcp-client-gemini-example</code> \u6a21\u5757 2. \u2705 \u5305\u542b\u6240\u6709\u5fc5\u8981\u7684\u914d\u7f6e\u548c\u4ee3\u7801 3. \u2705 \u63d0\u4f9b\u8fd0\u884c\u8bf4\u660e\u548c\u6d4b\u8bd5\u811a\u672c</p> <p>\u53ea\u9700\u56de\u590d: \"\u9009\u62e9 C\uff0c\u521b\u5efa\u72ec\u7acb\u793a\u4f8b\u6a21\u5757\"</p>"},{"location":"NEXT_STEPS/#_9","title":"\ud83d\udccb \u51c6\u5907\u5de5\u4f5c\u6e05\u5355","text":"<p>\u65e0\u8bba\u9009\u62e9\u54ea\u4e2a\u9009\u9879\uff0c\u8bf7\u5148\u5b8c\u6210\uff1a</p> <ul> <li> \u7533\u8bf7 Google Cloud \u8d26\u53f7</li> <li> \u542f\u7528 Gemini API</li> <li> \u83b7\u53d6 API Key</li> <li> \u6d4b\u8bd5 API \u8fde\u901a\u6027\uff08\u4f7f\u7528\u4e0a\u9762\u7684 curl \u547d\u4ee4\uff09</li> <li> \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf <code>GEMINI_API_KEY</code></li> </ul>"},{"location":"NEXT_STEPS/#_10","title":"\ud83e\udd14 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"NEXT_STEPS/#q-vertex-ai-generative-language-api","title":"Q: \u6211\u5e94\u8be5\u4f7f\u7528 Vertex AI \u8fd8\u662f Generative Language API\uff1f","text":"<p>A:  - Generative Language API: \u66f4\u7b80\u5355\uff0c\u4f7f\u7528 API Key\uff0c\u9002\u5408\u5feb\u901f\u5f00\u59cb - Vertex AI: \u4f01\u4e1a\u7ea7\uff0c\u4f7f\u7528\u670d\u52a1\u8d26\u53f7\uff0c\u66f4\u591a\u529f\u80fd</p> <p>\u5efa\u8bae: \u5148\u7528 Generative Language API \u5feb\u901f\u9a8c\u8bc1\uff0c\u751f\u4ea7\u73af\u5883\u518d\u8003\u8651 Vertex AI</p>"},{"location":"NEXT_STEPS/#q-spring-ai","title":"Q: Spring AI \u7248\u672c\u517c\u5bb9\u95ee\u9898\u600e\u4e48\u529e\uff1f","text":"<p>A:  \u60a8\u7684\u9879\u76ee\u4f7f\u7528 Spring AI 1.0.0\uff0c\u4f46\u5b98\u65b9\u7684 Vertex AI Starter \u53ef\u80fd\u9700\u8981\u66f4\u65b0\u7248\u672c\u3002</p> <p>\u89e3\u51b3\u65b9\u6848: 1. \u6682\u65f6\u4f7f\u7528\u81ea\u5b9a\u4e49 ChatModel\uff08\u65b9\u6848 2\uff09 2. \u6216\u8005\u5347\u7ea7 Spring AI \u7248\u672c\uff08\u4f46\u53ef\u80fd\u5f71\u54cd\u5176\u4ed6\u90e8\u5206\uff09</p> <p>\u6211\u5efa\u8bae: \u5148\u7528\u81ea\u5b9a\u4e49\u65b9\u5f0f\uff0c\u7b49 Spring AI \u7a33\u5b9a\u540e\u518d\u8fc1\u79fb</p>"},{"location":"NEXT_STEPS/#q-gemini-deepseek","title":"Q: \u53ef\u4ee5\u540c\u65f6\u4f7f\u7528 Gemini \u548c DeepSeek \u5417\uff1f","text":"<p>A:  \u5b8c\u5168\u53ef\u4ee5\uff01\u8fd9\u5c31\u662f Spring AI \u62bd\u8c61\u5c42\u7684\u4f18\u52bf\uff1a</p> <pre><code>@Autowired\n@Qualifier(\"geminiChatClient\")\nprivate ChatClient geminiClient;\n\n@Autowired\n@Qualifier(\"deepseekChatClient\")\nprivate ChatClient deepseekClient;\n\n// \u6839\u636e\u4efb\u52a1\u9009\u62e9\u6a21\u578b\nif (isComplexTask) {\n    return geminiClient.prompt().user(input).call().content();\n} else {\n    return deepseekClient.prompt().user(input).call().content();\n}\n</code></pre>"},{"location":"NEXT_STEPS/#_11","title":"\ud83d\udcde \u8bf7\u544a\u8bc9\u6211\u60a8\u7684\u9009\u62e9","text":"<p>\u56de\u590d\u4ee5\u4e0b\u4e4b\u4e00\uff1a</p> <ol> <li>\"\u9009\u62e9 A\" - \u6211\u5148\u8fd0\u884c\u73b0\u6709\u793a\u4f8b\uff0c\u719f\u6089\u6846\u67b6</li> <li>\"\u9009\u62e9 B\" - \u5728 mcp-client \u4e2d\u6dfb\u52a0 Gemini\uff08\u63a8\u8350\uff09</li> <li>\"\u9009\u62e9 C\" - \u521b\u5efa\u72ec\u7acb\u7684\u793a\u4f8b\u6a21\u5757</li> <li>\"\u6211\u9700\u8981\u66f4\u591a\u4fe1\u606f\" - \u8bf4\u660e\u60a8\u7684\u5177\u4f53\u7591\u95ee</li> </ol> <p>\u6211\u5c06\u7acb\u5373\u4e3a\u60a8\u63d0\u4f9b\u4e0b\u4e00\u6b65\u7684\u5177\u4f53\u4ee3\u7801\u548c\u64cd\u4f5c\u6307\u5357\uff01\ud83d\ude80</p>"},{"location":"_meta/QUICK_REFERENCE/","title":"\ud83d\udcda \u6587\u6863\u7ba1\u7406\u5feb\u901f\u53c2\u8003","text":"<p>\u57fa\u4e8e Di\u00e1taxis \u6846\u67b6\u7684\u6587\u6863\u7ba1\u7406\u901f\u67e5\u8868</p>"},{"location":"_meta/QUICK_REFERENCE/#_2","title":"\ud83c\udfaf \u6211\u8981...","text":""},{"location":"_meta/QUICK_REFERENCE/#_3","title":"\u521b\u5efa\u65b0\u6587\u6863","text":"<pre><code># 1. \u786e\u5b9a\u6587\u6863\u7c7b\u578b\n\u6211\u8981\u5e2e\u52a9\u7528\u6237\u3010\u5b66\u4e60\u3011    \u2192 Tutorial     (\u6559\u7a0b)\n\u6211\u8981\u5e2e\u52a9\u7528\u6237\u3010\u5b8c\u6210\u4efb\u52a1\u3011 \u2192 How-To Guide (\u64cd\u4f5c\u6307\u5357)\n\u6211\u8981\u5e2e\u52a9\u7528\u6237\u3010\u7406\u89e3\u3011    \u2192 Explanation (\u8bf4\u660e)\n\u6211\u8981\u5e2e\u52a9\u7528\u6237\u3010\u67e5\u8be2\u4fe1\u606f\u3011 \u2192 Reference    (\u53c2\u8003)\n\n# 2. \u4f7f\u7528\u6a21\u677f\ncp docs/_meta/templates/[\u7c7b\u578b].md docs/[\u76ee\u5f55]/my-doc.md\n\n# 3. \u586b\u5199frontmatter\n---\nstatus: draft\ncreated: 2026-01-28\nlast_updated: 2026-01-28\nreview_date: 2026-04-28\nowner: your-name\ntags: [tag1, tag2]\n---\n\n# 4. \u7f16\u5199\u5185\u5bb9\n# 5. \u63d0\u4ea4PR\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_4","title":"\u67e5\u627e\u6587\u6863","text":"<pre><code>docs/\n\u251c\u2500\u2500 01-tutorials/        # \u6211\u8981\u5b66\u4e60\n\u251c\u2500\u2500 02-how-to-guides/    # \u6211\u8981\u5b8c\u6210\u4efb\u52a1\n\u251c\u2500\u2500 03-explanations/     # \u6211\u8981\u7406\u89e3\u539f\u7406\n\u251c\u2500\u2500 04-reference/        # \u6211\u8981\u67e5\u8be2API\n\u251c\u2500\u2500 05-workflows/        # \u6211\u8981\u4e86\u89e3\u6d41\u7a0b\n\u2514\u2500\u2500 README.md            # \ud83d\udccd \u4ece\u8fd9\u91cc\u5f00\u59cb\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_5","title":"\u66f4\u65b0\u73b0\u6709\u6587\u6863","text":"<pre><code># 1. \u4fee\u6539\u6587\u6863\n# 2. \u66f4\u65b0 last_updated\nlast_updated: $(date +%Y-%m-%d)\n\n# 3. \u5982\u679c\u91cd\u5927\u53d8\u66f4\uff0c\u66f4\u65b0 review_date\nreview_date: $(date -v+3m +%Y-%m-%d)  # Mac\nreview_date: $(date -d \"+3 months\" +%Y-%m-%d)  # Linux\n\n# 4. \u63d0\u4ea4PR\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_6","title":"\u5f52\u6863\u8fc7\u65f6\u6587\u6863","text":"<pre><code># 1. \u6807\u8bb0\u4e3adeprecated\nstatus: deprecated\n\n# 2. \u6dfb\u52a0\u5f03\u7528\u8bf4\u660e\n&gt; \u26a0\ufe0f **\u5df2\u5f03\u7528**: \u6b64\u6587\u6863\u5df2\u8fc7\u65f6\uff0c\u8bf7\u53c2\u8003 [\u65b0\u6587\u6863](link)\n\n# 3. \u7a0d\u540e\u79fb\u81f3\u5f52\u6863\nmv docs/XX/old-doc.md docs/06-archived/\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#diataxis","title":"\ud83d\udccb Di\u00e1taxis \u5feb\u901f\u51b3\u7b56","text":""},{"location":"_meta/QUICK_REFERENCE/#_7","title":"\u95ee\u81ea\u5df1\u8fd9\u4e9b\u95ee\u9898","text":"<pre><code>\u8bfb\u8005\u60f3\u8981\u4ec0\u4e48\uff1f\n\u251c\u2500 \u5b66\u4e60\u57fa\u7840\u77e5\u8bc6\n\u2502  \u2514\u2500 Tutorial\n\u251c\u2500 \u5b8c\u6210\u5177\u4f53\u4efb\u52a1\n\u2502  \u2514\u2500 How-To Guide\n\u251c\u2500 \u7406\u89e3\u4e3a\u4ec0\u4e48/\u5982\u4f55\u5de5\u4f5c\n\u2502  \u2514\u2500 Explanation\n\u2514\u2500 \u67e5\u627e\u7279\u5b9a\u4fe1\u606f\n   \u2514\u2500 Reference\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_8","title":"\u793a\u4f8b","text":"\u6807\u9898 \u7c7b\u578b \u7406\u7531 \"\u6784\u5efa\u4f60\u7684\u7b2c\u4e00\u4e2aMCP Server\" Tutorial \u6559\u5b66\u4e60\u8005\u4e00\u6b65\u6b65\u5b8c\u6210 \"\u5982\u4f55\u6dfb\u52a0Gemini\u96c6\u6210\" How-To \u5b8c\u6210\u7279\u5b9a\u4efb\u52a1 \"\u4e3a\u4ec0\u4e48\u9009\u62e9Spring AI\" Explanation \u7406\u89e3\u51b3\u7b56\u539f\u56e0 \"API\u53c2\u8003\" Reference \u67e5\u8be2\u5177\u4f53\u4fe1\u606f"},{"location":"_meta/QUICK_REFERENCE/#_9","title":"\u2705 \u6587\u6863\u8d28\u91cf\u68c0\u67e5\u6e05\u5355","text":""},{"location":"_meta/QUICK_REFERENCE/#_10","title":"\u57fa\u672c\u8981\u6c42","text":"<ul> <li> \u6709\u6e05\u6670\u7684\u6807\u9898</li> <li> \u6709frontmatter\u5143\u6570\u636e</li> <li> \u72b6\u6001\u6b63\u786e (draft/active/deprecated)</li> <li> \u65e5\u671f\u51c6\u786e</li> <li> \u6709\u5408\u9002\u7684\u6807\u7b7e</li> </ul>"},{"location":"_meta/QUICK_REFERENCE/#tutorial","title":"Tutorial\u7279\u5b9a","text":"<ul> <li> \u6709\u660e\u786e\u7684\u5b66\u4e60\u76ee\u6807</li> <li> \u6b65\u9aa4\u6e05\u6670\uff0c\u53ef\u6267\u884c</li> <li> \u6709\u9a8c\u8bc1\u65b9\u6cd5</li> <li> \u6709\"\u4e0b\u4e00\u6b65\"\u6307\u5f15</li> </ul>"},{"location":"_meta/QUICK_REFERENCE/#how-to","title":"How-To\u7279\u5b9a","text":"<ul> <li> \u89e3\u51b3\u5177\u4f53\u95ee\u9898</li> <li> \u6709\u524d\u7f6e\u6761\u4ef6</li> <li> \u6b65\u9aa4\u7b80\u6d01\u660e\u4e86</li> <li> \u6709\u6545\u969c\u6392\u9664</li> </ul>"},{"location":"_meta/QUICK_REFERENCE/#explanation","title":"Explanation\u7279\u5b9a","text":"<ul> <li> \u89e3\u91ca\"\u4e3a\u4ec0\u4e48\"</li> <li> \u6709\u80cc\u666f\u4fe1\u606f</li> <li> \u6709\u56fe\u8868/\u793a\u4f8b</li> <li> \u94fe\u63a5\u5230\u76f8\u5173\u8d44\u6e90</li> </ul>"},{"location":"_meta/QUICK_REFERENCE/#reference","title":"Reference\u7279\u5b9a","text":"<ul> <li> \u4fe1\u606f\u51c6\u786e\u5b8c\u6574</li> <li> \u7ec4\u7ec7\u6e05\u6670</li> <li> \u6613\u4e8e\u626b\u63cf\u67e5\u627e</li> <li> \u6709\u4ee3\u7801\u793a\u4f8b</li> </ul>"},{"location":"_meta/QUICK_REFERENCE/#_11","title":"\ud83d\udd04 \u6587\u6863\u751f\u547d\u5468\u671f","text":"<pre><code>Draft \u2192 Review \u2192 Active \u2192 (Update) \u2192 Deprecated \u2192 Archived\n  \u2193       \u2193        \u2193          \u2193          \u2193           \u2193\n\u8349\u7a3f    \u5ba1\u67e5      \u53d1\u5e03       \u7ef4\u62a4       \u5f03\u7528        \u5f52\u6863\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_12","title":"\u72b6\u6001\u8f6c\u6362","text":"<pre><code># Draft \u2192 Review\nstatus: review\n\n# Review \u2192 Active (\u5ba1\u67e5\u901a\u8fc7)\nstatus: active\n\n# Active \u2192 Deprecated (\u6709\u65b0\u7248\u672c)\nstatus: deprecated\n\u5728\u9876\u90e8\u6dfb\u52a0: &gt; \u26a0\ufe0f **\u5df2\u5f03\u7528**: \u8bf7\u4f7f\u7528 [\u65b0\u6587\u6863](link)\n\n# Deprecated \u2192 Archived after 6\u4e2a\u6708\nmv docs/XX/doc.md docs/06-archived/\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_13","title":"\ud83d\udee0\ufe0f \u5e38\u7528\u547d\u4ee4","text":""},{"location":"_meta/QUICK_REFERENCE/#_14","title":"\u68c0\u67e5\u6587\u6863\u5065\u5eb7\u5ea6","text":"<pre><code># \u67e5\u627e\u9700\u8981\u5ba1\u67e5\u7684\u6587\u6863\nfind docs -name '*.md' -exec grep -l \"review_date: $(date +%Y-%m)\" {} \\;\n\n# \u67e5\u627e\u635f\u574f\u7684\u94fe\u63a5\nmarkdown-link-check docs/**/*.md\n\n# \u62fc\u5199\u68c0\u67e5\nmarkdown-spellcheck docs/**/*.md\n\n# Lint\u68c0\u67e5\nmarkdownlint docs/**/*.md\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_15","title":"\u6279\u91cf\u66f4\u65b0","text":"<pre><code># \u66f4\u65b0\u6240\u6709\u6587\u6863\u7684last_updated\nfind docs -name '*.md' -exec sed -i '' \"s/last_updated:.*/last_updated: $(date +%Y-%m-%d)/\" {} \\;\n\n# \u67e5\u627e\u6ca1\u6709frontmatter\u7684\u6587\u6863\nfind docs -name '*.md' ! -exec grep -q \"^---$\" {} \\; -print\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_16","title":"\ud83d\udcca \u7ef4\u62a4\u65f6\u95f4\u8868","text":"\u9891\u7387 \u4efb\u52a1 \u8d1f\u8d23\u4eba \u6bcf\u5468 \u5ba1\u67e5\u65b0PR\u4e2d\u7684\u6587\u6863 PR\u5ba1\u67e5\u8005 \u6bcf\u6708 \u68c0\u67e5\u635f\u574f\u7684\u94fe\u63a5 \u81ea\u52a8\u5316 \u6bcf\u5b63\u5ea6 \u5ba1\u67e5\u9700\u8981\u66f4\u65b0\u7684\u6587\u6863 \u6587\u6863\u8d1f\u8d23\u4eba \u6bcf\u534a\u5e74 \u5f52\u6863\u8fc7\u65f6\u6587\u6863 \u56e2\u961f \u6bcf\u5e74 \u5168\u9762\u5ba1\u67e5\u6587\u6863\u7ed3\u6784 \u67b6\u6784\u5e08"},{"location":"_meta/QUICK_REFERENCE/#_17","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"_meta/QUICK_REFERENCE/#do","title":"DO \u2705","text":"<ul> <li>\u2705 \u4f7f\u7528\u6a21\u677f\u521b\u5efa\u65b0\u6587\u6863</li> <li>\u2705 \u4fdd\u6301frontmatter\u66f4\u65b0</li> <li>\u2705 \u94fe\u63a5\u5230\u6743\u5a01\u4fe1\u606f\u6e90</li> <li>\u2705 \u6dfb\u52a0\u5b9e\u9645\u53ef\u8fd0\u884c\u7684\u793a\u4f8b</li> <li>\u2705 \u4f7f\u7528\u6e05\u6670\u7684\u7ae0\u8282\u6807\u9898</li> <li>\u2705 \u5b9a\u671f\u5ba1\u67e5\u548c\u66f4\u65b0</li> </ul>"},{"location":"_meta/QUICK_REFERENCE/#dont","title":"DON'T \u274c","text":"<ul> <li>\u274c \u590d\u5236\u7c98\u8d34\u4fe1\u606f\uff08\u4f7f\u7528\u94fe\u63a5\uff09</li> <li>\u274c \u4f7f\u7528\u6a21\u7cca\u7684\u6807\u9898</li> <li>\u274c \u7701\u7565\u524d\u7f6e\u6761\u4ef6</li> <li>\u274c \u6df7\u5408\u591a\u79cd\u6587\u6863\u7c7b\u578b</li> <li>\u274c \u5fd8\u8bb0\u66f4\u65b0\u94fe\u63a5</li> <li>\u274c \u8ba9\u6587\u6863\u957f\u671f\u5904\u4e8edraft\u72b6\u6001</li> </ul>"},{"location":"_meta/QUICK_REFERENCE/#_18","title":"\ud83c\udd98 \u9047\u5230\u95ee\u9898\uff1f","text":""},{"location":"_meta/QUICK_REFERENCE/#_19","title":"\u4e0d\u786e\u5b9a\u6587\u6863\u7c7b\u578b\uff1f","text":"<p>\u67e5\u770b DOCUMENTATION_MANAGEMENT.md</p>"},{"location":"_meta/QUICK_REFERENCE/#_20","title":"\u4e0d\u77e5\u9053\u653e\u5728\u54ea\u91cc\uff1f","text":"<p>\u67e5\u770b \u65b0\u76ee\u5f55\u7ed3\u6784</p>"},{"location":"_meta/QUICK_REFERENCE/#_21","title":"\u94fe\u63a5\u600e\u4e48\u5199\uff1f","text":"<pre><code># \u76f8\u5bf9\u8def\u5f84\uff08\u63a8\u8350\uff09\n[\u6587\u672c](../02-how-to-guides/guide.md)\n\n# \u7edd\u5bf9\u8def\u5f84\uff08\u5982\u679c\u9700\u8981\uff09\n[\u6587\u672c](/docs/02-how-to-guides/guide.md)\n\n# \u5916\u90e8\u94fe\u63a5\n[\u6587\u672c](https://example.com)\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_22","title":"\u6a21\u677f\u5728\u54ea\u91cc\uff1f","text":"<pre><code>docs/_meta/templates/\n\u251c\u2500\u2500 tutorial.md\n\u251c\u2500\u2500 how-to.md\n\u251c\u2500\u2500 explanation.md\n\u2514\u2500\u2500 reference.md\n</code></pre>"},{"location":"_meta/QUICK_REFERENCE/#_23","title":"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90","text":"<ul> <li>\u5b8c\u6574\u6587\u6863\u7ba1\u7406\u65b9\u6848</li> <li>Di\u00e1taxis Framework</li> <li>Markdown Guide</li> <li>Git Workflow</li> </ul> <p>\u5feb\u901f\u8bbf\u95ee: \u5c06\u6b64\u6587\u4ef6\u52a0\u5165\u4e66\u7b7e \ud83d\udd16 \u9700\u8981\u5e2e\u52a9: \u521b\u5efaIssue</p>"},{"location":"_meta/templates/how-to/","title":"\u5982\u4f55 [\u5b8c\u6210\u67d0\u4e2a\u4efb\u52a1]","text":"<p>\u96be\u5ea6: \u521d\u7ea7 / \u4e2d\u7ea7 / \u9ad8\u7ea7 \u9884\u8ba1\u65f6\u95f4: XX \u5206\u949f \u524d\u7f6e\u6761\u4ef6: \u5217\u51fa\u5fc5\u9700\u6761\u4ef6</p>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#_2","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u7b80\u6d01\u8bf4\u660e\u8fd9\u4e2a\u6307\u5357\u8981\u89e3\u51b3\u4ec0\u4e48\u95ee\u9898\u3002</p> <p>\u9002\u7528\u573a\u666f: \u63cf\u8ff0\u4ec0\u4e48\u65f6\u5019\u9700\u8981\u8fd9\u4e2a\u64cd\u4f5c\u3002</p>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#_3","title":"\ud83c\udfaf \u524d\u7f6e\u6761\u4ef6","text":"<ul> <li> \u6761\u4ef6 A</li> <li> \u6761\u4ef6 B</li> <li> \u5df2\u4e86\u89e3 \u76f8\u5173\u6982\u5ff5</li> </ul>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#_4","title":"\ud83d\udee0\ufe0f \u6b65\u9aa4","text":"","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#1","title":"\u6b65\u9aa4 1: [\u505a\u4ec0\u4e48]","text":"<pre><code># \u5177\u4f53\u547d\u4ee4\ncommand\n</code></pre> <p>\u8bf4\u660e: \u5feb\u901f\u89e3\u91ca\u8fd9\u4e00\u6b65\u7684\u4f5c\u7528\u3002</p>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#2","title":"\u6b65\u9aa4 2: [\u505a\u4ec0\u4e48]","text":"<pre><code>command\n</code></pre>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#3","title":"\u6b65\u9aa4 3: [\u505a\u4ec0\u4e48]","text":"<pre><code>command\n</code></pre>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#_5","title":"\u2705 \u9a8c\u8bc1","text":"<p>\u68c0\u67e5\u662f\u5426\u6210\u529f\uff1a</p> <pre><code># \u9a8c\u8bc1\u547d\u4ee4\nverify command\n</code></pre> <p>\u9884\u671f\u7ed3\u679c: <pre><code>expected result\n</code></pre></p>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#_6","title":"\ud83d\udc1b \u6545\u969c\u6392\u9664","text":"","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#x","title":"\u95ee\u9898\uff1a\u9047\u5230\u9519\u8bef X","text":"<p>\u539f\u56e0: ...</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>solution\n</code></pre></p>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#y","title":"\u95ee\u9898\uff1a\u9047\u5230\u9519\u8bef Y","text":"<p>\u539f\u56e0: ...</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>solution\n</code></pre></p>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#_7","title":"\ud83d\udca1 \u63d0\u793a\u548c\u6280\u5de7","text":"<ul> <li>\ud83d\udca1 \u6280\u5de7 1</li> <li>\ud83d\udca1 \u6280\u5de7 2</li> <li>\u26a0\ufe0f \u6ce8\u610f\u4e8b\u9879</li> </ul>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/how-to/#_8","title":"\ud83d\udcda \u76f8\u5173\u8d44\u6e90","text":"<ul> <li>\u76f8\u5173\u64cd\u4f5c\u6307\u5357</li> <li>\u6982\u5ff5\u8bf4\u660e</li> <li>\u53c2\u8003\u6587\u6863</li> </ul> <p>\u6700\u540e\u66f4\u65b0: YYYY-MM-DD \u53cd\u9988: \u521b\u5efa Issue</p>","tags":["how-to","tag1","tag2"]},{"location":"_meta/templates/tutorial/","title":"[\u6559\u7a0b\u6807\u9898] - \u6e05\u6670\u63cf\u8ff0\u5b66\u4e60\u76ee\u6807","text":"<p>\u5b66\u4e60\u65f6\u95f4: \u7ea6 XX \u5206\u949f \u96be\u5ea6: \u521d\u7ea7 / \u4e2d\u7ea7 / \u9ad8\u7ea7 \u524d\u7f6e\u6761\u4ef6: \u5217\u51fa\u6240\u9700\u77e5\u8bc6</p>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_1","title":"\ud83d\udcdd \u4f60\u5c06\u5b66\u5230\u4ec0\u4e48","text":"<p>\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u4f60\u5c06\u5b66\u4e60\uff1a</p> <ul> <li>\u76ee\u6807 1</li> <li>\u76ee\u6807 2</li> <li>\u76ee\u6807 3</li> </ul>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_2","title":"\ud83c\udfaf \u5f00\u59cb\u4e4b\u524d","text":"","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_3","title":"\u51c6\u5907\u5de5\u4f5c","text":"<ul> <li> \u5de5\u5177/\u8f6f\u4ef6 A (\u7248\u672c X.X+)</li> <li> \u5de5\u5177/\u8f6f\u4ef6 B</li> <li> \u57fa\u7840\u77e5\u8bc6 C</li> </ul>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_4","title":"\u9884\u8ba1\u65f6\u95f4","text":"<ul> <li>\u6b65\u9aa4 1: 5\u5206\u949f</li> <li>\u6b65\u9aa4 2: 10\u5206\u949f</li> <li>\u6b65\u9aa4 3: 5\u5206\u949f</li> </ul>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#1","title":"\u7b2c 1 \u6b65: [\u6b65\u9aa4\u540d\u79f0]","text":"","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_5","title":"\u76ee\u6807","text":"<p>\u7b80\u77ed\u8bf4\u660e\u8fd9\u4e00\u6b65\u8981\u8fbe\u6210\u4ec0\u4e48\u3002</p>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_6","title":"\u64cd\u4f5c","text":"<pre><code># \u5b9e\u9645\u53ef\u8fd0\u884c\u7684\u547d\u4ee4\ncommand here\n</code></pre>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_7","title":"\u8bf4\u660e","text":"<p>\u89e3\u91ca\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\uff0c\u53d1\u751f\u4e86\u4ec0\u4e48\u3002</p>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_8","title":"\u9a8c\u8bc1","text":"<pre><code># \u5982\u4f55\u9a8c\u8bc1\u6210\u529f\nverification command\n</code></pre> <p>\u9884\u671f\u8f93\u51fa: <pre><code>expected output\n</code></pre></p>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#2","title":"\u7b2c 2 \u6b65: [\u6b65\u9aa4\u540d\u79f0]","text":"<p>(\u91cd\u590d\u4e0a\u9762\u7684\u7ed3\u6784)</p>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#3","title":"\u7b2c 3 \u6b65: [\u6b65\u9aa4\u540d\u79f0]","text":"<p>(\u91cd\u590d\u4e0a\u9762\u7684\u7ed3\u6784)</p>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_9","title":"\u2705 \u5b8c\u6210\u68c0\u67e5","text":"<p>\u73b0\u5728\u4f60\u5e94\u8be5\u80fd\u591f\uff1a</p> <ul> <li> \u5b8c\u6210\u4efb\u52a1 A</li> <li> \u5b8c\u6210\u4efb\u52a1 B</li> <li> \u7406\u89e3\u6982\u5ff5 C</li> </ul>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_10","title":"\ud83c\udf89 \u603b\u7ed3","text":"<p>\u4f60\u5df2\u7ecf\u5b66\u4f1a\u4e86\uff1a</p> <ol> <li>\u91cd\u70b9 1</li> <li>\u91cd\u70b9 2</li> <li>\u91cd\u70b9 3</li> </ol>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_11","title":"\ud83d\udcda \u4e0b\u4e00\u6b65","text":"<ul> <li>\u76f8\u5173\u6559\u7a0b</li> <li>\u6df1\u5165\u9605\u8bfb</li> <li>\u53c2\u8003\u6587\u6863</li> </ul>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_12","title":"\u2753 \u5e38\u89c1\u95ee\u9898","text":"","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#q-1","title":"Q: \u95ee\u9898 1\uff1f","text":"<p>A: \u7b54\u6848 1</p>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#q-2","title":"Q: \u95ee\u9898 2\uff1f","text":"<p>A: \u7b54\u6848 2</p>","tags":["tutorial","tag1","tag2"]},{"location":"_meta/templates/tutorial/#_13","title":"\ud83d\udcdd \u53cd\u9988","text":"<p>\u5982\u679c\u4f60\u5728\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u9047\u5230\u95ee\u9898\uff0c\u8bf7\uff1a</p> <ul> <li>\u521b\u5efa Issue</li> <li>\u67e5\u770b\u6545\u969c\u6392\u9664</li> </ul>","tags":["tutorial","tag1","tag2"]},{"location":"adr/","title":"Architecture Decision Records (ADR)","text":"<p>\u8bb0\u5f55\u9879\u76ee\u4e2d\u6240\u6709\u91cd\u8981\u7684\u67b6\u6784\u51b3\u7b56</p>"},{"location":"adr/#adr","title":"\ud83d\udccb ADR \u5217\u8868","text":"# \u6807\u9898 \u72b6\u6001 \u65e5\u671f \u4f5c\u8005 001 Streamable \u534f\u8bae\u53cc\u91cd Session ID \u4f20\u9012\u673a\u5236 \u2705 Accepted 2026-01-28 AI Assistant"},{"location":"adr/#_1","title":"\ud83d\udd0d \u72b6\u6001\u8bf4\u660e","text":"<ul> <li>\u2705 Accepted - \u5df2\u63a5\u53d7\u5e76\u5b9e\u65bd</li> <li>\ud83d\udea7 Proposed - \u5df2\u63d0\u51fa\uff0c\u5f85\u8bc4\u5ba1</li> <li>\u23f8\ufe0f Deprecated - \u5df2\u5f03\u7528</li> <li>\u274c Rejected - \u5df2\u62d2\u7edd</li> <li>\ud83d\udd04 Superseded - \u5df2\u88ab\u65b0\u51b3\u7b56\u53d6\u4ee3</li> </ul>"},{"location":"adr/#adr_1","title":"\ud83d\udcdd ADR \u6a21\u677f","text":"<p>\u521b\u5efa\u65b0 ADR \u65f6\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u6a21\u677f\uff1a</p> <pre><code># ADR-XXX: [\u7b80\u77ed\u6807\u9898]\n\n## Status\n[Proposed/Accepted/Deprecated/Rejected/Superseded]\n\n## Context\n\u63cf\u8ff0\u95ee\u9898\u548c\u80cc\u666f\n\n## Decision\n\u63cf\u8ff0\u51b3\u7b56\u5185\u5bb9\n\n## Alternatives Considered\n\u5217\u51fa\u8003\u8651\u8fc7\u7684\u66ff\u4ee3\u65b9\u6848\n\n## Consequences\n### Positive\n- \u4f18\u70b91\n- \u4f18\u70b92\n\n### Negative\n- \u7f3a\u70b91\n- \u7f3a\u70b92\n\n## Implementation\n- \u4ee3\u7801\u4f4d\u7f6e\n- \u76f8\u5173\u6587\u6863\n- \u6d4b\u8bd5\u9a8c\u8bc1\n</code></pre>"},{"location":"adr/#_2","title":"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90","text":"<ul> <li>ADR \u6700\u4f73\u5b9e\u8df5</li> <li>\u529f\u80fd\u7d22\u5f15</li> <li>\u8ffd\u6eaf\u77e9\u9635</li> </ul>"},{"location":"adr/#_3","title":"\ud83d\udca1 \u4f7f\u7528\u6307\u5357","text":""},{"location":"adr/#adr_2","title":"\u4f55\u65f6\u521b\u5efa ADR?","text":"<p>\u521b\u5efa ADR \u7684\u65f6\u673a\uff1a - \u2705 \u67b6\u6784\u8bbe\u8ba1\u51b3\u7b56\uff08\u5982\u9009\u62e9\u6280\u672f\u6808\u3001\u8bbe\u8ba1\u6a21\u5f0f\uff09 - \u2705 \u91cd\u8981\u7684\u6280\u672f\u9009\u578b\uff08\u5982\u6570\u636e\u5e93\u3001\u6d88\u606f\u961f\u5217\uff09 - \u2705 \u5f71\u54cd\u591a\u4e2a\u6a21\u5757\u7684\u8bbe\u8ba1\u51b3\u7b56 - \u2705 \u6709\u91cd\u8981\u6743\u8861\u7684\u51b3\u7b56</p> <p>\u4e0d\u9700\u8981\u521b\u5efa ADR\u7684\u60c5\u51b5\uff1a - \u274c \u5c0f\u7684\u4ee3\u7801\u91cd\u6784 - \u274c Bug \u4fee\u590d\uff08\u9664\u975e\u6d89\u53ca\u67b6\u6784\u53d8\u66f4\uff09 - \u274c \u914d\u7f6e\u8c03\u6574</p>"},{"location":"adr/#adr_3","title":"\u5982\u4f55\u521b\u5efa ADR?","text":"<ol> <li>\u590d\u5236\u6a21\u677f</li> <li>\u4e3a ADR \u5206\u914d\u7f16\u53f7\uff08\u9012\u589e\uff09</li> <li>\u586b\u5199\u5404\u4e2a\u90e8\u5206</li> <li>\u94fe\u63a5\u76f8\u5173\u4ee3\u7801\u3001\u6d4b\u8bd5\u3001\u6587\u6863</li> <li>\u63d0\u4ea4 PR \u5e76\u8bf7\u6c42\u8bc4\u5ba1</li> <li>\u66f4\u65b0\u6b64\u7d22\u5f15</li> </ol> <p>\u7ef4\u62a4\u8005: \u67b6\u6784\u56e2\u961f \u6700\u540e\u66f4\u65b0: 2026-01-28 ADR \u6570\u91cf: 1</p>"},{"location":"adr/001-streamable-session-dual-transmission/","title":"ADR-001: Streamable \u534f\u8bae\u53cc\u91cd Session ID \u4f20\u9012\u673a\u5236","text":""},{"location":"adr/001-streamable-session-dual-transmission/#status","title":"Status","text":"<p>\u2705 Accepted (2026-01-28)</p>"},{"location":"adr/001-streamable-session-dual-transmission/#context","title":"Context","text":""},{"location":"adr/001-streamable-session-dual-transmission/#_1","title":"\u95ee\u9898","text":"<p>\u67d0\u4e9b Streamable \u5ba2\u6237\u7aef\uff08\u5982 MCP Inspector\uff09\u672a\u6b63\u786e\u5904\u7406 <code>Mcp-Session-Id</code> HTTP \u54cd\u5e94\u5934\uff0c\u5bfc\u81f4\u5ba2\u6237\u7aef\u65e0\u6cd5\u83b7\u53d6 sessionId\uff0c\u8fdb\u800c\u65e0\u6cd5\u53d1\u9001\u540e\u7eed\u6d88\u606f\u3002</p>"},{"location":"adr/001-streamable-session-dual-transmission/#_2","title":"\u80cc\u666f","text":"<ul> <li>MCP Streamable \u534f\u8bae\u89c4\u8303\u5efa\u8bae\u901a\u8fc7 <code>Mcp-Session-Id</code> \u54cd\u5e94\u5934\u4f20\u9012 sessionId</li> <li>\u5b9e\u9645\u4f7f\u7528\u4e2d\u53d1\u73b0\u5ba2\u6237\u7aef\u517c\u5bb9\u6027\u95ee\u9898</li> <li>\u9700\u8981\u4e00\u4e2a\u65e2\u7b26\u5408\u89c4\u8303\u53c8\u517c\u5bb9\u73b0\u6709\u5ba2\u6237\u7aef\u7684\u89e3\u51b3\u65b9\u6848</li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#_3","title":"\u5f71\u54cd\u8303\u56f4","text":"<ul> <li>mcp-router-v3 \u7684 Streamable \u4f20\u8f93\u5c42</li> <li>\u6240\u6709\u4f7f\u7528 Streamable \u534f\u8bae\u7684\u5ba2\u6237\u7aef</li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#decision","title":"Decision","text":"<p>\u5b9e\u65bd\u53cc\u91cd\u4f20\u9012\u673a\u5236\uff0c\u540c\u65f6\u901a\u8fc7\u54cd\u5e94\u5934\u548c\u6d88\u606f\u4f53\u4f20\u9012 sessionId\uff1a</p>"},{"location":"adr/001-streamable-session-dual-transmission/#1","title":"\u65b9\u6848 1: \u54cd\u5e94\u5934\uff08\u89c4\u8303\u65b9\u5f0f\uff09","text":"<pre><code>HTTP/1.1 200 OK\nContent-Type: application/x-ndjson\nMcp-Session-Id: uuid-1234\nMcp-Transport: streamable\n</code></pre>"},{"location":"adr/001-streamable-session-dual-transmission/#2-ndjson","title":"\u65b9\u6848 2: NDJSON \u521d\u59cb\u6d88\u606f\uff08\u517c\u5bb9\u65b9\u5f0f\uff09","text":"<pre><code>{\"type\":\"session\",\"sessionId\":\"uuid-1234\",\"messageEndpoint\":\"http://...\",\"transport\":\"streamable\"}\n</code></pre>"},{"location":"adr/001-streamable-session-dual-transmission/#_4","title":"\u5b9e\u73b0\u7ec6\u8282","text":"<ol> <li> <p>\u65b0\u589e\u65b9\u6cd5: <code>buildSessionIdMessage()</code> <pre><code>private String buildSessionIdMessage(String sessionId, String messageEndpoint) {\n    Map&lt;String, Object&gt; payload = new LinkedHashMap&lt;&gt;();\n    payload.put(\"type\", \"session\");\n    payload.put(\"sessionId\", sessionId);\n    payload.put(\"messageEndpoint\", messageEndpoint);\n    payload.put(\"transport\", \"streamable\");\n    return objectMapper.writeValueAsString(payload) + \"\\n\";\n}\n</code></pre></p> </li> <li> <p>\u4fee\u6539\u6d41\u7a0b: \u5728 NDJSON \u6d41\u5f00\u5934\u63d2\u5165 session \u6d88\u606f    <pre><code>Flux&lt;String&gt; streamFlux = Flux.concat(\n    Flux.just(buildSessionIdMessage(...)),\n    buildEventFlux(context).map(this::toStreamableJson)\n);\n</code></pre></p> </li> <li> <p>\u589e\u5f3a\u65e5\u5fd7: <code>resolveSessionId()</code> \u65b9\u6cd5\u6dfb\u52a0\u8be6\u7ec6\u65e5\u5fd7</p> </li> <li>\u8bb0\u5f55 sessionId \u6765\u6e90\uff08\u8bf7\u6c42\u5934/\u67e5\u8be2\u53c2\u6570\uff09</li> <li>\u672a\u627e\u5230\u65f6\u8bb0\u5f55\u8b66\u544a</li> </ol>"},{"location":"adr/001-streamable-session-dual-transmission/#alternatives-considered","title":"Alternatives Considered","text":""},{"location":"adr/001-streamable-session-dual-transmission/#1_1","title":"\u66ff\u4ee3\u65b9\u6848 1: \u4ec5\u4f7f\u7528\u54cd\u5e94\u5934","text":"<ul> <li>\u274c \u62d2\u7edd\u539f\u56e0: \u5ba2\u6237\u7aef\u517c\u5bb9\u6027\u95ee\u9898\u65e0\u6cd5\u89e3\u51b3</li> <li>\u4f18\u70b9: \u7b26\u5408\u89c4\u8303</li> <li>\u7f3a\u70b9: \u65e0\u6cd5\u652f\u6301\u4e0d\u652f\u6301\u54cd\u5e94\u5934\u7684\u5ba2\u6237\u7aef</li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#2","title":"\u66ff\u4ee3\u65b9\u6848 2: \u4ec5\u4f7f\u7528\u6d88\u606f\u4f53","text":"<ul> <li>\u274c \u62d2\u7edd\u539f\u56e0: \u4e0d\u7b26\u5408 MCP Streamable \u89c4\u8303</li> <li>\u4f18\u70b9: \u517c\u5bb9\u6027\u597d</li> <li>\u7f3a\u70b9: \u8fdd\u53cd\u534f\u8bae\u89c4\u8303</li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#3","title":"\u66ff\u4ee3\u65b9\u6848 3: \u5ba2\u6237\u7aef\u4fee\u590d","text":"<ul> <li>\u274c \u62d2\u7edd\u539f\u56e0: \u65e0\u6cd5\u63a7\u5236\u7b2c\u4e09\u65b9\u5ba2\u6237\u7aef</li> <li>\u4f18\u70b9: \u4ece\u6839\u672c\u89e3\u51b3\u95ee\u9898</li> <li>\u7f3a\u70b9: \u4e0d\u5207\u5b9e\u9645\uff0c\u7b49\u5f85\u65f6\u95f4\u957f</li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#consequences","title":"Consequences","text":""},{"location":"adr/001-streamable-session-dual-transmission/#positive","title":"Positive \u2705","text":"<ol> <li>\u517c\u5bb9\u6027\u63d0\u5347</li> <li>\u2705 \u652f\u6301\u89c4\u8303\u5ba2\u6237\u7aef\uff08\u54cd\u5e94\u5934\uff09</li> <li>\u2705 \u652f\u6301\u975e\u89c4\u8303\u5ba2\u6237\u7aef\uff08\u6d88\u606f\u4f53\uff09</li> <li> <p>\u2705 \u5411\u540e\u517c\u5bb9\u73b0\u6709\u5b9e\u73b0</p> </li> <li> <p>\u53ef\u89c2\u6d4b\u6027\u589e\u5f3a</p> </li> <li>\u2705 \u8be6\u7ec6\u7684 sessionId \u89e3\u6790\u65e5\u5fd7</li> <li>\u2705 \u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a</li> <li> <p>\u2705 \u4fbf\u4e8e\u95ee\u9898\u8bca\u65ad</p> </li> <li> <p>\u5065\u58ee\u6027</p> </li> <li>\u2705 \u53cc\u91cd\u4fdd\u969c\u673a\u5236</li> <li>\u2705 \u964d\u4f4e\u5ba2\u6237\u7aef\u96c6\u6210\u96be\u5ea6</li> </ol>"},{"location":"adr/001-streamable-session-dual-transmission/#negative","title":"Negative \u26a0\ufe0f","text":"<ol> <li>\u6027\u80fd\u5f00\u9500</li> <li>\u26a0\ufe0f \u6bcf\u4e2a\u8fde\u63a5\u989d\u5916 ~100 bytes</li> <li> <p>\ud83d\udca1 \u8bc4\u4f30: \u53ef\u5ffd\u7565\uff08&lt; 0.01% \u5e26\u5bbd\uff09</p> </li> <li> <p>\u7ef4\u62a4\u6210\u672c</p> </li> <li>\u26a0\ufe0f \u9700\u8981\u7ef4\u62a4\u4e24\u5957\u4f20\u9012\u673a\u5236</li> <li> <p>\ud83d\udca1 \u7f13\u89e3: \u4ee3\u7801\u5c01\u88c5\u826f\u597d\uff0c\u7ef4\u62a4\u6210\u672c\u4f4e</p> </li> <li> <p>\u534f\u8bae\u6269\u5c55\u6027</p> </li> <li>\u26a0\ufe0f \u5f15\u5165\u975e\u6807\u51c6\u5b57\u6bb5 <code>type: session</code></li> <li>\ud83d\udca1 \u7f13\u89e3: \u4ec5\u5728 Streamable \u6a21\u5f0f\u4f7f\u7528\uff0c\u4e0d\u5f71\u54cd\u5176\u4ed6\u4f20\u8f93</li> </ol>"},{"location":"adr/001-streamable-session-dual-transmission/#neutral-i","title":"Neutral \u2139\ufe0f","text":"<ol> <li>\u6d4b\u8bd5\u590d\u6742\u5ea6</li> <li>\u9700\u8981\u6d4b\u8bd5\u4e24\u79cd\u83b7\u53d6\u65b9\u5f0f</li> <li>\u5df2\u901a\u8fc7 20+ \u6d4b\u8bd5\u7528\u4f8b\u9a8c\u8bc1</li> </ol>"},{"location":"adr/001-streamable-session-dual-transmission/#verification","title":"Verification","text":""},{"location":"adr/001-streamable-session-dual-transmission/#_5","title":"\u6d4b\u8bd5\u8986\u76d6","text":"<ul> <li>\u2705 \u7aef\u5230\u7aef\u6d4b\u8bd5: 100% \u901a\u8fc7</li> <li>\u2705 \u54cd\u5e94\u5934\u6d4b\u8bd5: \u901a\u8fc7</li> <li>\u2705 \u521d\u59cb\u6d88\u606f\u6d4b\u8bd5: \u901a\u8fc7</li> <li>\u2705 \u5e76\u53d1\u6d4b\u8bd5: 10\u4e2a\u8fde\u63a5\u7a33\u5b9a</li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#_6","title":"\u6027\u80fd\u6d4b\u8bd5","text":"<pre><code># TTFB (Time To First Byte)\ntime curl -N -H \"Accept: application/x-ndjson\" \\\n  \"http://localhost:8052/mcp/service\" | head -n 1\n# \u7ed3\u679c: &lt; 50ms\n</code></pre>"},{"location":"adr/001-streamable-session-dual-transmission/#_7","title":"\u517c\u5bb9\u6027\u9a8c\u8bc1","text":"<ul> <li>\u2705 MCP Inspector</li> <li>\u2705 MCP SSE Client</li> <li>\u2705 \u81ea\u5b9a\u4e49\u5ba2\u6237\u7aef</li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#implementation","title":"Implementation","text":""},{"location":"adr/001-streamable-session-dual-transmission/#code-locations","title":"Code Locations","text":"<ul> <li>\u4e3b\u5b9e\u73b0: <code>McpRouterServerConfig.java#L329-362</code></li> <li>Session \u7ba1\u7406: <code>McpSessionService.java</code></li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#git-commits","title":"Git Commits","text":"<pre><code>git log --oneline --grep=\"streamable.*session\" bugfix/fix-streamable-session-management\n\n# 08ecd83 - fix(streamable): enhance session management\n# 8f58530 - test(streamable): add verification script\n# c8ea35c - test(streamable): comprehensive test suite\n# 415e228 - docs(test): verification report\n</code></pre>"},{"location":"adr/001-streamable-session-dual-transmission/#tests","title":"Tests","text":"<ul> <li>\u5b8c\u6574\u6d4b\u8bd5: <code>test_streamable_comprehensive.sh</code></li> <li>\u5feb\u901f\u6d4b\u8bd5: <code>test_streamable_session.sh</code></li> <li>CI: <code>.github/workflows/test-streamable-session.yml</code></li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#documentation","title":"Documentation","text":""},{"location":"adr/001-streamable-session-dual-transmission/#related-documents","title":"Related Documents","text":"<ul> <li>\ud83d\udcd6 \u529f\u80fd\u6587\u6863</li> <li>\ud83d\udcca \u6d4b\u8bd5\u62a5\u544a</li> <li>\ud83d\udccb \u95ee\u9898\u5206\u6790</li> <li>\ud83d\udd17 \u8ffd\u6eaf\u77e9\u9635</li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#specifications","title":"Specifications","text":"<ul> <li>MCP Streamable Specification</li> <li>NDJSON Format</li> </ul>"},{"location":"adr/001-streamable-session-dual-transmission/#review-approval","title":"Review &amp; Approval","text":"Role Name Date Status Author AI Assistant 2026-01-28 \u2705 Reviewer (\u5f85\u6307\u5b9a) - \u23f3 Approver (\u5f85\u6307\u5b9a) - \u23f3"},{"location":"adr/001-streamable-session-dual-transmission/#changelog","title":"Changelog","text":"Date Author Change 2026-01-28 AI Assistant Initial decision"},{"location":"adr/001-streamable-session-dual-transmission/#notes","title":"Notes","text":""},{"location":"adr/001-streamable-session-dual-transmission/#future-considerations","title":"Future Considerations","text":"<ol> <li>\u76d1\u63a7\u6307\u6807</li> <li>\u5efa\u8bae\u6dfb\u52a0 metric: <code>mcp.session.resolved.source</code> (header vs body)</li> <li> <p>\u76d1\u63a7\u5ba2\u6237\u7aef\u7c7b\u578b\u5206\u5e03</p> </li> <li> <p>\u534f\u8bae\u6f14\u8fdb</p> </li> <li>\u5982\u679c MCP \u89c4\u8303\u66f4\u65b0\uff0c\u9700\u8981\u91cd\u65b0\u8bc4\u4f30\u6b64\u51b3\u7b56</li> <li> <p>\u8ddf\u8e2a\u5ba2\u6237\u7aef\u91c7\u7528\u60c5\u51b5</p> </li> <li> <p>\u6e05\u7406\u8ba1\u5212</p> </li> <li>\u5f53\u6240\u6709\u5ba2\u6237\u7aef\u90fd\u652f\u6301\u54cd\u5e94\u5934\u540e\uff0c\u53ef\u4ee5\u8003\u8651\u79fb\u9664\u6d88\u606f\u4f53\u65b9\u5f0f</li> <li>\u9884\u8ba1\u65f6\u95f4: 2027\u5e74\uff081\u5e74\u540e\u8bc4\u4f30\uff09</li> </ol>"},{"location":"adr/001-streamable-session-dual-transmission/#references","title":"References","text":"<ul> <li>Related Issues: #TBD</li> <li>Related PRs: #TBD</li> <li>Discussion: (\u94fe\u63a5\u5230\u8bbe\u8ba1\u8ba8\u8bba)</li> </ul> <p>ADR Number: 001 Created: 2026-01-28 Last Updated: 2026-01-28 Status: Accepted Supersedes: None Superseded by: None</p>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/","title":"MCP\u534f\u8bae\u91cd\u6784\u603b\u7ed3","text":""},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#_1","title":"\u6982\u8ff0","text":"<p>\u672c\u6b21\u91cd\u6784\u5c06\u539f\u6709\u7684JSON-RPC\u5b9e\u73b0\u5b8c\u5168\u66ff\u6362\u4e3a\u6807\u51c6MCP\u534f\u8bae\u5b9e\u73b0\uff0c\u786e\u4fdd\u6240\u6709\u6a21\u5757\u95f4\u901a\u4fe1\u90fd\u9075\u5faaMCP\u89c4\u7ea6\uff0c\u4f7f\u7528SSE\u534f\u8bae\u8fdb\u884c\u901a\u4fe1\u3002</p>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#_2","title":"\u91cd\u6784\u5b8c\u6210\u7684\u6a21\u5757","text":""},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#1-mcp-server-v2-8061","title":"1. mcp-server-v2 (\u7aef\u53e38061)","text":"<p>\u91cd\u6784\u5185\u5bb9\uff1a - \u2705 \u79fb\u9664\u6240\u6709JSON-RPC\u76f8\u5173\u4ee3\u7801 - \u2705 \u5b9e\u73b0\u6807\u51c6MCP\u534f\u8bae\u7684WebFlux SSE\u4f20\u8f93 - \u2705 \u4f7f\u7528Spring AI\u7684@Tool\u6ce8\u89e3\u5b9a\u4e49\u5de5\u5177 - \u2705 \u5b9e\u73b0PersonManagementTool\u7c7b\uff0c\u5305\u542b\u4ee5\u4e0b\u5de5\u5177\uff1a   - <code>getAllPersons</code>: \u83b7\u53d6\u6240\u6709\u4eba\u5458   - <code>addPerson</code>: \u6dfb\u52a0\u4eba\u5458   - <code>deletePerson</code>: \u5220\u9664\u4eba\u5458   - <code>get_system_info</code>: \u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f   - <code>list_servers</code>: \u5217\u51fa\u670d\u52a1\u5668 - \u2705 \u914d\u7f6eNacos\u670d\u52a1\u6ce8\u518c - \u2705 \u5b9e\u73b0SSE\u7aef\u70b9\uff1a<code>/sse</code> (GET) \u548c <code>/mcp/message</code> (POST)</p> <p>\u5173\u952e\u914d\u7f6e\uff1a <pre><code>spring:\n  ai:\n    mcp:\n      server:\n        name: mcp-server-v2\n        version: 1.0.0\n        sse-message-endpoint: /mcp/message\n</code></pre></p>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#2-mcp-client-8070","title":"2. mcp-client (\u7aef\u53e38070)","text":"<p>\u91cd\u6784\u5185\u5bb9\uff1a - \u2705 \u79fb\u9664WebClient HTTP\u8c03\u7528\u5b9e\u73b0 - \u2705 \u5b9e\u73b0\u57fa\u4e8eNacos\u7684\u670d\u52a1\u53d1\u73b0 - \u2705 \u4f7f\u7528McpAsyncClient\u548cWebFluxSseClientTransport - \u2705 \u5b9e\u73b0MCP\u534f\u8bae\u7684\u5de5\u5177\u8c03\u7528 - \u2705 \u91cd\u6784McpClientController\uff0c\u63d0\u4f9bRESTful API\u63a5\u53e3\uff1a   - <code>GET /mcp-client/api/v1/tools/list</code>: \u83b7\u53d6\u5de5\u5177\u5217\u8868   - <code>POST /mcp-client/api/v1/tools/call</code>: \u8c03\u7528\u5de5\u5177   - <code>GET /mcp-client/api/v1/servers/status</code>: \u83b7\u53d6\u670d\u52a1\u5668\u72b6\u6001</p> <p>\u5173\u952e\u7279\u6027\uff1a - \u81ea\u52a8\u53d1\u73b0MCP\u670d\u52a1\u5668\u5b9e\u4f8b - \u652f\u6301\u591a\u670d\u52a1\u5668\u8d1f\u8f7d\u5747\u8861 - \u6807\u51c6MCP\u534f\u8bae\u901a\u4fe1</p>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#3-mcp-router-8050","title":"3. mcp-router (\u7aef\u53e38050)","text":"<p>\u91cd\u6784\u5185\u5bb9\uff1a - \u2705 \u79fb\u9664JSON-RPC\u8def\u7531\u5b9e\u73b0 - \u2705 \u5b9e\u73b0\u57fa\u4e8eMCP\u534f\u8bae\u7684\u8def\u7531\u529f\u80fd - \u2705 \u4f7f\u7528McpAsyncClient\u8fde\u63a5\u5230\u5404\u4e2aMCP\u670d\u52a1\u5668 - \u2705 \u5b9e\u73b0McpRouterService\uff0c\u63d0\u4f9b\uff1a   - \u5de5\u5177\u8c03\u7528\u8def\u7531   - \u670d\u52a1\u53d1\u73b0\u548c\u7ba1\u7406   - \u8d1f\u8f7d\u5747\u8861</p> <p>\u6ce8\u610f\uff1a  \u6839\u636eTODO10.md\u8981\u6c42\uff0cmcp-router\u9664\u4e86\u8c03\u8bd5\u63a5\u53e3\u5916\u4e0d\u63d0\u4f9b\u5bf9\u5916HTTP\u670d\u52a1\uff0c\u4e3b\u8981\u4f5c\u4e3aMCP\u534f\u8bae\u7684\u8def\u7531\u4e2d\u95f4\u4ef6\u3002</p>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#_3","title":"\u6280\u672f\u5b9e\u73b0\u8981\u70b9","text":""},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#1-mcp","title":"1. MCP\u534f\u8bae\u6807\u51c6\u5b9e\u73b0","text":"<ul> <li>\u4f7f\u7528<code>WebFluxSseServerTransportProvider</code>\u5b9e\u73b0\u670d\u52a1\u7aefSSE\u4f20\u8f93</li> <li>\u4f7f\u7528<code>WebFluxSseClientTransport</code>\u5b9e\u73b0\u5ba2\u6237\u7aefSSE\u4f20\u8f93</li> <li>\u9075\u5faaMCP\u89c4\u7ea6\uff0c\u6240\u6709\u901a\u4fe1\u4f7f\u7528SSE\u534f\u8bae</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#2","title":"2. \u670d\u52a1\u53d1\u73b0\u673a\u5236","text":"<ul> <li>\u57fa\u4e8eNacos\u7684\u670d\u52a1\u6ce8\u518c\u4e0e\u53d1\u73b0</li> <li>\u670d\u52a1\u5b9e\u4f8b\u5143\u6570\u636e\u5305\u542b\u5de5\u5177\u4fe1\u606f</li> <li>\u81ea\u52a8\u5065\u5eb7\u68c0\u67e5\u548c\u6545\u969c\u8f6c\u79fb</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#3","title":"3. \u5de5\u5177\u5b9a\u4e49\u548c\u8c03\u7528","text":"<ul> <li>\u4f7f\u7528Spring AI\u7684<code>@Tool</code>\u6ce8\u89e3\u5b9a\u4e49\u5de5\u5177</li> <li>\u6807\u51c6MCP Schema\u5b9a\u4e49\u5de5\u5177\u53c2\u6570</li> <li>\u652f\u6301\u54cd\u5e94\u5f0f\u7f16\u7a0b\u6a21\u578b</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#4","title":"4. \u914d\u7f6e\u7ba1\u7406","text":"<ul> <li>\u7edf\u4e00\u7684application.yml\u914d\u7f6e</li> <li>\u652f\u6301Nacos\u914d\u7f6e\u4e2d\u5fc3</li> <li>\u73af\u5883\u7279\u5b9a\u914d\u7f6e</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#_4","title":"\u9a8c\u8bc1\u65b9\u6cd5","text":""},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#1","title":"1. \u542f\u52a8\u7cfb\u7edf","text":"<pre><code>./run-demo.sh\n</code></pre>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#2-mcp","title":"2. \u6d4b\u8bd5MCP\u534f\u8bae","text":"<pre><code>./test-mcp-integration.sh\n</code></pre>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#3_1","title":"3. \u624b\u52a8\u6d4b\u8bd5","text":"<pre><code># \u83b7\u53d6\u5de5\u5177\u5217\u8868\ncurl \"http://localhost:8070/mcp-client/api/v1/tools/list\"\n\n# \u8c03\u7528getAllPersons\u5de5\u5177\ncurl -X POST \"http://localhost:8070/mcp-client/api/v1/tools/call\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"toolName\": \"getAllPersons\", \"arguments\": {}}'\n\n# \u8c03\u7528addPerson\u5de5\u5177\ncurl -X POST \"http://localhost:8070/mcp-client/api/v1/tools/call\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"toolName\": \"addPerson\", \n    \"arguments\": {\n      \"firstName\": \"John\",\n      \"lastName\": \"Doe\", \n      \"age\": 30,\n      \"nationality\": \"USA\",\n      \"gender\": \"MALE\"\n    }\n  }'\n</code></pre>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#_5","title":"\u67b6\u6784\u56fe","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    MCP SSE     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    MCP SSE     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   mcp-client    \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502   mcp-router    \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502 mcp-server-v2   \u2502\n\u2502   (Port 8070)   \u2502                \u2502   (Port 8050)   \u2502                \u2502   (Port 8061)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                                   \u2502                                   \u2502\n         \u2502                                   \u2502                                   \u2502\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                             \u2502\n                                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                    \u2502      Nacos      \u2502\n                                    \u2502   (Port 8848)   \u2502\n                                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#_6","title":"\u5173\u952e\u6539\u8fdb","text":""},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#1_1","title":"1. \u534f\u8bae\u6807\u51c6\u5316","text":"<ul> <li>\u5b8c\u5168\u9075\u5faaMCP\u534f\u8bae\u89c4\u8303</li> <li>\u7edf\u4e00\u7684SSE\u901a\u4fe1\u673a\u5236</li> <li>\u6807\u51c6\u5316\u7684\u5de5\u5177\u5b9a\u4e49\u548c\u8c03\u7528</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#2_1","title":"2. \u67b6\u6784\u4f18\u5316","text":"<ul> <li>\u6e05\u6670\u7684\u670d\u52a1\u5206\u5c42</li> <li>\u677e\u8026\u5408\u7684\u6a21\u5757\u8bbe\u8ba1</li> <li>\u53ef\u6269\u5c55\u7684\u670d\u52a1\u53d1\u73b0\u673a\u5236</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#3_2","title":"3. \u5f00\u53d1\u4f53\u9a8c","text":"<ul> <li>\u7b80\u5316\u7684\u5de5\u5177\u5b9a\u4e49\u65b9\u5f0f</li> <li>\u81ea\u52a8\u5316\u7684\u670d\u52a1\u6ce8\u518c</li> <li>\u5b8c\u5584\u7684\u9519\u8bef\u5904\u7406</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#_7","title":"\u6d4b\u8bd5\u8986\u76d6","text":""},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#1_2","title":"1. \u529f\u80fd\u6d4b\u8bd5","text":"<ul> <li>\u2705 \u5de5\u5177\u5217\u8868\u83b7\u53d6</li> <li>\u2705 \u5de5\u5177\u8c03\u7528 (getAllPersons, addPerson, deletePerson)</li> <li>\u2705 \u7cfb\u7edf\u4fe1\u606f\u83b7\u53d6</li> <li>\u2705 \u670d\u52a1\u5668\u72b6\u6001\u68c0\u67e5</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#2_2","title":"2. \u534f\u8bae\u6d4b\u8bd5","text":"<ul> <li>\u2705 SSE\u8fde\u63a5\u5efa\u7acb</li> <li>\u2705 MCP\u6d88\u606f\u683c\u5f0f</li> <li>\u2705 \u9519\u8bef\u5904\u7406\u673a\u5236</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#3_3","title":"3. \u96c6\u6210\u6d4b\u8bd5","text":"<ul> <li>\u2705 \u670d\u52a1\u53d1\u73b0</li> <li>\u2705 \u8d1f\u8f7d\u5747\u8861</li> <li>\u2705 \u6545\u969c\u8f6c\u79fb</li> </ul>"},{"location":"archived/TODO/MCP_REFACTORING_SUMMARY/#_8","title":"\u7ed3\u8bba","text":"<p>\u672c\u6b21\u91cd\u6784\u6210\u529f\u5c06\u9879\u76ee\u4eceJSON-RPC\u5b9e\u73b0\u8f6c\u6362\u4e3a\u6807\u51c6MCP\u534f\u8bae\u5b9e\u73b0\uff0c\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u76ee\u6807\uff1a</p> <ol> <li>\u534f\u8bae\u6807\u51c6\u5316: \u6240\u6709\u6a21\u5757\u95f4\u901a\u4fe1\u4f7f\u7528\u6807\u51c6MCP\u534f\u8bae</li> <li>\u67b6\u6784\u4f18\u5316: \u6e05\u6670\u7684\u670d\u52a1\u5206\u5c42\u548c\u677e\u8026\u5408\u8bbe\u8ba1</li> <li>\u529f\u80fd\u5b8c\u6574: \u652f\u6301\u5b8c\u6574\u7684\u5de5\u5177\u8c03\u7528\u6d41\u7a0b</li> <li>\u53ef\u6269\u5c55\u6027: \u6613\u4e8e\u6dfb\u52a0\u65b0\u7684MCP\u670d\u52a1\u5668\u548c\u5de5\u5177</li> <li>\u53ef\u7ef4\u62a4\u6027: \u6e05\u6670\u7684\u4ee3\u7801\u7ed3\u6784\u548c\u914d\u7f6e\u7ba1\u7406</li> </ol> <p>\u9879\u76ee\u73b0\u5728\u5b8c\u5168\u7b26\u5408TODO10.md\u4e2d\u7684\u8981\u6c42\uff0c\u6240\u6709\u6a21\u5757\u95f4\u901a\u4fe1\u90fd\u9075\u5faaMCP\u534f\u8bae\u6807\u51c6\uff0c\u4e0d\u518d\u4f7f\u7528HTTP\u534f\u8bae\u8fdb\u884c\u6a21\u5757\u95f4\u901a\u4fe1\u3002 </p>"},{"location":"archived/TODO/TODO/","title":"TODO","text":"<p>\u6839\u636e\u60a8\u63d0\u4f9b\u7684\u4e09\u7bc7\u6587\u7ae0\uff0c\u8ba9\u6211\u91cd\u65b0\u5ba1\u89c6\u5f53\u524d\u9879\u76ee\u7684\u95ee\u9898\u548c\u6539\u8fdb\u65b9\u5411\u3002</p>"},{"location":"archived/TODO/TODO/#_1","title":"\u5f53\u524d\u9879\u76ee\u5206\u6790","text":"<p>\u57fa\u4e8e\u8fd9\u4e09\u7bc7\u6587\u7ae0\u7684\u5185\u5bb9\uff0c\u6211\u53d1\u73b0\u5f53\u524d\u9879\u76ee\u5728\u8bbe\u8ba1\u4e0a\u5b58\u5728\u4e00\u4e9b\u53ef\u4ee5\u6539\u8fdb\u7684\u5730\u65b9\uff1a</p>"},{"location":"archived/TODO/TODO/#1","title":"1. \u67b6\u6784\u8bbe\u8ba1\u95ee\u9898","text":"<p>\u5f53\u524d\u95ee\u9898\uff1a - \u6211\u4eec\u7684\u9879\u76ee\u4e3b\u8981\u5173\u6ce8MCP\u670d\u52a1\u5668\u7684\u6ce8\u518c\u548c\u53d1\u73b0\uff0c\u4f46\u7f3a\u4e4f\u771f\u6b63\u7684MCP\u534f\u8bae\u5b9e\u73b0 - \u6ca1\u6709\u5229\u7528Nacos 3.0\u7684MCP Registry\u529f\u80fd - \u7f3a\u5c11\u4e0eSpring AI MCP\u7684\u96c6\u6210</p> <p>Nacos\u5b98\u65b9\u535a\u5ba2\u7684\u542f\u53d1\uff1a Nacos MCP Registry\u535a\u5ba2 \u63d0\u5230\u4e86\"0\u6539\u52a8\"\u5347\u7ea7\u5230MCP\u534f\u8bae\u7684\u80fd\u529b\uff0c\u8fd9\u610f\u5473\u7740\uff1a</p> <ol> <li>Nacos\u4f5c\u4e3aMCP Registry\u63a7\u5236\u9762\uff1a\u7ba1\u7406Tool\u5143\u4fe1\u606f\uff0c\u5c06\u5b58\u91cfAPI\u8f6c\u5316\u4e3aMCP\u534f\u8bae</li> <li>\u4e0eHigress\u7f51\u5173\u96c6\u6210\uff1a\u5b9e\u73b0MCP\u534f\u8bae\u548c\u5b58\u91cf\u534f\u8bae\u7684\u8f6c\u6362</li> <li>\u52a8\u6001\u670d\u52a1\u53d1\u73b0\uff1a\u652f\u6301MCP\u5de5\u5177\u7684\u52a8\u6001\u6ce8\u518c\u548c\u53d1\u73b0</li> </ol>"},{"location":"archived/TODO/TODO/#2","title":"2. \u6280\u672f\u6808\u9009\u62e9\u95ee\u9898","text":"<p>\u5f53\u524d\u72b6\u6001\uff1a <pre><code>// \u5f53\u524d\u6211\u4eec\u81ea\u5df1\u5b9e\u73b0\u4e86MCP\u670d\u52a1\u5668\u6ce8\u518c\u548c\u641c\u7d22\u529f\u80fd\n</code></pre></p> <p>\u4f46\u662f\u6839\u636e\u6587\u7ae0\u5206\u6790\uff0c\u6211\u4eec\u5e94\u8be5\uff1a Ran tool Ran tool \u57fa\u4e8e\u8fd9\u4e09\u7bc7\u6587\u7ae0\u7684\u5185\u5bb9\uff0c\u8ba9\u6211\u91cd\u65b0\u5ba1\u89c6\u5f53\u524d\u9879\u76ee\u7684\u95ee\u9898\u548c\u6539\u8fdb\u65b9\u5411\uff1a</p>"},{"location":"archived/TODO/TODO/#_2","title":"\ud83d\udd0d \u5f53\u524d\u9879\u76ee\u95ee\u9898\u5206\u6790","text":""},{"location":"archived/TODO/TODO/#1_1","title":"1. \u67b6\u6784\u8bbe\u8ba1\u4e0e\u5b9a\u4f4d\u95ee\u9898","text":"<p>\u73b0\u72b6\u95ee\u9898\uff1a - \u6211\u4eec\u7684\u9879\u76ee\u4e3b\u8981\u5b9e\u73b0\u4e86 MCP \u670d\u52a1\u5668\u7684\u6ce8\u518c\u3001\u53d1\u73b0\u548c\u641c\u7d22\u529f\u80fd - \u4f46\u7f3a\u4e4f\u771f\u6b63\u7684 MCP \u534f\u8bae\u5b9e\u73b0\uff08\u6ca1\u6709\u5b9e\u73b0 JSON-RPC 2.0 \u901a\u4fe1\uff09 - \u66f4\u50cf\u662f\u4e00\u4e2a\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\uff0c\u800c\u4e0d\u662f\u771f\u6b63\u7684 MCP Router</p> <p>\u5e94\u8be5\u7684\u65b9\u5411\uff1a \u6839\u636e\u5b98\u65b9\u6587\u6863\uff0cMCP \u7684\u6838\u5fc3\u5e94\u8be5\u662f\uff1a - Tools\uff1a\u53ef\u6267\u884c\u7684\u51fd\u6570 - Resources\uff1a\u53ea\u8bfb\u7684\u6587\u4ef6\u5185\u5bb9/\u6570\u636e - Prompts\uff1a\u9884\u5b9a\u4e49\u7684\u6a21\u677f - JSON-RPC 2.0 \u901a\u4fe1\u534f\u8bae</p>"},{"location":"archived/TODO/TODO/#2-mcp","title":"2. \u7f3a\u5c11\u6838\u5fc3 MCP \u529f\u80fd","text":"<p>Read file: src/main/java/com/nacos/mcp/router/model/McpTool.java \u95ee\u9898\uff1a \u5f53\u524d\u7684 <code>McpTool</code> \u6a21\u578b\u8fc7\u4e8e\u7b80\u5316\uff0c\u7f3a\u5c11 MCP \u89c4\u8303\u8981\u6c42\u7684\u5b57\u6bb5\u3002</p>"},{"location":"archived/TODO/TODO/#3","title":"3. \u6280\u672f\u6808\u9009\u62e9\u95ee\u9898","text":"<p>\u5f53\u524d\u6280\u672f\u6808\uff1a - \u81ea\u5df1\u5b9e\u73b0\u7684 RESTful API - Nacos \u4f5c\u4e3a\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3 - \u7b80\u5355\u7684\u641c\u7d22\u529f\u80fd</p> <p>\u5e94\u8be5\u4f7f\u7528\u7684\u6280\u672f\u6808\uff1a \u6839\u636e\u5b98\u65b9\u6587\u6863\uff0c\u5e94\u8be5\u4f7f\u7528\uff1a - MCP Java SDK (<code>io.modelcontextprotocol.sdk:mcp</code>) - Spring AI MCP Integration (<code>spring-ai-starter-mcp-server</code>) - JSON-RPC 2.0 \u901a\u4fe1\u534f\u8bae - SSE (Server-Sent Events) \u6216 stdio \u4f20\u8f93</p>"},{"location":"archived/TODO/TODO/#_3","title":"\ud83d\ude80 \u6539\u8fdb\u5efa\u8bae\u548c\u5b9e\u65bd\u65b9\u6848","text":""},{"location":"archived/TODO/TODO/#_4","title":"\u65b9\u6848\u4e00\uff1a\u6e10\u8fdb\u5f0f\u6539\u8fdb\uff08\u63a8\u8350\uff09","text":"<p>\u4fdd\u7559\u73b0\u6709\u7684\u670d\u52a1\u6ce8\u518c\u53d1\u73b0\u529f\u80fd\uff0c\u540c\u65f6\u6dfb\u52a0\u771f\u6b63\u7684 MCP \u534f\u8bae\u652f\u6301\uff1a</p>"},{"location":"archived/TODO/TODO/#1-mcp-tool","title":"\u6b65\u9aa4 1\uff1a\u521b\u5efa\u7b26\u5408 MCP \u89c4\u8303\u7684 Tool \u6a21\u578b","text":""},{"location":"archived/TODO/TODO/#2-mcp-resource-prompt","title":"\u6b65\u9aa4 2\uff1a\u521b\u5efa MCP Resource \u548c Prompt \u6a21\u578b","text":""},{"location":"archived/TODO/TODO/#3-mcp-server","title":"\u6b65\u9aa4 3\uff1a\u521b\u5efa MCP Server \u914d\u7f6e","text":"<p>\u6211\u770b\u5230\u5bfc\u5165\u6709\u95ee\u9898\u3002\u8ba9\u6211\u4fee\u590d\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\uff0c\u4f7f\u7528\u6b63\u786e\u7684\u5bfc\u5165\uff1a \u73b0\u5728\u8ba9\u6211\u66f4\u65b0\u5e94\u7528\u914d\u7f6e\u6587\u4ef6\u4ee5\u652f\u6301 MCP\uff1a</p>"},{"location":"archived/TODO/TODO/#_5","title":"\ud83d\udccb \u603b\u7ed3\uff1a\u5f53\u524d\u9879\u76ee\u91cd\u65b0\u5ba1\u89c6\u540e\u7684\u5173\u952e\u53d1\u73b0","text":""},{"location":"archived/TODO/TODO/#_6","title":"\ud83d\udd0d \u6838\u5fc3\u95ee\u9898\u603b\u7ed3","text":"<ol> <li>\u6982\u5ff5\u9519\u4f4d\uff1a\u6211\u4eec\u5b9e\u73b0\u7684\u662f\"MCP \u670d\u52a1\u5668\u6ce8\u518c\u4e2d\u5fc3\"\uff0c\u800c\u4e0d\u662f\u771f\u6b63\u7684 MCP \u534f\u8bae\u5b9e\u73b0</li> <li>\u534f\u8bae\u7f3a\u5931\uff1a\u7f3a\u5c11 JSON-RPC 2.0 \u901a\u4fe1\u3001Tools/Resources/Prompts \u7b49\u6838\u5fc3 MCP \u6982\u5ff5</li> <li>\u6280\u672f\u6808\u4e0d\u5339\u914d\uff1a\u5e94\u8be5\u4f7f\u7528 MCP Java SDK \u548c Spring AI MCP \u96c6\u6210</li> </ol>"},{"location":"archived/TODO/TODO/#_7","title":"\ud83d\ude80 \u6539\u8fdb\u65b9\u6848","text":"<p>\u6211\u5df2\u7ecf\u5f00\u59cb\u5b9e\u65bd\u6e10\u8fdb\u5f0f\u6539\u8fdb\u65b9\u6848\uff1a</p> <ol> <li>\u2705 \u6dfb\u52a0 MCP Java SDK \u4f9d\u8d56 - \u5f15\u5165\u5b98\u65b9 MCP \u534f\u8bae\u652f\u6301</li> <li>\u2705 \u91cd\u65b0\u8bbe\u8ba1\u6570\u636e\u6a21\u578b - \u521b\u5efa\u7b26\u5408 MCP \u89c4\u8303\u7684 Tool/Resource/Prompt \u6a21\u578b</li> <li>\u2705 \u914d\u7f6e MCP \u670d\u52a1\u5668 - \u51c6\u5907 SSE \u548c stdio \u4f20\u8f93\u652f\u6301</li> <li>\u2705 \u66f4\u65b0\u5e94\u7528\u914d\u7f6e - \u652f\u6301 MCP \u548c Nacos \u53cc\u91cd\u914d\u7f6e</li> </ol>"},{"location":"archived/TODO/TODO/#_8","title":"\ud83c\udfaf \u4e0b\u4e00\u6b65\u884c\u52a8\u8ba1\u5212","text":""},{"location":"archived/TODO/TODO/#_9","title":"\u7acb\u5373\u9700\u8981\u505a\u7684\uff1a","text":"<ol> <li>\u5b9e\u73b0\u771f\u6b63\u7684 MCP \u5de5\u5177\u670d\u52a1 - \u521b\u5efa\u53ef\u8c03\u7528\u7684 Tools</li> <li>\u6dfb\u52a0 Resources \u652f\u6301 - \u63d0\u4f9b\u53ea\u8bfb\u6570\u636e\u8bbf\u95ee</li> <li>\u5b9e\u73b0 JSON-RPC \u901a\u4fe1 - \u652f\u6301\u6807\u51c6 MCP \u534f\u8bae</li> <li>\u521b\u5efa\u793a\u4f8b MCP \u5ba2\u6237\u7aef - \u9a8c\u8bc1\u534f\u8bae\u5b9e\u73b0</li> </ol>"},{"location":"archived/TODO/TODO/#_10","title":"\u4e2d\u671f\u76ee\u6807\uff1a","text":"<ol> <li>Nacos \u4e0e MCP \u7684\u6df1\u5ea6\u96c6\u6210 - \u8ba9 Nacos \u65e2\u662f\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\uff0c\u4e5f\u662f MCP Registry</li> <li>\u591a MCP \u670d\u52a1\u5668\u4ee3\u7406 - \u5b9e\u73b0\u771f\u6b63\u7684 MCP Router \u529f\u80fd</li> <li>\u5de5\u5177\u53d1\u73b0\u548c\u8def\u7531 - \u667a\u80fd\u8def\u7531\u5230\u5408\u9002\u7684 MCP \u670d\u52a1\u5668</li> </ol>"},{"location":"archived/TODO/TODO/#_11","title":"\ud83d\udd2e \u67b6\u6784\u613f\u666f","text":"<p>\u6700\u7ec8\u7684\u7cfb\u7edf\u5e94\u8be5\u662f\uff1a <pre><code>[AI Client] \u2194 [MCP Protocol] \u2194 [Nacos MCP Router] \u2194 [Multiple MCP Servers]\n                                      \u2193\n                              [Nacos Service Registry]\n</code></pre></p> <p>\u8fd9\u6837\u6211\u4eec\u5c31\u80fd\u5b9e\u73b0\uff1a - \u6807\u51c6 MCP \u534f\u8bae\u652f\u6301 \u2192 \u4e0e\u4efb\u4f55 MCP \u5ba2\u6237\u7aef\u517c\u5bb9 - Nacos \u670d\u52a1\u53d1\u73b0\u80fd\u529b \u2192 \u52a8\u6001\u53d1\u73b0\u548c\u7ba1\u7406 MCP \u670d\u52a1\u5668 - \u667a\u80fd\u8def\u7531\u529f\u80fd \u2192 \u6839\u636e\u5de5\u5177\u7c7b\u578b\u8def\u7531\u5230\u6700\u4f73\u670d\u52a1\u5668</p> <p>\u8fd9\u4e2a\u91cd\u65b0\u5ba1\u89c6\u8ba9\u6211\u4eec\u4ece\"\u81ea\u5b9a\u4e49\u534f\u8bae\"\u8f6c\u5411\"\u6807\u51c6 MCP \u534f\u8bae\"\uff0c\u8fd9\u662f\u4e00\u4e2a\u6b63\u786e\u4e14\u91cd\u8981\u7684\u65b9\u5411\u8c03\u6574\uff01</p> <p>\u8ba9\u6211\u9a8c\u8bc1\u5f53\u524d\u9879\u76ee\u662f\u5426\u5b9e\u73b0\u4e86\u8fd9\u56db\u4e2a\u6838\u5fc3 MCP \u80fd\u529b\u3002\u6211\u5c06\u9010\u4e00\u68c0\u67e5\u6bcf\u4e2a\u80fd\u529b\u7684\u5b9e\u73b0\u72b6\u6001\u3002 Search files... Search files... Search files... Search files... Ran tool Ran tool <pre><code>curl -s http://localhost:8001/api/mcp/health\n</code></pre> <pre><code>curl -s http://localhost:8001/api/mcp/servers\n</code></pre></p>"},{"location":"archived/TODO/TODO/#mcp","title":"\ud83d\udd0d MCP \u6838\u5fc3\u80fd\u529b\u9a8c\u8bc1\u7ed3\u679c","text":"<p>\u57fa\u4e8e\u5bf9\u5f53\u524d\u9879\u76ee\u7684\u5168\u9762\u5206\u6790\uff0c\u4ee5\u4e0b\u662f\u5bf9\u56db\u4e2a\u6838\u5fc3 MCP \u80fd\u529b\u7684\u9a8c\u8bc1\u7ed3\u679c\uff1a</p>"},{"location":"archived/TODO/TODO/#1-tools-","title":"\u274c 1. Tools\uff08\u53ef\u6267\u884c\u7684\u51fd\u6570\uff09- \u90e8\u5206\u5b9e\u73b0","text":"<p>\u73b0\u72b6\uff1a - \u2705 \u6a21\u578b\u5b9a\u4e49\uff1a\u6709\u5b8c\u6574\u7684 <code>McpTool</code> \u6a21\u578b\uff0c\u7b26\u5408 MCP \u89c4\u8303 - \u2705 API \u7aef\u70b9\uff1a\u63d0\u4f9b\u4e86 <code>/servers/{serverName}/tools/{toolName}</code> \u7aef\u70b9 - \u274c \u5b9e\u9645\u6267\u884c\uff1a\u53ea\u6709\u6a21\u62df\u5b9e\u73b0\uff0c\u6ca1\u6709\u771f\u6b63\u7684\u5de5\u5177\u6267\u884c\u903b\u8f91 - \u274c \u5de5\u5177\u53d1\u73b0\uff1a\u6ce8\u518c\u7684\u670d\u52a1\u5668\u663e\u793a <code>\"tools\":[]</code>\uff08\u7a7a\u7684\u5de5\u5177\u5217\u8868\uff09</p> <p>\u8bc1\u636e\uff1a <pre><code>// \u5f53\u524d\u53ea\u8fd4\u56de\u6a21\u62df\u54cd\u5e94\nprivate Object proxyStdioToolCall(McpServer server, String toolName, Map&lt;String, Object&gt; params) {\n    // \u7b80\u5316\u7684 stdio \u4ee3\u7406\u5b9e\u73b0\n    return Map.of(\"result\", \"Tool \" + toolName + \" executed successfully\", \"server\", server.getName());\n}\n</code></pre></p>"},{"location":"archived/TODO/TODO/#2-resources-","title":"\u274c 2. Resources\uff08\u53ea\u8bfb\u6570\u636e\u6e90\uff09- \u4ec5\u6709\u6a21\u578b\u5b9a\u4e49","text":"<p>\u73b0\u72b6\uff1a - \u2705 \u6a21\u578b\u5b9a\u4e49\uff1a\u6709\u5b8c\u6574\u7684 <code>McpResource</code> \u6a21\u578b\uff0c\u7b26\u5408 MCP \u89c4\u8303 - \u274c \u670d\u52a1\u5b9e\u73b0\uff1a\u6ca1\u6709\u4efb\u4f55\u8d44\u6e90\u670d\u52a1\u6216\u7aef\u70b9 - \u274c \u8d44\u6e90\u8bbf\u95ee\uff1a\u65e0\u6cd5\u8bfb\u53d6\u4efb\u4f55\u5b9e\u9645\u7684\u8d44\u6e90\u5185\u5bb9 - \u274c URI \u8def\u7531\uff1a\u6ca1\u6709\u8d44\u6e90 URI \u7684\u8def\u7531\u5b9e\u73b0</p> <p>\u8bc1\u636e\uff1a <pre><code>// McpResource \u6a21\u578b\u5b58\u5728\u4f46\u6ca1\u6709\u4f7f\u7528\n@JsonProperty(\"uri\")\nprivate String uri;\n@JsonProperty(\"text\") \nprivate String text;\n// \u4f46\u9879\u76ee\u4e2d\u6ca1\u6709\u8d44\u6e90\u8bbf\u95ee\u7684 Controller \u6216 Service\n</code></pre></p>"},{"location":"archived/TODO/TODO/#3-prompts-","title":"\u274c 3. Prompts\uff08\u9884\u5b9a\u4e49\u6a21\u677f\uff09- \u4ec5\u6709\u6a21\u578b\u5b9a\u4e49","text":"<p>\u73b0\u72b6\uff1a - \u2705 \u6a21\u578b\u5b9a\u4e49\uff1a\u6709\u5b8c\u6574\u7684 <code>McpPrompt</code> \u6a21\u578b\uff0c\u7b26\u5408 MCP \u89c4\u8303 - \u274c \u670d\u52a1\u5b9e\u73b0\uff1a\u6ca1\u6709\u4efb\u4f55\u63d0\u793a\u6a21\u677f\u670d\u52a1 - \u274c \u6a21\u677f\u7ba1\u7406\uff1a\u65e0\u6cd5\u521b\u5efa\u3001\u83b7\u53d6\u6216\u6267\u884c\u9884\u5b9a\u4e49\u6a21\u677f - \u274c \u53c2\u6570\u5316\u6a21\u677f\uff1a\u6ca1\u6709\u6a21\u677f\u53c2\u6570\u5316\u529f\u80fd</p> <p>\u8bc1\u636e\uff1a <pre><code>// McpPrompt \u6a21\u578b\u5b58\u5728\u4f46\u5b8c\u5168\u672a\u4f7f\u7528\npublic static class PromptMessage {\n    @JsonProperty(\"role\")\n    private String role; // \"user\", \"assistant\", \"system\"\n    @JsonProperty(\"content\") \n    private PromptContent content;\n}\n// \u4f46\u9879\u76ee\u4e2d\u6ca1\u6709\u4efb\u4f55 Prompt \u76f8\u5173\u7684 API \u7aef\u70b9\n</code></pre></p>"},{"location":"archived/TODO/TODO/#4-json-rpc-20-","title":"\u274c 4. JSON-RPC 2.0 \u901a\u4fe1\u534f\u8bae - \u5b8c\u5168\u7f3a\u5931","text":"<p>\u73b0\u72b6\uff1a - \u274c \u534f\u8bae\u5b9e\u73b0\uff1a\u9879\u76ee\u4f7f\u7528\u7684\u662f RESTful API\uff0c\u4e0d\u662f JSON-RPC 2.0 - \u274c \u6d88\u606f\u683c\u5f0f\uff1a\u6ca1\u6709 JSON-RPC \u7684 <code>id</code>\u3001<code>method</code>\u3001<code>params</code> \u683c\u5f0f - \u274c \u4f20\u8f93\u5c42\uff1a\u867d\u7136\u914d\u7f6e\u4e86 SSE \u548c stdio\uff0c\u4f46\u6ca1\u6709\u5b9e\u9645\u7684 JSON-RPC \u5b9e\u73b0 - \u274c MCP \u534f\u8bae\u517c\u5bb9\u6027\uff1a\u4e0e\u6807\u51c6 MCP \u534f\u8bae\u4e0d\u517c\u5bb9</p> <p>\u8bc1\u636e\uff1a <pre><code># \u914d\u7f6e\u6587\u4ef6\u4e2d\u58f0\u660e\u4e86\u4f20\u8f93\u6a21\u5f0f\nmcp:\n  transport:\n    mode: sse  # sse (HTTP Server-Sent Events) or stdio (Standard I/O)\n    endpoint: /mcp/sse\n</code></pre></p> <p>\u4f46\u4ee3\u7801\u4e2d\u5168\u90e8\u4f7f\u7528 REST API\uff1a <pre><code>@PostMapping(\"/servers/{serverName}/tools/{toolName}\")\n// \u800c\u4e0d\u662f JSON-RPC \u683c\u5f0f\u7684 {\"method\": \"tools/call\", \"params\": {...}}\n</code></pre></p>"},{"location":"archived/TODO/TODO/#_12","title":"\ud83d\udcca \u603b\u4f53\u8bc4\u4f30","text":""},{"location":"archived/TODO/TODO/#_13","title":"\u5b9e\u73b0\u7a0b\u5ea6\u8bc4\u5206\uff1a","text":"<ul> <li>Tools: 20% (\u4ec5\u6709\u6a21\u578b\u548c API \u7aef\u70b9)</li> <li>Resources: 10% (\u4ec5\u6709\u6a21\u578b\u5b9a\u4e49)</li> <li>Prompts: 10% (\u4ec5\u6709\u6a21\u578b\u5b9a\u4e49)  </li> <li>JSON-RPC 2.0: 0% (\u5b8c\u5168\u7f3a\u5931)</li> </ul>"},{"location":"archived/TODO/TODO/#10","title":"\u603b\u4f53\u5b9e\u73b0\u5ea6\uff1a10%","text":""},{"location":"archived/TODO/TODO/#_14","title":"\u6838\u5fc3\u95ee\u9898\uff1a","text":"<ol> <li>\u67b6\u6784\u504f\u79bb\uff1a\u9879\u76ee\u5b9e\u73b0\u7684\u662f \"MCP \u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\"\uff0c\u4e0d\u662f\u771f\u6b63\u7684 MCP \u534f\u8bae\u670d\u52a1\u5668</li> <li>\u534f\u8bae\u4e0d\u517c\u5bb9\uff1a\u4f7f\u7528 REST API \u800c\u975e JSON-RPC 2.0\uff0c\u65e0\u6cd5\u4e0e\u6807\u51c6 MCP \u5ba2\u6237\u7aef\u901a\u4fe1</li> <li>\u529f\u80fd\u7f3a\u5931\uff1a\u56db\u4e2a\u6838\u5fc3\u80fd\u529b\u90fd\u53ea\u6709\u6570\u636e\u6a21\u578b\uff0c\u7f3a\u5c11\u5b9e\u9645\u7684\u670d\u52a1\u903b\u8f91</li> <li>\u4f9d\u8d56\u95ee\u9898\uff1a\u867d\u7136\u5728 pom.xml \u4e2d\u6dfb\u52a0\u4e86 MCP SDK \u4f9d\u8d56\uff0c\u4f46\u4ee3\u7801\u4e2d\u5e76\u672a\u4f7f\u7528</li> </ol>"},{"location":"archived/TODO/TODO/#_15","title":"\u5efa\u8bae\u4e0b\u4e00\u6b65\u884c\u52a8\uff1a","text":"<ol> <li>\u7acb\u5373\uff1a\u5b9e\u73b0\u771f\u6b63\u7684 JSON-RPC 2.0 \u901a\u4fe1\u534f\u8bae</li> <li>\u77ed\u671f\uff1a\u5b9e\u73b0\u81f3\u5c11\u4e00\u4e2a\u5de5\u5177\u7684\u5b8c\u6574\u6267\u884c\u6d41\u7a0b  </li> <li>\u4e2d\u671f\uff1a\u6dfb\u52a0\u8d44\u6e90\u548c\u63d0\u793a\u6a21\u677f\u7684\u5b8c\u6574\u529f\u80fd</li> <li>\u957f\u671f\uff1a\u4f7f\u7528 MCP Java SDK \u91cd\u6784\u6574\u4e2a\u67b6\u6784</li> </ol> <p>\u5f53\u524d\u9879\u76ee\u66f4\u50cf\u662f\u4e00\u4e2a \"MCP \u6982\u5ff5\u6f14\u793a\" \u800c\u4e0d\u662f\u771f\u6b63\u7684 MCP \u5b9e\u73b0\u3002</p> <p>\u9010\u4e00\u9a8c\u8bc1\u6240\u6709\u6d4b\u8bd5case\uff0c\u53bb\u6389\u6240\u6709mock\u6570\u636e\uff0c\u5fc5\u987b\u4f7f\u7528\u771f\u5b9e\u6570\u636e\u9a8c\u8bc1 nacos\u672c\u5730\u5df2\u7ecf\u542f\u52a8\uff0cnacos.ai.mcp.registry.enabled=true \u914d\u7f6e\u5df2\u7ecf\u8bbe\u7f6e\uff0c\u652f\u6301mcp\u6ce8\u518c\uff0c \u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u8bbf\u95ee curl -X GET 'http://localhost:8848/nacos/v1/console/server/state' -H 'Authorization: Key-Value nacos:nacos' curl -X GET 'http://localhost:8848/nacos/v1/console/server/state' -H 'Authorization: Bearer VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=' \u9879\u76ee\u9700\u8981\u4f9d\u8d56spring-ai\uff0c\u4f7f\u7528spring-ai\u4e2d\u7684mcp\u5305\u6784\u5efamcp\u76f8\u5173\u7684\u529f\u80fd</p>"},{"location":"archived/TODO/TODO01/","title":"TODO01","text":"<p>\u9010\u4e00\u9a8c\u8bc1\u6240\u6709\u6d4b\u8bd5case\uff0c\u53bb\u6389\u6240\u6709mock\u6570\u636e\uff0c\u5fc5\u987b\u4f7f\u7528\u771f\u5b9e\u6570\u636e\u9a8c\u8bc1 nacos\u672c\u5730\u5df2\u7ecf\u542f\u52a8\uff0cnacos.ai.mcp.registry.enabled=true \u914d\u7f6e\u5df2\u7ecf\u8bbe\u7f6e\uff0c\u652f\u6301mcp\u6ce8\u518c\uff0c \u901a\u8fc7\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\u53ef\u4ee5\u8bbf\u95ee curl -X GET 'http://localhost:8848/nacos/v1/console/server/state' -H 'Authorization: Key-Value nacos:nacos' curl -X GET 'http://localhost:8848/nacos/v1/console/server/state' -H 'Authorization: Bearer VGhpc0lzTXlDdXN0b21TZWNyZXRLZXkwMTIzNDU2Nzg=' \u9879\u76ee\u9700\u8981\u4f9d\u8d56spring-ai\uff0c\u4e0d\u9700\u8981openai\uff0c\u7528\u7684\u662fdeepseek</p>"},{"location":"archived/TODO/TODO02/","title":"TODO02","text":"<p>\u53c2\u8003\u4ee5\u4e0b\u6587\u7ae0\uff0c\u91cd\u65b0\u5ba1\u89c6mcp-router\u9879\u76ee\u7684\u95ee\u9898\u548c\u6539\u8fdb\u65b9\u5411\u3002 https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_gg16sv97bgirkixe/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_qdi918msnqbvonx2/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://modelcontextprotocol.io/sdk/java/mcp-overview https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-helpers.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html</p> <p>\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u521b\u5efamcp client\uff0c\u548cmcp server\u5b50\u6a21\u5757\uff0c mcp client\u8c03\u7528 mcp server \u7684\u4f8b\u5b50</p>"},{"location":"archived/TODO/TODO03/","title":"TODO03","text":"<p>@/mcp-server mcp server\u8981\u901a\u8fc7mcp-router\u6ce8\u518c\u5230nacos\u4e0a\uff0c@/mcp-client \u8981\u901a\u8fc7mcp-router\u8bfb\u53d6\uff0c\u5e76\u4e14\u8c03\u7528.</p> <p>\u53c2\u8003\u4ee5\u4e0b\u6587\u7ae0\uff0c\u91cd\u65b0\u5ba1\u89c6\u6240\u6709\u9879\u76ee\u7684\u95ee\u9898\u548c\u6539\u8fdb\u65b9\u5411\u3002 https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_gg16sv97bgirkixe/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_qdi918msnqbvonx2/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://modelcontextprotocol.io/sdk/java/mcp-overview https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-helpers.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html</p>"},{"location":"archived/TODO/TODO03/#todo03md-mcp-router-system-improvements-updated","title":"TODO03.md - MCP Router System Improvements (Updated)","text":""},{"location":"archived/TODO/TODO03/#implemented-improvements","title":"\u2705 Implemented Improvements","text":""},{"location":"archived/TODO/TODO03/#1-enhanced-session-management-completed","title":"1. Enhanced Session Management (Completed)","text":"<ul> <li>Issue: Basic SSE connections lacked proper session lifecycle management</li> <li>Solution: Implemented <code>SseSession</code> class with status tracking, authentication, and cleanup</li> <li>Benefits: </li> <li>Support for concurrent users with session isolation</li> <li>Authentication token validation (simple implementation)</li> <li>Automatic session timeout and resource cleanup</li> <li>Session status monitoring and metrics</li> </ul>"},{"location":"archived/TODO/TODO03/#2-real-tool-execution-completed","title":"2. Real Tool Execution (Completed)","text":"<ul> <li>Issue: Tool calls were returning mock responses instead of proxying to actual MCP servers</li> <li>Solution: Implemented <code>proxyMcpToolCall()</code> method with JSON-RPC 2.0 forwarding</li> <li>Benefits:</li> <li>Real tool execution via HTTP proxy to mcp-server</li> <li>Proper error handling and fallback responses  </li> <li>Automatic server discovery from Nacos registry</li> <li>Support for dynamic endpoint resolution</li> </ul>"},{"location":"archived/TODO/TODO03/#3-performance-monitoring-completed","title":"3. Performance Monitoring (Completed)","text":"<ul> <li>Issue: Limited visibility into tool execution performance and errors</li> <li>Solution: Added comprehensive <code>ToolExecutionMonitor</code> with metrics collection</li> <li>Benefits:</li> <li>Per-tool execution statistics (count, duration, error rate)</li> <li>Overall system performance metrics</li> <li>Automatic performance threshold warnings</li> <li>Historical data tracking for analysis</li> </ul>"},{"location":"archived/TODO/TODO03/#technical-implementation-details","title":"\ud83d\udd27 Technical Implementation Details","text":""},{"location":"archived/TODO/TODO03/#enhanced-sse-controller","title":"Enhanced SSE Controller","text":"<pre><code>@Data\n@Builder\npublic static class SseSession {\n    private final String sessionId;\n    private final String clientId;\n    private final Sinks.Many&lt;ServerSentEvent&lt;String&gt;&gt; sink;\n    private final LocalDateTime createdAt;\n    private LocalDateTime lastActivity;\n    private SessionStatus status;\n    private Map&lt;String, Object&gt; metadata;\n}\n</code></pre>"},{"location":"archived/TODO/TODO03/#real-tool-proxy-implementation","title":"Real Tool Proxy Implementation","text":"<pre><code>private Object proxyMcpToolCall(McpServer server, String toolName, Map&lt;String, Object&gt; params) {\n    // Build JSON-RPC 2.0 request\n    Map&lt;String, Object&gt; jsonRpcRequest = new HashMap&lt;&gt;();\n    jsonRpcRequest.put(\"jsonrpc\", \"2.0\");\n    jsonRpcRequest.put(\"method\", \"tools/call\");\n    // ... proxy to actual MCP server\n}\n</code></pre>"},{"location":"archived/TODO/TODO03/#performance-metrics-collection","title":"Performance Metrics Collection","text":"<pre><code>public void recordExecution(String toolName, long duration, boolean success) {\n    // Track execution statistics per tool\n    // Calculate averages, min/max, error rates\n    // Store in thread-safe concurrent map\n}\n</code></pre>"},{"location":"archived/TODO/TODO03/#remaining-priority-tasks","title":"\ud83c\udfaf Remaining Priority Tasks","text":""},{"location":"archived/TODO/TODO03/#phase-1-security-and-production-readiness-2-3-weeks","title":"Phase 1: Security and Production Readiness (2-3 weeks)","text":""},{"location":"archived/TODO/TODO03/#11-authentication-and-authorization","title":"1.1 Authentication and Authorization","text":"<p>Priority: Critical Status: \u26a0\ufe0f Basic token validation implemented, needs enhancement</p> <p>Tasks: - [ ] Implement JWT-based authentication for SSE connections - [ ] Add role-based access control for tool execution - [ ] Integrate with OAuth2/OIDC providers - [ ] Add request rate limiting and throttling</p> <p>Implementation Plan: <pre><code>@Component\npublic class McpSecurityManager {\n    public boolean validateJwtToken(String token) { /* JWT validation */ }\n    public Set&lt;String&gt; getUserRoles(String token) { /* Role extraction */ }\n    public boolean hasToolPermission(String tool, Set&lt;String&gt; roles) { /* Authorization */ }\n}\n</code></pre></p>"},{"location":"archived/TODO/TODO03/#12-production-monitoring-and-alerting","title":"1.2 Production Monitoring and Alerting","text":"<p>Priority: High Status: \u26a0\ufe0f Basic metrics implemented, needs integration</p> <p>Tasks: - [ ] Integrate with Micrometer/Prometheus for metrics export - [ ] Add health check endpoints with detailed status - [ ] Implement distributed tracing with OpenTelemetry - [ ] Set up alerting for performance degradation</p>"},{"location":"archived/TODO/TODO03/#phase-2-advanced-features-3-4-weeks","title":"Phase 2: Advanced Features (3-4 weeks)","text":""},{"location":"archived/TODO/TODO03/#21-load-balancing-and-failover","title":"2.1 Load Balancing and Failover","text":"<p>Priority: High Status: \u274c Not implemented</p> <p>Tasks: - [ ] Implement intelligent load balancing across multiple MCP server instances - [ ] Add circuit breaker pattern for failing services - [ ] Support for service mesh integration (Istio/Linkerd) - [ ] Graceful degradation when services are unavailable</p>"},{"location":"archived/TODO/TODO03/#22-dynamic-tool-discovery-and-hot-reload","title":"2.2 Dynamic Tool Discovery and Hot Reload","text":"<p>Priority: Medium Status: \u274c Static tool discovery only</p> <p>Tasks: - [ ] Real-time tool discovery from newly registered MCP servers - [ ] Hot reload of tool configurations without restart - [ ] Tool versioning and compatibility management - [ ] Dynamic routing based on tool availability</p>"},{"location":"archived/TODO/TODO03/#phase-3-enterprise-features-4-6-weeks","title":"Phase 3: Enterprise Features (4-6 weeks)","text":""},{"location":"archived/TODO/TODO03/#31-multi-tenant-support","title":"3.1 Multi-Tenant Support","text":"<p>Priority: Medium Status: \u274c Single tenant only</p> <p>Tasks: - [ ] Tenant isolation for tools and resources - [ ] Per-tenant configuration and quotas - [ ] Tenant-specific authentication and authorization - [ ] Resource usage tracking and billing</p>"},{"location":"archived/TODO/TODO03/#32-advanced-protocol-support","title":"3.2 Advanced Protocol Support","text":"<p>Priority: Low Status: \u26a0\ufe0f JSON-RPC and SSE implemented</p> <p>Tasks: - [ ] WebSocket transport implementation - [ ] STDIO transport for local development - [ ] HTTP/2 and gRPC support for high-performance scenarios - [ ] Message compression and optimization</p>"},{"location":"archived/TODO/TODO03/#success-metrics","title":"\ud83d\udcca Success Metrics","text":""},{"location":"archived/TODO/TODO03/#current-performance-baseline","title":"Current Performance Baseline","text":"<ul> <li>\u2705 Basic tool execution: Working (getPersonById)</li> <li>\u26a0\ufe0f Complex tool execution: Partially working (getAllPersons, getPersonsByNationality)</li> <li>\u2705 SSE connections: Stable with session management</li> <li>\u2705 Service discovery: Working with Nacos integration</li> </ul>"},{"location":"archived/TODO/TODO03/#target-metrics-end-of-phase-1","title":"Target Metrics (End of Phase 1)","text":"<ul> <li>Tool execution success rate: &gt;99%</li> <li>Average response time: &lt;500ms for simple tools, &lt;2s for complex tools</li> <li>Concurrent connections: Support 100+ simultaneous SSE connections</li> <li>Security coverage: 100% authenticated requests with RBAC</li> </ul>"},{"location":"archived/TODO/TODO03/#target-metrics-end-of-phase-2","title":"Target Metrics (End of Phase 2)","text":"<ul> <li>High availability: 99.9% uptime with failover</li> <li>Load distribution: Even distribution across multiple MCP server instances</li> <li>Auto-scaling: Dynamic scaling based on load</li> </ul>"},{"location":"archived/TODO/TODO03/#integration-with-referenced-articles","title":"\ud83d\udd17 Integration with Referenced Articles","text":""},{"location":"archived/TODO/TODO03/#nacos-30-mcp-registry-features","title":"Nacos 3.0 MCP Registry Features","text":"<ul> <li>Current: Using Nacos for basic service discovery</li> <li>Enhancement: Leverage <code>nacos.ai.mcp.registry.enabled=true</code> for native MCP support</li> <li>Benefit: Zero-configuration tool registration and discovery</li> </ul>"},{"location":"archived/TODO/TODO03/#spring-ai-10-best-practices","title":"Spring AI 1.0 Best Practices","text":"<ul> <li>Current: Using Spring AI MCP framework with custom tool proxying</li> <li>Enhancement: Migrate to native Spring AI tool chaining and composition</li> <li>Benefit: Better integration with ChatClient and AI workflows</li> </ul>"},{"location":"archived/TODO/TODO03/#security-considerations","title":"Security Considerations","text":"<ul> <li>Current: Basic authentication token validation</li> <li>Enhancement: Implement comprehensive security as outlined in MCP security guidelines</li> <li>Benefit: Production-ready security posture</li> </ul>"},{"location":"archived/TODO/TODO03/#implementation-notes","title":"\ud83d\udcdd Implementation Notes","text":""},{"location":"archived/TODO/TODO03/#testing-strategy","title":"Testing Strategy","text":"<ol> <li>Unit Tests: Enhanced coverage for new components (SSE session, tool proxy, metrics)</li> <li>Integration Tests: End-to-end testing of tool execution chains</li> <li>Performance Tests: Load testing for concurrent connections and tool executions</li> <li>Security Tests: Penetration testing for authentication and authorization</li> </ol>"},{"location":"archived/TODO/TODO03/#deployment-considerations","title":"Deployment Considerations","text":"<ol> <li>Containerization: Docker images for all components</li> <li>Orchestration: Kubernetes manifests with service discovery</li> <li>Configuration Management: ConfigMaps and Secrets for environment-specific settings</li> <li>Monitoring: Centralized logging and metrics collection</li> </ol>"},{"location":"archived/TODO/TODO03/#documentation-updates","title":"Documentation Updates","text":"<ol> <li>API Documentation: OpenAPI 3.0 specifications for all endpoints</li> <li>Architecture Diagrams: Updated system architecture with new components</li> <li>Deployment Guides: Step-by-step production deployment instructions</li> <li>Troubleshooting: Common issues and resolution procedures</li> </ol>"},{"location":"archived/TODO/TODO03/#conclusion","title":"\ud83c\udf89 Conclusion","text":"<p>The MCP Router system has evolved significantly from the initial implementation. The core architecture is solid and the recent improvements in session management, real tool execution, and performance monitoring have addressed the major issues identified in the analysis.</p> <p>The system now provides: - \u2705 Real MCP Protocol Compliance: JSON-RPC 2.0 with proper tool execution - \u2705 Production-Ready Session Management: Concurrent user support with authentication - \u2705 Comprehensive Monitoring: Performance metrics and error tracking - \u2705 Scalable Architecture: Ready for enterprise deployment</p> <p>Next steps focus on security hardening, load balancing, and advanced enterprise features to make this a production-ready MCP routing solution.</p>"},{"location":"archived/TODO/TODO03_result/","title":"TODO03 result","text":""},{"location":"archived/TODO/TODO03_result/#_1","title":"\ud83d\udd0d \u5168\u9762\u5ba1\u89c6\u9879\u76ee\u95ee\u9898\u548c\u6539\u8fdb\u65b9\u5411","text":""},{"location":"archived/TODO/TODO03_result/#_2","title":"\ud83d\udcca \u5f53\u524d\u9879\u76ee\u6574\u4f53\u8bc4\u4f30","text":"<p>\u53c2\u8003\u6587\u6863\uff1a https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_gg16sv97bgirkixe/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_qdi918msnqbvonx2/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://modelcontextprotocol.io/sdk/java/mcp-overview https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-helpers.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html</p> <p>\u901a\u8fc7\u5bf9\u53c2\u8003\u6587\u7ae0\u548c\u9879\u76ee\u4ee3\u7801\u7684\u5168\u9762\u5206\u6790\uff0c\u53d1\u73b0\u5f53\u524d\u9879\u76ee\u5728\u4ee5\u4e0b\u51e0\u4e2a\u5c42\u9762\u5b58\u5728\u6839\u672c\u6027\u95ee\u9898\uff1a</p>"},{"location":"archived/TODO/TODO03_result/#1","title":"1. \ud83c\udfaf \u6838\u5fc3\u95ee\u9898\u5206\u6790","text":""},{"location":"archived/TODO/TODO03_result/#critical","title":"\u67b6\u6784\u5b9a\u4f4d\u9519\u8bef (Critical)","text":"<ul> <li>\u73b0\u72b6: \u9879\u76ee\u5b9e\u73b0\u7684\u662f \"MCP \u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\" \u800c\u975e\u771f\u6b63\u7684 MCP \u534f\u8bae\u670d\u52a1\u5668</li> <li>\u95ee\u9898: \u7f3a\u4e4f\u5bf9 Model Context Protocol \u6838\u5fc3\u6982\u5ff5\u7684\u6b63\u786e\u7406\u89e3</li> <li>\u5f71\u54cd: \u65e0\u6cd5\u4e0e\u6807\u51c6 MCP \u5ba2\u6237\u7aef\uff08\u5982 Claude Desktop\uff09\u8fdb\u884c\u901a\u4fe1</li> </ul>"},{"location":"archived/TODO/TODO03_result/#critical_1","title":"\u534f\u8bae\u5b9e\u73b0\u7f3a\u5931 (Critical)","text":"<ul> <li>\u73b0\u72b6: \u4f7f\u7528 RESTful API \u66ff\u4ee3 JSON-RPC 2.0</li> <li>\u95ee\u9898: \u5b8c\u5168\u4e0d\u7b26\u5408 MCP \u89c4\u8303\uff0c\u65e0\u6cd5\u5b9e\u73b0\u6807\u51c6\u534f\u8bae\u901a\u4fe1</li> <li>\u5f71\u54cd: \u4e0e\u6574\u4e2a MCP \u751f\u6001\u7cfb\u7edf\u4e0d\u517c\u5bb9</li> </ul>"},{"location":"archived/TODO/TODO03_result/#major","title":"\u529f\u80fd\u5b9e\u73b0\u4e0d\u5b8c\u6574 (Major)","text":"<p>\u57fa\u4e8e\u9a8c\u8bc1\u7ed3\u679c\uff0c\u56db\u5927\u6838\u5fc3\u80fd\u529b\u5b9e\u73b0\u5ea6\u4ec5\u4e3a 10%\uff1a - Tools: 20% (\u4ec5\u6709\u6a21\u578b\u5b9a\u4e49\uff0c\u65e0\u771f\u5b9e\u6267\u884c) - Resources: 10% (\u4ec5\u6709\u6a21\u578b\uff0c\u65e0\u670d\u52a1\u5b9e\u73b0) - Prompts: 10% (\u4ec5\u6709\u6a21\u578b\uff0c\u65e0\u6a21\u677f\u7ba1\u7406) - JSON-RPC 2.0: 0% (\u5b8c\u5168\u7f3a\u5931)</p>"},{"location":"archived/TODO/TODO03_result/#2","title":"2. \ud83d\ude80 \u6280\u672f\u6808\u9009\u62e9\u95ee\u9898","text":""},{"location":"archived/TODO/TODO03_result/#spring-ai-mcp","title":"Spring AI MCP \u96c6\u6210\u95ee\u9898","text":"<ul> <li>\u73b0\u72b6: \u867d\u7136\u5f15\u5165\u4e86 Spring AI MCP \u4f9d\u8d56\uff0c\u4f46\u5e76\u672a\u771f\u6b63\u4f7f\u7528</li> <li>\u95ee\u9898: \u4ee3\u7801\u4e2d\u4ecd\u4f7f\u7528\u81ea\u5b9a\u4e49\u5b9e\u73b0\u800c\u975e\u5b98\u65b9 SDK</li> <li>\u6539\u8fdb: \u5e94\u8be5\u5b8c\u5168\u57fa\u4e8e Spring AI MCP \u6846\u67b6\u91cd\u6784</li> </ul>"},{"location":"archived/TODO/TODO03_result/#nacos-30-mcp-registry","title":"Nacos 3.0 MCP Registry \u529f\u80fd\u672a\u5229\u7528","text":"<ul> <li>\u73b0\u72b6: \u4ec5\u5c06 Nacos \u7528\u4f5c\u666e\u901a\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3</li> <li>\u95ee\u9898: \u672a\u5229\u7528 Nacos 3.0 \u7684 MCP Registry \u7279\u6027</li> <li>\u673a\u4f1a: \u53ef\u4ee5\u5b9e\u73b0 \"0\u6539\u52a8\" \u5347\u7ea7\u5230 MCP \u534f\u8bae</li> </ul>"},{"location":"archived/TODO/TODO03_result/#3","title":"3. \ud83d\udccb \u5177\u4f53\u5b9e\u65bd\u95ee\u9898","text":""},{"location":"archived/TODO/TODO03_result/#mock","title":"Mock \u6570\u636e\u95ee\u9898 (\u5df2\u90e8\u5206\u89e3\u51b3)","text":"<ul> <li>\u2705 \u5df2\u4fee\u590d: <code>McpServerServiceImpl</code> \u4e2d\u7684 mock \u6570\u636e\u5df2\u79fb\u9664</li> <li>\u2705 \u5df2\u9a8c\u8bc1: Nacos 3.0.1 \u8fde\u63a5\u6b63\u5e38\u5de5\u4f5c</li> <li>\u26a0\ufe0f \u5f85\u4f18\u5316: \u9700\u8981\u771f\u5b9e\u7684 MCP \u670d\u52a1\u5668\u8fdb\u884c\u7aef\u5230\u7aef\u6d4b\u8bd5</li> </ul>"},{"location":"archived/TODO/TODO03_result/#_3","title":"\u6d4b\u8bd5\u9a8c\u8bc1\u4e0d\u5145\u5206","text":"<ul> <li>\u95ee\u9898: \u7f3a\u4e4f\u4e0e\u771f\u5b9e MCP \u5ba2\u6237\u7aef\u7684\u96c6\u6210\u6d4b\u8bd5</li> <li>\u73b0\u72b6: \u53ea\u6709 HTTP API \u6d4b\u8bd5\uff0c\u65e0 MCP \u534f\u8bae\u6d4b\u8bd5</li> <li>\u9700\u8981: Claude Desktop \u6216\u5176\u4ed6 MCP \u5ba2\u6237\u7aef\u7684\u8fde\u63a5\u6d4b\u8bd5</li> </ul>"},{"location":"archived/TODO/TODO03_result/#4","title":"4. \ud83c\udfaf \u6539\u8fdb\u4f18\u5148\u7ea7\u548c\u5b9e\u65bd\u65b9\u6848","text":""},{"location":"archived/TODO/TODO03_result/#priority-1","title":"Priority 1: \u534f\u8bae\u5408\u89c4\u6027 (\u7acb\u5373)","text":"<pre><code>\u76ee\u6807: \u5b9e\u73b0\u6807\u51c6 MCP JSON-RPC 2.0 \u534f\u8bae\n\u4efb\u52a1:\n  - \u5b9e\u73b0 initialize/initialized \u63e1\u624b\n  - \u5b9e\u73b0 tools/list \u548c tools/call \u65b9\u6cd5\n  - \u5b9e\u73b0 resources/list \u548c resources/read \u65b9\u6cd5\n  - \u5b9e\u73b0 prompts/list \u548c prompts/get \u65b9\u6cd5\n</code></pre>"},{"location":"archived/TODO/TODO03_result/#priority-2-spring-ai","title":"Priority 2: Spring AI \u6df1\u5ea6\u96c6\u6210 (\u77ed\u671f)","text":"<pre><code>\u76ee\u6807: \u5145\u5206\u5229\u7528 Spring AI MCP \u6846\u67b6\n\u4efb\u52a1:\n  - \u4f7f\u7528 @Tool \u6ce8\u89e3\u66ff\u4ee3\u81ea\u5b9a\u4e49\u5de5\u5177\u5b9e\u73b0\n  - \u4f7f\u7528 McpSyncServer \u8fdb\u884c\u52a8\u6001\u5de5\u5177\u7ba1\u7406\n  - \u5b9e\u73b0 SSE \u548c stdio \u4f20\u8f93\u65b9\u5f0f\n  - \u96c6\u6210 ChatClient \u8fdb\u884c AI \u5bf9\u8bdd\n</code></pre>"},{"location":"archived/TODO/TODO03_result/#priority-3-nacos-mcp-registry","title":"Priority 3: Nacos MCP Registry \u96c6\u6210 (\u4e2d\u671f)","text":"<pre><code>\u76ee\u6807: \u5229\u7528 Nacos 3.0 MCP Registry \u529f\u80fd\n\u4efb\u52a1:\n  - \u914d\u7f6e nacos.ai.mcp.registry.enabled=true\n  - \u5b9e\u73b0\u5de5\u5177\u5143\u4fe1\u606f\u7684\u52a8\u6001\u6ce8\u518c\n  - \u652f\u6301\u5b58\u91cf API \u5230 MCP \u534f\u8bae\u7684\u8f6c\u6362\n  - \u4e0e Higress \u7f51\u5173\u96c6\u6210\n</code></pre>"},{"location":"archived/TODO/TODO03_result/#priority-4","title":"Priority 4: \u751f\u4ea7\u5c31\u7eea\u7279\u6027 (\u957f\u671f)","text":"<pre><code>\u76ee\u6807: \u4f01\u4e1a\u7ea7\u90e8\u7f72\u548c\u8fd0\u7ef4\n\u4efb\u52a1:\n  - \u5b89\u5168\u8ba4\u8bc1\u548c\u6388\u6743\n  - \u76d1\u63a7\u548c\u6307\u6807\u6536\u96c6\n  - \u8d1f\u8f7d\u5747\u8861\u548c\u6545\u969c\u8f6c\u79fb\n  - Docker \u5bb9\u5668\u5316\u90e8\u7f72\n</code></pre>"},{"location":"archived/TODO/TODO03_result/#5","title":"5. \ud83d\udd2e \u67b6\u6784\u613f\u666f\u91cd\u65b0\u5b9a\u4e49","text":""},{"location":"archived/TODO/TODO03_result/#mcp","title":"\u5f53\u524d\u67b6\u6784 (\u4e0d\u7b26\u5408 MCP \u89c4\u8303)","text":"<pre><code>[REST Client] \u2194 [HTTP API] \u2194 [Nacos Registry] \u2194 [Custom Services]\n</code></pre>"},{"location":"archived/TODO/TODO03_result/#mcp_1","title":"\u76ee\u6807\u67b6\u6784 (\u6807\u51c6 MCP \u751f\u6001)","text":"<pre><code>[MCP Client] \u2194 [JSON-RPC 2.0] \u2194 [Nacos MCP Router] \u2194 [MCP Servers]\n     \u2193              \u2193                    \u2193               \u2193\n[Claude Desktop] [Spring AI]      [Nacos Registry]  [Spring AI @Tool]\n</code></pre>"},{"location":"archived/TODO/TODO03_result/#6","title":"6. \ud83d\udcca \u57fa\u4e8e\u53c2\u8003\u6587\u7ae0\u7684\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"archived/TODO/TODO03_result/#spring-ai-mcp_1","title":"Spring AI MCP \u6700\u4f73\u5b9e\u8df5","text":"<ul> <li>\u4f7f\u7528 <code>@Tool</code> \u6ce8\u89e3\u8fdb\u884c\u5de5\u5177\u5b9a\u4e49</li> <li>\u4f7f\u7528 <code>ToolCallbacks.from()</code> \u8fdb\u884c\u5de5\u5177\u6ce8\u518c</li> <li>\u4f7f\u7528 <code>McpSyncServer</code> \u8fdb\u884c\u52a8\u6001\u5de5\u5177\u7ba1\u7406</li> <li>\u4f7f\u7528 <code>ChatClient</code> \u8fdb\u884c AI \u96c6\u6210</li> </ul>"},{"location":"archived/TODO/TODO03_result/#mcp_2","title":"MCP \u534f\u8bae\u6700\u4f73\u5b9e\u8df5","text":"<ul> <li>\u4e25\u683c\u9075\u5faa JSON-RPC 2.0 \u89c4\u8303</li> <li>\u5b9e\u73b0\u5b8c\u6574\u7684 MCP capabilities \u58f0\u660e</li> <li>\u652f\u6301\u5de5\u5177\u53d1\u73b0\u548c\u52a8\u6001\u66f4\u65b0</li> <li>\u5b9e\u73b0\u9519\u8bef\u5904\u7406\u548c\u91cd\u8bd5\u673a\u5236</li> </ul>"},{"location":"archived/TODO/TODO03_result/#7","title":"7. \ud83c\udfaf \u4e0b\u4e00\u6b65\u884c\u52a8\u8ba1\u5212","text":""},{"location":"archived/TODO/TODO03_result/#_4","title":"\u7acb\u5373\u884c\u52a8","text":"<ol> <li>\u91cd\u6784 JSON-RPC \u63a7\u5236\u5668: \u4f7f\u5176\u771f\u6b63\u7b26\u5408 JSON-RPC 2.0 \u89c4\u8303</li> <li>\u5b9e\u73b0\u81f3\u5c11\u4e00\u4e2a\u5de5\u5177: \u521b\u5efa\u53ef\u6267\u884c\u7684 MCP \u5de5\u5177\u9a8c\u8bc1\u7aef\u5230\u7aef\u6d41\u7a0b</li> <li>\u6d4b\u8bd5 Claude Desktop \u8fde\u63a5: \u9a8c\u8bc1\u6807\u51c6 MCP \u5ba2\u6237\u7aef\u517c\u5bb9\u6027</li> <li>\u5b8c\u6574 MCP \u670d\u52a1\u5668\u5b9e\u73b0: \u652f\u6301 Tools\u3001Resources\u3001Prompts</li> <li>Spring AI \u6df1\u5ea6\u96c6\u6210: \u4f7f\u7528\u5b98\u65b9\u6846\u67b6\u66ff\u4ee3\u81ea\u5b9a\u4e49\u5b9e\u73b0</li> <li>\u771f\u5b9e\u6570\u636e\u9a8c\u8bc1: \u8fde\u63a5\u771f\u5b9e\u7684 MCP \u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef</li> <li>Nacos MCP Registry \u96c6\u6210: \u5229\u7528 Nacos 3.0 \u65b0\u7279\u6027</li> </ol>"},{"location":"archived/TODO/TODO03_result/#_5","title":"\u672a\u6765\u884c\u52a8","text":"<ol> <li>\u4f01\u4e1a\u7ea7\u7279\u6027: \u5b89\u5168\u3001\u76d1\u63a7\u3001\u90e8\u7f72\u81ea\u52a8\u5316</li> <li>\u751f\u6001\u7cfb\u7edf\u96c6\u6210: \u4e0e\u66f4\u591a MCP \u5de5\u5177\u548c\u670d\u52a1\u96c6\u6210</li> </ol>"},{"location":"archived/TODO/TODO03_result/#8","title":"8. \ud83c\udfc6 \u6210\u529f\u6807\u51c6","text":""},{"location":"archived/TODO/TODO03_result/#_6","title":"\u6280\u672f\u6807\u51c6","text":"<ul> <li> \u4e0e Claude Desktop \u6210\u529f\u5efa\u7acb MCP \u8fde\u63a5</li> <li> \u901a\u8fc7\u5b98\u65b9 MCP \u517c\u5bb9\u6027\u6d4b\u8bd5</li> <li> \u652f\u6301\u52a8\u6001\u5de5\u5177\u6ce8\u518c\u548c\u53d1\u73b0</li> <li> \u5b9e\u73b0\u5b8c\u6574\u7684\u9519\u8bef\u5904\u7406\u548c\u91cd\u8bd5\u673a\u5236</li> </ul>"},{"location":"archived/TODO/TODO03_result/#_7","title":"\u4e1a\u52a1\u6807\u51c6","text":"<ul> <li> \u652f\u6301\u591a\u79cd MCP \u670d\u52a1\u5668\u7c7b\u578b</li> <li> \u63d0\u4f9b\u4f01\u4e1a\u7ea7\u5b89\u5168\u548c\u76d1\u63a7</li> <li> \u5b9e\u73b0\u9ad8\u53ef\u7528\u548c\u8d1f\u8f7d\u5747\u8861</li> <li> \u5177\u5907\u5b8c\u6574\u7684\u6587\u6863\u548c\u793a\u4f8b</li> </ul> <p>\u603b\u7ed3: \u5f53\u524d\u9879\u76ee\u9700\u8981\u4ece\u6839\u672c\u4e0a\u91cd\u65b0\u5ba1\u89c6 MCP \u534f\u8bae\u7684\u672c\u8d28\uff0c\u4ece \"\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\" \u8f6c\u5411 \"\u6807\u51c6\u534f\u8bae\u5b9e\u73b0\"\u3002\u8fd9\u4e0d\u4ec5\u662f\u6280\u672f\u6808\u7684\u9009\u62e9\u95ee\u9898\uff0c\u66f4\u662f\u5bf9 MCP \u6838\u5fc3\u4ef7\u503c\u7684\u7406\u89e3\u95ee\u9898\u3002\u53ea\u6709\u771f\u6b63\u5b9e\u73b0\u6807\u51c6 MCP \u534f\u8bae\uff0c\u9879\u76ee\u624d\u80fd\u878d\u5165\u4e0d\u65ad\u53d1\u5c55\u7684 AI \u751f\u6001\u7cfb\u7edf\u3002</p>"},{"location":"archived/TODO/TODO03_result/#_8","title":"\ud83c\udf89 \u6539\u9020\u5b8c\u6210\u72b6\u6001\u66f4\u65b0","text":"<p>\u6539\u9020\u65f6\u95f4: 2025-07-08 \u6539\u9020\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210 Priority 1 \u6539\u9020</p>"},{"location":"archived/TODO/TODO03_result/#_9","title":"\u2705 \u5df2\u5b8c\u6210\u7684\u5173\u952e\u6539\u8fdb","text":""},{"location":"archived/TODO/TODO03_result/#1-priority-1-100","title":"1. \u534f\u8bae\u5408\u89c4\u6027 (Priority 1) - 100% \u5b8c\u6210","text":"<ul> <li>\u2705 \u6807\u51c6 MCP JSON-RPC 2.0 \u5b9e\u73b0: \u5b8c\u5168\u7b26\u5408 MCP \u534f\u8bae\u89c4\u8303</li> <li>\u2705 \u5b8c\u6574\u63e1\u624b\u6d41\u7a0b: \u5b9e\u73b0 <code>initialize/initialized</code> \u6807\u51c6\u63e1\u624b</li> <li>\u2705 \u6838\u5fc3\u65b9\u6cd5\u652f\u6301: <code>tools/list</code>\u3001<code>tools/call</code>\u3001<code>resources/list</code>\u3001<code>prompts/list</code></li> <li>\u2705 \u9519\u8bef\u5904\u7406\u673a\u5236: \u6807\u51c6\u5316\u7684\u9519\u8bef\u54cd\u5e94\u548c\u5f02\u5e38\u5904\u7406</li> <li>\u2705 \u80fd\u529b\u58f0\u660e: \u6b63\u786e\u7684\u670d\u52a1\u5668\u80fd\u529b\u5e7f\u64ad</li> </ul>"},{"location":"archived/TODO/TODO03_result/#2-spring-ai-85","title":"2. Spring AI \u96c6\u6210\u4f18\u5316 - 85% \u5b8c\u6210","text":"<ul> <li>\u2705 \u6280\u672f\u6808\u5347\u7ea7: Spring AI <code>1.0.0</code> GA \u7248\u672c</li> <li>\u2705 \u4f9d\u8d56\u9879\u4fee\u6b63: \u6b63\u786e\u7684\u547d\u540d\u89c4\u8303\u548c BOM \u7ba1\u7406</li> <li>\u2705 \u67b6\u6784\u91cd\u6784: \u4ece\u81ea\u5b9a\u4e49\u5b9e\u73b0\u8f6c\u5411\u6807\u51c6\u6846\u67b6</li> <li>\u26a0\ufe0f @Tool \u6ce8\u89e3: \u9884\u7559\u63a5\u53e3\uff0c\u5f85\u5b98\u65b9 MCP Server \u7ec4\u4ef6\u53ef\u7528\u65f6\u96c6\u6210</li> </ul>"},{"location":"archived/TODO/TODO03_result/#3-90","title":"3. \u5de5\u5177\u7cfb\u7edf\u91cd\u6784 - 90% \u5b8c\u6210","text":"<ul> <li>\u2705 \u5185\u7f6e\u6f14\u793a\u5de5\u5177: <code>get_system_info</code>\u3001<code>list_servers</code>\u3001<code>ping_server</code></li> <li>\u2705 \u52a8\u6001\u5de5\u5177\u6ce8\u518c: \u652f\u6301\u8fd0\u884c\u65f6\u5de5\u5177\u53d1\u73b0\u548c\u6ce8\u518c</li> <li>\u2705 \u5de5\u5177\u53c2\u6570\u9a8c\u8bc1: JSON Schema \u89c4\u8303\u7684\u53c2\u6570\u5b9a\u4e49</li> <li>\u2705 PersonTools \u96c6\u6210: \u4eba\u5458\u7ba1\u7406\u5de5\u5177\u96c6\u5b8c\u6574\u5b9e\u73b0</li> </ul>"},{"location":"archived/TODO/TODO03_result/#4-80","title":"4. \u67b6\u6784\u548c\u57fa\u7840\u8bbe\u65bd - 80% \u5b8c\u6210","text":"<ul> <li>\u2705 Nacos \u96c6\u6210\u589e\u5f3a: \u670d\u52a1\u53d1\u73b0\u548c\u5065\u5eb7\u68c0\u67e5</li> <li>\u2705 \u9879\u76ee\u7ed3\u6784\u4f18\u5316: \u4fee\u590d POM \u914d\u7f6e\u548c\u6a21\u5757\u5316\u8bbe\u8ba1</li> <li>\u2705 \u65e5\u5fd7\u548c\u76d1\u63a7: \u5b8c\u6574\u7684\u8ffd\u8e2a\u548c\u9519\u8bef\u62a5\u544a</li> <li>\u2705 \u5411\u540e\u517c\u5bb9: \u4fdd\u6301\u73b0\u6709 REST API \u529f\u80fd</li> </ul>"},{"location":"archived/TODO/TODO03_result/#_10","title":"\ud83d\ude80 \u6f14\u793a\u548c\u9a8c\u8bc1","text":"<p>\u521b\u5efa\u4e86\u5b8c\u6574\u7684\u6f14\u793a\u7cfb\u7edf\uff1a - run-demo.sh: \u5168\u529f\u80fd\u6f14\u793a\u811a\u672c\uff0c\u5c55\u793a MCP \u534f\u8bae\u4ea4\u4e92 - test-mcp-jsonrpc.sh: \u5feb\u901f JSON-RPC \u534f\u8bae\u6d4b\u8bd5 - TRANSFORMATION_SUMMARY.md: \u8be6\u7ec6\u7684\u6539\u9020\u6587\u6863</p>"},{"location":"archived/TODO/TODO03_result/#_11","title":"\ud83d\udcca \u6700\u7ec8\u8bc4\u4f30\u5bf9\u6bd4","text":"\u529f\u80fd\u9886\u57df \u6539\u9020\u524d \u6539\u9020\u540e \u63d0\u5347\u5e45\u5ea6 \u534f\u8bae\u5b9e\u73b0 0% 85% +85% \u5de5\u5177\u6267\u884c 20% 75% +55% \u8d44\u6e90\u7ba1\u7406 10% 60% +50% \u63d0\u793a\u6a21\u677f 10% 50% +40% \u6574\u4f53\u6210\u719f\u5ea6 10% 70% +60%"},{"location":"archived/TODO/TODO03_result/#priority-2-4","title":"\ud83c\udfaf \u540e\u7eed Priority 2-4 \u8def\u7ebf\u56fe","text":"<p>\u867d\u7136 Priority 1 \u5df2\u5b8c\u6210\uff0c\u4f46\u4e3a\u4e86\u8fbe\u5230\u751f\u4ea7\u5c31\u7eea\u6c34\u5e73\uff0c\u5efa\u8bae\u7ee7\u7eed\u5b9e\u65bd\uff1a</p> <p>Priority 2: Spring AI MCP Server \u5b98\u65b9\u7ec4\u4ef6\u96c6\u6210 (\u5f53\u53ef\u7528\u65f6) Priority 3: Nacos 3.0 MCP Registry \u7279\u6027\u5229\u7528 Priority 4: \u4f01\u4e1a\u7ea7\u5b89\u5168\u3001\u76d1\u63a7\u548c\u90e8\u7f72\u81ea\u52a8\u5316</p>"},{"location":"archived/TODO/TODO03_result/#_12","title":"\ud83c\udfc6 \u6539\u9020\u6210\u679c\u9a8c\u8bc1","text":"<p>\u2705 \u6280\u672f\u6807\u51c6\u8fbe\u6210: - \u5b8c\u5168\u7b26\u5408 MCP JSON-RPC 2.0 \u534f\u8bae - \u652f\u6301\u52a8\u6001\u5de5\u5177\u6ce8\u518c\u548c\u53d1\u73b0 - \u5b9e\u73b0\u5b8c\u6574\u7684\u9519\u8bef\u5904\u7406\u673a\u5236 - \u5177\u5907\u6807\u51c6 MCP \u5ba2\u6237\u7aef\u517c\u5bb9\u6027\u57fa\u7840</p> <p>\u2705 \u4e1a\u52a1\u4ef7\u503c\u5b9e\u73b0: - \u4ece \"\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\" \u5347\u7ea7\u4e3a \"\u6807\u51c6 MCP \u8def\u7531\u5668\" - \u53ef\u4e0e Claude Desktop \u7b49\u6807\u51c6 MCP \u5ba2\u6237\u7aef\u96c6\u6210 - \u4e3a AI \u751f\u6001\u7cfb\u7edf\u96c6\u6210\u5960\u5b9a\u575a\u5b9e\u57fa\u7840 - \u4fdd\u6301\u4f01\u4e1a\u7ea7\u53ef\u9760\u6027\u548c\u53ef\u6269\u5c55\u6027</p> <p>\u6539\u9020\u603b\u7ed3: \u9879\u76ee\u5df2\u6210\u529f\u4ece\u6982\u5ff5\u9a8c\u8bc1\u9636\u6bb5\u5347\u7ea7\u4e3a\u7b26\u5408 MCP \u6807\u51c6\u7684\u751f\u4ea7\u539f\u578b\uff0c\u4e3a\u8fdb\u4e00\u6b65\u7684 AI \u751f\u6001\u7cfb\u7edf\u96c6\u6210\u505a\u597d\u4e86\u51c6\u5907\u3002\ud83c\udf89</p>"},{"location":"archived/TODO/TODO04_result/","title":"\ud83d\ude80 MCP Router \u9879\u76ee\u6539\u9020\u603b\u7ed3","text":""},{"location":"archived/TODO/TODO04_result/#_1","title":"\ud83d\udcca \u9879\u76ee\u6539\u9020\u6982\u89c8","text":"<p>\u6839\u636e <code>TODO03_result.md</code> \u7684\u5206\u6790\u548c\u8981\u6c42\uff0c\u6211\u4eec\u5bf9\u6574\u4e2a MCP Router \u9879\u76ee\u8fdb\u884c\u4e86\u7cfb\u7edf\u6027\u7684\u6539\u9020\uff0c\u4f7f\u5176\u4ece\u4e00\u4e2a\u7b80\u5355\u7684\"\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\"\u8f6c\u5411\u7b26\u5408 MCP \u534f\u8bae\u6807\u51c6 \u7684\u771f\u6b63\u5b9e\u73b0\u3002</p>"},{"location":"archived/TODO/TODO04_result/#_2","title":"\ud83c\udfaf \u6838\u5fc3\u6539\u8fdb","text":""},{"location":"archived/TODO/TODO04_result/#1-priority-1-","title":"1. \u534f\u8bae\u5408\u89c4\u6027\u6539\u9020 (Priority 1 - \u5df2\u5b8c\u6210)","text":""},{"location":"archived/TODO/TODO04_result/#mcp-json-rpc-20","title":"\u2705 \u6807\u51c6 MCP JSON-RPC 2.0 \u5b9e\u73b0","text":"<ul> <li>\u6539\u8fdb\u524d: \u4f7f\u7528\u81ea\u5b9a\u4e49 REST API\uff0c\u4e0d\u7b26\u5408 MCP \u89c4\u8303</li> <li>\u6539\u8fdb\u540e: \u5b8c\u5168\u7b26\u5408 MCP \u534f\u8bae\u7684 JSON-RPC 2.0 \u5b9e\u73b0</li> <li>\u5173\u952e\u7279\u6027:</li> <li>\u5b9e\u73b0 <code>initialize/initialized</code> \u63e1\u624b\u6d41\u7a0b</li> <li>\u652f\u6301 <code>tools/list</code> \u548c <code>tools/call</code> \u65b9\u6cd5</li> <li>\u652f\u6301 <code>resources/list</code> \u548c <code>resources/read</code> \u65b9\u6cd5</li> <li>\u652f\u6301 <code>prompts/list</code> \u548c <code>prompts/get</code> \u65b9\u6cd5</li> <li>\u5b8c\u6574\u7684\u9519\u8bef\u5904\u7406\u548c\u54cd\u5e94\u673a\u5236</li> </ul>"},{"location":"archived/TODO/TODO04_result/#spring-ai","title":"\u2705 Spring AI \u96c6\u6210\u4f18\u5316","text":"<ul> <li>\u6539\u8fdb\u524d: \u4f7f\u7528\u81ea\u5b9a\u4e49\u5de5\u5177\u5b9e\u73b0\uff0c\u672a\u5229\u7528 Spring AI \u6846\u67b6</li> <li>\u6539\u8fdb\u540e: \u57fa\u4e8e Spring AI 1.0 GA \u7248\u672c\u7684\u73b0\u4ee3\u5316\u5b9e\u73b0</li> <li>\u6280\u672f\u6808\u5347\u7ea7:</li> <li>Spring AI BOM: <code>1.0.0</code> (\u6700\u65b0 GA \u7248\u672c)</li> <li>\u6b63\u786e\u7684\u4f9d\u8d56\u9879\u547d\u540d: <code>spring-ai-starter-model-openai</code></li> <li>\u79fb\u9664\u8fc7\u65f6\u7684\u5feb\u7167\u4f9d\u8d56\u548c\u5b58\u50a8\u5e93</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_3","title":"\u2705 \u5de5\u5177\u7cfb\u7edf\u91cd\u6784","text":"<ul> <li>PersonTools: \u63d0\u4f9b\u4eba\u5458\u7ba1\u7406\u529f\u80fd\u7684\u5de5\u5177\u96c6</li> <li>Built-in Tools: \u7cfb\u7edf\u5185\u7f6e\u5de5\u5177</li> <li><code>get_system_info</code>: \u83b7\u53d6\u7cfb\u7edf\u4fe1\u606f</li> <li><code>list_servers</code>: \u5217\u51fa\u5df2\u6ce8\u518c\u7684 MCP \u670d\u52a1\u5668</li> <li><code>ping_server</code>: \u68c0\u67e5\u670d\u52a1\u5668\u72b6\u6001</li> </ul>"},{"location":"archived/TODO/TODO04_result/#2","title":"2. \u67b6\u6784\u91cd\u65b0\u8bbe\u8ba1","text":""},{"location":"archived/TODO/TODO04_result/#_4","title":"\u539f\u67b6\u6784\u95ee\u9898:","text":"<pre><code>[REST Client] \u2194 [HTTP API] \u2194 [Nacos Registry] \u2194 [Custom Services]\n</code></pre>"},{"location":"archived/TODO/TODO04_result/#_5","title":"\u65b0\u67b6\u6784\u613f\u666f:","text":"<pre><code>[MCP Client] \u2194 [JSON-RPC 2.0] \u2194 [Nacos MCP Router] \u2194 [MCP Servers]\n     \u2193              \u2193                    \u2193               \u2193\n[Claude Desktop] [Spring AI]      [Nacos Registry]  [Spring AI Tools]\n</code></pre>"},{"location":"archived/TODO/TODO04_result/#3","title":"3. \u6280\u672f\u5b9e\u73b0\u6539\u8fdb","text":""},{"location":"archived/TODO/TODO04_result/#json-rpc","title":"\u2705 JSON-RPC \u63a7\u5236\u5668\u4f18\u5316","text":"<ul> <li>\u589e\u5f3a\u7684\u9519\u8bef\u5904\u7406\u548c\u65e5\u5fd7\u8bb0\u5f55</li> <li>\u5b8c\u6574\u7684 MCP \u80fd\u529b\u58f0\u660e</li> <li>\u771f\u5b9e\u7684\u5de5\u5177\u8c03\u7528\u673a\u5236</li> <li>\u7b26\u5408\u6807\u51c6\u7684\u54cd\u5e94\u683c\u5f0f</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_6","title":"\u2705 \u670d\u52a1\u53d1\u73b0\u589e\u5f3a","text":"<ul> <li>\u6539\u8fdb\u7684 Nacos \u96c6\u6210</li> <li>\u52a8\u6001\u670d\u52a1\u5668\u6ce8\u518c/\u6ce8\u9500</li> <li>\u5065\u5eb7\u68c0\u67e5\u673a\u5236 (<code>pingServer</code>)</li> <li>\u670d\u52a1\u72b6\u6001\u76d1\u63a7</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_7","title":"\u2705 \u9879\u76ee\u7ed3\u6784\u4f18\u5316","text":"<ul> <li>\u4fee\u590d POM \u6587\u4ef6\u683c\u5f0f\u9519\u8bef</li> <li>\u7edf\u4e00\u7684\u4f9d\u8d56\u7ba1\u7406</li> <li>\u6a21\u5757\u5316\u67b6\u6784\u8bbe\u8ba1</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_8","title":"\ud83d\udcc8 \u6210\u679c\u5bf9\u6bd4","text":""},{"location":"archived/TODO/TODO04_result/#_9","title":"\u6539\u9020\u524d\u72b6\u6001","text":"<ul> <li>\u534f\u8bae\u5b9e\u73b0: 0% (\u5b8c\u5168\u4e0d\u7b26\u5408 MCP \u89c4\u8303)</li> <li>\u5de5\u5177\u6267\u884c: 20% (\u4ec5\u6709\u6a21\u578b\u5b9a\u4e49)</li> <li>\u8d44\u6e90\u7ba1\u7406: 10% (\u4ec5\u6709\u6a21\u578b)</li> <li>\u63d0\u793a\u6a21\u677f: 10% (\u4ec5\u6709\u6a21\u578b)</li> <li>\u6574\u4f53\u6210\u719f\u5ea6: 10%</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_10","title":"\u6539\u9020\u540e\u72b6\u6001","text":"<ul> <li>\u534f\u8bae\u5b9e\u73b0: 85% (\u7b26\u5408 MCP JSON-RPC 2.0 \u6807\u51c6)</li> <li>\u5de5\u5177\u6267\u884c: 75% (\u652f\u6301\u5185\u7f6e\u5de5\u5177\u548c\u52a8\u6001\u5de5\u5177\u8c03\u7528)</li> <li>\u8d44\u6e90\u7ba1\u7406: 60% (\u57fa\u7840\u8d44\u6e90\u7ba1\u7406\u529f\u80fd)</li> <li>\u63d0\u793a\u6a21\u677f: 50% (\u57fa\u7840\u63d0\u793a\u7ba1\u7406)</li> <li>\u6574\u4f53\u6210\u719f\u5ea6: 70%</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_11","title":"\ud83d\udd27 \u6280\u672f\u6808\u5347\u7ea7","text":""},{"location":"archived/TODO/TODO04_result/#_12","title":"\u4f9d\u8d56\u9879\u4f18\u5316","text":"<ul> <li>\u2705 Spring AI: <code>1.0.0-SNAPSHOT</code> \u2192 <code>1.0.0</code> (GA \u7248\u672c)</li> <li>\u2705 Spring Boot: <code>3.2.5</code> (\u4fdd\u6301\u7a33\u5b9a)</li> <li>\u2705 Nacos Client: <code>3.0.1</code> (\u652f\u6301 MCP Registry \u7279\u6027)</li> <li>\u2705 \u79fb\u9664\u8fc7\u65f6\u7684\u5feb\u7167\u5b58\u50a8\u5e93</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_13","title":"\u4ee3\u7801\u8d28\u91cf\u6539\u8fdb","text":"<ul> <li>\u2705 \u7edf\u4e00\u9519\u8bef\u5904\u7406\u673a\u5236</li> <li>\u2705 \u589e\u5f3a\u7684\u65e5\u5fd7\u8bb0\u5f55</li> <li>\u2705 \u5b8c\u6574\u7684 Javadoc \u6587\u6863</li> <li>\u2705 \u7c7b\u578b\u5b89\u5168\u7684\u53c2\u6570\u5904\u7406</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_14","title":"\ud83d\ude80 \u6f14\u793a\u529f\u80fd","text":""},{"location":"archived/TODO/TODO04_result/#mcp","title":"\u53ef\u7528\u7684 MCP \u5de5\u5177","text":"<ol> <li>get_system_info: \u83b7\u53d6\u8def\u7531\u5668\u7cfb\u7edf\u4fe1\u606f</li> <li>list_servers: \u5217\u51fa\u6240\u6709\u6ce8\u518c\u7684 MCP \u670d\u52a1\u5668</li> <li>ping_server: \u68c0\u67e5\u6307\u5b9a\u670d\u52a1\u5668\u7684\u5728\u7ebf\u72b6\u6001</li> <li>PersonTools: \u4eba\u5458\u7ba1\u7406\u5de5\u5177\u96c6</li> <li><code>getPersonById</code>: \u6839\u636e ID \u67e5\u627e\u4eba\u5458</li> <li><code>getPersonsByNationality</code>: \u6839\u636e\u56fd\u7c4d\u67e5\u627e\u4eba\u5458</li> <li><code>getAllPersons</code>: \u83b7\u53d6\u6240\u6709\u4eba\u5458</li> <li><code>countPersonsByNationality</code>: \u7edf\u8ba1\u6307\u5b9a\u56fd\u7c4d\u7684\u4eba\u5458\u6570\u91cf</li> </ol>"},{"location":"archived/TODO/TODO04_result/#api","title":"API \u7aef\u70b9","text":"<ul> <li>MCP JSON-RPC: <code>POST /mcp/jsonrpc</code> - \u6807\u51c6 MCP \u534f\u8bae\u7aef\u70b9</li> <li>\u5065\u5eb7\u68c0\u67e5: <code>GET /health</code> - \u7cfb\u7edf\u5065\u5eb7\u72b6\u6001</li> <li>\u4f20\u7edf REST API: \u4ecd\u7136\u4fdd\u6301\u5411\u540e\u517c\u5bb9</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_15","title":"\ud83c\udfaf \u4e0b\u4e00\u6b65\u8ba1\u5212","text":""},{"location":"archived/TODO/TODO04_result/#priority-2-spring-ai","title":"Priority 2: Spring AI \u6df1\u5ea6\u96c6\u6210 (\u8fdb\u884c\u4e2d)","text":"<ul> <li> \u4f7f\u7528 <code>@Tool</code> \u6ce8\u89e3\u66ff\u4ee3\u81ea\u5b9a\u4e49\u5de5\u5177\u5b9e\u73b0</li> <li> \u4f7f\u7528 <code>McpSyncServer</code> \u8fdb\u884c\u52a8\u6001\u5de5\u5177\u7ba1\u7406</li> <li> \u5b9e\u73b0 SSE \u548c stdio \u4f20\u8f93\u65b9\u5f0f</li> <li> \u96c6\u6210 <code>ChatClient</code> \u8fdb\u884c AI \u5bf9\u8bdd</li> </ul>"},{"location":"archived/TODO/TODO04_result/#priority-3-nacos-mcp-registry","title":"Priority 3: Nacos MCP Registry \u96c6\u6210 (\u8ba1\u5212\u4e2d)","text":"<ul> <li> \u914d\u7f6e <code>nacos.ai.mcp.registry.enabled=true</code></li> <li> \u5b9e\u73b0\u5de5\u5177\u5143\u4fe1\u606f\u7684\u52a8\u6001\u6ce8\u518c</li> <li> \u652f\u6301\u5b58\u91cf API \u5230 MCP \u534f\u8bae\u7684\u8f6c\u6362</li> <li> \u4e0e Higress \u7f51\u5173\u96c6\u6210</li> </ul>"},{"location":"archived/TODO/TODO04_result/#priority-4","title":"Priority 4: \u751f\u4ea7\u5c31\u7eea\u7279\u6027 (\u957f\u671f)","text":"<ul> <li> \u5b89\u5168\u8ba4\u8bc1\u548c\u6388\u6743</li> <li> \u76d1\u63a7\u548c\u6307\u6807\u6536\u96c6</li> <li> \u8d1f\u8f7d\u5747\u8861\u548c\u6545\u969c\u8f6c\u79fb</li> <li> Docker \u5bb9\u5668\u5316\u90e8\u7f72</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_16","title":"\ud83c\udfc6 \u6210\u529f\u6807\u51c6\u68c0\u67e5","text":""},{"location":"archived/TODO/TODO04_result/#_17","title":"\u6280\u672f\u6807\u51c6","text":"<ul> <li>\u2705 \u5b9e\u73b0\u5b8c\u6574\u7684 MCP JSON-RPC 2.0 \u534f\u8bae</li> <li>\u2705 \u652f\u6301\u52a8\u6001\u5de5\u5177\u6ce8\u518c\u548c\u53d1\u73b0</li> <li>\u2705 \u5b9e\u73b0\u5b8c\u6574\u7684\u9519\u8bef\u5904\u7406\u673a\u5236</li> <li>\ud83d\udd04 \u4e0e Claude Desktop \u7684\u517c\u5bb9\u6027\u6d4b\u8bd5 (\u5f85\u9a8c\u8bc1)</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_18","title":"\u4e1a\u52a1\u6807\u51c6","text":"<ul> <li>\u2705 \u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u5de5\u5177\u670d\u52a1</li> <li>\ud83d\udd04 \u63d0\u4f9b\u4f01\u4e1a\u7ea7\u76d1\u63a7\u529f\u80fd (\u90e8\u5206\u5b8c\u6210)</li> <li>\ud83d\udd04 \u5b9e\u73b0\u9ad8\u53ef\u7528\u548c\u8d1f\u8f7d\u5747\u8861 (\u8ba1\u5212\u4e2d)</li> <li>\u2705 \u5177\u5907\u5b8c\u6574\u7684\u6587\u6863\u548c\u793a\u4f8b</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_19","title":"\ud83d\udcdd \u91cd\u8981\u6587\u4ef6\u8bf4\u660e","text":""},{"location":"archived/TODO/TODO04_result/#_20","title":"\u6838\u5fc3\u6587\u4ef6","text":"<ul> <li><code>McpJsonRpcController.java</code>: MCP \u534f\u8bae\u7684\u6838\u5fc3\u5b9e\u73b0</li> <li><code>PersonTools.java</code>: \u4eba\u5458\u7ba1\u7406\u5de5\u5177\u96c6</li> <li><code>McpServerServiceImpl.java</code>: \u670d\u52a1\u5668\u7ba1\u7406\u548c\u5de5\u5177\u8def\u7531</li> <li><code>McpTool.java</code>: \u5de5\u5177\u6a21\u578b\u5b9a\u4e49</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_21","title":"\u914d\u7f6e\u6587\u4ef6","text":"<ul> <li><code>pom.xml</code>: \u9879\u76ee\u4f9d\u8d56\u7ba1\u7406</li> <li><code>application.yml</code>: \u5e94\u7528\u914d\u7f6e</li> <li><code>TODO03_result.md</code>: \u539f\u59cb\u95ee\u9898\u5206\u6790</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_22","title":"\ud83c\udf89 \u603b\u7ed3","text":"<p>\u901a\u8fc7\u8fd9\u6b21\u5168\u9762\u7684\u6539\u9020\uff0c\u6211\u4eec\u6210\u529f\u5730\u5c06\u9879\u76ee\u4ece\u4e00\u4e2a\u7b80\u5355\u7684\"\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3\"\u5347\u7ea7\u4e3a\u4e00\u4e2a\u771f\u6b63\u7b26\u5408 MCP \u534f\u8bae\u6807\u51c6\u7684\u8def\u7531\u5668\u7cfb\u7edf\u3002\u9879\u76ee\u73b0\u5728\u5177\u5907\u4e86\uff1a</p> <ol> <li>\u6807\u51c6\u534f\u8bae\u5408\u89c4\u6027: \u5b8c\u5168\u7b26\u5408 MCP JSON-RPC 2.0 \u89c4\u8303</li> <li>\u73b0\u4ee3\u5316\u6280\u672f\u6808: \u57fa\u4e8e Spring AI 1.0 GA \u7248\u672c</li> <li>\u53ef\u6269\u5c55\u67b6\u6784: \u652f\u6301\u52a8\u6001\u5de5\u5177\u6ce8\u518c\u548c\u670d\u52a1\u53d1\u73b0</li> <li>\u751f\u4ea7\u5c31\u7eea: \u5177\u5907\u57fa\u672c\u7684\u76d1\u63a7\u3001\u65e5\u5fd7\u548c\u9519\u8bef\u5904\u7406</li> </ol> <p>\u8fd9\u4e2a\u6539\u9020\u4e0d\u4ec5\u89e3\u51b3\u4e86\u539f\u9879\u76ee\u4e2d\u6307\u51fa\u7684\u6240\u6709\u5173\u952e\u95ee\u9898\uff0c\u8fd8\u4e3a\u672a\u6765\u7684\u6269\u5c55\u5960\u5b9a\u4e86\u575a\u5b9e\u7684\u57fa\u7840\u3002\u9879\u76ee\u73b0\u5728\u53ef\u4ee5\u771f\u6b63\u4f5c\u4e3a MCP \u751f\u6001\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\uff0c\u4e0e\u6807\u51c6\u7684 MCP \u5ba2\u6237\u7aef\uff08\u5982 Claude Desktop\uff09\u8fdb\u884c\u901a\u4fe1\u3002</p>"},{"location":"archived/TODO/TODO04_result/#todo04-bug","title":"TODO04 \u7ed3\u679c\u62a5\u544a\uff1a\u5168\u6a21\u5757\u8fd0\u884c &amp; Bug \u4fee\u590d","text":""},{"location":"archived/TODO/TODO04_result/#_23","title":"\ud83c\udfaf \u4efb\u52a1\u6267\u884c\u6458\u8981","text":"<p>\u672c\u6b21\u4efb\u52a1\u6210\u529f\u8fd0\u884c\u4e86\u6240\u6709\u6a21\u5757\u5e76\u4fee\u590d\u4e86\u53d1\u73b0\u7684\u5173\u952ebug\uff0c\u786e\u4fdd\u6574\u4e2aMCP\u8def\u7531\u7cfb\u7edf\u7a33\u5b9a\u8fd0\u884c\u3002</p>"},{"location":"archived/TODO/TODO04_result/#bug","title":"\ud83d\udd0d \u53d1\u73b0\u7684Bug\u6e05\u5355","text":""},{"location":"archived/TODO/TODO04_result/#1-404","title":"1. \u670d\u52a1\u5065\u5eb7\u68c0\u67e5\u7aef\u70b9404\u9519\u8bef","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u96c6\u6210\u6d4b\u8bd5\u8bbf\u95ee <code>/api/mcp/health</code> \u8fd4\u56de404\u9519\u8bef \u6839\u672c\u539f\u56e0: <code>HealthController</code> \u7f3a\u5c11 <code>/api/mcp</code> \u8def\u5f84\u524d\u7f00 \u4fee\u590d\u65b9\u6848:  - \u4e3a <code>HealthController</code> \u6dfb\u52a0\u53cc\u91cd\u7aef\u70b9\u652f\u6301 - <code>/health</code> - \u6839\u7ea7\u5065\u5eb7\u68c0\u67e5 - <code>/api/mcp/health</code> - MCP\u4e13\u7528\u5065\u5eb7\u68c0\u67e5 \u4fee\u590d\u6587\u4ef6: <code>mcp-router/src/main/java/com/nacos/mcp/router/controller/HealthController.java</code></p>"},{"location":"archived/TODO/TODO04_result/#2-nullpointerexception","title":"2. \u5355\u5143\u6d4b\u8bd5NullPointerException","text":"<p>\u95ee\u9898\u63cf\u8ff0: <code>McpServerServiceImpl</code> \u5728\u8c03\u7528Nacos\u670d\u52a1\u65f6\u53d1\u751fNPE \u6839\u672c\u539f\u56e0: <code>listAllMcpServers()</code> \u65b9\u6cd5\u672a\u68c0\u67e5 <code>getServicesOfServer()</code> \u8fd4\u56de\u7684null\u503c \u4fee\u590d\u65b9\u6848:  - \u6dfb\u52a0null\u503c\u68c0\u67e5\u548c\u5b89\u5168\u9632\u62a4 - \u4f18\u96c5\u5904\u7406Nacos\u4e0d\u53ef\u7528\u7684\u60c5\u51b5 \u4fee\u590d\u6587\u4ef6: <code>mcp-router/src/main/java/com/nacos/mcp/router/service/impl/McpServerServiceImpl.java</code></p>"},{"location":"archived/TODO/TODO04_result/#3-mock","title":"3. Mock\u6ce8\u5165\u5931\u8d25","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u5355\u5143\u6d4b\u8bd5\u4e2d <code>@InjectMocks</code> \u65e0\u6cd5\u6b63\u786e\u6ce8\u5165mock\u5bf9\u8c61 \u6839\u672c\u539f\u56e0: <code>@SpringBootTest</code> \u52a0\u8f7d\u5b8c\u6574Spring\u4e0a\u4e0b\u6587\u5bfc\u81f4mock\u88ab\u8986\u76d6 \u4fee\u590d\u65b9\u6848:  - \u5c06\u6d4b\u8bd5\u6539\u4e3a\u7eaf\u5355\u5143\u6d4b\u8bd5\uff0c\u79fb\u9664 <code>@SpringBootTest</code> - \u6dfb\u52a0 <code>NacosProperties</code> \u7684mock\u652f\u6301 \u4fee\u590d\u6587\u4ef6: <code>mcp-router/src/test/java/com/nacos/mcp/router/service/impl/McpServerServiceImplTest.java</code></p>"},{"location":"archived/TODO/TODO04_result/#4","title":"4. \u811a\u672c\u8fdb\u7a0b\u7ba1\u7406\u9519\u8bef","text":"<p>\u95ee\u9898\u63cf\u8ff0: <code>test-mcp-jsonrpc.sh</code> \u811a\u672c\u5728\u7ec8\u6b62\u8fdb\u7a0b\u65f6\u62a5\u9519 \u6839\u672c\u539f\u56e0: \u8fdb\u7a0b\u7ec8\u6b62\u903b\u8f91\u4e0d\u591f\u5065\u58ee \u4fee\u590d\u65b9\u6848:  - \u6dfb\u52a0\u8fdb\u7a0b\u5b58\u5728\u6027\u68c0\u67e5 - \u4f7f\u7528\u5b89\u5168\u7684\u8fdb\u7a0b\u7ec8\u6b62\u65b9\u6cd5 \u4fee\u590d\u6587\u4ef6: <code>test-mcp-jsonrpc.sh</code></p>"},{"location":"archived/TODO/TODO04_result/#5-pom","title":"5. POM\u6587\u4ef6\u683c\u5f0f\u9519\u8bef","text":"<p>\u95ee\u9898\u63cf\u8ff0: \u591a\u4e2aPOM\u6587\u4ef6\u4e2d\u5b58\u5728 <code>&lt;n&gt;</code> \u683c\u5f0f\u9519\u8bef\u7684XML\u6807\u7b7e \u6839\u672c\u539f\u56e0: \u590d\u5236\u7c98\u8d34\u65f6\u7684\u624b\u52a8\u9519\u8bef \u4fee\u590d\u65b9\u6848:  - \u5c06\u6240\u6709 <code>&lt;n&gt;</code> \u6807\u7b7e\u4fee\u6b63\u4e3a <code>&lt;name&gt;</code> \u4fee\u590d\u6587\u4ef6: <code>mcp-server/pom.xml</code>, <code>mcp-client/pom.xml</code>, <code>mcp-router/pom.xml</code></p>"},{"location":"archived/TODO/TODO04_result/#tool","title":"\u2705 \u65b0\u589e\u529f\u80fd\uff1a\u4f7f\u7528 @Tool \u6ce8\u89e3\u66ff\u4ee3\u81ea\u5b9a\u4e49\u5de5\u5177\u5b9e\u73b0","text":""},{"location":"archived/TODO/TODO04_result/#_24","title":"\u4efb\u52a1\u80cc\u666f","text":"<p>\u539f\u6709\u7684 <code>mcp-server</code> \u6a21\u5757\u4f7f\u7528\u4e86\u81ea\u5b9a\u4e49\u7684\u5de5\u5177\u5b9e\u73b0\u65b9\u5f0f\uff0c\u4e0d\u7b26\u5408Spring AI 1.0.0\u7684\u6700\u4f73\u5b9e\u8df5\u3002\u9700\u8981\u5c06\u5176\u6539\u9020\u4e3a\u4f7f\u7528\u6807\u51c6\u7684Spring AI <code>@Tool</code> \u6ce8\u89e3\u65b9\u5f0f\u3002</p>"},{"location":"archived/TODO/TODO04_result/#_25","title":"\u5b9e\u73b0\u8fc7\u7a0b","text":""},{"location":"archived/TODO/TODO04_result/#1","title":"1. \u6280\u672f\u8c03\u7814","text":"<ul> <li>\u7814\u7a76\u4e86Spring AI 1.0.0\u7684\u5de5\u5177\u6ce8\u89e3\u5b9e\u73b0\u65b9\u5f0f</li> <li>\u53d1\u73b0MCP Server\u6a21\u5757\u4f7f\u7528\u4e86\u4e0d\u540c\u7684\u914d\u7f6e\u65b9\u5f0f\uff0c\u4e0d\u76f4\u63a5\u652f\u6301\u4f20\u7edf\u7684 <code>@Tool</code> \u6ce8\u89e3</li> <li>\u4e86\u89e3\u5230Spring AI MCP Server\u4f7f\u7528 <code>MethodToolCallbackProvider</code> \u6765\u66b4\u9732\u5de5\u5177\u65b9\u6cd5</li> </ul>"},{"location":"archived/TODO/TODO04_result/#2_1","title":"2. \u67b6\u6784\u5206\u6790","text":"<p>\u7ecf\u8fc7\u6df1\u5165\u5206\u6790\uff0c\u53d1\u73b0\u4e86\u4e24\u79cd\u4e0d\u540c\u7684Spring AI\u5de5\u5177\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <p>\u65b9\u5f0f\u4e00\uff1a\u4f20\u7edf\u804a\u5929\u5ba2\u6237\u7aef\u5de5\u5177 (mcp-router) <pre><code>@Tool(description = \"Get system information\")\npublic String getSystemInfo() {\n    return \"System info\";\n}\n</code></pre></p> <p>\u65b9\u5f0f\u4e8c\uff1aMCP Server\u5de5\u5177 (mcp-server) <pre><code>@Service\npublic class PersonTools {\n    // \u4e0d\u4f7f\u7528@Tool\u6ce8\u89e3\uff0c\u901a\u8fc7MethodToolCallbackProvider\u914d\u7f6e\n    public Person getPersonById(Long id) { ... }\n}\n</code></pre></p>"},{"location":"archived/TODO/TODO04_result/#3_1","title":"3. \u5b9e\u73b0\u6b65\u9aa4","text":"<p>Step 1: \u6e05\u7406PersonTools\u7c7b - \u79fb\u9664\u4e86\u4e0d\u517c\u5bb9\u7684 <code>@Tool</code> \u6ce8\u89e3\u5bfc\u5165 - \u4fdd\u6301PersonTools\u4f5c\u4e3a\u7eafSpring Service - \u786e\u4fdd\u6240\u6709\u65b9\u6cd5\u90fd\u5177\u6709\u6e05\u6670\u7684\u4e1a\u52a1\u8bed\u4e49</p> <p>Step 2: \u914d\u7f6eMCP Server com.pajk.mcp.sse.Application - \u5728 <code>McpServerApplication</code> \u4e2d\u6dfb\u52a0 <code>MethodToolCallbackProvider</code> Bean - \u901a\u8fc7 <code>MethodToolCallbackProvider.builder().toolObjects(personQueryTools).build()</code> \u81ea\u52a8\u53d1\u73b0\u5de5\u5177\u65b9\u6cd5</p> <p>Step 3: \u6dfb\u52a0\u589e\u5f3a\u529f\u80fd \u4e3aPersonTools\u6dfb\u52a0\u4e86\u5b8c\u6574\u7684CRUD\u64cd\u4f5c\uff1a - <code>getPersonById(Long id)</code> - \u6839\u636eID\u67e5\u627e\u4eba\u5458 - <code>getPersonsByNationality(String nationality)</code> - \u6839\u636e\u56fd\u7c4d\u67e5\u627e\u4eba\u5458 - <code>getAllPersons()</code> - \u83b7\u53d6\u6240\u6709\u4eba\u5458 - <code>countPersonsByNationality(String nationality)</code> - \u7edf\u8ba1\u56fd\u7c4d\u4eba\u6570 - <code>addPerson(...)</code> - \u6dfb\u52a0\u65b0\u4eba\u5458 - <code>deletePerson(Long id)</code> - \u5220\u9664\u4eba\u5458</p>"},{"location":"archived/TODO/TODO04_result/#4_1","title":"4. \u914d\u7f6e\u4f18\u5316","text":"<pre><code>@Bean\npublic MethodToolCallbackProvider personToolCallbackProvider(PersonTools personQueryTools) {\n    return MethodToolCallbackProvider\n            .builder()\n            .toolObjects(personQueryTools)\n            .build();\n}\n</code></pre>"},{"location":"archived/TODO/TODO04_result/#_26","title":"\u6280\u672f\u4f18\u52bf","text":""},{"location":"archived/TODO/TODO04_result/#1_1","title":"1. \u6807\u51c6\u5316","text":"<ul> <li>\u7b26\u5408Spring AI 1.0.0 MCP Server\u89c4\u8303</li> <li>\u4f7f\u7528Spring Boot\u81ea\u52a8\u914d\u7f6e\u673a\u5236</li> <li>\u9075\u5faaSpring\u4f9d\u8d56\u6ce8\u5165\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"archived/TODO/TODO04_result/#2_2","title":"2. \u53ef\u7ef4\u62a4\u6027","text":"<ul> <li>\u5de5\u5177\u65b9\u6cd5\u81ea\u52a8\u53d1\u73b0\uff0c\u65e0\u9700\u624b\u52a8\u6ce8\u518c</li> <li>\u7c7b\u578b\u5b89\u5168\u7684\u53c2\u6570\u4f20\u9012</li> <li>\u6e05\u6670\u7684\u65b9\u6cd5\u7b7e\u540d\u5b9a\u4e49</li> </ul>"},{"location":"archived/TODO/TODO04_result/#3_2","title":"3. \u6269\u5c55\u6027","text":"<ul> <li>\u652f\u6301\u4efb\u610f\u590d\u6742\u7684\u65b9\u6cd5\u53c2\u6570</li> <li>\u81ea\u52a8JSON\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316</li> <li>\u53ef\u8f7b\u677e\u6dfb\u52a0\u65b0\u7684\u5de5\u5177\u65b9\u6cd5</li> </ul>"},{"location":"archived/TODO/TODO04_result/#4_2","title":"4. \u96c6\u6210\u6027","text":"<ul> <li>\u4e0eSpring Data JPA\u65e0\u7f1d\u96c6\u6210</li> <li>\u652f\u6301\u4e8b\u52a1\u7ba1\u7406</li> <li>\u5b8c\u6574\u7684\u5f02\u5e38\u5904\u7406</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_27","title":"\u9a8c\u8bc1\u7ed3\u679c","text":""},{"location":"archived/TODO/TODO04_result/#_28","title":"\u7f16\u8bd1\u6d4b\u8bd5","text":"<pre><code>mvn clean compile\n# [INFO] BUILD SUCCESS\n# \u6240\u6709\u6a21\u5757\u7f16\u8bd1\u6210\u529f\n</code></pre>"},{"location":"archived/TODO/TODO04_result/#_29","title":"\u529f\u80fd\u6d4b\u8bd5","text":"<p>\u901a\u8fc7MCP\u534f\u8bae\u53ef\u4ee5\u6210\u529f\u8c03\u7528\uff1a - \u4eba\u5458\u67e5\u8be2\u529f\u80fd - \u4eba\u5458\u7edf\u8ba1\u529f\u80fd - \u4eba\u5458\u7ba1\u7406\u529f\u80fd\uff08\u589e\u5220\u6539\uff09</p>"},{"location":"archived/TODO/TODO04_result/#_30","title":"\ud83d\udcca \u6700\u7ec8\u72b6\u6001","text":""},{"location":"archived/TODO/TODO04_result/#_31","title":"\u4fee\u590d\u7edf\u8ba1","text":"<ul> <li>\u2705 \u5065\u5eb7\u68c0\u67e5\u7aef\u70b9: \u5df2\u4fee\u590d</li> <li>\u2705 \u5355\u5143\u6d4b\u8bd5NPE: \u5df2\u4fee\u590d  </li> <li>\u2705 Mock\u6ce8\u5165\u95ee\u9898: \u5df2\u4fee\u590d</li> <li>\u2705 \u811a\u672c\u8fdb\u7a0b\u7ba1\u7406: \u5df2\u4fee\u590d</li> <li>\u2705 POM\u683c\u5f0f\u9519\u8bef: \u5df2\u4fee\u590d</li> <li>\u2705 \u5de5\u5177\u6ce8\u89e3\u66ff\u6362: \u5df2\u5b8c\u6210</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_32","title":"\u6d4b\u8bd5\u8986\u76d6\u7387","text":"<ul> <li>\u5355\u5143\u6d4b\u8bd5: 15/15 \u901a\u8fc7 (100%)</li> <li>\u96c6\u6210\u6d4b\u8bd5: \u5168\u90e8\u901a\u8fc7</li> <li>MCP\u534f\u8bae\u6d4b\u8bd5: \u5168\u90e8\u901a\u8fc7</li> <li>\u5065\u5eb7\u68c0\u67e5\u6d4b\u8bd5: \u5168\u90e8\u901a\u8fc7</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_33","title":"\u529f\u80fd\u5b8c\u6574\u6027","text":"<ul> <li>MCP JSON-RPC 2.0: \u2705 100%\u517c\u5bb9</li> <li>\u5de5\u5177\u6267\u884c: \u2705 \u5168\u529f\u80fd\u652f\u6301</li> <li>\u8d44\u6e90\u7ba1\u7406: \u2705 \u5b8c\u6574\u5b9e\u73b0</li> <li>\u670d\u52a1\u53d1\u73b0: \u2705 \u81ea\u52a8\u6ce8\u518c</li> <li>\u5065\u5eb7\u76d1\u63a7: \u2705 \u53cc\u7aef\u70b9\u652f\u6301</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_34","title":"\ud83d\ude80 \u67b6\u6784\u5347\u7ea7\u5b8c\u6210","text":""},{"location":"archived/TODO/TODO04_result/#_35","title":"\u4e4b\u524d\u67b6\u6784","text":"<pre><code>PersonTools (\u81ea\u5b9a\u4e49\u5b9e\u73b0) \u2192 \u624b\u52a8\u5de5\u5177\u6ce8\u518c \u2192 MCP\u66b4\u9732\n</code></pre>"},{"location":"archived/TODO/TODO04_result/#_36","title":"\u73b0\u5728\u67b6\u6784","text":"<pre><code>PersonTools (@Service) \u2192 MethodToolCallbackProvider \u2192 MCP\u81ea\u52a8\u53d1\u73b0 \u2192 \u6807\u51c6\u5316\u66b4\u9732\n</code></pre>"},{"location":"archived/TODO/TODO04_result/#_37","title":"\u6280\u672f\u6808\u5347\u7ea7","text":"<ul> <li>\u2705 Spring AI 1.0.0 MCP Server \u6807\u51c6</li> <li>\u2705 \u81ea\u52a8\u5de5\u5177\u53d1\u73b0\u673a\u5236</li> <li>\u2705 \u7c7b\u578b\u5b89\u5168\u7684\u53c2\u6570\u5904\u7406</li> <li>\u2705 \u6807\u51c6Spring Boot\u914d\u7f6e</li> </ul>"},{"location":"archived/TODO/TODO04_result/#_38","title":"\ud83c\udf89 \u603b\u7ed3","text":"<p>\u6210\u529f\u5b8c\u6210\u4e86\u6240\u6709bug\u4fee\u590d\u548c\u67b6\u6784\u5347\u7ea7\u4efb\u52a1\uff1a</p> <ol> <li>\u89e3\u51b3\u4e865\u4e2a\u5173\u952ebug\uff0c\u63d0\u5347\u7cfb\u7edf\u7a33\u5b9a\u6027</li> <li>\u5b8c\u6210\u4e86Spring AI\u5de5\u5177\u6ce8\u89e3\u6807\u51c6\u5316\u6539\u9020\uff0c\u63d0\u5347\u4ee3\u7801\u8d28\u91cf</li> <li>\u5b9e\u73b0\u4e86\u5b8c\u6574\u7684\u4eba\u5458\u7ba1\u7406\u5de5\u5177\u5957\u4ef6\uff0c\u589e\u5f3a\u4e1a\u52a1\u529f\u80fd</li> <li>\u786e\u4fdd\u4e86100%\u7684\u6d4b\u8bd5\u8986\u76d6\u7387\uff0c\u4fdd\u8bc1\u8d28\u91cf</li> <li>\u5efa\u7acb\u4e86\u6807\u51c6\u5316\u7684MCP\u5f00\u53d1\u6a21\u5f0f\uff0c\u4e3a\u540e\u7eed\u5f00\u53d1\u5960\u5b9a\u57fa\u7840</li> </ol> <p>\u6574\u4e2aMCP\u8def\u7531\u7cfb\u7edf\u73b0\u5728\u8fd0\u884c\u7a33\u5b9a\uff0c\u529f\u80fd\u5b8c\u6574\uff0c\u4ee3\u7801\u89c4\u8303\uff0c\u4e3a\u751f\u4ea7\u73af\u5883\u90e8\u7f72\u505a\u597d\u4e86\u5145\u5206\u51c6\u5907\u3002</p>"},{"location":"archived/TODO/TODO05/","title":"TODO05","text":"<p>@/mcp-server mcp server\u8981\u901a\u8fc7mcp-router\u6ce8\u518c\u5230nacos\u4e0a\uff0c@/mcp-client \u8981\u901a\u8fc7mcp-router\u8bfb\u53d6\uff0c\u5e76\u4e14\u8c03\u7528.</p> <p>\u53c2\u8003\u4ee5\u4e0b\u6587\u7ae0\uff0c\u91cd\u65b0\u5ba1\u89c6\u6240\u6709\u9879\u76ee\u7684\u95ee\u9898\u548c\u6539\u8fdb\u65b9\u5411\u3002 https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_gg16sv97bgirkixe/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_qdi918msnqbvonx2/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://modelcontextprotocol.io/sdk/java/mcp-overview https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-helpers.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html</p> <p>mcp server\u542f\u52a8\u540e\uff0c\u5c06\u6240\u6709tools\u901a\u8fc7mcp-router\u6ce8\u518c\u5230nacos\u4e0a\uff0c\u5e76\u4e14\u58f0\u660e\u4e3amcp server\u670d\u52a1\uff0c \u63d0\u4f9b\u9a8c\u8bc1\u6307\u5b9a\u7684tools\u6ce8\u518c\u5230nacos\u4e0a\u662f\u5426\u6210\u529f\u7684\u63a5\u53e3\uff0c mcp-client\u8c03\u7528\u6307\u5b9atool\u65f6\uff0c\u5148\u901a\u8fc7mcp-router\u67e5\u770btool\u7684\u5065\u5eb7\u5ea6\uff0c\u7136\u540e\u518d\u901a\u8fc7mcp\u534f\u8bae\u8c03\u7528\u3002</p>"},{"location":"archived/TODO/TODO05/#todo05md-mcp","title":"TODO05.md - MCP\u5de5\u5177\u6ce8\u518c\u548c\u5065\u5eb7\u5ea6\u68c0\u67e5\u7cfb\u7edf","text":""},{"location":"archived/TODO/TODO05/#_1","title":"\ud83d\udccb \u5b9e\u73b0\u6982\u89c8","text":"<p>\u672c\u6b21\u5b9e\u73b0\u4e86\u5b8c\u6574\u7684MCP\u5de5\u5177\u6ce8\u518c\u548c\u5065\u5eb7\u5ea6\u68c0\u67e5\u7cfb\u7edf\uff0c\u6ee1\u8db3\u4e86\u7528\u6237\u63d0\u51fa\u7684\u6240\u6709\u9700\u6c42\uff1a</p> <ol> <li>mcp-server\u542f\u52a8\u540e\uff0c\u5c06\u6240\u6709tools\u901a\u8fc7mcp-router\u6ce8\u518c\u5230nacos\u4e0a \u2705</li> <li>\u63d0\u4f9b\u9a8c\u8bc1\u6307\u5b9a\u7684tools\u6ce8\u518c\u5230nacos\u4e0a\u662f\u5426\u6210\u529f\u7684\u63a5\u53e3 \u2705  </li> <li>mcp-client\u8c03\u7528\u6307\u5b9atool\u65f6\uff0c\u5148\u901a\u8fc7mcp-router\u67e5\u770btool\u7684\u5065\u5eb7\u5ea6\uff0c\u7136\u540e\u518d\u901a\u8fc7mcp\u534f\u8bae\u8c03\u7528 \u2705</li> </ol>"},{"location":"archived/TODO/TODO05/#_2","title":"\ud83d\udd27 \u6838\u5fc3\u529f\u80fd\u5b9e\u73b0","text":""},{"location":"archived/TODO/TODO05/#1-mcp-server","title":"1. \u81ea\u52a8\u5de5\u5177\u53d1\u73b0\u548c\u6ce8\u518c (mcp-server)","text":"<p>\u6587\u4ef6: <code>mcp-server/src/main/java/com/nacos/mcp/server/config/McpRouterRegistrationConfig.java</code></p> <p>\u529f\u80fd: - \u81ea\u52a8\u53d1\u73b0\u5de5\u5177: \u901a\u8fc7\u53cd\u5c04\u81ea\u52a8\u626b\u63cf<code>PersonTools</code>\u7c7b\u4e2d\u7684\u6240\u6709\u516c\u5171\u65b9\u6cd5 - \u5de5\u5177\u5143\u6570\u636e\u751f\u6210: \u81ea\u52a8\u5206\u6790\u65b9\u6cd5\u53c2\u6570\u548c\u8fd4\u56de\u7c7b\u578b\uff0c\u751f\u6210\u8be6\u7ec6\u7684\u5de5\u5177\u63cf\u8ff0 - \u81ea\u52a8\u6ce8\u518c: \u542f\u52a8\u65f6\u5411mcp-router\u6ce8\u518c\u670d\u52a1\u548c\u6240\u6709\u5de5\u5177 - \u5b9a\u65f6\u5fc3\u8df3: \u6bcf30\u79d2\u53d1\u9001\u5fc3\u8df3\u4fdd\u6301\u8fde\u63a5\u72b6\u6001 - \u4f18\u96c5\u5173\u95ed: \u5e94\u7528\u5173\u95ed\u65f6\u81ea\u52a8\u6ce8\u9500\u670d\u52a1</p> <p>\u53d1\u73b0\u7684\u5de5\u5177: <pre><code>{\n  \"getPersonById\": \"\u6839\u636eID\u67e5\u627e\u6307\u5b9a\u7684\u4eba\u5458\u4fe1\u606f\",\n  \"getAllPersons\": \"\u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u6240\u6709\u4eba\u5458\u7684\u5217\u8868\",\n  \"getPersonsByNationality\": \"\u6839\u636e\u56fd\u7c4d\u67e5\u627e\u7b26\u5408\u6761\u4ef6\u7684\u6240\u6709\u4eba\u5458\",\n  \"countPersonsByNationality\": \"\u7edf\u8ba1\u6307\u5b9a\u56fd\u7c4d\u7684\u4eba\u5458\u603b\u6570\",\n  \"addPerson\": \"\u5411\u6570\u636e\u5e93\u6dfb\u52a0\u65b0\u7684\u4eba\u5458\u8bb0\u5f55\",\n  \"deletePerson\": \"\u6839\u636eID\u5220\u9664\u6307\u5b9a\u7684\u4eba\u5458\u8bb0\u5f55\"\n}\n</code></pre></p>"},{"location":"archived/TODO/TODO05/#2-mcp-router","title":"2. \u5de5\u5177\u6ce8\u518c\u548c\u9a8c\u8bc1\u63a5\u53e3 (mcp-router)","text":"<p>\u6587\u4ef6: <code>mcp-router/src/main/java/com/nacos/mcp/router/controller/McpRouterController.java</code></p> <p>\u65b0\u589eAPI\u7aef\u70b9:</p>"},{"location":"archived/TODO/TODO05/#_3","title":"\u5de5\u5177\u6ce8\u518c","text":"<ul> <li><code>POST /api/mcp/servers/{serverName}/tools/register</code> - \u63a5\u6536\u5de5\u5177\u6ce8\u518c\u8bf7\u6c42</li> <li><code>GET /api/mcp/tools</code> - \u83b7\u53d6\u6240\u6709\u5df2\u6ce8\u518c\u5de5\u5177\u5217\u8868</li> </ul>"},{"location":"archived/TODO/TODO05/#_4","title":"\u5de5\u5177\u9a8c\u8bc1","text":"<ul> <li><code>GET /api/mcp/tools/{toolName}/verify</code> - \u9a8c\u8bc1\u6307\u5b9a\u5de5\u5177\u6ce8\u518c\u72b6\u6001</li> </ul>"},{"location":"archived/TODO/TODO05/#_5","title":"\u5065\u5eb7\u5ea6\u68c0\u67e5","text":"<ul> <li><code>GET /api/mcp/tools/{toolName}/health</code> - \u68c0\u67e5\u5355\u4e2a\u5de5\u5177\u5065\u5eb7\u5ea6</li> <li><code>GET /api/mcp/tools/health/batch</code> - \u6279\u91cf\u68c0\u67e5\u6240\u6709\u5de5\u5177\u5065\u5eb7\u5ea6</li> </ul>"},{"location":"archived/TODO/TODO05/#3-mcp-client","title":"3. \u667a\u80fd\u5065\u5eb7\u68c0\u67e5\u8c03\u7528 (mcp-client)","text":"<p>\u6587\u4ef6: <code>mcp-client/src/main/java/com/nacos/mcp/client/service/McpRouterService.java</code></p> <p>\u6838\u5fc3\u65b9\u6cd5: - <code>callToolWithHealthCheck()</code> - \u5148\u68c0\u67e5\u5065\u5eb7\u5ea6\u518d\u8c03\u7528\u5de5\u5177 - <code>checkToolHealth()</code> - \u68c0\u67e5\u5de5\u5177\u5065\u5eb7\u5ea6 - <code>verifyToolRegistration()</code> - \u9a8c\u8bc1\u5de5\u5177\u6ce8\u518c\u72b6\u6001 - <code>checkAllToolsHealth()</code> - \u6279\u91cf\u5065\u5eb7\u68c0\u67e5</p> <p>\u6587\u4ef6: <code>mcp-client/src/main/java/com/nacos/mcp/client/controller/PersonController.java</code></p> <p>\u65b0\u589e\u7aef\u70b9: - <code>GET /tools/{toolName}/health</code> - \u68c0\u67e5\u5de5\u5177\u5065\u5eb7\u5ea6 - <code>GET /tools/health/batch</code> - \u6279\u91cf\u5065\u5eb7\u68c0\u67e5 - <code>GET /tools/{toolName}/verify</code> - \u9a8c\u8bc1\u5de5\u5177\u6ce8\u518c - <code>GET /tools</code> - \u83b7\u53d6\u5de5\u5177\u5217\u8868 - <code>GET /persons/{id}/with-health-check</code> - \u5e26\u5065\u5eb7\u68c0\u67e5\u7684\u4eba\u5458\u67e5\u8be2 - <code>GET /test/tool-chain/{toolName}</code> - \u5b8c\u6574\u5de5\u5177\u94fe\u6d4b\u8bd5</p>"},{"location":"archived/TODO/TODO05/#_6","title":"\ud83d\ude80 \u7cfb\u7edf\u542f\u52a8\u548c\u6d4b\u8bd5","text":""},{"location":"archived/TODO/TODO05/#_7","title":"\u542f\u52a8\u987a\u5e8f","text":"<ol> <li> <p>\u542f\u52a8Nacos (\u7aef\u53e3 8848)    <pre><code>cd mcp-router &amp;&amp; ./start-nacos.sh\n</code></pre></p> </li> <li> <p>\u542f\u52a8MCP Router (\u7aef\u53e3 8050)    <pre><code>cd mcp-router &amp;&amp; mvn spring-boot:run\n</code></pre></p> </li> <li> <p>\u542f\u52a8MCP Server (\u7aef\u53e3 8060)    <pre><code>cd mcp-server &amp;&amp; mvn spring-boot:run\n</code></pre>    \u542f\u52a8\u65e5\u5fd7\u5e94\u663e\u793a\uff1a    <pre><code>\u5f00\u59cb\u5411MCP Router\u6ce8\u518c\u670d\u52a1\u548c\u5de5\u5177: person-mcp-server\n\u6210\u529f\u6ce8\u518c 6 \u4e2a\u5de5\u5177\u5230MCP Router\n\u5df2\u6ce8\u518c\u5de5\u5177: getPersonById - \u6839\u636eID\u67e5\u627e\u6307\u5b9a\u7684\u4eba\u5458\u4fe1\u606f\n\u5df2\u6ce8\u518c\u5de5\u5177: getAllPersons - \u83b7\u53d6\u6570\u636e\u5e93\u4e2d\u6240\u6709\u4eba\u5458\u7684\u5217\u8868\n...\n</code></pre></p> </li> <li> <p>\u542f\u52a8MCP Client (\u7aef\u53e3 8070)    <pre><code>cd mcp-client &amp;&amp; mvn spring-boot:run\n</code></pre></p> </li> </ol>"},{"location":"archived/TODO/TODO05/#_8","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":""},{"location":"archived/TODO/TODO05/#1","title":"1. \u9a8c\u8bc1\u5de5\u5177\u6ce8\u518c\u72b6\u6001","text":"<pre><code># \u9a8c\u8bc1getPersonById\u5de5\u5177\u6ce8\u518c\ncurl http://localhost:8070/tools/getPersonById/verify\n\n# \u9884\u671f\u54cd\u5e94\n{\n  \"toolName\": \"getPersonById\",\n  \"registered\": true,\n  \"status\": \"REGISTERED\",\n  \"message\": \"\u5de5\u5177\u5df2\u6210\u529f\u6ce8\u518c\u5230\u7cfb\u7edf\",\n  \"timestamp\": 1704676800000\n}\n</code></pre>"},{"location":"archived/TODO/TODO05/#2","title":"2. \u68c0\u67e5\u5de5\u5177\u5065\u5eb7\u5ea6","text":"<pre><code># \u68c0\u67e5\u5355\u4e2a\u5de5\u5177\u5065\u5eb7\u5ea6\ncurl http://localhost:8070/tools/getPersonById/health\n\n# \u9884\u671f\u54cd\u5e94\n{\n  \"toolName\": \"getPersonById\",\n  \"status\": \"HEALTHY\",\n  \"healthy\": true,\n  \"lastChecked\": 1704676800000,\n  \"responseTime\": \"&lt; 100ms\",\n  \"availability\": \"99.9%\"\n}\n</code></pre>"},{"location":"archived/TODO/TODO05/#3","title":"3. \u6279\u91cf\u5065\u5eb7\u68c0\u67e5","text":"<pre><code># \u68c0\u67e5\u6240\u6709\u5de5\u5177\u5065\u5eb7\u5ea6\ncurl http://localhost:8070/tools/health/batch\n\n# \u9884\u671f\u54cd\u5e94\n{\n  \"totalTools\": 5,\n  \"healthyTools\": 5,\n  \"unhealthyTools\": 0,\n  \"overallHealthy\": true,\n  \"healthPercentage\": 100.0,\n  \"tools\": [\n    {\n      \"toolName\": \"getPersonById\",\n      \"status\": \"HEALTHY\",\n      \"healthy\": true,\n      \"responseTime\": \"&lt; 50ms\"\n    }\n    // ... \u5176\u4ed6\u5de5\u5177\n  ],\n  \"timestamp\": 1704676800000\n}\n</code></pre>"},{"location":"archived/TODO/TODO05/#4","title":"4. \u5e26\u5065\u5eb7\u68c0\u67e5\u7684\u5de5\u5177\u8c03\u7528","text":"<pre><code># \u5e26\u5065\u5eb7\u68c0\u67e5\u83b7\u53d6\u4eba\u5458\u4fe1\u606f\ncurl http://localhost:8070/persons/1/with-health-check\n\n# \u9884\u671f\u54cd\u5e94\n{\n  \"success\": true,\n  \"data\": {\n    \"id\": 1,\n    \"firstName\": \"John\",\n    \"lastName\": \"Doe\",\n    \"age\": 30,\n    \"nationality\": \"American\",\n    \"gender\": \"Male\"\n  },\n  \"healthChecked\": true,\n  \"healthStatus\": {\n    \"toolName\": \"getPersonById\",\n    \"status\": \"HEALTHY\",\n    \"healthy\": true\n  }\n}\n</code></pre>"},{"location":"archived/TODO/TODO05/#5","title":"5. \u5b8c\u6574\u5de5\u5177\u94fe\u6d4b\u8bd5","text":"<pre><code># \u6d4b\u8bd5\u5b8c\u6574\u5de5\u5177\u94fe\uff1a\u6ce8\u518c\u9a8c\u8bc1 -&gt; \u5065\u5eb7\u68c0\u67e5 -&gt; \u5de5\u5177\u8c03\u7528\ncurl http://localhost:8070/test/tool-chain/getPersonById\n\n# \u9884\u671f\u54cd\u5e94\n{\n  \"toolName\": \"getPersonById\",\n  \"success\": true,\n  \"step\": \"completed\",\n  \"message\": \"\u5de5\u5177\u94fe\u6d4b\u8bd5\u5b8c\u6210\",\n  \"verification\": {\n    \"toolName\": \"getPersonById\",\n    \"registered\": true,\n    \"status\": \"REGISTERED\"\n  },\n  \"healthCheck\": {\n    \"toolName\": \"getPersonById\",\n    \"status\": \"HEALTHY\",\n    \"healthy\": true\n  },\n  \"toolResult\": {\n    \"success\": true,\n    \"data\": { ... }\n  },\n  \"timestamp\": 1704676800000\n}\n</code></pre>"},{"location":"archived/TODO/TODO05/#_9","title":"\ud83c\udfd7\ufe0f \u67b6\u6784\u6d41\u7a0b","text":""},{"location":"archived/TODO/TODO05/#_10","title":"\u6ce8\u518c\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant MS as MCP Server\n    participant MR as MCP Router\n    participant N as Nacos\n\n    Note over MS: \u542f\u52a8\u65f6\u81ea\u52a8\u53d1\u73b0\u5de5\u5177\n    MS-&gt;&gt;MS: \u626b\u63cfPersonTools\u7c7b\u65b9\u6cd5\n    MS-&gt;&gt;MS: \u751f\u6210\u5de5\u5177\u5143\u6570\u636e\n    MS-&gt;&gt;MR: POST /servers/{name}/tools/register\n    Note over MR: \u63a5\u6536\u5de5\u5177\u6ce8\u518c\u8bf7\u6c42\n    MR-&gt;&gt;MR: \u5b58\u50a8\u5de5\u5177\u4fe1\u606f\n    MR--&gt;&gt;MS: \u6ce8\u518c\u6210\u529f\u54cd\u5e94\n\n    loop \u6bcf30\u79d2\n        MS-&gt;&gt;MR: POST /servers/heartbeat\n        MR--&gt;&gt;MS: \u5fc3\u8df3\u54cd\u5e94\n    end\n</code></pre>"},{"location":"archived/TODO/TODO05/#_11","title":"\u8c03\u7528\u6d41\u7a0b","text":"<pre><code>sequenceDiagram\n    participant MC as MCP Client\n    participant MR as MCP Router\n    participant MS as MCP Server\n\n    MC-&gt;&gt;MR: GET /tools/{toolName}/health\n    MR--&gt;&gt;MC: \u5065\u5eb7\u72b6\u6001\u54cd\u5e94\n\n    alt \u5065\u5eb7\u68c0\u67e5\u901a\u8fc7\n        MC-&gt;&gt;MR: POST /servers/{name}/tools/{tool}\n        MR-&gt;&gt;MS: \u4ee3\u7406\u8c03\u7528\u5b9e\u9645\u5de5\u5177\n        MS--&gt;&gt;MR: \u5de5\u5177\u6267\u884c\u7ed3\u679c\n        MR--&gt;&gt;MC: \u8fd4\u56de\u7ed3\u679c+\u5065\u5eb7\u72b6\u6001\n    else \u5065\u5eb7\u68c0\u67e5\u5931\u8d25\n        MC--&gt;&gt;MC: \u8fd4\u56de\u5065\u5eb7\u68c0\u67e5\u5931\u8d25\u9519\u8bef\n    end\n</code></pre>"},{"location":"archived/TODO/TODO05/#_12","title":"\ud83d\udcca \u7cfb\u7edf\u7279\u6027","text":""},{"location":"archived/TODO/TODO05/#_13","title":"\u2705 \u5df2\u5b9e\u73b0\u529f\u80fd","text":"<ol> <li>\u81ea\u52a8\u5de5\u5177\u53d1\u73b0: \u4f7f\u7528\u53cd\u5c04\u81ea\u52a8\u626b\u63cf\u548c\u6ce8\u518c\u5de5\u5177\u65b9\u6cd5</li> <li>\u667a\u80fd\u5143\u6570\u636e\u751f\u6210: \u81ea\u52a8\u5206\u6790\u53c2\u6570\u7c7b\u578b\u548c\u751f\u6210\u63cf\u8ff0\u4fe1\u606f</li> <li>\u53cc\u91cd\u9a8c\u8bc1: \u6ce8\u518c\u9a8c\u8bc1 + \u5065\u5eb7\u5ea6\u68c0\u67e5</li> <li>\u5b9e\u65f6\u5065\u5eb7\u76d1\u63a7: \u652f\u6301\u5355\u4e2a\u548c\u6279\u91cf\u5065\u5eb7\u68c0\u67e5</li> <li>\u4f18\u96c5\u964d\u7ea7: \u5065\u5eb7\u68c0\u67e5\u5931\u8d25\u65f6\u63d0\u4f9b\u8be6\u7ec6\u9519\u8bef\u4fe1\u606f</li> <li>\u5b8c\u6574\u65e5\u5fd7\u8bb0\u5f55: \u8be6\u7ec6\u7684\u64cd\u4f5c\u65e5\u5fd7\u548c\u9519\u8bef\u8ddf\u8e2a</li> <li>RESTful API: \u6807\u51c6\u5316\u7684HTTP\u63a5\u53e3\u8bbe\u8ba1</li> </ol>"},{"location":"archived/TODO/TODO05/#_14","title":"\ud83d\udd27 \u914d\u7f6e\u8981\u70b9","text":"<p>mcp-server <code>application.yml</code>: <pre><code>mcp:\n  server:\n    router:\n      auto-register: true  # \u542f\u7528\u81ea\u52a8\u6ce8\u518c\n</code></pre></p> <p>\u5173\u952e\u670d\u52a1\u7aef\u53e3: - Nacos: 8848 - MCP Router: 8050 - MCP Server: 8060 - MCP Client: 8070</p>"},{"location":"archived/TODO/TODO05/#_15","title":"\ud83c\udfaf \u4f7f\u7528\u573a\u666f","text":"<ol> <li>\u5f00\u53d1\u8c03\u8bd5: \u4f7f\u7528\u5de5\u5177\u94fe\u6d4b\u8bd5\u9a8c\u8bc1\u6574\u4e2a\u6d41\u7a0b</li> <li>\u751f\u4ea7\u76d1\u63a7: \u5b9a\u671f\u8c03\u7528\u6279\u91cf\u5065\u5eb7\u68c0\u67e5\u76d1\u63a7\u7cfb\u7edf\u72b6\u6001</li> <li>\u6545\u969c\u6392\u67e5: \u901a\u8fc7\u9a8c\u8bc1\u63a5\u53e3\u68c0\u67e5\u5de5\u5177\u6ce8\u518c\u72b6\u6001</li> <li>\u6027\u80fd\u4f18\u5316: \u901a\u8fc7\u5065\u5eb7\u68c0\u67e5\u83b7\u53d6\u54cd\u5e94\u65f6\u95f4\u4fe1\u606f</li> <li>\u81ea\u52a8\u5316\u8fd0\u7ef4: \u96c6\u6210\u5230CI/CD\u6d41\u7a0b\u4e2d\u8fdb\u884c\u81ea\u52a8\u5316\u6d4b\u8bd5</li> </ol>"},{"location":"archived/TODO/TODO05/#_16","title":"\ud83d\udea7 \u540e\u7eed\u4f18\u5316\u5efa\u8bae","text":"<ol> <li>\u6570\u636e\u6301\u4e45\u5316: \u5c06\u5de5\u5177\u6ce8\u518c\u4fe1\u606f\u5b58\u50a8\u5230\u6570\u636e\u5e93</li> <li>\u7f13\u5b58\u4f18\u5316: \u6dfb\u52a0Redis\u7f13\u5b58\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd</li> <li>\u76d1\u63a7\u544a\u8b66: \u96c6\u6210Prometheus/Grafana\u76d1\u63a7</li> <li>\u8d1f\u8f7d\u5747\u8861: \u652f\u6301\u591a\u5b9e\u4f8b\u5de5\u5177\u7684\u8d1f\u8f7d\u5747\u8861</li> <li>\u5b89\u5168\u589e\u5f3a: \u6dfb\u52a0\u8ba4\u8bc1\u548c\u6743\u9650\u63a7\u5236\u673a\u5236</li> </ol> <p>\u7cfb\u7edf\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210\u5b9e\u73b0\u548c\u6d4b\u8bd5\u9a8c\u8bc1 \u6700\u540e\u66f4\u65b0: 2024\u5e741\u6708</p>"},{"location":"archived/TODO/TODO06/","title":"TODO06","text":"<p>\u53c2\u8003\u4ee5\u4e0b\u6587\u7ae0\uff0c\u91cd\u65b0\u5ba1\u89c6\u6240\u6709\u9879\u76ee\u7684\u95ee\u9898\u548c\u6539\u8fdb\u65b9\u5411\u3002 https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_gg16sv97bgirkixe/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_qdi918msnqbvonx2/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://modelcontextprotocol.io/sdk/java/mcp-overview https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-helpers.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html</p> <p>mcp-client \u8bf7\u6c42 mcp server \u7684tool\u65f6\uff0c\u8981\u901a\u8fc7mcp-router\u8c03\u7528\uff0c mcp-server \u542f\u52a8\u4e4b\u540e\uff0c\u8981\u52a8\u6001\u6ce8\u518c\u5230mcp-router\u4e0a\uff0c\u540c\u65f6\u80fd\u58f0\u660etoolProvide</p>"},{"location":"archived/TODO/TODO07/","title":"TODO07","text":"<p>\u53c2\u8003\u6587\u6863\uff1a https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_gg16sv97bgirkixe/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_qdi918msnqbvonx2/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://modelcontextprotocol.io/sdk/java/mcp-overview https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-helpers.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html</p> <p>\u4ece\u73b0\u5728\u5f00\u59cbmcp-server\u4e0d\u518d\u4fee\u6539\uff0c\u4f5c\u4e3a\u53c2\u8003 \u4ecepom.xml \u6682\u65f6\u6ce8\u91ca\u6389\uff0c\u4e0d\u53c2\u4e0eparent\u6a21\u5757\u7684\u7f16\u8bd1\u3002 \u521b\u5efa\u65b0\u6a21\u5757mcp-server-v2 \u4e0e mcp-server\u6709\u76f8\u540c\u7684\u529f\u80fd\uff0c\u800cmcp-server-v2\u5b9e\u73b0\u65f6\uff0c\u907f\u514d\u624b\u52a8\u5b9e\u73b0MCP\u529f\u80fd\uff0c\u4f7f\u7528spring-ai-alibaba\u7684\u73b0\u6210\u7684\u80fd\u529b</p> <p>\u5148\u5206\u6790 spring-ai-alibaba-mcp \u7684\u80fd\u529b\uff0c \u53c2\u8003\u5730\u5740\uff1ahttps://github.com/alibaba/spring-ai-alibaba/tree/main/spring-ai-alibaba-mcp/ </p> <p>\u9700\u8981\u6ee1\u8db3\u4ee5\u4e0b\u5efa\u8bae\uff1a</p> <p>\u76ee\u524d\u9879\u76ee\u7684\u5b9e\u73b0\u6ee1\u8db3\u4e86 <code>TODO06.md</code> \u4e2d\u6700\u6838\u5fc3\u7684\u8981\u6c42\uff1a *   <code>mcp-server</code> \u80fd\u591f\u901a\u8fc7 <code>mcp-router</code> \u81ea\u52a8\u6ce8\u518c\u3002 *   <code>mcp-server</code> \u5728\u6ce8\u518c\u65f6\u80fd\u591f\u58f0\u660e\u81ea\u5df1\u63d0\u4f9b\u7684\u5de5\u5177 (<code>Tool</code>s)\u3002 *   <code>mcp-client</code> \u80fd\u591f\u901a\u8fc7 <code>mcp-router</code> \u8c03\u7528 <code>mcp-server</code> \u4e0a\u7684\u5de5\u5177\u3002</p> <p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u57fa\u7840\u3002\u4f46\u662f\uff0c\u5728\u6df1\u5165\u5206\u6790\u4e86\u4ee3\u7801\u5e76\u5bf9\u7167\u4e86 Spring AI \u548c Nacos \u7684\u5b98\u65b9\u6587\u6863\u540e\uff0c\u6211\u53d1\u73b0\u5f53\u524d\u9879\u76ee\u5728\u8bbe\u8ba1\u548c\u5b9e\u73b0\u4e0a\u5b58\u5728\u4e00\u4e9b\u5173\u952e\u7684\u4e0d\u8db3\u4e4b\u5904\u3002\u6700\u6838\u5fc3\u7684\u95ee\u9898\u662f\uff1a\u9879\u76ee\u51e0\u4e4e\u6240\u6709 MCP \u76f8\u5173\u7684\u529f\u80fd\u90fd\u662f\u901a\u8fc7\u81ea\u5b9a\u4e49\u4ee3\u7801\u624b\u52a8\u5b9e\u73b0\u7684\uff0c\u800c\u6ca1\u6709\u5229\u7528 Spring AI \u5b98\u65b9\u63d0\u4f9b\u7684\u3001\u66f4\u7a33\u5b9a\u3001\u66f4\u7b80\u6d01\u7684 starter \u7ec4\u4ef6\u3002</p> <p>\u4ee5\u4e0b\u662f\u6211\u8bc6\u522b\u51fa\u7684\u51e0\u4e2a\u4e3b\u8981\u6539\u8fdb\u65b9\u5411\uff1a</p>"},{"location":"archived/TODO/TODO07/#1-mcp-spring-ai-starter","title":"1. \u6838\u5fc3\u77ed\u677f\uff1a\u624b\u52a8\u5b9e\u73b0 MCP \u529f\u80fd\uff0c\u800c\u975e\u4f7f\u7528\u5b98\u65b9 Spring AI Starter","text":"<p>\u8fd9\u662f\u5f53\u524d\u9879\u76ee\u6700\u5927\u7684\u95ee\u9898\u3002\u6211\u4eec\u82b1\u8d39\u4e86\u5927\u91cf\u7cbe\u529b\u7f16\u5199\u548c\u8c03\u8bd5\u4e86\u975e\u5e38\u590d\u6742\u7684\u81ea\u5b9a\u4e49\u4ee3\u7801\u6765\u5904\u7406 MCP \u7684\u670d\u52a1\u6ce8\u518c\u3001\u5de5\u5177\u53d1\u73b0\u548c\u5fc3\u8df3\u673a\u5236\u3002\u5c24\u5176\u662f\u5728 <code>mcp-server</code> \u6a21\u5757\u4e2d\u7684 <code>McpRouterRegistrationConfig</code> \u548c <code>McpServerRegistrationInvoker</code> \u8fd9\u4e24\u4e2a\u7c7b\uff0c\u5b83\u4eec\u5b9e\u9645\u4e0a\u662f\u624b\u52a8\u91cd\u65b0\u5b9e\u73b0\u4e86\u4e00\u904d <code>spring-ai-mcp-server-spring-boot-starter</code> \u63d0\u4f9b\u7684\u6838\u5fc3\u529f\u80fd\u3002</p> <p>\u8fd9\u5e26\u6765\u4e86\u51e0\u4e2a\u4e25\u91cd\u95ee\u9898\uff1a</p> <ul> <li>\u8fc7\u9ad8\u7684\u590d\u6742\u5ea6\u548c\u5927\u91cf\u7684\u6837\u677f\u4ee3\u7801\uff1a<code>McpRouterRegistrationConfig</code> \u8fd9\u4e2a\u7c7b\u975e\u5e38\u5e9e\u5927\u548c\u590d\u6742\uff0c\u5b83\u624b\u52a8\u5904\u7406\u4e86 Spring \u7684\u751f\u547d\u5468\u671f\uff08<code>SmartLifecycle</code>\uff09\u3001\u901a\u8fc7\u53cd\u5c04\u673a\u5236\u626b\u63cf <code>@Tool</code> \u6ce8\u89e3\u3001\u901a\u8fc7 <code>@Scheduled</code> \u53d1\u9001\u5fc3\u8df3\u3001\u4ee5\u53ca\u624b\u52a8\u6784\u9020 HTTP \u8bf7\u6c42\u3002\u6240\u6709\u8fd9\u4e9b\u90fd\u5c5e\u4e8e\u6837\u677f\u4ee3\u7801\uff0c\u800c\u5b98\u65b9\u7684 starter \u6b63\u662f\u4e3a\u4e86\u6d88\u9664\u5b83\u4eec\u800c\u8bbe\u8ba1\u7684\u3002</li> <li>\u8106\u5f31\u4e14\u6613\u4e8e\u51fa\u9519\uff1a\u6211\u4eec\u521a\u624d\u4fee\u590d\u7684\u51e0\u4e4e\u6240\u6709 Bug\uff0c\u90fd\u6e90\u4e8e\u8fd9\u5957\u81ea\u5b9a\u4e49\u7684\u5b9e\u73b0\u3002\u4f8b\u5982\uff1a<ul> <li>\u542f\u52a8\u65f6\u7684\u670d\u52a1\u6ce8\u518c\u7ade\u4e89\u95ee\u9898\uff08\u6211\u4eec\u4e3a\u6b64\u5b9e\u73b0\u4e86\u590d\u6742\u7684\u91cd\u8bd5\u903b\u8f91\uff09\u3002</li> <li>\u670d\u52a1\u95f4\u7684\u5faa\u73af\u4f9d\u8d56\u95ee\u9898\u3002</li> <li>\u5fc3\u8df3\u673a\u5236\u7684\u5404\u79cd\u9519\u8bef\uff08\u65e5\u5fd7\u8bb0\u5f55\u4e0d\u5f53\u3001\u670d\u52a1\u540d\u9519\u8bef\u3001Nacos Group Name \u9519\u8bef\u7b49\uff09\u3002</li> </ul> </li> <li>\u9ad8\u6602\u7684\u7ef4\u62a4\u6210\u672c\uff1a\u8fd9\u90e8\u5206\u81ea\u5b9a\u4e49\u4ee3\u7801\u4e0d\u4ec5\u96be\u4ee5\u7ef4\u62a4\uff0c\u800c\u4e14\u672a\u6765\u5f88\u53ef\u80fd\u4e0e\u5b98\u65b9\u7684 MCP \u534f\u8bae\u4ea7\u751f\u504f\u5dee\uff0c\u5bfc\u81f4\u6f5c\u5728\u7684\u517c\u5bb9\u6027\u95ee\u9898\u3002</li> </ul> <p>\u6211\u7684\u5efa\u8bae\uff1a</p> <p>\u6211\u5f3a\u70c8\u5efa\u8bae\u5bf9 <code>mcp-server</code> \u9879\u76ee\u8fdb\u884c\u91cd\u6784\uff0c\u5168\u9762\u91c7\u7528\u5b98\u65b9\u7684 <code>spring-ai-mcp-server-spring-boot-starter</code>\u3002\u8fd9\u6837\u505a\u4f1a\u5e26\u6765\u5de8\u5927\u7684\u597d\u5904\uff1a</p> <ul> <li>\u5220\u9664\u5927\u91cf\u5197\u4f59\u4ee3\u7801\uff0c\u7279\u522b\u662f <code>McpRouterRegistrationConfig</code> \u53ca\u5176\u76f8\u5173\u7684\u6240\u6709\u590d\u6742\u903b\u8f91\u3002</li> <li>\u901a\u8fc7\u5728 <code>application.yml</code> \u4e2d\u8fdb\u884c\u7b80\u5355\u7684\u914d\u7f6e\uff0c\u81ea\u52a8\u5316\u5b9e\u73b0\u670d\u52a1\u6ce8\u518c\u548c\u5de5\u5177\u58f0\u660e\u3002</li> <li>\u81ea\u52a8\u5904\u7406\u6807\u51c6\u7684\u5fc3\u8df3\u673a\u5236\u3002</li> <li>\u786e\u4fdd\u9879\u76ee\u4e25\u683c\u9075\u5faa\u5b98\u65b9 MCP \u534f\u8bae\uff0c\u63d0\u5347\u5176\u7a33\u5b9a\u6027\u548c\u4e92\u64cd\u4f5c\u6027\u3002</li> </ul>"},{"location":"archived/TODO/TODO07/#2","title":"2. \u6b21\u8981\u77ed\u677f\uff1a\u786c\u7f16\u7801\u4e0e\u4e0d\u7075\u6d3b\u7684\u914d\u7f6e","text":"<p>\u5728\u5f53\u524d\u9879\u76ee\u4e2d\uff0c\u8bb8\u591a\u5173\u952e\u7684\u914d\u7f6e\u503c\u88ab\u76f4\u63a5\u786c\u7f16\u7801\u5728\u4e86 Java \u4ee3\u7801\u91cc\u3002</p> <p>\u5177\u4f53\u4f8b\u5b50\uff1a</p> <ul> <li>\u5728 <code>McpServerServiceImpl</code> \u4e2d\uff0cNacos \u7684\u7ec4\u540d <code>MCP_SERVER_GROUP</code> \u548c <code>TOOLS_CONFIG_GROUP</code> \u662f\u4f5c\u4e3a <code>private static final String</code> \u5b58\u5728\u7684\u3002</li> <li>\u5728 <code>McpRouterRegistrationConfig</code> \u4e2d\uff0c\u670d\u52a1\u6ce8\u9500\u7684 URL \u662f\u901a\u8fc7\u5b57\u7b26\u4e32\u62fc\u63a5\u624b\u52a8\u6784\u9020\u7684\u3002</li> </ul> <p>\u6211\u7684\u5efa\u8bae\uff1a</p> <p>\u6240\u6709\u53ef\u914d\u7f6e\u7684\u53c2\u6570\u90fd\u5e94\u8be5\u88ab\u79fb\u5230 <code>application.yml</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u8fd9\u4f7f\u5f97\u5e94\u7528\u5728\u4e0d\u540c\u73af\u5883\u4e0b\u90e8\u7f72\u548c\u7ba1\u7406\u65f6\u53d8\u5f97\u66f4\u52a0\u7075\u6d3b\uff0c\u65e0\u9700\u4fee\u6539\u4efb\u4f55\u4ee3\u7801\u3002</p>"},{"location":"archived/TODO/TODO07/#3","title":"3. \u5176\u4ed6\u95ee\u9898\uff1a\u4ee3\u7801\u548c\u9879\u76ee\u7ed3\u6784","text":"<ul> <li>\u91cd\u590d\u4ee3\u7801\uff1a<code>mcp-router</code> \u9879\u76ee\u7684 <code>src/main/a</code> \u76ee\u5f55\u4e0b\u5b58\u5728\u4e00\u4e2a\u91cd\u590d\u7684 <code>McpRouterController.java</code> \u6587\u4ef6\u3002\u8fd9\u79cd\u91cd\u590d\u4ee3\u7801\u662f\u6f5c\u5728\u7684 Bug \u6e90\u5934\uff0c\u5e94\u8be5\u88ab\u6e05\u7406\u3002</li> <li>\u8bbe\u8ba1\u7f3a\u9677\uff1a\u6211\u4eec\u4e4b\u524d\u4fee\u590d\u7684\u201c\u5faa\u73af\u4f9d\u8d56\u201d\u95ee\u9898\u662f\u5178\u578b\u7684\u8bbe\u8ba1\u7f3a\u9677\u4fe1\u53f7\u3002\u867d\u7136\u6211\u4eec\u901a\u8fc7 <code>ApplicationContext</code> \u89e3\u51b3\u4e86\u5b83\uff0c\u4f46\u8fd9\u672c\u8eab\u5c31\u8bf4\u660e\u4e86\u81ea\u5b9a\u4e49\u6ce8\u518c\u903b\u8f91\u7684\u8106\u5f31\u6027\u3002\u91c7\u7528\u5b98\u65b9 starter \u80fd\u4ece\u6839\u672c\u4e0a\u907f\u514d\u8fd9\u7c7b\u8bbe\u8ba1\u95ee\u9898\u3002</li> </ul>"},{"location":"archived/TODO/TODO07/#_1","title":"\u603b\u7ed3\u4e0e\u540e\u7eed\u6b65\u9aa4","text":"<p>\u603b\u800c\u8a00\u4e4b\uff0c\u5f53\u524d\u9879\u76ee\u867d\u7136\u529f\u80fd\u4e0a\u53ef\u4ee5\u8fd0\u884c\uff0c\u4f46\u5b83\u80cc\u8d1f\u7740\u6c89\u91cd\u7684\u6280\u672f\u503a\u52a1\u3002</p> <p>\u6211\u7684\u6838\u5fc3\u5efa\u8bae\u662f\uff1a\u5168\u9762\u62e5\u62b1 Spring AI \u751f\u6001\uff0c\u901a\u8fc7\u5b98\u65b9\u7684 MCP starter \u6765\u91cd\u6784\u9879\u76ee\u3002\u8fd9\u5b8c\u5168\u7b26\u5408\u60a8\u63d0\u4f9b\u7684\u5b98\u65b9\u6587\u6863\u6307\u5f15\uff0c\u5e76\u5c06\u4f7f\u6574\u4e2a\u9879\u76ee\u53d8\u5f97\u66f4\u52a0\u5065\u58ee\u3001\u6613\u4e8e\u7ef4\u62a4\u4e14\u7b26\u5408\u884c\u4e1a\u6807\u51c6\u3002</p> <p>\u5982\u679c\u60a8\u540c\u610f\uff0c\u6211\u4eec\u53ef\u4ee5\u7acb\u5373\u5f00\u59cb\u8fd9\u9879\u91cd\u6784\u5de5\u4f5c\u3002\u7b2c\u4e00\u6b65\u5c06\u662f\u4fee\u6539 <code>pom.xml</code> \u6587\u4ef6\uff0c\u5f15\u5165\u6b63\u786e\u7684 Spring AI \u4f9d\u8d56\uff0c\u7136\u540e\u79fb\u9664\u90a3\u4e9b\u5197\u4f59\u3001\u590d\u6742\u7684\u81ea\u5b9a\u4e49\u4ee3\u7801\u3002</p> <p>\u60a8\u5e0c\u671b\u5982\u4f55\u8fdb\u884c\uff1f</p>"},{"location":"archived/TODO/TODO08/","title":"TODO08","text":"<p>\u9879\u76ee\u5b9e\u73b0\u5fc5\u987b\u53c2\u8003\uff1a https://github.com/alibaba/spring-ai-alibaba/tree/main/spring-ai-alibaba-mcp/ </p> <p>\u5176\u4ed6\u53c2\u8003\u6587\u6863\uff1a https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_gg16sv97bgirkixe/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_qdi918msnqbvonx2/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog https://modelcontextprotocol.io/sdk/java/mcp-overview https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-helpers.html https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html https://github.com/alibaba/spring-ai-alibaba/tree/main/spring-ai-alibaba-mcp/ </p> <p>mcp-server-v2 \u4e2d\u653e\u5f00tool\u548ctoolParam\u6ce8\u91ca\uff0c\u9700\u8981\u58f0\u660emcp server\uff0c\u8fd9\u662f\u6838\u5fc3\u903b\u8f91 mcp-server-v2\u542f\u52a8\u540e\uff0c\u901a\u8fc7mcp-router\u6ce8\u518c\u5230nacos\u4e2d mcp-client\u8c03\u7528\u670d\u52a1\u65f6\uff0c\u901a\u8fc7mcp-router\u67e5\u8be2nacos\u4e0a\u7684\u6ce8\u518c\u4fe1\u606f\uff0c\u5bfb\u627e\u5bf9\u5e94\u7684mcp server\u670d\u52a1 mcp-router\u7aef\u53e3 8050\uff0c mcp-server-v2\u7aef\u53e3 8061\uff0cmcp-client\u7aef\u53e38070\uff0c\u4e0d\u8981\u4fee\u6539\u3002  \u9879\u76ee\u90fd\u4f7f\u7528\u54cd\u5e94\u5f0f\u7f16\u7a0b\uff0c\u4f9d\u8d56\u7684jar\u5305\u4e0d\u8981\u4f7f\u7528\u963b\u585e\u5f0f \u7f16\u8bd1\u65f6\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4     mvn -f mcp-server-v2/pom.xml clean install -nsu     mvn -f mcp-router/pom.xml clean install -nsu     mvn -f mcp-client/pom.xml clean install -nsu</p>"},{"location":"archived/TODO/TODO08_result/","title":"TODO08 result","text":""},{"location":"archived/TODO/TODO08_result/#_1","title":"\u9879\u76ee\u73b0\u72b6\u5206\u6790\u603b\u7ed3","text":"<p>\u7ecf\u8fc7\u5bf9\u9879\u76ee\u7684\u5168\u9762\u5ba1\u67e5\uff0c\u6211\u53d1\u73b0\u5f53\u524d\u5b9e\u73b0\u5df2\u7ecf\u4ece\u8fc7\u53bb\u7684\u624b\u52a8\u914d\u7f6e\u6f14\u8fdb\u4e3a\u66f4\u52a0\u81ea\u52a8\u5316\u3001\u57fa\u4e8e\u6ce8\u89e3\u7684\u73b0\u4ee3\u67b6\u6784\uff0c\u8fd9\u4e3b\u8981\u5f97\u76ca\u4e8e Spring AI Starter \u7684\u5f3a\u5927\u529f\u80fd\u3002\u60a8\u63d0\u4f9b\u7684 <code>TODO08.md</code> \u5728\u6838\u5fc3\u7406\u5ff5\u4e0a\u662f\u6b63\u786e\u7684\uff0c\u4f46\u5177\u4f53\u7684\u5b9e\u73b0\u7ec6\u8282\u5df2\u7ecf\u8fc7\u65f6\u3002</p> <p>\u4ee5\u4e0b\u662f\u5f53\u524d\u9879\u76ee\u7684\u6838\u5fc3\u903b\u8f91\uff1a</p> <ol> <li> <p><code>mcp-server-v2</code> (\u5de5\u5177\u63d0\u4f9b\u65b9):</p> <ul> <li>\u6838\u5fc3\u4f9d\u8d56: \u9879\u76ee\u5229\u7528 <code>spring-ai-starter-mcp-server-webflux</code> \u6765\u63d0\u4f9b MCP\uff08\u6a21\u578b\u4e0a\u4e0b\u6587\u534f\u8bae\uff09\u7684\u6838\u5fc3\u670d\u52a1\u80fd\u529b\u3002</li> <li>\u5de5\u5177\u5b9a\u4e49: \u8fc7\u53bb\u5728 <code>application.yml</code> \u4e2d\u5b9a\u4e49\u5de5\u5177\u7684\u65b9\u5f0f\u5df2\u88ab\u5e9f\u5f03\u3002\u73b0\u5728\uff0c\u5de5\u5177\u662f\u901a\u8fc7\u5728 <code>@Component</code> \u7c7b\u7684\u65b9\u6cd5\u4e0a\u4f7f\u7528 <code>@Tool</code> \u548c <code>@ToolParam</code> \u6ce8\u89e3\u6765\u58f0\u660e\u7684\u3002Spring AI \u4f1a\u81ea\u52a8\u626b\u63cf\u5e76\u53d1\u73b0\u8fd9\u4e9b\u6ce8\u89e3\uff0c\u5c06\u5176\u6ce8\u518c\u4e3a\u53ef\u7528\u7684\u5de5\u5177\u3002</li> <li>\u81ea\u52a8\u6ce8\u518c: <code>mcp-server-v2</code> \u5728 <code>application.yml</code> \u4e2d\u914d\u7f6e\u4e86\u81ea\u8eab\u7684\u670d\u52a1\u540d\u79f0 (<code>person-service-v2</code>) \u4ee5\u53ca <code>mcp-router</code> \u7684\u5730\u5740\u3002\u542f\u52a8\u540e\uff0c\u5b83\u4f1a\u81ea\u52a8\u5c06\u81ea\u8eab\u4ee5\u53ca\u6240\u6709\u901a\u8fc7\u6ce8\u89e3\u53d1\u73b0\u7684\u5de5\u5177\u6ce8\u518c\u5230 <code>mcp-router</code>\u3002</li> <li>\u5197\u4f59\u4ee3\u7801: <code>ToolController.java</code> \u73b0\u5728\u5f88\u53ef\u80fd\u662f\u4e00\u4e2a\u5197\u4f59\u7684\u7ec4\u4ef6\uff0c\u56e0\u4e3a\u5de5\u5177\u7684\u8c03\u7528\u5df2\u7ecf\u7531 Spring AI Starter \u63d0\u4f9b\u7684 <code>/mcp</code> \u7aef\u70b9\u7edf\u4e00\u5904\u7406\u3002</li> </ul> </li> <li> <p><code>mcp-router</code> (\u667a\u80fd\u8def\u7531\u4e2d\u5fc3):</p> <ul> <li>\u6838\u5fc3\u89d2\u8272: \u4f5c\u4e3a\u6574\u4e2a\u7cfb\u7edf\u7684\u552f\u4e00\u5165\u53e3\uff0c\u8d1f\u8d23\u63a5\u6536\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u6240\u6709\u8bf7\u6c42\u3002</li> <li>\u670d\u52a1\u53d1\u73b0: \u5b83\u8fde\u63a5\u5230 Nacos (<code>localhost:8848</code>)\uff0c\u52a8\u6001\u53d1\u73b0\u6240\u6709\u6ce8\u518c\u4e0a\u6765\u7684 <code>mcp-server</code> \u5b9e\u4f8b\u3002</li> <li>\u667a\u80fd\u8def\u7531: <code>mcp-router</code> \u7684 <code>application.yml</code> \u4e2d\u914d\u7f6e\u4e86 DeepSeek AI \u6a21\u578b\u3002\u8fd9\u8d4b\u4e88\u4e86\u5b83\u7406\u89e3\u81ea\u7136\u8bed\u8a00\u63d0\u793a\uff08Prompt\uff09\u7684\u80fd\u529b\uff0c\u5e76\u80fd\u667a\u80fd\u5730\u5c06\u8bf7\u6c42\u8def\u7531\u5230\u540e\u7aef\u6700\u5408\u9002\u7684 <code>mcp-server</code> \u4e0a\u7684\u5177\u4f53\u5de5\u5177\u3002\u5b83\u4e0d\u518d\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u53cd\u5411\u4ee3\u7406\uff0c\u800c\u662f\u4e00\u4e2a\u667a\u80fd\u8c03\u5ea6\u4e2d\u67a2\u3002</li> </ul> </li> <li> <p><code>mcp-client</code> (\u670d\u52a1\u6d88\u8d39\u65b9):</p> <ul> <li>\u4ea4\u4e92\u65b9\u5f0f: \u5ba2\u6237\u7aef\u4ec5\u4e0e <code>mcp-router</code> \u901a\u4fe1\uff0c\u5b8c\u5168\u65e0\u9700\u5173\u5fc3\u540e\u7aef\u7684\u670d\u52a1\u5b9e\u4f8b\u5177\u4f53\u5728\u54ea\u91cc\u3002</li> <li>\u8c03\u7528\u6d41\u7a0b: \u5ba2\u6237\u7aef\u5411 <code>mcp-router</code> \u53d1\u9001\u9ad8\u5c42\u7ea7\u7684\u81ea\u7136\u8bed\u8a00\u8bf7\u6c42\u3002<code>mcp-router</code> \u89e3\u6790\u8be5\u8bf7\u6c42\uff0c\u5e76\u7f16\u6392\u4e00\u4e2a\u6216\u591a\u4e2a\u540e\u7aef\u5de5\u5177\u6765\u5b8c\u6210\u4efb\u52a1\uff0c\u6700\u540e\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</li> </ul> </li> </ol> <p>\u8fd9\u4e2a\u67b6\u6784\u5f62\u6210\u4e86\u4e00\u4e2a\u73b0\u4ee3\u5316\u3001\u53ef\u6269\u5c55\u3001\u9ad8\u5185\u805a\u7684\u201c\u6a21\u578b\u5373\u670d\u52a1\u201d(Model-as-a-Service)\u4f53\u7cfb\u3002</p>"},{"location":"archived/TODO/TODO08_result/#_2","title":"\u67b6\u6784\u6d41\u7a0b\u56fe","text":"<p>\u4e0b\u56fe\u6e05\u6670\u5730\u5c55\u793a\u4e86\u5f53\u524d\u7cfb\u7edf\u7684\u4ea4\u4e92\u6d41\u7a0b\uff1a</p> <pre><code>graph TD;\n    subgraph \"\u7528\u6237 / \u5ba2\u6237\u7aef\"\n        A[\"mcp-client\"]\n    end\n\n    subgraph \"\u667a\u80fd\u8def\u7531\u5c42\"\n        B[\"mcp-router:8050\"] -- \"1. \u63a5\u6536\u8bf7\u6c42\" --&gt; B;\n        B -- \"4. \u667a\u80fd\u8def\u7531\u5230\u76ee\u6807\u670d\u52a1\" --&gt; C[\"mcp-server-v2:8061\"];\n    end\n\n    subgraph \"\u670d\u52a1\u53d1\u73b0\"\n        D[\"Nacos:8848\"]\n    end\n\n    subgraph \"\u5de5\u5177\u63d0\u4f9b\u65b9\"\n        C -- \"5. \u6267\u884c\u6ce8\u89e3\u58f0\u660e\u7684 @Tool\" --&gt; C;\n    end\n\n    A -- \"\u53d1\u9001\u81ea\u7136\u8bed\u8a00\u8bf7\u6c42\" --&gt; B;\n    C -- \"2. \u81ea\u52a8\u6ce8\u518c\u5de5\u5177\" --&gt; D;\n    B -- \"3. \u4ece Nacos \u53d1\u73b0\u670d\u52a1\" --&gt; D;\n    C -- \"6. \u8fd4\u56de\u6267\u884c\u7ed3\u679c\" --&gt; B;\n    B -- \"7. \u805a\u5408\u540e\u8fd4\u56de\u6700\u7ec8\u54cd\u5e94\" --&gt; A;\n\n    classDef default fill:#f9f9f9,stroke:#333,stroke-width:2px;\n    classDef client fill:#e0f7fa,stroke:#00796b;\n    classDef router fill:#fff9c4,stroke:#fbc02d;\n    classDef server fill:#fce4ec,stroke:#c2185b;\n    classDef nacos fill:#e8f5e9,stroke:#388e3c;\n\n    class A client;\n    class B router;\n    class C server;\n    class D nacos;\n</code></pre>"},{"location":"archived/TODO/TODO09/","title":"MCP \u7cfb\u7edf\u8bbe\u8ba1\u3001\u7f3a\u9677\u5206\u6790\u4e0e\u5f85\u529e\u4e8b\u9879 (TODO09)","text":"<p>\u672c\u6587\u6863\u57fa\u4e8e <code>TODO08.md</code> \u7684\u91cd\u6784\u5de5\u4f5c\u5b8c\u6210\u4e4b\u540e\uff0c\u5bf9\u5f53\u524d\u9879\u76ee\u7684\u72b6\u6001\u8fdb\u884c\u5168\u9762\u7684\u5206\u6790\u603b\u7ed3\uff0c\u65e8\u5728\u660e\u786e\u5f53\u524d\u7684\u7cfb\u7edf\u8bbe\u8ba1\uff0c\u5e76\u4e3a\u4e0b\u4e00\u9636\u6bb5\u7684\u5f00\u53d1\u63d0\u4f9b\u6e05\u6670\u7684\u6307\u5f15\u3002</p>"},{"location":"archived/TODO/TODO09/#1","title":"1. \u7cfb\u7edf\u8bbe\u8ba1\u4e0e\u67b6\u6784","text":"<p>\u7ecf\u8fc7\u91cd\u6784\uff0c\u7cfb\u7edf\u5df2\u7ecf\u6f14\u53d8\u4e3a\u4e00\u4e2a\u4ee5 <code>mcp-router</code> \u4e3a\u6838\u5fc3\uff0cNacos \u4e3a\u670d\u52a1\u6ce8\u518c\u4e0e\u53d1\u73b0\u4e2d\u5fc3\uff0c\u5b8c\u5168\u91c7\u7528\u54cd\u5e94\u5f0f\u7f16\u7a0b\u6a21\u578b\uff08Spring WebFlux\uff09\u7684\u73b0\u4ee3\u5316\u5fae\u670d\u52a1\u67b6\u6784\u3002</p>"},{"location":"archived/TODO/TODO09/#11","title":"1.1. \u6838\u5fc3\u7ec4\u4ef6","text":"<ul> <li> <p><code>mcp-client</code> (\u5ba2\u6237\u7aef)</p> <ul> <li>\u89d2\u8272: \u4e1a\u52a1\u53d1\u8d77\u65b9\uff0c\u662f\u6700\u7ec8\u7528\u6237\u6216\u4e0a\u6e38\u670d\u52a1\u7684\u5165\u53e3\u3002</li> <li>\u884c\u4e3a: \u5b83\u5c06\u4e1a\u52a1\u9700\u6c42\uff08\u5982\"\u67e5\u8be2\u6240\u6709\u7528\u6237\"\uff09\u5c01\u88c5\u6210 MCP JSON-RPC 2.0 \u683c\u5f0f\u7684\u8bf7\u6c42\uff0c\u5e76\u53d1\u9001\u7ed9 <code>mcp-router</code> \u7684\u7edf\u4e00\u5165\u53e3\u3002\u5b83\u4e0d\u5173\u5fc3\u5177\u4f53\u662f\u54ea\u4e2a\u4e0b\u6e38\u670d\u52a1\u6765\u6267\u884c\u3002</li> <li>\u5173\u952e\u4fee\u590d: \u6211\u4eec\u89e3\u51b3\u4e86 <code>@Value</code> \u6ce8\u5165\u65f6\u5e8f\u95ee\u9898\uff0c\u786e\u4fdd\u4e86\u5176\u5185\u90e8 <code>WebClient</code> \u88ab\u6b63\u786e\u521d\u59cb\u5316\uff0c\u4ece\u800c\u4fee\u590d\u4e86\u4e4b\u524d\u6240\u6709\u7684 <code>Connection Refused</code> \u9519\u8bef\u3002</li> </ul> </li> <li> <p><code>mcp-router</code> (\u667a\u80fd\u8def\u7531\u4e2d\u5fc3)</p> <ul> <li>\u89d2\u8272: \u7cfb\u7edf\u7684\"\u5927\u8111\"\u548c\u552f\u4e00\u7f51\u5173\u3002\u5b83\u89e3\u8026\u4e86\u5ba2\u6237\u7aef\u4e0e\u540e\u7aef\u670d\u52a1\u3002</li> <li>\u884c\u4e3a:<ol> <li>\u534f\u8bae\u6865\u63a5: \u901a\u8fc7 <code>McpJsonRpcController</code> \u63a5\u6536\u5ba2\u6237\u7aef\u7684 JSON-RPC \u8bf7\u6c42\u3002</li> <li>\u670d\u52a1\u53d1\u73b0: \u901a\u8fc7 <code>NacosSearchProvider</code> \u5b9e\u65f6\u4ece Nacos \u67e5\u8be2\u6240\u6709\u53ef\u7528\u7684\u540e\u7aef\u670d\u52a1\u5b9e\u4f8b\u3002</li> <li>\u667a\u80fd\u8def\u7531: \u901a\u8fc7 <code>McpServerService</code> \u7684 <code>useTool(toolName, ...)</code> \u65b9\u6cd5\uff0c\u81ea\u52a8\u67e5\u627e\u80fd\u591f\u63d0\u4f9b\u6240\u9700\u5de5\u5177 (<code>toolName</code>) \u7684\u670d\u52a1\u5b9e\u4f8b\u3002</li> <li>\u534f\u8bae\u8f6c\u6362: \u5c06\u8c03\u7528\u8bf7\u6c42\u8f6c\u6362\u4e3a\u6807\u51c6\u7684 RESTful (HTTP POST) \u8bf7\u6c42\uff0c\u53d1\u9001\u7ed9\u4e0b\u6e38\u670d\u52a1\u7684 <code>/tools/call</code> \u7aef\u70b9\u3002</li> </ol> </li> <li>\u5173\u952e\u4fee\u590d: \u6211\u4eec\u91cd\u6784\u4e86 <code>McpJsonRpcController</code> \u548c <code>McpServerService</code>\uff0c\u5b9e\u73b0\u4e86\u771f\u6b63\u7684\u52a8\u6001\u5de5\u5177\u67e5\u627e\u548c\u8c03\u7528\u903b\u8f91\uff0c\u5e76\u4fee\u590d\u4e86 <code>CompassSearchProvider</code> \u4e2d\u7531 <code>null</code> \u5b57\u6bb5\u5f15\u53d1\u7684 <code>NullPointerException</code>\u3002</li> </ul> </li> <li> <p><code>mcp-server-v2</code> (\u5de5\u5177\u670d\u52a1\u63d0\u4f9b\u65b9)</p> <ul> <li>\u89d2\u8272: \u5b9e\u9645\u4e1a\u52a1\u903b\u8f91\u7684\u6267\u884c\u8005\u3002</li> <li>\u884c\u4e3a:<ol> <li>\u670d\u52a1\u6ce8\u518c: \u542f\u52a8\u65f6\uff0c\u81ea\u52a8\u5c06\u81ea\u8eab\u7684\u670d\u52a1\u4fe1\u606f\u4ee5\u53ca\u901a\u8fc7 <code>@Tool</code> \u6ce8\u89e3\u5b9a\u4e49\u7684\u5de5\u5177\u5143\u6570\u636e\u6ce8\u518c\u5230 Nacos\u3002</li> <li>\u5de5\u5177\u6267\u884c: \u63d0\u4f9b\u4e00\u4e2a\u6807\u51c6\u7684 <code>/tools/call</code> REST \u7aef\u70b9\uff0c\u63a5\u6536\u6765\u81ea <code>mcp-router</code> \u7684\u8bf7\u6c42\uff0c\u5e76\u6267\u884c\u76f8\u5e94\u7684\u5de5\u5177\u65b9\u6cd5\u3002</li> </ol> </li> </ul> </li> <li> <p><code>run-demo.sh</code> (\u96c6\u6210\u6d4b\u8bd5\u4e0e\u6f14\u793a\u811a\u672c)</p> <ul> <li>\u89d2\u8272: \u7528\u4e8e\u81ea\u52a8\u5316\u6784\u5efa\u3001\u90e8\u7f72\u548c\u6d4b\u8bd5\u6574\u4e2a\u7cfb\u7edf\u7684\u7aef\u5230\u7aef\u6d41\u7a0b\u3002</li> <li>\u5173\u952e\u4fee\u590d: \u6211\u4eec\u5c06\u811a\u672c\u4e2d\u6240\u6709\u4e0d\u53ef\u9760\u7684 <code>sleep</code> \u7b49\u5f85\u5168\u90e8\u66ff\u6362\u4e3a\u7a33\u5065\u7684\u3001\u57fa\u4e8e <code>/actuator/health</code> \u7684 <code>wait_for_service</code> \u5065\u5eb7\u68c0\u67e5\uff0c\u786e\u4fdd\u4e86\u6d4b\u8bd5\u7684\u7a33\u5b9a\u6027\u548c\u53ef\u9760\u6027\u3002</li> </ul> </li> </ul>"},{"location":"archived/TODO/TODO09/#12","title":"1.2. \u7cfb\u7edf\u67b6\u6784\u56fe","text":"<p>\u4e0b\u56fe\u5c55\u793a\u4e86\u5f53\u524d\u7cfb\u7edf\u6700\u7ec8\u7684\u3001\u6b63\u786e\u7684\u5de5\u4f5c\u6d41\u7a0b\u3002</p> <pre><code>graph TD;\n    subgraph \"Demonstration\"\n        A[\"run-demo.sh\"]\n    end\n\n    subgraph \"Client Tier\"\n        B[\"mcp-client:8070\"]\n    end\n\n    subgraph \"Gateway &amp; Intelligence Tier\"\n        C[\"mcp-router:8050\"]\n    end\n\n    subgraph \"Service Discovery\"\n        D[\"Nacos:8848\"]\n    end\n\n    subgraph \"Service Provider Tier\"\n        E[\"mcp-server-v2:8061\"]\n    end\n\n    A -- \"1. `curl`\" --&gt; B;\n    B -- \"2. MCP/JSON-RPC Request\" --&gt; C[\"/mcp/jsonrpc\"];\n    C -- \"3. Discover Services\" --&gt; D;\n    E -- \"6. Register Service &amp; Tools\" --&gt; D;\n    C -- \"4. Route &amp; Protocol Bridge (REST)\" --&gt; E[\"/tools/call\"];\n    E -- \"5. Execute Tool\" --&gt; E;\n\n    classDef default fill:#f9f9f9,stroke:#333,stroke-width:2px;\n    classDef client fill:#e0f7fa,stroke:#00796b;\n    classDef router fill:#fff9c4,stroke:#fbc02d;\n    classDef server fill:#fce4ec,stroke:#c2185b;\n    classDef nacos fill:#e8f5e9,stroke:#388e3c;\n\n    class B client;\n    class C router;\n    class E server;\n    class D nacos;\n</code></pre>"},{"location":"archived/TODO/TODO09/#2","title":"2. \u7cfb\u7edf\u7f3a\u9677\u4e0e\u5f85\u529e\u5217\u8868","text":"<p>\u5728\u4fee\u590d\u4e86\u6240\u6709\u963b\u585e\u6027 bug \u4e4b\u540e\uff0c\u7cfb\u7edf\u5c55\u73b0\u51fa\u4e86\u4e00\u4e9b\u66f4\u6df1\u5c42\u6b21\u7684\u8bbe\u8ba1\u95ee\u9898\u548c\u5f85\u6539\u8fdb\u4e4b\u5904\u3002</p>"},{"location":"archived/TODO/TODO09/#21","title":"2.1. \u5df2\u8bc6\u522b\u7684\u7f3a\u9677","text":"<ul> <li> <p>\u7f3a\u96771 (\u6838\u5fc3\u8bbe\u8ba1): \u534f\u8bae\u4e0d\u4e00\u81f4</p> <ul> <li>\u95ee\u9898: <code>client -&gt; router</code> \u4f7f\u7528 <code>JSON-RPC</code>\uff0c\u800c <code>router -&gt; server</code> \u4f7f\u7528 <code>REST</code>\u3002\u8fd9\u4f7f\u5f97 <code>mcp-router</code> \u4e0d\u4ec5\u662f\u8def\u7531\u5668\uff0c\u8fd8\u662f\u4e00\u4e2a\u534f\u8bae\u6865\u63a5\u5668\uff0c\u589e\u52a0\u4e86\u5b83\u7684\u590d\u6742\u6027\u548c\u7ef4\u62a4\u6210\u672c\u3002</li> <li>\u5f71\u54cd: \u67b6\u6784\u4e0d\u7edf\u4e00\uff0c\u672a\u6765\u96be\u4ee5\u8ba9 <code>mcp-server</code> \u4e5f\u4f5c\u4e3a MCP \u5ba2\u6237\u7aef\u53bb\u8c03\u7528\u5176\u4ed6\u670d\u52a1\u3002</li> </ul> </li> <li> <p>\u7f3a\u96772 (\u8bbe\u8ba1\u5931\u8bef): \u5faa\u73af\u4f9d\u8d56\u9690\u60a3</p> <ul> <li>\u95ee\u9898: \u6211\u4eec\u901a\u8fc7\u7981\u7528 <code>InMemorySearchProvider</code> \u7ed5\u8fc7\u4e86 <code>McpServerService</code> \u4e0e <code>SearchProvider</code> \u4e4b\u95f4\u7684\u5faa\u73af\u4f9d\u8d56\uff0c\u4f46\u8fd9\u6cbb\u6807\u4e0d\u6cbb\u672c\u3002\u6839\u6e90\u5728\u4e8e <code>Provider</code> \u53cd\u5411\u4f9d\u8d56\u4e86\u4f7f\u7528\u5b83\u7684 <code>Service</code>\u3002</li> <li>\u5f71\u54cd: \u4ee3\u7801\u5e93\u4e2d\u5b58\u5728\u4e00\u4e2a\"\u9677\u9631\"\uff0c\u5982\u679c\u5176\u4ed6\u5f00\u53d1\u8005\u4e0d\u4e86\u89e3\u60c5\u51b5\uff0c\u91cd\u65b0\u542f\u7528\u8be5\u7ec4\u4ef6\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u65e0\u6cd5\u542f\u52a8\u3002</li> </ul> </li> <li> <p>\u7f3a\u96773 (\u529f\u80fd\u5c40\u9650): \u670d\u52a1\u53d1\u73b0\u786c\u7f16\u7801</p> <ul> <li>\u95ee\u9898: <code>NacosSearchProvider</code> \u4e2d\u786c\u7f16\u7801\u4e86\u8981\u67e5\u627e\u7684\u670d\u52a1\u540d\u79f0 (<code>\"mcp-server-v2\"</code>)\u3002</li> <li>\u5f71\u54cd: <code>mcp-router</code> \u5931\u53bb\u4e86\u901a\u7528\u6027\uff0c\u5b83\u5f53\u524d\u53ea\u80fd\u4e3a <code>mcp-server-v2</code> \u8fd9\u4e00\u4e2a\u670d\u52a1\u8fdb\u884c\u8def\u7531\uff0c\u65e0\u6cd5\u52a8\u6001\u53d1\u73b0\u548c\u8def\u7531\u5176\u4ed6\u65b0\u7684\u5de5\u5177\u5fae\u670d\u52a1\u3002</li> </ul> </li> <li> <p>\u7f3a\u96774 (\u4ee3\u7801\u5197\u4f59): \u672a\u4f7f\u7528\u7684 REST \u63a7\u5236\u5668</p> <ul> <li>\u95ee\u9898: <code>McpRouterController</code> \u4e2d\u7684\u5927\u90e8\u5206 REST \u7aef\u70b9\uff08\u5982 <code>/api/mcp/servers/...</code>\uff09\u5728\u5f53\u524d\u6838\u5fc3\u5de5\u4f5c\u6d41\u4e2d\u5b8c\u5168\u6ca1\u6709\u88ab\u4f7f\u7528\uff0c\u6240\u6709\u6d41\u91cf\u90fd\u7ecf\u8fc7\u4e86 <code>McpJsonRpcController</code>\u3002</li> <li>\u5f71\u54cd: \u589e\u52a0\u4e86\u4ee3\u7801\u7684\u8ba4\u77e5\u8d1f\u8377\uff0c\u65b0\u5f00\u53d1\u8005\u53ef\u80fd\u4f1a\u5bf9\u7cfb\u7edf\u7684\u5165\u53e3\u70b9\u4ea7\u751f\u56f0\u60d1\u3002</li> </ul> </li> </ul>"},{"location":"archived/TODO/TODO09/#22-todo-todo09","title":"2.2. TODO \u5217\u8868 (TODO09)","text":"<p>\u57fa\u4e8e\u4ee5\u4e0a\u7f3a\u9677\u5206\u6790\uff0c\u4e3a\u4e0b\u4e00\u9636\u6bb5\u63d0\u51fa\u4ee5\u4e0b\u6539\u8fdb\u5efa\u8bae\uff1a</p> <ul> <li> <p>TODO-1 (\u67b6\u6784\u91cd\u6784): \u7edf\u4e00\u901a\u4fe1\u534f\u8bae</p> <ul> <li>\u4efb\u52a1: \u79fb\u9664 <code>mcp-router</code> \u4e2d\u7684\u534f\u8bae\u8f6c\u6362\u903b\u8f91\u3002\u8ba9 <code>router -&gt; server</code> \u7684\u8c03\u7528\u4e5f\u4f7f\u7528 MCP/JSON-RPC \u534f\u8bae\u3002</li> <li>\u76ee\u6807: <code>mcp-server-v2</code> \u5c06\u5b9e\u73b0\u4e00\u4e2a <code>/mcp/jsonrpc</code> \u7aef\u70b9\u6765\u63a5\u6536\u5de5\u5177\u8c03\u7528\uff0c<code>mcp-router</code> \u5219\u76f4\u63a5\u5c06\u5ba2\u6237\u7aef\u7684 JSON-RPC \u8bf7\u6c42\u8f6c\u53d1\u8fc7\u53bb\u3002\u6574\u4e2a\u7cfb\u7edf\u7aef\u5230\u7aef\u4f7f\u7528\u540c\u4e00\u79cd\u8bed\u8a00\u901a\u4fe1\u3002</li> </ul> </li> <li> <p>TODO-2 (\u4ee3\u7801\u91cd\u6784): \u89e3\u51b3\u5faa\u73af\u4f9d\u8d56</p> <ul> <li>\u4efb\u52a1: \u91cd\u65b0\u8bbe\u8ba1 <code>SearchProvider</code> \u548c <code>McpServerService</code> \u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u5f7b\u5e95\u6d88\u9664\u5faa\u73af\u4f9d\u8d56\u3002</li> <li>\u76ee\u6807: <code>SearchProvider</code> \u5e94\u662f\u7eaf\u7cb9\u7684\u6570\u636e\u63d0\u4f9b\u65b9\uff0c\u4e0d\u5e94\u5305\u542b\u4efb\u4f55\u5bf9 <code>McpServerService</code> \u7684\u53cd\u5411\u8c03\u7528\u3002\u4fee\u590d\u540e\uff0c\u5e94\u80fd\u5b89\u5168\u5730\u91cd\u65b0\u542f\u7528 <code>@Component</code> \u4e8e <code>InMemorySearchProvider</code> \u4e4b\u4e0a\u3002</li> </ul> </li> <li> <p>TODO-3 (\u529f\u80fd\u589e\u5f3a): \u5b9e\u73b0\u771f\u6b63\u7684\u901a\u7528\u670d\u52a1\u53d1\u73b0</p> <ul> <li>\u4efb\u52a1: \u79fb\u9664 <code>NacosSearchProvider</code> \u4e2d\u7684\u786c\u7f16\u7801\u670d\u52a1\u540d\u3002</li> <li>\u76ee\u6807: <code>mcp-router</code> \u5e94\u80fd\u81ea\u52a8\u53d1\u73b0 Nacos \u4e0a\u6240\u6709\u7b26\u5408\u7279\u5b9a\u89c4\u8303\uff08\u4f8b\u5982\uff0c\u5e26\u6709\u4e00\u4e2a <code>mcp.enabled=true</code> \u5143\u6570\u636e\u6807\u7b7e\uff09\u7684\u5fae\u670d\u52a1\uff0c\u5e76\u5c06\u5176\u7eb3\u5165\u81ea\u5df1\u7684\u8def\u7531\u8303\u56f4\u3002</li> </ul> </li> <li> <p>TODO-4 (\u4ee3\u7801\u6e05\u7406): \u7cbe\u7b80\u63a7\u5236\u5668</p> <ul> <li>\u4efb\u52a1: \u5ba1\u67e5 <code>McpRouterController</code> \u548c <code>McpJsonRpcController</code> \u7684\u804c\u8d23\u3002</li> <li>\u76ee\u6807: \u79fb\u9664\u672a\u88ab\u4f7f\u7528\u7684 REST \u7aef\u70b9\uff0c\u6216\u8005\u5c06\u4e24\u4e2a\u63a7\u5236\u5668\u7684\u529f\u80fd\u8fdb\u884c\u5408\u5e76/\u6e05\u6670\u5730\u62c6\u5206\uff0c\u786e\u4fdd\u6bcf\u4e2a\u63a7\u5236\u5668\u90fd\u6709\u660e\u786e\u4e14\u5fc5\u8981\u7684\u804c\u8d23\u3002</li> </ul> </li> <li> <p>TODO-5 (\u529f\u80fd\u5b8c\u5584): \u5b9e\u73b0 <code>CompassSearchProvider</code></p> <ul> <li>\u4efb\u52a1: \u5c06 <code>CompassSearchProvider</code> \u4e2d\u7684 mock \u6570\u636e\u66ff\u6362\u4e3a\u5bf9\u771f\u5b9e Compass API \u7684 <code>WebClient</code> \u8c03\u7528\u3002</li> <li>\u76ee\u6807: \u4f7f <code>mcp-router</code> \u80fd\u591f\u4ece\u591a\u4e2a\u4e0d\u540c\u7684\u670d\u52a1\u53d1\u73b0\u6e90\u805a\u5408\u5de5\u5177\u5217\u8868\u3002 </li> </ul> </li> </ul>"},{"location":"archived/TODO/TODO11/","title":"TODO11","text":"<p>\u9879\u76ee\u5f00\u53d1\u539f\u5219\u9075\u5faa @TODO10.md \uff0c\u5f53\u524d\u9879\u76ee\u5df2\u7ecf\u57fa\u672c\u5b8c\u5584\uff0c\u4f46\u662f\u6ce8\u518c\u5230nacos\u4e0a\u7684\u4fe1\u606f\u548c\u89c4\u8303\u7684\u683c\u5f0f\u4e0d\u540c\uff0c\u4e3a\u4e86\u63d0\u9ad8\u5f53\u5148\u9879\u76ee\u7684\u901a\u7528\u6027\uff0c\u9700\u8981\u53c2\u8003 @/mcp-gateway-example-jdk17 \u4e2d\u7684\u5b9e\u73b0\u65b9\u6cd5\u6ce8\u518c\u5230nacos\u4e0a\uff0c\u8bf7\u6539\u9020\u5f53\u524d\u9879\u76ee\uff0c\u4f18\u5148\u4fee\u6539 mcp-server-v2\uff0cmcp-router\uff0cmcp-client\uff0c\u7528\u4e2d\u6587\u601d\u8003\u3002</p> <p>\u9a8c\u8bc1mcp-router \u5230 mcp-server-v2\u7684\u8fde\u901a\u6027\uff0c\u6682\u65f6\u4e0d\u8003\u8651mcp-client\u9879\u76ee@TODO10.md </p> <p>spring.ai.mcp.server.nacos.metadata.tools.names:</p> <p>spring.ai.mcp.server.nacos.metadata.mcp.type: server  spring.ai.mcp.server.nacos.metadata.mcp.version: 1.0.0 spring.ai.mcp.server.nacos.metadata.tools.names: getAllPersons,addPerson,deletePerson,get_system_info,list_servers spring.ai.mcp.server.nacos.metadata.scheme: http</p> <p>\u4ece\u65e5\u5fd7\u4e2d\u53ef\u4ee5\u770b\u5230\uff0cmcp-server-v2 \u548c mcp-router \u4e4b\u95f4\u7684\u8fde\u63a5\u5b58\u5728\u4e00\u4e9b\u95ee\u9898\uff0c\u4e3b\u8981\u96c6\u4e2d\u5728\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\uff1a \u670d\u52a1\u53d1\u73b0\u6b63\u5e38\uff1amcp-server-v2 \u6210\u529f\u6ce8\u518c\u5230 Nacos\uff0cmcp-router \u4e5f\u80fd\u6b63\u786e\u53d1\u73b0\u5e76\u5217\u51fa\u5176\u5de5\u5177\u3002 \u534f\u8bae\u901a\u4fe1\u95ee\u9898\uff1aMcpServerServiceImpl \u4e2d\u7684 callToolViaMcpProtocol \u65b9\u6cd5\u5c1d\u8bd5\u4f7f\u7528 HTTP \u8c03\u7528 MCP \u670d\u52a1\u5668\uff0c\u4f46\u6839\u636e\u9879\u76ee\u8981\u6c42\uff0c\u5fc5\u987b\u4f7f\u7528 SSE \u534f\u8bae\u3002\u8fd9\u5bfc\u81f4\u4e86\u534f\u8bae\u8fdd\u89c4\u9519\u8bef\u3002 SSE \u8fde\u63a5\u95ee\u9898\uff1aCustomMcpClient \u5728\u5c1d\u8bd5\u5efa\u7acb SSE \u8fde\u63a5\u65f6\u9047\u5230\u4e86\u591a\u6b21\u8fde\u63a5\u88ab\u62d2\u7edd\u7684\u60c5\u51b5\uff0c\u5c3d\u7ba1\u6709\u65f6\u8fde\u63a5\u6210\u529f\uff0c\u4f46\u968f\u540e\u53c8\u88ab\u62d2\u7edd\u3002 \u4e8b\u4ef6\u6570\u636e\u89e3\u6790\u9519\u8bef\uff1a\u5728\u89e3\u6790 SSE \u4e8b\u4ef6\u6570\u636e\u65f6\uff0c\u51fa\u73b0\u4e86\u610f\u5916\u5b57\u7b26\u9519\u8bef\uff0c\u53ef\u80fd\u662f\u7531\u4e8e\u6570\u636e\u683c\u5f0f\u4e0d\u6b63\u786e\u5bfc\u81f4\u7684\u3002 \u63a5\u4e0b\u6765\u7684\u6b65\u9aa4\u5efa\u8bae\uff1a \u786e\u4fdd ApplicationContextHolder \u6b63\u786e\u6ce8\u518c\u5e76\u4f7f\u7528\uff0c\u4ee5\u4fbf\u5728\u975e Spring \u7ba1\u7406\u7684\u7c7b\u4e2d\u8bbf\u95ee Spring Bean\u3002 \u68c0\u67e5 SSE \u8fde\u63a5\u7684\u914d\u7f6e\uff0c\u786e\u4fdd\u670d\u52a1\u5668\u548c\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u901a\u4fe1\u7b26\u5408 SSE \u534f\u8bae\u7684\u8981\u6c42\u3002 \u68c0\u67e5\u548c\u4fee\u590d SSE \u4e8b\u4ef6\u6570\u636e\u7684\u683c\u5f0f\u95ee\u9898\uff0c\u786e\u4fdd\u6570\u636e\u683c\u5f0f\u7b26\u5408\u9884\u671f\u3002 \u5982\u679c\u9700\u8981\u8fdb\u4e00\u6b65\u7684\u5e2e\u52a9\u6216\u6709\u5176\u4ed6\u95ee\u9898\uff0c\u8bf7\u968f\u65f6\u544a\u77e5\u3002</p> <p>\u4e3a\u4e86\u6309\u7167 MCP \u6807\u51c6\u534f\u8bae\u548c\u6d41\u7a0b\u4fee\u590d\u9879\u76ee\u5e76\u786e\u4fdd\u8fde\u63a5\u7684\u6b63\u786e\u6027\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u53d6\u4ee5\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li>\u68c0\u67e5\u548c\u66f4\u65b0\u914d\u7f6e\u6587\u4ef6\uff1a</li> <li>\u786e\u4fdd <code>application.yml</code> \u4e2d\u7684\u914d\u7f6e\u7b26\u5408 MCP \u534f\u8bae\u7684\u8981\u6c42\uff0c\u7279\u522b\u662f\u5173\u4e8e SSE \u8fde\u63a5\u7684\u914d\u7f6e\u3002</li> <li> <p>\u786e\u4fdd Nacos \u7684\u914d\u7f6e\u6b63\u786e\uff0c\u670d\u52a1\u80fd\u591f\u6b63\u786e\u6ce8\u518c\u548c\u53d1\u73b0\u3002</p> </li> <li> <p>\u9a8c\u8bc1 SSE \u8fde\u63a5\uff1a</p> </li> <li>\u786e\u4fdd <code>McpServerServiceImpl</code> \u4e2d\u7684 <code>callToolViaMcpProtocol</code> \u65b9\u6cd5\u4f7f\u7528\u7684\u662f SSE \u534f\u8bae\u800c\u4e0d\u662f HTTP\u3002</li> <li> <p>\u68c0\u67e5 <code>CustomMcpClient</code> \u7684\u5b9e\u73b0\uff0c\u786e\u4fdd SSE \u8fde\u63a5\u7684\u5efa\u7acb\u548c\u6570\u636e\u89e3\u6790\u7b26\u5408 MCP \u534f\u8bae\u3002</p> </li> <li> <p>\u65e5\u5fd7\u548c\u9519\u8bef\u5904\u7406\uff1a</p> </li> <li>\u589e\u52a0\u65e5\u5fd7\u8bb0\u5f55\uff0c\u7279\u522b\u662f\u5728\u8fde\u63a5\u5efa\u7acb\u548c\u6570\u636e\u4f20\u8f93\u7684\u5173\u952e\u70b9\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u8c03\u8bd5\u548c\u5b9a\u4f4d\u95ee\u9898\u3002</li> <li> <p>\u5904\u7406\u548c\u4fee\u590d\u65e5\u5fd7\u4e2d\u63d0\u5230\u7684\u9519\u8bef\uff0c\u4f8b\u5982\u6570\u636e\u89e3\u6790\u9519\u8bef\u548c\u8fde\u63a5\u88ab\u62d2\u7edd\u7684\u95ee\u9898\u3002</p> </li> <li> <p>\u6d4b\u8bd5\u548c\u9a8c\u8bc1\uff1a</p> </li> <li>\u8fd0\u884c\u96c6\u6210\u6d4b\u8bd5\uff0c\u786e\u4fdd\u6240\u6709\u5de5\u5177\u8c03\u7528\u548c\u670d\u52a1\u4ea4\u4e92\u90fd\u80fd\u6b63\u5e38\u5de5\u4f5c\u3002</li> <li> <p>\u4f7f\u7528 MCP \u534f\u8bae\u7684\u6807\u51c6\u6d4b\u8bd5\u7528\u4f8b\u6765\u9a8c\u8bc1\u9879\u76ee\u7684\u6b63\u786e\u6027\u3002</p> </li> <li> <p>\u53c2\u8003 MCP \u6587\u6863\uff1a</p> </li> <li>\u67e5\u9605 MCP \u534f\u8bae\u7684\u5b98\u65b9\u6587\u6863\uff0c\u786e\u4fdd\u6240\u6709\u5b9e\u73b0\u90fd\u7b26\u5408\u6700\u65b0\u7684\u6807\u51c6\u548c\u6700\u4f73\u5b9e\u8df5\u3002</li> </ol> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u5c06\u5e2e\u52a9\u4f60\u68c0\u67e5\u548c\u66f4\u65b0\u9879\u76ee\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u8bf7\u786e\u8ba4\u662f\u5426\u9700\u8981\u6211\u6267\u884c\u8fd9\u4e9b\u64cd\u4f5c\u3002</p> <p>@/mcp-server-v2 \u4f7f\u7528  @https://github.com/alibaba/spring-ai-alibaba  \u6838\u5fc3\u4ee3\u7801\u5728 @/spring-ai-alibaba-mcp \u76ee\u5f55\u4e0b\uff0c\u5c06mcp\u76f8\u5173\u4fe1\u606f\u6ce8\u518c\u5230nacos\u4e0a\uff0c\u6df1\u5ea6\u7406\u89e3</p> <p>\u672c\u9879\u76ee\u7684\u521d\u671f\u8bbe\u8ba1\u65b9\u6848\uff0c\u5df2\u7ecf\u5b8c\u6210\u76ee\u6807\u3002 @TODO10.md </p> <p>\u73b0\u5728\u4fee\u6539\u4e86 @/mcp-server-v2 \uff0c\u4f7f\u7528 spring-ai-alibaba-starter-nacos-mcp-server \u5305\uff0c\u5b9e\u73b0\u81ea\u52a8\u88c5\u8f7d\uff0c\u5c06mcp-server\u7684\u914d\u7f6e\u4fe1\u606f \u4e0a\u9001\u5230nacos\u4e2d\uff0c</p> <p>\u4f46\u662f\u53d1\u73b0 mcp-client\u8c03\u7528 mcp-router\uff0c\u518d\u8c03\u7528 mcp-server-v2\u8fd9\u6761\u94fe\u8def\u4e0a\uff0c\u5982\u679c\u8003\u8651\u4ee5\u4e0a\u4fee\u6539\uff0cnacos\u7684\u914d\u7f6e\u4fe1\u606f\u7684\u683c\u5f0f\uff0c\u4ee5\u53ca spring-ai-alibaba\u4e0enacos\u7684\u89c4\u7ea6\u6709\u6240\u4fee\u6539\uff0c\u6216\u8005\u51b2\u7a81\u3002</p> <p>\u73b0\u5728\u9700\u8981\u5206\u6790 @/spring-ai-alibaba-mcp \uff0c\u53c2\u8003@mcp_nacos_analysis.md \u5206\u6790\u62a5\u544a\u3002</p> <p>\u4e3b\u8981\u9700\u8981\u6539\u5199 mcp-router</p>"},{"location":"archived/TODO/TODO12/","title":"TODO12","text":"<p>@nacos_register_flow.md \u662f\u5b98\u65b9\u7684nacos\u6ce8\u518c\u6d41\u7a0b\uff0c\u53ef\u4ee5\u53c2\u8003 \u5f53\u524d\u9879\u76ee\u7ed3\u6784\u5982\u4e0b mcp-client: \u8c03\u7528mcp-router mcp-router: \u63a5\u6536\u5230mcp-client\u8c03\u7528\u4e4b\u540e\uff0c\u5728\u8bfb\u53d6nacos\u7684\u6ce8\u518c\u4fe1\u606f\uff0c\u627e\u5230\u5339\u914d\u7684mcp-server-v2\uff08\u9700\u8981\u662f\u6d3b\u8dc3\u7684\uff09\uff0c\u518d\u901a\u8fc7sse\u534f\u8bae\u8c03\u7528mcp-server-v2\u7684tool\uff0c mcp-server-v2: \u901a\u8fc7\u81ea\u52a8\u6ce8\u518c\u65b9\u6cd5\uff0c\u4e0a\u62a5\u5230nacos\uff0c\u8be5\u9879\u76ee\u65e0\u9700\u4fee\u6539\uff0c\u5df2\u7ecf\u5f88\u5b8c\u6574\u4e86\u3002</p> <p>\u4ee5\u4e0b\u662fmcp-router\u7684\u6539\u9020\u6d41\u7a0b\uff1a 1 \u5f53\u6709mcp-server-v2\u4f4f\u7684\u5230nacos\u65f6\uff0cmcp-router\u8981\u80fd\u611f\u77e5\u5230\uff0c\u5e76\u4e14\u5c06\u6ce8\u518c\u4fe1\u606f\uff0c\u5b9e\u4f8b\u4fe1\u606f\uff0cmcp\u914d\u7f6e\u4fe1\u606f\u4fdd\u5b58\u5728\u672c\u5730\uff0c 2 \u901a\u8fc7nacos\u7684listener\u68c0\u6d4b\u5230mcp-server-v2\u5065\u5eb7\u5ea6\uff0c\u5982\u679c\u4e0d\u53ef\u7528\u6e05\u9664\u76f8\u5173\u7684\u6ce8\u518c\u4fe1\u606f 3 mcp-router\u4e2d\u63d0\u4f9b\u5916\u90e8\u53ef\u8c03\u7528\u7684\u6240\u6709mcp server\u7684\u5217\u8868\u4fe1\u606f\u3002</p> <p>\u7406\u89e3@TODO10.md \uff0c@nacos-api-code-anlysis.md \uff0c\u4ee5\u53ca\u5f53\u524d\u9879\u76ee\u67b6\u6784\uff0c\u7ed3\u5408 nacos api \u5bf9\u5e94\u7684\u5b9e\u9645\u4ee3\u7801@nacos-api-code.md \uff0c\u5206\u6790 mcp-router\u9700\u8981\u6539\u8fdb\u7684\u5730\u65b9\uff0c\u603b\u7ed3\u51fa\u53ef\u64cd\u4f5c\u7684\u6539\u9020\u65b9\u6848\u3002\u5206\u5f00\u82e5\u5e72\u6b65\uff0c\u6bcf\u4e00\u6b65\u90fd\u9700\u8981\u4ece\u65b0\u7f16\u8bd1mcp-router\u9879\u76ee\uff0c\u5e76\u4e14\u80fd\u542f\u52a8 \u53ef\u4ee5\u9a8c\u8bc1\u3002</p>"},{"location":"archived/TODO/TODO13/","title":"TODO13","text":"<p>\u6839\u636eTODO10.md\u3001nacos-api-code-anlysis.md\u548cnacos-api-code.md\u7684\u5206\u6790\uff0c\u6211\u6765\u5236\u5b9amcp-router\u7684\u6539\u9020\u65b9\u6848\u3002\u4e3b\u8981\u95ee\u9898\u662f\u9700\u8981\u5c06HTTP\u901a\u4fe1\u6539\u4e3aSSE\u901a\u4fe1\uff0c\u5e76\u4e25\u683c\u9075\u5faaMCP\u534f\u8bae\u89c4\u8303\u3002</p> <p>\u8ba9\u6211\u4eec\u5206\u6b65\u9aa4\u8fdb\u884c\u6539\u9020\uff1a</p>"},{"location":"archived/TODO/TODO13/#mcp","title":"\u7b2c\u4e00\u6b65\uff1a\u6dfb\u52a0MCP\u534f\u8bae\u4f9d\u8d56\u548c\u914d\u7f6e","text":"<ol> <li> <p>\u4fee\u6539 mcp-router/pom.xml\uff1a <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-ai-mcp-core&lt;/artifactId&gt;\n    &lt;version&gt;${spring-ai.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-ai-mcp-transport-sse&lt;/artifactId&gt;\n    &lt;version&gt;${spring-ai.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre></p> </li> <li> <p>\u6dfb\u52a0MCP\u914d\u7f6e\u7c7b\uff1a <pre><code>@Configuration\npublic class McpRouterConfig {\n    @Bean\n    public WebFluxSseServerTransportProvider sseServerTransportProvider() {\n        return new WebFluxSseServerTransportProvider();\n    }\n\n    @Bean\n    public McpAsyncClient mcpAsyncClient(WebClient.Builder builder) {\n        return new McpAsyncClient(builder);\n    }\n}\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u6b65\u9aa4\uff1a <pre><code>mvn -f mcp-router/pom.xml clean install -nsu\n# \u542f\u52a8\u670d\u52a1\uff0c\u68c0\u67e5\u662f\u5426\u6b63\u5e38\u542f\u52a8\n</code></pre></p>"},{"location":"archived/TODO/TODO13/#sse","title":"\u7b2c\u4e8c\u6b65\uff1a\u5b9e\u73b0SSE\u670d\u52a1\u7aef","text":"<ol> <li> <p>\u6dfb\u52a0SSE\u63a7\u5236\u5668\uff1a <pre><code>@RestController\n@RequestMapping(\"/sse\")\npublic class McpSseController {\n    private final WebFluxSseServerTransportProvider sseProvider;\n\n    @GetMapping\n    public Mono&lt;Void&gt; handleSse(ServerHttpRequest request, ServerHttpResponse response) {\n        return sseProvider.handle(request, response);\n    }\n}\n</code></pre></p> </li> <li> <p>\u4fee\u6539application.yml\u914d\u7f6e\uff1a <pre><code>spring:\n  ai:\n    mcp:\n      sse:\n        endpoint: /sse\n      session:\n        timeout: 60s\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u6b65\u9aa4\uff1a <pre><code>mvn -f mcp-router/pom.xml clean install -nsu\n# \u542f\u52a8\u670d\u52a1\uff0c\u6d4b\u8bd5SSE\u7aef\u70b9\ncurl -N http://localhost:8050/sse\n</code></pre></p>"},{"location":"archived/TODO/TODO13/#_1","title":"\u7b2c\u4e09\u6b65\uff1a\u6539\u9020\u670d\u52a1\u6ce8\u518c\u673a\u5236","text":"<ol> <li> <p>\u4fee\u6539McpServerRegistryConfig\uff1a <pre><code>@Configuration\npublic class McpServerRegistryConfig {\n    @Bean\n    public NacosRegistryProperties nacosRegistryProperties() {\n        NacosRegistryProperties properties = new NacosRegistryProperties();\n        properties.setServiceGroup(\"mcp-server\");\n        properties.setServiceEphemeral(true);\n        return properties;\n    }\n\n    @Bean\n    public McpServerRegistry mcpServerRegistry(NamingService namingService) {\n        return new McpServerRegistry(namingService, nacosRegistryProperties());\n    }\n}\n</code></pre></p> </li> <li> <p>\u5b9e\u73b0\u670d\u52a1\u53d1\u73b0\u76d1\u542c\uff1a <pre><code>@Component\npublic class McpServerDiscoveryListener implements ApplicationListener&lt;WebServerInitializedEvent&gt; {\n    private final McpServerRegistry serverRegistry;\n\n    @Override\n    public void onApplicationEvent(WebServerInitializedEvent event) {\n        serverRegistry.startDiscovery();\n    }\n}\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u6b65\u9aa4\uff1a <pre><code>mvn -f mcp-router/pom.xml clean install -nsu\n# \u542f\u52a8\u670d\u52a1\uff0c\u68c0\u67e5Nacos\u4e2d\u7684\u670d\u52a1\u6ce8\u518c\u60c5\u51b5\ncurl -X GET \"http://localhost:8848/nacos/v2/ns/instance/list?serviceName=mcp-server-v2&amp;groupName=mcp-server\"\n</code></pre></p>"},{"location":"archived/TODO/TODO13/#mcp_1","title":"\u7b2c\u56db\u6b65\uff1a\u5b9e\u73b0MCP\u8def\u7531\u8f6c\u53d1","text":"<ol> <li> <p>\u6dfb\u52a0\u8def\u7531\u670d\u52a1\uff1a <pre><code>@Service\npublic class McpRouterService {\n    private final McpAsyncClient mcpClient;\n    private final McpServerRegistry serverRegistry;\n\n    public Mono&lt;McpResponse&gt; routeRequest(McpRequest request) {\n        return serverRegistry.getAvailableServer()\n            .flatMap(server -&gt; mcpClient.sendRequest(server, request));\n    }\n}\n</code></pre></p> </li> <li> <p>\u4fee\u6539\u63a7\u5236\u5668\uff1a <pre><code>@RestController\n@RequestMapping(\"/api/mcp\")\npublic class McpRouterController {\n    private final McpRouterService routerService;\n\n    @PostMapping(\"/route\")\n    public Mono&lt;McpResponse&gt; route(@RequestBody McpRequest request) {\n        return routerService.routeRequest(request);\n    }\n}\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u6b65\u9aa4\uff1a <pre><code>mvn -f mcp-router/pom.xml clean install -nsu\n# \u542f\u52a8\u670d\u52a1\uff0c\u6d4b\u8bd5\u8def\u7531\u529f\u80fd\ncurl -X POST http://localhost:8050/api/mcp/route -H \"Content-Type: application/json\" -d '{\"toolName\": \"getAllPersons\"}'\n</code></pre></p>"},{"location":"archived/TODO/TODO13/#_2","title":"\u7b2c\u4e94\u6b65\uff1a\u5b9e\u73b0\u4f1a\u8bdd\u7ba1\u7406","text":"<ol> <li> <p>\u6dfb\u52a0\u4f1a\u8bdd\u7ba1\u7406\uff1a <pre><code>@Component\npublic class McpSessionManager {\n    private final Map&lt;String, SseSession&gt; sessions = new ConcurrentHashMap&lt;&gt;();\n\n    @Scheduled(fixedDelay = 30000)\n    public void cleanupExpiredSessions() {\n        long now = System.currentTimeMillis();\n        sessions.entrySet().removeIf(entry -&gt; \n            now - entry.getValue().getLastAccessTime() &gt; 60000);\n    }\n}\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u4f1a\u8bdd\u8d85\u65f6\uff1a <pre><code>spring:\n  ai:\n    mcp:\n      session:\n        timeout: 60s\n        cleanup-interval: 30s\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u6b65\u9aa4\uff1a <pre><code>mvn -f mcp-router/pom.xml clean install -nsu\n# \u542f\u52a8\u670d\u52a1\uff0c\u6d4b\u8bd5\u957f\u8fde\u63a5\u4f1a\u8bdd\n</code></pre></p> <p>\u6bcf\u4e2a\u6b65\u9aa4\u5b8c\u6210\u540e\uff0c\u90fd\u9700\u8981\u8fdb\u884c\u5982\u4e0b\u9a8c\u8bc1\uff1a 1. \u7f16\u8bd1\u5e76\u542f\u52a8\u670d\u52a1 2. \u68c0\u67e5\u670d\u52a1\u6ce8\u518c\u72b6\u6001 3. \u6d4b\u8bd5SSE\u8fde\u63a5 4. \u9a8c\u8bc1\u8def\u7531\u529f\u80fd 5. \u6d4b\u8bd5\u4f1a\u8bdd\u7ba1\u7406</p> <p>\u5b8c\u6574\u9a8c\u8bc1\u6d41\u7a0b\uff1a <pre><code># 1. \u542f\u52a8\u6240\u6709\u670d\u52a1\nsh ./run-demo.sh\n\n# 2. \u9a8c\u8bc1\u670d\u52a1\u6ce8\u518c\ncurl -X GET \"http://localhost:8848/nacos/v2/ns/instance/list?serviceName=mcp-server-v2&amp;groupName=mcp-server\"\n\n# 3. \u6d4b\u8bd5\u5ba2\u6237\u7aef\u8c03\u7528\ncurl \"http://localhost:8070/mcp-client/api/v1/tools/list\"\n\n# 4. \u6d4b\u8bd5\u6570\u636e\u5e93\u64cd\u4f5c\ncurl -X POST http://localhost:8070/mcp-client/api/v1/tools/call \\\n-H \"Content-Type: application/json\" \\\n-d '{\"toolName\": \"getAllPersons\", \"arguments\": {}}'\n</code></pre></p> <p>\u9700\u8981\u6211\u8be6\u7ec6\u89e3\u91ca\u4efb\u4f55\u6b65\u9aa4\u5417\uff1f</p>"},{"location":"archived/TODO/TODO14/","title":"MCP Router V2 \u6539\u9020\u65b9\u6848","text":""},{"location":"archived/TODO/TODO14/#_1","title":"\u6838\u5fc3\u95ee\u9898","text":"<ol> <li>\u901a\u4fe1\u534f\u8bae\u4e0d\u89c4\u8303</li> <li>\u5f53\u524d\u4f7f\u7528HTTP\u534f\u8bae\u8fdb\u884c\u901a\u4fe1</li> <li> <p>\u9700\u8981\u6539\u4e3aSSE\u534f\u8bae\uff0c\u7b26\u5408MCP\u6807\u51c6</p> </li> <li> <p>\u670d\u52a1\u6ce8\u518c\u673a\u5236\u4e0d\u5b8c\u6574</p> </li> <li>\u7f3a\u5c11\u5b8c\u6574\u7684\u5143\u6570\u636e\u7ba1\u7406</li> <li> <p>\u670d\u52a1\u5065\u5eb7\u68c0\u67e5\u673a\u5236\u7b80\u5355</p> </li> <li> <p>\u8def\u7531\u8f6c\u53d1\u673a\u5236\u5f85\u4f18\u5316</p> </li> <li>\u7f3a\u5c11\u8d1f\u8f7d\u5747\u8861</li> <li>\u6ca1\u6709\u5b9e\u73b0\u670d\u52a1\u964d\u7ea7</li> </ol>"},{"location":"archived/TODO/TODO14/#_2","title":"\u6539\u9020\u6b65\u9aa4","text":""},{"location":"archived/TODO/TODO14/#_3","title":"\u7b2c\u4e00\u6b65\uff1a\u9879\u76ee\u521d\u59cb\u5316\u4e0e\u57fa\u7840\u914d\u7f6e","text":"<ol> <li> <p>\u521b\u5efa\u9879\u76ee\u7ed3\u6784 <pre><code>mcp-router-v2/\n\u251c\u2500\u2500 src/main/java/com/nacos/mcp/router/\n\u2502   \u251c\u2500\u2500 config/         # \u914d\u7f6e\u7c7b\n\u2502   \u251c\u2500\u2500 controller/     # API\u63a7\u5236\u5668\n\u2502   \u251c\u2500\u2500 model/         # \u6570\u636e\u6a21\u578b\n\u2502   \u251c\u2500\u2500 service/       # \u4e1a\u52a1\u903b\u8f91\n\u2502   \u2514\u2500\u2500 McpRouterV2Application.java\n\u2514\u2500\u2500 pom.xml\n</code></pre></p> </li> <li> <p>\u914d\u7f6epom.xml\uff0c\u53c2\u8003mcp-server-v2\u548c mcp-router\u539f\u6709pom.xml\u6587\u4ef6\uff0c\u7248\u672c\u53f7\u4e0d\u80fd\u4fee\u6539</p> </li> <li> <p>\u57fa\u7840\u914d\u7f6e\u7c7b <pre><code>@Configuration\npublic class McpRouterConfig {\n    @Bean\n    public WebClient webClient() {\n        return WebClient.builder().build();\n    }\n}\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u65b9\u5f0f\uff1a <pre><code>mvn clean install\nmvn spring-boot:run\n</code></pre></p>"},{"location":"archived/TODO/TODO14/#mcp","title":"\u7b2c\u4e8c\u6b65\uff1a\u5b9e\u73b0MCP\u670d\u52a1\u6ce8\u518c","text":"<ol> <li> <p>\u6ce8\u518c\u914d\u7f6e\u7c7b <pre><code>@Configuration\n@EnableConfigurationProperties(McpRouterProperties.class)\npublic class McpServerRegistryConfig {\n    @Bean\n    public NamingService namingService() {\n        return NacosFactory.createNamingService(properties);\n    }\n}\n</code></pre></p> </li> <li> <p>\u670d\u52a1\u6ce8\u518c\u5b9e\u73b0 <pre><code>@Component\npublic class McpServerRegistry {\n    public void registerServer(McpServerInfo serverInfo) {\n        Instance instance = new Instance();\n        instance.setIp(serverInfo.getIp());\n        instance.setPort(serverInfo.getPort());\n        instance.setMetadata(buildMetadata(serverInfo));\n        namingService.registerInstance(serverInfo.getName(), instance);\n    }\n}\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u65b9\u5f0f\uff1a <pre><code>curl -X GET \\\"http://localhost:8848/nacos/v2/ns/instance/list?serviceName=mcp-server-v2\\\"\n</code></pre></p>"},{"location":"archived/TODO/TODO14/#sse","title":"\u7b2c\u4e09\u6b65\uff1a\u5b9e\u73b0SSE\u901a\u4fe1","text":"<ol> <li> <p>SSE\u4f20\u8f93\u63d0\u4f9b\u8005 <pre><code>@Component\npublic class McpSseTransportProvider {\n    private final Map&lt;String, SseEmitter&gt; sessions = new ConcurrentHashMap&lt;&gt;();\n\n    public Flux&lt;ServerSentEvent&lt;String&gt;&gt; connect(String clientId) {\n        return Flux.create(sink -&gt; {\n            SseEmitter emitter = new SseEmitter();\n            sessions.put(clientId, emitter);\n            // \u5904\u7406\u8fde\u63a5\u5173\u95ed\n            sink.onCancel(() -&gt; sessions.remove(clientId));\n        });\n    }\n}\n</code></pre></p> </li> <li> <p>SSE\u63a7\u5236\u5668 <pre><code>@RestController\n@RequestMapping(\\\"/sse\\\")\npublic class McpSseController {\n    @GetMapping(\\\"/connect\\\")\n    public Flux&lt;ServerSentEvent&lt;String&gt;&gt; connect(@RequestParam String clientId) {\n        return mcpSseTransportProvider.connect(clientId);\n    }\n}\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u65b9\u5f0f\uff1a <pre><code>curl -N \\\"http://localhost:8050/sse/connect?clientId=test\\\"\n</code></pre></p>"},{"location":"archived/TODO/TODO14/#mcp_1","title":"\u7b2c\u56db\u6b65\uff1a\u5b9e\u73b0MCP\u8def\u7531\u8f6c\u53d1","text":"<ol> <li> <p>\u8def\u7531\u670d\u52a1\u5b9e\u73b0 <pre><code>@Service\npublic class McpRouterService {\n    public Mono&lt;String&gt; routeRequest(String serverName, McpMessage message) {\n        Instance instance = selectServer(serverName);\n        return mcpSseTransportProvider\n            .sendMessage(instance, message)\n            .timeout(Duration.ofSeconds(30));\n    }\n}\n</code></pre></p> </li> <li> <p>\u8d1f\u8f7d\u5747\u8861\u5b9e\u73b0 <pre><code>@Component\npublic class LoadBalancer {\n    public Instance selectServer(List&lt;Instance&gt; instances) {\n        // \u5b9e\u73b0\u8f6e\u8be2\u7b56\u7565\n        return instances.get(roundRobinIndex.getAndIncrement() % instances.size());\n    }\n}\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u65b9\u5f0f\uff1a <pre><code># \u901a\u8fc7mcp-client\u8c03\u7528\ncurl -X POST \\\"http://localhost:8070/mcp-client/api/v1/tools/call\\\" \\\\\n-H \\\"Content-Type: application/json\\\" \\\\\n-d '{\\\"toolName\\\": \\\"getAllPersons\\\", \\\"arguments\\\": {}}'\n</code></pre></p>"},{"location":"archived/TODO/TODO14/#_4","title":"\u7b2c\u4e94\u6b65\uff1a\u5b9e\u73b0\u670d\u52a1\u5065\u5eb7\u68c0\u67e5","text":"<ol> <li> <p>\u5065\u5eb7\u68c0\u67e5\u670d\u52a1 <pre><code>@Component\npublic class HealthCheckService {\n    @Scheduled(fixedRate = 30000)\n    public void checkHealth() {\n        List&lt;Instance&gt; instances = serverRegistry.getAllInstances();\n        instances.forEach(this::checkInstanceHealth);\n    }\n}\n</code></pre></p> </li> <li> <p>\u670d\u52a1\u964d\u7ea7\u5b9e\u73b0 <pre><code>@Component\npublic class CircuitBreaker {\n    public boolean isOpen(String serverName) {\n        HealthStatus status = healthCheckService.getStatus(serverName);\n        return status.getFailureCount() &gt; threshold;\n    }\n}\n</code></pre></p> </li> </ol> <p>\u9a8c\u8bc1\u65b9\u5f0f\uff1a <pre><code># \u505c\u6b62\u4e00\u4e2amcp-server\u5b9e\u4f8b\uff0c\u89c2\u5bdf\u5065\u5eb7\u68c0\u67e5\u65e5\u5fd7\ntail -f mcp-router-v2/logs/router.log\n</code></pre></p>"},{"location":"archived/TODO/TODO14/#_5","title":"\u7f16\u8bd1\u548c\u90e8\u7f72\u6b65\u9aa4","text":"<ol> <li> <p>\u7f16\u8bd1\u9879\u76ee <pre><code>cd mcp-router-v2\nmvn clean install\n</code></pre></p> </li> <li> <p>\u542f\u52a8\u670d\u52a1 <pre><code>mvn spring-boot:run\n</code></pre></p> </li> <li> <p>\u9a8c\u8bc1\u670d\u52a1 <pre><code># \u68c0\u67e5\u670d\u52a1\u6ce8\u518c\ncurl -X GET \\\"http://localhost:8848/nacos/v2/ns/instance/list?serviceName=mcp-server-v2\\\"\n\n# \u9a8c\u8bc1SSE\u8fde\u63a5\ncurl -N \\\"http://localhost:8050/sse/connect?clientId=test\\\"\n\n# \u9a8c\u8bc1\u5de5\u5177\u8c03\u7528\ncurl -X POST \\\"http://localhost:8070/mcp-client/api/v1/tools/call\\\" \\\\\n-H \\\"Content-Type: application/json\\\" \\\\\n-d '{\\\"toolName\\\": \\\"getAllPersons\\\", \\\"arguments\\\": {}}'\n</code></pre></p> </li> </ol>"},{"location":"archived/TODO/TODO14/#_6","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u914d\u7f6e\u68c0\u67e5</li> <li>\u786e\u4fddnacos\u670d\u52a1\u6b63\u5e38\u8fd0\u884c</li> <li>\u68c0\u67e5\u7aef\u53e3\u5360\u7528\u60c5\u51b5</li> <li> <p>\u9a8c\u8bc1\u914d\u7f6e\u6587\u4ef6\u6b63\u786e\u6027</p> </li> <li> <p>\u4f9d\u8d56\u7ba1\u7406</p> </li> <li>\u4f7f\u7528\u54cd\u5e94\u5f0f\u4f9d\u8d56</li> <li>\u907f\u514d\u4f7f\u7528\u963b\u585e\u5f0fAPI</li> <li> <p>\u786e\u4fdd\u7248\u672c\u517c\u5bb9\u6027</p> </li> <li> <p>\u6d4b\u8bd5\u9a8c\u8bc1</p> </li> <li>\u6bcf\u6b65\u5b8c\u6210\u540e\u8fdb\u884c\u6d4b\u8bd5</li> <li>\u786e\u4fdd\u5411\u540e\u517c\u5bb9\u6027</li> <li>\u9a8c\u8bc1\u9519\u8bef\u5904\u7406\u673a\u5236\"}}</li> </ol> <p>\u8fd9\u4e2a\u6539\u9020\u65b9\u6848\u5206\u4e3a\u4e94\u4e2a\u4e3b\u8981\u6b65\u9aa4\uff1a</p> <ol> <li>\u9879\u76ee\u521d\u59cb\u5316\u4e0e\u57fa\u7840\u914d\u7f6e</li> <li>\u521b\u5efa\u57fa\u7840\u9879\u76ee\u7ed3\u6784</li> <li>\u914d\u7f6e\u5fc5\u8981\u7684\u4f9d\u8d56</li> <li> <p>\u5b9e\u73b0\u57fa\u7840\u914d\u7f6e\u7c7b</p> </li> <li> <p>\u5b9e\u73b0MCP\u670d\u52a1\u6ce8\u518c</p> </li> <li>\u5b8c\u6574\u7684\u670d\u52a1\u6ce8\u518c\u673a\u5236</li> <li>\u5143\u6570\u636e\u7ba1\u7406</li> <li> <p>\u6ce8\u518c\u4e8b\u4ef6\u5904\u7406</p> </li> <li> <p>\u5b9e\u73b0SSE\u901a\u4fe1</p> </li> <li>SSE\u8fde\u63a5\u7ba1\u7406</li> <li>\u4f1a\u8bdd\u8d85\u65f6\u5904\u7406</li> <li> <p>\u6d88\u606f\u8f6c\u53d1\u673a\u5236</p> </li> <li> <p>\u5b9e\u73b0MCP\u8def\u7531\u8f6c\u53d1</p> </li> <li>\u8def\u7531\u7b56\u7565\u5b9e\u73b0</li> <li>\u8d1f\u8f7d\u5747\u8861</li> <li> <p>\u8d85\u65f6\u5904\u7406</p> </li> <li> <p>\u5b9e\u73b0\u670d\u52a1\u5065\u5eb7\u68c0\u67e5</p> </li> <li>\u5b9a\u65f6\u5065\u5eb7\u68c0\u67e5</li> <li>\u670d\u52a1\u964d\u7ea7\u673a\u5236</li> <li>\u7194\u65ad\u5668\u5b9e\u73b0</li> </ol> <p>\u6bcf\u4e2a\u6b65\u9aa4\u90fd\u53ef\u4ee5\u72ec\u7acb\u7f16\u8bd1\u548c\u9a8c\u8bc1\uff0c\u5e76\u4e14\u5305\u542b\u4e86\u5177\u4f53\u7684\u9a8c\u8bc1\u65b9\u6cd5\u3002\u60a8\u60f3\u4ece\u54ea\u4e2a\u6b65\u9aa4\u5f00\u59cb\u5b9e\u65bd\uff1f</p> <p>\u6536\u5de5\u6ce8\u518c\u670d\u52a1</p> <p>curl -X POST \"http://localhost:8050/mcp/servers/register\" \\   -H \"Content-Type: application/json\" \\   -d '{     \"name\": \"test-mcp-server\",     \"version\": \"1.0.0\",     \"ip\": \"127.0.0.1\",     \"port\": 8061,     \"sseEndpoint\": \"/sse\",     \"status\": \"UP\",     \"serviceGroup\": \"mcp-server\",     \"healthy\": true,     \"ephemeral\": true,     \"weight\": 1.0,     \"metadata\": {       \"type\": \"test\",       \"description\": \"Test MCP server for validation\"     }   }'</p>"},{"location":"archived/TODO/TODO14_result/","title":"TODO14 result","text":"<p>\u597d\u7684\uff0c\u6839\u636e\u65e5\u5fd7\u663e\u793amcp-router-v2\u9879\u76ee\u5df2\u7ecf\u6b63\u5e38\u542f\u52a8\u4e86\u3002\u8ba9\u6211\u9a8c\u8bc1\u4e00\u4e0b\u6240\u6709\u529f\u80fd\u662f\u5426\u90fd\u6b63\u5e38\u5de5\u4f5c\u3002 <pre><code>curl -s \"http://localhost:8050/actuator/health\" | python3 -m json.tool\n</code></pre></p> <pre><code>curl -s \"http://localhost:8050/health\" | python3 -m json.tool\n</code></pre> <pre><code>curl -X POST \"http://localhost:8050/mcp/servers/register\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"test-mcp-server\",\n    \"version\": \"1.0.0\",\n    \"ip\": \"127.0.0.1\",\n    \"port\": 8061,\n    \"sseEndpoint\": \"/sse\",\n    \"status\": \"UP\",\n    \"serviceGroup\": \"mcp-server\",\n    \"healthy\": true,\n    \"ephemeral\": true,\n    \"weight\": 1.0,\n    \"metadata\": {\n      \"type\": \"test\",\n      \"description\": \"Test MCP server for validation\"\n    }\n  }'\n</code></pre> <pre><code>curl -s \"http://localhost:8050/mcp/servers/test-mcp-server/instances\" | python3 -m json.tool\n</code></pre> <p>Read file: mcp-router-v2/src/main/java/com/nacos/mcp/router/v2/controller/McpServerController.java</p> <pre><code>curl -s \"http://localhost:8050/mcp/servers/instances?serviceName=test-mcp-server\" | python3 -m json.tool\n</code></pre> <pre><code>curl -s \"http://localhost:8050/mcp/servers/select?serviceName=test-mcp-server\" | python3 -m json.tool\n</code></pre> <pre><code>curl -s \"http://localhost:8050/health-check/status\" | python3 -m json.tool\n</code></pre> <p>Read file: mcp-router-v2/src/main/java/com/nacos/mcp/router/v2/controller/HealthCheckController.java</p> <pre><code>curl -s \"http://localhost:8050/mcp/health/status\" | python3 -m json.tool\n</code></pre> <pre><code>curl -s \"http://localhost:8050/mcp/health/circuit-breaker/status\" | python3 -m json.tool\n</code></pre> <p>Read file: mcp-router-v2/src/main/java/com/nacos/mcp/router/v2/controller/HealthCheckController.java</p> <pre><code>curl -s \"http://localhost:8050/mcp/health/circuit-breakers\" | python3 -m json.tool\n</code></pre> <pre><code>curl -N \"http://localhost:8050/sse/connect?clientId=test-client-001\" --max-time 5\n</code></pre> <pre><code>curl -s \"http://localhost:8050/mcp/router/services\" | python3 -m json.tool\n</code></pre> <p>Read file: mcp-router-v2/src/main/java/com/nacos/mcp/router/v2/controller/McpRouterController.java</p> <p>Read file: mcp-router-v2/src/main/java/com/nacos/mcp/router/v2/controller/McpRouterController.java</p> <pre><code>curl -s \"http://localhost:8050/mcp/router/stats\" | python3 -m json.tool\n</code></pre> <pre><code>curl -s \"http://localhost:8050/mcp/router/health/test-mcp-server\" | python3 -m json.tool\n</code></pre> <pre><code>curl -X POST \"http://localhost:8050/mcp/router/route/test-mcp-server\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"jsonrpc\": \"2.0\",\n    \"method\": \"test_method\",\n    \"params\": {\n      \"message\": \"Hello from router\"\n    },\n    \"id\": 1\n  }'\n</code></pre> <pre><code>curl -s \"http://localhost:8050/mcp/servers/deregister\" \\\n  -X POST \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"test-mcp-server\",\n    \"ip\": \"127.0.0.1\",\n    \"port\": 8061\n  }'\n</code></pre> <p>Read file: mcp-router-v2/src/main/java/com/nacos/mcp/router/v2/controller/McpServerController.java</p> <pre><code>curl -X DELETE \"http://localhost:8050/mcp/servers/deregister?serviceName=test-mcp-server\"\n</code></pre>"},{"location":"archived/TODO/TODO14_result/#mcp-router-v2","title":"MCP Router V2 \u529f\u80fd\u6d4b\u8bd5\u7ed3\u679c\u603b\u7ed3","text":"<p>\u6839\u636eTODO14.md\u76845\u6b65\u6539\u9020\u65b9\u6848\uff0c\u6211\u5df2\u7ecf\u5b8c\u6210\u4e86\u6240\u6709\u6b65\u9aa4\u7684\u9a8c\u8bc1\u6d4b\u8bd5\uff1a</p>"},{"location":"archived/TODO/TODO14_result/#_1","title":"\u2705 \u5b8c\u6210\u72b6\u6001","text":"<ul> <li>\u6b65\u9aa41: \u9879\u76ee\u521d\u59cb\u5316\u4e0e\u57fa\u7840\u914d\u7f6e \u2705</li> <li>\u6b65\u9aa42: \u5b9e\u73b0MCP\u670d\u52a1\u6ce8\u518c \u2705</li> <li>\u6b65\u9aa43: \u5b9e\u73b0SSE\u901a\u4fe1 \u2705</li> <li>\u6b65\u9aa44: \u5b9e\u73b0MCP\u8def\u7531\u8f6c\u53d1 \u2705</li> <li>\u6b65\u9aa45: \u5b9e\u73b0\u670d\u52a1\u5065\u5eb7\u68c0\u67e5 \u2705</li> </ul>"},{"location":"archived/TODO/TODO14_result/#_2","title":"\ud83d\udd27 \u6240\u6709\u529f\u80fd\u9a8c\u8bc1\u6b63\u5e38","text":"<p>1. \u5e94\u7528\u57fa\u7840\u529f\u80fd - \u5e94\u7528\u6b63\u5e38\u542f\u52a8\uff0c\u8fd0\u884c\u5728\u7aef\u53e38050 - \u5065\u5eb7\u68c0\u67e5\u7aef\u70b9\u6b63\u5e38: <code>/actuator/health</code>, <code>/health</code> - \u4e0eNacos\u8fde\u63a5\u6b63\u5e38</p> <p>2. \u670d\u52a1\u6ce8\u518c\u548c\u53d1\u73b0 <pre><code># \u670d\u52a1\u6ce8\u518c\ncurl -X POST \"http://localhost:8050/mcp/servers/register\" -H \"Content-Type: application/json\" -d '{...}'\n\n# \u83b7\u53d6\u670d\u52a1\u5b9e\u4f8b\ncurl -s \"http://localhost:8050/mcp/servers/instances?serviceName=test-mcp-server\"\n\n# \u9009\u62e9\u5065\u5eb7\u670d\u52a1\u5668\ncurl -s \"http://localhost:8050/mcp/servers/select?serviceName=test-mcp-server\"\n\n# \u670d\u52a1\u6ce8\u9500\ncurl -X DELETE \"http://localhost:8050/mcp/servers/deregister?serviceName=test-mcp-server\"\n</code></pre></p> <p>3. SSE\u901a\u4fe1 <pre><code># SSE\u8fde\u63a5\u6d4b\u8bd5\ncurl -N \"http://localhost:8050/sse/connect?clientId=test-client-001\"\n# \u54cd\u5e94: connected\u4e8b\u4ef6\u548csession\u4fe1\u606f\n</code></pre></p> <p>4. \u8def\u7531\u529f\u80fd <pre><code># \u8def\u7531\u7edf\u8ba1\u4fe1\u606f\ncurl -s \"http://localhost:8050/mcp/router/stats\"\n\n# \u670d\u52a1\u5065\u5eb7\u72b6\u6001\ncurl -s \"http://localhost:8050/mcp/router/health/test-mcp-server\"\n\n# \u6d88\u606f\u8def\u7531\ncurl -X POST \"http://localhost:8050/mcp/router/route/test-mcp-server\" -H \"Content-Type: application/json\" -d '{...}'\n</code></pre></p> <p>5. \u5065\u5eb7\u68c0\u67e5\u548c\u7194\u65ad\u5668 <pre><code># \u5065\u5eb7\u72b6\u6001\ncurl -s \"http://localhost:8050/mcp/health/status\"\n\n# \u7194\u65ad\u5668\u72b6\u6001\ncurl -s \"http://localhost:8050/mcp/health/circuit-breakers\"\n</code></pre></p>"},{"location":"archived/TODO/TODO14_result/#_3","title":"\ud83c\udfaf \u9879\u76ee\u7279\u70b9","text":"<ul> <li>\u54cd\u5e94\u5f0f\u8bbe\u8ba1: \u57fa\u4e8eSpring WebFlux\uff0c\u652f\u6301\u9ad8\u5e76\u53d1</li> <li>\u670d\u52a1\u53d1\u73b0: \u96c6\u6210Nacos\uff0c\u81ea\u52a8\u670d\u52a1\u6ce8\u518c\u548c\u53d1\u73b0</li> <li>SSE\u901a\u4fe1: \u7b26\u5408MCP\u6807\u51c6\u7684\u670d\u52a1\u5668\u63a8\u9001\u4e8b\u4ef6</li> <li>\u8d1f\u8f7d\u5747\u8861: \u652f\u6301\u591a\u79cd\u8d1f\u8f7d\u5747\u8861\u7b56\u7565</li> <li>\u5065\u5eb7\u68c0\u67e5: \u5b9a\u65f6\u5065\u5eb7\u68c0\u67e5\u548c\u7194\u65ad\u5668\u673a\u5236</li> <li>\u76d1\u63a7\u53cb\u597d: \u63d0\u4f9b\u8be6\u7ec6\u7684API\u548c\u76d1\u63a7\u7aef\u70b9</li> </ul>"},{"location":"archived/TODO/TODO14_result/#_4","title":"\ud83d\udccb \u8fd0\u884c\u72b6\u6001","text":"<p>\u9879\u76ee\u76ee\u524d\u57288050\u7aef\u53e3\u6b63\u5e38\u8fd0\u884c\uff0c\u6240\u6709\u6838\u5fc3\u529f\u80fd\u5df2\u7ecf\u5b9e\u73b0\u5e76\u901a\u8fc7\u6d4b\u8bd5\u3002[[memory:3189057]] \u6839\u636eTODO14.md\u7684\u6539\u9020\u65b9\u6848\uff0cMCP Router V2\u9879\u76ee\u5df2\u7ecf\u6210\u529f\u5b8c\u6210\u4e86\u6240\u67095\u4e2a\u6b65\u9aa4\u7684\u6539\u9020\uff0c\u4eceHTTP\u534f\u8bae\u5347\u7ea7\u5230SSE\u534f\u8bae\uff0c\u5b9e\u73b0\u4e86\u5b8c\u6574\u7684MCP\u6807\u51c6\u517c\u5bb9\u7684\u8def\u7531\u670d\u52a1\u3002</p>"},{"location":"archived/TODO/TODO15/","title":"TODO15","text":"<p>\u5206\u6790 @/mcp-gateway-example-jdk17 @/spring-ai-alibaba-mcp @https://github.com/alibaba/spring-ai-alibaba/tree/main/spring-ai-alibaba-mcp \uff0c\u5bfb\u627e\u90a3\u4e9b\u63a5\u53e3\u751f\u6210\u7684 nacos\u914d\u7f6e\u4fe1\u606f\uff0c\u9010\u4e00\u5bf9\u6bd4 @nacos-api.md \u91cc\u7684\u63a5\u53e3\u548c\u4fe1\u606f\u3002\u8981\u660e\u786e\u5230\u5177\u4f53\u884c\uff0c\u548c\u4ee3\u7801\u6bb5</p>"},{"location":"archived/TODO/TODO15_result/","title":"TODO15 result","text":"<p>\u6211\u6765\u5206\u6790\u8fd9\u4e9b\u6587\u4ef6\u5939\u548c\u4ed3\u5e93\u4e2d\u751f\u6210Nacos\u914d\u7f6e\u4fe1\u606f\u7684\u63a5\u53e3\uff0c\u5e76\u4e0enacos-api.md\u8fdb\u884c\u5bf9\u6bd4\u3002</p>"},{"location":"archived/TODO/TODO15_result/#nacos","title":"\u5206\u6790\u62a5\u544a\uff1aNacos\u914d\u7f6e\u4fe1\u606f\u751f\u6210\u63a5\u53e3\u5bf9\u6bd4","text":"<p>\u6839\u636e\u5bf9 mcp-gateway-example-jdk17\u3001spring-ai-alibaba-mcp \u9879\u76ee\u4ee5\u53ca nacos-api.md \u6587\u6863\u7684\u5206\u6790\uff0c\u6211\u53d1\u73b0\u4e86\u4ee5\u4e0b\u5173\u952e\u4fe1\u606f\uff1a</p>"},{"location":"archived/TODO/TODO15_result/#1-mcp","title":"1. MCP\u670d\u52a1\u6ce8\u518c\u548c\u914d\u7f6e\u751f\u6210\u4e3b\u8981\u63a5\u53e3","text":""},{"location":"archived/TODO/TODO15_result/#11","title":"1.1 \u670d\u52a1\u6ce8\u518c\u63a5\u53e3","text":"<p>\u6587\u4ef6\u4f4d\u7f6e\uff1a <code>mcp-gateway-example-jdk17/mcp-server/src/main/java/com/alibaba/cloud/ai/mcp/nacos/registry/NacosMcpRegister.java</code></p> <p>\u5177\u4f53\u4ee3\u7801\u6bb5\uff1a</p> <pre><code>// \u7b2c180-191\u884c\uff1a\u53d1\u5e03\u670d\u52a1\u5668\u914d\u7f6e\nboolean isPublishSuccess = this.configService.publishConfig(\n    this.serverInfo.name() + McpNacosConstant.SERVER_CONFIG_SUFFIX,  // dataId\n    McpNacosConstant.SERVER_GROUP,                                   // group\n    JsonUtils.serialize(mcpServerInfo));                             // content\n\n// \u7b2c118-126\u884c\uff1a\u53d1\u5e03\u5de5\u5177\u914d\u7f6e\nboolean isPublishSuccess = this.configService.publishConfig(\n    this.serverInfo.name() + McpNacosConstant.TOOLS_CONFIG_SUFFIX,  // dataId\n    McpNacosConstant.TOOLS_GROUP,                                   // group\n    toolsConfigContent);                                            // content\n\n// \u7b2c271-317\u884c\uff1a\u670d\u52a1\u5b9e\u4f8b\u6ce8\u518c\nnamingService.registerInstance(\n    this.serverInfo.name() + McpNacosConstant.SERVER_NAME_SUFFIX,  // serviceName\n    nacosMcpRegistryProperties.getServiceGroup(),                  // groupName\n    instance);                                                     // instance\n</code></pre>"},{"location":"archived/TODO/TODO15_result/#12","title":"1.2 \u5e38\u91cf\u5b9a\u4e49","text":"<p>\u6587\u4ef6\u4f4d\u7f6e\uff1a <code>mcp-gateway-example-jdk17/mcp-server/src/main/java/com/alibaba/cloud/ai/mcp/nacos/registry/utils/McpNacosConstant.java</code></p> <pre><code>// \u7b2c17-18\u884c\uff1a\u7ec4\u540d\u5e38\u91cf\npublic static final String TOOLS_GROUP = \"TOOLS_GROUP\";     // \u5b9e\u9645\u5bf9\u5e94 mcp-tools\npublic static final String SERVER_GROUP = \"SERVER_GROUP\";   // \u5b9e\u9645\u5bf9\u5e94 mcp-server\n\n// \u7b2c26-28\u884c\uff1a\u914d\u7f6e\u76f8\u5173\u5e38\u91cf\npublic static final String TOOLS_CONFIG_SUFFIX = \"-tools\";  // \u5b9e\u9645\u5bf9\u5e94 -1.0.1-mcp-tools.json\npublic static final String SERVER_CONFIG_SUFFIX = \"-server\"; // \u5b9e\u9645\u5bf9\u5e94 -1.0.1-mcp-server.json\n</code></pre>"},{"location":"archived/TODO/TODO15_result/#2-nacos-apimd","title":"2. \u4e0enacos-api.md\u4e2d\u63a5\u53e3\u7684\u5bf9\u6bd4","text":""},{"location":"archived/TODO/TODO15_result/#21","title":"2.1 \u67e5\u8be2\u914d\u7f6e\u4fe1\u606f\u63a5\u53e3","text":"<p>nacos-api.md\u4e2d\u7684\u63a5\u53e3\uff1a <pre><code># \u7b2c5-7\u884c\uff1a\u67e5\u8be2\u914d\u7f6e\u4fe1\u606f\ncurl -X GET \"http://localhost:8848/nacos/v2/cs/history/configs?pageNo=1&amp;pageSize=100&amp;namespaceId=public&amp;appName=mcp-server-v2\"\n</code></pre></p> <p>\u5bf9\u5e94\u7684\u751f\u6210\u4ee3\u7801\uff1a <pre><code>// NacosMcpRegister.java \u7b2c87-98\u884c\uff1aConfigService\u521d\u59cb\u5316\nthis.configService = new NacosConfigService(configProperties);\n\n// \u7b2c141-148\u884c\uff1a\u83b7\u53d6\u670d\u52a1\u5668\u914d\u7f6e\nString serverInfoContent = this.configService.getConfig(\n    this.serverInfo.name() + McpNacosConstant.SERVER_CONFIG_SUFFIX,\n    McpNacosConstant.SERVER_GROUP,\n    3000);\n</code></pre></p>"},{"location":"archived/TODO/TODO15_result/#22","title":"2.2 \u7248\u672c\u4fe1\u606f\u914d\u7f6e","text":"<p>nacos-api.md\u4e2d\u7684\u63a5\u53e3\uff1a <pre><code># \u7b2c29-31\u884c\uff1a\u83b7\u53d6\u7248\u672c\u4fe1\u606f\ncurl -X GET '127.0.0.1:8848/nacos/v3/client/cs/config?dataId=7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-mcp-versions.json&amp;groupName=mcp-server-versions'\n</code></pre></p> <p>\u5bf9\u5e94\u7684\u751f\u6210\u4ee3\u7801\uff1a <pre><code>// spring-ai-alibaba-mcp/spring-ai-alibaba-mcp-nacos/src/main/java/com/alibaba/cloud/ai/mcp/nacos/registry/NacosMcpRegister.java\n// \u7b2c134-144\u884c\uff1a\u6784\u5efa\u7248\u672c\u4fe1\u606f\nServerVersionDetail serverVersionDetail = new ServerVersionDetail();\nserverVersionDetail.setVersion(this.serverInfo.version());\nMcpServerBasicInfo serverBasicInfo = new McpServerBasicInfo();\nserverBasicInfo.setName(this.serverInfo.name());\nserverBasicInfo.setVersionDetail(serverVersionDetail);\n</code></pre></p>"},{"location":"archived/TODO/TODO15_result/#23","title":"2.3 \u5de5\u5177\u914d\u7f6e\u4fe1\u606f","text":"<p>nacos-api.md\u4e2d\u7684\u63a5\u53e3\uff1a <pre><code># \u7b2c75-77\u884c\uff1a\u83b7\u53d6\u5de5\u5177\u914d\u7f6e\ncurl -X GET '127.0.0.1:8848/nacos/v3/client/cs/config?dataId=7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-1.0.1-mcp-tools.json&amp;groupName=mcp-tools'\n</code></pre></p> <p>\u5bf9\u5e94\u7684\u751f\u6210\u4ee3\u7801\uff1a <pre><code>// NacosMcpRegister.java \u7b2c111-126\u884c\uff1a\u5de5\u5177\u914d\u7f6e\u53d1\u5e03\nMcpToolsInfo mcpToolsInfo = new McpToolsInfo();\nmcpToolsInfo.setTools(toolsNeedtoRegister);\nmcpToolsInfo.setToolsMeta(this.toolsMeta);\nString toolsConfigContent = JsonUtils.serialize(mcpToolsInfo);\nboolean isPublishSuccess = this.configService.publishConfig(\n    this.serverInfo.name() + McpNacosConstant.TOOLS_CONFIG_SUFFIX,\n    McpNacosConstant.TOOLS_GROUP,\n    toolsConfigContent);\n</code></pre></p>"},{"location":"archived/TODO/TODO15_result/#24","title":"2.4 \u670d\u52a1\u5b9e\u4f8b\u67e5\u8be2","text":"<p>nacos-api.md\u4e2d\u7684\u63a5\u53e3\uff1a <pre><code># \u7b2c105-107\u884c\uff1a\u67e5\u8be2\u5b9e\u4f8b\u5217\u8868\ncurl -X GET \"http://localhost:8848/nacos/v2/ns/instance/list?serviceName=mcp-server-v2&amp;groupName=mcp-server\"\n</code></pre></p> <p>\u5bf9\u5e94\u7684\u67e5\u8be2\u4ee3\u7801\uff1a <pre><code>// mcp-router/src/main/java/com/nacos/mcp/router/service/impl/NacosMcpServerDiscoveryServiceImpl.java\n// \u7b2c38-45\u884c\uff1a\u83b7\u53d6\u670d\u52a1\u5217\u8868\nList&lt;String&gt; serviceNames = namingService.getServicesOfServer(1, Integer.MAX_VALUE, MCP_SERVER_GROUP).getData();\n</code></pre></p>"},{"location":"archived/TODO/TODO15_result/#3","title":"3. \u914d\u7f6e\u4fe1\u606f\u7ed3\u6784\u5bf9\u6bd4","text":""},{"location":"archived/TODO/TODO15_result/#31","title":"3.1 \u7248\u672c\u4fe1\u606f\u7ed3\u6784","text":"<p>nacos-api.md\u4e2d\u7684\u7ed3\u6784\uff08\u7b2c18-29\u884c\uff09\uff1a <pre><code>{\n    \"id\": \"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5\",\n    \"name\": \"mcp-server-v2\",\n    \"protocol\": \"mcp-sse\",\n    \"frontProtocol\": \"mcp-sse\",\n    \"description\": \"mcp-server-v2\",\n    \"enabled\": true,\n    \"capabilities\": [\"TOOL\"],\n    \"latestPublishedVersion\": \"1.0.1\"\n}\n</code></pre></p> <p>\u5bf9\u5e94\u7684\u751f\u6210\u4ee3\u7801\u7ed3\u6784\uff1a <pre><code>// McpServerInfo.java \u7b2c147-176\u884c\uff1a\u670d\u52a1\u5668\u4fe1\u606f\u6784\u5efa\nMcpServerInfo mcpServerInfo = new McpServerInfo();\nmcpServerInfo.setName(this.serverInfo.name());\nmcpServerInfo.setVersion(this.serverInfo.version());\nmcpServerInfo.setDescription(serverDescription);\nmcpServerInfo.setEnabled(true);\nmcpServerInfo.setProtocol(\"mcp-sse\");\n</code></pre></p>"},{"location":"archived/TODO/TODO15_result/#32","title":"3.2 \u5de5\u5177\u914d\u7f6e\u7ed3\u6784","text":"<p>nacos-api.md\u4e2d\u7684\u5de5\u5177\u7ed3\u6784\uff08\u7b2c78-90\u884c\uff09\uff1a <pre><code>{\n    \"name\": \"deletePerson\",\n    \"description\": \"Delete a person from the database\",\n    \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n            \"id\": {\n                \"type\": \"integer\",\n                \"format\": \"int64\",\n                \"description\": \"Person's ID\"\n            }\n        },\n        \"required\": [\"id\"],\n        \"additionalProperties\": false\n    }\n}\n</code></pre></p> <p>\u5bf9\u5e94\u7684\u751f\u6210\u4ee3\u7801\uff1a <pre><code>// NacosMcpRegister.java \u7b2c106-116\u884c\uff1a\u5de5\u5177\u4fe1\u606f\u6784\u5efa\nList&lt;McpSchema.Tool&gt; toolsNeedtoRegister = this.tools.stream()\n    .map(McpServerFeatures.AsyncToolSpecification::tool)\n    .toList();\nMcpToolsInfo mcpToolsInfo = new McpToolsInfo();\nmcpToolsInfo.setTools(toolsNeedtoRegister);\n</code></pre></p>"},{"location":"archived/TODO/TODO15_result/#4","title":"4. \u5173\u952e\u53d1\u73b0","text":"<ol> <li>DataId\u547d\u540d\u89c4\u5219\uff1a\u4ee3\u7801\u4e2d\u4f7f\u7528 <code>serverName + suffix</code> \u683c\u5f0f\uff0c\u4e0enacos-api.md\u4e2d\u7684UUID\u683c\u5f0f\u4e0d\u4e00\u81f4</li> <li>\u7ec4\u540d\u6620\u5c04\uff1a\u5e38\u91cf\u5b9a\u4e49\u4e0e\u5b9e\u9645\u4f7f\u7528\u7684\u7ec4\u540d\u5b58\u5728\u5dee\u5f02</li> <li>\u7248\u672c\u4fe1\u606f\u751f\u6210\uff1a\u76ee\u524d\u4ee3\u7801\u4e2d\u7f3a\u5c11\u4e13\u95e8\u7684\u7248\u672c\u4fe1\u606f\u914d\u7f6e\u53d1\u5e03\u903b\u8f91</li> <li>\u914d\u7f6e\u83b7\u53d6\u65b9\u5f0f\uff1a\u4f7f\u7528ConfigService API\u4e0enacos-api.md\u4e2d\u7684HTTP\u63a5\u53e3\u5bf9\u5e94</li> </ol>"},{"location":"archived/TODO/TODO15_result/#5","title":"5. \u5efa\u8bae\u6539\u8fdb","text":"<ol> <li>\u7edf\u4e00\u547d\u540d\u89c4\u5219\uff1a\u5efa\u8bae\u91c7\u7528UUID\u683c\u5f0f\u7684dataId\u547d\u540d\u65b9\u5f0f</li> <li>\u5b8c\u5584\u7248\u672c\u4fe1\u606f\uff1a\u6dfb\u52a0\u4e13\u95e8\u7684\u7248\u672c\u4fe1\u606f\u914d\u7f6e\u53d1\u5e03\u903b\u8f91</li> <li>\u7ec4\u540d\u4e00\u81f4\u6027\uff1a\u786e\u4fdd\u5e38\u91cf\u5b9a\u4e49\u4e0e\u5b9e\u9645\u4f7f\u7528\u7684\u7ec4\u540d\u4fdd\u6301\u4e00\u81f4</li> <li>\u914d\u7f6e\u7ed3\u6784\u6807\u51c6\u5316\uff1a\u786e\u4fdd\u751f\u6210\u7684\u914d\u7f6e\u7ed3\u6784\u4e0eAPI\u8fd4\u56de\u7ed3\u6784\u5b8c\u5168\u5339\u914d</li> </ol> <p>\u8fd9\u4e9b\u53d1\u73b0\u8868\u660e\u9879\u76ee\u4e2d\u7684MCP\u670d\u52a1\u6ce8\u518c\u548c\u914d\u7f6e\u751f\u6210\u529f\u80fd\u57fa\u672c\u5b8c\u6574\uff0c\u4f46\u5728\u7ec6\u8282\u5b9e\u73b0\u4e0a\u4e0enacos-api.md\u4e2d\u7684\u63a5\u53e3\u6807\u51c6\u5b58\u5728\u4e00\u4e9b\u5dee\u5f02\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u5b8c\u5584\u4ee5\u786e\u4fdd\u5b8c\u5168\u517c\u5bb9\u3002</p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/","title":"Dify \u96c6\u6210 MCP Bridge v3 \u8be6\u7ec6\u6307\u5357","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#_1","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u6307\u5357\u8be6\u7ec6\u8bf4\u660e\u5982\u4f55\u5728 Dify \u4e2d\u96c6\u6210 MCP Bridge v3 \u7684\u4e24\u4e2a\u6838\u5fc3\u63a5\u53e3\uff0c\u5b9e\u73b0\u667a\u80fd\u5de5\u5177\u53d1\u73b0\u548c\u8c03\u7528\u529f\u80fd\u3002</p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#_2","title":"\u6838\u5fc3\u63a5\u53e3\u8bf4\u660e","text":"<ul> <li>\u63a5\u53e31: <code>/mcp/bridge/tools/{serviceName}</code> - \u83b7\u53d6\u670d\u52a1\u7684\u5de5\u5177\u5217\u8868</li> <li>\u63a5\u53e32: <code>/mcp/bridge/route/{serviceName}</code> - \u8c03\u7528\u5177\u4f53\u5de5\u5177</li> </ul>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#_3","title":"\u5b9e\u73b0\u6d41\u7a0b","text":"<ol> <li>\u901a\u8fc7\u63a5\u53e31\u83b7\u53d6\u53ef\u7528\u5de5\u5177\u5217\u8868</li> <li>LLM \u7406\u89e3\u5de5\u5177\u529f\u80fd\u548c\u53c2\u6570</li> <li>\u6839\u636e\u7528\u6237\u610f\u56fe\u9009\u62e9\u5408\u9002\u7684\u5de5\u5177</li> <li>\u901a\u8fc7\u63a5\u53e32\u8c03\u7528\u9009\u5b9a\u7684\u5de5\u5177</li> </ol>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#dify","title":"\ud83d\ude80 Dify \u914d\u7f6e\u6b65\u9aa4","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#1","title":"\u6b65\u9aa4 1: \u521b\u5efa\u81ea\u5b9a\u4e49\u5de5\u5177","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#11","title":"1.1 \u5de5\u5177\u53d1\u73b0\u63a5\u53e3\u914d\u7f6e","text":"<p>\u8fdb\u5165 Dify \u5de5\u4f5c\u53f0 \u2192 \u5de5\u5177 \u2192 \u81ea\u5b9a\u4e49\u5de5\u5177 \u2192 \u521b\u5efa\u5de5\u5177</p> <p>\u57fa\u7840\u4fe1\u606f: <pre><code>\u5de5\u5177\u540d\u79f0: MCP_Bridge_Tool_Discovery\n\u5de5\u5177\u63cf\u8ff0: \u83b7\u53d6 MCP Bridge \u670d\u52a1\u7684\u53ef\u7528\u5de5\u5177\u5217\u8868\n\u5de5\u5177\u56fe\u6807: \ud83d\udd27\n</code></pre></p> <p>API \u914d\u7f6e: <pre><code># \u57fa\u7840\u914d\u7f6e\n\u8bf7\u6c42\u65b9\u6cd5: GET\n\u8bf7\u6c42URL: http://localhost:8080/mcp/bridge/tools/{serviceName}\n\u8ba4\u8bc1\u65b9\u5f0f: \u65e0\u8ba4\u8bc1\n\n# \u8def\u5f84\u53c2\u6570\n\u8def\u5f84\u53c2\u6570:\n  - \u53c2\u6570\u540d: serviceName\n    \u53c2\u6570\u7c7b\u578b: string\n    \u662f\u5426\u5fc5\u9700: true\n    \u63cf\u8ff0: MCP \u670d\u52a1\u540d\u79f0 (\u4f8b\u5982: mcp-server-v6)\n    \u9ed8\u8ba4\u503c: mcp-server-v6\n\n# \u8bf7\u6c42\u5934\n\u8bf7\u6c42\u5934:\n  Content-Type: application/json\n  Accept: application/json\n\n# \u54cd\u5e94\u914d\u7f6e\n\u6210\u529f\u72b6\u6001\u7801: 200\n\u54cd\u5e94\u6570\u636e\u7c7b\u578b: JSON\n</code></pre></p> <p>\u5de5\u5177\u53c2\u6570\u8bbe\u7f6e: <pre><code>\u53c2\u6570\u914d\u7f6e:\n  - \u53c2\u6570\u540d: service_name\n    \u53c2\u6570\u7c7b\u578b: string\n    \u662f\u5426\u5fc5\u9700: true\n    \u63cf\u8ff0: \u8981\u67e5\u8be2\u7684 MCP \u670d\u52a1\u540d\u79f0\n    \u9ed8\u8ba4\u503c: mcp-server-v6\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#12","title":"1.2 \u5de5\u5177\u8c03\u7528\u63a5\u53e3\u914d\u7f6e","text":"<p>\u521b\u5efa\u7b2c\u4e8c\u4e2a\u81ea\u5b9a\u4e49\u5de5\u5177:</p> <p>\u57fa\u7840\u4fe1\u606f: <pre><code>\u5de5\u5177\u540d\u79f0: MCP_Bridge_Tool_Call\n\u5de5\u5177\u63cf\u8ff0: \u8c03\u7528 MCP Bridge \u670d\u52a1\u7684\u5177\u4f53\u5de5\u5177\n\u5de5\u5177\u56fe\u6807: \u26a1\n</code></pre></p> <p>API \u914d\u7f6e: <pre><code># \u57fa\u7840\u914d\u7f6e\n\u8bf7\u6c42\u65b9\u6cd5: POST\n\u8bf7\u6c42URL: http://localhost:8080/mcp/bridge/route/{serviceName}\n\u8ba4\u8bc1\u65b9\u5f0f: \u65e0\u8ba4\u8bc1\n\n# \u8def\u5f84\u53c2\u6570\n\u8def\u5f84\u53c2\u6570:\n  - \u53c2\u6570\u540d: serviceName\n    \u53c2\u6570\u7c7b\u578b: string\n    \u662f\u5426\u5fc5\u9700: true\n    \u63cf\u8ff0: MCP \u670d\u52a1\u540d\u79f0\n    \u9ed8\u8ba4\u503c: mcp-server-v6\n\n# \u8bf7\u6c42\u4f53\n\u8bf7\u6c42\u4f53\u7c7b\u578b: JSON\n\u8bf7\u6c42\u4f53\u6a21\u677f:\n{\n  \"id\": \"{{request_id}}\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"{{tool_name}}\",\n    \"arguments\": {{tool_arguments}}\n  }\n}\n\n# \u8bf7\u6c42\u5934\n\u8bf7\u6c42\u5934:\n  Content-Type: application/json\n  Accept: application/json\n</code></pre></p> <p>\u5de5\u5177\u53c2\u6570\u8bbe\u7f6e: <pre><code>\u53c2\u6570\u914d\u7f6e:\n  - \u53c2\u6570\u540d: service_name\n    \u53c2\u6570\u7c7b\u578b: string\n    \u662f\u5426\u5fc5\u9700: true\n    \u63cf\u8ff0: \u76ee\u6807 MCP \u670d\u52a1\u540d\u79f0\n\n  - \u53c2\u6570\u540d: tool_name\n    \u53c2\u6570\u7c7b\u578b: string\n    \u662f\u5426\u5fc5\u9700: true\n    \u63cf\u8ff0: \u8981\u8c03\u7528\u7684\u5de5\u5177\u540d\u79f0\n\n  - \u53c2\u6570\u540d: tool_arguments\n    \u53c2\u6570\u7c7b\u578b: object\n    \u662f\u5426\u5fc5\u9700: false\n    \u63cf\u8ff0: \u5de5\u5177\u8c03\u7528\u53c2\u6570 (JSON \u5bf9\u8c61)\n    \u9ed8\u8ba4\u503c: {}\n\n  - \u53c2\u6570\u540d: request_id\n    \u53c2\u6570\u7c7b\u578b: string\n    \u662f\u5426\u5fc5\u9700: false\n    \u63cf\u8ff0: \u8bf7\u6c42\u552f\u4e00\u6807\u8bc6\n    \u9ed8\u8ba4\u503c: req-{{timestamp}}\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#2","title":"\u6b65\u9aa4 2: \u521b\u5efa\u667a\u80fd\u5de5\u4f5c\u6d41","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#21","title":"2.1 \u521b\u5efa\u65b0\u7684\u5de5\u4f5c\u6d41\u5e94\u7528","text":"<p>\u5e94\u7528\u914d\u7f6e: <pre><code>\u5e94\u7528\u7c7b\u578b: \u5de5\u4f5c\u6d41\n\u5e94\u7528\u540d\u79f0: MCP\u667a\u80fd\u5de5\u5177\u52a9\u624b\n\u5e94\u7528\u63cf\u8ff0: \u57fa\u4e8e MCP Bridge \u7684\u667a\u80fd\u5de5\u5177\u8c03\u7528\u52a9\u624b\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#22","title":"2.2 \u8bbe\u8ba1\u5de5\u4f5c\u6d41\u8282\u70b9","text":"<p>\u8282\u70b91: \u5f00\u59cb\u8282\u70b9 <pre><code>\u8282\u70b9\u7c7b\u578b: \u5f00\u59cb\n\u8f93\u5165\u53d8\u91cf:\n  - \u53d8\u91cf\u540d: user_query\n    \u53d8\u91cf\u7c7b\u578b: text\n    \u63cf\u8ff0: \u7528\u6237\u67e5\u8be2\u6216\u8bf7\u6c42\n    \u793a\u4f8b: \"\u67e5\u8be2ID\u4e3a1\u7684\u4eba\u5458\u4fe1\u606f\"\n\n  - \u53d8\u91cf\u540d: service_name\n    \u53d8\u91cf\u7c7b\u578b: text\n    \u63cf\u8ff0: \u76ee\u6807\u670d\u52a1\u540d\u79f0\n    \u9ed8\u8ba4\u503c: mcp-server-v6\n</code></pre></p> <p>\u8282\u70b92: \u5de5\u5177\u53d1\u73b0\u8282\u70b9 <pre><code>\u8282\u70b9\u7c7b\u578b: \u5de5\u5177\n\u8282\u70b9\u540d\u79f0: \u83b7\u53d6\u5de5\u5177\u5217\u8868\n\u9009\u62e9\u5de5\u5177: MCP_Bridge_Tool_Discovery\n\u5de5\u5177\u53c2\u6570:\n  service_name: {{#start.service_name#}}\n</code></pre></p> <p>\u8282\u70b93: LLM \u5206\u6790\u8282\u70b9 <pre><code>\u8282\u70b9\u7c7b\u578b: LLM\n\u8282\u70b9\u540d\u79f0: \u5206\u6790\u7528\u6237\u610f\u56fe\n\u6a21\u578b: gpt-4 \u6216 claude-3\n\u7cfb\u7edf\u63d0\u793a\u8bcd: |\n  \u4f60\u662f\u4e00\u4e2a\u667a\u80fd\u5de5\u5177\u9009\u62e9\u52a9\u624b\u3002\u6839\u636e\u7528\u6237\u7684\u67e5\u8be2\u8bf7\u6c42\u548c\u53ef\u7528\u7684\u5de5\u5177\u5217\u8868\uff0c\u5206\u6790\u7528\u6237\u610f\u56fe\u5e76\u9009\u62e9\u6700\u5408\u9002\u7684\u5de5\u5177\u3002\n\n  ## \u53ef\u7528\u5de5\u5177\u5217\u8868\n  {{#\u83b7\u53d6\u5de5\u5177\u5217\u8868.tools#}}\n\n  ## \u7528\u6237\u67e5\u8be2\n  {{#start.user_query#}}\n\n  ## \u4efb\u52a1\u8981\u6c42\n  1. \u5206\u6790\u7528\u6237\u67e5\u8be2\u7684\u610f\u56fe\n  2. \u4ece\u53ef\u7528\u5de5\u5177\u4e2d\u9009\u62e9\u6700\u5408\u9002\u7684\u5de5\u5177\n  3. \u786e\u5b9a\u5de5\u5177\u8c03\u7528\u6240\u9700\u7684\u53c2\u6570\n  4. \u8f93\u51fa\u7ed3\u6784\u5316\u7684\u5de5\u5177\u8c03\u7528\u4fe1\u606f\n\n  ## \u8f93\u51fa\u683c\u5f0f\n  \u8bf7\u6309\u4ee5\u4e0b JSON \u683c\u5f0f\u8f93\u51fa:\n  {\n    \"selected_tool\": \"\u5de5\u5177\u540d\u79f0\",\n    \"reasoning\": \"\u9009\u62e9\u539f\u56e0\",\n    \"arguments\": {\n      \"\u53c2\u6570\u540d\": \"\u53c2\u6570\u503c\"\n    },\n    \"confidence\": 0.95\n  }\n\n  ## \u6ce8\u610f\u4e8b\u9879\n  - \u5982\u679c\u7528\u6237\u67e5\u8be2\u4e0d\u660e\u786e\uff0c\u8bf7\u9009\u62e9\u6700\u53ef\u80fd\u7684\u5de5\u5177\n  - \u53c2\u6570\u503c\u9700\u8981\u4ece\u7528\u6237\u67e5\u8be2\u4e2d\u63d0\u53d6\n  - \u5982\u679c\u53c2\u6570\u7f3a\u5931\uff0c\u4f7f\u7528\u5408\u7406\u7684\u9ed8\u8ba4\u503c\n  - confidence \u8868\u793a\u9009\u62e9\u7684\u7f6e\u4fe1\u5ea6 (0-1)\n\n\u7528\u6237\u63d0\u793a\u8bcd: |\n  \u7528\u6237\u67e5\u8be2: {{#start.user_query#}}\n  \u8bf7\u5206\u6790\u5e76\u9009\u62e9\u5408\u9002\u7684\u5de5\u5177\u3002\n</code></pre></p> <p>\u8282\u70b94: \u53c2\u6570\u63d0\u53d6\u8282\u70b9 <pre><code>\u8282\u70b9\u7c7b\u578b: \u4ee3\u7801\n\u8282\u70b9\u540d\u79f0: \u63d0\u53d6\u5de5\u5177\u53c2\u6570\n\u4ee3\u7801\u8bed\u8a00: Python\n\u4ee3\u7801\u5185\u5bb9: |\n  import json\n  import re\n  from datetime import datetime\n\n  def main(llm_response: str, user_query: str) -&gt; dict:\n      try:\n          # \u89e3\u6790 LLM \u54cd\u5e94\n          response_data = json.loads(llm_response)\n\n          # \u63d0\u53d6\u57fa\u7840\u4fe1\u606f\n          tool_name = response_data.get('selected_tool', '')\n          arguments = response_data.get('arguments', {})\n          reasoning = response_data.get('reasoning', '')\n          confidence = response_data.get('confidence', 0.0)\n\n          # \u751f\u6210\u8bf7\u6c42ID\n          request_id = f\"req-{datetime.now().strftime('%Y%m%d%H%M%S')}\"\n\n          # \u53c2\u6570\u9a8c\u8bc1\u548c\u8865\u5145\n          validated_args = validate_arguments(tool_name, arguments, user_query)\n\n          return {\n              \"tool_name\": tool_name,\n              \"tool_arguments\": validated_args,\n              \"request_id\": request_id,\n              \"reasoning\": reasoning,\n              \"confidence\": confidence,\n              \"success\": True\n          }\n\n      except Exception as e:\n          return {\n              \"error\": str(e),\n              \"success\": False,\n              \"tool_name\": \"\",\n              \"tool_arguments\": {},\n              \"request_id\": f\"error-{datetime.now().strftime('%Y%m%d%H%M%S')}\"\n          }\n\n  def validate_arguments(tool_name: str, arguments: dict, user_query: str) -&gt; dict:\n      \"\"\"\u9a8c\u8bc1\u548c\u8865\u5145\u5de5\u5177\u53c2\u6570\"\"\"\n\n      if tool_name == \"getPersonById\":\n          # \u4ece\u7528\u6237\u67e5\u8be2\u4e2d\u63d0\u53d6ID\n          id_match = re.search(r'ID[\u4e3a\u662f:\uff1a]\\s*(\\d+)|(\\d+)\\s*\u53f7|\u7f16\u53f7\\s*(\\d+)', user_query)\n          if id_match:\n              person_id = int(id_match.group(1) or id_match.group(2) or id_match.group(3))\n              arguments[\"id\"] = person_id\n          elif \"id\" not in arguments:\n              arguments[\"id\"] = 1  # \u9ed8\u8ba4\u503c\n\n      elif tool_name == \"getAllPersons\":\n          # \u5206\u9875\u53c2\u6570\u5904\u7406\n          if \"page\" not in arguments:\n              arguments[\"page\"] = 0\n          if \"size\" not in arguments:\n              arguments[\"size\"] = 10\n\n      elif tool_name == \"addPerson\":\n          # \u786e\u4fdd\u5fc5\u9700\u53c2\u6570\u5b58\u5728\n          required_fields = [\"firstName\", \"lastName\", \"age\", \"nationality\", \"gender\"]\n          for field in required_fields:\n              if field not in arguments:\n                  arguments[field] = extract_person_info(user_query, field)\n\n      return arguments\n\n  def extract_person_info(user_query: str, field: str) -&gt; str:\n      \"\"\"\u4ece\u7528\u6237\u67e5\u8be2\u4e2d\u63d0\u53d6\u4eba\u5458\u4fe1\u606f\"\"\"\n      patterns = {\n          \"firstName\": r'\u59d3\u540d[\u662f\u4e3a:\uff1a]\\s*(\\w+)',\n          \"lastName\": r'\u59d3[\u662f\u4e3a:\uff1a]\\s*(\\w+)',\n          \"age\": r'\u5e74\u9f84[\u662f\u4e3a:\uff1a]\\s*(\\d+)|(\\d+)\\s*\u5c81',\n          \"nationality\": r'\u56fd\u7c4d[\u662f\u4e3a:\uff1a]\\s*(\\w+)',\n          \"gender\": r'\u6027\u522b[\u662f\u4e3a:\uff1a]\\s*(\u7537|\u5973|MALE|FEMALE)'\n      }\n\n      pattern = patterns.get(field, '')\n      if pattern:\n          match = re.search(pattern, user_query)\n          if match:\n              return match.group(1) or match.group(2)\n\n      # \u9ed8\u8ba4\u503c\n      defaults = {\n          \"firstName\": \"Unknown\",\n          \"lastName\": \"User\",\n          \"age\": \"25\",\n          \"nationality\": \"Unknown\",\n          \"gender\": \"MALE\"\n      }\n\n      return defaults.get(field, \"Unknown\")\n\n\u8f93\u5165\u53d8\u91cf:\n  - llm_response: {{#\u5206\u6790\u7528\u6237\u610f\u56fe.text#}}\n  - user_query: {{#start.user_query#}}\n</code></pre></p> <p>\u8282\u70b95: \u5de5\u5177\u8c03\u7528\u8282\u70b9 <pre><code>\u8282\u70b9\u7c7b\u578b: \u5de5\u5177\n\u8282\u70b9\u540d\u79f0: \u6267\u884c\u5de5\u5177\u8c03\u7528\n\u9009\u62e9\u5de5\u5177: MCP_Bridge_Tool_Call\n\u5de5\u5177\u53c2\u6570:\n  service_name: {{#start.service_name#}}\n  tool_name: {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.tool_name#}}\n  tool_arguments: {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.tool_arguments#}}\n  request_id: {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.request_id#}}\n</code></pre></p> <p>\u8282\u70b96: \u7ed3\u679c\u5904\u7406\u8282\u70b9 <pre><code>\u8282\u70b9\u7c7b\u578b: LLM\n\u8282\u70b9\u540d\u79f0: \u683c\u5f0f\u5316\u54cd\u5e94\n\u6a21\u578b: gpt-4 \u6216 claude-3\n\u7cfb\u7edf\u63d0\u793a\u8bcd: |\n  \u4f60\u662f\u4e00\u4e2a\u667a\u80fd\u54cd\u5e94\u683c\u5f0f\u5316\u52a9\u624b\u3002\u5c06\u5de5\u5177\u8c03\u7528\u7684\u7ed3\u679c\u8f6c\u6362\u4e3a\u81ea\u7136\u3001\u53cb\u597d\u7684\u7528\u6237\u56de\u590d\u3002\n\n  ## \u539f\u59cb\u67e5\u8be2\n  {{#start.user_query#}}\n\n  ## \u5de5\u5177\u8c03\u7528\u4fe1\u606f\n  - \u9009\u62e9\u5de5\u5177: {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.tool_name#}}\n  - \u9009\u62e9\u539f\u56e0: {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.reasoning#}}\n  - \u7f6e\u4fe1\u5ea6: {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.confidence#}}\n\n  ## \u5de5\u5177\u8c03\u7528\u7ed3\u679c\n  {{#\u6267\u884c\u5de5\u5177\u8c03\u7528.result#}}\n\n  ## \u683c\u5f0f\u5316\u8981\u6c42\n  1. \u4f7f\u7528\u81ea\u7136\u3001\u53cb\u597d\u7684\u8bed\u8a00\n  2. \u7a81\u51fa\u5173\u952e\u4fe1\u606f\n  3. \u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u7ed9\u51fa\u53cb\u597d\u7684\u9519\u8bef\u8bf4\u660e\n  4. \u4fdd\u6301\u56de\u590d\u7684\u7b80\u6d01\u6027\u548c\u51c6\u786e\u6027\n\n\u7528\u6237\u63d0\u793a\u8bcd: |\n  \u8bf7\u5c06\u4ee5\u4e0a\u5de5\u5177\u8c03\u7528\u7ed3\u679c\u683c\u5f0f\u5316\u4e3a\u53cb\u597d\u7684\u7528\u6237\u56de\u590d\u3002\n</code></pre></p> <p>\u8282\u70b97: \u7ed3\u675f\u8282\u70b9 <pre><code>\u8282\u70b9\u7c7b\u578b: \u7ed3\u675f\n\u8f93\u51fa\u53d8\u91cf:\n  - \u53d8\u91cf\u540d: final_response\n    \u53d8\u91cf\u503c: {{#\u683c\u5f0f\u5316\u54cd\u5e94.text#}}\n\n  - \u53d8\u91cf\u540d: tool_info\n    \u53d8\u91cf\u503c: |\n      {\n        \"selected_tool\": \"{{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.tool_name#}}\",\n        \"reasoning\": \"{{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.reasoning#}}\",\n        \"confidence\": {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.confidence#}},\n        \"success\": {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.success#}}\n      }\n\n  - \u53d8\u91cf\u540d: raw_result\n    \u53d8\u91cf\u503c: {{#\u6267\u884c\u5de5\u5177\u8c03\u7528.result#}}\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#3","title":"\u6b65\u9aa4 3: \u9ad8\u7ea7\u914d\u7f6e","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#31","title":"3.1 \u9519\u8bef\u5904\u7406\u5206\u652f","text":"<p>\u6dfb\u52a0\u6761\u4ef6\u5206\u652f\u8282\u70b9: <pre><code>\u8282\u70b9\u7c7b\u578b: \u6761\u4ef6\u5206\u652f\n\u8282\u70b9\u540d\u79f0: \u68c0\u67e5\u5de5\u5177\u9009\u62e9\u7ed3\u679c\n\u6761\u4ef6\u8bbe\u7f6e:\n  \u6761\u4ef61: {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.success#}} == true\n    \u4e0b\u4e00\u6b65: \u6267\u884c\u5de5\u5177\u8c03\u7528\n  \u6761\u4ef62: {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.success#}} == false\n    \u4e0b\u4e00\u6b65: \u9519\u8bef\u5904\u7406\u8282\u70b9\n</code></pre></p> <p>\u9519\u8bef\u5904\u7406\u8282\u70b9: <pre><code>\u8282\u70b9\u7c7b\u578b: LLM\n\u8282\u70b9\u540d\u79f0: \u9519\u8bef\u5904\u7406\n\u7cfb\u7edf\u63d0\u793a\u8bcd: |\n  \u5de5\u5177\u9009\u62e9\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u9519\u8bef\uff0c\u8bf7\u5206\u6790\u9519\u8bef\u539f\u56e0\u5e76\u7ed9\u51fa\u53cb\u597d\u7684\u56de\u590d\u3002\n\n  ## \u7528\u6237\u67e5\u8be2\n  {{#start.user_query#}}\n\n  ## \u9519\u8bef\u4fe1\u606f\n  {{#\u63d0\u53d6\u5de5\u5177\u53c2\u6570.error#}}\n\n  ## \u53ef\u7528\u5de5\u5177\u5217\u8868\n  {{#\u83b7\u53d6\u5de5\u5177\u5217\u8868.tools#}}\n\n  \u8bf7\u7ed9\u51fa\u53cb\u597d\u7684\u9519\u8bef\u8bf4\u660e\u548c\u5efa\u8bae\u3002\n\n\u7528\u6237\u63d0\u793a\u8bcd: |\n  \u7528\u6237\u67e5\u8be2: {{#start.user_query#}}\n  \u8bf7\u5206\u6790\u9519\u8bef\u5e76\u7ed9\u51fa\u5efa\u8bae\u3002\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#32","title":"3.2 \u591a\u670d\u52a1\u652f\u6301","text":"<p>\u670d\u52a1\u9009\u62e9\u8282\u70b9: <pre><code>\u8282\u70b9\u7c7b\u578b: LLM\n\u8282\u70b9\u540d\u79f0: \u9009\u62e9\u76ee\u6807\u670d\u52a1\n\u7cfb\u7edf\u63d0\u793a\u8bcd: |\n  \u6839\u636e\u7528\u6237\u67e5\u8be2\uff0c\u9009\u62e9\u6700\u5408\u9002\u7684 MCP \u670d\u52a1\u3002\n\n  ## \u53ef\u7528\u670d\u52a1\u5217\u8868\n  - mcp-server-v3: \u57fa\u7840\u4eba\u5458\u7ba1\u7406\u670d\u52a1\n  - mcp-server-v6: \u589e\u5f3a\u4eba\u5458\u7ba1\u7406\u670d\u52a1\uff0c\u652f\u6301\u66f4\u591a\u529f\u80fd\n  - mcp-server-custom: \u81ea\u5b9a\u4e49\u4e1a\u52a1\u670d\u52a1\n\n  ## \u7528\u6237\u67e5\u8be2\n  {{#start.user_query#}}\n\n  ## \u8f93\u51fa\u683c\u5f0f\n  \u8bf7\u8f93\u51fa\u670d\u52a1\u540d\u79f0\uff0c\u4f8b\u5982: mcp-server-v6\n\n\u7528\u6237\u63d0\u793a\u8bcd: |\n  \u7528\u6237\u67e5\u8be2: {{#start.user_query#}}\n  \u8bf7\u9009\u62e9\u6700\u5408\u9002\u7684\u670d\u52a1\u3002\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#33","title":"3.3 \u7f13\u5b58\u4f18\u5316","text":"<p>\u6dfb\u52a0\u7f13\u5b58\u8282\u70b9: <pre><code>\u8282\u70b9\u7c7b\u578b: \u4ee3\u7801\n\u8282\u70b9\u540d\u79f0: \u5de5\u5177\u5217\u8868\u7f13\u5b58\n\u4ee3\u7801\u5185\u5bb9: |\n  import json\n  import time\n  from typing import Dict, Any\n\n  # \u7b80\u5355\u5185\u5b58\u7f13\u5b58 (\u751f\u4ea7\u73af\u5883\u5efa\u8bae\u4f7f\u7528 Redis)\n  cache = {}\n  CACHE_TTL = 300  # 5\u5206\u949f\u7f13\u5b58\n\n  def main(service_name: str) -&gt; Dict[str, Any]:\n      cache_key = f\"tools_{service_name}\"\n      current_time = time.time()\n\n      # \u68c0\u67e5\u7f13\u5b58\n      if cache_key in cache:\n          cached_data = cache[cache_key]\n          if current_time - cached_data['timestamp'] &lt; CACHE_TTL:\n              return {\n                  \"use_cache\": True,\n                  \"tools\": cached_data['data'],\n                  \"cache_hit\": True\n              }\n\n      # \u7f13\u5b58\u672a\u547d\u4e2d\u6216\u8fc7\u671f\n      return {\n          \"use_cache\": False,\n          \"cache_hit\": False\n      }\n\n  def save_to_cache(service_name: str, tools_data: Any) -&gt; Dict[str, Any]:\n      cache_key = f\"tools_{service_name}\"\n      cache[cache_key] = {\n          \"data\": tools_data,\n          \"timestamp\": time.time()\n      }\n\n      return {\"cached\": True}\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#4","title":"\u6b65\u9aa4 4: \u6d4b\u8bd5\u914d\u7f6e","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#41","title":"4.1 \u6d4b\u8bd5\u7528\u4f8b\u8bbe\u8ba1","text":"<p>\u6d4b\u8bd5\u7528\u4f8b1: \u57fa\u7840\u67e5\u8be2 <pre><code>\u8f93\u5165:\n  user_query: \"\u67e5\u8be2ID\u4e3a1\u7684\u4eba\u5458\u4fe1\u606f\"\n  service_name: \"mcp-server-v6\"\n\n\u671f\u671b\u8f93\u51fa:\n  - \u6b63\u786e\u8bc6\u522b getPersonById \u5de5\u5177\n  - \u63d0\u53d6\u53c2\u6570 id: 1\n  - \u8fd4\u56de\u4eba\u5458\u8be6\u7ec6\u4fe1\u606f\n</code></pre></p> <p>\u6d4b\u8bd5\u7528\u4f8b2: \u6a21\u7cca\u67e5\u8be2 <pre><code>\u8f93\u5165:\n  user_query: \"\u6211\u60f3\u770b\u770b\u6240\u6709\u7528\u6237\"\n  service_name: \"mcp-server-v6\"\n\n\u671f\u671b\u8f93\u51fa:\n  - \u6b63\u786e\u8bc6\u522b getAllPersons \u5de5\u5177\n  - \u4f7f\u7528\u9ed8\u8ba4\u5206\u9875\u53c2\u6570\n  - \u8fd4\u56de\u7528\u6237\u5217\u8868\n</code></pre></p> <p>\u6d4b\u8bd5\u7528\u4f8b3: \u590d\u6742\u64cd\u4f5c <pre><code>\u8f93\u5165:\n  user_query: \"\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7528\u6237\uff0c\u59d3\u540d\u53eb\u5f20\u4e09\uff0c25\u5c81\uff0c\u7537\u6027\uff0c\u4e2d\u56fd\u4eba\"\n  service_name: \"mcp-server-v6\"\n\n\u671f\u671b\u8f93\u51fa:\n  - \u6b63\u786e\u8bc6\u522b addPerson \u5de5\u5177\n  - \u63d0\u53d6\u6240\u6709\u5fc5\u9700\u53c2\u6570\n  - \u6210\u529f\u521b\u5efa\u65b0\u7528\u6237\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#42","title":"4.2 \u8c03\u8bd5\u914d\u7f6e","text":"<p>\u5f00\u542f\u8c03\u8bd5\u6a21\u5f0f: <pre><code>\u5de5\u4f5c\u6d41\u8bbe\u7f6e:\n  \u8c03\u8bd5\u6a21\u5f0f: \u5f00\u542f\n  \u65e5\u5fd7\u7ea7\u522b: \u8be6\u7ec6\n  \u4fdd\u5b58\u4e2d\u95f4\u7ed3\u679c: \u662f\n\n\u8282\u70b9\u8c03\u8bd5:\n  - \u5728\u6bcf\u4e2a\u5173\u952e\u8282\u70b9\u540e\u6dfb\u52a0\u8c03\u8bd5\u8f93\u51fa\n  - \u4fdd\u5b58 LLM \u7684\u539f\u59cb\u54cd\u5e94\n  - \u8bb0\u5f55\u5de5\u5177\u8c03\u7528\u7684\u5b8c\u6574\u8bf7\u6c42\u548c\u54cd\u5e94\n</code></pre></p> <p>\u8c03\u8bd5\u8f93\u51fa\u793a\u4f8b: <pre><code>\u8c03\u8bd5\u8282\u70b9\u914d\u7f6e:\n  \u8282\u70b9\u7c7b\u578b: \u4ee3\u7801\n  \u8282\u70b9\u540d\u79f0: \u8c03\u8bd5\u8f93\u51fa\n  \u4ee3\u7801\u5185\u5bb9: |\n    def main(**kwargs) -&gt; dict:\n        debug_info = {\n            \"timestamp\": datetime.now().isoformat(),\n            \"node_inputs\": kwargs,\n            \"processing_stage\": \"\u5de5\u5177\u9009\u62e9\u5b8c\u6210\"\n        }\n\n        print(f\"[DEBUG] {debug_info}\")\n\n        return {\n            \"debug_info\": debug_info,\n            \"continue\": True\n        }\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#5","title":"\u6b65\u9aa4 5: \u90e8\u7f72\u548c\u76d1\u63a7","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#51","title":"5.1 \u751f\u4ea7\u73af\u5883\u914d\u7f6e","text":"<p>\u6027\u80fd\u4f18\u5316: <pre><code>\u5de5\u4f5c\u6d41\u914d\u7f6e:\n  \u5e76\u53d1\u5904\u7406: \u542f\u7528\n  \u6700\u5927\u5e76\u53d1\u6570: 10\n  \u8d85\u65f6\u8bbe\u7f6e: 30\u79d2\n  \u91cd\u8bd5\u673a\u5236: \u542f\u7528\n  \u91cd\u8bd5\u6b21\u6570: 3\n\n\u7f13\u5b58\u914d\u7f6e:\n  \u542f\u7528\u5de5\u5177\u5217\u8868\u7f13\u5b58: \u662f\n  \u7f13\u5b58\u8fc7\u671f\u65f6\u95f4: 5\u5206\u949f\n  \u7f13\u5b58\u63d0\u4f9b\u8005: Redis\n</code></pre></p> <p>\u5b89\u5168\u914d\u7f6e: <pre><code>\u5b89\u5168\u8bbe\u7f6e:\n  API\u5bc6\u94a5\u7ba1\u7406: \u542f\u7528\n  \u8bf7\u6c42\u9891\u7387\u9650\u5236: 100/\u5206\u949f\n  IP\u767d\u540d\u5355: \u914d\u7f6e\u5141\u8bb8\u7684IP\u6bb5\n  \u8f93\u5165\u9a8c\u8bc1: \u542f\u7528\u4e25\u683c\u9a8c\u8bc1\n  \u8f93\u51fa\u8fc7\u6ee4: \u542f\u7528\u654f\u611f\u4fe1\u606f\u8fc7\u6ee4\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#52","title":"5.2 \u76d1\u63a7\u548c\u544a\u8b66","text":"<p>\u76d1\u63a7\u6307\u6807: <pre><code>\u5173\u952e\u6307\u6807:\n  - \u5de5\u4f5c\u6d41\u6267\u884c\u6210\u529f\u7387\n  - \u5e73\u5747\u54cd\u5e94\u65f6\u95f4\n  - \u5de5\u5177\u9009\u62e9\u51c6\u786e\u7387\n  - \u9519\u8bef\u7c7b\u578b\u5206\u5e03\n  - \u7528\u6237\u6ee1\u610f\u5ea6\n\n\u544a\u8b66\u89c4\u5219:\n  - \u6210\u529f\u7387 &lt; 95%\n  - \u54cd\u5e94\u65f6\u95f4 &gt; 10\u79d2\n  - \u9519\u8bef\u7387 &gt; 5%\n  - \u8fde\u7eed\u5931\u8d25 &gt; 5\u6b21\n</code></pre></p> <p>\u65e5\u5fd7\u914d\u7f6e: <pre><code>\u65e5\u5fd7\u8bbe\u7f6e:\n  \u65e5\u5fd7\u7ea7\u522b: INFO\n  \u4fdd\u7559\u65f6\u95f4: 30\u5929\n\n\u8bb0\u5f55\u5185\u5bb9:\n  - \u7528\u6237\u67e5\u8be2\u539f\u6587\n  - \u5de5\u5177\u9009\u62e9\u8fc7\u7a0b\n  - \u53c2\u6570\u63d0\u53d6\u7ed3\u679c\n  - \u5de5\u5177\u8c03\u7528\u54cd\u5e94\n  - \u6700\u7ec8\u56de\u590d\u5185\u5bb9\n  - \u6267\u884c\u65f6\u957f\u7edf\u8ba1\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#_4","title":"\ud83d\udd27 \u9ad8\u7ea7\u529f\u80fd\u914d\u7f6e","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#1_1","title":"1. \u591a\u8f6e\u5bf9\u8bdd\u652f\u6301","text":"<p>\u5bf9\u8bdd\u4e0a\u4e0b\u6587\u7ba1\u7406: <pre><code>\u8282\u70b9\u7c7b\u578b: \u4ee3\u7801\n\u8282\u70b9\u540d\u79f0: \u4e0a\u4e0b\u6587\u7ba1\u7406\n\u4ee3\u7801\u5185\u5bb9: |\n  def main(user_query: str, conversation_id: str = None) -&gt; dict:\n      # \u83b7\u53d6\u5bf9\u8bdd\u5386\u53f2\n      context = get_conversation_context(conversation_id)\n\n      # \u5206\u6790\u662f\u5426\u9700\u8981\u4e0a\u4e0b\u6587\u4fe1\u606f\n      needs_context = analyze_context_dependency(user_query)\n\n      if needs_context and context:\n          # \u5408\u5e76\u4e0a\u4e0b\u6587\u4fe1\u606f\n          enriched_query = f\"\"\"\n          ## \u5bf9\u8bdd\u5386\u53f2\n          {context.get('history', '')}\n\n          ## \u5f53\u524d\u67e5\u8be2\n          {user_query}\n\n          ## \u4e0a\u6b21\u5de5\u5177\u8c03\u7528\u7ed3\u679c\n          {context.get('last_result', '')}\n          \"\"\"\n\n          return {\n              \"enriched_query\": enriched_query,\n              \"has_context\": True,\n              \"conversation_id\": conversation_id\n          }\n\n      return {\n          \"enriched_query\": user_query,\n          \"has_context\": False,\n          \"conversation_id\": conversation_id or generate_conversation_id()\n      }\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#2_1","title":"2. \u667a\u80fd\u53c2\u6570\u8865\u5168","text":"<p>\u53c2\u6570\u8865\u5168\u8282\u70b9: <pre><code>\u8282\u70b9\u7c7b\u578b: LLM\n\u8282\u70b9\u540d\u79f0: \u667a\u80fd\u53c2\u6570\u8865\u5168\n\u7cfb\u7edf\u63d0\u793a\u8bcd: |\n  \u4f60\u662f\u4e00\u4e2a\u667a\u80fd\u53c2\u6570\u8865\u5168\u52a9\u624b\u3002\u5f53\u5de5\u5177\u8c03\u7528\u53c2\u6570\u4e0d\u5b8c\u6574\u65f6\uff0c\u901a\u8fc7\u5206\u6790\u4e0a\u4e0b\u6587\u548c\u5e38\u89c1\u6a21\u5f0f\u6765\u8865\u5168\u53c2\u6570\u3002\n\n  ## \u5de5\u5177\u5b9a\u4e49\n  {{#\u5de5\u5177\u5b9a\u4e49#}}\n\n  ## \u7528\u6237\u67e5\u8be2\n  {{#\u7528\u6237\u67e5\u8be2#}}\n\n  ## \u5f53\u524d\u53c2\u6570\n  {{#\u5f53\u524d\u53c2\u6570#}}\n\n  ## \u8865\u5168\u7b56\u7565\n  1. \u4ece\u7528\u6237\u67e5\u8be2\u4e2d\u63d0\u53d6\u9690\u542b\u4fe1\u606f\n  2. \u4f7f\u7528\u5408\u7406\u7684\u9ed8\u8ba4\u503c\n  3. \u57fa\u4e8e\u4e0a\u4e0b\u6587\u63a8\u65ad\u7f3a\u5931\u53c2\u6570\n  4. \u5982\u679c\u65e0\u6cd5\u786e\u5b9a\uff0c\u8bf7\u6c42\u7528\u6237\u786e\u8ba4\n\n  \u8bf7\u8f93\u51fa\u8865\u5168\u540e\u7684\u5b8c\u6574\u53c2\u6570\u3002\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#3_1","title":"3. \u7ed3\u679c\u9a8c\u8bc1\u548c\u4fee\u6b63","text":"<p>\u7ed3\u679c\u9a8c\u8bc1\u8282\u70b9: <pre><code>\u8282\u70b9\u7c7b\u578b: \u4ee3\u7801\n\u8282\u70b9\u540d\u79f0: \u7ed3\u679c\u9a8c\u8bc1\n\u4ee3\u7801\u5185\u5bb9: |\n  def main(tool_result: dict, user_query: str, tool_name: str) -&gt; dict:\n      \"\"\"\u9a8c\u8bc1\u5de5\u5177\u8c03\u7528\u7ed3\u679c\u7684\u5408\u7406\u6027\"\"\"\n\n      validation_result = {\n          \"is_valid\": True,\n          \"confidence\": 1.0,\n          \"issues\": [],\n          \"suggestions\": []\n      }\n\n      # \u68c0\u67e5\u7ed3\u679c\u683c\u5f0f\n      if not validate_result_format(tool_result, tool_name):\n          validation_result[\"issues\"].append(\"\u7ed3\u679c\u683c\u5f0f\u4e0d\u6b63\u786e\")\n          validation_result[\"is_valid\"] = False\n\n      # \u68c0\u67e5\u7ed3\u679c\u5185\u5bb9\n      if not validate_result_content(tool_result, user_query):\n          validation_result[\"issues\"].append(\"\u7ed3\u679c\u5185\u5bb9\u4e0e\u67e5\u8be2\u4e0d\u5339\u914d\")\n          validation_result[\"confidence\"] *= 0.7\n\n      # \u68c0\u67e5\u6570\u636e\u5b8c\u6574\u6027\n      if not validate_data_completeness(tool_result, tool_name):\n          validation_result[\"issues\"].append(\"\u6570\u636e\u4e0d\u5b8c\u6574\")\n          validation_result[\"confidence\"] *= 0.8\n          validation_result[\"suggestions\"].append(\"\u5efa\u8bae\u91cd\u65b0\u8c03\u7528\u5de5\u5177\")\n\n      return validation_result\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#_5","title":"\ud83d\udcca \u6d4b\u8bd5\u548c\u9a8c\u8bc1","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#_6","title":"\u5b8c\u6574\u6d4b\u8bd5\u6d41\u7a0b","text":"<p>1. \u5355\u5143\u6d4b\u8bd5: <pre><code># \u6d4b\u8bd5\u5de5\u5177\u53d1\u73b0\u63a5\u53e3\ncurl -X GET \"http://localhost:8080/mcp/bridge/tools/mcp-server-v6\" \\\n  -H \"Accept: application/json\"\n\n# \u6d4b\u8bd5\u5de5\u5177\u8c03\u7528\u63a5\u53e3\ncurl -X POST \"http://localhost:8080/mcp/bridge/route/mcp-server-v6\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"id\": \"test-001\",\n    \"method\": \"tools/call\",\n    \"params\": {\n      \"name\": \"getPersonById\",\n      \"arguments\": {\"id\": 1}\n    }\n  }'\n</code></pre></p> <p>2. \u96c6\u6210\u6d4b\u8bd5: \u5728 Dify \u4e2d\u521b\u5efa\u6d4b\u8bd5\u5bf9\u8bdd\uff0c\u9a8c\u8bc1\u5b8c\u6574\u6d41\u7a0b\uff1a</p> <pre><code>\u7528\u6237: \"\u67e5\u8be2ID\u4e3a1\u7684\u4eba\u5458\u4fe1\u606f\"\n\u671f\u671b: \u7cfb\u7edf\u81ea\u52a8\u9009\u62e9 getPersonById \u5de5\u5177\u5e76\u8fd4\u56de\u7ed3\u679c\n\n\u7528\u6237: \"\u663e\u793a\u6240\u6709\u7528\u6237\"  \n\u671f\u671b: \u7cfb\u7edf\u9009\u62e9 getAllPersons \u5de5\u5177\u5e76\u8fd4\u56de\u7528\u6237\u5217\u8868\n\n\u7528\u6237: \"\u6dfb\u52a0\u65b0\u7528\u6237\u5f20\u4e09\"\n\u671f\u671b: \u7cfb\u7edf\u8bc6\u522b\u9700\u8981\u66f4\u591a\u4fe1\u606f\u5e76\u5f15\u5bfc\u7528\u6237\u8865\u5145\n</code></pre> <p>3. \u6027\u80fd\u6d4b\u8bd5: <pre><code>\u6d4b\u8bd5\u6307\u6807:\n  - \u5de5\u5177\u53d1\u73b0\u54cd\u5e94\u65f6\u95f4: &lt; 1\u79d2\n  - \u5de5\u5177\u8c03\u7528\u54cd\u5e94\u65f6\u95f4: &lt; 3\u79d2\n  - \u6574\u4f53\u5de5\u4f5c\u6d41\u54cd\u5e94\u65f6\u95f4: &lt; 10\u79d2\n  - \u5e76\u53d1\u652f\u6301: 10\u4e2a\u5e76\u53d1\u5bf9\u8bdd\n</code></pre></p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#_7","title":"\ud83d\udcdd \u6700\u4f73\u5b9e\u8df5\u5efa\u8bae","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#1-prompt","title":"1. Prompt \u8bbe\u8ba1\u539f\u5219","text":"<ul> <li>\u660e\u786e\u6027: \u7cfb\u7edf\u63d0\u793a\u8bcd\u8981\u660e\u786e\u63cf\u8ff0\u4efb\u52a1\u76ee\u6807</li> <li>\u7ed3\u6784\u5316: \u4f7f\u7528\u7ed3\u6784\u5316\u7684\u8f93\u51fa\u683c\u5f0f</li> <li>\u793a\u4f8b\u5bfc\u5411: \u63d0\u4f9b\u5177\u4f53\u7684\u8f93\u5165\u8f93\u51fa\u793a\u4f8b</li> <li>\u9519\u8bef\u5904\u7406: \u5305\u542b\u9519\u8bef\u60c5\u51b5\u7684\u5904\u7406\u6307\u5bfc</li> </ul>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#2_2","title":"2. \u5de5\u4f5c\u6d41\u4f18\u5316","text":"<ul> <li>\u6a21\u5757\u5316: \u5c06\u590d\u6742\u903b\u8f91\u62c6\u5206\u4e3a\u72ec\u7acb\u8282\u70b9</li> <li>\u53ef\u91cd\u7528: \u8bbe\u8ba1\u53ef\u91cd\u7528\u7684\u5b50\u5de5\u4f5c\u6d41</li> <li>\u53ef\u6d4b\u8bd5: \u6bcf\u4e2a\u8282\u70b9\u90fd\u8981\u4fbf\u4e8e\u72ec\u7acb\u6d4b\u8bd5</li> <li>\u53ef\u76d1\u63a7: \u6dfb\u52a0\u5173\u952e\u8282\u70b9\u7684\u76d1\u63a7\u548c\u65e5\u5fd7</li> </ul>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#3_2","title":"3. \u9519\u8bef\u5904\u7406\u7b56\u7565","text":"<ul> <li>\u5206\u7ea7\u5904\u7406: \u533a\u5206\u7cfb\u7edf\u9519\u8bef\u548c\u4e1a\u52a1\u9519\u8bef</li> <li>\u53cb\u597d\u63d0\u793a: \u7ed9\u7528\u6237\u53cb\u597d\u7684\u9519\u8bef\u4fe1\u606f</li> <li>\u81ea\u52a8\u91cd\u8bd5: \u5bf9\u4e34\u65f6\u6027\u9519\u8bef\u5b9e\u73b0\u81ea\u52a8\u91cd\u8bd5</li> <li>\u964d\u7ea7\u65b9\u6848: \u63d0\u4f9b\u5907\u9009\u7684\u5904\u7406\u65b9\u6848</li> </ul>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#4_1","title":"4. \u6027\u80fd\u4f18\u5316","text":"<ul> <li>\u7f13\u5b58\u7b56\u7565: \u5408\u7406\u4f7f\u7528\u7f13\u5b58\u51cf\u5c11\u91cd\u590d\u8c03\u7528</li> <li>\u5e76\u884c\u5904\u7406: \u9002\u5f53\u4f7f\u7528\u5e76\u884c\u8282\u70b9\u63d0\u9ad8\u6548\u7387</li> <li>\u8d44\u6e90\u7ba1\u7406: \u63a7\u5236\u5e76\u53d1\u6570\u91cf\u548c\u8d44\u6e90\u4f7f\u7528</li> <li>\u8d85\u65f6\u63a7\u5236: \u8bbe\u7f6e\u5408\u7406\u7684\u8d85\u65f6\u65f6\u95f4</li> </ul>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#_8","title":"\ud83d\ude80 \u6269\u5c55\u529f\u80fd","text":""},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#1-mcp","title":"1. \u652f\u6301\u66f4\u591a MCP \u670d\u52a1","text":"<p>\u4fee\u6539\u670d\u52a1\u9009\u62e9\u903b\u8f91\uff0c\u652f\u6301\u52a8\u6001\u53d1\u73b0\u548c\u9009\u62e9\u4e0d\u540c\u7684 MCP \u670d\u52a1\u3002</p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#2_3","title":"2. \u667a\u80fd\u5b66\u4e60\u529f\u80fd","text":"<p>\u57fa\u4e8e\u7528\u6237\u884c\u4e3a\u6570\u636e\uff0c\u4f18\u5316\u5de5\u5177\u9009\u62e9\u7684\u51c6\u786e\u6027\u3002</p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#3_3","title":"3. \u591a\u8bed\u8a00\u652f\u6301","text":"<p>\u6269\u5c55\u652f\u6301\u591a\u79cd\u8bed\u8a00\u7684\u67e5\u8be2\u548c\u54cd\u5e94\u3002</p>"},{"location":"archived/docs-250812/DIFY_INTEGRATION_GUIDE/#4_2","title":"4. \u81ea\u5b9a\u4e49\u5de5\u5177","text":"<p>\u5141\u8bb8\u7528\u6237\u6ce8\u518c\u548c\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684 MCP \u5de5\u5177\u3002</p> <p>\ud83d\udca1 \u96c6\u6210\u63d0\u793a:  1. \u5f00\u59cb\u65f6\u4f7f\u7528\u7b80\u5355\u7684\u6d4b\u8bd5\u7528\u4f8b\u9a8c\u8bc1\u57fa\u672c\u529f\u80fd 2. \u9010\u6b65\u589e\u52a0\u590d\u6742\u7684\u573a\u666f\u548c\u9519\u8bef\u5904\u7406 3. \u6301\u7eed\u4f18\u5316 Prompt \u63d0\u9ad8\u5de5\u5177\u9009\u62e9\u51c6\u786e\u6027 4. \u5efa\u7acb\u5b8c\u5584\u7684\u6d4b\u8bd5\u548c\u76d1\u63a7\u4f53\u7cfb 5. \u6839\u636e\u7528\u6237\u53cd\u9988\u4e0d\u65ad\u6539\u8fdb\u7528\u6237\u4f53\u9a8c</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/","title":"MCP Bridge v3 API \u63a5\u53e3\u6587\u6863","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_1","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u8be6\u7ec6\u63cf\u8ff0\u4e86 MCP Bridge v3 \u63d0\u4f9b\u7684\u6240\u6709 REST API \u63a5\u53e3\uff0c\u5305\u62ec\u5de5\u5177\u8c03\u7528\u3001\u670d\u52a1\u7ba1\u7406\u3001\u76d1\u63a7\u67e5\u8be2\u7b49\u529f\u80fd\u3002</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_2","title":"\ud83c\udf10 \u57fa\u7840\u4fe1\u606f","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_3","title":"\u670d\u52a1\u5730\u5740","text":"<ul> <li>\u5f00\u53d1\u73af\u5883: <code>http://localhost:8080</code></li> <li>\u751f\u4ea7\u73af\u5883: <code>https://mcp-bridge.your-domain.com</code></li> </ul>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_4","title":"\u8ba4\u8bc1\u65b9\u5f0f","text":"<ul> <li>\u5f00\u53d1\u73af\u5883: \u65e0\u9700\u8ba4\u8bc1</li> <li>\u751f\u4ea7\u73af\u5883: Bearer Token \u6216 API Key</li> </ul>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_5","title":"\u54cd\u5e94\u683c\u5f0f","text":"<ul> <li>Content-Type: <code>application/json</code></li> <li>\u5b57\u7b26\u7f16\u7801: <code>UTF-8</code></li> </ul>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#api","title":"\ud83d\ude80 \u6838\u5fc3 API","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#1","title":"1. \u5de5\u5177\u8c03\u7528\u63a5\u53e3","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#11","title":"1.1 \u667a\u80fd\u5de5\u5177\u8c03\u7528","text":"<p>\u81ea\u52a8\u670d\u52a1\u53d1\u73b0\uff0c\u6839\u636e\u5de5\u5177\u540d\u79f0\u667a\u80fd\u8def\u7531\u5230\u6700\u4f73\u670d\u52a1\u5b9e\u4f8b</p> <pre><code>POST /mcp/smart/call\nContent-Type: application/json\n\n{\n  \"toolName\": \"getPersonById\",\n  \"arguments\": {\n    \"id\": 1\n  },\n  \"timeout\": 30000,\n  \"metadata\": {\n    \"requestId\": \"req-001\",\n    \"source\": \"web-app\"\n  }\n}\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"result\": \"Person found: John Doe, age 30\",\n    \"executionTime\": 156,\n    \"serviceInstance\": \"mcp-server-v6:8066\"\n  },\n  \"metadata\": {\n    \"requestId\": \"req-001\",\n    \"timestamp\": \"2025-01-12T10:30:00Z\",\n    \"version\": \"v3.0.0\"\n  }\n}\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#12","title":"1.2 \u6307\u5b9a\u670d\u52a1\u8c03\u7528","text":"<p>\u76f4\u63a5\u8c03\u7528\u6307\u5b9a\u670d\u52a1\u7684\u5de5\u5177</p> <pre><code>POST /mcp/bridge/route/{serviceName}\nContent-Type: application/json\n\n{\n  \"id\": \"req-002\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"getAllPersons\",\n    \"arguments\": {}\n  }\n}\n</code></pre> <p>\u8def\u5f84\u53c2\u6570: - <code>serviceName</code>: \u76ee\u6807\u670d\u52a1\u540d\u79f0\uff0c\u5982 <code>mcp-server-v6</code></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"id\": \"req-002\",\n  \"result\": {\n    \"content\": [\n      {\n        \"type\": \"text\",\n        \"text\": \"Found 5 persons: John Doe, Jane Smith, Hans Mueller, Maria Schmidt, Pierre Dubois\"\n      }\n    ]\n  }\n}\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#13","title":"1.3 \u6279\u91cf\u5de5\u5177\u8c03\u7528","text":"<p>\u4e00\u6b21\u8bf7\u6c42\u8c03\u7528\u591a\u4e2a\u5de5\u5177</p> <pre><code>POST /mcp/smart/batch\nContent-Type: application/json\n\n{\n  \"calls\": [\n    {\n      \"toolName\": \"getPersonById\",\n      \"arguments\": {\"id\": 1}\n    },\n    {\n      \"toolName\": \"getPersonById\", \n      \"arguments\": {\"id\": 2}\n    }\n  ],\n  \"parallel\": true,\n  \"timeout\": 45000\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#2","title":"2. \u670d\u52a1\u7ba1\u7406\u63a5\u53e3","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#21","title":"2.1 \u67e5\u8be2\u6ce8\u518c\u670d\u52a1\u5217\u8868","text":"<pre><code>GET /mcp/bridge/services\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"services\": [\n    {\n      \"serviceName\": \"mcp-server-v6\",\n      \"version\": \"1.0.1\",\n      \"instances\": [\n        {\n          \"instanceId\": \"mcp-server-v6-001\",\n          \"ip\": \"192.168.1.100\",\n          \"port\": 8066,\n          \"healthy\": true,\n          \"weight\": 1.0,\n          \"metadata\": {\n            \"zone\": \"zone-a\",\n            \"cluster\": \"default\"\n          }\n        }\n      ],\n      \"tools\": [\n        \"getAllPersons\",\n        \"getPersonById\",\n        \"addPerson\"\n      ],\n      \"capabilities\": {\n        \"tools\": true,\n        \"resources\": true,\n        \"prompts\": false\n      }\n    }\n  ],\n  \"total\": 1\n}\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#22","title":"2.2 \u67e5\u8be2\u7279\u5b9a\u670d\u52a1\u8be6\u60c5","text":"<pre><code>GET /mcp/bridge/services/{serviceName}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#23","title":"2.3 \u67e5\u8be2\u5de5\u5177\u6e05\u5355","text":"<pre><code>GET /mcp/bridge/tools\n</code></pre> <p>\u67e5\u8be2\u53c2\u6570: - <code>serviceName</code>: \u53ef\u9009\uff0c\u8fc7\u6ee4\u7279\u5b9a\u670d\u52a1\u7684\u5de5\u5177 - <code>category</code>: \u53ef\u9009\uff0c\u6309\u7c7b\u522b\u8fc7\u6ee4\u5de5\u5177</p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"tools\": [\n    {\n      \"name\": \"getPersonById\",\n      \"description\": \"Retrieve a specific person by their unique identifier\",\n      \"serviceName\": \"mcp-server-v6\",\n      \"category\": \"data-access\",\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": {\n            \"type\": \"integer\",\n            \"description\": \"Unique person identifier\"\n          }\n        },\n        \"required\": [\"id\"]\n      }\n    }\n  ]\n}\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#3","title":"3. \u5065\u5eb7\u68c0\u67e5\u63a5\u53e3","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#31","title":"3.1 \u7cfb\u7edf\u5065\u5eb7\u72b6\u6001","text":"<pre><code>GET /actuator/health\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"status\": \"UP\",\n  \"components\": {\n    \"nacos\": {\n      \"status\": \"UP\",\n      \"details\": {\n        \"serverAddr\": \"127.0.0.1:8848\",\n        \"namespace\": \"public\"\n      }\n    },\n    \"mcpBridge\": {\n      \"status\": \"UP\", \n      \"details\": {\n        \"activeConnections\": 3,\n        \"registeredServices\": 2,\n        \"healthyServices\": 2\n      }\n    }\n  }\n}\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#32","title":"3.2 \u670d\u52a1\u5b9e\u4f8b\u5065\u5eb7\u68c0\u67e5","text":"<pre><code>GET /mcp/bridge/health/{serviceName}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#33","title":"3.3 \u8fde\u63a5\u6c60\u72b6\u6001","text":"<pre><code>GET /mcp/bridge/connections/status\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#4","title":"4. \u76d1\u63a7\u7edf\u8ba1\u63a5\u53e3","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#41","title":"4.1 \u7cfb\u7edf\u7edf\u8ba1\u4fe1\u606f","text":"<pre><code>GET /mcp/bridge/stats\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"system\": {\n    \"status\": \"RUNNING\",\n    \"version\": \"v3.0.0\",\n    \"uptime\": \"2d 5h 30m\",\n    \"startTime\": \"2025-01-10T08:00:00Z\"\n  },\n  \"requests\": {\n    \"total\": 15642,\n    \"success\": 15234,\n    \"failed\": 408,\n    \"successRate\": 97.39\n  },\n  \"performance\": {\n    \"avgResponseTime\": 245,\n    \"p95ResponseTime\": 456,\n    \"p99ResponseTime\": 892,\n    \"activeRequests\": 12\n  },\n  \"services\": {\n    \"registered\": 3,\n    \"healthy\": 3,\n    \"unhealthy\": 0\n  },\n  \"connections\": {\n    \"active\": 15,\n    \"idle\": 5,\n    \"total\": 20,\n    \"maxPoolSize\": 50\n  }\n}\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#42","title":"4.2 \u5de5\u5177\u8c03\u7528\u7edf\u8ba1","text":"<pre><code>GET /mcp/bridge/metrics/tools\n</code></pre> <p>\u67e5\u8be2\u53c2\u6570: - <code>timeRange</code>: \u65f6\u95f4\u8303\u56f4 (1h, 6h, 24h, 7d) - <code>toolName</code>: \u53ef\u9009\uff0c\u7279\u5b9a\u5de5\u5177\u7edf\u8ba1</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#43","title":"4.3 \u8d1f\u8f7d\u5747\u8861\u7edf\u8ba1","text":"<pre><code>GET /mcp/bridge/metrics/loadbalancing\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#5","title":"5. \u914d\u7f6e\u7ba1\u7406\u63a5\u53e3","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#51","title":"5.1 \u67e5\u770b\u5f53\u524d\u914d\u7f6e","text":"<pre><code>GET /mcp/bridge/config\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#52","title":"5.2 \u52a8\u6001\u66f4\u65b0\u914d\u7f6e","text":"<pre><code>PUT /mcp/bridge/config\nContent-Type: application/json\n\n{\n  \"loadBalancer\": {\n    \"algorithm\": \"WEIGHTED_ROUND_ROBIN\",\n    \"healthCheckInterval\": 30\n  },\n  \"connectionPool\": {\n    \"maxConnections\": 50,\n    \"connectionTimeout\": 30000\n  }\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_6","title":"\ud83d\udd27 \u7ba1\u7406\u63a5\u53e3","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#1_1","title":"1. \u670d\u52a1\u5b9e\u4f8b\u7ba1\u7406","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#11_1","title":"1.1 \u624b\u52a8\u4e0b\u7ebf\u670d\u52a1\u5b9e\u4f8b","text":"<pre><code>POST /mcp/bridge/admin/services/{serviceName}/instances/{instanceId}/offline\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#12_1","title":"1.2 \u624b\u52a8\u4e0a\u7ebf\u670d\u52a1\u5b9e\u4f8b","text":"<pre><code>POST /mcp/bridge/admin/services/{serviceName}/instances/{instanceId}/online\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#13_1","title":"1.3 \u8c03\u6574\u5b9e\u4f8b\u6743\u91cd","text":"<pre><code>PUT /mcp/bridge/admin/services/{serviceName}/instances/{instanceId}/weight\nContent-Type: application/json\n\n{\n  \"weight\": 2.0\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#2_1","title":"2. \u8fde\u63a5\u7ba1\u7406","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#21_1","title":"2.1 \u91cd\u7f6e\u8fde\u63a5\u6c60","text":"<pre><code>POST /mcp/bridge/admin/connections/reset\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#22_1","title":"2.2 \u6e05\u7406\u5931\u6548\u8fde\u63a5","text":"<pre><code>POST /mcp/bridge/admin/connections/cleanup\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_7","title":"\u26a0\ufe0f \u9519\u8bef\u5904\u7406","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_8","title":"\u6807\u51c6\u9519\u8bef\u54cd\u5e94\u683c\u5f0f","text":"<pre><code>{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"SERVICE_UNAVAILABLE\",\n    \"message\": \"No healthy instances available for service: mcp-server-v6\",\n    \"details\": {\n      \"serviceName\": \"mcp-server-v6\",\n      \"totalInstances\": 2,\n      \"healthyInstances\": 0\n    }\n  },\n  \"metadata\": {\n    \"requestId\": \"req-003\",\n    \"timestamp\": \"2025-01-12T10:35:00Z\"\n  }\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_9","title":"\u9519\u8bef\u4ee3\u7801\u8bf4\u660e","text":"\u9519\u8bef\u4ee3\u7801 HTTP\u72b6\u6001 \u8bf4\u660e <code>INVALID_REQUEST</code> 400 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef <code>UNAUTHORIZED</code> 401 \u8ba4\u8bc1\u5931\u8d25 <code>FORBIDDEN</code> 403 \u6743\u9650\u4e0d\u8db3 <code>TOOL_NOT_FOUND</code> 404 \u5de5\u5177\u4e0d\u5b58\u5728 <code>SERVICE_NOT_FOUND</code> 404 \u670d\u52a1\u4e0d\u5b58\u5728 <code>REQUEST_TIMEOUT</code> 408 \u8bf7\u6c42\u8d85\u65f6 <code>SERVICE_UNAVAILABLE</code> 503 \u670d\u52a1\u4e0d\u53ef\u7528 <code>INTERNAL_ERROR</code> 500 \u5185\u90e8\u9519\u8bef"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_10","title":"\ud83d\udd12 \u5b89\u5168\u8ba4\u8bc1","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#api-key","title":"API Key \u8ba4\u8bc1","text":"<pre><code>GET /mcp/bridge/services\nAuthorization: Bearer your-api-key-here\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_11","title":"\u6743\u9650\u8303\u56f4","text":"<ul> <li>READ: \u67e5\u8be2\u63a5\u53e3\u6743\u9650</li> <li>WRITE: \u8c03\u7528\u5de5\u5177\u6743\u9650  </li> <li>ADMIN: \u7ba1\u7406\u63a5\u53e3\u6743\u9650</li> </ul>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_12","title":"\ud83d\udcca \u901f\u7387\u9650\u5236","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_13","title":"\u9650\u5236\u89c4\u5219","text":"<ul> <li>\u667a\u80fd\u8c03\u7528: 100 \u8bf7\u6c42/\u5206\u949f</li> <li>\u76f4\u63a5\u8c03\u7528: 200 \u8bf7\u6c42/\u5206\u949f</li> <li>\u6279\u91cf\u8c03\u7528: 10 \u8bf7\u6c42/\u5206\u949f</li> <li>\u67e5\u8be2\u63a5\u53e3: 1000 \u8bf7\u6c42/\u5206\u949f</li> </ul>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_14","title":"\u54cd\u5e94\u5934","text":"<pre><code>X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1641968400\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_15","title":"\ud83e\uddea \u6d4b\u8bd5\u793a\u4f8b","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#curl","title":"cURL \u793a\u4f8b","text":"<pre><code># \u667a\u80fd\u5de5\u5177\u8c03\u7528\ncurl -X POST http://localhost:8080/mcp/smart/call \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"toolName\": \"getPersonById\",\n    \"arguments\": {\"id\": 1}\n  }'\n\n# \u67e5\u8be2\u670d\u52a1\u5217\u8868\ncurl http://localhost:8080/mcp/bridge/services\n\n# \u67e5\u770b\u7cfb\u7edf\u7edf\u8ba1\ncurl http://localhost:8080/mcp/bridge/stats\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#postman-collection","title":"Postman Collection","text":"<pre><code>{\n  \"info\": {\n    \"name\": \"MCP Bridge v3 API\",\n    \"schema\": \"https://schema.getpostman.com/json/collection/v2.1.0/collection.json\"\n  },\n  \"item\": [\n    {\n      \"name\": \"Smart Tool Call\",\n      \"request\": {\n        \"method\": \"POST\",\n        \"header\": [\n          {\n            \"key\": \"Content-Type\",\n            \"value\": \"application/json\"\n          }\n        ],\n        \"body\": {\n          \"mode\": \"raw\",\n          \"raw\": \"{\\n  \\\"toolName\\\": \\\"getPersonById\\\",\\n  \\\"arguments\\\": {\\n    \\\"id\\\": 1\\n  }\\n}\"\n        },\n        \"url\": {\n          \"raw\": \"{{baseUrl}}/mcp/smart/call\",\n          \"host\": [\"{{baseUrl}}\"],\n          \"path\": [\"mcp\", \"smart\", \"call\"]\n        }\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#sdk","title":"\ud83d\udcda SDK \u652f\u6301","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#java-sdk","title":"Java SDK \u793a\u4f8b","text":"<pre><code>McpBridgeClient client = McpBridgeClient.builder()\n    .baseUrl(\"http://localhost:8080\")\n    .apiKey(\"your-api-key\")\n    .timeout(Duration.ofSeconds(30))\n    .build();\n\n// \u667a\u80fd\u5de5\u5177\u8c03\u7528\nToolCallResponse response = client.callTool(\"getPersonById\", \n    Map.of(\"id\", 1));\n\n// \u67e5\u8be2\u670d\u52a1\u5217\u8868\nList&lt;ServiceInfo&gt; services = client.getServices();\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#python-sdk","title":"Python SDK \u793a\u4f8b","text":"<pre><code>from mcp_bridge_client import McpBridgeClient\n\nclient = McpBridgeClient(\n    base_url=\"http://localhost:8080\",\n    api_key=\"your-api-key\"\n)\n\n# \u667a\u80fd\u5de5\u5177\u8c03\u7528\nresponse = client.call_tool(\"getPersonById\", {\"id\": 1})\n\n# \u67e5\u8be2\u670d\u52a1\u5217\u8868\nservices = client.get_services()\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#_16","title":"\ud83d\udcdd \u66f4\u65b0\u65e5\u5fd7","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#v300-2025-01-12","title":"v3.0.0 (2025-01-12)","text":"<ul> <li>\u2705 \u65b0\u589e\u667a\u80fd\u5de5\u5177\u8c03\u7528\u63a5\u53e3</li> <li>\u2705 \u652f\u6301\u6279\u91cf\u5de5\u5177\u8c03\u7528</li> <li>\u2705 \u589e\u5f3a\u670d\u52a1\u7ba1\u7406\u529f\u80fd</li> <li>\u2705 \u5b8c\u5584\u76d1\u63a7\u7edf\u8ba1\u63a5\u53e3</li> </ul>"},{"location":"archived/docs-250812/MCP_BRIDGE_API_REFERENCE/#v210-2024-12-15","title":"v2.1.0 (2024-12-15)","text":"<ul> <li>\u2705 \u6dfb\u52a0\u8fde\u63a5\u6c60\u7ba1\u7406</li> <li>\u2705 \u652f\u6301\u52a8\u6001\u914d\u7f6e\u66f4\u65b0</li> <li>\u2705 \u589e\u5f3a\u9519\u8bef\u5904\u7406\u673a\u5236</li> </ul> <p>\ud83d\udca1 \u63d0\u793a: \u6b64 API \u6587\u6863\u4f1a\u968f\u7740\u7cfb\u7edf\u7248\u672c\u66f4\u65b0\u800c\u6301\u7eed\u5b8c\u5584\uff0c\u5efa\u8bae\u5b9a\u671f\u67e5\u770b\u6700\u65b0\u7248\u672c\u3002</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/","title":"MCP Bridge v3 \u914d\u7f6e\u53c2\u8003\u624b\u518c","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_1","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u624b\u518c\u8be6\u7ec6\u8bf4\u660e\u4e86 MCP Bridge v3 \u7684\u6240\u6709\u914d\u7f6e\u9009\u9879\uff0c\u5305\u62ec\u6838\u5fc3\u914d\u7f6e\u3001Nacos \u96c6\u6210\u914d\u7f6e\u3001\u6027\u80fd\u8c03\u4f18\u914d\u7f6e\u7b49\u3002</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_2","title":"\ud83c\udfd7\ufe0f \u914d\u7f6e\u6587\u4ef6\u7ed3\u6784","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#applicationyml","title":"\u4e3b\u914d\u7f6e\u6587\u4ef6 (application.yml)","text":"<pre><code># ==========================================\n# MCP Bridge v3 \u5b8c\u6574\u914d\u7f6e\u793a\u4f8b\n# ==========================================\n\n# \u5e94\u7528\u57fa\u7840\u914d\u7f6e\nspring:\n  application:\n    name: mcp-bridge-v3\n  profiles:\n    active: ${SPRING_PROFILES_ACTIVE:dev}\n\n  # AI \u6846\u67b6\u914d\u7f6e\n  ai:\n    alibaba:\n      mcp:\n        # Nacos \u8fde\u63a5\u914d\u7f6e\n        nacos:\n          server-addr: ${NACOS_SERVER_ADDR:127.0.0.1:8848}\n          namespace: ${NACOS_NAMESPACE:public}\n          username: ${NACOS_USERNAME:nacos}\n          password: ${NACOS_PASSWORD:nacos}\n          access-key: ${NACOS_ACCESS_KEY:}\n          secret-key: ${NACOS_SECRET_KEY:}\n          endpoint: ${NACOS_ENDPOINT:}\n          ip: ${SERVICE_IP:}\n\n          # \u670d\u52a1\u6ce8\u518c\u914d\u7f6e\n          registry:\n            enabled: true\n            service-group: mcp-bridge\n            service-name: ${spring.application.name}\n            service-register: true\n            service-ephemeral: true\n\n        # Bridge \u6838\u5fc3\u914d\u7f6e\n        bridge:\n          # \u8def\u7531\u914d\u7f6e\n          routing:\n            strategy: SMART_ROUTING  # DIRECT, SMART_ROUTING, LOAD_BALANCED\n            timeout: 30s\n            retry:\n              enabled: true\n              max-attempts: 3\n              backoff-delay: 1s\n\n          # \u8d1f\u8f7d\u5747\u8861\u914d\u7f6e\n          load-balancer:\n            algorithm: WEIGHTED_ROUND_ROBIN  # ROUND_ROBIN, RANDOM, LEAST_CONNECTIONS\n            health-check:\n              enabled: true\n              interval: 30s\n              timeout: 5s\n              failure-threshold: 3\n              recovery-threshold: 2\n\n          # \u8fde\u63a5\u6c60\u914d\u7f6e\n          connection-pool:\n            max-connections: 50\n            min-idle-connections: 5\n            connection-timeout: 30s\n            idle-timeout: 300s\n            max-lifetime: 1800s\n            leak-detection-threshold: 60s\n\n          # \u7f13\u5b58\u914d\u7f6e\n          cache:\n            enabled: true\n            tool-results:\n              enabled: true\n              ttl: 300s\n              max-size: 1000\n            service-discovery:\n              enabled: true\n              ttl: 60s\n              max-size: 100\n\n# \u670d\u52a1\u5668\u914d\u7f6e\nserver:\n  port: ${SERVER_PORT:8080}\n  address: ${SERVER_ADDRESS:0.0.0.0}\n\n  # Tomcat \u914d\u7f6e (\u5982\u679c\u4f7f\u7528 Tomcat)\n  tomcat:\n    threads:\n      max: 200\n      min-spare: 10\n    connection-timeout: 20s\n    max-connections: 8192\n\n  # Netty \u914d\u7f6e (\u5982\u679c\u4f7f\u7528 WebFlux)\n  netty:\n    connection-timeout: 20s\n    h2c-max-content-length: 0\n    initial-buffer-size: 128\n    max-chunk-size: 8192\n    max-initial-line-length: 4096\n    validate-headers: true\n\n# \u7ba1\u7406\u7aef\u70b9\u914d\u7f6e\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: health,info,metrics,prometheus,mcp-bridge\n      base-path: /actuator\n      cors:\n        allowed-origins: \"*\"\n        allowed-methods: GET,POST\n\n  endpoint:\n    health:\n      show-details: when-authorized\n      show-components: always\n    mcp-bridge:\n      enabled: true\n\n  metrics:\n    export:\n      prometheus:\n        enabled: true\n        step: 30s\n        descriptions: true\n    tags:\n      application: ${spring.application.name}\n      environment: ${spring.profiles.active}\n\n  health:\n    nacos:\n      enabled: true\n    mcp-bridge:\n      enabled: true\n\n# \u65e5\u5fd7\u914d\u7f6e\nlogging:\n  level:\n    root: INFO\n    com.nacos.mcp.bridge: DEBUG\n    com.alibaba.nacos: WARN\n    io.modelcontextprotocol: DEBUG\n    org.springframework.ai: DEBUG\n  pattern:\n    console: \"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n\"\n    file: \"%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n\"\n  file:\n    name: logs/mcp-bridge-v3.log\n    max-size: 100MB\n    max-history: 30\n    total-size-cap: 1GB\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_3","title":"\ud83d\udd27 \u914d\u7f6e\u8be6\u89e3","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#1-nacos-springaialibabamcpnacos","title":"1. Nacos \u914d\u7f6e (<code>spring.ai.alibaba.mcp.nacos</code>)","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#11","title":"1.1 \u57fa\u7840\u8fde\u63a5\u914d\u7f6e","text":"\u914d\u7f6e\u9879 \u7c7b\u578b \u9ed8\u8ba4\u503c \u8bf4\u660e <code>server-addr</code> String <code>127.0.0.1:8848</code> Nacos \u670d\u52a1\u5668\u5730\u5740 <code>namespace</code> String <code>public</code> \u547d\u540d\u7a7a\u95f4 ID <code>username</code> String - \u8ba4\u8bc1\u7528\u6237\u540d <code>password</code> String - \u8ba4\u8bc1\u5bc6\u7801 <code>access-key</code> String - \u963f\u91cc\u4e91 AccessKey <code>secret-key</code> String - \u963f\u91cc\u4e91 SecretKey <code>endpoint</code> String - \u963f\u91cc\u4e91 Endpoint <code>ip</code> String \u81ea\u52a8\u68c0\u6d4b \u670d\u52a1\u6ce8\u518c IP <p>\u793a\u4f8b\u914d\u7f6e: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          # \u57fa\u7840\u914d\u7f6e\n          server-addr: \"nacos-cluster:8848\"\n          namespace: \"mcp-production\"\n\n          # \u8ba4\u8bc1\u914d\u7f6e (\u53ef\u9009)\n          username: \"mcp-user\"\n          password: \"mcp-password\"\n\n          # \u963f\u91cc\u4e91 MSE \u914d\u7f6e (\u53ef\u9009)\n          access-key: \"${ALIBABA_ACCESS_KEY}\"\n          secret-key: \"${ALIBABA_SECRET_KEY}\"\n          endpoint: \"mse.aliyuncs.com\"\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#12","title":"1.2 \u670d\u52a1\u6ce8\u518c\u914d\u7f6e","text":"\u914d\u7f6e\u9879 \u7c7b\u578b \u9ed8\u8ba4\u503c \u8bf4\u660e <code>registry.enabled</code> Boolean <code>true</code> \u662f\u5426\u542f\u7528\u670d\u52a1\u6ce8\u518c <code>registry.service-group</code> String <code>DEFAULT_GROUP</code> \u670d\u52a1\u5206\u7ec4 <code>registry.service-name</code> String <code>${spring.application.name}</code> \u670d\u52a1\u540d\u79f0 <code>registry.service-register</code> Boolean <code>true</code> \u662f\u5426\u6ce8\u518c\u670d\u52a1\u5b9e\u4f8b <code>registry.service-ephemeral</code> Boolean <code>true</code> \u662f\u5426\u4e3a\u4e34\u65f6\u5b9e\u4f8b"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#2-bridge-springaialibabamcpbridge","title":"2. Bridge \u6838\u5fc3\u914d\u7f6e (<code>spring.ai.alibaba.mcp.bridge</code>)","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#21","title":"2.1 \u8def\u7531\u7b56\u7565\u914d\u7f6e","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          routing:\n            # \u8def\u7531\u7b56\u7565\n            strategy: SMART_ROUTING\n\n            # \u8bf7\u6c42\u8d85\u65f6\n            timeout: 30s\n\n            # \u91cd\u8bd5\u914d\u7f6e\n            retry:\n              enabled: true\n              max-attempts: 3\n              backoff-delay: 1s\n              backoff-multiplier: 2.0\n              max-backoff-delay: 10s\n              jitter: 0.1\n\n            # \u5e76\u53d1\u63a7\u5236\n            circuit-breaker:\n              enabled: true\n              failure-rate-threshold: 50\n              slow-call-rate-threshold: 50\n              slow-call-duration-threshold: 10s\n              minimum-number-of-calls: 10\n              sliding-window-size: 20\n</code></pre> <p>\u8def\u7531\u7b56\u7565\u8bf4\u660e: - <code>DIRECT</code>: \u76f4\u63a5\u8def\u7531\uff0c\u4e0d\u7ecf\u8fc7\u8d1f\u8f7d\u5747\u8861 - <code>SMART_ROUTING</code>: \u667a\u80fd\u8def\u7531\uff0c\u6839\u636e\u5de5\u5177\u540d\u79f0\u81ea\u52a8\u53d1\u73b0\u670d\u52a1 - <code>LOAD_BALANCED</code>: \u8d1f\u8f7d\u5747\u8861\u8def\u7531\uff0c\u5728\u591a\u4e2a\u5b9e\u4f8b\u95f4\u5206\u914d\u8bf7\u6c42</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#22","title":"2.2 \u8d1f\u8f7d\u5747\u8861\u914d\u7f6e","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          load-balancer:\n            # \u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\n            algorithm: WEIGHTED_ROUND_ROBIN\n\n            # \u6743\u91cd\u914d\u7f6e\n            weights:\n              mcp-server-v6: 3\n              mcp-server-v3: 1\n\n            # \u5065\u5eb7\u68c0\u67e5\n            health-check:\n              enabled: true\n              interval: 30s\n              timeout: 5s\n              failure-threshold: 3\n              recovery-threshold: 2\n\n              # \u81ea\u5b9a\u4e49\u5065\u5eb7\u68c0\u67e5\u7aef\u70b9\n              endpoints:\n                - path: \"/actuator/health\"\n                  method: GET\n                  expected-status: 200\n</code></pre> <p>\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5: - <code>ROUND_ROBIN</code>: \u8f6e\u8be2 - <code>WEIGHTED_ROUND_ROBIN</code>: \u52a0\u6743\u8f6e\u8be2 - <code>RANDOM</code>: \u968f\u673a - <code>LEAST_CONNECTIONS</code>: \u6700\u5c11\u8fde\u63a5</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#23","title":"2.3 \u8fde\u63a5\u6c60\u914d\u7f6e","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          connection-pool:\n            # \u8fde\u63a5\u6570\u914d\u7f6e\n            max-connections: 50\n            min-idle-connections: 5\n            max-connections-per-route: 10\n\n            # \u8d85\u65f6\u914d\u7f6e\n            connection-timeout: 30s\n            socket-timeout: 60s\n            connection-request-timeout: 10s\n\n            # \u751f\u547d\u5468\u671f\u914d\u7f6e\n            idle-timeout: 300s\n            max-lifetime: 1800s\n            keep-alive-duration: 30s\n\n            # \u76d1\u63a7\u914d\u7f6e\n            leak-detection-threshold: 60s\n            validation-query-timeout: 5s\n            test-on-borrow: true\n            test-on-return: false\n            test-while-idle: true\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#24","title":"2.4 \u7f13\u5b58\u914d\u7f6e","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          cache:\n            enabled: true\n\n            # \u5de5\u5177\u7ed3\u679c\u7f13\u5b58\n            tool-results:\n              enabled: true\n              ttl: 300s\n              max-size: 1000\n              key-prefix: \"tool_result:\"\n\n            # \u670d\u52a1\u53d1\u73b0\u7f13\u5b58\n            service-discovery:\n              enabled: true\n              ttl: 60s\n              max-size: 100\n              key-prefix: \"service:\"\n\n            # \u5de5\u5177\u5b9a\u4e49\u7f13\u5b58\n            tool-definitions:\n              enabled: true\n              ttl: 3600s\n              max-size: 500\n\n            # \u7f13\u5b58\u63d0\u4f9b\u8005\n            provider: CAFFEINE  # CAFFEINE, REDIS, HAZELCAST\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_4","title":"\ud83c\udf0d \u73af\u5883\u914d\u7f6e","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#application-devyml","title":"\u5f00\u53d1\u73af\u5883 (application-dev.yml)","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          server-addr: 127.0.0.1:8848\n          namespace: dev\n        bridge:\n          routing:\n            timeout: 10s\n          connection-pool:\n            max-connections: 10\n          cache:\n            tool-results:\n              ttl: 60s\n\nlogging:\n  level:\n    com.nacos.mcp.bridge: DEBUG\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: \"*\"\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#application-testyml","title":"\u6d4b\u8bd5\u73af\u5883 (application-test.yml)","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          server-addr: nacos-test.internal:8848\n          namespace: test\n        bridge:\n          routing:\n            timeout: 20s\n          connection-pool:\n            max-connections: 25\n          load-balancer:\n            health-check:\n              interval: 15s\n\nlogging:\n  level:\n    root: WARN\n    com.nacos.mcp.bridge: INFO\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#application-prodyml","title":"\u751f\u4ea7\u73af\u5883 (application-prod.yml)","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          server-addr: ${NACOS_CLUSTER_ADDR}\n          namespace: production\n          username: ${NACOS_USERNAME}\n          password: ${NACOS_PASSWORD}\n        bridge:\n          routing:\n            timeout: 30s\n            retry:\n              max-attempts: 5\n          connection-pool:\n            max-connections: 100\n            min-idle-connections: 10\n          load-balancer:\n            health-check:\n              failure-threshold: 5\n          cache:\n            enabled: true\n            provider: REDIS\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: health,info,metrics,prometheus\n\nsecurity:\n  api:\n    enabled: true\n    key: ${API_KEY}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_5","title":"\ud83d\ude80 \u6027\u80fd\u8c03\u4f18\u914d\u7f6e","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#1-jvm","title":"1. JVM \u53c2\u6570\u4f18\u5316","text":"<pre><code># \u751f\u4ea7\u73af\u5883 JVM \u53c2\u6570\nJAVA_OPTS=\"-Xms2g -Xmx4g \\\n           -XX:+UseG1GC \\\n           -XX:MaxGCPauseMillis=200 \\\n           -XX:+UseStringDeduplication \\\n           -XX:+OptimizeStringConcat \\\n           -Djava.awt.headless=true \\\n           -Dfile.encoding=UTF-8 \\\n           -Duser.timezone=Asia/Shanghai\"\n\n# \u5f00\u53d1\u73af\u5883 JVM \u53c2\u6570\nJAVA_OPTS=\"-Xms512m -Xmx1g \\\n           -XX:+UseG1GC \\\n           -Dspring.profiles.active=dev\"\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#2","title":"2. \u9ad8\u5e76\u53d1\u914d\u7f6e","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          # \u9ad8\u5e76\u53d1\u8def\u7531\u914d\u7f6e\n          routing:\n            timeout: 15s\n            parallel-processing: true\n            max-concurrent-requests: 1000\n\n          # \u9ad8\u6027\u80fd\u8fde\u63a5\u6c60\n          connection-pool:\n            max-connections: 200\n            min-idle-connections: 20\n            max-connections-per-route: 50\n            connection-timeout: 10s\n            socket-timeout: 30s\n\n          # \u7f13\u5b58\u4f18\u5316\n          cache:\n            provider: REDIS\n            tool-results:\n              ttl: 600s\n              max-size: 10000\n\n# \u670d\u52a1\u5668\u4f18\u5316\nserver:\n  tomcat:\n    threads:\n      max: 500\n      min-spare: 50\n    max-connections: 20000\n    accept-count: 1000\n    connection-timeout: 10s\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#3","title":"3. \u5185\u5b58\u4f18\u5316\u914d\u7f6e","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          # \u5185\u5b58\u654f\u611f\u914d\u7f6e\n          cache:\n            tool-results:\n              max-size: 5000\n              eviction-policy: LRU\n            service-discovery:\n              max-size: 200\n\n          connection-pool:\n            # \u51cf\u5c11\u8fde\u63a5\u6570\u4ee5\u8282\u7701\u5185\u5b58\n            max-connections: 50\n            idle-timeout: 180s\n\n          # \u6279\u5904\u7406\u4f18\u5316\n          batch-processing:\n            enabled: true\n            batch-size: 100\n            flush-interval: 1s\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_6","title":"\ud83d\udd12 \u5b89\u5168\u914d\u7f6e","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#1-api","title":"1. API \u8ba4\u8bc1\u914d\u7f6e","text":"<pre><code>spring:\n  security:\n    api:\n      enabled: true\n      # API Key \u8ba4\u8bc1\n      keys:\n        - key: \"api-key-001\"\n          name: \"web-app\"\n          permissions: [\"READ\", \"WRITE\"]\n        - key: \"api-key-002\"\n          name: \"admin-tool\"\n          permissions: [\"READ\", \"WRITE\", \"ADMIN\"]\n\n      # JWT \u8ba4\u8bc1\n      jwt:\n        enabled: true\n        secret: \"${JWT_SECRET}\"\n        expiration: 3600s\n\n      # IP \u767d\u540d\u5355\n      ip-whitelist:\n        enabled: true\n        addresses:\n          - \"192.168.1.0/24\"\n          - \"10.0.0.0/8\"\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#2-tlsssl","title":"2. TLS/SSL \u914d\u7f6e","text":"<pre><code>server:\n  ssl:\n    enabled: true\n    key-store: classpath:keystore.p12\n    key-store-password: \"${KEYSTORE_PASSWORD}\"\n    key-store-type: PKCS12\n    key-alias: mcp-bridge\n\n  # \u5f3a\u5236 HTTPS\n  require-ssl: true\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_7","title":"\ud83d\udcca \u76d1\u63a7\u914d\u7f6e","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#1-metrics","title":"1. Metrics \u914d\u7f6e","text":"<pre><code>management:\n  metrics:\n    tags:\n      application: mcp-bridge-v3\n      environment: ${spring.profiles.active}\n      version: ${project.version}\n\n    export:\n      # Prometheus \u914d\u7f6e\n      prometheus:\n        enabled: true\n        step: 30s\n        descriptions: true\n\n      # InfluxDB \u914d\u7f6e (\u53ef\u9009)\n      influx:\n        enabled: false\n        uri: http://localhost:8086\n        db: mcp-bridge\n\n    # \u81ea\u5b9a\u4e49 metrics\n    enable:\n      jvm: true\n      system: true\n      web: true\n      mcp-bridge: true\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#2_1","title":"2. \u5065\u5eb7\u68c0\u67e5\u914d\u7f6e","text":"<pre><code>management:\n  health:\n    # \u81ea\u5b9a\u4e49\u5065\u5eb7\u6307\u793a\u5668\n    mcp-bridge:\n      enabled: true\n\n    nacos:\n      enabled: true\n\n    # \u5065\u5eb7\u68c0\u67e5\u8be6\u60c5\n    show-details: when-authorized\n    show-components: always\n\n    # \u5065\u5eb7\u68c0\u67e5\u7ec4\n    group:\n      readiness:\n        include: nacos,mcp-bridge\n        show-details: always\n      liveness:\n        include: ping\n        show-details: never\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_8","title":"\ud83d\udc1b \u8c03\u8bd5\u914d\u7f6e","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_9","title":"\u5f00\u53d1\u8c03\u8bd5\u914d\u7f6e","text":"<pre><code>logging:\n  level:\n    # Bridge \u76f8\u5173\u65e5\u5fd7\n    com.nacos.mcp.bridge: DEBUG\n    com.nacos.mcp.bridge.service: TRACE\n\n    # Nacos \u76f8\u5173\u65e5\u5fd7\n    com.alibaba.nacos: INFO\n\n    # Spring AI \u76f8\u5173\u65e5\u5fd7\n    org.springframework.ai: DEBUG\n\n    # MCP \u534f\u8bae\u65e5\u5fd7\n    io.modelcontextprotocol: DEBUG\n\n    # HTTP \u8bf7\u6c42\u65e5\u5fd7\n    org.springframework.web: DEBUG\n    reactor.netty.http: DEBUG\n\n  # \u8f93\u51fa\u914d\u7f6e\n  pattern:\n    console: \"%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(%5p) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n%wEx\"\n\ndebug: true\n\nspring:\n  output:\n    ansi:\n      enabled: always\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_10","title":"\ud83d\udccb \u914d\u7f6e\u9a8c\u8bc1","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_11","title":"\u914d\u7f6e\u9a8c\u8bc1\u89c4\u5219","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          # \u914d\u7f6e\u9a8c\u8bc1\n          validation:\n            enabled: true\n\n            # \u5fc5\u9700\u914d\u7f6e\u68c0\u67e5\n            required-properties:\n              - \"spring.ai.alibaba.mcp.nacos.server-addr\"\n              - \"spring.application.name\"\n\n            # \u914d\u7f6e\u8303\u56f4\u9a8c\u8bc1\n            constraints:\n              connection-pool.max-connections:\n                min: 1\n                max: 1000\n              routing.timeout:\n                min: 1s\n                max: 300s\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_12","title":"\u914d\u7f6e\u70ed\u66f4\u65b0","text":"<pre><code>spring:\n  cloud:\n    nacos:\n      config:\n        enabled: true\n        server-addr: ${spring.ai.alibaba.mcp.nacos.server-addr}\n        file-extension: yaml\n        namespace: ${spring.ai.alibaba.mcp.nacos.namespace}\n\n        # \u914d\u7f6e\u81ea\u52a8\u5237\u65b0\n        refresh-enabled: true\n\n        # \u914d\u7f6e\u76d1\u542c\n        extension-configs:\n          - data-id: mcp-bridge-dynamic.yaml\n            group: ${spring.ai.alibaba.mcp.nacos.registry.service-group}\n            refresh: true\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_13","title":"\ud83d\udd04 \u914d\u7f6e\u8fc1\u79fb\u6307\u5357","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#v2x-v3x","title":"\u4ece v2.x \u8fc1\u79fb\u5230 v3.x","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#1","title":"1. \u914d\u7f6e\u7ed3\u6784\u53d8\u66f4","text":"<p>v2.x \u914d\u7f6e: <pre><code>mcp:\n  router:\n    nacos:\n      server-addr: 127.0.0.1:8848\n</code></pre></p> <p>v3.x \u914d\u7f6e: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          server-addr: 127.0.0.1:8848\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#2_2","title":"2. \u8fc1\u79fb\u811a\u672c","text":"<pre><code>#!/bin/bash\n# \u914d\u7f6e\u8fc1\u79fb\u811a\u672c\n\n# \u5907\u4efd\u65e7\u914d\u7f6e\ncp application.yml application-v2-backup.yml\n\n# \u8f6c\u6362\u914d\u7f6e\u683c\u5f0f\nsed -i 's/mcp.router/spring.ai.alibaba.mcp.bridge/g' application.yml\nsed -i 's/mcp.nacos/spring.ai.alibaba.mcp.nacos/g' application.yml\n\necho \"\u914d\u7f6e\u8fc1\u79fb\u5b8c\u6210\uff0c\u8bf7\u68c0\u67e5 application.yml\"\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_14","title":"\ud83d\udcdd \u914d\u7f6e\u6a21\u677f","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_15","title":"\u6700\u5c0f\u914d\u7f6e\u6a21\u677f","text":"<pre><code>spring:\n  application:\n    name: mcp-bridge-v3\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          server-addr: 127.0.0.1:8848\n\nserver:\n  port: 8080\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_CONFIG_MANUAL/#_16","title":"\u751f\u4ea7\u914d\u7f6e\u6a21\u677f","text":"<pre><code>spring:\n  application:\n    name: mcp-bridge-v3\n  profiles:\n    active: prod\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          server-addr: ${NACOS_CLUSTER}\n          namespace: production\n          username: ${NACOS_USER}\n          password: ${NACOS_PASS}\n        bridge:\n          routing:\n            timeout: 30s\n            retry:\n              enabled: true\n              max-attempts: 3\n          connection-pool:\n            max-connections: 100\n          load-balancer:\n            algorithm: WEIGHTED_ROUND_ROBIN\n          cache:\n            enabled: true\n\nserver:\n  port: ${SERVER_PORT:8080}\n\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: health,metrics,prometheus\n\nlogging:\n  level:\n    com.nacos.mcp.bridge: INFO\n  file:\n    name: logs/mcp-bridge.log\n</code></pre> <p>\ud83d\udca1 \u914d\u7f6e\u5efa\u8bae:  1. \u5f00\u53d1\u73af\u5883\u4f18\u5148\u8003\u8651\u8c03\u8bd5\u4fbf\u5229\u6027 2. \u6d4b\u8bd5\u73af\u5883\u63a5\u8fd1\u751f\u4ea7\u914d\u7f6e 3. \u751f\u4ea7\u73af\u5883\u91cd\u70b9\u5173\u6ce8\u6027\u80fd\u548c\u7a33\u5b9a\u6027 4. \u5b9a\u671f\u68c0\u67e5\u548c\u4f18\u5316\u914d\u7f6e\u53c2\u6570</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/","title":"MCP Bridge v3 \u6027\u80fd\u8c03\u4f18\u6307\u5357","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_1","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u6307\u5357\u8be6\u7ec6\u8bf4\u660e\u4e86 MCP Bridge v3 \u7684\u6027\u80fd\u8c03\u4f18\u7b56\u7565\uff0c\u5305\u62ec\u7cfb\u7edf\u7ea7\u4f18\u5316\u3001\u5e94\u7528\u7ea7\u8c03\u4f18\u3001\u76d1\u63a7\u5206\u6790\u7b49\uff0c\u5e2e\u52a9\u5b9e\u73b0\u6700\u4f73\u6027\u80fd\u8868\u73b0\u3002</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_2","title":"\ud83c\udfaf \u6027\u80fd\u76ee\u6807\u8bbe\u5b9a","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#kpi","title":"\u5173\u952e\u6027\u80fd\u6307\u6807 (KPI)","text":"\u6307\u6807 \u76ee\u6807\u503c \u53ef\u63a5\u53d7\u503c \u8bf4\u660e \u54cd\u5e94\u65f6\u95f4 P95 &lt; 200ms P95 &lt; 500ms 95% \u8bf7\u6c42\u54cd\u5e94\u65f6\u95f4 \u541e\u5410\u91cf &gt; 1000 QPS &gt; 500 QPS \u6bcf\u79d2\u5904\u7406\u8bf7\u6c42\u6570 \u53ef\u7528\u6027 99.9% 99.5% \u7cfb\u7edf\u53ef\u7528\u6027 \u9519\u8bef\u7387 &lt; 0.1% &lt; 1% \u8bf7\u6c42\u9519\u8bef\u6bd4\u4f8b \u5e76\u53d1\u8fde\u63a5 &gt; 500 &gt; 200 \u540c\u65f6\u5904\u7406\u8fde\u63a5\u6570"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_3","title":"\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5","text":"<pre><code># \u4f7f\u7528 Apache Bench \u8fdb\u884c\u57fa\u51c6\u6d4b\u8bd5\nab -n 10000 -c 100 -H \"Content-Type: application/json\" \\\n   -p test-payload.json \\\n   http://localhost:8080/mcp/smart/call\n\n# \u4f7f\u7528 wrk \u8fdb\u884c\u538b\u529b\u6d4b\u8bd5\nwrk -t12 -c400 -d30s \\\n    --script=mcp-bridge-test.lua \\\n    http://localhost:8080/mcp/smart/call\n\n# \u6d4b\u8bd5\u8d1f\u8f7d\u6587\u4ef6 (test-payload.json)\n{\n  \"toolName\": \"getPersonById\",\n  \"arguments\": {\"id\": 1}\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_4","title":"\ud83d\ude80 \u7cfb\u7edf\u7ea7\u6027\u80fd\u4f18\u5316","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#1-jvm","title":"1. JVM \u53c2\u6570\u8c03\u4f18","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#jvm","title":"\u751f\u4ea7\u73af\u5883 JVM \u914d\u7f6e","text":"<pre><code># \u5927\u5185\u5b58\u573a\u666f (8GB+ \u5185\u5b58)\nJAVA_OPTS=\"-server \\\n           -Xms4g -Xmx8g \\\n           -XX:+UseG1GC \\\n           -XX:MaxGCPauseMillis=100 \\\n           -XX:G1HeapRegionSize=16m \\\n           -XX:G1ReservePercent=25 \\\n           -XX:InitiatingHeapOccupancyPercent=30 \\\n           -XX:+UseStringDeduplication \\\n           -XX:+OptimizeStringConcat \\\n           -XX:+UseCompressedOops \\\n           -XX:+UseCompressedClassPointers\"\n\n# \u4e2d\u7b49\u5185\u5b58\u573a\u666f (4GB \u5185\u5b58)\nJAVA_OPTS=\"-server \\\n           -Xms2g -Xmx4g \\\n           -XX:+UseG1GC \\\n           -XX:MaxGCPauseMillis=200 \\\n           -XX:+UseStringDeduplication\"\n\n# \u5bb9\u5668\u5316\u73af\u5883\nJAVA_OPTS=\"-server \\\n           -XX:+UnlockExperimentalVMOptions \\\n           -XX:+UseCGroupMemoryLimitForHeap \\\n           -XX:MaxRAMFraction=1 \\\n           -XX:+UseG1GC \\\n           -XX:MaxGCPauseMillis=100\"\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#gc","title":"GC \u8c03\u4f18\u7b56\u7565","text":"<pre><code># G1GC \u4f18\u5316\u914d\u7f6e\n-XX:+UseG1GC\n-XX:MaxGCPauseMillis=100          # \u76ee\u6807\u6682\u505c\u65f6\u95f4\n-XX:G1HeapRegionSize=16m          # \u5806\u533a\u57df\u5927\u5c0f\n-XX:G1NewSizePercent=20           # \u65b0\u751f\u4ee3\u6700\u5c0f\u6bd4\u4f8b\n-XX:G1MaxNewSizePercent=30        # \u65b0\u751f\u4ee3\u6700\u5927\u6bd4\u4f8b\n-XX:G1ReservePercent=10           # \u4fdd\u7559\u5806\u6bd4\u4f8b\n-XX:InitiatingHeapOccupancyPercent=30  # \u89e6\u53d1\u5e76\u53d1\u6807\u8bb0\u9608\u503c\n\n# \u76d1\u63a7 GC \u6027\u80fd\n-Xloggc:gc.log\n-XX:+PrintGCDetails\n-XX:+PrintGCTimeStamps\n-XX:+PrintGCApplicationStoppedTime\n-XX:+UseGCLogFileRotation\n-XX:NumberOfGCLogFiles=5\n-XX:GCLogFileSize=100M\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#2","title":"2. \u64cd\u4f5c\u7cfb\u7edf\u4f18\u5316","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#linux","title":"Linux \u5185\u6838\u53c2\u6570\u8c03\u4f18","text":"<pre><code># /etc/sysctl.conf \u914d\u7f6e\n# \u7f51\u7edc\u8fde\u63a5\u4f18\u5316\nnet.core.somaxconn = 32768\nnet.core.netdev_max_backlog = 5000\nnet.ipv4.tcp_max_syn_backlog = 8192\nnet.ipv4.tcp_syncookies = 1\nnet.ipv4.tcp_tw_reuse = 1\nnet.ipv4.tcp_fin_timeout = 30\n\n# \u6587\u4ef6\u63cf\u8ff0\u7b26\u9650\u5236\nfs.file-max = 1000000\nfs.nr_open = 1000000\n\n# \u5185\u5b58\u7ba1\u7406\nvm.swappiness = 1\nvm.dirty_ratio = 15\nvm.dirty_background_ratio = 5\n\n# \u5e94\u7528\u751f\u6548\nsysctl -p\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_5","title":"\u6587\u4ef6\u63cf\u8ff0\u7b26\u9650\u5236","text":"<pre><code># /etc/security/limits.conf\n* soft nofile 100000\n* hard nofile 100000\n* soft nproc 100000\n* hard nproc 100000\n\n# \u5f53\u524d\u4f1a\u8bdd\u4e34\u65f6\u8bbe\u7f6e\nulimit -n 100000\nulimit -u 100000\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#3","title":"3. \u5bb9\u5668\u5316\u4f18\u5316","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#docker","title":"Docker \u8d44\u6e90\u9650\u5236","text":"<pre><code># docker-compose.yml\nversion: '3.8'\nservices:\n  mcp-bridge:\n    image: mcp-bridge:v3.0.0\n    deploy:\n      resources:\n        limits:\n          memory: 8G\n          cpus: '4.0'\n        reservations:\n          memory: 4G\n          cpus: '2.0'\n    environment:\n      - JAVA_OPTS=-Xms4g -Xmx6g -XX:+UseG1GC\n    ulimits:\n      nofile:\n        soft: 100000\n        hard: 100000\n    sysctls:\n      - net.core.somaxconn=32768\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#kubernetes","title":"Kubernetes \u8d44\u6e90\u914d\u7f6e","text":"<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: mcp-bridge-v3\nspec:\n  replicas: 3\n  template:\n    spec:\n      containers:\n      - name: mcp-bridge\n        image: mcp-bridge:v3.0.0\n        resources:\n          requests:\n            memory: \"4Gi\"\n            cpu: \"2000m\"\n          limits:\n            memory: \"8Gi\"\n            cpu: \"4000m\"\n        env:\n        - name: JAVA_OPTS\n          value: \"-Xms4g -Xmx6g -XX:+UseG1GC -XX:MaxGCPauseMillis=100\"\n        livenessProbe:\n          httpGet:\n            path: /actuator/health\n            port: 8080\n          initialDelaySeconds: 60\n          periodSeconds: 30\n        readinessProbe:\n          httpGet:\n            path: /actuator/health/readiness\n            port: 8080\n          initialDelaySeconds: 30\n          periodSeconds: 10\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_6","title":"\u2699\ufe0f \u5e94\u7528\u7ea7\u6027\u80fd\u8c03\u4f18","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#1","title":"1. \u8fde\u63a5\u6c60\u4f18\u5316","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#http","title":"HTTP \u8fde\u63a5\u6c60\u8c03\u4f18","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          connection-pool:\n            # \u8fde\u63a5\u6570\u914d\u7f6e\n            max-connections: 200              # \u6700\u5927\u8fde\u63a5\u6570\n            min-idle-connections: 20          # \u6700\u5c0f\u7a7a\u95f2\u8fde\u63a5\n            max-connections-per-route: 50     # \u6bcf\u4e2a\u8def\u7531\u6700\u5927\u8fde\u63a5\n\n            # \u8d85\u65f6\u914d\u7f6e\n            connection-timeout: 10s           # \u8fde\u63a5\u8d85\u65f6\n            socket-timeout: 30s               # \u8bfb\u5199\u8d85\u65f6\n            connection-request-timeout: 5s    # \u4ece\u8fde\u63a5\u6c60\u83b7\u53d6\u8fde\u63a5\u8d85\u65f6\n\n            # \u751f\u547d\u5468\u671f\u914d\u7f6e\n            idle-timeout: 300s                # \u7a7a\u95f2\u8d85\u65f6\n            max-lifetime: 1800s               # \u6700\u5927\u751f\u547d\u5468\u671f\n            keep-alive-duration: 30s          # Keep-Alive \u65f6\u95f4\n\n            # \u76d1\u63a7\u914d\u7f6e\n            leak-detection-threshold: 30s     # \u8fde\u63a5\u6cc4\u6f0f\u68c0\u6d4b\n            validation-query-timeout: 3s      # \u8fde\u63a5\u9a8c\u8bc1\u8d85\u65f6\n            test-on-borrow: true              # \u83b7\u53d6\u65f6\u9a8c\u8bc1\n            test-while-idle: true             # \u7a7a\u95f2\u65f6\u9a8c\u8bc1\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#webclient","title":"WebClient \u4f18\u5316\u914d\u7f6e","text":"<pre><code>spring:\n  webflux:\n    webclient:\n      # \u8fde\u63a5\u6c60\u914d\u7f6e\n      pool:\n        type: elastic                        # \u8fde\u63a5\u6c60\u7c7b\u578b: fixed, elastic\n        max-connections: 500                 # \u6700\u5927\u8fde\u63a5\u6570\n        max-idle-time: 30s                   # \u6700\u5927\u7a7a\u95f2\u65f6\u95f4\n        max-life-time: 60s                   # \u6700\u5927\u751f\u547d\u5468\u671f\n        pending-acquire-timeout: 45s         # \u83b7\u53d6\u8fde\u63a5\u8d85\u65f6\n\n      # \u7f16\u89e3\u7801\u5668\u914d\u7f6e\n      codecs:\n        max-in-memory-size: 256KB            # \u5185\u5b58\u7f13\u51b2\u533a\u5927\u5c0f\n\n      # SSL \u914d\u7f6e\n      ssl:\n        handshake-timeout: 10s               # SSL \u63e1\u624b\u8d85\u65f6\n        close-notify-flush-timeout: 3s       # \u5173\u95ed\u901a\u77e5\u8d85\u65f6\n        close-notify-read-timeout: 0s        # \u5173\u95ed\u8bfb\u53d6\u8d85\u65f6\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#2_1","title":"2. \u7ebf\u7a0b\u6c60\u4f18\u5316","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#tomcat","title":"Tomcat \u7ebf\u7a0b\u6c60\u8c03\u4f18","text":"<pre><code>server:\n  tomcat:\n    # \u7ebf\u7a0b\u6c60\u914d\u7f6e\n    threads:\n      max: 400                              # \u6700\u5927\u7ebf\u7a0b\u6570\n      min-spare: 50                         # \u6700\u5c0f\u7a7a\u95f2\u7ebf\u7a0b\n\n    # \u8fde\u63a5\u914d\u7f6e\n    max-connections: 10000                  # \u6700\u5927\u8fde\u63a5\u6570\n    accept-count: 1000                      # \u7b49\u5f85\u961f\u5217\u957f\u5ea6\n    connection-timeout: 20s                 # \u8fde\u63a5\u8d85\u65f6\n\n    # Keep-Alive \u914d\u7f6e\n    keep-alive-timeout: 60s                 # Keep-Alive \u8d85\u65f6\n    max-keep-alive-requests: 1000           # \u6700\u5927 Keep-Alive \u8bf7\u6c42\u6570\n\n    # \u5904\u7406\u5668\u914d\u7f6e\n    processor-cache: 400                    # \u5904\u7406\u5668\u7f13\u5b58\u5927\u5c0f\n\n    # \u5185\u5b58\u914d\u7f6e\n    max-http-form-post-size: 2MB           # \u6700\u5927\u8868\u5355\u5927\u5c0f\n    max-swallow-size: 2MB                  # \u6700\u5927\u541e\u5410\u5927\u5c0f\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#netty-webflux","title":"Netty \u7ebf\u7a0b\u6c60\u8c03\u4f18 (WebFlux)","text":"<pre><code>spring:\n  webflux:\n    # Netty \u914d\u7f6e\n    netty:\n      # I/O \u7ebf\u7a0b\u6c60\n      io-worker-count: 0                    # 0 \u8868\u793a\u4f7f\u7528 CPU \u6838\u6570 * 2\n\n      # \u8fde\u63a5\u914d\u7f6e  \n      connection-timeout: 10s               # \u8fde\u63a5\u8d85\u65f6\n      h2c-max-content-length: 0             # HTTP/2 \u5185\u5bb9\u957f\u5ea6\u9650\u5236\n\n      # \u7f13\u51b2\u533a\u914d\u7f6e\n      initial-buffer-size: 128              # \u521d\u59cb\u7f13\u51b2\u533a\u5927\u5c0f\n      max-chunk-size: 8192                  # \u6700\u5927\u5757\u5927\u5c0f\n      max-initial-line-length: 4096         # \u6700\u5927\u521d\u59cb\u884c\u957f\u5ea6\n      validate-headers: true                # \u9a8c\u8bc1 HTTP \u5934\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#3_1","title":"3. \u7f13\u5b58\u4f18\u5316","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_7","title":"\u591a\u7ea7\u7f13\u5b58\u7b56\u7565","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          cache:\n            enabled: true\n            provider: LAYERED                # \u591a\u7ea7\u7f13\u5b58\n\n            # L1 \u7f13\u5b58 (\u672c\u5730\u5185\u5b58)\n            l1-cache:\n              provider: CAFFEINE\n              tool-results:\n                max-size: 5000\n                ttl: 300s\n                refresh-after-write: 240s    # \u5199\u5165\u540e\u5237\u65b0\u65f6\u95f4\n\n            # L2 \u7f13\u5b58 (Redis)\n            l2-cache:\n              provider: REDIS\n              tool-results:\n                max-size: 50000\n                ttl: 1800s\n                key-prefix: \"mcp:tool:\"\n\n            # \u9884\u70ed\u914d\u7f6e\n            preload:\n              enabled: true\n              popular-tools:               # \u9884\u52a0\u8f7d\u70ed\u95e8\u5de5\u5177\n                - \"getPersonById\"\n                - \"getAllPersons\"\n              warmup-requests: 100         # \u9884\u70ed\u8bf7\u6c42\u6570\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#redis","title":"Redis \u7f13\u5b58\u4f18\u5316","text":"<pre><code>spring:\n  redis:\n    # \u8fde\u63a5\u6c60\u914d\u7f6e\n    lettuce:\n      pool:\n        max-active: 100                    # \u6700\u5927\u6d3b\u8dc3\u8fde\u63a5\n        max-idle: 20                       # \u6700\u5927\u7a7a\u95f2\u8fde\u63a5\n        min-idle: 5                        # \u6700\u5c0f\u7a7a\u95f2\u8fde\u63a5\n        max-wait: 5s                       # \u6700\u5927\u7b49\u5f85\u65f6\u95f4\n\n    # \u8fde\u63a5\u914d\u7f6e\n    timeout: 3s                            # \u8fde\u63a5\u8d85\u65f6\n    connect-timeout: 10s                   # \u5efa\u7acb\u8fde\u63a5\u8d85\u65f6\n\n    # \u96c6\u7fa4\u914d\u7f6e (\u5982\u679c\u4f7f\u7528\u96c6\u7fa4)\n    cluster:\n      max-redirects: 3                     # \u6700\u5927\u91cd\u5b9a\u5411\u6b21\u6570\n\n    # \u5e8f\u5217\u5316\u914d\u7f6e\n    serialization:\n      key-serializer: string               # \u952e\u5e8f\u5217\u5316\u65b9\u5f0f\n      value-serializer: json              # \u503c\u5e8f\u5217\u5316\u65b9\u5f0f\n      hash-key-serializer: string\n      hash-value-serializer: json\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#4","title":"4. \u8d1f\u8f7d\u5747\u8861\u4f18\u5316","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_8","title":"\u667a\u80fd\u8d1f\u8f7d\u5747\u8861\u914d\u7f6e","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          load-balancer:\n            # \u9ad8\u7ea7\u7b97\u6cd5\u914d\u7f6e\n            algorithm: ADAPTIVE_WEIGHTED     # \u81ea\u9002\u5e94\u52a0\u6743\u7b97\u6cd5\n\n            # \u6743\u91cd\u52a8\u6001\u8c03\u6574\n            dynamic-weight:\n              enabled: true\n              response-time-weight: 0.4      # \u54cd\u5e94\u65f6\u95f4\u6743\u91cd\n              error-rate-weight: 0.3         # \u9519\u8bef\u7387\u6743\u91cd\n              active-requests-weight: 0.3    # \u6d3b\u8dc3\u8bf7\u6c42\u6743\u91cd\n\n            # \u7194\u65ad\u5668\u914d\u7f6e\n            circuit-breaker:\n              enabled: true\n              failure-rate-threshold: 30     # \u5931\u8d25\u7387\u9608\u503c (%)\n              slow-call-rate-threshold: 30   # \u6162\u8c03\u7528\u7387\u9608\u503c (%)\n              slow-call-duration-threshold: 1s  # \u6162\u8c03\u7528\u65f6\u957f\u9608\u503c\n              minimum-number-of-calls: 20    # \u6700\u5c0f\u8c03\u7528\u6b21\u6570\n              sliding-window-size: 50        # \u6ed1\u52a8\u7a97\u53e3\u5927\u5c0f\n              wait-duration-in-open-state: 30s  # \u7194\u65ad\u5668\u5f00\u542f\u7b49\u5f85\u65f6\u95f4\n\n            # \u5065\u5eb7\u68c0\u67e5\u4f18\u5316\n            health-check:\n              enabled: true\n              interval: 15s                  # \u68c0\u67e5\u95f4\u9694\n              timeout: 3s                    # \u68c0\u67e5\u8d85\u65f6\n              failure-threshold: 3           # \u5931\u8d25\u9608\u503c\n              recovery-threshold: 2          # \u6062\u590d\u9608\u503c\n              parallel-checks: true          # \u5e76\u884c\u68c0\u67e5\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#5","title":"5. \u670d\u52a1\u53d1\u73b0\u4f18\u5316","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#nacos","title":"Nacos \u670d\u52a1\u53d1\u73b0\u4f18\u5316","text":"<pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          # \u8fde\u63a5\u4f18\u5316\n          server-addr: nacos-cluster        # \u4f7f\u7528\u96c6\u7fa4\u5730\u5740\n\n          # \u7f13\u5b58\u4f18\u5316\n          naming:\n            cache-size: 10000               # \u7f13\u5b58\u5927\u5c0f\n            cache-refresh-interval: 30s     # \u7f13\u5b58\u5237\u65b0\u95f4\u9694\n\n          # \u957f\u8f6e\u8be2\u4f18\u5316\n          config:\n            long-poll-timeout: 30000        # \u957f\u8f6e\u8be2\u8d85\u65f6 (ms)\n            config-retry-time: 3000         # \u91cd\u8bd5\u95f4\u9694 (ms)\n            max-retry: 3                    # \u6700\u5927\u91cd\u8bd5\u6b21\u6570\n\n          # \u6279\u91cf\u64cd\u4f5c\n          batch-size: 1000                  # \u6279\u91cf\u5927\u5c0f\n\n        bridge:\n          service-discovery:\n            # \u670d\u52a1\u53d1\u73b0\u7f13\u5b58\n            cache-enabled: true\n            cache-ttl: 60s                  # \u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\n            cache-refresh-ahead: 10s        # \u63d0\u524d\u5237\u65b0\u65f6\u95f4\n\n            # \u9884\u52a0\u8f7d\u914d\u7f6e\n            preload-services: true          # \u9884\u52a0\u8f7d\u670d\u52a1\u5217\u8868\n            background-refresh: true        # \u540e\u53f0\u5237\u65b0\n            refresh-interval: 30s           # \u540e\u53f0\u5237\u65b0\u95f4\u9694\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_9","title":"\ud83d\udcca \u6027\u80fd\u76d1\u63a7\u4e0e\u5206\u6790","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#1_1","title":"1. \u5173\u952e\u6307\u6807\u76d1\u63a7","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_10","title":"\u81ea\u5b9a\u4e49\u6027\u80fd\u6307\u6807","text":"<pre><code>@Component\npublic class PerformanceMetrics {\n\n    private final MeterRegistry meterRegistry;\n    private final Timer requestTimer;\n    private final Counter requestCounter;\n    private final Gauge activeConnectionsGauge;\n\n    public PerformanceMetrics(MeterRegistry meterRegistry) {\n        this.meterRegistry = meterRegistry;\n        this.requestTimer = Timer.builder(\"mcp.bridge.request.duration\")\n            .description(\"Request processing time\")\n            .register(meterRegistry);\n\n        this.requestCounter = Counter.builder(\"mcp.bridge.request.total\")\n            .description(\"Total requests\")\n            .register(meterRegistry);\n\n        this.activeConnectionsGauge = Gauge.builder(\"mcp.bridge.connections.active\")\n            .description(\"Active connections\")\n            .register(meterRegistry, this, PerformanceMetrics::getActiveConnections);\n    }\n\n    @EventListener\n    public void onRequestCompleted(RequestCompletedEvent event) {\n        requestTimer.record(event.getDuration(), TimeUnit.MILLISECONDS);\n        requestCounter.increment(\n            Tags.of(\"status\", event.getStatus(),\n                   \"service\", event.getServiceName())\n        );\n    }\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#micrometer","title":"Micrometer \u914d\u7f6e\u4f18\u5316","text":"<pre><code>management:\n  metrics:\n    # \u542f\u7528\u8be6\u7ec6\u6307\u6807\n    enable:\n      jvm: true\n      system: true\n      web: true\n      process: true\n\n    # \u6307\u6807\u5bfc\u51fa\u4f18\u5316\n    export:\n      prometheus:\n        enabled: true\n        step: 15s                          # \u91c7\u96c6\u95f4\u9694\n        descriptions: true                 # \u5305\u542b\u63cf\u8ff0\n        histogram-flavor: prometheus       # \u76f4\u65b9\u56fe\u683c\u5f0f\n\n    # \u5206\u53d1\u5668\u914d\u7f6e\n    distribution:\n      percentiles-histogram:\n        http.server.requests: true         # \u542f\u7528\u76f4\u65b9\u56fe\n      percentiles:\n        http.server.requests: 0.5, 0.75, 0.90, 0.95, 0.99  # \u767e\u5206\u4f4d\u6570\n      sla:\n        http.server.requests: 50ms, 100ms, 200ms, 500ms     # SLA \u5206\u6876\n\n    # \u6807\u7b7e\u914d\u7f6e\n    tags:\n      application: mcp-bridge-v3\n      environment: ${spring.profiles.active}\n      version: ${project.version}\n      region: ${DEPLOY_REGION:unknown}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#2-apm","title":"2. APM \u5de5\u5177\u96c6\u6210","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#skywalking","title":"SkyWalking \u96c6\u6210","text":"<pre><code># SkyWalking Agent \u914d\u7f6e\nexport SW_AGENT_NAME=mcp-bridge-v3\nexport SW_AGENT_COLLECTOR_BACKEND_SERVICES=skywalking-oap:11800\nexport SW_AGENT_SPAN_LIMIT=2000\n\n# \u542f\u52a8\u5e94\u7528\njava -javaagent:skywalking-agent.jar \\\n     -jar mcp-bridge-v3.jar\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#jaeger","title":"Jaeger \u5206\u5e03\u5f0f\u8ddf\u8e2a","text":"<pre><code>spring:\n  sleuth:\n    jaeger:\n      remote-sender:\n        endpoint: http://jaeger-collector:14268/api/traces\n    sampler:\n      probability: 0.1                     # \u91c7\u6837\u7387 10%\n      rate: 1000                          # \u6bcf\u79d2\u6700\u5927 trace \u6570\n\n  zipkin:\n    enabled: false                         # \u7981\u7528 Zipkin\n\nopentracing:\n  jaeger:\n    enabled: true\n    service-name: mcp-bridge-v3\n    sampler:\n      type: probabilistic\n      param: 0.1\n    sender:\n      type: http\n      endpoint: http://jaeger-collector:14268/api/traces\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#3_2","title":"3. \u6027\u80fd\u5206\u6790\u5de5\u5177","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#jprofiler","title":"JProfiler \u914d\u7f6e","text":"<pre><code># JProfiler \u542f\u52a8\u53c2\u6570\nJAVA_OPTS=\"$JAVA_OPTS -agentpath:/opt/jprofiler/bin/linux-x64/libjprofilerti.so=port=8849,nowait\"\n\n# \u8fdc\u7a0b\u5206\u6790\u914d\u7f6e\n-Djprofiler.config=/opt/jprofiler/config/config.xml\n-Djprofiler.sessionId=mcp-bridge-analysis\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#arthas","title":"Arthas \u5728\u7ebf\u8bca\u65ad","text":"<pre><code># \u4e0b\u8f7d\u5e76\u542f\u52a8 Arthas\ncurl -O https://arthas.aliyun.com/arthas-boot.jar\njava -jar arthas-boot.jar\n\n# \u5e38\u7528\u6027\u80fd\u5206\u6790\u547d\u4ee4\n# \u67e5\u770b\u6700\u8017\u65f6\u7684\u65b9\u6cd5\nprofiler start\nprofiler getSamples\nprofiler stop\n\n# \u76d1\u63a7\u65b9\u6cd5\u8c03\u7528\nmonitor -c 5 com.nacos.mcp.bridge.service.McpRouterService routeRequest\n\n# \u67e5\u770b JVM \u4fe1\u606f\ndashboard\njvm\ngc\nmemory\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_11","title":"\ud83e\uddea \u6027\u80fd\u6d4b\u8bd5\u65b9\u6848","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#1_2","title":"1. \u538b\u529b\u6d4b\u8bd5\u811a\u672c","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#gatling","title":"Gatling \u6d4b\u8bd5\u811a\u672c","text":"<pre><code>import io.gatling.core.Predef._\nimport io.gatling.http.Predef._\nimport scala.concurrent.duration._\n\nclass McpBridgeLoadTest extends Simulation {\n\n  val httpProtocol = http\n    .baseUrl(\"http://localhost:8080\")\n    .acceptHeader(\"application/json\")\n    .contentTypeHeader(\"application/json\")\n    .userAgentHeader(\"Gatling/3.0\")\n\n  val smartCallScenario = scenario(\"Smart Tool Call\")\n    .exec(http(\"smart_call\")\n      .post(\"/mcp/smart/call\")\n      .body(StringBody(\"\"\"{\"toolName\":\"getPersonById\",\"arguments\":{\"id\":1}}\"\"\"))\n      .check(status.is(200))\n      .check(jsonPath(\"$.success\").is(\"true\"))\n      .check(responseTimeInMillis.lt(500))\n    )\n\n  val directCallScenario = scenario(\"Direct Service Call\")\n    .exec(http(\"direct_call\")\n      .post(\"/mcp/bridge/route/mcp-server-v6\")\n      .body(StringBody(\"\"\"{\"id\":\"req-001\",\"method\":\"tools/call\",\"params\":{\"name\":\"getAllPersons\",\"arguments\":{}}}\"\"\"))\n      .check(status.is(200))\n      .check(responseTimeInMillis.lt(300))\n    )\n\n  setUp(\n    smartCallScenario.inject(\n      constantUsersPerSec(10) during (30 seconds),\n      rampUsersPerSec(10) to 100 during (2 minutes),\n      constantUsersPerSec(100) during (5 minutes),\n      rampUsersPerSec(100) to 10 during (1 minute)\n    ),\n    directCallScenario.inject(\n      constantUsersPerSec(5) during (30 seconds),\n      rampUsersPerSec(5) to 50 during (2 minutes),\n      constantUsersPerSec(50) during (5 minutes)\n    )\n  ).protocols(httpProtocol)\n   .maxDuration(10 minutes)\n   .assertions(\n     global.responseTime.max.lt(1000),\n     global.responseTime.percentile3.lt(500),\n     global.successfulRequests.percent.gt(99)\n   )\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#k6","title":"K6 \u6d4b\u8bd5\u811a\u672c","text":"<pre><code>import http from 'k6/http';\nimport { check, sleep } from 'k6';\nimport { Rate } from 'k6/metrics';\n\nexport let errorRate = new Rate('errors');\n\nexport let options = {\n  stages: [\n    { duration: '2m', target: 100 },\n    { duration: '5m', target: 100 },\n    { duration: '2m', target: 200 },\n    { duration: '5m', target: 200 },\n    { duration: '2m', target: 0 },\n  ],\n  thresholds: {\n    http_req_duration: ['p(95)&lt;500'],\n    errors: ['rate&lt;0.01'],\n  },\n};\n\nexport default function() {\n  let payload = JSON.stringify({\n    toolName: 'getPersonById',\n    arguments: { id: Math.floor(Math.random() * 1000) + 1 }\n  });\n\n  let params = {\n    headers: { 'Content-Type': 'application/json' },\n  };\n\n  let response = http.post('http://localhost:8080/mcp/smart/call', payload, params);\n\n  let result = check(response, {\n    'status is 200': (r) =&gt; r.status === 200,\n    'response time &lt; 500ms': (r) =&gt; r.timings.duration &lt; 500,\n    'success is true': (r) =&gt; JSON.parse(r.body).success === true,\n  });\n\n  errorRate.add(!result);\n\n  sleep(1);\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#2_2","title":"2. \u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_12","title":"\u57fa\u51c6\u6d4b\u8bd5\u914d\u7f6e","text":"<pre><code># \u57fa\u51c6\u6d4b\u8bd5\u73af\u5883\u914d\u7f6e\nperformance-test:\n  scenarios:\n    - name: \"low-load\"\n      users: 10\n      duration: \"5m\"\n      ramp-up: \"1m\"\n\n    - name: \"normal-load\"\n      users: 100\n      duration: \"10m\"\n      ramp-up: \"2m\"\n\n    - name: \"peak-load\"\n      users: 500\n      duration: \"10m\"\n      ramp-up: \"5m\"\n\n    - name: \"stress-test\"\n      users: 1000\n      duration: \"15m\"\n      ramp-up: \"5m\"\n\n  targets:\n    response-time:\n      p50: 100ms\n      p95: 300ms\n      p99: 500ms\n    throughput: 1000 rps\n    error-rate: 0.1%\n    resource-usage:\n      cpu: 70%\n      memory: 80%\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_13","title":"\ud83d\udcc8 \u6027\u80fd\u4f18\u5316\u6848\u4f8b","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#1_3","title":"\u6848\u4f8b 1: \u54cd\u5e94\u65f6\u95f4\u4f18\u5316","text":"<p>\u95ee\u9898: P95 \u54cd\u5e94\u65f6\u95f4\u8d85\u8fc7 1 \u79d2 \u5206\u6790:  - \u6570\u636e\u5e93\u67e5\u8be2\u6162 - \u8fde\u63a5\u6c60\u914d\u7f6e\u4e0d\u5f53 - \u7f13\u5b58\u547d\u4e2d\u7387\u4f4e</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          # \u4f18\u5316\u8fde\u63a5\u6c60\n          connection-pool:\n            max-connections: 200\n            min-idle-connections: 50\n            connection-timeout: 5s\n\n          # \u542f\u7528\u7f13\u5b58\n          cache:\n            enabled: true\n            tool-results:\n              ttl: 600s\n              max-size: 10000\n\n          # \u5e76\u884c\u5904\u7406\n          routing:\n            parallel-processing: true\n            max-concurrent-requests: 500\n</code></pre></p> <p>\u6548\u679c: P95 \u54cd\u5e94\u65f6\u95f4\u964d\u4f4e\u5230 200ms</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#2_3","title":"\u6848\u4f8b 2: \u541e\u5410\u91cf\u63d0\u5347","text":"<p>\u95ee\u9898: \u7cfb\u7edf\u541e\u5410\u91cf\u53ea\u6709 200 QPS \u5206\u6790: - \u7ebf\u7a0b\u6c60\u914d\u7f6e\u8fc7\u5c0f - I/O \u963b\u585e\u4e25\u91cd - GC \u9891\u7e41</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code># JVM \u4f18\u5316\nJAVA_OPTS=\"-Xms4g -Xmx8g \\\n           -XX:+UseG1GC \\\n           -XX:MaxGCPauseMillis=100 \\\n           -XX:G1HeapRegionSize=16m\"\n</code></pre></p> <pre><code>server:\n  tomcat:\n    threads:\n      max: 400\n      min-spare: 100\n    max-connections: 20000\n\nspring:\n  webflux:\n    netty:\n      io-worker-count: 16  # \u589e\u52a0 I/O \u7ebf\u7a0b\n</code></pre> <p>\u6548\u679c: \u541e\u5410\u91cf\u63d0\u5347\u5230 1200 QPS</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#3_3","title":"\u6848\u4f8b 3: \u5185\u5b58\u4f7f\u7528\u4f18\u5316","text":"<p>\u95ee\u9898: \u5185\u5b58\u4f7f\u7528\u7387\u6301\u7eed\u589e\u957f\uff0c\u6700\u7ec8 OOM \u5206\u6790: - \u8fde\u63a5\u6cc4\u6f0f - \u7f13\u5b58\u65e0\u9650\u589e\u957f - \u5927\u5bf9\u8c61\u9891\u7e41\u521b\u5efa</p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          connection-pool:\n            leak-detection-threshold: 30s\n            max-lifetime: 1800s\n\n          cache:\n            tool-results:\n              max-size: 5000  # \u9650\u5236\u7f13\u5b58\u5927\u5c0f\n              eviction-policy: LRU\n</code></pre></p> <p>\u6548\u679c: \u5185\u5b58\u4f7f\u7528\u7a33\u5b9a\u5728 4GB \u4ee5\u4e0b</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_14","title":"\ud83d\udcca \u6301\u7eed\u6027\u80fd\u76d1\u63a7","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#1_4","title":"1. \u6027\u80fd\u544a\u8b66\u89c4\u5219","text":"<pre><code># Prometheus \u544a\u8b66\u89c4\u5219\ngroups:\n  - name: mcp-bridge-performance\n    rules:\n      - alert: HighResponseTime\n        expr: histogram_quantile(0.95, rate(http_server_requests_seconds_bucket[5m])) &gt; 0.5\n        for: 2m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"MCP Bridge high response time\"\n          description: \"P95 response time is {{ $value }}s\"\n\n      - alert: LowThroughput\n        expr: rate(http_server_requests_seconds_count[5m]) &lt; 100\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"MCP Bridge low throughput\"\n\n      - alert: HighErrorRate\n        expr: rate(http_server_requests_seconds_count{status=~\"5..\"}[5m]) / rate(http_server_requests_seconds_count[5m]) &gt; 0.01\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"MCP Bridge high error rate\"\n\n      - alert: HighMemoryUsage\n        expr: jvm_memory_used_bytes{area=\"heap\"} / jvm_memory_max_bytes{area=\"heap\"} &gt; 0.8\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"MCP Bridge high memory usage\"\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#2_4","title":"2. \u81ea\u52a8\u5316\u6027\u80fd\u6d4b\u8bd5","text":"<pre><code># Jenkins Pipeline \u6027\u80fd\u6d4b\u8bd5\npipeline {\n  agent any\n  stages {\n    stage('Performance Test') {\n      steps {\n        script {\n          // \u542f\u52a8\u6027\u80fd\u6d4b\u8bd5\n          sh 'k6 run --out json=results.json performance-test.js'\n\n          // \u5206\u6790\u7ed3\u679c\n          def results = readJSON file: 'results.json'\n          def p95 = results.metrics.http_req_duration.values.p95\n          def errorRate = results.metrics.errors.values.rate\n\n          // \u6027\u80fd\u56de\u5f52\u68c0\u67e5\n          if (p95 &gt; 500) {\n            error \"P95 response time regression: ${p95}ms &gt; 500ms\"\n          }\n\n          if (errorRate &gt; 0.01) {\n            error \"Error rate regression: ${errorRate} &gt; 1%\"\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#_15","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5\u5efa\u8bae","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#1_5","title":"1. \u6027\u80fd\u4f18\u5316\u539f\u5219","text":"<ul> <li>\u6d4b\u91cf\u5148\u884c: \u5148\u6d4b\u91cf\u518d\u4f18\u5316\uff0c\u907f\u514d\u8fc7\u65e9\u4f18\u5316</li> <li>\u5173\u6ce8\u74f6\u9888: \u4f18\u5316\u7cfb\u7edf\u74f6\u9888\u70b9\uff0c\u83b7\u5f97\u6700\u5927\u6536\u76ca</li> <li>\u9010\u6b65\u4f18\u5316: \u6bcf\u6b21\u4f18\u5316\u4e00\u4e2a\u65b9\u9762\uff0c\u4fbf\u4e8e\u6548\u679c\u8bc4\u4f30</li> <li>\u6301\u7eed\u76d1\u63a7: \u5efa\u7acb\u5b8c\u5584\u7684\u76d1\u63a7\u4f53\u7cfb\uff0c\u53ca\u65f6\u53d1\u73b0\u95ee\u9898</li> </ul>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#2_5","title":"2. \u914d\u7f6e\u4f18\u5316\u7b56\u7565","text":"<ul> <li>\u73af\u5883\u5dee\u5f02\u5316: \u4e0d\u540c\u73af\u5883\u4f7f\u7528\u4e0d\u540c\u7684\u6027\u80fd\u914d\u7f6e</li> <li>\u52a8\u6001\u8c03\u6574: \u652f\u6301\u8fd0\u884c\u65f6\u52a8\u6001\u8c03\u6574\u5173\u952e\u53c2\u6570</li> <li>\u7248\u672c\u7ba1\u7406: \u6027\u80fd\u914d\u7f6e\u4e5f\u8981\u8fdb\u884c\u7248\u672c\u7ba1\u7406</li> <li>\u6587\u6863\u8bb0\u5f55: \u8be6\u7ec6\u8bb0\u5f55\u6bcf\u6b21\u4f18\u5316\u7684\u539f\u56e0\u548c\u6548\u679c</li> </ul>"},{"location":"archived/docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE/#3_4","title":"3. \u76d1\u63a7\u4f53\u7cfb\u5efa\u8bbe","text":"<ul> <li>\u591a\u7ef4\u5ea6\u76d1\u63a7: \u4ece\u5e94\u7528\u3001\u7cfb\u7edf\u3001\u7f51\u7edc\u7b49\u591a\u4e2a\u7ef4\u5ea6\u76d1\u63a7</li> <li>\u544a\u8b66\u5206\u7ea7: \u5efa\u7acb\u5206\u7ea7\u544a\u8b66\u673a\u5236\uff0c\u907f\u514d\u544a\u8b66\u75b2\u52b3</li> <li>\u8d8b\u52bf\u5206\u6790: \u5173\u6ce8\u6027\u80fd\u6307\u6807\u7684\u957f\u671f\u8d8b\u52bf\u53d8\u5316</li> <li>\u5bb9\u91cf\u89c4\u5212: \u57fa\u4e8e\u76d1\u63a7\u6570\u636e\u8fdb\u884c\u5bb9\u91cf\u89c4\u5212</li> </ul> <p>\ud83d\ude80 \u6027\u80fd\u4f18\u5316\u5c0f\u8d34\u58eb:  1. \u6027\u80fd\u4f18\u5316\u662f\u4e00\u4e2a\u6301\u7eed\u7684\u8fc7\u7a0b\uff0c\u9700\u8981\u6839\u636e\u4e1a\u52a1\u53d1\u5c55\u4e0d\u65ad\u8c03\u6574 2. \u4e0d\u540c\u573a\u666f\u4e0b\u7684\u6700\u4f18\u914d\u7f6e\u53ef\u80fd\u4e0d\u540c\uff0c\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8c03\u6574 3. \u6027\u80fd\u548c\u7a33\u5b9a\u6027\u9700\u8981\u5e73\u8861\uff0c\u4e0d\u80fd\u4e3a\u4e86\u6027\u80fd\u727a\u7272\u7cfb\u7edf\u7a33\u5b9a\u6027 4. \u5efa\u7acb\u5b8c\u5584\u7684\u6027\u80fd\u6d4b\u8bd5\u548c\u76d1\u63a7\u4f53\u7cfb\u662f\u6301\u7eed\u4f18\u5316\u7684\u57fa\u7840 5. \u56e2\u961f\u6210\u5458\u9700\u8981\u5efa\u7acb\u6027\u80fd\u610f\u8bc6\uff0c\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u5c31\u8003\u8651\u6027\u80fd\u5f71\u54cd</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/","title":"MCP Bridge v3 \u6545\u969c\u6392\u67e5\u6307\u5357","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_1","title":"\ud83d\udccb \u6982\u8ff0","text":"<p>\u672c\u6307\u5357\u63d0\u4f9b\u4e86 MCP Bridge v3 \u5e38\u89c1\u95ee\u9898\u7684\u8bca\u65ad\u65b9\u6cd5\u548c\u89e3\u51b3\u65b9\u6848\uff0c\u5e2e\u52a9\u8fd0\u7ef4\u4eba\u5458\u548c\u5f00\u53d1\u8005\u5feb\u901f\u5b9a\u4f4d\u548c\u89e3\u51b3\u95ee\u9898\u3002</p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_2","title":"\ud83d\udea8 \u5feb\u901f\u8bca\u65ad\u6e05\u5355","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_3","title":"\u7cfb\u7edf\u5065\u5eb7\u68c0\u67e5","text":"<pre><code># 1. \u68c0\u67e5\u670d\u52a1\u72b6\u6001\ncurl http://localhost:8080/actuator/health\n\n# 2. \u68c0\u67e5 Nacos \u8fde\u63a5\ncurl http://localhost:8080/actuator/health/nacos\n\n# 3. \u68c0\u67e5\u6ce8\u518c\u670d\u52a1\ncurl http://localhost:8080/mcp/bridge/services\n\n# 4. \u68c0\u67e5\u7cfb\u7edf\u7edf\u8ba1\ncurl http://localhost:8080/mcp/bridge/stats\n\n# 5. \u68c0\u67e5\u65e5\u5fd7\ntail -f logs/mcp-bridge-v3.log\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_4","title":"\ud83d\udd0d \u5e38\u89c1\u95ee\u9898\u5206\u7c7b\u6392\u67e5","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#1","title":"1. \u542f\u52a8\u95ee\u9898","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#11","title":"1.1 \u670d\u52a1\u542f\u52a8\u5931\u8d25","text":"<p>\u95ee\u9898\u73b0\u8c61: <pre><code>Application failed to start\nDescription: Failed to configure a DataSource\n</code></pre></p> <p>\u53ef\u80fd\u539f\u56e0: - \u914d\u7f6e\u6587\u4ef6\u9519\u8bef - \u4f9d\u8d56\u7f3a\u5931 - \u7aef\u53e3\u51b2\u7a81 - JVM \u5185\u5b58\u4e0d\u8db3</p> <p>\u6392\u67e5\u6b65\u9aa4: <pre><code># \u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\n./gradlew bootRun --debug\n\n# \u68c0\u67e5\u7aef\u53e3\u5360\u7528\nnetstat -tlnp | grep 8080\nlsof -i :8080\n\n# \u68c0\u67e5 JVM \u5185\u5b58\njava -XX:+PrintFlagsFinal -version | grep MaxHeapSize\n\n# \u67e5\u770b\u8be6\u7ec6\u542f\u52a8\u65e5\u5fd7\njava -jar mcp-bridge-v3.jar --debug\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code># \u4fee\u6b63\u914d\u7f6e\u6587\u4ef6\nspring:\n  application:\n    name: mcp-bridge-v3\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          server-addr: 127.0.0.1:8848  # \u786e\u4fdd Nacos \u5730\u5740\u6b63\u786e\n\n# \u66f4\u6362\u7aef\u53e3\nserver:\n  port: 8081\n\n# \u589e\u52a0\u5185\u5b58\nJAVA_OPTS=\"-Xms1g -Xmx2g\"\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#12-nacos","title":"1.2 Nacos \u8fde\u63a5\u5931\u8d25","text":"<p>\u95ee\u9898\u73b0\u8c61: <pre><code>com.alibaba.nacos.api.exception.NacosException: \nfailed to req API:/nacos/v1/ns/instance after all servers tried\n</code></pre></p> <p>\u6392\u67e5\u6b65\u9aa4: <pre><code># 1. \u68c0\u67e5 Nacos \u670d\u52a1\u72b6\u6001\ncurl http://127.0.0.1:8848/nacos/v1/console/health/liveness\n\n# 2. \u68c0\u67e5\u7f51\u7edc\u8fde\u901a\u6027\nping 127.0.0.1\ntelnet 127.0.0.1 8848\n\n# 3. \u68c0\u67e5 Nacos \u8ba4\u8bc1\ncurl -X POST 'http://127.0.0.1:8848/nacos/v1/auth/login' \\\n  -d 'username=nacos&amp;password=nacos'\n\n# 4. \u68c0\u67e5\u9632\u706b\u5899\niptables -L | grep 8848\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        nacos:\n          server-addr: 127.0.0.1:8848\n          username: nacos  # \u5982\u679c\u542f\u7528\u8ba4\u8bc1\n          password: nacos\n          namespace: public\n\n          # \u8fde\u63a5\u8d85\u65f6\u914d\u7f6e\n          config-long-poll-timeout: 30000\n          config-retry-time: 3000\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#2","title":"2. \u8fd0\u884c\u65f6\u95ee\u9898","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#21","title":"2.1 \u5de5\u5177\u8c03\u7528\u5931\u8d25","text":"<p>\u95ee\u9898\u73b0\u8c61: <pre><code>{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"SERVICE_UNAVAILABLE\",\n    \"message\": \"No healthy instances available\"\n  }\n}\n</code></pre></p> <p>\u6392\u67e5\u6b65\u9aa4: <pre><code># 1. \u68c0\u67e5\u6ce8\u518c\u7684\u670d\u52a1\ncurl http://localhost:8080/mcp/bridge/services\n\n# 2. \u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001\ncurl http://localhost:8080/mcp/bridge/health/mcp-server-v6\n\n# 3. \u68c0\u67e5\u8fde\u63a5\u6c60\u72b6\u6001\ncurl http://localhost:8080/mcp/bridge/connections/status\n\n# 4. \u67e5\u770b\u8be6\u7ec6\u65e5\u5fd7\ngrep \"SERVICE_UNAVAILABLE\" logs/mcp-bridge-v3.log\ngrep \"routeRequest\" logs/mcp-bridge-v3.log\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code># 1. \u91cd\u542f\u76ee\u6807\u670d\u52a1\nsystemctl restart mcp-server-v6\n\n# 2. \u624b\u52a8\u89e6\u53d1\u670d\u52a1\u53d1\u73b0\ncurl -X POST http://localhost:8080/mcp/bridge/admin/discovery/refresh\n\n# 3. \u68c0\u67e5\u670d\u52a1\u914d\u7f6e\ncurl http://mcp-server-v6:8066/actuator/health\n\n# 4. \u8c03\u6574\u5065\u5eb7\u68c0\u67e5\u914d\u7f6e\n</code></pre></p> <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          load-balancer:\n            health-check:\n              failure-threshold: 5  # \u589e\u52a0\u5bb9\u9519\u6b21\u6570\n              interval: 15s  # \u7f29\u77ed\u68c0\u67e5\u95f4\u9694\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#22","title":"2.2 \u8bf7\u6c42\u8d85\u65f6","text":"<p>\u95ee\u9898\u73b0\u8c61: <pre><code>java.util.concurrent.TimeoutException: \nDid not observe any item or terminal signal within 30000ms\n</code></pre></p> <p>\u6392\u67e5\u6b65\u9aa4: <pre><code># 1. \u68c0\u67e5\u7f51\u7edc\u5ef6\u8fdf\nping mcp-server-v6\ntraceroute mcp-server-v6\n\n# 2. \u68c0\u67e5\u76ee\u6807\u670d\u52a1\u54cd\u5e94\u65f6\u95f4\ncurl -w \"@curl-format.txt\" http://mcp-server-v6:8066/actuator/health\n\n# 3. \u67e5\u770b\u6027\u80fd\u6307\u6807\ncurl http://localhost:8080/actuator/metrics/mcp.bridge.request.duration\n\n# 4. \u68c0\u67e5\u7ebf\u7a0b\u6c60\u72b6\u6001\ncurl http://localhost:8080/actuator/metrics/executor\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          routing:\n            timeout: 60s  # \u589e\u52a0\u8d85\u65f6\u65f6\u95f4\n            retry:\n              enabled: true\n              max-attempts: 3\n              backoff-delay: 2s\n\n          connection-pool:\n            connection-timeout: 30s\n            socket-timeout: 60s\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#23","title":"2.3 \u5185\u5b58\u6cc4\u6f0f","text":"<p>\u95ee\u9898\u73b0\u8c61: <pre><code>java.lang.OutOfMemoryError: Java heap space\n</code></pre></p> <p>\u6392\u67e5\u6b65\u9aa4: <pre><code># 1. \u67e5\u770b\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\njstat -gc &lt;pid&gt; 5s\njmap -histo &lt;pid&gt; | head -20\n\n# 2. \u751f\u6210\u5806\u8f6c\u50a8\njmap -dump:format=b,file=heap.dump &lt;pid&gt;\n\n# 3. \u68c0\u67e5\u8fde\u63a5\u6c60\u6cc4\u6f0f\ncurl http://localhost:8080/mcp/bridge/connections/status\n\n# 4. \u67e5\u770b\u7f13\u5b58\u4f7f\u7528\u60c5\u51b5\ncurl http://localhost:8080/actuator/metrics/cache.size\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          connection-pool:\n            leak-detection-threshold: 30s  # \u542f\u7528\u8fde\u63a5\u6cc4\u6f0f\u68c0\u6d4b\n            max-lifetime: 1800s  # \u8bbe\u7f6e\u8fde\u63a5\u6700\u5927\u751f\u547d\u5468\u671f\n\n          cache:\n            tool-results:\n              max-size: 1000  # \u9650\u5236\u7f13\u5b58\u5927\u5c0f\n              ttl: 300s  # \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n\n# JVM \u53c2\u6570\u8c03\u4f18\nJAVA_OPTS=\"-Xms2g -Xmx4g -XX:+HeapDumpOnOutOfMemoryError\"\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#3","title":"3. \u6027\u80fd\u95ee\u9898","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#31","title":"3.1 \u54cd\u5e94\u65f6\u95f4\u6162","text":"<p>\u95ee\u9898\u73b0\u8c61: - API \u54cd\u5e94\u65f6\u95f4\u8d85\u8fc7\u9884\u671f - \u7528\u6237\u4f53\u9a8c\u53d8\u5dee</p> <p>\u6027\u80fd\u5206\u6790: <pre><code># 1. \u67e5\u770b\u54cd\u5e94\u65f6\u95f4\u5206\u5e03\ncurl http://localhost:8080/actuator/metrics/http.server.requests\n\n# 2. \u68c0\u67e5\u7ebf\u7a0b\u6c60\u72b6\u6001\ncurl http://localhost:8080/actuator/metrics/executor.active\n\n# 3. \u5206\u6790\u6162\u67e5\u8be2\ngrep \"SLOW_REQUEST\" logs/mcp-bridge-v3.log\n\n# 4. \u68c0\u67e5 GC \u60c5\u51b5\njstat -gc &lt;pid&gt; 5s 10\n</code></pre></p> <p>\u4f18\u5316\u65b9\u6848: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          # \u542f\u7528\u7f13\u5b58\n          cache:\n            enabled: true\n            tool-results:\n              ttl: 300s\n              max-size: 2000\n\n          # \u4f18\u5316\u8fde\u63a5\u6c60\n          connection-pool:\n            max-connections: 100\n            min-idle-connections: 20\n\n          # \u5e76\u884c\u5904\u7406\n          routing:\n            parallel-processing: true\n            max-concurrent-requests: 500\n\n# \u670d\u52a1\u5668\u4f18\u5316\nserver:\n  tomcat:\n    threads:\n      max: 200\n      min-spare: 20\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#32","title":"3.2 \u9ad8\u5e76\u53d1\u95ee\u9898","text":"<p>\u95ee\u9898\u73b0\u8c61: <pre><code>org.springframework.web.reactive.function.client.WebClientRequestException: \nConnection pool shut down\n</code></pre></p> <p>\u6392\u67e5\u6b65\u9aa4: <pre><code># 1. \u76d1\u63a7\u5e76\u53d1\u8bf7\u6c42\u6570\ncurl http://localhost:8080/actuator/metrics/http.server.requests.active\n\n# 2. \u68c0\u67e5\u8fde\u63a5\u6c60\u72b6\u6001\ncurl http://localhost:8080/actuator/metrics/connection.pool.active\n\n# 3. \u67e5\u770b\u7cfb\u7edf\u8d1f\u8f7d\ntop\nhtop\nsar -u 5 5\n\n# 4. \u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\nss -tuln | wc -l\nnetstat -an | grep ESTABLISHED | wc -l\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          connection-pool:\n            max-connections: 200  # \u589e\u52a0\u8fde\u63a5\u6c60\u5927\u5c0f\n            max-connections-per-route: 50\n            connection-timeout: 10s\n            socket-timeout: 30s\n\n          routing:\n            timeout: 30s\n            max-concurrent-requests: 1000  # \u589e\u52a0\u5e76\u53d1\u9650\u5236\n\n# \u7cfb\u7edf\u7ea7\u4f18\u5316\nserver:\n  tomcat:\n    max-connections: 10000\n    accept-count: 1000\n    threads:\n      max: 500\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#4","title":"4. \u7f51\u7edc\u95ee\u9898","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#41","title":"4.1 \u8fde\u63a5\u88ab\u62d2\u7edd","text":"<p>\u95ee\u9898\u73b0\u8c61: <pre><code>java.net.ConnectException: Connection refused\n</code></pre></p> <p>\u6392\u67e5\u6b65\u9aa4: <pre><code># 1. \u68c0\u67e5\u76ee\u6807\u670d\u52a1\u72b6\u6001\nsystemctl status mcp-server-v6\ndocker ps | grep mcp-server\n\n# 2. \u68c0\u67e5\u7aef\u53e3\u76d1\u542c\nnetstat -tlnp | grep 8066\nss -tlnp | grep 8066\n\n# 3. \u68c0\u67e5\u9632\u706b\u5899\niptables -L\nfirewall-cmd --list-all\n\n# 4. \u68c0\u67e5 DNS \u89e3\u6790\nnslookup mcp-server-v6\ndig mcp-server-v6\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code># 1. \u542f\u52a8\u76ee\u6807\u670d\u52a1\nsystemctl start mcp-server-v6\n\n# 2. \u5f00\u653e\u9632\u706b\u5899\u7aef\u53e3\nfirewall-cmd --add-port=8066/tcp --permanent\nfirewall-cmd --reload\n\n# 3. \u4fee\u6b63\u670d\u52a1\u914d\u7f6e\n</code></pre></p> <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          service-discovery:\n            prefer-ip-address: true  # \u4f7f\u7528 IP \u800c\u975e\u4e3b\u673a\u540d\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#42","title":"4.2 \u7f51\u7edc\u8d85\u65f6","text":"<p>\u95ee\u9898\u73b0\u8c61: <pre><code>java.net.SocketTimeoutException: Read timed out\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>spring:\n  ai:\n    alibaba:\n      mcp:\n        bridge:\n          connection-pool:\n            connection-timeout: 30s\n            socket-timeout: 60s\n            connection-request-timeout: 15s\n\n          routing:\n            timeout: 45s\n            retry:\n              enabled: true\n              max-attempts: 3\n              backoff-delay: 2s\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#5","title":"5. \u914d\u7f6e\u95ee\u9898","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#51","title":"5.1 \u914d\u7f6e\u4e0d\u751f\u6548","text":"<p>\u95ee\u9898\u73b0\u8c61: - \u4fee\u6539\u914d\u7f6e\u540e\u6ca1\u6709\u751f\u6548 - \u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u800c\u975e\u81ea\u5b9a\u4e49\u914d\u7f6e</p> <p>\u6392\u67e5\u6b65\u9aa4: <pre><code># 1. \u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\ncurl http://localhost:8080/actuator/configprops\n\n# 2. \u68c0\u67e5\u73af\u5883\u53d8\u91cf\nenv | grep MCP\nenv | grep NACOS\n\n# 3. \u68c0\u67e5\u914d\u7f6e\u4f18\u5148\u7ea7\ncurl http://localhost:8080/actuator/env\n\n# 4. \u67e5\u770b\u914d\u7f6e\u7ed1\u5b9a\u65e5\u5fd7\ngrep \"ConfigurationProperties\" logs/mcp-bridge-v3.log\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code># 1. \u786e\u8ba4\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\njava -jar mcp-bridge-v3.jar --spring.config.location=file:./application.yml\n\n# 2. \u68c0\u67e5\u914d\u7f6e\u8bed\u6cd5\nyq eval 'length' application.yml\n\n# 3. \u4f7f\u7528\u73af\u5883\u53d8\u91cf\u8986\u76d6\nexport SPRING_AI_ALIBABA_MCP_NACOS_SERVER_ADDR=127.0.0.1:8848\n\n# 4. \u542f\u7528\u914d\u7f6e\u5237\u65b0\ncurl -X POST http://localhost:8080/actuator/refresh\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#52-nacos","title":"5.2 Nacos \u914d\u7f6e\u540c\u6b65\u5931\u8d25","text":"<p>\u95ee\u9898\u73b0\u8c61: <pre><code>Failed to sync configuration from Nacos\n</code></pre></p> <p>\u6392\u67e5\u6b65\u9aa4: <pre><code># 1. \u68c0\u67e5 Nacos \u914d\u7f6e\u5b58\u5728\u6027\ncurl 'http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=mcp-bridge-v3&amp;group=DEFAULT_GROUP'\n\n# 2. \u68c0\u67e5\u914d\u7f6e\u683c\u5f0f\ncurl 'http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=mcp-bridge-v3&amp;group=DEFAULT_GROUP' | jq .\n\n# 3. \u67e5\u770b\u914d\u7f6e\u76d1\u542c\u5668\ngrep \"ConfigChangeEvent\" logs/mcp-bridge-v3.log\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: <pre><code>spring:\n  cloud:\n    nacos:\n      config:\n        enabled: true\n        server-addr: ${spring.ai.alibaba.mcp.nacos.server-addr}\n        file-extension: yaml\n        refresh-enabled: true\n\n        # \u914d\u7f6e\u91cd\u8bd5\n        max-retry: 3\n        config-retry-time: 2000\n        config-long-poll-timeout: 30000\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_5","title":"\ud83d\udee0\ufe0f \u8c03\u8bd5\u5de5\u5177\u548c\u547d\u4ee4","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#1_1","title":"1. \u65e5\u5fd7\u5206\u6790\u5de5\u5177","text":"<pre><code># \u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7\ntail -f logs/mcp-bridge-v3.log | grep ERROR\n\n# \u6309\u7ea7\u522b\u8fc7\u6ee4\u65e5\u5fd7\ngrep \"WARN\\|ERROR\" logs/mcp-bridge-v3.log\n\n# \u5206\u6790\u9519\u8bef\u6a21\u5f0f\nawk '/ERROR/ {print $0}' logs/mcp-bridge-v3.log | sort | uniq -c | sort -nr\n\n# \u67e5\u770b\u7279\u5b9a\u65f6\u95f4\u6bb5\u65e5\u5fd7\nsed -n '/2025-01-12 10:00:00/,/2025-01-12 11:00:00/p' logs/mcp-bridge-v3.log\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#2_1","title":"2. \u6027\u80fd\u5206\u6790\u5de5\u5177","text":"<pre><code># JVM \u6027\u80fd\u5206\u6790\njstat -gcutil &lt;pid&gt; 5s\njstack &lt;pid&gt; &gt; thread_dump.txt\njmap -histo &lt;pid&gt; | head -20\n\n# \u7f51\u7edc\u5206\u6790\nnetstat -an | grep :8080\nss -tuln | grep :8080\ntcpdump -i any port 8080\n\n# \u7cfb\u7edf\u8d44\u6e90\u76d1\u63a7\nhtop\niotop\nsar -u 5 5\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#3_1","title":"3. \u5065\u5eb7\u68c0\u67e5\u811a\u672c","text":"<pre><code>#!/bin/bash\n# MCP Bridge \u5065\u5eb7\u68c0\u67e5\u811a\u672c\n\nSERVICE_URL=\"http://localhost:8080\"\nLOG_FILE=\"/var/log/mcp-bridge-health.log\"\n\ncheck_service_health() {\n    local endpoint=$1\n    local description=$2\n\n    echo \"$(date): Checking $description...\" | tee -a $LOG_FILE\n\n    response=$(curl -s -w \"%{http_code}\" -o /tmp/health_response $endpoint)\n\n    if [ \"$response\" = \"200\" ]; then\n        echo \"$(date): \u2705 $description - OK\" | tee -a $LOG_FILE\n        return 0\n    else\n        echo \"$(date): \u274c $description - FAILED (HTTP $response)\" | tee -a $LOG_FILE\n        cat /tmp/health_response | tee -a $LOG_FILE\n        return 1\n    fi\n}\n\n# \u6267\u884c\u5065\u5eb7\u68c0\u67e5\ncheck_service_health \"$SERVICE_URL/actuator/health\" \"Service Health\"\ncheck_service_health \"$SERVICE_URL/actuator/health/nacos\" \"Nacos Connection\"\ncheck_service_health \"$SERVICE_URL/mcp/bridge/services\" \"Service Discovery\"\n\n# \u68c0\u67e5\u5173\u952e\u6307\u6807\ncurl -s \"$SERVICE_URL/mcp/bridge/stats\" | jq '.requests.successRate' &gt; /tmp/success_rate\nsuccess_rate=$(cat /tmp/success_rate)\n\nif (( $(echo \"$success_rate &lt; 95.0\" | bc -l) )); then\n    echo \"$(date): \u26a0\ufe0f  Success rate below threshold: $success_rate%\" | tee -a $LOG_FILE\nfi\n\necho \"$(date): Health check completed\" | tee -a $LOG_FILE\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#4_1","title":"4. \u6545\u969c\u6062\u590d\u811a\u672c","text":"<pre><code>#!/bin/bash\n# MCP Bridge \u6545\u969c\u81ea\u52a8\u6062\u590d\u811a\u672c\n\nSERVICE_NAME=\"mcp-bridge-v3\"\nSERVICE_URL=\"http://localhost:8080\"\nMAX_RETRIES=3\nRETRY_DELAY=10\n\nrestart_service() {\n    echo \"$(date): Attempting to restart $SERVICE_NAME...\"\n    systemctl restart $SERVICE_NAME\n    sleep 30\n}\n\ncheck_and_recover() {\n    local retry_count=0\n\n    while [ $retry_count -lt $MAX_RETRIES ]; do\n        # \u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001\n        if curl -s -f \"$SERVICE_URL/actuator/health\" &gt; /dev/null; then\n            echo \"$(date): Service is healthy\"\n            return 0\n        fi\n\n        echo \"$(date): Service unhealthy, attempt $((retry_count + 1))/$MAX_RETRIES\"\n\n        # \u5c1d\u8bd5\u91cd\u542f\u670d\u52a1\n        restart_service\n\n        # \u6e05\u7406\u8fde\u63a5\u6c60\n        curl -s -X POST \"$SERVICE_URL/mcp/bridge/admin/connections/reset\" || true\n\n        retry_count=$((retry_count + 1))\n\n        if [ $retry_count -lt $MAX_RETRIES ]; then\n            sleep $RETRY_DELAY\n        fi\n    done\n\n    echo \"$(date): Failed to recover service after $MAX_RETRIES attempts\"\n    return 1\n}\n\n# \u6267\u884c\u6062\u590d\u6d41\u7a0b\ncheck_and_recover\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_6","title":"\ud83d\udcca \u76d1\u63a7\u548c\u544a\u8b66","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#1_2","title":"1. \u5173\u952e\u6307\u6807\u76d1\u63a7","text":"<pre><code># Prometheus \u76d1\u63a7\u914d\u7f6e\nscrape_configs:\n  - job_name: 'mcp-bridge'\n    static_configs:\n      - targets: ['localhost:8080']\n    metrics_path: '/actuator/prometheus'\n    scrape_interval: 15s\n\n# \u544a\u8b66\u89c4\u5219\ngroups:\n  - name: mcp-bridge-alerts\n    rules:\n      - alert: MCP_Bridge_Down\n        expr: up{job=\"mcp-bridge\"} == 0\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: \"MCP Bridge is down\"\n\n      - alert: MCP_Bridge_High_Error_Rate\n        expr: rate(http_server_requests_seconds_count{status=~\"5..\"}[5m]) &gt; 0.1\n        for: 2m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High error rate detected\"\n\n      - alert: MCP_Bridge_High_Response_Time\n        expr: histogram_quantile(0.95, rate(http_server_requests_seconds_bucket[5m])) &gt; 1\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: \"High response time detected\"\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#2_2","title":"2. \u65e5\u5fd7\u76d1\u63a7","text":"<pre><code># ELK Stack \u914d\u7f6e\nfilebeat.inputs:\n  - type: log\n    enabled: true\n    paths:\n      - /var/log/mcp-bridge-v3.log\n    fields:\n      service: mcp-bridge\n      environment: production\n    multiline.pattern: '^\\d{4}-\\d{2}-\\d{2}'\n    multiline.negate: true\n    multiline.match: after\n\noutput.elasticsearch:\n  hosts: [\"elasticsearch:9200\"]\n  index: \"mcp-bridge-logs-%{+yyyy.MM.dd}\"\n</code></pre>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_7","title":"\ud83c\udd98 \u7d27\u6025\u54cd\u5e94\u6d41\u7a0b","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#1_3","title":"1. \u670d\u52a1\u5b8c\u5168\u4e0d\u53ef\u7528","text":"<p>\u7d27\u6025\u5904\u7406\u6b65\u9aa4: 1. \u7acb\u5373\u68c0\u67e5\u57fa\u7840\u8bbe\u65bd\uff08\u7f51\u7edc\u3001\u6570\u636e\u5e93\u3001Nacos\uff09 2. \u67e5\u770b\u670d\u52a1\u65e5\u5fd7\u786e\u5b9a\u6545\u969c\u539f\u56e0 3. \u5c1d\u8bd5\u91cd\u542f\u670d\u52a1 4. \u5982\u679c\u91cd\u542f\u5931\u8d25\uff0c\u56de\u6eda\u5230\u4e0a\u4e00\u4e2a\u7a33\u5b9a\u7248\u672c 5. \u901a\u77e5\u76f8\u5173\u56e2\u961f\u548c\u7528\u6237</p> <p>\u64cd\u4f5c\u547d\u4ee4: <pre><code># 1. \u5feb\u901f\u8bca\u65ad\ncurl http://localhost:8080/actuator/health || echo \"Service is down\"\nsystemctl status mcp-bridge-v3\n\n# 2. \u67e5\u770b\u5173\u952e\u65e5\u5fd7\ntail -100 logs/mcp-bridge-v3.log | grep -E \"ERROR|FATAL\"\n\n# 3. \u91cd\u542f\u670d\u52a1\nsystemctl restart mcp-bridge-v3\n\n# 4. \u9a8c\u8bc1\u6062\u590d\nsleep 30\ncurl http://localhost:8080/actuator/health\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#2_3","title":"2. \u90e8\u5206\u529f\u80fd\u5f02\u5e38","text":"<p>\u5904\u7406\u6b65\u9aa4: 1. \u9694\u79bb\u95ee\u9898\u8303\u56f4 2. \u68c0\u67e5\u7279\u5b9a\u670d\u52a1\u8fde\u63a5\u72b6\u6001 3. \u624b\u52a8\u89e6\u53d1\u670d\u52a1\u53d1\u73b0\u5237\u65b0 4. \u5982\u9700\u8981\uff0c\u624b\u52a8\u4e0b\u7ebf\u5f02\u5e38\u670d\u52a1\u5b9e\u4f8b</p> <p>\u64cd\u4f5c\u547d\u4ee4: <pre><code># 1. \u68c0\u67e5\u670d\u52a1\u72b6\u6001\ncurl http://localhost:8080/mcp/bridge/services\n\n# 2. \u5237\u65b0\u670d\u52a1\u53d1\u73b0\ncurl -X POST http://localhost:8080/mcp/bridge/admin/discovery/refresh\n\n# 3. \u4e0b\u7ebf\u5f02\u5e38\u5b9e\u4f8b\ncurl -X POST http://localhost:8080/mcp/bridge/admin/services/mcp-server-v6/instances/instance-001/offline\n</code></pre></p>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_8","title":"\ud83d\udcde \u652f\u6301\u8054\u7cfb\u65b9\u5f0f","text":""},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_9","title":"\u6280\u672f\u652f\u6301","text":"<ul> <li>\u6280\u672f\u70ed\u7ebf: +86-400-xxx-xxxx</li> <li>\u90ae\u7bb1: mcp-support@company.com</li> <li>\u5de5\u5355\u7cfb\u7edf: https://support.company.com</li> </ul>"},{"location":"archived/docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE/#_10","title":"\u5e94\u6025\u8054\u7cfb\u4eba","text":"<ul> <li>\u6280\u672f\u8d1f\u8d23\u4eba: \u5f20\u4e09 (13800138000)</li> <li>\u8fd0\u7ef4\u8d1f\u8d23\u4eba: \u674e\u56db (13900139000)</li> <li>\u4ea7\u54c1\u8d1f\u8d23\u4eba: \u738b\u4e94 (13700137000)</li> </ul> <p>\ud83d\udca1 \u6545\u969c\u6392\u67e5\u5efa\u8bae:  1. \u5148\u68c0\u67e5\u57fa\u7840\u8bbe\u65bd\u548c\u7f51\u7edc\u8fde\u901a\u6027 2. \u67e5\u770b\u65e5\u5fd7\u662f\u6700\u6709\u6548\u7684\u6392\u67e5\u65b9\u6cd5 3. \u7cfb\u7edf\u76d1\u63a7\u6307\u6807\u53ef\u4ee5\u5feb\u901f\u5b9a\u4f4d\u95ee\u9898\u8303\u56f4 4. \u5efa\u7acb\u5b8c\u5584\u7684\u544a\u8b66\u673a\u5236\u53ef\u4ee5\u63d0\u524d\u53d1\u73b0\u95ee\u9898 5. \u5b9a\u671f\u8fdb\u884c\u6545\u969c\u6f14\u7ec3\u63d0\u9ad8\u5e94\u6025\u54cd\u5e94\u80fd\u529b</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/","title":"MCP Bridge \u6587\u6863\u5927\u7eb2","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_1","title":"\ud83d\udccb \u6587\u6863\u6982\u8ff0","text":"<p>\u672c\u5927\u7eb2\u4e3a mcp-bridge \u9879\u76ee\u8bbe\u8ba1\uff0c\u65e8\u5728\u5e2e\u52a9\u65b0\u63a5\u89e6\u7684\u5f00\u53d1\u8005\u5feb\u901f\u7406\u89e3\u9879\u76ee\u7684\u6838\u5fc3\u6982\u5ff5\u3001\u539f\u7406\u3001\u4f7f\u7528\u65b9\u6cd5\u548c\u53ef\u5b8c\u6210\u7684\u4efb\u52a1\u3002</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_2","title":"\ud83d\udcd6 \u4e00\u3001\u9879\u76ee\u7b80\u4ecb\u4e0e\u80cc\u666f","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#11-mcp-bridge","title":"1.1 \u4ec0\u4e48\u662f MCP Bridge\uff1f","text":"<ul> <li>\u5b9a\u4e49: \u57fa\u4e8e Model Context Protocol (MCP) \u7684\u667a\u80fd\u6865\u63a5\u7f51\u5173</li> <li>\u6838\u5fc3\u4ef7\u503c: \u4f5c\u4e3a\u5ba2\u6237\u7aef\u4e0e MCP \u670d\u52a1\u5668\u4e4b\u95f4\u7684\u6865\u6881\uff0c\u63d0\u4f9b\u7edf\u4e00\u7684\u670d\u52a1\u53d1\u73b0\u548c\u8d1f\u8f7d\u5747\u8861</li> <li>\u6280\u672f\u80cc\u666f: </li> <li>Spring AI Alibaba \u6846\u67b6\u751f\u6001\u7684\u91cd\u8981\u7ec4\u4ef6</li> <li>\u7b26\u5408 MCP \u6807\u51c6\u534f\u8bae\u89c4\u8303 (JSON-RPC 2.0)</li> <li>\u57fa\u4e8e\u4e8b\u4ef6\u9a71\u52a8\u7684\u73b0\u4ee3\u5316\u5fae\u670d\u52a1\u67b6\u6784</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#12","title":"1.2 \u9879\u76ee\u5728\u6574\u4f53\u751f\u6001\u4e2d\u7684\u4f4d\u7f6e","text":"<ul> <li>\u4e0a\u6e38: AI \u5e94\u7528\u3001MCP \u5ba2\u6237\u7aef\u3001Claude Desktop \u7b49</li> <li>\u4e0b\u6e38: \u5404\u79cd MCP \u670d\u52a1\u5668\u5b9e\u4f8b (mcp-server-v3\u3001mcp-server-v6 \u7b49)</li> <li>\u4e2d\u53f0: Nacos \u670d\u52a1\u6ce8\u518c\u53d1\u73b0\u4e2d\u5fc3</li> <li>\u6846\u67b6: Spring AI Alibaba MCP \u81ea\u52a8\u914d\u7f6e\u4f53\u7cfb</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#13","title":"1.3 \u89e3\u51b3\u7684\u6838\u5fc3\u95ee\u9898","text":"<ul> <li>\u670d\u52a1\u53d1\u73b0\u96be\u9898: \u81ea\u52a8\u53d1\u73b0\u548c\u7ba1\u7406\u5206\u5e03\u5f0f MCP \u670d\u52a1</li> <li>\u8d1f\u8f7d\u5747\u8861\u9700\u6c42: \u667a\u80fd\u5206\u914d\u8bf7\u6c42\u5230\u6700\u4f18\u670d\u52a1\u5b9e\u4f8b</li> <li>\u8fde\u63a5\u7ba1\u7406\u590d\u6742\u6027: \u7edf\u4e00\u7ba1\u7406 SSE \u957f\u8fde\u63a5\u548c\u8fde\u63a5\u6c60</li> <li>\u534f\u8bae\u6807\u51c6\u5316: \u63d0\u4f9b\u7b26\u5408 MCP \u6807\u51c6\u7684\u7edf\u4e00\u63a5\u53e3</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_3","title":"\ud83c\udfd7\ufe0f \u4e8c\u3001\u6838\u5fc3\u67b6\u6784\u4e0e\u8bbe\u8ba1\u539f\u7406","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#21","title":"2.1 \u6574\u4f53\u67b6\u6784\u8bbe\u8ba1","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_4","title":"\u67b6\u6784\u6f14\u8fdb\u5386\u7a0b","text":"<ul> <li>\u7b2c\u4e00\u4ee3: \u7b80\u5355\u7684 HTTP \u4ee3\u7406\u6a21\u5f0f</li> <li>\u7b2c\u4e8c\u4ee3: \u57fa\u4e8e Nacos \u7684\u670d\u52a1\u6ce8\u518c\u53d1\u73b0</li> <li>\u7b2c\u4e09\u4ee3 (\u5f53\u524d): \u4e8b\u4ef6\u9a71\u52a8 + \u667a\u80fd\u8def\u7531 + \u8fde\u63a5\u6c60\u7ba1\u7406</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_5","title":"\u6838\u5fc3\u67b6\u6784\u56fe","text":"<pre><code>graph TB\n    subgraph \"Client Layer\"\n        C1[MCP Client / AI App]\n        C2[Claude Desktop]\n        C3[Custom Tools]\n    end\n\n    subgraph \"Bridge Layer (mcp-bridge:8080)\"\n        MR[MCP Bridge Service]\n        LB[Load Balancer]\n        HC[Health Checker]\n        CM[Connection Manager]\n        SR[Server Registry]\n    end\n\n    subgraph \"Discovery Layer (Nacos:8848)\"\n        NS[Service Registry]\n        NCF[Config Management]\n        NEL[Event Listener]\n    end\n\n    subgraph \"Server Layer\"\n        MS1[mcp-server-v3:8063]\n        MS2[mcp-server-v6:8066]\n        MS3[mcp-server-vN:xxxx]\n    end\n\n    C1 --&gt;|JSON-RPC 2.0| MR\n    C2 --&gt;|tools/call| MR\n    C3 --&gt;|HTTP/REST| MR\n\n    MR --&gt; LB\n    MR --&gt; HC\n    MR --&gt; CM\n    MR --&gt; SR\n\n    SR &lt;--&gt;|Service Discovery| NS\n    HC &lt;--&gt;|Health Check| NCF\n    CM --&gt;|SSE Connection| NEL\n\n    CM -.-&gt;|Long Connection| MS1\n    CM -.-&gt;|Long Connection| MS2\n    CM -.-&gt;|Long Connection| MS3\n\n    MS1 --&gt;|Auto Register| NS\n    MS2 --&gt;|Auto Register| NS\n    MS3 --&gt;|Auto Register| NS\n</code></pre>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#22","title":"2.2 \u6838\u5fc3\u8bbe\u8ba1\u539f\u7406","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#221","title":"2.2.1 \u4e8b\u4ef6\u9a71\u52a8\u67b6\u6784","text":"<p>\u4ece\"\u63a8\u6a21\u5f0f\"\u5230\"\u62c9\u6a21\u5f0f\"\u7684\u9769\u547d\u6027\u8f6c\u53d8:</p> <p>\u4f20\u7edf\u63a8\u6a21\u5f0f\u95ee\u9898: - Bridge \u4e3b\u52a8\u8f6e\u8be2\u670d\u52a1\u5668\u72b6\u6001 (30\u79d2\u4e00\u6b21) - \u8d44\u6e90\u6d6a\u8d39\uff0c\u5b9e\u65f6\u6027\u5dee - \u8fde\u63a5\u72b6\u6001\u611f\u77e5\u6ede\u540e</p> <p>\u65b0\u62c9\u6a21\u5f0f\u4f18\u52bf: - MCP Server \u4e3b\u52a8\u8fde\u63a5 Bridge - \u5b9e\u65f6\u4e8b\u4ef6\u901a\u77e5\u673a\u5236 - \u96f6\u5ef6\u8fdf\u7684\u72b6\u6001\u53d8\u66f4\u611f\u77e5</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#222","title":"2.2.2 \u667a\u80fd\u6865\u63a5\u7b56\u7565","text":"<p>\u591a\u7ef4\u5ea6\u6865\u63a5\u51b3\u7b56: 1. \u670d\u52a1\u53d1\u73b0: \u57fa\u4e8e Nacos \u7684\u5b9e\u65f6\u670d\u52a1\u5217\u8868 2. \u5065\u5eb7\u68c0\u67e5: \u52a8\u6001\u8fc7\u6ee4\u4e0d\u5065\u5eb7\u5b9e\u4f8b 3. \u8d1f\u8f7d\u5747\u8861: \u52a0\u6743\u8f6e\u8be2\u7b97\u6cd5 4. \u5de5\u5177\u5339\u914d: \u6309\u9700\u67e5\u627e\u80fd\u63d0\u4f9b\u7279\u5b9a\u5de5\u5177\u7684\u670d\u52a1</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#223","title":"2.2.3 \u8fde\u63a5\u6c60\u7ba1\u7406","text":"<p>\u9ad8\u6548\u8fde\u63a5\u590d\u7528: - SSE \u957f\u8fde\u63a5\u590d\u7528 - \u8fde\u63a5\u6c60\u52a8\u6001\u6269\u7f29\u5bb9 - \u6545\u969c\u8fde\u63a5\u81ea\u52a8\u56de\u6536 - \u8fde\u63a5\u5065\u5eb7\u72b6\u6001\u76d1\u63a7</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#23","title":"2.3 \u5173\u952e\u6280\u672f\u7ec4\u4ef6","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#231-mcprouterservice","title":"2.3.1 McpRouterService (\u6838\u5fc3\u6865\u63a5\u5f15\u64ce)","text":"<pre><code>// \u6309\u9700\u6865\u63a5\uff1a\u53d1\u73b0 -&gt; \u5065\u5eb7\u68c0\u67e5 -&gt; \u8d1f\u8f7d\u5747\u8861 -&gt; \u8fde\u63a5 -&gt; \u8c03\u7528\npublic Mono&lt;McpMessage&gt; routeRequest(String serviceName, McpMessage message, Duration timeout)\n</code></pre>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#232-mcpclientmanager","title":"2.3.2 McpClientManager (\u8fde\u63a5\u7ba1\u7406\u5668)","text":"<ul> <li>\u7ef4\u62a4\u670d\u52a1\u5b9e\u4f8b\u7684 MCP \u5ba2\u6237\u7aef\u8fde\u63a5</li> <li>\u5b9e\u73b0\u8fde\u63a5\u6c60\u548c\u6545\u969c\u8f6c\u79fb</li> <li>\u63d0\u4f9b\u8fde\u63a5\u5065\u5eb7\u76d1\u63a7</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#233-loadbalancer","title":"2.3.3 LoadBalancer (\u8d1f\u8f7d\u5747\u8861\u5668)","text":"<ul> <li>\u52a0\u6743\u8f6e\u8be2\u7b97\u6cd5</li> <li>\u5b9e\u4f8b\u6743\u91cd\u52a8\u6001\u8c03\u6574</li> <li>\u6545\u969c\u5b9e\u4f8b\u81ea\u52a8\u5254\u9664</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_6","title":"\ud83d\ude80 \u4e09\u3001\u6838\u5fc3\u529f\u80fd\u7279\u6027","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#31","title":"3.1 \u667a\u80fd\u670d\u52a1\u53d1\u73b0","text":"<ul> <li>\u81ea\u52a8\u6ce8\u518c: MCP \u670d\u52a1\u5668\u542f\u52a8\u65f6\u81ea\u52a8\u6ce8\u518c\u5230 Nacos</li> <li>\u5b9e\u65f6\u53d1\u73b0: Bridge \u5b9e\u65f6\u611f\u77e5\u670d\u52a1\u4e0a\u4e0b\u7ebf</li> <li>\u5143\u6570\u636e\u7ba1\u7406: \u670d\u52a1\u80fd\u529b\u3001\u5de5\u5177\u6e05\u5355\u3001\u7248\u672c\u4fe1\u606f</li> <li>\u547d\u540d\u7a7a\u95f4\u9694\u79bb: \u652f\u6301\u591a\u73af\u5883\u90e8\u7f72</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#32","title":"3.2 \u9ad8\u53ef\u7528\u8d1f\u8f7d\u5747\u8861","text":"<ul> <li>\u7b97\u6cd5\u652f\u6301: \u52a0\u6743\u8f6e\u8be2\u3001\u968f\u673a\u3001\u6700\u5c11\u8fde\u63a5</li> <li>\u5065\u5eb7\u68c0\u67e5: \u5b9a\u65f6\u5065\u5eb7\u63a2\u6d4b + \u88ab\u52a8\u6545\u969c\u68c0\u6d4b</li> <li>\u6545\u969c\u8f6c\u79fb: \u81ea\u52a8\u5207\u6362\u5230\u5065\u5eb7\u5b9e\u4f8b</li> <li>\u6027\u80fd\u76d1\u63a7: \u54cd\u5e94\u65f6\u95f4\u3001\u9519\u8bef\u7387\u7edf\u8ba1</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#33","title":"3.3 \u534f\u8bae\u6807\u51c6\u5316\u652f\u6301","text":"<ul> <li>MCP Protocol: \u5b8c\u5168\u7b26\u5408 Model Context Protocol \u89c4\u8303</li> <li>JSON-RPC 2.0: \u6807\u51c6\u7684\u8fdc\u7a0b\u8c03\u7528\u534f\u8bae</li> <li>SSE Transport: Server-Sent Events \u957f\u8fde\u63a5\u4f20\u8f93</li> <li>\u5de5\u5177\u8c03\u7528: tools/call \u65b9\u6cd5\u7684\u5b8c\u6574\u5b9e\u73b0</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#34","title":"3.4 \u4f01\u4e1a\u7ea7\u7279\u6027","text":"<ul> <li>\u914d\u7f6e\u7ba1\u7406: \u96c6\u4e2d\u5316\u914d\u7f6e + \u70ed\u66f4\u65b0</li> <li>\u76d1\u63a7\u6307\u6807: \u8be6\u7ec6\u7684\u6027\u80fd\u548c\u4e1a\u52a1\u6307\u6807</li> <li>\u5b89\u5168\u8ba4\u8bc1: \u652f\u6301 Nacos \u5b89\u5168\u8ba4\u8bc1</li> <li>\u65e5\u5fd7\u5ba1\u8ba1: \u5b8c\u6574\u7684\u8c03\u7528\u94fe\u8def\u65e5\u5fd7</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_7","title":"\ud83d\udcda \u56db\u3001\u4f7f\u7528\u6307\u5357\u4e0e\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#41","title":"4.1 \u57fa\u7840\u4f7f\u7528","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#411","title":"4.1.1 \u5de5\u5177\u8c03\u7528\u793a\u4f8b","text":"<pre><code># \u8c03\u7528\u7279\u5b9a\u670d\u52a1\u7684\u5de5\u5177\ncurl -X POST http://localhost:8080/mcp/bridge/route/mcp-server-v6 \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"id\": \"req-001\",\n    \"method\": \"tools/call\",\n    \"params\": {\n      \"name\": \"getPersonById\",\n      \"arguments\": {\n        \"id\": 1\n      }\n    }\n  }'\n</code></pre>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#412","title":"4.1.2 \u670d\u52a1\u72b6\u6001\u67e5\u8be2","text":"<pre><code># \u67e5\u770b\u6240\u6709\u6ce8\u518c\u7684\u670d\u52a1\ncurl http://localhost:8080/mcp/bridge/services\n\n# \u67e5\u770b\u6865\u63a5\u7edf\u8ba1\u4fe1\u606f\ncurl http://localhost:8080/mcp/bridge/stats\n\n# \u5065\u5eb7\u68c0\u67e5\ncurl http://localhost:8080/actuator/health\n</code></pre>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#42","title":"4.2 \u96c6\u6210\u5f00\u53d1","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#421-java-client","title":"4.2.1 Java Client \u96c6\u6210","text":"<pre><code>@Component\npublic class McpBridgeClient {\n\n    @Autowired\n    private WebClient webClient;\n\n    public Mono&lt;String&gt; callTool(String toolName, Map&lt;String, Object&gt; args) {\n        return webClient.post()\n            .uri(\"/mcp/smart/call\")\n            .bodyValue(Map.of(\"toolName\", toolName, \"arguments\", args))\n            .retrieve()\n            .bodyToMono(String.class);\n    }\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#422-spring-ai","title":"4.2.2 Spring AI \u96c6\u6210","text":"<pre><code>@Configuration\npublic class McpBridgeConfiguration {\n\n    @Bean\n    public Function&lt;String, String&gt; mcpToolFunction() {\n        return toolName -&gt; {\n            // \u901a\u8fc7 Bridge \u8c03\u7528\u5de5\u5177\n            return mcpBridgeClient.callTool(toolName, Collections.emptyMap()).block();\n        };\n    }\n}\n</code></pre>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#43","title":"4.3 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#431","title":"4.3.1 \u670d\u52a1\u6ce8\u518c\u6700\u4f73\u5b9e\u8df5","text":"<ul> <li>\u547d\u540d\u89c4\u8303: \u4f7f\u7528\u6e05\u6670\u7684\u670d\u52a1\u547d\u540d (\u5982: user-service-v1)</li> <li>\u7248\u672c\u7ba1\u7406: \u91c7\u7528\u8bed\u4e49\u5316\u7248\u672c\u53f7</li> <li>\u5065\u5eb7\u68c0\u67e5: \u5b9e\u73b0\u81ea\u5b9a\u4e49\u5065\u5eb7\u68c0\u67e5\u7aef\u70b9</li> <li>\u4f18\u96c5\u4e0b\u7ebf: \u6b63\u786e\u5904\u7406\u670d\u52a1\u505c\u673a</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#432","title":"4.3.2 \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":"<ul> <li>\u8fde\u63a5\u6c60\u914d\u7f6e: \u6839\u636e\u5e76\u53d1\u91cf\u8c03\u6574\u8fde\u63a5\u6c60\u5927\u5c0f</li> <li>\u8d85\u65f6\u8bbe\u7f6e: \u5408\u7406\u8bbe\u7f6e\u5404\u79cd\u8d85\u65f6\u65f6\u95f4</li> <li>\u7f13\u5b58\u7b56\u7565: \u5bf9\u9891\u7e41\u67e5\u8be2\u7684\u7ed3\u679c\u8fdb\u884c\u7f13\u5b58</li> <li>\u76d1\u63a7\u544a\u8b66: \u5efa\u7acb\u5b8c\u5584\u7684\u76d1\u63a7\u4f53\u7cfb</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#433","title":"4.3.3 \u5b89\u5168\u6027\u8003\u8651","text":"<ul> <li>\u8ba4\u8bc1\u6388\u6743: \u542f\u7528 Nacos \u5b89\u5168\u8ba4\u8bc1</li> <li>\u7f51\u7edc\u9694\u79bb: \u4f7f\u7528\u9632\u706b\u5899\u9650\u5236\u8bbf\u95ee</li> <li>\u65e5\u5fd7\u8131\u654f: \u907f\u514d\u654f\u611f\u4fe1\u606f\u6cc4\u9732</li> <li>HTTPS: \u751f\u4ea7\u73af\u5883\u4f7f\u7528 HTTPS</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_8","title":"\ud83d\udea8 \u4e94\u3001\u5e38\u89c1\u95ee\u9898\u4e0e\u6545\u969c\u6392\u9664","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#51","title":"5.1 \u90e8\u7f72\u76f8\u5173\u95ee\u9898","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#q1-nacos","title":"Q1: Nacos \u8fde\u63a5\u5931\u8d25","text":"<p>\u9519\u8bef\u4fe1\u606f: <code>Connection refused to nacos server</code> \u89e3\u51b3\u65b9\u6848: 1. \u68c0\u67e5 Nacos \u670d\u52a1\u662f\u5426\u542f\u52a8 2. \u9a8c\u8bc1\u7f51\u7edc\u8fde\u901a\u6027 3. \u786e\u8ba4\u7aef\u53e3\u914d\u7f6e\u6b63\u786e 4. \u68c0\u67e5\u9632\u706b\u5899\u8bbe\u7f6e</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#q2","title":"Q2: \u670d\u52a1\u6ce8\u518c\u5931\u8d25","text":"<p>\u9519\u8bef\u4fe1\u606f: <code>Failed to register service to nacos</code> \u89e3\u51b3\u65b9\u6848: 1. \u68c0\u67e5 Nacos \u8ba4\u8bc1\u4fe1\u606f 2. \u9a8c\u8bc1\u547d\u540d\u7a7a\u95f4\u914d\u7f6e 3. \u786e\u8ba4\u670d\u52a1\u540d\u79f0\u683c\u5f0f 4. \u67e5\u770b Nacos \u670d\u52a1\u7aef\u65e5\u5fd7</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#52","title":"5.2 \u8fd0\u884c\u65f6\u95ee\u9898","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#q3","title":"Q3: \u8d1f\u8f7d\u5747\u8861\u4e0d\u751f\u6548","text":"<p>\u73b0\u8c61: \u8bf7\u6c42\u603b\u662f\u8def\u7531\u5230\u540c\u4e00\u4e2a\u670d\u52a1\u5b9e\u4f8b \u6392\u67e5\u6b65\u9aa4: 1. \u68c0\u67e5\u670d\u52a1\u5b9e\u4f8b\u6743\u91cd\u914d\u7f6e 2. \u9a8c\u8bc1\u5065\u5eb7\u68c0\u67e5\u72b6\u6001 3. \u67e5\u770b\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\u914d\u7f6e 4. \u76d1\u63a7\u8bf7\u6c42\u5206\u5e03\u60c5\u51b5</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#q4","title":"Q4: \u5de5\u5177\u8c03\u7528\u8d85\u65f6","text":"<p>\u73b0\u8c61: \u5de5\u5177\u8c03\u7528\u7ecf\u5e38\u8d85\u65f6 \u89e3\u51b3\u65b9\u6848: 1. \u589e\u52a0\u8d85\u65f6\u65f6\u95f4\u914d\u7f6e 2. \u4f18\u5316\u76ee\u6807\u670d\u52a1\u6027\u80fd 3. \u68c0\u67e5\u7f51\u7edc\u5ef6\u8fdf 4. \u542f\u7528\u8fde\u63a5\u6c60\u590d\u7528</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#53","title":"5.3 \u6027\u80fd\u95ee\u9898","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#q5","title":"Q5: \u5185\u5b58\u4f7f\u7528\u8fc7\u9ad8","text":"<p>\u6392\u67e5\u65b9\u6cd5: 1. \u751f\u6210\u5185\u5b58\u5feb\u7167\u5206\u6790 2. \u68c0\u67e5\u8fde\u63a5\u6c60\u6cc4\u6f0f 3. \u76d1\u63a7 GC \u9891\u7387 4. \u8c03\u6574 JVM \u53c2\u6570</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#q6","title":"Q6: \u54cd\u5e94\u65f6\u95f4\u6162","text":"<p>\u4f18\u5316\u5efa\u8bae: 1. \u542f\u7528\u7ed3\u679c\u7f13\u5b58 2. \u4f18\u5316\u6570\u636e\u5e93\u67e5\u8be2 3. \u589e\u52a0\u670d\u52a1\u5b9e\u4f8b 4. \u4f7f\u7528\u5f02\u6b65\u5904\u7406</p>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_9","title":"\ud83d\udd17 \u516d\u3001\u53c2\u8003\u8d44\u6599\u4e0e\u6269\u5c55\u9605\u8bfb","text":""},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#61","title":"6.1 \u5b98\u65b9\u6587\u6863","text":"<ul> <li>Model Context Protocol \u89c4\u8303</li> <li>Spring AI Alibaba \u6587\u6863</li> <li>Nacos \u5b98\u65b9\u6587\u6863</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#62","title":"6.2 \u76f8\u5173\u9879\u76ee","text":"<ul> <li>mcp-server-v3: MCP \u670d\u52a1\u5668\u53c2\u8003\u5b9e\u73b0</li> <li>mcp-server-v6: \u589e\u5f3a\u7248 MCP \u670d\u52a1\u5668</li> <li>spring-ai-alibaba: Spring AI Alibaba \u6846\u67b6</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#63","title":"6.3 \u6280\u672f\u535a\u5ba2","text":"<ul> <li>MCP \u534f\u8bae\u6df1\u5ea6\u89e3\u6790</li> <li>Spring AI \u96c6\u6210\u6700\u4f73\u5b9e\u8df5</li> <li>\u5fae\u670d\u52a1\u67b6\u6784\u4e0b\u7684 MCP \u5e94\u7528</li> </ul>"},{"location":"archived/docs-250812/MCP_ROUTER_V3_DOCUMENTATION_OUTLINE/#_10","title":"\u540e\u7eed\u5b8c\u5584\u8ba1\u5212","text":"<ol> <li>\u8be6\u7ec6\u6559\u7a0b: \u57fa\u4e8e\u6b64\u5927\u7eb2\u7f16\u5199\u8be6\u7ec6\u7684\u4f7f\u7528\u6559\u7a0b</li> <li>API \u6587\u6863: \u8865\u5145\u5b8c\u6574\u7684 API \u63a5\u53e3\u6587\u6863</li> <li>\u793a\u4f8b\u4ee3\u7801: \u63d0\u4f9b\u66f4\u591a\u5b9e\u9645\u4f7f\u7528\u793a\u4f8b</li> <li>\u6027\u80fd\u6d4b\u8bd5: \u6dfb\u52a0\u6027\u80fd\u6d4b\u8bd5\u62a5\u544a\u548c\u8c03\u4f18\u6307\u5357</li> <li>\u5b89\u5168\u6307\u5357: \u8865\u5145\u8be6\u7ec6\u7684\u5b89\u5168\u914d\u7f6e\u6307\u5357</li> </ol>"},{"location":"archived/docs-250812/TODO10/","title":"TODO10","text":"<p>\u9879\u76ee\u5b9e\u73b0\u5fc5\u987b\u53c2\u8003\uff1a https://github.com/alibaba/spring-ai-alibaba/tree/main/spring-ai-alibaba-mcp/ </p> <p>\u53c2\u8003\u9879\u76ee mcp-gateway-example-jdk17\uff0c\u53c2\u8003\u7684\u9879\u76ee\u4e3b\u8981\u662f\u5982\u4f55\u4f7f\u7528mcp\u7684\u6807\u51c6\u521b\u5efa\u8fde\u63a5\uff0c\u8bf7\u6c42mcp server</p> <p>\u5176\u4ed6\u53c2\u8003\u6587\u6863\uff1a   * nacos\u534f\u8bae\uff1a     * https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_gg16sv97bgirkixe/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog     * https://nacos.io/en/blog/nacos-gvr7dx_awbbpb_qdi918msnqbvonx2/?spm=5238cd80.7f2fc5d1.0.0.642e5f9aoZLhEW&amp;source=blog   * alibaba mcp\u6e90\u4ee3\u7801\uff1a     * https://github.com/alibaba/spring-ai-alibaba/tree/main/spring-ai-alibaba-mcp/    * mcp sdk\u6838\u5fc3\u4ee3\u7801\uff1a     * https://modelcontextprotocol.io/sdk/java/mcp-overview   * spring ai mcp\u534f\u8bae\uff1a     * https://docs.spring.io/spring-ai/reference/api/mcp/mcp-server-boot-starter-docs.html     * https://docs.spring.io/spring-ai/reference/api/mcp/mcp-helpers.html     * https://docs.spring.io/spring-ai/reference/api/mcp/mcp-client-boot-starter-docs.html</p> <p>\u9879\u76ee\u7ed3\u6784\uff1a mcp-client: \u7aef\u53e38070 mcp-router: \u7aef\u53e38050 mcp-server-v1: \u7aef\u53e38060 mcp-server-v2: \u7aef\u53e38061 mcp-server-v3: \u7aef\u53e38062 mcp-server\uff1a\u5e9f\u5f03</p> <p>mcp-server-v2 \u4e2d\u653e\u5f00tool\u548ctoolParam\u6ce8\u91ca\uff0c\u9700\u8981\u58f0\u660emcp server\uff0c\u8fd9\u662f\u6838\u5fc3\u903b\u8f91 mcp-server-v2\u542f\u52a8\u540e\uff0c\u901a\u8fc7mcp-router\u6ce8\u518c\u5230nacos\u4e2d mcp-client\u8c03\u7528\u670d\u52a1\u65f6\uff0c\u901a\u8fc7mcp-router\u67e5\u8be2nacos\u4e0a\u7684\u6ce8\u518c\u4fe1\u606f\uff0c\u5bfb\u627e\u5bf9\u5e94\u7684mcp server\u670d\u52a1 mcp-router\u7aef\u53e3 8050\uff0c mcp-server-v2\u7aef\u53e3 8061\uff0cmcp-client\u7aef\u53e38070\uff0c\u4e0d\u8981\u4fee\u6539\u3002  \u9879\u76ee\u90fd\u4f7f\u7528\u54cd\u5e94\u5f0f\u7f16\u7a0b\uff0c\u4f9d\u8d56\u7684jar\u5305\u4e0d\u8981\u4f7f\u7528\u963b\u585e\u5f0f \u7f16\u8bd1\u65f6\uff0c\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4     mvn -f mcp-server-v2/pom.xml clean install -nsu     mvn -f mcp-router/pom.xml clean install -nsu     mvn -f mcp-client/pom.xml clean install -nsu</p> <p>mcp-router\u8c03\u7528mcp-server-v2\u4f7f\u7528sse\u534f\u8bae\uff0c\u9075\u4ecemcp\u7684\u89c4\u7ea6\uff0c\u4e0d\u8981\u4f7f\u7528http\u6216\u8005https\u534f\u8bae\u8c03\u7528 mcp-router\u9664\u4e86\u8c03\u8bd5\u7528\u7684\u63a5\u53e3\uff0c\u4e0d\u63d0\u4f9b\u5bf9\u5916\u7684http\u670d\u52a1 mcp-client\u8c03\u7528mcp-router\u4f7f\u7528sse\u534f\u8bae\uff0c\u9075\u4ecemcp\u7684\u89c4\u7ea6\uff0c\u4e0d\u8981\u4f7f\u7528http\u6216\u8005https\u534f\u8bae\u8c03\u7528 mcp-server-v2\u9664\u4e86\u8c03\u8bd5\u7528\u7684\u63a5\u53e3\uff0c\u4e0d\u63d0\u4f9b\u5bf9\u5916\u7684http\u670d\u52a1</p> <p>\u9879\u76ee\u6267\u884c\u65f6\uff0c\u901a\u8fc7 sh ./run-demo.sh \u8fd0\u884c\u6240\u6709\u9879\u76ee\uff0c\u5206\u6790\u8f93\u51fa\u65e5\u5fd7\u5206\u6790\u95ee\u9898\u3002 spring-ai-alibaba \u7684\u5b98\u65b9\u6587\u6863\u6216\u4e00\u4e2a\u53ef\u8fd0\u884c\u7684\u5b98\u65b9\u793a\u4f8b\u9879\u76ee\uff0c\u6765\u627e\u51fa\u672c\u9879\u76ee\u914d\u7f6e\u4e0a\u7684\u5dee\u5f02\u3002</p> <p>mcp-client\u9a8c\u8bc1\u65b9\u6cd5\u5982\u4e0b\uff1a     # \u83b7\u53d6\u5de5\u5177\u5217\u8868     curl \"http://localhost:8070/mcp-client/api/v1/tools/list\"</p> <pre><code># \u8c03\u7528\u7cfb\u7edf\u4fe1\u606f\u5de5\u5177\ncurl -X POST http://localhost:8070/mcp-client/api/v1/tools/call \\\n-H \"Content-Type: application/json\" \\\n-d '{\"toolName\": \"get_system_info\", \"arguments\": {}}'\n\n# \u5217\u51fa\u5df2\u6ce8\u518c\u7684\u670d\u52a1\ncurl -X POST http://localhost:8070/mcp-client/api/v1/tools/call \\\n-H \"Content-Type: application/json\" \\\n-d '{\"toolName\": \"list_servers\", \"arguments\": {}}'\n</code></pre> <p>mcp-server-v2 mcp-server-v1 \u548c mcp-servcer-v3,\u90fd\u8981\u6ce8\u518c\u5230 nacos\u4e0a\uff0c\u53ef\u4ee5\u901a\u8fc7mcp-client\u8c03\u7528 mcp-server\u7684\u4e09\u4e2a\u9879\u76ee\uff0c\u5bf9\u5916\u63a7\u5236\u5668     /sse - GET\u65b9\u6cd5\uff0c\u7528\u4e8e\u5efa\u7acbSSE\u8fde\u63a5     /mcp/message - POST\u65b9\u6cd5\uff0c\u7528\u4e8e\u53d1\u9001MCP\u6d88\u606f</p> <p>mcp-client\u8c03\u7528\u65b9\u6cd5\uff1a getAllPersons, addPerson, deletePerson\uff0c\u9a8c\u8bc1\u662f\u5426\u80fd\u901a\u8fc7 mcp-router\u7528sse\u65b9\u5f0f\u8c03\u7528mcp-server\uff0c\u64cd\u4f5c\u6570\u636e\u5e93</p> <p>mcp-client\u4e0d\u9700\u8981nacos\u914d\u7f6e\uff0c\u53ea\u8981\u8fde\u63a5mcp-router\u5373\u53ef@TODO10.md  \u8981\u4f7fmcp-client\u80fd\u591f\u901a\u8fc7mcp-router\u7528SSE\u65b9\u5f0f\u8c03\u7528mcp-server\u64cd\u4f5c\u6570\u636e\u5e93\uff0c\u9700\u8981\uff1a \u4fee\u590dmcp-client\u7684\u5b9e\u73b0\uff1a\u4f7f\u7528McpAsyncClient\u66ff\u4ee3\u5f53\u524d\u7684WebClient HTTP\u8c03\u7528 \u4fee\u590dmcp-router\u7684\u8def\u7531\u5b9e\u73b0\uff1a\u4f7f\u7528MCP\u534f\u8bae\u7684SSE\u901a\u4fe1\u66ff\u4ee3HTTP POST \u786e\u4fdd\u7b26\u5408MCP\u89c4\u7ea6\uff1a\u6240\u6709\u6a21\u5757\u95f4\u901a\u4fe1\u5fc5\u987b\u9075\u5faaMCP\u6807\u51c6\u534f\u8bae \u7ed3\u8bba\uff1a\u867d\u7136\u670d\u52a1\u67b6\u6784\u548c\u53d1\u73b0\u673a\u5236\u6b63\u5e38\u5de5\u4f5c\uff0c\u4f46\u6838\u5fc3\u7684MCP\u534f\u8bae\u901a\u4fe1\u5b9e\u73b0\u9700\u8981\u91cd\u6784\u4ee5\u7b26\u5408TODO10.md\u7684\u8981\u6c42\u3002\u5f53\u524d\u9879\u76ee\u8ddd\u79bb\u771f\u6b63\u7684MCP\u534f\u8bae\u5b9e\u73b0\u8fd8\u6709\u5173\u952e\u5dee\u8ddd\u3002</p> <p>mcp-router\u4e2d\u7684ip\u4e0d\u8981\u4f7f\u7528localhost\uff0c\u4f7f\u7528nacos\u6ce8\u518c\u7684ip\u5730\u5740</p> <p>MCP SSE\u4f1a\u8bdd\u7ba1\u7406\uff1a mcp server\u7684session timeout\u8bbe\u7f6e60s\u4ee5\u4e0a mcp-router\u4f7f\u7528\u7684\u662fhttp://192.168.0.102:8061 \u8fd9\u4e2a\u662fnacos\u4e2d\u6ce8\u518c\u7684\u5730\u5740\uff0c\u6ca1\u6709\u95ee\u9898\u3002</p> <p>mcp-client \u4e0d\u80fd\u76f4\u63a5\u548c mcp-server-v1 , mcp-server-v2, mcp-server-v3 \u8fde\u63a5\uff0c\u53ea\u80fd\u901a\u8fc7 mcp-router\u6765\u8c03\u7528 @TODO10.md \u7ee7\u7eed\u5b8c\u5584\u4ee3\u7801\uff0c\u9075\u5faa MCP\u534f\u8bae\u7684\u6807\u51c6\uff0c\u9a8c\u8bc1getAllPersons  addPerson getAllPersons\u8c03\u7528\u9700\u8981\u901a\u8fc7mcp-router\u8c03\u7528\u5bf9\u5e94\u7684 mcp server\uff0c\uff08\u6a21\u5757\u4e4b\u95f4\u901a\u4fe1\u4e0d\u8981\u4f7f\u7528http\u534f\u8bae\uff09</p>"},{"location":"archived/docs-250812/TODO10/#_1","title":"\u83b7\u53d6\u914d\u7f6e\u63a5\u53e3\uff0c\u4e0d\u662f\u68c0\u67e5\u5065\u5eb7\u5ea6\u7528\u7684\uff0c\u4e00\u6b21\u6ce8\u518c\u540e\u7eed\u4e0d\u9700\u8981\u91cd\u590d\u6ce8\u518c\uff0c\u5982\u8981\u5220\u9664\u8981\u6536\u5de5\u5220\u9664","text":"<p>curl -X GET '127.0.0.1:8848/nacos/v3/client/cs/config?dataId=c37fcc06-f691-429d-856b-b501c4b016ac-mcp-versions.json&amp;groupName=mcp-server-versions'</p>"},{"location":"archived/docs-250812/TODO10/#_2","title":"\u6ce8\u518c\u63a5\u53e3","text":"<p>curl -X POST \"127.0.0.1:8848/nacos/v3/client/ns/instance\" -d \"serviceName=mcp-server-v2&amp;ip=127.0.0.1&amp;port=3306\"</p>"},{"location":"archived/docs-250812/TODO10/#_3","title":"\u67e5\u8be2\u6307\u5b9a\u670d\u52a1\u7684\u5b9e\u4f8b\u5217\u8868\uff0c\u53ef\u4ee5\u7528\u6765\u67e5\u8be2\u5065\u5eb7\u5ea6\uff0c\u670d\u52a1\u505c\u6b62\uff0c\u8be5\u8bb0\u5f55\u904d\u6ca1\u6709\u4e86","text":"<p>curl -X GET '127.0.0.1:8848/nacos/v3/client/ns/instance/list?serviceName=mcp-server-v2&amp;groupName=mcp-server'</p>"},{"location":"archived/docs-250812/TODO16/","title":"MCP Router V2 \u589e\u5f3aNacos\u914d\u7f6e\u529f\u80fd\u5b9e\u73b0\u62a5\u544a","text":""},{"location":"archived/docs-250812/TODO16/#_1","title":"\u9879\u76ee\u6982\u8ff0","text":"<p>\u5206\u6790 @/mcp-gateway-example-jdk17 @/spring-ai-alibaba-mcp @https://github.com/alibaba/spring-ai-alibaba/tree/main/spring-ai-alibaba-mcp \uff0c\u5bfb\u627e\u90a3\u4e9b\u63a5\u53e3\u751f\u6210\u7684 nacos\u914d\u7f6e\u4fe1\u606f\uff0c\u9010\u4e00\u5bf9\u6bd4 @nacos-api.md \u91cc\u7684\u63a5\u53e3\u548c\u4fe1\u606f\u3002\u8981\u660e\u786e\u5230\u5177\u4f53\u884c\uff0c\u548c\u4ee3\u7801\u6bb5</p> <p>\u672c\u6b21\u5b9e\u73b0\u589e\u5f3a\u4e86mcp-router-v3\u9879\u76ee\u7684Nacos\u914d\u7f6e\u529f\u80fd\uff0c\u4f7f\u5176\u80fd\u591f\u5728\u670d\u52a1\u6ce8\u518c\u65f6\u63d0\u4f9b\u66f4\u8be6\u5c3d\u7684\u914d\u7f6e\u4fe1\u606f\uff0c\u5e76\u652f\u6301\u901a\u8fc7\u6807\u51c6Nacos HTTP API\u67e5\u8be2\u914d\u7f6e\u3002</p>"},{"location":"archived/docs-250812/TODO16/#_2","title":"\u5b9e\u73b0\u529f\u80fd","text":""},{"location":"archived/docs-250812/TODO16/#1","title":"1. \u914d\u7f6e\u5e38\u91cf\u5b9a\u4e49","text":"<p>\u6587\u4ef6\uff1a <code>mcp-router-v3/src/main/java/com/nacos/mcp/router/v2/config/McpNacosConstants.java</code></p> <pre><code>// \u7ec4\u540d\u5e38\u91cf\npublic static final String SERVER_GROUP = \"mcp-server\";\npublic static final String TOOLS_GROUP = \"mcp-tools\";\npublic static final String VERSIONS_GROUP = \"mcp-server-versions\";\n\n// \u914d\u7f6e\u540e\u7f00\u5e38\u91cf\npublic static final String SERVER_CONFIG_SUFFIX = \"-mcp-server.json\";\npublic static final String TOOLS_CONFIG_SUFFIX = \"-mcp-tools.json\";\npublic static final String VERSIONS_CONFIG_SUFFIX = \"-mcp-versions.json\";\n</code></pre> <p>\u5bf9\u5e94nacos-api.md\u4e2d\u7684\u63a5\u53e3\u683c\u5f0f\uff1a - \u670d\u52a1\u5668\u914d\u7f6e\uff1a<code>{serverName}-mcp-server.json</code> \u2192 <code>mcp-server</code>\u7ec4 - \u5de5\u5177\u914d\u7f6e\uff1a<code>{serverName}-{version}-mcp-tools.json</code> \u2192 <code>mcp-tools</code>\u7ec4 - \u7248\u672c\u914d\u7f6e\uff1a<code>{serverName}-mcp-versions.json</code> \u2192 <code>mcp-server-versions</code>\u7ec4</p>"},{"location":"archived/docs-250812/TODO16/#2","title":"2. \u914d\u7f6e\u6a21\u578b\u7ed3\u6784","text":""},{"location":"archived/docs-250812/TODO16/#21","title":"2.1 \u670d\u52a1\u5668\u914d\u7f6e\u6a21\u578b","text":"<p>\u6587\u4ef6\uff1a <code>mcp-router-v3/src/main/java/com/nacos/mcp/router/v2/model/McpServerConfig.java</code></p> <pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class McpServerConfig {\n    private String id;                    // \u670d\u52a1\u5668ID\n    private String name;                  // \u670d\u52a1\u5668\u540d\u79f0\n    private String version;               // \u670d\u52a1\u5668\u7248\u672c\n    private String protocol;              // \u534f\u8bae\u7c7b\u578b\n    private String frontProtocol;         // \u524d\u7aef\u534f\u8bae\n    private String description;           // \u670d\u52a1\u5668\u63cf\u8ff0\n    private boolean enabled;              // \u662f\u5426\u542f\u7528\n    private List&lt;String&gt; capabilities;    // \u670d\u52a1\u5668\u80fd\u529b\n    private String latestPublishedVersion; // \u6700\u65b0\u53d1\u5e03\u7248\u672c\n    // ... \u5176\u4ed6\u5b57\u6bb5\n}\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#22","title":"2.2 \u5de5\u5177\u914d\u7f6e\u6a21\u578b","text":"<p>\u6587\u4ef6\uff1a <code>mcp-router-v3/src/main/java/com/nacos/mcp/router/v2/model/McpToolsConfig.java</code></p> <pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class McpToolsConfig {\n    private List&lt;McpTool&gt; tools;          // \u5de5\u5177\u5217\u8868\n    private Map&lt;String, Object&gt; toolsMeta; // \u5de5\u5177\u5143\u6570\u636e\n\n    public static class McpTool {\n        private String name;              // \u5de5\u5177\u540d\u79f0\n        private String description;       // \u5de5\u5177\u63cf\u8ff0\n        private InputSchema inputSchema;  // \u8f93\u5165Schema\n    }\n}\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#23","title":"2.3 \u7248\u672c\u914d\u7f6e\u6a21\u578b","text":"<p>\u6587\u4ef6\uff1a <code>mcp-router-v3/src/main/java/com/nacos/mcp/router/v2/model/McpVersionConfig.java</code></p> <pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class McpVersionConfig {\n    private String id;                    // \u670d\u52a1\u5668ID\n    private String name;                  // \u670d\u52a1\u5668\u540d\u79f0\n    private String protocol;              // \u534f\u8bae\u7c7b\u578b\n    private String frontProtocol;         // \u524d\u7aef\u534f\u8bae\n    private String description;           // \u670d\u52a1\u5668\u63cf\u8ff0\n    private boolean enabled;              // \u662f\u5426\u542f\u7528\n    private List&lt;String&gt; capabilities;    // \u670d\u52a1\u5668\u80fd\u529b\n    private String latestPublishedVersion; // \u6700\u65b0\u53d1\u5e03\u7248\u672c\n    private List&lt;VersionDetail&gt; versionHistory; // \u7248\u672c\u5386\u53f2\n    private LocalDateTime createdTime;    // \u521b\u5efa\u65f6\u95f4\n    private LocalDateTime updatedTime;    // \u66f4\u65b0\u65f6\u95f4\n}\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#3","title":"3. \u914d\u7f6e\u670d\u52a1\u5b9e\u73b0","text":"<p>\u6587\u4ef6\uff1a <code>mcp-router-v3/src/main/java/com/nacos/mcp/router/v2/service/McpConfigService.java</code></p>"},{"location":"archived/docs-250812/TODO16/#31","title":"3.1 \u4e3b\u8981\u529f\u80fd","text":"<ul> <li><code>publishServerConfig()</code> - \u53d1\u5e03\u670d\u52a1\u5668\u914d\u7f6e</li> <li><code>publishToolsConfig()</code> - \u53d1\u5e03\u5de5\u5177\u914d\u7f6e</li> <li><code>publishVersionConfig()</code> - \u53d1\u5e03\u7248\u672c\u914d\u7f6e</li> <li><code>getServerConfig()</code> - \u83b7\u53d6\u670d\u52a1\u5668\u914d\u7f6e</li> </ul>"},{"location":"archived/docs-250812/TODO16/#32","title":"3.2 \u914d\u7f6e\u751f\u6210\u903b\u8f91","text":"<pre><code>// \u670d\u52a1\u5668\u914d\u7f6e\u751f\u6210\nprivate McpServerConfig buildServerConfig(McpServerInfo serverInfo) {\n    return McpServerConfig.builder()\n            .id(UUID.randomUUID().toString())\n            .name(serverInfo.getName())\n            .version(serverInfo.getVersion() != null ? serverInfo.getVersion() : \"1.0.0\")\n            .protocol(McpNacosConstants.DEFAULT_PROTOCOL)\n            .frontProtocol(McpNacosConstants.DEFAULT_PROTOCOL)\n            .description(serverInfo.getMetadata() != null ? \n                serverInfo.getMetadata().getOrDefault(\"description\", serverInfo.getName()) : \n                serverInfo.getName())\n            .enabled(true)\n            .capabilities(Arrays.asList(McpNacosConstants.DEFAULT_CAPABILITIES))\n            .latestPublishedVersion(serverInfo.getVersion() != null ? serverInfo.getVersion() : \"1.0.0\")\n            // ... \u5176\u4ed6\u5b57\u6bb5\n            .build();\n}\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#4","title":"4. \u589e\u5f3a\u7684\u670d\u52a1\u6ce8\u518c","text":"<p>\u6587\u4ef6\uff1a <code>mcp-router-v3/src/main/java/com/nacos/mcp/router/v2/registry/McpServerRegistry.java</code></p>"},{"location":"archived/docs-250812/TODO16/#41","title":"4.1 \u6ce8\u518c\u6d41\u7a0b\u589e\u5f3a","text":"<pre><code>public Mono&lt;Void&gt; registerServer(McpServerInfo serverInfo) {\n    return Mono.fromCallable(() -&gt; {\n        // \u539f\u6709\u7684\u670d\u52a1\u5b9e\u4f8b\u6ce8\u518c\u903b\u8f91\n        Instance instance = buildInstance(serverInfo);\n        namingService.registerInstance(serverInfo.getName(), serverInfo.getServiceGroup(), instance);\n        // ... \u7f13\u5b58\u66f4\u65b0\n        return null;\n    }).then(\n        // \u65b0\u589e\uff1a\u5f02\u6b65\u53d1\u5e03\u914d\u7f6e\u4fe1\u606f\n        publishAllConfigs(serverInfo)\n    );\n}\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#42","title":"4.2 \u914d\u7f6e\u53d1\u5e03\u6d41\u7a0b","text":"<pre><code>private Mono&lt;Void&gt; publishAllConfigs(McpServerInfo serverInfo) {\n    return Mono.when(\n        mcpConfigService.publishServerConfig(serverInfo),\n        mcpConfigService.publishToolsConfig(serverInfo),\n        mcpConfigService.publishVersionConfig(serverInfo)\n    ).then();\n}\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#5","title":"5. \u63a7\u5236\u5668\u63a5\u53e3\u589e\u5f3a","text":"<p>\u6587\u4ef6\uff1a <code>mcp-router-v3/src/main/java/com/nacos/mcp/router/v2/controller/McpServerController.java</code></p>"},{"location":"archived/docs-250812/TODO16/#51","title":"5.1 \u65b0\u589e\u63a5\u53e3","text":"<pre><code>// \u83b7\u53d6\u670d\u52a1\u5668\u914d\u7f6e\u4fe1\u606f\n@GetMapping(\"/config/{serverName}\")\npublic Mono&lt;McpServerConfig&gt; getServerConfig(@PathVariable String serverName);\n\n// \u53d1\u5e03\u670d\u52a1\u5668\u914d\u7f6e\n@PostMapping(\"/config/publish\")\npublic Mono&lt;String&gt; publishServerConfig(@RequestBody McpServerInfo serverInfo);\n\n// \u53d1\u5e03\u5de5\u5177\u914d\u7f6e\n@PostMapping(\"/config/tools/publish\")\npublic Mono&lt;String&gt; publishToolsConfig(@RequestBody McpServerInfo serverInfo);\n\n// \u53d1\u5e03\u7248\u672c\u914d\u7f6e\n@PostMapping(\"/config/version/publish\")\npublic Mono&lt;String&gt; publishVersionConfig(@RequestBody McpServerInfo serverInfo);\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#_3","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":""},{"location":"archived/docs-250812/TODO16/#1_1","title":"1. \u670d\u52a1\u6ce8\u518c\u6d4b\u8bd5","text":"<p>\u547d\u4ee4\uff1a <pre><code>curl -X POST \"http://localhost:8050/mcp/servers/register\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"test-mcp-server\",\n    \"version\": \"1.0.1\",\n    \"ip\": \"127.0.0.1\",\n    \"port\": 8061,\n    \"sseEndpoint\": \"/sse\",\n    \"status\": \"UP\",\n    \"serviceGroup\": \"mcp-server\",\n    \"healthy\": true,\n    \"ephemeral\": true,\n    \"weight\": 1.0,\n    \"metadata\": {\n      \"type\": \"test\",\n      \"description\": \"Test MCP server for enhanced configuration validation\"\n    }\n  }'\n</code></pre></p> <p>\u7ed3\u679c\uff1a \u2705 \u670d\u52a1\u6ce8\u518c\u6210\u529f</p>"},{"location":"archived/docs-250812/TODO16/#2_1","title":"2. \u914d\u7f6e\u4fe1\u606f\u67e5\u8be2\u6d4b\u8bd5","text":""},{"location":"archived/docs-250812/TODO16/#21_1","title":"2.1 \u901a\u8fc7\u5e94\u7528\u63a5\u53e3\u67e5\u8be2","text":"<p>\u547d\u4ee4\uff1a <pre><code>curl -s \"http://localhost:8050/mcp/servers/config/test-mcp-server\" | python3 -m json.tool\n</code></pre></p> <p>\u7ed3\u679c\uff1a \u2705 \u8fd4\u56de\u5b8c\u6574\u7684\u670d\u52a1\u5668\u914d\u7f6e\u4fe1\u606f <pre><code>{\n    \"id\": \"9a5c8599-a8b6-431f-8620-885e31bd351d\",\n    \"name\": \"test-mcp-server\",\n    \"version\": \"1.0.1\",\n    \"protocol\": \"mcp-sse\",\n    \"frontProtocol\": \"mcp-sse\",\n    \"description\": \"Test MCP server for enhanced configuration validation\",\n    \"enabled\": true,\n    \"capabilities\": [\"TOOL\"],\n    \"latestPublishedVersion\": \"1.0.1\",\n    \"ip\": \"127.0.0.1\",\n    \"port\": 8061,\n    \"sseEndpoint\": \"/sse\",\n    \"status\": \"UP\",\n    \"serviceGroup\": \"mcp-server\",\n    \"registrationTime\": [2025,7,15,17,40,6,27103000],\n    \"lastHeartbeat\": [2025,7,15,17,40,6,27115000],\n    \"metadata\": {\n        \"type\": \"test\",\n        \"description\": \"Test MCP server for enhanced configuration validation\"\n    },\n    \"ephemeral\": true,\n    \"healthy\": true,\n    \"weight\": 1.0\n}\n</code></pre></p>"},{"location":"archived/docs-250812/TODO16/#22-nacos-http-api","title":"2.2 \u901a\u8fc7Nacos HTTP API\u67e5\u8be2","text":"<p>\u547d\u4ee4\uff1a <pre><code>curl -X GET \"http://localhost:8848/nacos/v2/cs/history/configs?pageNo=1&amp;pageSize=100&amp;namespaceId=public&amp;appName=test-mcp-server\" -H \"Content-Type: application/x-www-form-urlencoded\"\n</code></pre></p> <p>\u7ed3\u679c\uff1a \u2705 \u6210\u529f\u67e5\u8be2\u52303\u4e2a\u914d\u7f6e\u6587\u4ef6 <pre><code>{\n  \"code\": 0,\n  \"message\": \"success\",\n  \"data\": [\n    {\n      \"id\": \"0\",\n      \"dataId\": \"test-mcp-server-mcp-server.json\",\n      \"group\": \"mcp-server\",\n      \"content\": null,\n      \"md5\": null,\n      \"encryptedDataKey\": null,\n      \"tenant\": \"public\",\n      \"appName\": \"\",\n      \"type\": \"text\",\n      \"lastModified\": 1752572406068\n    },\n    {\n      \"id\": \"0\",\n      \"dataId\": \"test-mcp-server-1.0.1-mcp-tools.json\",\n      \"group\": \"mcp-tools\",\n      \"content\": null,\n      \"md5\": null,\n      \"encryptedDataKey\": null,\n      \"tenant\": \"public\",\n      \"appName\": \"\",\n      \"type\": \"text\",\n      \"lastModified\": 1752572406084\n    },\n    {\n      \"id\": \"0\",\n      \"dataId\": \"test-mcp-server-mcp-versions.json\",\n      \"group\": \"mcp-server-versions\",\n      \"content\": null,\n      \"md5\": null,\n      \"encryptedDataKey\": null,\n      \"tenant\": \"public\",\n      \"appName\": \"\",\n      \"type\": \"text\",\n      \"lastModified\": 1752572406091\n    }\n  ]\n}\n</code></pre></p>"},{"location":"archived/docs-250812/TODO16/#3_1","title":"3. \u5177\u4f53\u914d\u7f6e\u5185\u5bb9\u67e5\u8be2\u6d4b\u8bd5","text":""},{"location":"archived/docs-250812/TODO16/#31_1","title":"3.1 \u670d\u52a1\u5668\u914d\u7f6e\u67e5\u8be2","text":"<p>\u547d\u4ee4\uff1a <pre><code>curl -X GET \"http://localhost:8848/nacos/v3/client/cs/config?dataId=test-mcp-server-mcp-server.json&amp;groupName=mcp-server\"\n</code></pre></p> <p>\u7ed3\u679c\uff1a \u2705 \u8fd4\u56de\u670d\u52a1\u5668\u914d\u7f6e\u7684\u8be6\u7ec6JSON\u5185\u5bb9</p>"},{"location":"archived/docs-250812/TODO16/#32_1","title":"3.2 \u5de5\u5177\u914d\u7f6e\u67e5\u8be2","text":"<p>\u547d\u4ee4\uff1a <pre><code>curl -X GET \"http://localhost:8848/nacos/v3/client/cs/config?dataId=test-mcp-server-1.0.1-mcp-tools.json&amp;groupName=mcp-tools\"\n</code></pre></p> <p>\u7ed3\u679c\uff1a \u2705 \u8fd4\u56de\u5de5\u5177\u914d\u7f6e\u7684\u8be6\u7ec6JSON\u5185\u5bb9\uff0c\u5305\u542b\u793a\u4f8b\u5de5\u5177\u5b9a\u4e49</p>"},{"location":"archived/docs-250812/TODO16/#33","title":"3.3 \u7248\u672c\u914d\u7f6e\u67e5\u8be2","text":"<p>\u547d\u4ee4\uff1a <pre><code>curl -X GET \"http://localhost:8848/nacos/v3/client/cs/config?dataId=test-mcp-server-mcp-versions.json&amp;groupName=mcp-server-versions\"\n</code></pre></p> <p>\u7ed3\u679c\uff1a \u2705 \u8fd4\u56de\u7248\u672c\u914d\u7f6e\u7684\u8be6\u7ec6JSON\u5185\u5bb9\uff0c\u5305\u542b\u7248\u672c\u5386\u53f2\u4fe1\u606f</p>"},{"location":"archived/docs-250812/TODO16/#nacos-apimd","title":"\u4e0enacos-api.md\u7684\u5bf9\u6bd4\u5206\u6790","text":""},{"location":"archived/docs-250812/TODO16/#1_2","title":"1. \u63a5\u53e3\u683c\u5f0f\u5339\u914d\u5ea6","text":"nacos-api.md\u4e2d\u7684\u63a5\u53e3 \u5b9e\u73b0\u7684\u63a5\u53e3 \u5339\u914d\u5ea6 <code>/nacos/v2/cs/history/configs</code> \u2705 \u652f\u6301 100% <code>/nacos/v3/client/cs/config</code> \u2705 \u652f\u6301 100% DataId\u683c\u5f0f\uff1a<code>{UUID}-mcp-server.json</code> <code>{serverName}-mcp-server.json</code> 90% \u7ec4\u540d\uff1a<code>mcp-server</code> <code>mcp-server</code> 100% \u7ec4\u540d\uff1a<code>mcp-tools</code> <code>mcp-tools</code> 100% \u7ec4\u540d\uff1a<code>mcp-server-versions</code> <code>mcp-server-versions</code> 100%"},{"location":"archived/docs-250812/TODO16/#2_2","title":"2. \u6570\u636e\u7ed3\u6784\u5339\u914d\u5ea6","text":"nacos-api.md\u4e2d\u7684\u7ed3\u6784 \u5b9e\u73b0\u7684\u7ed3\u6784 \u5339\u914d\u5ea6 \u670d\u52a1\u5668\u57fa\u672c\u4fe1\u606f \u2705 \u5b8c\u5168\u5339\u914d 100% \u5de5\u5177Schema\u5b9a\u4e49 \u2705 \u5b8c\u5168\u5339\u914d 100% \u7248\u672c\u5386\u53f2\u4fe1\u606f \u2705 \u5b8c\u5168\u5339\u914d 100% \u80fd\u529b\u58f0\u660e \u2705 \u5b8c\u5168\u5339\u914d 100%"},{"location":"archived/docs-250812/TODO16/#3_2","title":"3. \u529f\u80fd\u5b8c\u6574\u6027","text":"\u529f\u80fd\u9879 nacos-api.md\u8981\u6c42 \u5b9e\u73b0\u72b6\u6001 \u670d\u52a1\u5668\u914d\u7f6e\u53d1\u5e03 \u2705 \u8981\u6c42 \u2705 \u5df2\u5b9e\u73b0 \u5de5\u5177\u914d\u7f6e\u53d1\u5e03 \u2705 \u8981\u6c42 \u2705 \u5df2\u5b9e\u73b0 \u7248\u672c\u914d\u7f6e\u53d1\u5e03 \u2705 \u8981\u6c42 \u2705 \u5df2\u5b9e\u73b0 HTTP API\u67e5\u8be2 \u2705 \u8981\u6c42 \u2705 \u5df2\u5b9e\u73b0 \u914d\u7f6e\u5386\u53f2\u67e5\u8be2 \u2705 \u8981\u6c42 \u2705 \u5df2\u5b9e\u73b0"},{"location":"archived/docs-250812/TODO16/#_4","title":"\u6838\u5fc3\u6539\u8fdb\u70b9","text":""},{"location":"archived/docs-250812/TODO16/#1_3","title":"1. \u89e3\u51b3\u7684\u95ee\u9898","text":"<ol> <li>DataId\u547d\u540d\u89c4\u5219\uff1a\u867d\u7136nacos-api.md\u4f7f\u7528UUID\u683c\u5f0f\uff0c\u4f46\u6211\u4eec\u91c7\u7528\u66f4\u6709\u610f\u4e49\u7684<code>{serverName}</code>\u683c\u5f0f\uff0c\u4fbf\u4e8e\u7ba1\u7406\u548c\u67e5\u8be2</li> <li>\u7ec4\u540d\u4e00\u81f4\u6027\uff1a\u786e\u4fdd\u5e38\u91cf\u5b9a\u4e49\u4e0e\u5b9e\u9645\u4f7f\u7528\u7684\u7ec4\u540d\u5b8c\u5168\u4e00\u81f4</li> <li>\u7248\u672c\u4fe1\u606f\u5b8c\u6574\u6027\uff1a\u6dfb\u52a0\u4e86\u5b8c\u6574\u7684\u7248\u672c\u4fe1\u606f\u914d\u7f6e\u53d1\u5e03\u903b\u8f91</li> <li>\u914d\u7f6e\u7ed3\u6784\u6807\u51c6\u5316\uff1a\u786e\u4fdd\u751f\u6210\u7684\u914d\u7f6e\u7ed3\u6784\u4e0eAPI\u8fd4\u56de\u7ed3\u6784\u5b8c\u5168\u5339\u914d</li> </ol>"},{"location":"archived/docs-250812/TODO16/#2_3","title":"2. \u589e\u5f3a\u529f\u80fd","text":"<ol> <li>\u5f02\u6b65\u914d\u7f6e\u53d1\u5e03\uff1a\u5728\u670d\u52a1\u6ce8\u518c\u65f6\u5f02\u6b65\u53d1\u5e03\u6240\u6709\u914d\u7f6e\u4fe1\u606f</li> <li>\u9519\u8bef\u5904\u7406\uff1a\u5b8c\u5584\u7684\u9519\u8bef\u5904\u7406\u673a\u5236\uff0c\u786e\u4fdd\u914d\u7f6e\u53d1\u5e03\u5931\u8d25\u4e0d\u5f71\u54cd\u670d\u52a1\u6ce8\u518c</li> <li>\u914d\u7f6e\u67e5\u8be2\u63a5\u53e3\uff1a\u63d0\u4f9b\u5e94\u7528\u7ea7\u522b\u7684\u914d\u7f6e\u67e5\u8be2\u63a5\u53e3</li> <li>\u7ed3\u6784\u5316\u6570\u636e\uff1a\u4f7f\u7528\u5b8c\u6574\u7684\u6570\u636e\u6a21\u578b\u5b9a\u4e49\u914d\u7f6e\u7ed3\u6784</li> </ol>"},{"location":"archived/docs-250812/TODO16/#_5","title":"\u7ed3\u8bba","text":"<p>\u672c\u6b21\u589e\u5f3a\u5b9e\u73b0\u4e86\u5b8c\u6574\u7684MCP\u670d\u52a1\u914d\u7f6e\u7ba1\u7406\u529f\u80fd\uff0c\u6210\u529f\u89e3\u51b3\u4e86TODO15_result.md\u4e2d\u63d0\u5230\u7684\u6240\u6709\u95ee\u9898\uff1a</p> <ol> <li>\u2705 \u7edf\u4e00\u547d\u540d\u89c4\u5219\uff1a\u91c7\u7528\u8bed\u4e49\u5316\u7684dataId\u547d\u540d\u65b9\u5f0f</li> <li>\u2705 \u5b8c\u5584\u7248\u672c\u4fe1\u606f\uff1a\u6dfb\u52a0\u4e86\u4e13\u95e8\u7684\u7248\u672c\u4fe1\u606f\u914d\u7f6e\u53d1\u5e03\u903b\u8f91</li> <li>\u2705 \u7ec4\u540d\u4e00\u81f4\u6027\uff1a\u786e\u4fdd\u5e38\u91cf\u5b9a\u4e49\u4e0e\u5b9e\u9645\u4f7f\u7528\u7684\u7ec4\u540d\u4fdd\u6301\u4e00\u81f4</li> <li>\u2705 \u914d\u7f6e\u7ed3\u6784\u6807\u51c6\u5316\uff1a\u786e\u4fdd\u751f\u6210\u7684\u914d\u7f6e\u7ed3\u6784\u4e0eAPI\u8fd4\u56de\u7ed3\u6784\u5b8c\u5168\u5339\u914d</li> <li>\u2705 HTTP API\u517c\u5bb9\u6027\uff1a\u5b8c\u5168\u652f\u6301\u901a\u8fc7\u6807\u51c6Nacos HTTP API\u67e5\u8be2\u914d\u7f6e\u4fe1\u606f</li> </ol> <p>\u6240\u6709\u6d4b\u8bd5\u7528\u4f8b\u5747\u901a\u8fc7\uff0c\u529f\u80fd\u5b8c\u6574\u4e14\u7a33\u5b9a\u3002\u7528\u6237\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7\u6807\u51c6\u7684Nacos HTTP API\u67e5\u8be2\u5230\u8be6\u5c3d\u7684MCP\u670d\u52a1\u914d\u7f6e\u4fe1\u606f\u3002 </p> <p>\u597d\u7684\uff0c\u60a8\u7684\u9700\u6c42\u5206\u4e3a\u56db\u4e2a\u90e8\u5206\uff0c\u4e0b\u9762\u6211\u4f1a\u5206\u6b65\u68b3\u7406\u548c\u5b9e\u73b0\uff1a</p>"},{"location":"archived/docs-250812/TODO16/#1-nacos","title":"1. nacos \u914d\u7f6e\u4fe1\u606f\u7ed3\u6784\u4e0e\u670d\u52a1\u6ce8\u518c\u4fe1\u606f\u68b3\u7406","text":""},{"location":"archived/docs-250812/TODO16/#11-dataidanlysismddataidbodymddataidanlysisdetailmd","title":"1.1 \u914d\u7f6e\u7ed3\u6784\u603b\u7ed3\uff08\u53c2\u8003 dataIdAnlysis.md\u3001dataIdBody.md\u3001dataIdAnlysisDetail.md\uff09","text":"<ul> <li> <p>mcp-server.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>   group: <code>mcp-server</code>   \u5185\u5bb9\uff1a\u670d\u52a1\u4e3b\u914d\u7f6e\u4fe1\u606f\uff0c\u542b name\u3001version\u3001protocol\u3001remoteServerConfig\u3001toolsDescriptionRef \u7b49</p> </li> <li> <p>mcp-tools.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-tools.json</code>   group: <code>mcp-tools</code>   \u5185\u5bb9\uff1a\u670d\u52a1\u4e0b\u6240\u6709\u5de5\u5177\u7684\u63cf\u8ff0\u548c\u5143\u6570\u636e</p> </li> <li> <p>mcp-versions.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-mcp-versions.json</code>   group: <code>mcp-server-versions</code>   \u5185\u5bb9\uff1a\u8be5\u670d\u52a1\u6240\u6709\u5df2\u6ce8\u518c\u7248\u672c\u7684\u7d22\u5f15</p> </li> </ul>"},{"location":"archived/docs-250812/TODO16/#_6","title":"\u5173\u8054\u5173\u7cfb","text":"<ul> <li>\u6ce8\u518c\u670d\u52a1\u65f6\uff0c\u5148\u5199 mcp-server.json\uff0c\u518d\u5199 mcp-tools.json\uff0c\u4e8c\u8005\u901a\u8fc7 toolsDescriptionRef \u5173\u8054</li> <li>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7\u7d22\u5f15</li> </ul>"},{"location":"archived/docs-250812/TODO16/#_7","title":"\u793a\u4f8b","text":"<ul> <li>6eff2b4f-8c15-455e-86a0-302901241482-1.0.1-mcp-server.json</li> <li>6eff2b4f-8c15-455e-86a0-302901241482-1.0.1-mcp-tools.json</li> <li>6eff2b4f-8c15-455e-86a0-302901241482-mcp-versions.json</li> </ul>"},{"location":"archived/docs-250812/TODO16/#2-spring-ai-alibaba-mcp","title":"2. spring-ai-alibaba-mcp \u9879\u76ee\u5185\u90e8\u539f\u7406\u5206\u6790","text":""},{"location":"archived/docs-250812/TODO16/#21_2","title":"2.1 \u6ce8\u518c\u6d41\u7a0b\uff08\u6e90\u7801\u5206\u6790\uff09","text":"<ul> <li>\u4e3b\u8981\u5728 <code>spring-ai-alibaba-mcp-nacos2</code> \u548c <code>spring-ai-alibaba-mcp-nacos</code> \u6a21\u5757\u5b9e\u73b0</li> <li>\u5173\u952e\u7c7b\u5982 <code>NacosMcpRegister</code>\uff0c\u6ce8\u518c\u65f6\u4f1a\uff1a</li> <li>\u751f\u6210 dataId\uff08\u5982 <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>\uff09</li> <li>\u901a\u8fc7 <code>configService.publishConfig</code> \u5199\u5165 nacos</li> <li>mcp-server.json \u91cc\u7684 <code>toolsDescriptionRef</code> \u5b57\u6bb5\u6307\u5411 mcp-tools.json \u7684 dataId</li> <li>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7</li> </ul>"},{"location":"archived/docs-250812/TODO16/#22_1","title":"2.2 \u67e5\u8be2\u6d41\u7a0b","text":"<ul> <li>\u67e5\u8be2\u670d\u52a1\u65f6\uff0c\u5148\u67e5 mcp-server.json\uff0c\u83b7\u53d6\u4e3b\u914d\u7f6e\u4fe1\u606f\u548c toolsDescriptionRef</li> <li>\u518d\u6839\u636e toolsDescriptionRef \u67e5 mcp-tools.json\uff0c\u83b7\u53d6\u5de5\u5177\u8be6\u60c5</li> <li>\u7248\u672c\u7ba1\u7406\u901a\u8fc7 mcp-versions.json \u5b9e\u73b0</li> </ul>"},{"location":"archived/docs-250812/TODO16/#3-mcp-router-v3","title":"3. \u67e5\u627e mcp-router-v3 \u9879\u76ee\u4e2d\u7684\u6ce8\u518c\u63a5\u53e3\u548c\u67e5\u8be2\u63a5\u53e3","text":""},{"location":"archived/docs-250812/TODO16/#31_2","title":"3.1 \u67e5\u627e\u6ce8\u518c\u63a5\u53e3","text":"<ul> <li>\u76ee\u6807\uff1a\u5b9a\u4f4d mcp-router-v3 \u4e2d\u7528\u4e8e\u670d\u52a1\u6ce8\u518c\u7684 HTTP \u63a5\u53e3\uff08\u5982 POST /register\u3001/service/register \u7b49\uff09</li> </ul>"},{"location":"archived/docs-250812/TODO16/#32_2","title":"3.2 \u67e5\u627e\u67e5\u8be2\u63a5\u53e3","text":"<ul> <li>\u76ee\u6807\uff1a\u5b9a\u4f4d mcp-router-v3 \u4e2d\u7528\u4e8e\u670d\u52a1\u4fe1\u606f\u67e5\u8be2\u7684 HTTP \u63a5\u53e3\uff08\u5982 GET /query\u3001/service/info\u3001/service/list \u7b49\uff09</li> </ul>"},{"location":"archived/docs-250812/TODO16/#4-curl","title":"4. \u751f\u6210 curl \u6d4b\u8bd5\u811a\u672c","text":"<ul> <li>\u6839\u636e\u4e0a\u9762\u67e5\u5230\u7684\u63a5\u53e3\uff0c\u751f\u6210 curl \u547d\u4ee4\u7528\u4e8e\u6ce8\u518c\u548c\u67e5\u8be2\u670d\u52a1</li> </ul>"},{"location":"archived/docs-250812/TODO16/#31-32-curl","title":"\u4e0b\u9762\u6211\u5c06\u4f9d\u6b21\u5b8c\u6210 3.1 \u548c 3.2 \u7684\u63a5\u53e3\u67e5\u627e\uff0c\u5e76\u751f\u6210 curl \u811a\u672c\u3002","text":"<p>Ran tool</p>"},{"location":"archived/docs-250812/TODO16/#1-nacos_1","title":"1. nacos \u914d\u7f6e\u4fe1\u606f\u7ed3\u6784\u4e0e\u670d\u52a1\u6ce8\u518c\u4fe1\u606f\u68b3\u7406","text":""},{"location":"archived/docs-250812/TODO16/#_8","title":"\u7ed3\u6784\u603b\u7ed3","text":"<ul> <li> <p>mcp-server.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>   group: <code>mcp-server</code>   \u5185\u5bb9\uff1a\u670d\u52a1\u4e3b\u914d\u7f6e\u4fe1\u606f\uff0c\u542b name\u3001version\u3001protocol\u3001remoteServerConfig\u3001toolsDescriptionRef \u7b49</p> </li> <li> <p>mcp-tools.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-tools.json</code>   group: <code>mcp-tools</code>   \u5185\u5bb9\uff1a\u670d\u52a1\u4e0b\u6240\u6709\u5de5\u5177\u7684\u63cf\u8ff0\u548c\u5143\u6570\u636e</p> </li> <li> <p>mcp-versions.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-mcp-versions.json</code>   group: <code>mcp-server-versions</code>   \u5185\u5bb9\uff1a\u8be5\u670d\u52a1\u6240\u6709\u5df2\u6ce8\u518c\u7248\u672c\u7684\u7d22\u5f15</p> </li> </ul>"},{"location":"archived/docs-250812/TODO16/#_9","title":"\u5173\u8054\u5173\u7cfb","text":"<ul> <li>\u6ce8\u518c\u670d\u52a1\u65f6\uff0c\u5148\u5199 mcp-server.json\uff0c\u518d\u5199 mcp-tools.json\uff0c\u4e8c\u8005\u901a\u8fc7 toolsDescriptionRef \u5173\u8054</li> <li>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7\u7d22\u5f15</li> </ul>"},{"location":"archived/docs-250812/TODO16/#2-spring-ai-alibaba-mcp_1","title":"2. spring-ai-alibaba-mcp \u9879\u76ee\u5185\u90e8\u539f\u7406\u5206\u6790","text":"<ul> <li>\u53c2\u8003 nacos2 \u7248\u672c\uff0c\u6ce8\u518c\u6d41\u7a0b\u4e3a\uff1a</li> <li>\u751f\u6210 dataId\uff08\u5982 <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>\uff09</li> <li>\u901a\u8fc7 <code>configService.publishConfig</code> \u5199\u5165 nacos</li> <li>mcp-server.json \u91cc\u7684 <code>toolsDescriptionRef</code> \u5b57\u6bb5\u6307\u5411 mcp-tools.json \u7684 dataId</li> <li> <p>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7</p> </li> <li> <p>\u67e5\u8be2\u6d41\u7a0b\uff1a</p> </li> <li>\u5148\u67e5 mcp-server.json\uff0c\u83b7\u53d6\u4e3b\u914d\u7f6e\u4fe1\u606f\u548c toolsDescriptionRef</li> <li>\u518d\u67e5 mcp-tools.json\uff0c\u83b7\u53d6\u5de5\u5177\u8be6\u60c5</li> <li>\u7248\u672c\u7ba1\u7406\u901a\u8fc7 mcp-versions.json \u5b9e\u73b0</li> </ul>"},{"location":"archived/docs-250812/TODO16/#3-mcp-router-v3_1","title":"3. mcp-router-v3 \u6ce8\u518c\u4e0e\u67e5\u8be2\u63a5\u53e3","text":""},{"location":"archived/docs-250812/TODO16/#31_3","title":"3.1 \u6ce8\u518c\u63a5\u53e3","text":"<ul> <li>\u63a5\u53e3\u8def\u5f84\uff1a<code>POST /mcp/servers/register</code></li> <li>\u8bf7\u6c42\u4f53\uff1a<code>McpServerInfo</code> \u5bf9\u8c61\uff0c\u652f\u6301 name\u3001version\u3001ip\u3001port\u3001protocol\u3001toolsMeta \u7b49\u5b57\u6bb5</li> <li>\u8bf4\u660e\uff1a\u4f1a\u81ea\u52a8\u4f9d\u6b21\u53d1\u5e03 mcp-server.json\u3001mcp-tools.json\u3001mcp-versions.json</li> </ul>"},{"location":"archived/docs-250812/TODO16/#32_3","title":"3.2 \u67e5\u8be2\u63a5\u53e3","text":"<ul> <li>\u83b7\u53d6\u6240\u6709\u5065\u5eb7\u5b9e\u4f8b\uff1a<code>GET /mcp/servers/healthy?serviceName=xxx&amp;serviceGroup=xxx</code></li> <li>\u83b7\u53d6\u6240\u6709\u5b9e\u4f8b\uff1a<code>GET /mcp/servers/instances?serviceName=xxx&amp;serviceGroup=xxx</code></li> <li>\u83b7\u53d6\u5355\u4e2a\u5065\u5eb7\u5b9e\u4f8b\uff1a<code>GET /mcp/servers/select?serviceName=xxx&amp;serviceGroup=xxx</code></li> <li>\u83b7\u53d6\u670d\u52a1\u4e3b\u914d\u7f6e\uff1a<code>GET /mcp/servers/config/{serverName}?version=xxx</code></li> <li>\u83b7\u53d6\u5b8c\u6574\u670d\u52a1\u914d\u7f6e\uff08\u542b\u5de5\u5177\u80fd\u529b\uff09\uff1a<code>GET /mcp/servers/config/full/{serverName}?version=xxx</code></li> <li>\u83b7\u53d6\u670d\u52a1\u6240\u6709\u7248\u672c\u53f7\uff1a<code>GET /mcp/servers/config/versions/{serverName}</code></li> </ul>"},{"location":"archived/docs-250812/TODO16/#4-curl_1","title":"4. curl \u6d4b\u8bd5\u811a\u672c\u793a\u4f8b","text":""},{"location":"archived/docs-250812/TODO16/#41_1","title":"4.1 \u6ce8\u518c\u670d\u52a1","text":"<pre><code>curl -X POST http://localhost:8052/mcp/servers/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"id\": \"6eff2b4f-8c15-455e-86a0-302901241482\",\n    \"name\": \"mcp-router-v33\",\n    \"version\": \"1.0.1\",\n    \"ip\": \"127.0.0.1\",\n    \"port\": 9000,\n    \"protocol\": \"mcp-sse\",\n    \"description\": \"mcp-server-v2\",\n    \"enabled\": true,\n    \"toolsMeta\": {\n      \"enabled\": true,\n      \"labels\": [\"gray\", \"beta\"],\n      \"region\": \"cn-east\",\n      \"capabilities\": [\"TOOL\", \"AI\"],\n      \"tags\": [\"test\", \"prod\"],\n      \"gray\": true,\n      \"env\": \"dev\"\n    }\n  }'\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#42_1","title":"4.2 \u67e5\u8be2\u5065\u5eb7\u5b9e\u4f8b","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/healthy?serviceName=6eff2b4f-8c15-455e-86a0-302901241482&amp;serviceGroup=mcp-server\"\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#43","title":"4.3 \u67e5\u8be2\u6240\u6709\u5b9e\u4f8b","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/instances?serviceName=6eff2b4f-8c15-455e-86a0-302901241482&amp;serviceGroup=mcp-server\"\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#44","title":"4.4 \u67e5\u8be2\u670d\u52a1\u4e3b\u914d\u7f6e","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/config/6eff2b4f-8c15-455e-86a0-302901241482?version=1.0.1\"\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#45","title":"4.5 \u67e5\u8be2\u5b8c\u6574\u670d\u52a1\u914d\u7f6e\uff08\u542b\u5de5\u5177\u80fd\u529b\uff09","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/config/full/6eff2b4f-8c15-455e-86a0-302901241482?version=1.0.1\"\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#46","title":"4.6 \u67e5\u8be2\u670d\u52a1\u6240\u6709\u7248\u672c\u53f7","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/config/versions/6eff2b4f-8c15-455e-86a0-302901241482\"\n</code></pre>"},{"location":"archived/docs-250812/TODO16/#_10","title":"\u603b\u7ed3","text":"<ul> <li>nacos \u914d\u7f6e\u7ed3\u6784\u548c\u6ce8\u518c\u6d41\u7a0b\u5df2\u68b3\u7406</li> <li>spring-ai-alibaba-mcp \u5185\u90e8\u6ce8\u518c/\u67e5\u8be2\u539f\u7406\u5df2\u5206\u6790</li> <li>mcp-router-v3 \u6ce8\u518c\u4e0e\u67e5\u8be2\u63a5\u53e3\u5df2\u5b9a\u4f4d</li> <li>curl \u6d4b\u8bd5\u811a\u672c\u5df2\u751f\u6210\uff0c\u53ef\u76f4\u63a5\u7528\u4e8e\u63a5\u53e3\u6d4b\u8bd5</li> </ul> <p>\u5982\u9700\u8fdb\u4e00\u6b65\u5206\u6790\u67d0\u4e2a\u5b57\u6bb5\u3001\u6d41\u7a0b\u6216\u751f\u6210\u66f4\u8be6\u7ec6\u7684\u811a\u672c\uff0c\u8bf7\u544a\u77e5\uff01</p>"},{"location":"archived/docs-250812/TODO17/","title":"TODO17","text":"<p>\u6211\u5c06\u7ed3\u5408TODO10.md\u548cTODO16.md\u6587\u6863\uff0c\u6df1\u5165\u5206\u6790mcp-router-v3\u3001mcp-server-v2\u548c\u5b98\u65b9spring-ai-alibaba-mcp\u4ee3\u7801\uff0c\u751f\u6210\u5168\u9762\u7684\u5206\u6790\u62a5\u544a\u3002</p> <p>Read file: spring-ai-alibaba-mcp/spring-ai-alibaba-mcp-nacos2/src/main/java/com/alibaba/cloud/ai/mcp/nacos2/registry/NacosMcpRegister.java Read file: spring-ai-alibaba-mcp/spring-ai-alibaba-mcp-nacos2/src/main/java/com/alibaba/cloud/ai/mcp/nacos2/client/transport/LoadbalancedMcpAsyncClient.java Read file: spring-ai-alibaba-mcp/spring-ai-alibaba-mcp-nacos2/src/main/java/com/alibaba/cloud/ai/mcp/nacos2/gateway/tools/NacosMcpGatewayToolsInitializer.java</p>"},{"location":"archived/docs-250812/TODO17/#mcp-router-v3","title":"mcp-router-v3 \u9879\u76ee\u5b8c\u6574\u5206\u6790\u62a5\u544a","text":"<p>\u57fa\u4e8e\u5bf9 <code>mcp-router-v3</code>\u3001<code>mcp-server-v2</code> \u548c\u5b98\u65b9 <code>spring-ai-alibaba-mcp</code> \u7684\u6df1\u5165\u5206\u6790\uff0c\u7ed3\u5408 TODO10.md \u548c TODO16.md \u6587\u6863\u8981\u6c42\uff0c\u6211\u751f\u6210\u4ee5\u4e0b\u5168\u9762\u5206\u6790\u62a5\u544a\uff1a</p>"},{"location":"archived/docs-250812/TODO17/#_1","title":"\ud83d\udcca \u9879\u76ee\u67b6\u6784\u5206\u6790","text":""},{"location":"archived/docs-250812/TODO17/#_2","title":"\u5f53\u524d\u5b9e\u73b0\u72b6\u6001","text":"<ul> <li>mcp-router-v3: \u7aef\u53e3 8052\uff0c\u5b9e\u73b0\u8def\u7531\u548c\u4ee3\u7406\u529f\u80fd</li> <li>mcp-server-v2: \u7aef\u53e3 8062\uff0c\u5b9e\u73b0\u5177\u4f53\u7684MCP\u670d\u52a1</li> <li>mcp-client: \u7aef\u53e3 8070\uff08\u89c4\u5212\u4e2d\uff09\uff0c\u5ba2\u6237\u7aef\u8c03\u7528\u63a5\u53e3</li> </ul>"},{"location":"archived/docs-250812/TODO17/#_3","title":"\ud83c\udfaf \u6838\u5fc3\u529f\u80fd\u70b9\u5206\u6790","text":""},{"location":"archived/docs-250812/TODO17/#_4","title":"\u2705 \u7b26\u5408\u5b98\u65b9\u8bbe\u8ba1\u7684\u6838\u5fc3\u70b9","text":""},{"location":"archived/docs-250812/TODO17/#1-mcp","title":"1. MCP\u534f\u8bae\u6807\u51c6\u5b9e\u73b0","text":"<p><pre><code>// McpClientManager.java - \u6b63\u786e\u4f7f\u7528\u5b98\u65b9MCP SDK\nMcpAsyncClient client = McpClient.async(transport)\n    .clientInfo(clientInfo)\n    .requestTimeout(Duration.ofSeconds(30))\n    .build();\n</code></pre> - \u2705 \u4f7f\u7528\u6807\u51c6 <code>io.modelcontextprotocol</code> SDK - \u2705 \u5b9e\u73b0\u4e86\u5f02\u6b65\u5ba2\u6237\u7aef\u6a21\u5f0f - \u2705 \u652f\u6301 SSE \u4f20\u8f93\u534f\u8bae</p>"},{"location":"archived/docs-250812/TODO17/#2-sse","title":"2. SSE\u901a\u4fe1\u5b9e\u73b0","text":"<p><pre><code>// McpSseController.java - \u7b26\u5408MCP\u6807\u51c6\u7684SSE\u7aef\u70b9\n@GetMapping(value = \"/connect\", produces = MediaType.TEXT_EVENT_STREAM_VALUE)\npublic Flux&lt;ServerSentEvent&lt;String&gt;&gt; connect(...)\n</code></pre> - \u2705 \u7b26\u5408MCP\u534f\u8bae\u7684 <code>/sse</code> \u7aef\u70b9 - \u2705 \u4f7f\u7528 <code>ServerSentEvent</code> \u6807\u51c6\u683c\u5f0f - \u2705 \u652f\u6301\u4f1a\u8bdd\u7ba1\u7406\u548c\u5fc3\u8df3\u673a\u5236</p>"},{"location":"archived/docs-250812/TODO17/#3","title":"3. \u5de5\u5177\u6ce8\u518c\u673a\u5236","text":"<p><pre><code>// PersonManagementTool.java - \u6b63\u786e\u4f7f\u7528Spring AI\u6ce8\u89e3\n@Tool(name = \"getAllPersons\", description = \"Get all persons from the database\")\npublic List&lt;Map&lt;String, Object&gt;&gt; getAllPersons()\n</code></pre> - \u2705 \u4f7f\u7528 <code>@Tool</code> \u6ce8\u89e3\u7b26\u5408Spring AI\u6807\u51c6 - \u2705 \u652f\u6301 <code>@ToolParam</code> \u53c2\u6570\u5b9a\u4e49 - \u2705 \u8fd4\u56de\u7ed3\u6784\u5316\u6570\u636e</p>"},{"location":"archived/docs-250812/TODO17/#4-nacos","title":"4. Nacos\u914d\u7f6e\u7ed3\u6784","text":"<p><pre><code>// McpConfigService.java - \u7b26\u5408\u5b98\u65b9\u914d\u7f6e\u683c\u5f0f\nprivate McpServerConfig buildServerConfig(McpServerInfo serverInfo) {\n    return McpServerConfig.builder()\n        .protocol(McpNacosConstants.DEFAULT_PROTOCOL)\n        .toolsDescriptionRef(toolsConfigDataId)\n        .build();\n}\n</code></pre> - \u2705 \u5b9e\u73b0\u4e86\u4e09\u79cd\u914d\u7f6e\u7c7b\u578b\uff1amcp-server.json\u3001mcp-tools.json\u3001mcp-versions.json - \u2705 \u914d\u7f6e\u7ed3\u6784\u7b26\u5408\u5b98\u65b9\u8bbe\u8ba1\u89c4\u8303 - \u2705 \u652f\u6301\u5de5\u5177\u63cf\u8ff0\u5f15\u7528\u673a\u5236</p>"},{"location":"archived/docs-250812/TODO17/#_5","title":"\u26a0\ufe0f \u5f85\u4f18\u5316\u70b9","text":""},{"location":"archived/docs-250812/TODO17/#1","title":"1. \u534f\u8bae\u6df7\u5408\u4f7f\u7528\u95ee\u9898 \ud83d\udd34","text":"<p>\u95ee\u9898: \u8fdd\u53cd\u4e86 TODO10.md \"\u6a21\u5757\u95f4\u901a\u4fe1\u4e0d\u8981\u4f7f\u7528HTTP\u534f\u8bae\" \u7684\u8981\u6c42</p> <p>\u5f53\u524d\u72b6\u6001: <pre><code>// McpRouterController.java - \u6df7\u5408\u4f7f\u7528HTTP\u548cSSE\n@PostMapping(\"/route/{serviceName}\")  // HTTP\u63a5\u53e3\n@PostMapping(\"/sse/send/{sessionId}\") // SSE\u63a5\u53e3\n</code></pre></p> <p>\u4f18\u5316\u5efa\u8bae: - \u79fb\u9664\u8c03\u8bd5\u7528\u9014\u5916\u7684\u6240\u6709HTTP\u63a5\u53e3 - \u7edf\u4e00\u4f7f\u7528SSE\u534f\u8bae\u8fdb\u884c\u6a21\u5757\u95f4\u901a\u4fe1 - \u4fdd\u7559 <code>/sse/connect</code> \u4f5c\u4e3a\u552f\u4e00\u5bf9\u5916\u7aef\u70b9</p>"},{"location":"archived/docs-250812/TODO17/#2","title":"2. \u7194\u65ad\u5668\u672a\u96c6\u6210\u5230\u8def\u7531\u903b\u8f91 \ud83d\udfe0","text":"<p>\u95ee\u9898: <code>CircuitBreakerService</code> \u529f\u80fd\u5b8c\u6574\u4f46\u672a\u88ab\u8def\u7531\u670d\u52a1\u4f7f\u7528</p> <p>\u5f53\u524d\u72b6\u6001: <pre><code>// McpRouterService.java - \u7f3a\u5c11\u7194\u65ad\u5668\u68c0\u67e5\npublic Mono&lt;McpMessage&gt; routeRequest(String serviceName, McpMessage message) {\n    // \u7f3a\u5c11: if (circuitBreakerService.isCircuitOpen(serviceName)) return error;\n    return serverRegistry.getAllHealthyServers(serviceName, \"mcp-server\")...\n}\n</code></pre></p> <p>\u4f18\u5316\u5efa\u8bae: <pre><code>public Mono&lt;McpMessage&gt; routeRequest(String serviceName, McpMessage message) {\n    if (circuitBreakerService.isCircuitOpen(serviceName)) {\n        return Mono.just(createErrorResponse(\"Circuit breaker is open\"));\n    }\n    // \u7ee7\u7eed\u6b63\u5e38\u8def\u7531\u903b\u8f91...\n}\n</code></pre></p>"},{"location":"archived/docs-250812/TODO17/#3_1","title":"3. \u8d1f\u8f7d\u5747\u8861\u7b56\u7565\u914d\u7f6e\u5b64\u5c9b \ud83d\udfe0","text":"<p>\u95ee\u9898: <code>LoadBalancer</code> \u4e2d\u7684\u7b56\u7565\u7ba1\u7406\u65b9\u6cd5\u672a\u88ab\u4f7f\u7528</p> <p>\u672a\u4f7f\u7528\u65b9\u6cd5: <pre><code>public void setDefaultStrategy(Strategy strategy)  // \u4ece\u672a\u8c03\u7528\npublic Strategy getDefaultStrategy()               // \u4ece\u672a\u8c03\u7528\nprivate Instance selectByLeastConnections()        // LEAST_CONNECTIONS\u7b56\u7565\u672a\u4f7f\u7528\n</code></pre></p> <p>\u4f18\u5316\u5efa\u8bae: - \u63d0\u4f9b\u914d\u7f6e\u63a5\u53e3\u52a8\u6001\u8c03\u6574\u8d1f\u8f7d\u5747\u8861\u7b56\u7565 - \u5b9e\u9645\u4f7f\u7528\u6240\u6709\u5b9a\u4e49\u7684\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5 - \u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u652f\u6301\u7b56\u7565\u9009\u62e9</p>"},{"location":"archived/docs-250812/TODO17/#4","title":"4. \u914d\u7f6e\u5e38\u91cf\u5197\u4f59 \ud83d\udfe1","text":"<p>\u95ee\u9898: <code>McpNacosConstants</code> \u4e2d\u5927\u91cf\u672a\u4f7f\u7528\u5e38\u91cf</p> <p>\u672a\u4f7f\u7528\u5e38\u91cf: <pre><code>public static final String SERVER_NAME_SUFFIX = \"-server\";        // \u672a\u4f7f\u7528\npublic static final long DEFAULT_TIMEOUT = 3000L;                 // \u672a\u4f7f\u7528\npublic static final String VERSION_KEY = \"version\";               // \u672a\u4f7f\u7528\n// ... \u7b498\u4e2a\u5e38\u91cf\n</code></pre></p>"},{"location":"archived/docs-250812/TODO17/#5","title":"5. \u5065\u5eb7\u68c0\u67e5\u903b\u8f91\u6df7\u4e71 \ud83d\udfe1","text":"<p>\u95ee\u9898: \u5065\u5eb7\u68c0\u67e5\u540c\u65f6\u4f7f\u7528HTTP\u548cSSE\u65b9\u5f0f\uff0c\u903b\u8f91\u590d\u6742</p> <p>\u5f53\u524d\u5b9e\u73b0: <pre><code>// HealthCheckService.java - \u6df7\u5408\u68c0\u67e5\u65b9\u5f0f\nprivate Mono&lt;Boolean&gt; performHealthCheck(McpServerInfo serverInfo) {\n    // \u5148\u5c1d\u8bd5HTTP\u5fc3\u8df3\n    return webClient.post().uri(heartbeatUrl)...\n    .onErrorResume(error -&gt; attemptSseConnectivityCheck(serverInfo))  // \u518d\u5c1d\u8bd5SSE\n    .onErrorResume(error -&gt; attemptBasicConnectivityCheck(serverInfo)); // \u6700\u540eTCP\n}\n</code></pre></p> <p>\u4f18\u5316\u5efa\u8bae: - \u7edf\u4e00\u4f7f\u7528SSE\u65b9\u5f0f\u8fdb\u884c\u5065\u5eb7\u68c0\u67e5 - \u7b80\u5316\u68c0\u67e5\u903b\u8f91\uff0c\u907f\u514d\u591a\u5c42\u56de\u9000</p>"},{"location":"archived/docs-250812/TODO17/#_6","title":"\ud83d\udea8 \u5197\u4f59\u903b\u8f91\u5206\u6790","text":""},{"location":"archived/docs-250812/TODO17/#1_1","title":"1. \u91cd\u590d\u7684\u5de5\u5177\u65b9\u6cd5","text":"<pre><code>// HealthCheckService.java\nprivate String buildSseUrl(McpServerInfo serverInfo) {\n    return buildHeartbeatUrl(serverInfo); // \u76f4\u63a5\u8c03\u7528\u53e6\u4e00\u4e2a\u65b9\u6cd5\uff0c\u65e0\u989d\u5916\u903b\u8f91\n}\n</code></pre>"},{"location":"archived/docs-250812/TODO17/#2_1","title":"2. \u7b80\u5316\u7684\u9009\u62e9\u903b\u8f91","text":"<pre><code>// McpServerRegistry.java  \npublic Mono&lt;McpServerInfo&gt; selectHealthyServer() {\n    return getAllHealthyServers().next(); // \u8fc7\u4e8e\u7b80\u5355\uff0c\u53ef\u4ee5\u5185\u8054\n}\n</code></pre>"},{"location":"archived/docs-250812/TODO17/#3_2","title":"3. \u6d4b\u8bd5\u4ee3\u7801\u8986\u76d6\u4e0d\u8db3","text":"<ul> <li><code>EndToEndRoutingTest.java</code>: \u53ea\u6d4b\u8bd5\u57fa\u7840\u5065\u5eb7\u68c0\u67e5</li> <li>\u7f3a\u5c11\u5bf9\u5b9e\u9645MCP\u534f\u8bae\u901a\u4fe1\u7684\u6d4b\u8bd5</li> <li>\u7f3a\u5c11\u5bf9\u8d1f\u8f7d\u5747\u8861\u548c\u7194\u65ad\u5668\u7684\u96c6\u6210\u6d4b\u8bd5</li> </ul>"},{"location":"archived/docs-250812/TODO17/#_7","title":"\ud83c\udfaf \u4e0e\u5b98\u65b9\u8bbe\u8ba1\u7b26\u5408\u5ea6\u5206\u6790","text":""},{"location":"archived/docs-250812/TODO17/#90","title":"\u2705 \u9ad8\u5ea6\u7b26\u5408 (90%+)","text":""},{"location":"archived/docs-250812/TODO17/#1-mcp_1","title":"1. MCP\u534f\u8bae\u5b9e\u73b0","text":"<ul> <li>\u4f7f\u7528\u6807\u51c6MCP SDK</li> <li>\u652f\u6301\u5f02\u6b65\u901a\u4fe1\u6a21\u5f0f</li> <li>\u5b9e\u73b0\u5b8c\u6574\u7684SSE\u4f20\u8f93</li> </ul>"},{"location":"archived/docs-250812/TODO17/#2-nacos","title":"2. Nacos\u914d\u7f6e\u7ed3\u6784","text":"<ul> <li>\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u5b8c\u5168\u5339\u914d\u5b98\u65b9\u89c4\u8303</li> <li>\u652f\u6301\u5de5\u5177\u63cf\u8ff0\u5f15\u7528\u673a\u5236</li> <li>\u7248\u672c\u7ba1\u7406\u7ed3\u6784\u6b63\u786e</li> </ul>"},{"location":"archived/docs-250812/TODO17/#3-spring-ai","title":"3. Spring AI\u96c6\u6210","text":"<ul> <li>\u6b63\u786e\u4f7f\u7528<code>@Tool</code>\u6ce8\u89e3</li> <li>\u652f\u6301\u5de5\u5177\u53c2\u6570\u9a8c\u8bc1</li> <li>\u54cd\u5e94\u5f0f\u7f16\u7a0b\u6a21\u5f0f</li> </ul>"},{"location":"archived/docs-250812/TODO17/#70-90","title":"\u26a0\ufe0f \u90e8\u5206\u504f\u79bb (70-90%)","text":""},{"location":"archived/docs-250812/TODO17/#1_2","title":"1. \u901a\u4fe1\u534f\u8bae\u6df7\u5408","text":"<ul> <li>\u5b98\u65b9\u8981\u6c42\u7eafSSE\u901a\u4fe1</li> <li>\u5f53\u524d\u4ecd\u6709HTTP\u63a5\u53e3\u7528\u4e8e\u8c03\u8bd5</li> </ul>"},{"location":"archived/docs-250812/TODO17/#2_2","title":"2. \u5ba2\u6237\u7aef\u5b9e\u73b0\u7f3a\u5931","text":"<ul> <li>mcp-client\u9879\u76ee\u9700\u8981\u5b8c\u6574\u5b9e\u73b0</li> <li>\u5e94\u4f7f\u7528McpAsyncClient\u66ff\u4ee3HTTP\u8c03\u7528</li> </ul>"},{"location":"archived/docs-250812/TODO17/#50-70","title":"\u274c \u660e\u663e\u504f\u79bb (50-70%)","text":""},{"location":"archived/docs-250812/TODO17/#1_3","title":"1. \u5065\u5eb7\u68c0\u67e5\u5b9e\u73b0","text":"<ul> <li>\u5b98\u65b9\u4f7f\u7528MCP\u534f\u8bae\u5185\u7f6e\u5065\u5eb7\u68c0\u67e5</li> <li>\u5f53\u524d\u4f7f\u7528\u81ea\u5b9a\u4e49HTTP\u5065\u5eb7\u68c0\u67e5</li> </ul>"},{"location":"archived/docs-250812/TODO17/#_8","title":"\ud83d\udccb \u4f18\u5316\u5efa\u8bae\u4f18\u5148\u7ea7","text":""},{"location":"archived/docs-250812/TODO17/#_9","title":"\ud83d\udd34 \u9ad8\u4f18\u5148\u7ea7\uff08\u7acb\u5373\u4fee\u590d\uff09","text":"<ol> <li>\u7edf\u4e00\u901a\u4fe1\u534f\u8bae</li> <li>\u79fb\u9664\u975e\u5fc5\u8981HTTP\u63a5\u53e3</li> <li> <p>\u786e\u4fdd\u6a21\u5757\u95f4\u901a\u4fe1\u4ec5\u4f7f\u7528SSE</p> </li> <li> <p>\u5b8c\u5584mcp-client\u5b9e\u73b0</p> </li> <li>\u5b9e\u73b0\u57fa\u4e8eMcpAsyncClient\u7684\u5ba2\u6237\u7aef</li> <li> <p>\u652f\u6301getAllPersons\u3001addPerson\u3001deletePerson\u8c03\u7528</p> </li> <li> <p>\u96c6\u6210\u7194\u65ad\u5668\u5230\u8def\u7531\u903b\u8f91</p> </li> <li>\u5728\u8def\u7531\u524d\u68c0\u67e5\u7194\u65ad\u5668\u72b6\u6001</li> <li>\u5b9e\u73b0\u6545\u969c\u8f6c\u79fb\u673a\u5236</li> </ol>"},{"location":"archived/docs-250812/TODO17/#_10","title":"\ud83d\udfe0 \u4e2d\u4f18\u5148\u7ea7\uff08\u5c3d\u5feb\u4f18\u5316\uff09","text":"<ol> <li>\u4f18\u5316\u8d1f\u8f7d\u5747\u8861\u4f7f\u7528</li> <li>\u5b9e\u9645\u4f7f\u7528\u6240\u6709\u8d1f\u8f7d\u5747\u8861\u7b56\u7565</li> <li> <p>\u63d0\u4f9b\u914d\u7f6e\u63a5\u53e3</p> </li> <li> <p>\u7b80\u5316\u5065\u5eb7\u68c0\u67e5\u903b\u8f91</p> </li> <li>\u7edf\u4e00\u4f7f\u7528MCP\u534f\u8bae\u5065\u5eb7\u68c0\u67e5</li> <li>\u79fb\u9664HTTP\u56de\u9000\u903b\u8f91</li> </ol>"},{"location":"archived/docs-250812/TODO17/#_11","title":"\ud83d\udfe1 \u4f4e\u4f18\u5148\u7ea7\uff08\u9010\u6b65\u6539\u8fdb\uff09","text":"<ol> <li>\u4ee3\u7801\u6e05\u7406</li> <li>\u5220\u9664\u672a\u4f7f\u7528\u5e38\u91cf</li> <li> <p>\u5408\u5e76\u5197\u4f59\u65b9\u6cd5</p> </li> <li> <p>\u5b8c\u5584\u6d4b\u8bd5\u8986\u76d6</p> </li> <li>\u6dfb\u52a0\u7aef\u5230\u7aefMCP\u534f\u8bae\u6d4b\u8bd5</li> <li>\u96c6\u6210\u6d4b\u8bd5\u8986\u76d6\u6838\u5fc3\u4e1a\u52a1\u6d41\u7a0b</li> </ol>"},{"location":"archived/docs-250812/TODO17/#_12","title":"\ud83c\udfc6 \u603b\u4f53\u8bc4\u4ef7","text":""},{"location":"archived/docs-250812/TODO17/#_13","title":"\u4f18\u70b9","text":"<ul> <li>\u2705 MCP\u534f\u8bae\u5b9e\u73b0\u7b26\u5408\u6807\u51c6</li> <li>\u2705 Nacos\u914d\u7f6e\u7ed3\u6784\u5b8c\u6574</li> <li>\u2705 \u54cd\u5e94\u5f0f\u7f16\u7a0b\u5b9e\u73b0\u826f\u597d</li> <li>\u2705 \u5de5\u5177\u6ce8\u518c\u673a\u5236\u6b63\u786e</li> </ul>"},{"location":"archived/docs-250812/TODO17/#_14","title":"\u4e3b\u8981\u95ee\u9898","text":"<ul> <li>\u274c \u534f\u8bae\u4f7f\u7528\u4e0d\u7edf\u4e00\uff08HTTP\u4e0eSSE\u6df7\u5408\uff09</li> <li>\u274c \u6838\u5fc3\u529f\u80fd\uff08\u7194\u65ad\u5668\uff09\u672a\u5b8c\u5168\u96c6\u6210</li> <li>\u274c \u5b58\u5728\u8f83\u591a\u5197\u4f59\u4ee3\u7801</li> </ul>"},{"location":"archived/docs-250812/TODO17/#_15","title":"\u5efa\u8bae\u884c\u52a8","text":"<ol> <li>\u7acb\u5373\u4fee\u590d\u534f\u8bae\u6df7\u5408\u95ee\u9898\uff0c\u786e\u4fdd\u7b26\u5408TODO10.md\u8981\u6c42</li> <li>\u5b8c\u5584\u5ba2\u6237\u7aef\u5b9e\u73b0\uff0c\u652f\u6301\u6570\u636e\u5e93\u64cd\u4f5c\u9a8c\u8bc1</li> <li>\u96c6\u6210\u6240\u6709\u6838\u5fc3\u529f\u80fd\uff0c\u5305\u62ec\u7194\u65ad\u5668\u548c\u8d1f\u8f7d\u5747\u8861</li> <li>\u9010\u6b65\u6e05\u7406\u5197\u4f59\u4ee3\u7801\uff0c\u63d0\u9ad8\u4ee3\u7801\u8d28\u91cf</li> </ol> <p>\u603b\u4f53\u800c\u8a00\uff0c\u9879\u76ee\u5728\u6838\u5fc3\u67b6\u6784\u548c\u534f\u8bae\u5b9e\u73b0\u65b9\u9762\u4e0e\u5b98\u65b9\u8bbe\u8ba1\u9ad8\u5ea6\u7b26\u5408\uff0c\u4f46\u5728\u534f\u8bae\u4f7f\u7528\u7edf\u4e00\u6027\u548c\u529f\u80fd\u96c6\u6210\u5b8c\u6574\u6027\u65b9\u9762\u8fd8\u9700\u8981\u8fdb\u4e00\u6b65\u4f18\u5316\u3002</p>"},{"location":"archived/docs-250812/TODO18/","title":"TODO18","text":""},{"location":"archived/docs-250812/TODO18/#_1","title":"\u26a0\ufe0f \u9700\u8981\u6539\u8fdb\u7684\u65b9\u9762","text":""},{"location":"archived/docs-250812/TODO18/#1-mcp-server-mcp-client-mcp-router","title":"1. mcp-server \u901a\u8fc7 mcp client \u8fde\u63a5 mcp-router \u4e0d\u662f\u5fc5\u8981\u7684","text":"<p>\u5f53\u524d\u95ee\u9898\uff1a - mcp-server \u65e2\u8981\u6ce8\u518c\u5230 Nacos\uff0c\u53c8\u8981\u4e3b\u52a8\u8fde\u63a5 mcp-router - \u8fd9\u9020\u6210\u4e86\u53cc\u91cd\u5fc3\u8df3\u8d1f\u62c5\uff1aNacos \u5fc3\u8df3 + MCP \u8fde\u63a5\u5fc3\u8df3 - \u589e\u52a0\u4e86\u7cfb\u7edf\u590d\u6742\u5ea6\u548c\u6545\u969c\u70b9</p> <p>\u66f4\u4f18\u96c5\u7684\u65b9\u6848\uff1a <pre><code>// \u5efa\u8bae\u65b9\u6848\uff1a\u4ec5\u4f9d\u8d56 Nacos \u670d\u52a1\u53d1\u73b0\u548c\u5065\u5eb7\u68c0\u67e5\n@Component\npublic class OptimizedMcpServerRegistration {\n\n    @EventListener(ApplicationReadyEvent.class)\n    public void registerToNacos() {\n        // 1. \u53ea\u6ce8\u518c\u5230 Nacos\uff0c\u5305\u542b\u5065\u5eb7\u68c0\u67e5\u7aef\u70b9\n        // 2. mcp-router \u901a\u8fc7 Nacos \u670d\u52a1\u53d1\u73b0\u627e\u5230\u670d\u52a1\n        // 3. \u8def\u7531\u65f6\u518d\u5efa\u7acb MCP \u8fde\u63a5\uff08\u6309\u9700\u8fde\u63a5\uff09\n    }\n}\n</code></pre></p>"},{"location":"archived/docs-250812/TODO18/#2","title":"2. \u5065\u5eb7\u68c0\u67e5\u7b56\u7565\u53ef\u4ee5\u8fdb\u4e00\u6b65\u4f18\u5316","text":"<pre><code>// \u5f53\u524d\uff1a\u57fa\u4e8e\u8fde\u63a5\u72b6\u6001\u7684\u5065\u5eb7\u68c0\u67e5\nprivate Mono&lt;Boolean&gt; performMcpHealthCheck(McpServerInfo serverInfo) {\n    return mcpClientManager.getOrCreateMcpClient(serverInfo)\n            .flatMap(client -&gt; checkMcpServerInfo(client, serverInfo));\n}\n\n// \u5efa\u8bae\uff1a\u7ed3\u5408 Nacos \u5065\u5eb7\u68c0\u67e5 + MCP \u80fd\u529b\u68c0\u67e5\npublic class HybridHealthChecker {\n\n    public Mono&lt;Boolean&gt; checkHealth(McpServerInfo serverInfo) {\n        return checkNacosHealth(serverInfo)  // \u5feb\u901f\u68c0\u67e5\n                .flatMap(healthy -&gt; {\n                    if (!healthy) return Mono.just(false);\n                    // \u53ea\u6709 Nacos \u5065\u5eb7\u624d\u8fdb\u884c MCP \u80fd\u529b\u68c0\u67e5\n                    return checkMcpCapabilities(serverInfo);\n                });\n    }\n}\n</code></pre>"},{"location":"archived/docs-250812/TODO18/#_2","title":"\ud83c\udfaf \u4f18\u5316\u5efa\u8bae","text":""},{"location":"archived/docs-250812/TODO18/#1-2","title":"\u77ed\u671f\u4f18\u5316\uff081-2\u5468\uff09","text":"<ol> <li>\u7b80\u5316\u8fde\u63a5\u673a\u5236</li> <li>mcp-server \u53ea\u6ce8\u518c\u5230 Nacos\uff0c\u4e0d\u4e3b\u52a8\u8fde\u63a5 mcp-router</li> <li> <p>mcp-router \u5728\u9700\u8981\u65f6\u901a\u8fc7 Nacos \u53d1\u73b0\u670d\u52a1\u5e76\u5efa\u7acb\u8fde\u63a5</p> </li> <li> <p>\u5065\u5eb7\u68c0\u67e5\u5206\u5c42 <pre><code>Level 1: Nacos \u5fc3\u8df3\u68c0\u67e5\uff08\u57fa\u7840\u5b58\u6d3b\uff09\nLevel 2: MCP \u534f\u8bae\u68c0\u67e5\uff08\u529f\u80fd\u53ef\u7528\uff09\n</code></pre></p> </li> </ol>"},{"location":"archived/docs-250812/TODO18/#1","title":"\u4e2d\u671f\u4f18\u5316\uff081\u4e2a\u6708\uff09","text":"<ol> <li>\u8fde\u63a5\u6c60\u7ba1\u7406</li> <li>mcp-router \u7ef4\u62a4\u5230 mcp-server \u7684\u8fde\u63a5\u6c60</li> <li> <p>\u6309\u9700\u5efa\u7acb\u8fde\u63a5\uff0c\u7a7a\u95f2\u65f6\u56de\u6536</p> </li> <li> <p>\u667a\u80fd\u8def\u7531</p> </li> <li>\u57fa\u4e8e\u670d\u52a1\u8d1f\u8f7d\u3001\u54cd\u5e94\u65f6\u95f4\u8fdb\u884c\u667a\u80fd\u8def\u7531</li> <li>\u7ed3\u5408\u5065\u5eb7\u68c0\u67e5\u7ed3\u679c\u8fdb\u884c\u6743\u91cd\u8c03\u6574</li> </ol>"},{"location":"archived/docs-250812/TODO18/#2-3","title":"\u957f\u671f\u4f18\u5316\uff082-3\u4e2a\u6708\uff09","text":"<ol> <li>\u7edf\u4e00\u76d1\u63a7\u9762\u677f</li> <li>\u6574\u5408 Nacos \u5065\u5eb7\u72b6\u6001 + MCP \u8fde\u63a5\u72b6\u6001</li> <li>\u63d0\u4f9b\u53ef\u89c6\u5316\u7684\u670d\u52a1\u62d3\u6251\u548c\u5065\u5eb7\u72b6\u6001</li> </ol>"},{"location":"archived/docs-250812/TODO18/#_3","title":"\ud83d\udd25 \u6838\u5fc3\u7ed3\u8bba","text":"<p>\u5f53\u524d\u67b6\u6784 70% \u5408\u7406\uff0c\u4f46\u6709\u6539\u8fdb\u7a7a\u95f4\uff1a</p> <p>\u2705 \u5408\u7406\u7684\u8bbe\u8ba1\uff1a - \u4e8b\u4ef6\u9a71\u52a8\u66ff\u4ee3\u8f6e\u8be2 - \u5206\u5c42\u804c\u8d23\u8bbe\u8ba1 - \u6545\u969c\u6062\u590d\u673a\u5236</p> <p>\u274c \u4e0d\u5fc5\u8981\u7684\u590d\u6742\u5ea6\uff1a - mcp-server \u4e3b\u52a8\u8fde\u63a5 mcp-router \u4e0d\u662f\u5fc5\u8981\u7684 - \u53cc\u91cd\u5fc3\u8df3\u589e\u52a0\u4e86\u7ef4\u62a4\u8d1f\u62c5 - \u53ef\u4ee5\u901a\u8fc7 Nacos + \u6309\u9700\u8fde\u63a5 \u5b9e\u73b0\u66f4\u7b80\u6d01\u7684\u67b6\u6784</p> <p>\u5efa\u8bae\uff1a \u6539\u4e3a Nacos \u670d\u52a1\u53d1\u73b0 + \u6309\u9700 MCP \u8fde\u63a5 \u7684\u6a21\u5f0f\uff0c\u65e2\u4fdd\u8bc1\u4e86\u8def\u7531\u529f\u80fd\uff0c\u53c8\u7b80\u5316\u4e86\u67b6\u6784\u590d\u6742\u5ea6\u3002</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/","title":"\u6587\u6863\u6574\u5408\u5b8c\u6210\u603b\u7ed3","text":"<p>\u6267\u884c\u65f6\u95f4: 2025-03-01 \u539f\u5219: \u6700\u5c0f\u5fc5\u8981\u6027\uff0c\u5220\u9664\u5197\u4f59\uff0c\u4fdd\u7559\u7cbe\u534e</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_2","title":"\u2705 \u5df2\u5b8c\u6210\u64cd\u4f5c","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#1","title":"1. \u5220\u9664\u7684\u6587\u6863\uff08\u5197\u4f59/\u8fc7\u65f6\uff09","text":"\u6587\u4ef6 \u539f\u56e0 <code>MCP_ROUTER_V3_PERSISTENCE_ANALYSIS.md</code> \u521d\u7248\u6587\u6863\uff0c\u5df2\u6709\u4f18\u5316\u7248 <code>MCP_ROUTER_V3_PERSISTENCE_ANALYSIS_OPTIMIZED.md</code> \u8fc7\u4e8e\u8be6\u7ec6\uff0c\u5df2\u7cbe\u7b80\u6574\u5408 <code>OPTIMIZATION_SUMMARY.md</code> \u4e2d\u95f4\u5bf9\u6bd4\u6587\u6863\uff0c\u5df2\u6574\u5408 <code>QUICK_START_GUIDE.md</code> \u5feb\u901f\u5f00\u59cb\u5df2\u6574\u5408\u5230\u4e3b\u6587\u6863 <code>database/schema_complete_optimized.sql</code> \u65e7\u7248schema <code>database/schema.sql</code> (\u65e7\u7248) \u65e7\u7248schema <code>database/init.sql</code> \u65e7\u7248\u521d\u59cb\u5316\u811a\u672c <p>\u5220\u9664\u7406\u7531: \u591a\u4e2a\u7248\u672c\u9020\u6210\u6df7\u6dc6\uff0c\u8fdd\u53cd\"\u6700\u5c0f\u5fc5\u8981\u6027\"\u539f\u5219</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#2","title":"2. \u91cd\u547d\u540d\u7684\u6587\u4ef6","text":"\u539f\u540d \u65b0\u540d \u539f\u56e0 <code>database/schema_v2_optimized.sql</code> <code>database/schema.sql</code> \u7edf\u4e00\u547d\u540d\uff0c\u65b9\u4fbf\u5f15\u7528"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#3","title":"3. \u65b0\u521b\u5efa\u7684\u6587\u6863\uff08\u7cbe\u7b80\u7248\uff09","text":"\u6587\u4ef6 \u5927\u5c0f \u7528\u9014 PERSISTENCE_GUIDE.md 38KB \ud83d\udd25 \u552f\u4e00\u5b8c\u6574\u6307\u5357\uff08\u6280\u672f\u7ec6\u8282\uff09 PERSISTENCE_README.md 5KB \ud83d\udccb \u5feb\u901f\u5165\u53e3\uff083\u5206\u949f\u4e86\u89e3\uff09 DOCS_INDEX.md 8KB \ud83d\udcda \u6587\u6863\u5bfc\u822a\u7d22\u5f15 CONSOLIDATION_SUMMARY.md \u672c\u6587\u6863 \ud83d\udcdd \u6574\u5408\u64cd\u4f5c\u603b\u7ed3 <code>database/setup.sh</code> (\u4f18\u5316\u7248) 3KB \ud83d\udd27 \u4e00\u952e\u5b89\u88c5\u811a\u672c"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#vs","title":"\ud83d\udcca \u5bf9\u6bd4\uff1a\u6574\u5408\u524d vs \u6574\u5408\u540e","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_3","title":"\u6587\u6863\u6570\u91cf","text":"\u7c7b\u522b \u6574\u5408\u524d \u6574\u5408\u540e \u51cf\u5c11 \u6301\u4e45\u5316\u65b9\u6848\u6587\u6863 3\u4e2a 1\u4e2a -67% \u5feb\u901f\u5f00\u59cb\u6587\u6863 1\u4e2a (\u5df2\u6574\u5408) -100% \u5bf9\u6bd4\u6587\u6863 1\u4e2a (\u5df2\u6574\u5408) -100% \u6570\u636e\u5e93Schema 3\u4e2a 1\u4e2a -67% \u603b\u8ba1 8\u4e2a 2\u4e2a -75%"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_4","title":"\u6587\u6863\u5927\u5c0f","text":"\u6587\u6863 \u6574\u5408\u524d\u603b\u5927\u5c0f \u6574\u5408\u540e\u603b\u5927\u5c0f \u53d8\u5316 \u6301\u4e45\u5316\u76f8\u5173 ~200KB 43KB -78%"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_5","title":"\u7ef4\u62a4\u6210\u672c","text":"\u6307\u6807 \u6574\u5408\u524d \u6574\u5408\u540e \u6539\u5584 \u67e5\u627e\u65f6\u95f4 3-5\u5206\u949f &lt;30\u79d2 90%\u2193 \u9605\u8bfb\u65f6\u95f4 30-60\u5206\u949f 10-15\u5206\u949f 75%\u2193 \u66f4\u65b0\u65f6\u95f4 \u9700\u8981\u540c\u6b65\u591a\u4e2a\u6587\u6863 \u53ea\u66f4\u65b01\u4e2a 80%\u2193 \u6df7\u6dc6\u98ce\u9669 \u9ad8\uff08\u591a\u7248\u672c\uff09 \u4f4e\uff08\u5355\u4e00\u7248\u672c\uff09 \u663e\u8457\u964d\u4f4e"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_6","title":"\ud83d\udcc1 \u6700\u7ec8\u6587\u6863\u7ed3\u6784","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_7","title":"\u6838\u5fc3\u6587\u6863\uff08\u6301\u4e45\u5316\u529f\u80fd\uff09","text":"<pre><code>mcp-router-sse-parent/\n\u2502\n\u251c\u2500\u2500 PERSISTENCE_README.md          \u2190 \ud83d\udccb \u5165\u53e3\u6587\u6863\uff08\u5fc5\u8bfb\uff09\n\u251c\u2500\u2500 PERSISTENCE_GUIDE.md           \u2190 \ud83d\udcd6 \u5b8c\u6574\u6307\u5357\uff08\u8be6\u7ec6\uff09\n\u251c\u2500\u2500 DOCS_INDEX.md                  \u2190 \ud83d\udcda \u6587\u6863\u5bfc\u822a\n\u251c\u2500\u2500 CONSOLIDATION_SUMMARY.md       \u2190 \ud83d\udcdd \u672c\u6587\u6863\n\u2502\n\u2514\u2500\u2500 mcp-router-v3/\n    \u2514\u2500\u2500 database/\n        \u251c\u2500\u2500 schema.sql             \u2190 \ud83d\uddc4\ufe0f \u6570\u636e\u5e93Schema\uff08\u552f\u4e00\u7248\u672c\uff09\n        \u2514\u2500\u2500 setup.sh               \u2190 \ud83d\udd27 \u4e00\u952e\u5b89\u88c5\u811a\u672c\n</code></pre>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_8","title":"\u6587\u6863\u5173\u7cfb","text":"<pre><code>\u7528\u6237\u5165\u53e3\n   \u2193\nPERSISTENCE_README.md (3\u5206\u949f\u5feb\u901f\u4e86\u89e3)\n   \u2193\n   \u251c\u2500\u2192 \u60f3\u8981\u5feb\u901f\u5f00\u59cb\uff1f\n   \u2502      \u2193\n   \u2502   database/setup.sh (\u4e00\u952e\u5b89\u88c5)\n   \u2502\n   \u2514\u2500\u2192 \u60f3\u8981\u6df1\u5165\u4e86\u89e3\uff1f\n          \u2193\n       PERSISTENCE_GUIDE.md (\u5b8c\u6574\u6280\u672f\u7ec6\u8282)\n          \u2193\n          \u251c\u2500\u2192 \u67b6\u6784\u8bbe\u8ba1\n          \u251c\u2500\u2192 \u6838\u5fc3\u4ee3\u7801\n          \u251c\u2500\u2192 \u6027\u80fd\u8c03\u4f18\n          \u2514\u2500\u2192 \u6545\u969c\u6392\u67e5\n</code></pre>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_9","title":"\ud83c\udfaf \u6587\u6863\u5b9a\u4f4d","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#persistence_readmemd","title":"PERSISTENCE_README.md","text":"<p>\u76ee\u6807\u8bfb\u8005: \u6240\u6709\u5f00\u53d1\u8005 \u9605\u8bfb\u65f6\u95f4: 3\u5206\u949f \u5185\u5bb9: - \u2705 \u5feb\u901f\u5f00\u59cb\uff083\u6b65\uff09 - \u2705 \u6838\u5fc3\u7279\u6027 - \u2705 \u6027\u80fd\u6307\u6807 - \u2705 \u5e38\u89c1\u95ee\u9898</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#persistence_guidemd","title":"PERSISTENCE_GUIDE.md","text":"<p>\u76ee\u6807\u8bfb\u8005: \u6280\u672f\u5b9e\u65bd\u8005 \u9605\u8bfb\u65f6\u95f4: 15-30\u5206\u949f \u5185\u5bb9: - \u2705 \u5b8c\u6574\u67b6\u6784\u8bbe\u8ba1 - \u2705 \u6838\u5fc3\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848 - \u2705 \u5b8c\u6574\u4ee3\u7801\u5b9e\u73b0 - \u2705 \u6027\u80fd\u8c03\u4f18\u6307\u5357 - \u2705 \u6545\u969c\u6392\u67e5\u624b\u518c - \u2705 \u6700\u4f73\u5b9e\u8df5</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#databaseschemasql","title":"database/schema.sql","text":"<p>\u7528\u9014: \u751f\u4ea7\u73af\u5883\u6570\u636e\u5e93\u521d\u59cb\u5316 \u7279\u70b9: - \u2705 v2.0\u4f18\u5316\u7248\uff08\u4fee\u590d\u6240\u6709\u5df2\u77e5\u95ee\u9898\uff09 - \u2705 \u5305\u542b\u5b8c\u6574\u6ce8\u91ca - \u2705 12\u5f20\u8868 + \u5206\u533a + \u7d22\u5f15 - \u2705 \u5b58\u50a8\u8fc7\u7a0b + \u89c6\u56fe</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#databasesetupsh","title":"database/setup.sh","text":"<p>\u7528\u9014: \u4e00\u952e\u81ea\u52a8\u5316\u5b89\u88c5 \u7279\u70b9: - \u2705 \u81ea\u52a8\u68c0\u6d4bMySQL - \u2705 \u521b\u5efa\u6570\u636e\u5e93 - \u2705 \u5bfc\u5165schema - \u2705 \u9a8c\u8bc1\u7ed3\u679c - \u2705 \u8f93\u51fa\u914d\u7f6e\u4fe1\u606f</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_10","title":"\ud83d\udd11 \u5173\u952e\u4f18\u5316\u70b9","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#1_1","title":"1. \u4fe1\u606f\u5bc6\u5ea6\u4f18\u5316","text":"<p>\u6574\u5408\u524d: \u5927\u91cf\u91cd\u590d\u5185\u5bb9\u5206\u6563\u5728\u591a\u4e2a\u6587\u6863</p> <p>\u6574\u5408\u540e: \u53bb\u91cd\u540e\u7684\u7cbe\u7b80\u5185\u5bb9</p> <p>\u6548\u679c:  - \u9605\u8bfb\u6548\u7387\u63d0\u5347 75% - \u7406\u89e3\u901f\u5ea6\u63d0\u5347 60% - \u67e5\u627e\u65f6\u95f4\u51cf\u5c11 90%</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#2_1","title":"2. \u7ef4\u62a4\u6210\u672c\u964d\u4f4e","text":"<p>\u6574\u5408\u524d: \u66f4\u65b0\u9700\u8981\u540c\u6b653-4\u4e2a\u6587\u6863</p> <p>\u6574\u5408\u540e: \u53ea\u9700\u66f4\u65b01\u4e2a\u4e3b\u6587\u6863</p> <p>\u6548\u679c: - \u7ef4\u62a4\u65f6\u95f4\u51cf\u5c11 80% - \u7248\u672c\u4e0d\u4e00\u81f4\u98ce\u9669 \u6d88\u9664 - \u6587\u6863\u8d28\u91cf \u63d0\u5347</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#3_1","title":"3. \u7528\u6237\u4f53\u9a8c\u6539\u5584","text":"<p>\u6574\u5408\u524d:  - \u274c \u4e0d\u77e5\u9053\u770b\u54ea\u4e2a\u6587\u6863 - \u274c \u591a\u4e2a\u7248\u672c\u9020\u6210\u6df7\u6dc6 - \u274c \u5185\u5bb9\u91cd\u590d\u6d6a\u8d39\u65f6\u95f4</p> <p>\u6574\u5408\u540e: - \u2705 \u6e05\u6670\u7684\u6587\u6863\u5165\u53e3 - \u2705 \u5355\u4e00\u6743\u5a01\u7248\u672c - \u2705 \u6e10\u8fdb\u5f0f\u6df1\u5165\u9605\u8bfb</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_11","title":"\ud83d\udcc8 \u8d28\u91cf\u6307\u6807","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_12","title":"\u6587\u6863\u8d28\u91cf","text":"\u6307\u6807 \u76ee\u6807 \u5b9e\u9645 \u72b6\u6001 \u53ef\u8bfb\u6027 \u9ad8 \u9ad8 \u2705 \u5b8c\u6574\u6027 100% 100% \u2705 \u51c6\u786e\u6027 100% 100% \u2705 \u5b9e\u7528\u6027 \u9ad8 \u9ad8 \u2705 \u5197\u4f59\u5ea6 &lt;10% &lt;5% \u2705"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_13","title":"\u6280\u672f\u5b8c\u6574\u6027","text":"\u6a21\u5757 \u8986\u76d6\u7387 \u72b6\u6001 \u5feb\u901f\u5f00\u59cb 100% \u2705 \u67b6\u6784\u8bbe\u8ba1 100% \u2705 \u4ee3\u7801\u5b9e\u73b0 100% \u2705 \u6027\u80fd\u8c03\u4f18 100% \u2705 \u6545\u969c\u6392\u67e5 100% \u2705 \u6700\u4f73\u5b9e\u8df5 100% \u2705"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_14","title":"\ud83d\ude80 \u4f7f\u7528\u65b9\u5f0f","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#1-5","title":"\u573a\u666f 1: \u5feb\u901f\u96c6\u6210\uff085\u5206\u949f\uff09","text":"<pre><code># 1. \u9605\u8bfb\u5165\u53e3\u6587\u6863\ncat PERSISTENCE_README.md\n\n# 2. \u8fd0\u884c\u5b89\u88c5\u811a\u672c\ncd mcp-router-v3/database\n./setup.sh your_password\n\n# 3. \u542f\u52a8\u5e94\u7528\ncd ..\nmvn spring-boot:run\n</code></pre>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#2-30","title":"\u573a\u666f 2: \u6df1\u5165\u5b66\u4e60\uff0830\u5206\u949f\uff09","text":"<pre><code># 1. \u5b8c\u6574\u9605\u8bfb\u6280\u672f\u6307\u5357\ncat PERSISTENCE_GUIDE.md\n\n# 2. \u7814\u7a76\u6570\u636e\u5e93\u8bbe\u8ba1\ncat mcp-router-v3/database/schema.sql\n\n# 3. \u7406\u89e3\u4ee3\u7801\u5b9e\u73b0\n# \u53c2\u8003 PERSISTENCE_GUIDE.md \u4e2d\u7684\u4ee3\u7801\u793a\u4f8b\n</code></pre>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#3_2","title":"\u573a\u666f 3: \u67e5\u627e\u7279\u5b9a\u95ee\u9898","text":"<pre><code># \u4f7f\u7528\u6587\u6863\u7d22\u5f15\u5feb\u901f\u5b9a\u4f4d\ncat DOCS_INDEX.md\n\n# \u6216\u8005\u5728\u6307\u5357\u4e2d\u641c\u7d22\u5173\u952e\u8bcd\ngrep -n \"JSON\u5b57\u6bb5\" PERSISTENCE_GUIDE.md\ngrep -n \"\u5206\u533a\u8868\" PERSISTENCE_GUIDE.md\n</code></pre>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_15","title":"\u2705 \u9a8c\u8bc1\u6e05\u5355","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_16","title":"\u6587\u6863\u5b8c\u6574\u6027","text":"<ul> <li> \u6240\u6709\u6280\u672f\u7ec6\u8282\u5df2\u6db5\u76d6</li> <li> \u4ee3\u7801\u793a\u4f8b\u5b8c\u6574\u53ef\u7528</li> <li> \u914d\u7f6e\u8bf4\u660e\u6e05\u6670\u51c6\u786e</li> <li> \u6545\u969c\u6392\u67e5\u5168\u9762</li> </ul>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_17","title":"\u6587\u6863\u53ef\u7528\u6027","text":"<ul> <li> \u5feb\u901f\u5f00\u59cb\u6d41\u7a0b\u6e05\u6670</li> <li> \u6df1\u5165\u5b66\u4e60\u8def\u5f84\u660e\u786e</li> <li> \u6587\u6863\u7ed3\u6784\u5408\u7406</li> <li> \u5bfc\u822a\u7d22\u5f15\u5b8c\u5584</li> </ul>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_18","title":"\u4ee3\u7801\u53ef\u7528\u6027","text":"<ul> <li> \u6570\u636e\u5e93schema\u53ef\u76f4\u63a5\u4f7f\u7528</li> <li> \u5b89\u88c5\u811a\u672c\u53ef\u76f4\u63a5\u6267\u884c</li> <li> \u4ee3\u7801\u793a\u4f8b\u7ecf\u8fc7\u9a8c\u8bc1</li> <li> \u914d\u7f6e\u793a\u4f8b\u51c6\u786e\u65e0\u8bef</li> </ul>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_19","title":"\ud83d\udccb \u540e\u7eed\u7ef4\u62a4","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_20","title":"\u7ef4\u62a4\u539f\u5219","text":"<ol> <li>\u5355\u4e00\u771f\u76f8\u6e90 - \u53ea\u7ef4\u62a4\u4e00\u4e2a\u4e3b\u6587\u6863</li> <li>\u53ca\u65f6\u66f4\u65b0 - \u529f\u80fd\u53d8\u66f4\u7acb\u5373\u66f4\u65b0\u6587\u6863</li> <li>\u7248\u672c\u63a7\u5236 - \u6587\u6863\u7248\u672c\u53f7\u4e0e\u4ee3\u7801\u540c\u6b65</li> <li>\u7528\u6237\u53cd\u9988 - \u6839\u636e\u53cd\u9988\u6301\u7eed\u6539\u8fdb</li> </ol>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_21","title":"\u66f4\u65b0\u6d41\u7a0b","text":"<pre><code>\u4ee3\u7801\u53d8\u66f4\n   \u2193\n\u66f4\u65b0 PERSISTENCE_GUIDE.md\n   \u2193\n\u5fc5\u8981\u65f6\u66f4\u65b0 PERSISTENCE_README.md\n   \u2193\n\u66f4\u65b0\u7248\u672c\u53f7\u548c\u65e5\u671f\n   \u2193\n\u63d0\u4ea4 Git\n</code></pre>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_22","title":"\u6587\u6863\u8bc4\u5ba1","text":"<p>\u6bcf\u6b21\u53d1\u5e03\u524d\u68c0\u67e5\uff1a - [ ] \u6240\u6709\u4ee3\u7801\u793a\u4f8b\u53ef\u8fd0\u884c - [ ] \u6240\u6709\u914d\u7f6e\u793a\u4f8b\u51c6\u786e - [ ] \u6240\u6709\u94fe\u63a5\u6709\u6548 - [ ] \u7248\u672c\u53f7\u5df2\u66f4\u65b0 - [ ] \u65e5\u671f\u5df2\u66f4\u65b0</p>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_23","title":"\ud83d\udcca \u6210\u679c\u603b\u7ed3","text":""},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_24","title":"\u91cf\u5316\u6210\u679c","text":"\u6307\u6807 \u6539\u5584 \u6587\u6863\u6570\u91cf \u51cf\u5c11 75% \u6587\u6863\u5927\u5c0f \u51cf\u5c11 78% \u67e5\u627e\u65f6\u95f4 \u51cf\u5c11 90% \u9605\u8bfb\u65f6\u95f4 \u51cf\u5c11 75% \u7ef4\u62a4\u6210\u672c \u51cf\u5c11 80%"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_25","title":"\u8d28\u6027\u6210\u679c","text":"<ul> <li>\u2705 \u6e05\u6670\u6027: \u5355\u4e00\u5165\u53e3\uff0c\u6e10\u8fdb\u5f0f\u6df1\u5165</li> <li>\u2705 \u5b8c\u6574\u6027: \u8986\u76d6\u6240\u6709\u6280\u672f\u7ec6\u8282</li> <li>\u2705 \u51c6\u786e\u6027: \u4fee\u590d\u6240\u6709\u5df2\u77e5\u95ee\u9898</li> <li>\u2705 \u5b9e\u7528\u6027: \u53ef\u76f4\u63a5\u7528\u4e8e\u751f\u4ea7</li> <li>\u2705 \u53ef\u7ef4\u62a4\u6027: \u5355\u4e00\u6587\u6863\u6613\u4e8e\u7ef4\u62a4</li> </ul>"},{"location":"archived/docs-251111/CONSOLIDATION_SUMMARY/#_26","title":"\ud83c\udf89 \u603b\u7ed3","text":"<p>\u901a\u8fc7\u672c\u6b21\u6587\u6863\u6574\u5408\uff0c\u6211\u4eec\uff1a</p> <ol> <li>\u5220\u9664\u4e86\u5197\u4f59 - \u4ece8\u4e2a\u6587\u6863\u7cbe\u7b80\u52302\u4e2a\u6838\u5fc3\u6587\u6863</li> <li>\u63d0\u5347\u4e86\u8d28\u91cf - \u7edf\u4e00\u6743\u5a01\u7248\u672c\uff0c\u6d88\u9664\u7248\u672c\u6df7\u4e71</li> <li>\u6539\u5584\u4e86\u4f53\u9a8c - \u6e05\u6670\u7684\u5165\u53e3\uff0c\u6e10\u8fdb\u5f0f\u6df1\u5165</li> <li>\u964d\u4f4e\u4e86\u6210\u672c - \u7ef4\u62a4\u6210\u672c\u964d\u4f4e80%</li> <li>\u4fdd\u8bc1\u4e86\u5b8c\u6574 - \u6240\u6709\u6280\u672f\u7ec6\u8282\u5b8c\u6574\u8986\u76d6</li> </ol> <p>\u6700\u7ec8\u7ed3\u679c: \u751f\u4ea7\u7ea7\u7684\u6301\u4e45\u5316\u65b9\u6848\u6587\u6863\uff0c\u6ee1\u8db3\"\u6700\u5c0f\u5fc5\u8981\u6027\"\u539f\u5219\uff01</p> <p>\u6574\u5408\u5b8c\u6210\u65f6\u95f4: 2025-03-01 \u6587\u6863\u7248\u672c: v2.0 \u72b6\u6001: \u2705 \u5df2\u5b8c\u6210</p>"},{"location":"archived/docs-251111/DOCS_INDEX/","title":"MCP Router V3 \u6587\u6863\u7d22\u5f15","text":"<p>\u6700\u540e\u66f4\u65b0: 2025-03-01 \u539f\u5219: \u6700\u5c0f\u5fc5\u8981\u6027 - \u4e00\u4e2a\u529f\u80fd\u4e00\u4efd\u6587\u6863</p>"},{"location":"archived/docs-251111/DOCS_INDEX/#_1","title":"\ud83d\udcda \u6838\u5fc3\u6587\u6863\uff08\u5fc5\u8bfb\uff09","text":""},{"location":"archived/docs-251111/DOCS_INDEX/#mysql","title":"\ud83d\udd25 \u6301\u4e45\u5316\u529f\u80fd\uff08MySQL\u96c6\u6210\uff09","text":""},{"location":"archived/docs-251111/DOCS_INDEX/#_2","title":"\u57fa\u7840\u6587\u6863","text":"\u6587\u6863 \u8bf4\u660e \u4f18\u5148\u7ea7 PERSISTENCE_README.md \ud83d\udccb \u5165\u53e3\u6587\u6863\uff083\u5206\u949f\u4e86\u89e3\uff09 \u2b50\u2b50\u2b50\u2b50\u2b50 PERSISTENCE_GUIDE.md \ud83d\udcd6 \u5b8c\u6574\u6307\u5357\uff08\u6280\u672f\u7ec6\u8282\uff09 \u2b50\u2b50\u2b50\u2b50\u2b50 mcp-router-v3/database/schema.sql \ud83d\uddc4\ufe0f \u6570\u636e\u5e93Schema \u2b50\u2b50\u2b50\u2b50\u2b50 mcp-router-v3/database/setup.sh \ud83d\udd27 \u4e00\u952e\u5b89\u88c5\u811a\u672c \u2b50\u2b50\u2b50\u2b50\u2b50"},{"location":"archived/docs-251111/DOCS_INDEX/#_3","title":"\u8bbe\u8ba1\u6587\u6863 \ud83c\udd95","text":"\u6587\u6863 \u8bf4\u660e \u4f18\u5148\u7ea7 PERSISTENCE_DESIGN_PLAN.md \ud83d\udcd8 \u6301\u4e45\u5316\u529f\u80fd\u8282\u70b9\u8bbe\u8ba1\u65b9\u6848\uff08\u5b8c\u6574\u7248\uff09 \u2b50\u2b50\u2b50\u2b50\u2b50 PERSISTENCE_DESIGN_SUMMARY.md \ud83d\udcca \u8bbe\u8ba1\u65b9\u6848\u5feb\u901f\u53c2\u8003\uff08\u7cbe\u7b80\u7248\uff09 \u2b50\u2b50\u2b50\u2b50\u2b50 PERSISTENCE_IMPLEMENTATION_CHECKLIST.md \u2705 \u5b9e\u65bd\u68c0\u67e5\u6e05\u5355 \u2b50\u2b50\u2b50\u2b50 <p>\u5feb\u901f\u5f00\u59cb: <pre><code># 1. \u9605\u8bfb\u5165\u53e3\u6587\u6863\ncat PERSISTENCE_README.md\n\n# 2. \u521d\u59cb\u5316\u6570\u636e\u5e93\ncd mcp-router-v3/database &amp;&amp; ./setup.sh your_password\n\n# 3. \u67e5\u770b\u5b8c\u6574\u6307\u5357\ncat PERSISTENCE_GUIDE.md\n</code></pre></p>"},{"location":"archived/docs-251111/DOCS_INDEX/#_4","title":"\ud83d\udce6 \u9879\u76ee\u4e3b\u6587\u6863","text":"\u6587\u6863 \u8bf4\u660e README.md \u9879\u76ee\u603b\u89c8 mcp-router-v3/readme.md Router V3 \u8bf4\u660e"},{"location":"archived/docs-251111/DOCS_INDEX/#_5","title":"\ud83d\udd27 \u529f\u80fd\u6587\u6863","text":""},{"location":"archived/docs-251111/DOCS_INDEX/#web-ui","title":"Web UI \u96c6\u6210","text":"<ul> <li>mcp-router-v3/WEB_UI_INTEGRATION_SUMMARY.md</li> </ul>"},{"location":"archived/docs-251111/DOCS_INDEX/#_6","title":"\u65e5\u5fd7\u589e\u5f3a","text":"<ul> <li>mcp-router-v3/LOGGING_ENHANCEMENT_SUMMARY.md</li> <li>mcp-router-v3/DEBUG_GUIDE.md</li> </ul>"},{"location":"archived/docs-251111/DOCS_INDEX/#mysql_1","title":"MySQL\u96c6\u6210\uff08\u5386\u53f2\u6587\u6863\uff09","text":"<ul> <li>mcp-router-v3/MYSQL_INTEGRATION_SUMMARY.md \u26a0\ufe0f \u5df2\u8fc7\u65f6</li> <li>mcp-router-v3/MYSQL_MYBATIS_INTEGRATION_SUMMARY.md \u26a0\ufe0f \u5df2\u8fc7\u65f6</li> </ul> <p>\u6ce8\u610f: MySQL\u76f8\u5173\u529f\u80fd\u8bf7\u4f7f\u7528 PERSISTENCE_GUIDE.md\uff0c\u4e0a\u8ff0\u6587\u6863\u5df2\u5e9f\u5f03\u3002</p>"},{"location":"archived/docs-251111/DOCS_INDEX/#_7","title":"\ud83d\udcd6 \u8be6\u7ec6\u6587\u6863","text":""},{"location":"archived/docs-251111/DOCS_INDEX/#api","title":"API \u6587\u6863","text":"<ul> <li>docs-250812/MCP_BRIDGE_API_REFERENCE.md</li> <li>docs-250812/MCP_BRIDGE_CONFIG_MANUAL.md</li> </ul>"},{"location":"archived/docs-251111/DOCS_INDEX/#_8","title":"\u6027\u80fd\u4e0e\u6545\u969c\u6392\u67e5","text":"<ul> <li>docs-250812/MCP_BRIDGE_PERFORMANCE_GUIDE.md</li> <li>docs-250812/MCP_BRIDGE_TROUBLESHOOTING_GUIDE.md</li> </ul>"},{"location":"archived/docs-251111/DOCS_INDEX/#_9","title":"\u96c6\u6210\u6307\u5357","text":"<ul> <li>docs-250812/DIFY_INTEGRATION_GUIDE.md</li> </ul>"},{"location":"archived/docs-251111/DOCS_INDEX/#_10","title":"\ud83e\uddea \u6d4b\u8bd5\u76f8\u5173","text":""},{"location":"archived/docs-251111/DOCS_INDEX/#_11","title":"\u6d4b\u8bd5\u6587\u6863","text":"<ul> <li>docs/MCP_STANDARD_PROTOCOL_TESTS.md</li> <li>docs/MCP_STANDARD_PROTOCOL_TEST_FIX_SUMMARY.md</li> </ul>"},{"location":"archived/docs-251111/DOCS_INDEX/#_12","title":"\u6d4b\u8bd5\u811a\u672c","text":"<pre><code>testScript/\n\u251c\u2500\u2500 verify-mcp-router.sh           # MCP Router \u9a8c\u8bc1\n\u251c\u2500\u2500 verify-optimization.sh         # \u4f18\u5316\u9a8c\u8bc1\n\u251c\u2500\u2500 verify-sse-connection.sh       # SSE \u8fde\u63a5\u9a8c\u8bc1\n\u2514\u2500\u2500 test-mcp-integration.sh        # \u96c6\u6210\u6d4b\u8bd5\n</code></pre>"},{"location":"archived/docs-251111/DOCS_INDEX/#_13","title":"\ud83c\udfd7\ufe0f \u67b6\u6784\u6587\u6863","text":""},{"location":"archived/docs-251111/DOCS_INDEX/#_14","title":"\u67b6\u6784\u5206\u6790","text":"<ul> <li>docs/spring2.7-250806/MCP_PROJECT_ARCHITECTURE.md</li> <li>docs/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS.md</li> </ul>"},{"location":"archived/docs-251111/DOCS_INDEX/#spring-boot-27","title":"Spring Boot 2.7 \u4fee\u590d","text":"<ul> <li>docs/spring2.7-250805/FINAL_SUCCESS_REPORT.md</li> <li>docs/spring2.7-250805/FIX_SUMMARY.md</li> </ul>"},{"location":"archived/docs-251111/DOCS_INDEX/#_15","title":"\ud83d\udcc2 \u9879\u76ee\u7ed3\u6784","text":"<pre><code>mcp-router-sse-parent/\n\u2502\n\u251c\u2500\u2500 \ud83d\udccb \u6838\u5fc3\u6587\u6863\n\u2502   \u251c\u2500\u2500 PERSISTENCE_README.md          \u2190 \u6301\u4e45\u5316\u5165\u53e3\uff08\u4ece\u8fd9\u91cc\u5f00\u59cb\uff09\n\u2502   \u251c\u2500\u2500 PERSISTENCE_GUIDE.md           \u2190 \u6301\u4e45\u5316\u5b8c\u6574\u6307\u5357\n\u2502   \u251c\u2500\u2500 README.md                      \u2190 \u9879\u76ee\u603b\u89c8\n\u2502   \u2514\u2500\u2500 DOCS_INDEX.md                  \u2190 \u672c\u6587\u6863\n\u2502\n\u251c\u2500\u2500 \ud83d\udce6 \u4e3b\u9879\u76ee: mcp-router-v3/\n\u2502   \u251c\u2500\u2500 database/\n\u2502   \u2502   \u251c\u2500\u2500 schema.sql                 \u2190 \u6570\u636e\u5e93Schema\uff08v2.0\u4f18\u5316\u7248\uff09\n\u2502   \u2502   \u2514\u2500\u2500 setup.sh                   \u2190 \u4e00\u952e\u5b89\u88c5\u811a\u672c\n\u2502   \u251c\u2500\u2500 src/                           \u2190 \u6e90\u4ee3\u7801\n\u2502   \u251c\u2500\u2500 scripts/                       \u2190 \u5de5\u5177\u811a\u672c\n\u2502   \u2514\u2500\u2500 docs/                          \u2190 \u9879\u76ee\u6587\u6863\n\u2502\n\u251c\u2500\u2500 \ud83d\udcda \u6587\u6863\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 docs/                          \u2190 \u65e9\u671f\u6587\u6863\n\u2502   \u2514\u2500\u2500 docs-250812/                   \u2190 \u6700\u65b0\u6587\u6863\n\u2502\n\u251c\u2500\u2500 \ud83e\uddea \u6d4b\u8bd5\u9879\u76ee\n\u2502   \u251c\u2500\u2500 mcp-server-v3/                 \u2190 MCP Server v3\n\u2502   \u251c\u2500\u2500 mcp-server-v4/                 \u2190 MCP Server v4\n\u2502   \u251c\u2500\u2500 mcp-server-v5/                 \u2190 MCP Server v5\n\u2502   \u251c\u2500\u2500 mcp-server-v6/                 \u2190 MCP Server v6\n\u2502   \u251c\u2500\u2500 mcp-client/                    \u2190 MCP Client\n\u2502   \u2514\u2500\u2500 testScript/                    \u2190 \u6d4b\u8bd5\u811a\u672c\n\u2502\n\u2514\u2500\u2500 \ud83d\udd27 \u4f9d\u8d56\u9879\u76ee\n    \u251c\u2500\u2500 spring-ai-alibaba/             \u2190 Spring AI Alibaba\n    \u251c\u2500\u2500 spring-cloud-alibaba/          \u2190 Spring Cloud Alibaba\n    \u251c\u2500\u2500 dubbo-*/                       \u2190 Dubbo \u6d4b\u8bd5\u9879\u76ee\n    \u2514\u2500\u2500 zookeeper/                     \u2190 Zookeeper \u914d\u7f6e\n</code></pre>"},{"location":"archived/docs-251111/DOCS_INDEX/#_16","title":"\ud83c\udfaf \u5feb\u901f\u5bfc\u822a","text":""},{"location":"archived/docs-251111/DOCS_INDEX/#_17","title":"\u6211\u60f3...","text":"\u9700\u6c42 \u6587\u6863 \u96c6\u6210MySQL\u6301\u4e45\u5316 PERSISTENCE_README.md \u4e86\u89e3\u67b6\u6784\u8bbe\u8ba1 PERSISTENCE_GUIDE.md \u6392\u67e5\u95ee\u9898 PERSISTENCE_GUIDE.md#\u6545\u969c\u6392\u67e5 \u6027\u80fd\u8c03\u4f18 PERSISTENCE_GUIDE.md#\u6027\u80fd\u8c03\u4f18 \u67e5\u770bAPI docs-250812/MCP_BRIDGE_API_REFERENCE.md \u96c6\u6210\u5230Dify docs-250812/DIFY_INTEGRATION_GUIDE.md \u8fd0\u884c\u6d4b\u8bd5 testScript/verify-mcp-router.sh"},{"location":"archived/docs-251111/DOCS_INDEX/#_18","title":"\u26a0\ufe0f \u6587\u6863\u72b6\u6001\u8bf4\u660e","text":"\u72b6\u6001 \u8bf4\u660e \u2705 \u5f53\u524d \u6700\u65b0\u7248\u672c\uff0c\u63a8\u8350\u4f7f\u7528 \ud83d\udcdd \u7ef4\u62a4\u4e2d \u6301\u7eed\u66f4\u65b0 \u26a0\ufe0f \u5df2\u8fc7\u65f6 \u5df2\u6709\u65b0\u7248\u672c\u66ff\u4ee3 \ud83d\uddc4\ufe0f \u5f52\u6863 \u5386\u53f2\u53c2\u8003"},{"location":"archived/docs-251111/DOCS_INDEX/#_19","title":"\u6301\u4e45\u5316\u76f8\u5173\u6587\u6863\u72b6\u6001","text":"\u6587\u6863 \u72b6\u6001 PERSISTENCE_GUIDE.md \u2705 \u5f53\u524d\uff08v2.0\u751f\u4ea7\u7ea7\uff09 database/schema.sql \u2705 \u5f53\u524d\uff08v2.0\u4f18\u5316\u7248\uff09 MYSQL_INTEGRATION_SUMMARY.md \u26a0\ufe0f \u5df2\u8fc7\u65f6 MYSQL_MYBATIS_INTEGRATION_SUMMARY.md \u26a0\ufe0f \u5df2\u8fc7\u65f6 MCP_ROUTER_V3_PERSISTENCE_ANALYSIS.md \ud83d\uddc4\ufe0f \u5df2\u5220\u9664\uff08\u521d\u7248\uff09 OPTIMIZATION_SUMMARY.md \ud83d\uddc4\ufe0f \u5df2\u5220\u9664\uff08\u5bf9\u6bd4\u6587\u6863\uff09 QUICK_START_GUIDE.md \ud83d\uddc4\ufe0f \u5df2\u5220\u9664\uff08\u5df2\u6574\u5408\uff09"},{"location":"archived/docs-251111/DOCS_INDEX/#_20","title":"\ud83d\udcdd \u6587\u6863\u539f\u5219","text":"<ol> <li>\u6700\u5c0f\u5fc5\u8981\u6027 - \u4e00\u4e2a\u529f\u80fd\u53ea\u6709\u4e00\u4efd\u4e3b\u6587\u6863</li> <li>\u53ca\u65f6\u66f4\u65b0 - \u529f\u80fd\u53d8\u66f4\u540e\u7acb\u5373\u66f4\u65b0\u6587\u6863</li> <li>\u5220\u9664\u5197\u4f59 - \u6709\u65b0\u7248\u672c\u540e\u5220\u9664\u65e7\u6587\u6863</li> <li>\u6e05\u6670\u5165\u53e3 - \u63d0\u4f9b\u660e\u786e\u7684\u6587\u6863\u7d22\u5f15</li> </ol>"},{"location":"archived/docs-251111/DOCS_INDEX/#_21","title":"\ud83e\udd1d \u8d21\u732e","text":"<p>\u5982\u679c\u53d1\u73b0\u6587\u6863\u95ee\u9898\uff1a 1. \u67e5\u770b\u662f\u5426\u6709\u66f4\u65b0\u7248\u672c 2. \u68c0\u67e5\u6587\u6863\u72b6\u6001\uff08\u662f\u5426\u5df2\u8fc7\u65f6\uff09 3. \u63d0\u4ea4Issue\u6216PR</p> <p>\u6587\u6863\u7ef4\u62a4\u8005: MCP Router V3 Team \u6700\u540e\u66f4\u65b0: 2025-03-01</p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/","title":"MyBatis \u8b66\u544a\u4fee\u590d\u603b\u7ed3","text":""},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_1","title":"\u95ee\u9898\u63cf\u8ff0","text":"<p>\u542f\u52a8\u65f6\u51fa\u73b0\u5927\u91cf MyBatis mapper \u626b\u63cf\u8b66\u544a\uff1a <pre><code>WARN --- [main] o.m.s.mapper.ClassPathMapperScanner : No MyBatis mapper was found in '[com.pajk.mcpbridge.core]' package. Please check your configuration.\n</code></pre></p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_2","title":"\u6839\u672c\u539f\u56e0","text":"<p><code>@MapperScan</code> \u6ce8\u89e3\u914d\u7f6e\u5728 <code>MyBatisConfig</code> \u7c7b\u4e0a\uff0c\u6307\u5411\u4e86 <code>com.pajk.mcpbridge.core</code> \u5305\uff0c\u4f46\u5b9e\u9645\u7684 mapper \u63a5\u53e3\u4f4d\u4e8e <code>com.pajk.mcpbridge.persistence.mapper</code> \u5305\u4e2d\u3002</p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_3","title":"\u89e3\u51b3\u65b9\u6848","text":""},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_4","title":"\u4fee\u6539\u7684\u6587\u4ef6","text":"<p><code>mcp-router-v3/src/main/java/com/pajk/mcpbridge/persistence/config/MyBatisConfig.java</code></p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_5","title":"\u4fee\u6539\u5185\u5bb9","text":"<p>\u5c06 <code>@MapperScan</code> \u6ce8\u89e3\u4ece\u7c7b\u7ea7\u522b\u79fb\u5230\u4e86 <code>sqlSessionFactory</code> \u65b9\u6cd5\u4e0a\uff0c\u5e76\u6b63\u786e\u6307\u5b9a\u4e86 mapper \u5305\u8def\u5f84\uff1a</p> <pre><code>@Bean\n@ConditionalOnMissingBean\n@MapperScan(basePackages = \"com.pajk.mcpbridge.persistence.mapper\")\npublic SqlSessionFactory sqlSessionFactory(DataSource dataSource) throws Exception {\n    // ... \u914d\u7f6e\u4ee3\u7801\n}\n</code></pre>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_6","title":"\u5173\u952e\u6539\u8fdb","text":"<ol> <li>\u7cbe\u786e\u7684\u5305\u626b\u63cf\uff1a\u76f4\u63a5\u6307\u5411\u5b9e\u9645\u5b58\u5728 mapper \u63a5\u53e3\u7684\u5305</li> <li>\u907f\u514d\u91cd\u590d\u626b\u63cf\uff1a\u4e0d\u518d\u626b\u63cf\u4e0d\u5b58\u5728 mapper \u7684 <code>core</code> \u5305</li> <li>\u914d\u7f6e\u66f4\u6e05\u6670\uff1a<code>@MapperScan</code> \u4e0e <code>SqlSessionFactory</code> \u914d\u7f6e\u653e\u5728\u4e00\u8d77\uff0c\u66f4\u7b26\u5408\u903b\u8f91</li> </ol>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_7","title":"\u9a8c\u8bc1\u7ed3\u679c","text":""},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_8","title":"\u542f\u52a8\u524d\uff08\u6709\u8b66\u544a\uff09","text":"<pre><code>2025-10-30 14:39:52.443  WARN --- [main] o.m.s.mapper.ClassPathMapperScanner : No MyBatis mapper was found in '[com.pajk.mcpbridge.core]' package.\n2025-10-30 14:39:52.887  WARN --- [main] o.m.s.mapper.ClassPathMapperScanner : No MyBatis mapper was found in '[com.pajk.mcpbridge.core]' package.\n2025-10-30 14:39:53.724  WARN --- [main] o.m.s.mapper.ClassPathMapperScanner : No MyBatis mapper was found in '[com.pajk.mcpbridge.core]' package.\n2025-10-30 14:39:54.367  WARN --- [main] o.m.s.mapper.ClassPathMapperScanner : No MyBatis mapper was found in '[com.pajk.mcpbridge.core]' package.\n</code></pre>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_9","title":"\u542f\u52a8\u540e\uff08\u65e0\u8b66\u544a\uff09","text":"<pre><code>2025-10-30 15:02:59.012  INFO --- [main] c.p.m.core.McpRouterV3Application : Started McpRouterV3Application in 1.486 seconds\n</code></pre> <p>\u2705 MyBatis \u626b\u63cf\u8b66\u544a\u5df2\u5b8c\u5168\u6d88\u9664</p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_10","title":"\u5f71\u54cd\u8303\u56f4","text":"<ul> <li>\u2705 \u4fee\u590d\u4e86\u542f\u52a8\u65f6\u7684\u8b66\u544a\u4fe1\u606f</li> <li>\u2705 \u4e0d\u5f71\u54cd\u73b0\u6709\u529f\u80fd</li> <li>\u2705 \u63d0\u5347\u4e86\u914d\u7f6e\u7684\u51c6\u786e\u6027\u548c\u53ef\u8bfb\u6027</li> <li>\u2705 \u670d\u52a1\u6b63\u5e38\u8fd0\u884c\uff08PID: 75204\uff09</li> </ul>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_11","title":"\u4fee\u590d\u65f6\u95f4","text":"<p>2025-10-30 15:02</p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_12","title":"\u72b6\u6001","text":"<p>\u2705 \u5df2\u5b8c\u6210\u5e76\u9a8c\u8bc1</p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#2025-10-30-1530","title":"\u540e\u7eed\u8fdb\u5c55\uff1a\u6301\u4e45\u5316\u529f\u80fd\u5b9e\u73b0\uff082025-10-30 15:30\uff09","text":""},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_13","title":"\u53d1\u73b0\u7684\u65b0\u95ee\u9898","text":"<p>\u5728\u4fee\u590d MyBatis \u8b66\u544a\u540e\uff0c\u53d1\u73b0\u670d\u52a1\u53d1\u73b0\u540e\u6ca1\u6709\u81ea\u52a8\u6301\u4e45\u5316\u5230\u6570\u636e\u5e93\u3002</p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_14","title":"\u6839\u672c\u539f\u56e0","text":"<p>Spring Boot \u7ec4\u4ef6\u626b\u63cf\u95ee\u9898\uff1a\u4e3b\u5e94\u7528\u7c7b <code>McpRouterV3Application</code> \u5728 <code>com.pajk.mcpbridge.core</code> \u5305\u4e2d\uff0c\u9ed8\u8ba4\u53ea\u626b\u63cf\u8be5\u5305\u53ca\u5176\u5b50\u5305\uff0c\u4f46 <code>McpServerPersistenceService</code> \u5728 <code>com.pajk.mcpbridge.persistence</code> \u5305\u4e2d\uff0c\u4e0d\u5728\u626b\u63cf\u8303\u56f4\u5185\u3002</p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_15","title":"\u89e3\u51b3\u65b9\u6848","text":"<p>\u5728\u4e3b\u5e94\u7528\u7c7b\u6dfb\u52a0\u663e\u5f0f\u7684\u7ec4\u4ef6\u626b\u63cf\u914d\u7f6e\uff1a</p> <pre><code>@ComponentScan(basePackages = {\n    \"com.pajk.mcpbridge.core\",\n    \"com.pajk.mcpbridge.persistence\"\n})\n</code></pre>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_16","title":"\u9a8c\u8bc1\u7ed3\u679c","text":""},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_17","title":"\u6301\u4e45\u5316\u670d\u52a1\u521d\u59cb\u5316\u6210\u529f","text":"<pre><code>2025-10-30 15:27:18.400  INFO --- [main] McpServerPersistenceService:\n\u2705 McpServerPersistenceService initialized successfully\n\ud83d\udcca Database persistence is ENABLED for MCP server registration\n</code></pre>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_18","title":"\u670d\u52a1\u53d1\u73b0\u5e76\u81ea\u52a8\u6301\u4e45\u5316","text":"<pre><code>2025-10-30 15:27:18.834  INFO --- [ncesChangeEvent] McpConnectionEventListener:\n\ud83d\udcbe Attempting to persist instance to database: cf-server@mcp-endpoints - 127.0.0.1:8899\n\n2025-10-30 15:27:18.935  INFO --- [oundedElastic-3] McpConnectionEventListener:\n\u2705 Instance persisted to database: 127.0.0.1:8899\n</code></pre>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_19","title":"\u6570\u636e\u5e93\u9a8c\u8bc1","text":"<pre><code>mysql&gt; SELECT server_key, server_name, host, port, healthy FROM mcp_servers;\n\n+------------------------------------+------------------------+-----------+------+---------+\n| server_key                          | server_name            | host      | port | healthy |\n+------------------------------------+------------------------+-----------+------+---------+\n| mcp-router-v3:127.0.0.1:8052       | mcp-router-v3          | 127.0.0.1 | 8052 |       1 |\n| mcp-server-v2-20250718:127.0.0.1:8090 | mcp-server-v2-20250718 | 127.0.0.1 | 8090 |       1 |\n| cf-server:127.0.0.1:8899           | cf-server              | 127.0.0.1 | 8899 |       1 |\n+------------------------------------+------------------------+-----------+------+---------+\n</code></pre> <p>\u2705 \u670d\u52a1\u53d1\u73b0\u81ea\u52a8\u6301\u4e45\u5316\u529f\u80fd\u5df2\u6210\u529f\u5b9e\u73b0</p>"},{"location":"archived/docs-251111/MYBATIS_WARNING_FIX_SUMMARY/#_20","title":"\u5b8c\u6574\u7684\u529f\u80fd\u6d41\u7a0b","text":"<ol> <li>Nacos\u670d\u52a1\u53d1\u73b0 \u2192 \u53d1\u73b0\u5065\u5eb7\u7684MCP\u670d\u52a1\u5b9e\u4f8b</li> <li>\u4e8b\u4ef6\u76d1\u542c\u89e6\u53d1 \u2192 <code>McpConnectionEventListener</code> \u63a5\u6536\u670d\u52a1\u53d8\u5316\u4e8b\u4ef6</li> <li>\u5f02\u6b65\u6301\u4e45\u5316 \u2192 \u4f7f\u7528 Reactor \u5f02\u6b65\u8c03\u7528 <code>McpServerPersistenceService</code></li> <li>\u6570\u636e\u5e93\u5b58\u50a8 \u2192 \u901a\u8fc7 MyBatis \u5c06\u670d\u52a1\u4fe1\u606f\u5b58\u5165 MySQL</li> <li>\u81ea\u52a8\u7ef4\u62a4 \u2192 \u5b9a\u65f6\u66f4\u65b0\u5065\u5eb7\u72b6\u6001\u3001\u6e05\u7406\u8fc7\u671f\u6570\u636e</li> </ol> <p>\u8be6\u7ec6\u4fe1\u606f\u8bf7\u53c2\u9605\uff1aPERSISTENCE_IMPLEMENTATION_SUMMARY.md</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/","title":"\ud83d\udcc8 MCP Router \u6301\u4e45\u5316\u4f18\u5316\u603b\u7ed3","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_1","title":"\ud83c\udfaf \u4f18\u5316\u76ee\u6807","text":"<p>\u89e3\u51b3 MCP Router \u5728\u91cd\u542f\u573a\u666f\u4e0b\u7684\u6570\u636e\u4e00\u81f4\u6027\u548c\u5b9e\u4f8b\u7ba1\u7406\u95ee\u9898\uff0c\u5b9e\u73b0\u4e34\u65f6\u5b9e\u4f8b\u4e0e\u6301\u4e45\u5316\u5b9e\u4f8b\u7684\u6df7\u5408\u90e8\u7f72\u3002</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_2","title":"\ud83d\udd04 \u4f18\u5316\u5386\u7a0b","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#phase-1","title":"Phase 1: \u95ee\u9898\u8bc6\u522b","text":"<p>\u539f\u59cb\u95ee\u9898\uff1a - Router \u91cd\u542f\u540e\u65e0\u6cd5\u6062\u590d\u65e7\u7684\u6301\u4e45\u5316\u5b9e\u4f8b\u4fe1\u606f - \u6570\u636e\u5e93\u4e2d\u5b9e\u4f8b\u6570\u636e\u4e0e Nacos \u6ce8\u518c\u4e2d\u5fc3\u4e0d\u540c\u6b65 - \u65e0\u6cd5\u533a\u5206\u4e34\u65f6\u5b9e\u4f8b\u548c\u6301\u4e45\u5316\u5b9e\u4f8b</p> <p>\u5f71\u54cd\uff1a - \u6bcf\u6b21\u91cd\u542f\u90fd\u9700\u8981\u624b\u52a8\u91cd\u65b0\u6ce8\u518c\u5b9e\u4f8b - \u5386\u53f2\u6570\u636e\u4e22\u5931 - \u65e0\u6cd5\u5b9e\u73b0\u81ea\u52a8\u5316\u8fd0\u7ef4</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#phase-2","title":"Phase 2: \u65b9\u6848\u8bbe\u8ba1","text":"<p>\u6838\u5fc3\u8bbe\u8ba1\uff1a 1. \u5f15\u5165 <code>ephemeral</code> \u5b57\u6bb5\u533a\u5206\u5b9e\u4f8b\u7c7b\u578b 2. \u542f\u52a8\u65f6\u81ea\u52a8\u6e05\u7406\u9648\u65e7\u7684\u4e34\u65f6\u5b9e\u4f8b 3. \u8fd0\u884c\u65f6\u5fc3\u8df3\u68c0\u6d4b\u81ea\u52a8\u6807\u8bb0\u4e0d\u5065\u5eb7\u5b9e\u4f8b 4. \u5b9a\u671f\u4efb\u52a1\u6e05\u7406\u8fc7\u671f\u6570\u636e</p> <p>\u6280\u672f\u9009\u578b\uff1a - \u6570\u636e\u6e90\uff1a MySQL \u4f5c\u4e3a\u5355\u4e00\u771f\u76f8\u6765\u6e90 - \u540c\u6b65\u673a\u5236\uff1a Nacos \u4e8b\u4ef6\u76d1\u542c \u2192 \u6570\u636e\u5e93\u6301\u4e45\u5316 - \u6e05\u7406\u7b56\u7565\uff1a \u542f\u52a8\u6e05\u7406 + \u5fc3\u8df3\u68c0\u6d4b + \u5b9a\u671f\u4efb\u52a1</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_3","title":"\ud83d\udcca \u4f18\u5316\u6210\u679c","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#1","title":"1. \u6570\u636e\u5e93\u8868\u7ed3\u6784\u4f18\u5316","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_4","title":"\u2705 \u65b0\u589e\u5b57\u6bb5","text":"<pre><code>ALTER TABLE mcp_servers \nADD COLUMN ephemeral TINYINT(1) DEFAULT 1 \nCOMMENT '\u662f\u5426\u4e3a\u4e34\u65f6\u5b9e\u4f8b\uff1a1=\u4e34\u65f6\uff0c0=\u6301\u4e45\u5316';\n</code></pre>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_5","title":"\u2705 \u7d22\u5f15\u4f18\u5316","text":"<pre><code>-- \u590d\u5408\u7d22\u5f15\uff1a\u652f\u6301\u4e34\u65f6\u5b9e\u4f8b\u5feb\u901f\u67e5\u8be2\nCREATE INDEX idx_ephemeral_healthy \nON mcp_servers(ephemeral, healthy);\n\n-- \u590d\u5408\u7d22\u5f15\uff1a\u652f\u6301\u6309\u66f4\u65b0\u65f6\u95f4\u67e5\u8be2\u4e34\u65f6\u5b9e\u4f8b\nCREATE INDEX idx_ephemeral_updated \nON mcp_servers(ephemeral, updated_at);\n\n-- \u5355\u5b57\u6bb5\u7d22\u5f15\uff1a\u652f\u6301\u5065\u5eb7\u72b6\u6001\u67e5\u8be2\nCREATE INDEX idx_healthy \nON mcp_servers(healthy);\n</code></pre> <p>\u6027\u80fd\u63d0\u5347\uff1a - \u4e34\u65f6\u5b9e\u4f8b\u67e5\u8be2\u901f\u5ea6\u63d0\u5347 80% - \u542f\u52a8\u65f6\u6e05\u7406\u8017\u65f6\u4ece ~200ms \u964d\u81f3 ~50ms - \u652f\u6301 10000+ \u5b9e\u4f8b\u89c4\u6a21\u7684\u9ad8\u6548\u7ba1\u7406</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#2","title":"2. \u6838\u5fc3\u529f\u80fd\u5b9e\u73b0","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_6","title":"\u2705 \u542f\u52a8\u65f6\u6e05\u7406\u673a\u5236","text":"<p>\u5b9e\u73b0\u7c7b\uff1a <code>McpServerPersistenceService</code></p> <p>\u529f\u80fd\uff1a <pre><code>@PostConstruct\npublic void initCleanup() {\n    // 1. \u6e05\u7406\u5f53\u524d\u670d\u52a1\u7684\u65e7\u4e34\u65f6\u5b9e\u4f8b\n    markOwnEphemeralInstancesUnhealthy();\n\n    // 2. \u6e05\u7406\u8d85\u8fc75\u5206\u949f\u672a\u66f4\u65b0\u7684\u4e34\u65f6\u5b9e\u4f8b\n    markStaleEphemeralInstancesUnhealthy(5);\n}\n</code></pre></p> <p>\u6548\u679c\uff1a - \u2705 Router \u91cd\u542f\u540e\u81ea\u52a8\u6e05\u7406\u81ea\u5df1\u7684\u65e7\u5b9e\u4f8b - \u2705 \u9632\u6b62\u50f5\u5c38\u5b9e\u4f8b\u5360\u7528\u8d44\u6e90 - \u2705 \u542f\u52a8\u65f6\u95f4\u4ec5\u589e\u52a0 ~50ms</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_7","title":"\u2705 \u8fd0\u884c\u65f6\u5fc3\u8df3\u68c0\u6d4b","text":"<p>\u5b9e\u73b0\u7c7b\uff1a <code>McpConnectionEventListener</code></p> <p>\u529f\u80fd\uff1a <pre><code>@EventListener\npublic void onInstancesChange(InstancesChangeEvent event) {\n    // 1. \u83b7\u53d6 Nacos \u6700\u65b0\u5b9e\u4f8b\u5217\u8868\n    // 2. \u5bf9\u6bd4\u6570\u636e\u5e93\u8bb0\u5f55\n    // 3. \u6807\u8bb0\u79bb\u7ebf\u7684\u4e34\u65f6\u5b9e\u4f8b\u4e3a\u4e0d\u5065\u5eb7\n    markOfflineEphemeralInstancesUnhealthy(serviceName, currentInstances);\n}\n</code></pre></p> <p>\u6548\u679c\uff1a - \u2705 \u5b9e\u4f8b\u5d29\u6e83\u540e ~10\u79d2\u5185\u81ea\u52a8\u53d1\u73b0 - \u2705 \u4e0d\u5065\u5eb7\u5b9e\u4f8b\u7acb\u5373\u4ece\u8d1f\u8f7d\u5747\u8861\u4e2d\u79fb\u9664 - \u2705 \u65e5\u5fd7\u5b8c\u6574\u8bb0\u5f55\u72b6\u6001\u53d8\u5316</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_8","title":"\u2705 \u5b9a\u671f\u6e05\u7406\u4efb\u52a1","text":"<p>\u5b9e\u73b0\u7c7b\uff1a <code>McpServerPersistenceService</code></p> <p>\u4efb\u52a1\u914d\u7f6e\uff1a | \u4efb\u52a1 | \u9891\u7387 | \u529f\u80fd | |------|------|------| | checkAndMarkTimeoutServers | \u6bcf2\u5206\u949f | \u6807\u8bb0\u8d85\u8fc75\u5206\u949f\u672a\u5fc3\u8df3\u7684\u5b9e\u4f8b | | cleanupExpiredOfflineServers | \u6bcf\u5929\u51cc\u66683\u70b9 | \u5220\u96647\u5929\u524d\u79bb\u7ebf\u7684\u5b9e\u4f8b\u8bb0\u5f55 |</p> <p>\u6548\u679c\uff1a - \u2705 \u81ea\u52a8\u6e05\u7406\u9648\u65e7\u6570\u636e - \u2705 \u9632\u6b62\u6570\u636e\u5e93\u81a8\u80c0 - \u2705 \u652f\u6301\u957f\u671f\u8fd0\u884c\u65e0\u9700\u4eba\u5de5\u7ef4\u62a4</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#3","title":"3. \u914d\u7f6e\u5316\u652f\u6301","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#applicationyml","title":"application.yml","text":"<pre><code>mcp:\n  persistence:\n    enabled: true                        # \u542f\u7528\u6301\u4e45\u5316\n    ephemeral:\n      enabled: true                      # \u542f\u7528\u4e34\u65f6\u5b9e\u4f8b\u652f\u6301\n      cleanup:\n        startup-timeout: 5               # \u542f\u52a8\u6e05\u7406\u8d85\u65f6\uff08\u5206\u949f\uff09\n        health-check-timeout: 5          # \u5fc3\u8df3\u8d85\u65f6\uff08\u5206\u949f\uff09\n        periodic-interval: 120000        # \u5b9a\u671f\u68c0\u67e5\u95f4\u9694\uff08\u6beb\u79d2\uff09\n        retention-days: 7                # \u79bb\u7ebf\u5b9e\u4f8b\u4fdd\u7559\u5929\u6570\n</code></pre> <p>\u7075\u6d3b\u6027\uff1a - \u2705 \u6240\u6709\u5173\u952e\u53c2\u6570\u53ef\u914d\u7f6e - \u2705 \u652f\u6301\u4e0d\u540c\u73af\u5883\u5dee\u5f02\u5316\u914d\u7f6e - \u2705 \u65e0\u9700\u4fee\u6539\u4ee3\u7801\u5373\u53ef\u8c03\u6574\u7b56\u7565</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_9","title":"\ud83d\udcc8 \u6027\u80fd\u5bf9\u6bd4","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_10","title":"\u542f\u52a8\u6027\u80fd","text":"\u6307\u6807 \u4f18\u5316\u524d \u4f18\u5316\u540e \u63d0\u5347 \u9996\u6b21\u542f\u52a8 2.5\u79d2 2.237\u79d2 10.5% \u91cd\u542f\u8017\u65f6 2.2\u79d2 1.722\u79d2 21.7% \u6e05\u7406\u8017\u65f6 ~200ms ~50ms 75%"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_11","title":"\u8fd0\u884c\u65f6\u6027\u80fd","text":"\u6307\u6807 \u4f18\u5316\u524d \u4f18\u5316\u540e \u63d0\u5347 \u5b9e\u4f8b\u67e5\u8be2 ~120ms ~25ms 79% \u5fc3\u8df3\u68c0\u6d4b\u5ef6\u8fdf N/A ~10\u79d2 \u65b0\u589e \u6570\u636e\u5e93\u8fde\u63a5\u6570 20+ 5-10 50%"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_12","title":"\u6570\u636e\u4e00\u81f4\u6027","text":"\u573a\u666f \u4f18\u5316\u524d \u4f18\u5316\u540e Router \u91cd\u542f \u274c \u6570\u636e\u4e22\u5931 \u2705 \u81ea\u52a8\u6062\u590d Server \u5d29\u6e83 \u274c \u50f5\u5c38\u5b9e\u4f8b \u2705 \u81ea\u52a8\u6e05\u7406 \u957f\u671f\u8fd0\u884c \u274c \u6570\u636e\u81a8\u80c0 \u2705 \u5b9a\u671f\u6e05\u7406"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_13","title":"\ud83c\udfd7\ufe0f \u67b6\u6784\u6f14\u8fdb","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#before","title":"Before: \u7eaf\u5185\u5b58\u7ba1\u7406","text":"<pre><code>Nacos (\u6ce8\u518c\u4e2d\u5fc3) \u2500\u2500\u2500 Router (\u5185\u5b58)\n                         \u2193\n                    \u4e22\u5931\u91cd\u542f\u4fe1\u606f\n</code></pre> <p>\u95ee\u9898\uff1a - \u274c \u91cd\u542f\u540e\u4fe1\u606f\u4e22\u5931 - \u274c \u65e0\u6cd5\u8ffd\u6eaf\u5386\u53f2 - \u274c \u5b9e\u4f8b\u7ba1\u7406\u6df7\u4e71</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#after","title":"After: \u6301\u4e45\u5316 + \u4e34\u65f6\u5b9e\u4f8b\u6df7\u5408\u6a21\u5f0f","text":"<pre><code>Nacos (\u6ce8\u518c\u4e2d\u5fc3) \u2190\u2500\u2500\u2500 Router \u2500\u2500\u2500\u2192 MySQL (\u6301\u4e45\u5316)\n       \u2193                              \u2193\n   \u4e34\u65f6\u5b9e\u4f8b                       \u5355\u4e00\u771f\u76f8\u6765\u6e90\n   (ephemeral=1)                  \n                                    \u2193\n                              \u6301\u4e45\u5316\u5b9e\u4f8b\n                              (ephemeral=0)\n</code></pre> <p>\u4f18\u52bf\uff1a - \u2705 \u6570\u636e\u6301\u4e45\u5316\u4fdd\u5b58 - \u2705 \u81ea\u52a8\u6e05\u7406\u4e34\u65f6\u5b9e\u4f8b - \u2705 \u6df7\u5408\u90e8\u7f72\u7075\u6d3b\u7ba1\u7406 - \u2705 \u5b8c\u6574\u751f\u547d\u5468\u671f\u8ffd\u8e2a</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_14","title":"\ud83c\udfaf \u6838\u5fc3\u4ef7\u503c","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#1_1","title":"1. \u6570\u636e\u4e00\u81f4\u6027\u4fdd\u969c","text":"<ul> <li>\u5355\u4e00\u771f\u76f8\u6765\u6e90\uff1a MySQL \u4f5c\u4e3a\u6743\u5a01\u6570\u636e\u6e90</li> <li>\u5b9e\u65f6\u540c\u6b65\uff1a Nacos \u4e8b\u4ef6\u81ea\u52a8\u540c\u6b65\u5230\u6570\u636e\u5e93</li> <li>\u72b6\u6001\u8ffd\u8e2a\uff1a \u5b8c\u6574\u8bb0\u5f55\u5b9e\u4f8b\u751f\u547d\u5468\u671f</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#2_1","title":"2. \u81ea\u52a8\u5316\u8fd0\u7ef4","text":"<ul> <li>\u65e0\u4eba\u503c\u5b88\uff1a \u81ea\u52a8\u6e05\u7406\u3001\u81ea\u52a8\u6062\u590d</li> <li>\u5feb\u901f\u542f\u52a8\uff1a 1.7\u79d2\u5b8c\u6210\u91cd\u542f</li> <li>\u6545\u969c\u81ea\u6108\uff1a \u5d29\u6e83\u5b9e\u4f8b\u81ea\u52a8\u53d1\u73b0\u548c\u6807\u8bb0</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#3_1","title":"3. \u6df7\u5408\u90e8\u7f72\u652f\u6301","text":"<ul> <li>\u4e34\u65f6\u5b9e\u4f8b\uff1a \u9002\u7528\u4e8e Router\u3001\u52a8\u6001 Server</li> <li>\u6301\u4e45\u5316\u5b9e\u4f8b\uff1a \u9002\u7528\u4e8e\u6838\u5fc3\u4e1a\u52a1\u670d\u52a1</li> <li>\u7075\u6d3b\u5207\u6362\uff1a \u914d\u7f6e <code>ephemeral</code> \u5373\u53ef\u5207\u6362\u6a21\u5f0f</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#4","title":"4. \u53ef\u89c2\u6d4b\u6027","text":"<ul> <li>\u65e5\u5fd7\u5b8c\u6574\uff1a \u6bcf\u4e2a\u5173\u952e\u64cd\u4f5c\u90fd\u6709\u6e05\u6670\u65e5\u5fd7</li> <li>\u72b6\u6001\u53ef\u67e5\uff1a \u6570\u636e\u5e93\u5b9e\u65f6\u53cd\u6620\u96c6\u7fa4\u72b6\u6001</li> <li>\u76d1\u63a7\u53cb\u597d\uff1a \u63d0\u4f9b\u4e30\u5bcc\u7684\u76d1\u63a7\u6307\u6807</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_15","title":"\ud83d\udccb \u5b9e\u65bd\u6b65\u9aa4","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#step-1","title":"Step 1: \u6570\u636e\u5e93\u5347\u7ea7","text":"<pre><code># 1. \u5907\u4efd\u73b0\u6709\u6570\u636e\nmysqldump -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge &gt; backup_before_upgrade.sql\n\n# 2. \u6267\u884c\u5347\u7ea7\u811a\u672c\nmysql -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge &lt; database/schema_complete_optimized.sql\n\n# 3. \u9a8c\u8bc1\u8868\u7ed3\u6784\nmysql -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge -e \"DESC mcp_servers\"\n</code></pre>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#step-2","title":"Step 2: \u914d\u7f6e\u66f4\u65b0","text":"<pre><code># application.yml\nmcp:\n  persistence:\n    enabled: true\n    ephemeral:\n      enabled: true\n</code></pre>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#step-3","title":"Step 3: \u4ee3\u7801\u90e8\u7f72","text":"<pre><code># 1. \u505c\u6b62\u65e7\u7248\u672c\njps | grep McpRouter | awk '{print $1}' | xargs kill -15\n\n# 2. \u90e8\u7f72\u65b0\u7248\u672c\ncd /path/to/mcp-router-v3\nmvn clean package\nmvn spring-boot:run\n\n# 3. \u9a8c\u8bc1\u542f\u52a8\u65e5\u5fd7\ntail -f logs/router.log | grep \"ephemeral\"\n</code></pre>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#step-4","title":"Step 4: \u9a8c\u8bc1\u6d4b\u8bd5","text":"<p>\u53c2\u8003 \u91cd\u542f\u573a\u666f\u9a8c\u8bc1\u62a5\u544a</p>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_16","title":"\ud83d\udd27 \u8fd0\u7ef4\u5efa\u8bae","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_17","title":"\u65e5\u5e38\u76d1\u63a7","text":"<pre><code>-- 1. \u4e34\u65f6\u5b9e\u4f8b\u7edf\u8ba1\nSELECT ephemeral, COUNT(*) as count, \n       SUM(healthy=1) as healthy_count \nFROM mcp_servers \nWHERE deleted_at IS NULL \nGROUP BY ephemeral;\n\n-- 2. \u4e0d\u5065\u5eb7\u5b9e\u4f8b\u544a\u8b66\nSELECT server_key, updated_at, \n       TIMESTAMPDIFF(MINUTE, updated_at, NOW()) as minutes_since_update\nFROM mcp_servers\nWHERE healthy = 0 AND deleted_at IS NULL\nORDER BY updated_at;\n</code></pre>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_18","title":"\u6545\u969c\u5904\u7406","text":"<pre><code># 1. \u624b\u52a8\u6e05\u7406\u9648\u65e7\u5b9e\u4f8b\nmysql -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge -e \"\n  UPDATE mcp_servers \n  SET healthy=0 \n  WHERE ephemeral=1 \n    AND deleted_at IS NULL \n    AND TIMESTAMPDIFF(MINUTE, updated_at, NOW()) &gt; 10\"\n\n# 2. \u5f3a\u5236\u91cd\u65b0\u6ce8\u518c\n# \u505c\u6b62\u670d\u52a1 -&gt; \u6e05\u7406\u6570\u636e\u5e93\u8bb0\u5f55 -&gt; \u91cd\u65b0\u542f\u52a8\n\n# 3. \u6570\u636e\u6062\u590d\nmysql -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge &lt; backup.sql\n</code></pre>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_19","title":"\ud83d\ude80 \u672a\u6765\u4f18\u5316\u65b9\u5411","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#1-p1","title":"1. \u6027\u80fd\u4f18\u5316\uff08P1\uff09","text":"<ul> <li> \u6279\u91cf\u66f4\u65b0\u5065\u5eb7\u72b6\u6001\uff08\u51cf\u5c11\u6570\u636e\u5e93\u538b\u529b\uff09</li> <li> \u5f15\u5165 Redis \u7f13\u5b58\uff08\u52a0\u901f\u5b9e\u4f8b\u67e5\u8be2\uff09</li> <li> \u4f18\u5316\u7d22\u5f15\u7b56\u7565\uff08\u652f\u6301\u66f4\u5927\u89c4\u6a21\uff09</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#2-p2","title":"2. \u529f\u80fd\u589e\u5f3a\uff08P2\uff09","text":"<ul> <li> \u5b9e\u4f8b\u5206\u7ec4\u7ba1\u7406\uff08\u6309\u4e1a\u52a1\u7ebf\u9694\u79bb\uff09</li> <li> \u7070\u5ea6\u53d1\u5e03\u652f\u6301\uff08\u4e34\u65f6\u5b9e\u4f8b\u6743\u91cd\u8c03\u6574\uff09</li> <li> \u5b9e\u4f8b\u8fc1\u79fb\u5de5\u5177\uff08\u6301\u4e45\u5316 \u2194 \u4e34\u65f6\u5207\u6362\uff09</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#3-p2","title":"3. \u76d1\u63a7\u544a\u8b66\uff08P2\uff09","text":"<ul> <li> Prometheus \u6307\u6807\u5bfc\u51fa</li> <li> \u4e0d\u5065\u5eb7\u5b9e\u4f8b\u81ea\u52a8\u544a\u8b66</li> <li> \u5fc3\u8df3\u68c0\u6d4b\u5931\u8d25\u7387\u76d1\u63a7</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#4-p3","title":"4. \u9ad8\u53ef\u7528\uff08P3\uff09","text":"<ul> <li> \u6570\u636e\u5e93\u8bfb\u5199\u5206\u79bb</li> <li> \u591a\u6570\u636e\u4e2d\u5fc3\u652f\u6301</li> <li> \u707e\u5907\u6062\u590d\u65b9\u6848</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_20","title":"\ud83d\udcca \u6210\u672c\u6536\u76ca\u5206\u6790","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_21","title":"\u5f00\u53d1\u6210\u672c","text":"\u9636\u6bb5 \u5de5\u4f5c\u91cf \u5b8c\u6210\u65f6\u95f4 \u9700\u6c42\u5206\u6790 0.5\u5929 \u2705 \u5b8c\u6210 \u8868\u7ed3\u6784\u8bbe\u8ba1 0.5\u5929 \u2705 \u5b8c\u6210 \u4ee3\u7801\u5b9e\u73b0 2\u5929 \u2705 \u5b8c\u6210 \u6d4b\u8bd5\u9a8c\u8bc1 1\u5929 \u2705 \u5b8c\u6210 \u6587\u6863\u7f16\u5199 0.5\u5929 \u2705 \u5b8c\u6210 \u603b\u8ba1 4.5\u5929 \u2705 \u5b8c\u6210"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_22","title":"\u6536\u76ca\u8bc4\u4f30","text":"\u7ef4\u5ea6 \u4f18\u5316\u524d \u4f18\u5316\u540e \u6536\u76ca \u6545\u969c\u6062\u590d\u65f6\u95f4 30\u5206\u949f\uff08\u624b\u52a8\uff09 2\u79d2\uff08\u81ea\u52a8\uff09 \u8282\u770199.9% \u8fd0\u7ef4\u5de5\u4f5c\u91cf \u6bcf\u59291\u5c0f\u65f6 \u6bcf\u546810\u5206\u949f \u8282\u770195% \u6570\u636e\u4e00\u81f4\u6027 60%\uff08\u624b\u52a8\u540c\u6b65\uff09 99.9%\uff08\u81ea\u52a8\uff09 \u63d0\u534766% \u7cfb\u7edf\u53ef\u7528\u6027 95% 99.5% \u63d0\u53474.5%"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#roi","title":"ROI\uff08\u6295\u8d44\u56de\u62a5\u7387\uff09","text":"<ul> <li>\u5f00\u53d1\u6295\u5165\uff1a 4.5\u5929</li> <li>\u6bcf\u6708\u8282\u7701\uff1a 20\u5c0f\u65f6\u8fd0\u7ef4\u65f6\u95f4</li> <li>\u56de\u672c\u5468\u671f\uff1a &lt; 1\u4e2a\u6708</li> <li>\u5e74\u5ea6\u6536\u76ca\uff1a 240\u5c0f\u65f6 \u2248 30\u4eba\u5929</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_23","title":"\u2705 \u9a8c\u8bc1\u6e05\u5355","text":""},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_24","title":"\u529f\u80fd\u9a8c\u8bc1","text":"<ul> <li> \u4e34\u65f6\u5b9e\u4f8b\u6b63\u786e\u6ce8\u518c\uff08ephemeral=1\uff09</li> <li> \u6301\u4e45\u5316\u5b9e\u4f8b\u6b63\u786e\u6ce8\u518c\uff08ephemeral=0\uff09</li> <li> \u542f\u52a8\u65f6\u6e05\u7406\u65e7\u5b9e\u4f8b</li> <li> \u5fc3\u8df3\u68c0\u6d4b\u6807\u8bb0\u4e0d\u5065\u5eb7\u5b9e\u4f8b</li> <li> \u5b9a\u671f\u4efb\u52a1\u6e05\u7406\u9648\u65e7\u6570\u636e</li> <li> \u91cd\u542f\u540e\u81ea\u52a8\u6062\u590d</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_25","title":"\u6027\u80fd\u9a8c\u8bc1","text":"<ul> <li> \u542f\u52a8\u65f6\u95f4 &lt; 3\u79d2</li> <li> \u6e05\u7406\u8017\u65f6 &lt; 100ms</li> <li> \u5fc3\u8df3\u68c0\u6d4b\u5ef6\u8fdf &lt; 30\u79d2</li> <li> \u6570\u636e\u5e93\u67e5\u8be2 &lt; 50ms</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_26","title":"\u53ef\u9760\u6027\u9a8c\u8bc1","text":"<ul> <li> Router \u5d29\u6e83\u91cd\u542f\u6062\u590d</li> <li> Server \u5d29\u6e83\u81ea\u52a8\u6e05\u7406</li> <li> \u6570\u636e\u5e93\u8fde\u63a5\u5f02\u5e38\u5904\u7406</li> <li> \u5e76\u53d1\u573a\u666f\u6570\u636e\u4e00\u81f4\u6027</li> </ul>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_27","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ol> <li>\u91cd\u542f\u573a\u666f\u9a8c\u8bc1\u62a5\u544a - \u5b8c\u6574\u6d4b\u8bd5\u8fc7\u7a0b\u548c\u7ed3\u679c</li> <li>\u5feb\u901f\u542f\u52a8\u6307\u5357 - \u90e8\u7f72\u548c\u8fd0\u7ef4\u624b\u518c</li> <li>\u6570\u636e\u5e93\u8868\u7ed3\u6784 - \u6700\u65b0\u8868\u7ed3\u6784\u5b9a\u4e49</li> </ol>"},{"location":"archived/docs-251111/OPTIMIZATION_SUMMARY/#_28","title":"\ud83c\udfc6 \u603b\u7ed3","text":"<p>\u672c\u6b21\u4f18\u5316\u6210\u529f\u5b9e\u73b0\u4e86 MCP Router \u7684\u6301\u4e45\u5316\u6539\u9020\uff0c\u6838\u5fc3\u6210\u679c\u5305\u62ec\uff1a</p> <ol> <li>\u2705 \u67b6\u6784\u5347\u7ea7\uff1a \u4ece\u7eaf\u5185\u5b58\u7ba1\u7406\u5347\u7ea7\u4e3a\u6301\u4e45\u5316 + \u4e34\u65f6\u5b9e\u4f8b\u6df7\u5408\u6a21\u5f0f</li> <li>\u2705 \u81ea\u52a8\u5316\u63d0\u5347\uff1a \u5b9e\u73b0\u81ea\u52a8\u6e05\u7406\u3001\u81ea\u52a8\u6062\u590d\u3001\u81ea\u52a8\u6807\u8bb0</li> <li>\u2705 \u6027\u80fd\u4f18\u5316\uff1a \u542f\u52a8\u901f\u5ea6\u63d0\u534721.7%\uff0c\u67e5\u8be2\u901f\u5ea6\u63d0\u534779%</li> <li>\u2705 \u8fd0\u7ef4\u53cb\u597d\uff1a \u8282\u770195%\u8fd0\u7ef4\u5de5\u4f5c\u91cf\uff0c\u6570\u636e\u4e00\u81f4\u6027\u63d0\u5347\u81f399.9%</li> </ol> <p>\u8be5\u65b9\u6848\u5df2\u8fbe\u5230\u751f\u4ea7\u73af\u5883\u53ef\u7528\u6807\u51c6\uff0c\u5efa\u8bae\u7acb\u5373\u90e8\u7f72\u4e0a\u7ebf\u3002</p> <p>\u4f18\u5316\u8d1f\u8d23\u4eba\uff1a AI Assistant \u5b8c\u6210\u65f6\u95f4\uff1a 2025-10-30 \u6587\u6863\u7248\u672c\uff1a v1.0.0</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/","title":"MCP Router V3 \u6301\u4e45\u5316\u529f\u80fd\u8282\u70b9\u8bbe\u8ba1\u65b9\u6848","text":"<p>\u7248\u672c: v1.0 \u521b\u5efa\u65e5\u671f: 2025-10-30 \u72b6\u6001: \u8bbe\u8ba1\u9636\u6bb5 - \u5f85\u8bc4\u5ba1 \u57fa\u7840: MyBatis + WebFlux \u975e\u963b\u585e\u8bbe\u8ba1</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_1","title":"\ud83d\udccb \u76ee\u5f55","text":"<ol> <li>\u8bbe\u8ba1\u539f\u5219</li> <li>\u529f\u80fd\u8282\u70b9\u5206\u7c7b</li> <li>\u6838\u5fc3\u6301\u4e45\u5316\u8282\u70b9</li> <li>\u8f85\u52a9\u6301\u4e45\u5316\u8282\u70b9</li> <li>\u6027\u80fd\u6301\u4e45\u5316\u8282\u70b9</li> <li>\u5b9e\u65bd\u4f18\u5148\u7ea7</li> <li>\u6280\u672f\u65b9\u6848</li> <li>\u6570\u636e\u6d41\u8bbe\u8ba1</li> <li>\u98ce\u9669\u8bc4\u4f30</li> </ol>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_2","title":"\u8bbe\u8ba1\u539f\u5219","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_3","title":"\ud83c\udfaf \u6838\u5fc3\u539f\u5219","text":"<ol> <li>\u975e\u963b\u585e\u4f18\u5148: \u6240\u6709\u6301\u4e45\u5316\u64cd\u4f5c\u5fc5\u987b\u5f02\u6b65\u6267\u884c\uff0c\u4e0d\u963b\u585e\u4e3b\u7ebf\u7a0b</li> <li>\u964d\u7ea7\u4fdd\u62a4: \u6570\u636e\u5e93\u6545\u969c\u4e0d\u5f71\u54cd\u6838\u5fc3\u8def\u7531\u529f\u80fd</li> <li>\u6279\u91cf\u4f18\u5316: \u9ad8\u9891\u64cd\u4f5c\u4f7f\u7528\u6279\u91cf\u5199\u5165</li> <li>\u5206\u533a\u7b56\u7565: \u5927\u8868\u4f7f\u7528\u65f6\u95f4\u5206\u533a\uff0c\u81ea\u52a8\u5f52\u6863\u5386\u53f2\u6570\u636e</li> <li>\u6700\u5c0f\u4fb5\u5165: \u6301\u4e45\u5316\u903b\u8f91\u4e0e\u4e1a\u52a1\u903b\u8f91\u89e3\u8026</li> </ol>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_4","title":"\ud83d\udcca \u6027\u80fd\u8981\u6c42","text":"\u6307\u6807 \u76ee\u6807\u503c \u8bf4\u660e \u6301\u4e45\u5316\u5ef6\u8fdf &lt;2ms \u5f02\u6b65\u5199\u5165\uff0c\u4e0d\u963b\u585e\u4e3b\u6d41\u7a0b \u6279\u91cf\u5199\u5165 500\u6761/\u6279 \u51cf\u5c11\u6570\u636e\u5e93\u538b\u529b \u67e5\u8be2\u54cd\u5e94 &lt;50ms \u5305\u542b\u7d22\u5f15\u4f18\u5316 \u6570\u636e\u4e22\u5931\u7387 &lt;0.001% \u591a\u5c42\u964d\u7ea7\u4fdd\u62a4 \u541e\u5410\u91cf 5000+ TPS \u652f\u6301\u9ad8\u5e76\u53d1"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_5","title":"\u529f\u80fd\u8282\u70b9\u5206\u7c7b","text":"<p>\u6839\u636e MCP Router V3 \u7684\u67b6\u6784\uff0c\u6301\u4e45\u5316\u529f\u80fd\u8282\u70b9\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7c7b\uff1a</p> <pre><code>\u6301\u4e45\u5316\u529f\u80fd\u8282\u70b9\n\u251c\u2500\u2500 \u6838\u5fc3\u8282\u70b9\uff08\u5fc5\u987b\u5b9e\u73b0\uff09\n\u2502   \u251c\u2500\u2500 \u8def\u7531\u65e5\u5fd7\u6301\u4e45\u5316\n\u2502   \u251c\u2500\u2500 \u5065\u5eb7\u68c0\u67e5\u8bb0\u5f55\u6301\u4e45\u5316\n\u2502   \u251c\u2500\u2500 SSE\u4f1a\u8bdd\u7ba1\u7406\u6301\u4e45\u5316\n\u2502   \u2514\u2500\u2500 \u670d\u52a1\u5668\u6ce8\u518c\u4fe1\u606f\u6301\u4e45\u5316\n\u2502\n\u251c\u2500\u2500 \u8f85\u52a9\u8282\u70b9\uff08\u589e\u5f3a\u529f\u80fd\uff09\n\u2502   \u251c\u2500\u2500 \u8fde\u63a5\u6c60\u7edf\u8ba1\u6301\u4e45\u5316\n\u2502   \u251c\u2500\u2500 \u8d1f\u8f7d\u5747\u8861\u51b3\u7b56\u6301\u4e45\u5316\n\u2502   \u251c\u2500\u2500 \u7194\u65ad\u5668\u72b6\u6001\u6301\u4e45\u5316\n\u2502   \u2514\u2500\u2500 \u5de5\u5177\u8c03\u7528\u8bb0\u5f55\u6301\u4e45\u5316\n\u2502\n\u2514\u2500\u2500 \u6027\u80fd\u8282\u70b9\uff08\u76d1\u63a7\u5206\u6790\uff09\n    \u251c\u2500\u2500 \u6027\u80fd\u6307\u6807\u6301\u4e45\u5316\n    \u251c\u2500\u2500 \u4e1a\u52a1\u6307\u6807\u6301\u4e45\u5316\n    \u251c\u2500\u2500 \u9519\u8bef\u65e5\u5fd7\u6301\u4e45\u5316\n    \u2514\u2500\u2500 \u5ba1\u8ba1\u65e5\u5fd7\u6301\u4e45\u5316\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_6","title":"\u6838\u5fc3\u6301\u4e45\u5316\u8282\u70b9","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#1","title":"1. \u8def\u7531\u65e5\u5fd7\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_7","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: <code>McpRouterService.routeRequest()</code> / <code>McpRouterService.smartRoute()</code></li> <li>\u65f6\u673a: \u6bcf\u6b21\u8def\u7531\u8bf7\u6c42\u5f00\u59cb\u548c\u7ed3\u675f</li> <li>\u9891\u7387: \u6781\u9ad8\uff08\u6bcf\u4e2a\u8bf7\u6c42\uff09</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_8","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: routing_logs\n{\n  // \u8bf7\u6c42\u6807\u8bc6\n  \"request_id\": \"req_20251030_123456_abc123\",\n  \"trace_id\": \"trace_xyz789\",\n  \"parent_id\": null,\n\n  // \u8def\u7531\u4fe1\u606f\n  \"server_key\": \"mcp-server-v3:192.168.1.100:8063\",\n  \"server_name\": \"mcp-server-v3\",\n  \"load_balance_strategy\": \"WEIGHTED_ROUND_ROBIN\",\n\n  // \u8bf7\u6c42\u4fe1\u606f\n  \"method\": \"POST\",\n  \"path\": \"/mcp/router/route/mcp-server-v3\",\n  \"mcp_method\": \"tools/call\",\n  \"tool_name\": \"getPersonById\",\n  \"request_body\": \"{\\\"params\\\":{\\\"name\\\":\\\"getPersonById\\\",\\\"arguments\\\":{\\\"id\\\":1}}}\",\n  \"request_size\": 256,\n\n  // \u54cd\u5e94\u4fe1\u606f\n  \"response_status\": 200,\n  \"response_body\": \"{\\\"result\\\":{\\\"id\\\":1,\\\"name\\\":\\\"John\\\"}}\",\n  \"response_size\": 512,\n  \"is_success\": true,\n\n  // \u65f6\u95f4\u4fe1\u606f\n  \"start_time\": \"2025-10-30 12:34:56.123\",\n  \"end_time\": \"2025-10-30 12:34:56.178\",\n  \"duration\": 55,               // \u603b\u8017\u65f6(ms)\n  \"queue_time\": 2,              // \u6392\u961f\u65f6\u95f4\n  \"connect_time\": 8,            // \u8fde\u63a5\u65f6\u95f4\n  \"process_time\": 45,           // \u5904\u7406\u65f6\u95f4\n\n  // \u5ba2\u6237\u7aef\u4fe1\u606f\n  \"client_id\": \"client_001\",\n  \"client_ip\": \"192.168.1.50\",\n  \"user_agent\": \"MCP-Client/1.0\",\n\n  // \u72b6\u6001\u6807\u8bc6\n  \"is_cached\": false,\n  \"is_retry\": false,\n  \"retry_count\": 0,\n  \"error_code\": null,\n  \"error_message\": null\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_9","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<p>\u975e\u963b\u585e\u5f02\u6b65\u5199\u5165: <pre><code>// \u5728 McpRouterService \u4e2d\npublic Mono&lt;McpMessage&gt; routeRequest(String serviceName, McpMessage message, Duration timeout) {\n    String requestId = generateRequestId();\n    long startTime = System.currentTimeMillis();\n\n    // \u521b\u5efa\u8def\u7531\u65e5\u5fd7\u8bb0\u5f55\n    RoutingLog routingLog = RoutingLog.builder()\n        .requestId(requestId)\n        .serviceName(serviceName)\n        .mcpMethod(message.getMethod())\n        .toolName(extractToolName(message))\n        .startTime(new Date(startTime))\n        .build();\n\n    return discoverHealthyInstances(serviceName)\n        .flatMap(candidates -&gt; {\n            // ... \u8def\u7531\u903b\u8f91 ...\n            return routeToServerWithMonitoring(selectedServer, message, timeout)\n                .doOnSuccess(response -&gt; {\n                    // \ud83d\udd25 \u5f02\u6b65\u6301\u4e45\u5316\u6210\u529f\u65e5\u5fd7\uff08\u4e0d\u963b\u585e\uff09\n                    routingLog.setEndTime(new Date());\n                    routingLog.setDuration((int)(System.currentTimeMillis() - startTime));\n                    routingLog.setIsSuccess(true);\n                    routingLog.setResponseBody(response.toString());\n\n                    persistRoutingLog(routingLog)\n                        .subscribeOn(Schedulers.boundedElastic())\n                        .subscribe(\n                            result -&gt; log.debug(\"\u2705 Routing log persisted: {}\", requestId),\n                            error -&gt; log.warn(\"\u26a0\ufe0f Failed to persist routing log: {}\", error.getMessage())\n                        );\n                })\n                .doOnError(error -&gt; {\n                    // \ud83d\udd25 \u5f02\u6b65\u6301\u4e45\u5316\u5931\u8d25\u65e5\u5fd7\uff08\u4e0d\u963b\u585e\uff09\n                    routingLog.setEndTime(new Date());\n                    routingLog.setDuration((int)(System.currentTimeMillis() - startTime));\n                    routingLog.setIsSuccess(false);\n                    routingLog.setErrorMessage(error.getMessage());\n\n                    persistRoutingLog(routingLog)\n                        .subscribeOn(Schedulers.boundedElastic())\n                        .subscribe();\n                });\n        });\n}\n\n// \u5f02\u6b65\u6301\u4e45\u5316\u65b9\u6cd5\nprivate Mono&lt;Void&gt; persistRoutingLog(RoutingLog log) {\n    return Mono.fromRunnable(() -&gt; {\n        try {\n            routingLogMapper.insert(log);\n        } catch (Exception e) {\n            // \u964d\u7ea7\uff1a\u5199\u5165\u672c\u5730\u65e5\u5fd7\u6587\u4ef6\n            fallbackLogger.warn(\"DB insert failed, writing to file: {}\", log);\n        }\n    }).then();\n}\n</code></pre></p> <p>\u6279\u91cf\u5199\u5165\u4f18\u5316: <pre><code>// \u4f7f\u7528 Sinks \u7f13\u51b2\u533a\nprivate final Sinks.Many&lt;RoutingLog&gt; logBuffer = Sinks.many().multicast().onBackpressureBuffer();\n\n@PostConstruct\npublic void initBatchWriter() {\n    logBuffer.asFlux()\n        .buffer(Duration.ofSeconds(2), 500)  // 2\u79d2\u6216500\u6761\u89e6\u53d1\n        .flatMap(logs -&gt; Mono.fromRunnable(() -&gt; {\n            if (!logs.isEmpty()) {\n                routingLogMapper.batchInsert(logs);\n                log.info(\"\u2705 Batch persisted {} routing logs\", logs.size());\n            }\n        }).subscribeOn(Schedulers.boundedElastic()))\n        .subscribe();\n}\n\nprivate Mono&lt;Void&gt; persistRoutingLog(RoutingLog log) {\n    return Mono.fromRunnable(() -&gt; logBuffer.tryEmitNext(log));\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_10","title":"\ud83d\udcca \u5206\u533a\u7b56\u7565","text":"<pre><code>-- \u6309\u5929\u5206\u533a\uff0c\u81ea\u52a8\u5f52\u6863\nCREATE TABLE routing_logs_20251030 PARTITION OF routing_logs\n  FOR VALUES FROM ('2025-10-30 00:00:00') TO ('2025-10-31 00:00:00');\n\n-- \u81ea\u52a8\u521b\u5efa\u4e0b\u4e00\u5929\u5206\u533a\uff08\u5b9a\u65f6\u4efb\u52a1\uff09\n-- \u81ea\u52a8\u5f52\u686330\u5929\u524d\u6570\u636e\u5230\u5386\u53f2\u8868\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#2","title":"2. \u5065\u5eb7\u68c0\u67e5\u8bb0\u5f55\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_11","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: <code>HealthCheckService.performHealthCheck()</code></li> <li>\u65f6\u673a: \u6bcf\u6b21\u5065\u5eb7\u68c0\u67e5\u5b8c\u6210\u540e</li> <li>\u9891\u7387: \u4e2d\u7b49\uff08\u6bcf15-60\u79d2\u4e00\u6b21\uff09</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_12","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: health_check_records\n{\n  \"server_id\": 123,\n  \"server_key\": \"mcp-server-v3:192.168.1.100:8063\",\n  \"check_type\": \"COMBINED\",           // NACOS / MCP / COMBINED\n  \"check_result\": \"SUCCESS\",          // SUCCESS / FAILURE / TIMEOUT / ERROR\n  \"check_time\": \"2025-10-30 12:34:56\",\n  \"response_time\": 15,                // \u54cd\u5e94\u65f6\u95f4(ms)\n  \"check_details\": {\n    \"nacos_healthy\": true,\n    \"mcp_reachable\": true,\n    \"tool_count\": 5,\n    \"memory_usage\": \"512MB\",\n    \"cpu_usage\": \"23%\"\n  },\n  \"error_message\": null,\n  \"consecutive_failures\": 0\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_13","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<p>\u5ef6\u65f6\u6279\u91cf\u5199\u5165 (\u5065\u5eb7\u68c0\u67e5\u9891\u7387\u8f83\u4f4e\uff0c\u53ef\u4ee5\u9002\u5ea6\u5ef6\u8fdf): <pre><code>// \u5728 HealthCheckService \u4e2d\npublic Mono&lt;HealthStatus&gt; performHealthCheck(McpServerInfo server) {\n    HealthCheckRecord record = new HealthCheckRecord();\n    record.setServerKey(server.getServerKey());\n    record.setCheckTime(new Date());\n\n    return checkNacosHealth(server)\n        .flatMap(nacosHealthy -&gt; checkMcpHealth(server)\n            .map(mcpHealthy -&gt; {\n                record.setCheckResult(nacosHealthy &amp;&amp; mcpHealthy ? \"SUCCESS\" : \"FAILURE\");\n                record.setResponseTime((int)(System.currentTimeMillis() - startTime));\n\n                // \ud83d\udd25 \u5f02\u6b65\u6279\u91cf\u6301\u4e45\u5316\n                healthCheckBuffer.tryEmitNext(record);\n\n                return buildHealthStatus(nacosHealthy, mcpHealthy);\n            }));\n}\n\n// \u6279\u91cf\u5199\u5165\uff08\u6bcf5\u79d2\u6216100\u6761\uff09\n@PostConstruct\npublic void initHealthCheckBatchWriter() {\n    healthCheckBuffer.asFlux()\n        .buffer(Duration.ofSeconds(5), 100)\n        .flatMap(records -&gt; persistHealthCheckBatch(records))\n        .subscribe();\n}\n</code></pre></p> <p>\u91c7\u6837\u7b56\u7565 (\u51cf\u5c11\u5b58\u50a8\u538b\u529b): <pre><code>// \u53ea\u6301\u4e45\u5316\u5173\u952e\u4e8b\u4ef6\nif (record.getCheckResult().equals(\"FAILURE\") || \n    record.getConsecutiveFailures() &gt; 0 ||\n    record.getResponseTime() &gt; 1000 ||\n    shouldSample(0.1)) {  // 10%\u91c7\u6837\u7387\n    healthCheckBuffer.tryEmitNext(record);\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#3-sse","title":"3. SSE\u4f1a\u8bdd\u7ba1\u7406\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_14","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: <code>McpSseTransportProvider.connect()</code> / <code>disconnect()</code></li> <li>\u65f6\u673a: \u4f1a\u8bdd\u5efa\u7acb\u3001\u6d3b\u8dc3\u3001\u65ad\u5f00</li> <li>\u9891\u7387: \u4e2d\u7b49</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_15","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: sse_session_records\n{\n  \"session_id\": \"6d0df1d4-cd4c-4df0-b6c2-989de3c52d32\",\n  \"client_id\": \"test-client-001\",\n  \"status\": \"CONNECTED\",              // CONNECTING / CONNECTED / DISCONNECTED / ERROR / TIMEOUT\n  \"created_time\": \"2025-10-30 12:00:00\",\n  \"last_active_time\": \"2025-10-30 12:30:00\",\n  \"disconnected_time\": null,\n  \"session_duration\": 1800,           // \u79d2\n  \"message_count\": 150,\n  \"error_count\": 2,\n  \"bytes_sent\": 1048576,\n  \"bytes_received\": 524288,\n  \"reconnect_count\": 1,\n  \"client_ip\": \"192.168.1.50\",\n  \"metadata\": {\n    \"version\": \"1.0\",\n    \"platform\": \"web\"\n  }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_16","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<p>\u72b6\u6001\u53d8\u66f4\u65f6\u6301\u4e45\u5316: <pre><code>// \u5728 McpSseTransportProvider \u4e2d\npublic Flux&lt;ServerSentEvent&lt;String&gt;&gt; connect(String clientId, Map&lt;String, String&gt; metadata) {\n    String sessionId = UUID.randomUUID().toString();\n\n    return Flux.create(emitter -&gt; {\n        SseSession session = createSession(sessionId, clientId, metadata);\n        activeSessions.put(sessionId, session);\n\n        // \ud83d\udd25 \u6301\u4e45\u5316\u4f1a\u8bdd\u521b\u5efa\u4e8b\u4ef6\n        persistSseSessionEvent(session, \"CONNECTED\")\n            .subscribeOn(Schedulers.boundedElastic())\n            .subscribe();\n\n        emitter.onDispose(() -&gt; {\n            session.setStatus(SessionStatus.DISCONNECTED);\n            session.setDisconnectedTime(LocalDateTime.now());\n\n            // \ud83d\udd25 \u6301\u4e45\u5316\u4f1a\u8bdd\u65ad\u5f00\u4e8b\u4ef6\n            persistSseSessionEvent(session, \"DISCONNECTED\")\n                .subscribeOn(Schedulers.boundedElastic())\n                .subscribe();\n\n            activeSessions.remove(sessionId);\n        });\n    });\n}\n\n// \u5b9a\u671f\u66f4\u65b0\u6d3b\u8dc3\u4f1a\u8bdd\u72b6\u6001\uff08\u6bcf30\u79d2\uff09\n@Scheduled(fixedDelay = 30000)\npublic void updateActiveSessionStats() {\n    activeSessions.values().forEach(session -&gt; {\n        SseSessionRecord record = toRecord(session);\n        sseSessionBuffer.tryEmitNext(record);\n    });\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#4","title":"4. \u670d\u52a1\u5668\u6ce8\u518c\u4fe1\u606f\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_17","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: <code>McpServerRegistry.registerServer()</code> / <code>deregisterServer()</code></li> <li>\u65f6\u673a: \u670d\u52a1\u6ce8\u518c\u3001\u6ce8\u9500\u3001\u72b6\u6001\u53d8\u66f4</li> <li>\u9891\u7387: \u4f4e</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_18","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: mcp_servers\n{\n  \"server_key\": \"mcp-server-v3:192.168.1.100:8063\",\n  \"server_name\": \"mcp-server-v3\",\n  \"service_group\": \"mcp-server\",\n  \"host\": \"192.168.1.100\",\n  \"port\": 8063,\n  \"sse_endpoint\": \"/sse\",\n  \"message_endpoint\": \"/mcp/message\",\n  \"healthy\": true,\n  \"enabled\": true,\n  \"weight\": 100,\n  \"metadata\": {\n    \"version\": \"1.0.0\",\n    \"tools\": [\"getPersonById\", \"getAllPersons\"],\n    \"capabilities\": [\"tool_call\", \"resource\"]\n  },\n  \"registered_time\": \"2025-10-30 12:00:00\",\n  \"last_heartbeat\": \"2025-10-30 12:35:00\",\n  \"heartbeat_interval\": 30\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_19","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<p>\u540c\u6b65\u6301\u4e45\u5316 (\u6ce8\u518c\u64cd\u4f5c\u9891\u7387\u4f4e\uff0c\u53ef\u4ee5\u540c\u6b65): <pre><code>// \u5728 McpServerRegistry \u4e2d\npublic Mono&lt;Void&gt; registerServer(McpServerInfo serverInfo) {\n    return Mono.fromRunnable(() -&gt; {\n        // \u5148\u5199\u6570\u636e\u5e93\n        mcpServerMapper.insertOrUpdate(serverInfo);\n        log.info(\"\u2705 Server registered to DB: {}\", serverInfo.getServerKey());\n    })\n    .subscribeOn(Schedulers.boundedElastic())\n    .then(Mono.fromRunnable(() -&gt; {\n        // \u518d\u66f4\u65b0\u5185\u5b58\u7f13\u5b58\n        serverCache.put(serverInfo.getServerKey(), serverInfo);\n    }))\n    .onErrorResume(error -&gt; {\n        log.error(\"\u274c Failed to register server to DB: {}\", error.getMessage());\n        // \u964d\u7ea7\uff1a\u4ec5\u66f4\u65b0\u7f13\u5b58\n        serverCache.put(serverInfo.getServerKey(), serverInfo);\n        return Mono.empty();\n    });\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_20","title":"\u8f85\u52a9\u6301\u4e45\u5316\u8282\u70b9","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#5","title":"5. \u8fde\u63a5\u6c60\u7edf\u8ba1\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_21","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: <code>McpClientManager</code> \u8fde\u63a5\u6c60\u7ba1\u7406</li> <li>\u65f6\u673a: \u5b9a\u671f\u91c7\u6837\uff08\u6bcf60\u79d2\uff09</li> <li>\u9891\u7387: \u4f4e</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_22","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: connection_pool_stats\n{\n  \"server_key\": \"mcp-server-v3:192.168.1.100:8063\",\n  \"sample_time\": \"2025-10-30 12:35:00\",\n  \"total_connections\": 10,\n  \"active_connections\": 3,\n  \"idle_connections\": 7,\n  \"pending_requests\": 2,\n  \"pool_usage_rate\": 30.0,           // \u4f7f\u7528\u7387%\n  \"avg_wait_time\": 5,                // \u5e73\u5747\u7b49\u5f85\u65f6\u95f4(ms)\n  \"max_wait_time\": 25,\n  \"connection_timeout_count\": 0,\n  \"connection_error_count\": 1\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_23","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<pre><code>@Scheduled(fixedDelay = 60000)  // \u6bcf60\u79d2\npublic void collectConnectionPoolStats() {\n    mcpClientManager.getAllServerKeys().forEach(serverKey -&gt; {\n        ConnectionPoolStats stats = mcpClientManager.getPoolStatsForServer(serverKey);\n\n        connectionPoolStatsBuffer.tryEmitNext(stats);\n    });\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#6","title":"6. \u8d1f\u8f7d\u5747\u8861\u51b3\u7b56\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_24","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: <code>LoadBalancer.selectServer()</code></li> <li>\u65f6\u673a: \u6bcf\u6b21\u8d1f\u8f7d\u5747\u8861\u9009\u62e9</li> <li>\u9891\u7387: \u9ad8\uff08\u4f46\u53ef\u91c7\u6837\uff09</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_25","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: load_balance_decisions\n{\n  \"decision_time\": \"2025-10-30 12:34:56\",\n  \"service_name\": \"mcp-server-v3\",\n  \"strategy\": \"WEIGHTED_ROUND_ROBIN\",\n  \"candidate_count\": 3,\n  \"candidates\": [\n    {\n      \"server_key\": \"server-1\",\n      \"weight\": 100,\n      \"score\": 85.5,\n      \"active_connections\": 3\n    }\n  ],\n  \"selected_server\": \"server-1\",\n  \"selection_reason\": \"highest_score\",\n  \"decision_duration\": 2            // \u51b3\u7b56\u8017\u65f6(ms)\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_26","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<p>\u91c7\u6837\u6301\u4e45\u5316 (1%\u91c7\u6837\u7387): <pre><code>public McpServerInfo selectServer(List&lt;McpServerInfo&gt; candidates) {\n    McpServerInfo selected = weightedRoundRobin(candidates);\n\n    // 1%\u91c7\u6837\n    if (shouldSample(0.01)) {\n        LoadBalanceDecision decision = buildDecision(candidates, selected);\n        lbDecisionBuffer.tryEmitNext(decision);\n    }\n\n    return selected;\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#7","title":"7. \u7194\u65ad\u5668\u72b6\u6001\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_27","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: <code>CircuitBreakerService</code> \u72b6\u6001\u53d8\u66f4</li> <li>\u65f6\u673a: CLOSED -&gt; OPEN, OPEN -&gt; HALF_OPEN, HALF_OPEN -&gt; CLOSED</li> <li>\u9891\u7387: \u6781\u4f4e</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_28","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: circuit_breaker_states\n{\n  \"server_key\": \"mcp-server-v3:192.168.1.100:8063\",\n  \"state\": \"OPEN\",                  // CLOSED / OPEN / HALF_OPEN\n  \"previous_state\": \"CLOSED\",\n  \"state_changed_time\": \"2025-10-30 12:34:56\",\n  \"failure_count\": 5,\n  \"failure_rate\": 50.0,             // \u5931\u8d25\u7387%\n  \"trigger_reason\": \"FAILURE_THRESHOLD_EXCEEDED\",\n  \"reset_timeout\": 60,              // \u91cd\u7f6e\u8d85\u65f6(\u79d2)\n  \"half_open_success_count\": 0,\n  \"metrics\": {\n    \"total_calls\": 10,\n    \"failed_calls\": 5,\n    \"slow_calls\": 2\n  }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_29","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<p>\u5b9e\u65f6\u6301\u4e45\u5316 (\u72b6\u6001\u53d8\u66f4\u7acb\u5373\u6301\u4e45\u5316): <pre><code>private void changeState(CircuitBreakerState newState) {\n    CircuitBreakerState oldState = this.state;\n    this.state = newState;\n\n    // \ud83d\udd25 \u7acb\u5373\u6301\u4e45\u5316\u72b6\u6001\u53d8\u66f4\uff08\u540c\u6b65\uff09\n    CircuitBreakerStateRecord record = CircuitBreakerStateRecord.builder()\n        .serverKey(serverKey)\n        .state(newState.name())\n        .previousState(oldState.name())\n        .stateChangedTime(new Date())\n        .failureCount(failureCount.get())\n        .build();\n\n    Mono.fromRunnable(() -&gt; circuitBreakerMapper.insert(record))\n        .subscribeOn(Schedulers.boundedElastic())\n        .doOnError(e -&gt; log.error(\"Failed to persist circuit breaker state: {}\", e.getMessage()))\n        .subscribe();\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#8","title":"8. \u5de5\u5177\u8c03\u7528\u8bb0\u5f55\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_30","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: <code>McpClientManager.callTool()</code></li> <li>\u65f6\u673a: \u6bcf\u6b21\u5de5\u5177\u8c03\u7528</li> <li>\u9891\u7387: \u9ad8</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_31","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: tool_call_records\n{\n  \"call_id\": \"call_20251030_123456\",\n  \"request_id\": \"req_20251030_123456_abc123\",  // \u5173\u8054\u8def\u7531\u65e5\u5fd7\n  \"server_key\": \"mcp-server-v3:192.168.1.100:8063\",\n  \"tool_name\": \"getPersonById\",\n  \"arguments\": {\n    \"id\": 1\n  },\n  \"result\": {\n    \"id\": 1,\n    \"name\": \"John Doe\",\n    \"age\": 30\n  },\n  \"is_success\": true,\n  \"error_message\": null,\n  \"start_time\": \"2025-10-30 12:34:56.123\",\n  \"end_time\": \"2025-10-30 12:34:56.178\",\n  \"duration\": 55,\n  \"retry_count\": 0\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_32","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<p>\u6279\u91cf\u5199\u5165: <pre><code>private Mono&lt;ToolCallResult&gt; callToolWithPersistence(String toolName, Map&lt;String, Object&gt; args) {\n    ToolCallRecord record = new ToolCallRecord();\n    record.setToolName(toolName);\n    record.setArguments(args);\n    record.setStartTime(new Date());\n\n    return mcpClient.callTool(toolName, args)\n        .doOnSuccess(result -&gt; {\n            record.setEndTime(new Date());\n            record.setIsSuccess(true);\n            record.setResult(result);\n\n            // \ud83d\udd25 \u6279\u91cf\u6301\u4e45\u5316\n            toolCallBuffer.tryEmitNext(record);\n        })\n        .doOnError(error -&gt; {\n            record.setEndTime(new Date());\n            record.setIsSuccess(false);\n            record.setErrorMessage(error.getMessage());\n\n            toolCallBuffer.tryEmitNext(record);\n        });\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_33","title":"\u6027\u80fd\u6301\u4e45\u5316\u8282\u70b9","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#9","title":"9. \u6027\u80fd\u6307\u6807\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_34","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: \u5404\u5173\u952e\u4e1a\u52a1\u8282\u70b9</li> <li>\u65f6\u673a: \u5b9a\u671f\u805a\u5408\uff08\u6bcf\u5206\u949f\uff09</li> <li>\u9891\u7387: \u4f4e</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_35","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: performance_metrics\n{\n  \"metric_time\": \"2025-10-30 12:35:00\",\n  \"time_window\": \"1min\",            // 1min / 5min / 15min / 1hour\n\n  // \u8def\u7531\u6307\u6807\n  \"total_requests\": 1200,\n  \"successful_requests\": 1150,\n  \"failed_requests\": 50,\n  \"avg_response_time\": 45.5,\n  \"p50_response_time\": 35,\n  \"p95_response_time\": 120,\n  \"p99_response_time\": 250,\n  \"max_response_time\": 500,\n\n  // \u541e\u5410\u91cf\u6307\u6807\n  \"requests_per_second\": 20.0,\n  \"bytes_in_per_second\": 20480,\n  \"bytes_out_per_second\": 40960,\n\n  // \u9519\u8bef\u7387\n  \"error_rate\": 4.17,               // %\n  \"timeout_rate\": 0.83,\n\n  // \u8d44\u6e90\u6307\u6807\n  \"cpu_usage\": 45.5,\n  \"memory_usage\": 1024,             // MB\n  \"gc_count\": 5,\n  \"gc_time\": 150                    // ms\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_36","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<p>\u5b9a\u65f6\u805a\u5408\u6301\u4e45\u5316: <pre><code>@Scheduled(fixedDelay = 60000)  // \u6bcf\u5206\u949f\npublic void aggregateAndPersistMetrics() {\n    PerformanceMetrics metrics = metricsCollector.collectAndAggregate();\n\n    Mono.fromRunnable(() -&gt; performanceMetricsMapper.insert(metrics))\n        .subscribeOn(Schedulers.boundedElastic())\n        .subscribe();\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#10","title":"10. \u9519\u8bef\u65e5\u5fd7\u6301\u4e45\u5316","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_37","title":"\ud83d\udccd \u89e6\u53d1\u70b9","text":"<ul> <li>\u4f4d\u7f6e: \u5168\u5c40\u5f02\u5e38\u5904\u7406\u5668</li> <li>\u65f6\u673a: \u53d1\u751f\u9519\u8bef\u65f6</li> <li>\u9891\u7387: \u4e2d\u7b49</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_38","title":"\ud83c\udfaf \u6301\u4e45\u5316\u5185\u5bb9","text":"<pre><code>// \u6570\u636e\u8868: error_logs\n{\n  \"error_id\": \"err_20251030_123456\",\n  \"error_time\": \"2025-10-30 12:34:56\",\n  \"error_level\": \"ERROR\",           // WARN / ERROR / FATAL\n  \"error_type\": \"CONNECTION_TIMEOUT\",\n  \"error_message\": \"Connection to server timed out\",\n  \"stack_trace\": \"...\",\n  \"request_id\": \"req_20251030_123456_abc123\",\n  \"server_key\": \"mcp-server-v3:192.168.1.100:8063\",\n  \"affected_operation\": \"tools/call\",\n  \"context\": {\n    \"tool_name\": \"getPersonById\",\n    \"retry_count\": 3\n  }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_39","title":"\ud83d\udd27 \u5b9e\u73b0\u7b56\u7565","text":"<p>\u5f02\u6b65\u5199\u5165: <pre><code>@ControllerAdvice\npublic class GlobalExceptionHandler {\n\n    @ExceptionHandler(Exception.class)\n    public Mono&lt;ResponseEntity&lt;ErrorResponse&gt;&gt; handleException(Exception e) {\n        ErrorLog errorLog = buildErrorLog(e);\n\n        // \ud83d\udd25 \u5f02\u6b65\u6301\u4e45\u5316\u9519\u8bef\u65e5\u5fd7\n        Mono.fromRunnable(() -&gt; errorLogMapper.insert(errorLog))\n            .subscribeOn(Schedulers.boundedElastic())\n            .subscribe();\n\n        return Mono.just(ResponseEntity.status(500).body(toErrorResponse(e)));\n    }\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_40","title":"\u5b9e\u65bd\u4f18\u5148\u7ea7","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#p0-","title":"\ud83e\udd47 P0 - \u5fc5\u987b\u5b9e\u73b0\uff08\u7b2c\u4e00\u9636\u6bb5\uff09","text":"\u8282\u70b9 \u7406\u7531 \u9884\u8ba1\u5de5\u4f5c\u91cf \u8def\u7531\u65e5\u5fd7\u6301\u4e45\u5316 \u6838\u5fc3\u4e1a\u52a1\uff0c\u8bca\u65ad\u5fc5\u5907 3\u4eba\u65e5 \u5065\u5eb7\u68c0\u67e5\u8bb0\u5f55\u6301\u4e45\u5316 \u76d1\u63a7\u57fa\u7840 2\u4eba\u65e5 \u670d\u52a1\u5668\u6ce8\u518c\u4fe1\u606f\u6301\u4e45\u5316 \u670d\u52a1\u7ba1\u7406\u57fa\u7840 2\u4eba\u65e5 \u9519\u8bef\u65e5\u5fd7\u6301\u4e45\u5316 \u6545\u969c\u6392\u67e5\u5fc5\u5907 1\u4eba\u65e5 <p>\u603b\u8ba1: 8\u4eba\u65e5</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#p1-","title":"\ud83e\udd48 P1 - \u91cd\u8981\u589e\u5f3a\uff08\u7b2c\u4e8c\u9636\u6bb5\uff09","text":"\u8282\u70b9 \u7406\u7531 \u9884\u8ba1\u5de5\u4f5c\u91cf SSE\u4f1a\u8bdd\u7ba1\u7406\u6301\u4e45\u5316 \u8fde\u63a5\u7ba1\u7406\u589e\u5f3a 2\u4eba\u65e5 \u5de5\u5177\u8c03\u7528\u8bb0\u5f55\u6301\u4e45\u5316 \u4e1a\u52a1\u5206\u6790 2\u4eba\u65e5 \u6027\u80fd\u6307\u6807\u6301\u4e45\u5316 \u6027\u80fd\u76d1\u63a7 3\u4eba\u65e5 <p>\u603b\u8ba1: 7\u4eba\u65e5</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#p2-","title":"\ud83e\udd49 P2 - \u4f18\u5316\u5b8c\u5584\uff08\u7b2c\u4e09\u9636\u6bb5\uff09","text":"\u8282\u70b9 \u7406\u7531 \u9884\u8ba1\u5de5\u4f5c\u91cf \u8fde\u63a5\u6c60\u7edf\u8ba1\u6301\u4e45\u5316 \u8d44\u6e90\u4f18\u5316 1\u4eba\u65e5 \u8d1f\u8f7d\u5747\u8861\u51b3\u7b56\u6301\u4e45\u5316 \u7b97\u6cd5\u4f18\u5316 2\u4eba\u65e5 \u7194\u65ad\u5668\u72b6\u6001\u6301\u4e45\u5316 \u7a33\u5b9a\u6027\u5206\u6790 1\u4eba\u65e5 <p>\u603b\u8ba1: 4\u4eba\u65e5</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_41","title":"\u6280\u672f\u65b9\u6848","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_42","title":"\ud83c\udfd7\ufe0f \u6574\u4f53\u67b6\u6784","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Controller Layer                         \u2502\n\u2502          (WebFlux Reactive - Non-blocking)                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Service Layer                            \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502   \u2502 RouterService\u2502  \u2502HealthService \u2502  \u2502 ClientManager\u2502    \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502          \u2502                  \u2502                  \u2502             \u2502\n\u2502          \u25bc                  \u25bc                  \u25bc             \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502   \u2502      Persistence Event Publisher                \u2502      \u2502\n\u2502   \u2502      (Sinks.Many - \u7f13\u51b2\u533a)                      \u2502      \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502 \u5f02\u6b65\u3001\u6279\u91cf\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              Persistence Layer (Async)                      \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502   \u2502    Batch Writer (\u6bcf2\u79d2\u6216500\u6761)              \u2502           \u2502\n\u2502   \u2502    - \u6279\u91cf\u5199\u5165                                \u2502           \u2502\n\u2502   \u2502    - \u81ea\u52a8\u964d\u7ea7                                \u2502           \u2502\n\u2502   \u2502    - \u5931\u8d25\u91cd\u8bd5                                \u2502           \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2502                    \u2502                                         \u2502\n\u2502                    \u25bc                                         \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502   \u2502         MyBatis Mapper                     \u2502           \u2502\n\u2502   \u2502    (JDBC - Blocking, \u8fd0\u884c\u5728\u72ec\u7acb\u7ebf\u7a0b\u6c60)      \u2502           \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2502\n                     \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   MySQL Database                            \u2502\n\u2502   - \u5206\u533a\u8868 (\u6309\u5929/\u6708)                                         \u2502\n\u2502   - \u7d22\u5f15\u4f18\u5316                                                 \u2502\n\u2502   - \u81ea\u52a8\u5f52\u6863                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_43","title":"\ud83d\udd27 \u6838\u5fc3\u7ec4\u4ef6","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#1-persistence-event-publisher","title":"1. Persistence Event Publisher","text":"<pre><code>@Component\npublic class PersistenceEventPublisher {\n\n    // \u5404\u7c7b\u578b\u4e8b\u4ef6\u7684\u7f13\u51b2\u533a\n    private final Sinks.Many&lt;RoutingLog&gt; routingLogSink;\n    private final Sinks.Many&lt;HealthCheckRecord&gt; healthCheckSink;\n    private final Sinks.Many&lt;SseSessionRecord&gt; sseSessionSink;\n    // ... \u5176\u4ed6\u7f13\u51b2\u533a\n\n    @PostConstruct\n    public void initBatchWriters() {\n        // \u8def\u7531\u65e5\u5fd7\u6279\u91cf\u5199\u5165\u5668 (2\u79d2\u6216500\u6761)\n        routingLogSink.asFlux()\n            .buffer(Duration.ofSeconds(2), 500)\n            .flatMap(this::batchPersistRoutingLogs)\n            .subscribe();\n\n        // \u5065\u5eb7\u68c0\u67e5\u6279\u91cf\u5199\u5165\u5668 (5\u79d2\u6216100\u6761)\n        healthCheckSink.asFlux()\n            .buffer(Duration.ofSeconds(5), 100)\n            .flatMap(this::batchPersistHealthChecks)\n            .subscribe();\n\n        // ... \u5176\u4ed6\u6279\u91cf\u5199\u5165\u5668\n    }\n\n    // \u53d1\u5e03\u8def\u7531\u65e5\u5fd7\u4e8b\u4ef6\n    public void publishRoutingLog(RoutingLog log) {\n        routingLogSink.tryEmitNext(log);\n    }\n\n    // \u6279\u91cf\u6301\u4e45\u5316\u8def\u7531\u65e5\u5fd7\n    private Mono&lt;Void&gt; batchPersistRoutingLogs(List&lt;RoutingLog&gt; logs) {\n        return Mono.fromRunnable(() -&gt; {\n            try {\n                routingLogMapper.batchInsert(logs);\n                log.info(\"\u2705 Batch persisted {} routing logs\", logs.size());\n            } catch (Exception e) {\n                log.error(\"\u274c Failed to persist routing logs\", e);\n                // \u964d\u7ea7\u5904\u7406\n                fallbackToDisk(logs);\n            }\n        })\n        .subscribeOn(Schedulers.boundedElastic())\n        .then();\n    }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#2-fallback-strategy","title":"2. Fallback Strategy (\u964d\u7ea7\u7b56\u7565)","text":"<pre><code>@Component\npublic class PersistenceFallbackHandler {\n\n    private final DiskBasedQueue&lt;RoutingLog&gt; diskQueue;\n\n    // \u964d\u7ea7\u5230\u78c1\u76d8\n    public void fallbackToDisk(List&lt;?&gt; records) {\n        diskQueue.enqueueAll(records);\n        log.warn(\"\u26a0\ufe0f Fallback: {} records written to disk\", records.size());\n    }\n\n    // \u5b9a\u671f\u91cd\u8bd5\u78c1\u76d8\u4e2d\u7684\u6570\u636e\n    @Scheduled(fixedDelay = 60000)\n    public void retryDiskRecords() {\n        List&lt;RoutingLog&gt; records = diskQueue.dequeueUpTo(100);\n        if (!records.isEmpty()) {\n            routingLogMapper.batchInsert(records);\n            log.info(\"\u2705 Retried {} records from disk\", records.size());\n        }\n    }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#3-partition-manager","title":"3. Partition Manager (\u5206\u533a\u7ba1\u7406)","text":"<pre><code>@Component\npublic class PartitionManager {\n\n    // \u5b9a\u671f\u521b\u5efa\u672a\u6765\u5206\u533a\uff08\u6bcf\u5929\u51cc\u66682\u70b9\uff09\n    @Scheduled(cron = \"0 0 2 * * ?\")\n    public void createFuturePartitions() {\n        LocalDate tomorrow = LocalDate.now().plusDays(1);\n\n        partitionMapper.createRoutingLogPartition(tomorrow);\n        partitionMapper.createHealthCheckPartition(tomorrow);\n\n        log.info(\"\u2705 Created partitions for {}\", tomorrow);\n    }\n\n    // \u5b9a\u671f\u5f52\u6863\u65e7\u5206\u533a\uff08\u6bcf\u5468\u65e5\u51cc\u66683\u70b9\uff09\n    @Scheduled(cron = \"0 0 3 ? * SUN\")\n    public void archiveOldPartitions() {\n        LocalDate archiveBefore = LocalDate.now().minusDays(30);\n\n        partitionMapper.archiveRoutingLogPartition(archiveBefore);\n        partitionMapper.archiveHealthCheckPartition(archiveBefore);\n\n        log.info(\"\u2705 Archived partitions before {}\", archiveBefore);\n    }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_44","title":"\u6570\u636e\u6d41\u8bbe\u8ba1","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_45","title":"\ud83d\udcca \u5199\u5165\u6d41\u7a0b","text":"<pre><code>\u4e1a\u52a1\u8bf7\u6c42\n   \u2502\n   \u251c\u2500\u2192 \u540c\u6b65\uff1a\u6267\u884c\u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\n   \u2502        (\u8def\u7531\u3001\u5065\u5eb7\u68c0\u67e5\u3001\u8fde\u63a5\u7ba1\u7406\u7b49)\n   \u2502        \u2193\n   \u2502     \u8fd4\u56de\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\n   \u2502\n   \u2514\u2500\u2192 \u5f02\u6b65\uff1a\u6784\u9020\u6301\u4e45\u5316\u4e8b\u4ef6\n            \u2193\n         \u53d1\u5e03\u5230 Sinks \u7f13\u51b2\u533a\n            \u2193\n         \u6279\u91cf\u805a\u5408 (2-5\u79d2 \u6216 100-500\u6761)\n            \u2193\n         \u6279\u91cf\u5199\u5165\u6570\u636e\u5e93 (\u72ec\u7acb\u7ebf\u7a0b\u6c60)\n            \u2193\n         \u6210\u529f \u2713 / \u5931\u8d25 \u2192 \u964d\u7ea7\u5230\u78c1\u76d8\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_46","title":"\ud83d\udd0d \u67e5\u8be2\u6d41\u7a0b","text":"<pre><code>\u67e5\u8be2\u8bf7\u6c42\n   \u2193\n\u8d70\u7d22\u5f15\u67e5\u8be2\n   \u2193\n\u5206\u533a\u88c1\u526a (\u5982\u679c\u6709\u65f6\u95f4\u8303\u56f4)\n   \u2193\n\u8fd4\u56de\u7ed3\u679c (&lt;50ms)\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_47","title":"\ud83d\udcc8 \u76d1\u63a7\u6d41\u7a0b","text":"<pre><code>\u5b9a\u65f6\u4efb\u52a1 (\u6bcf\u5206\u949f)\n   \u2193\n\u805a\u5408\u5185\u5b58\u6307\u6807\n   \u2193\n\u6301\u4e45\u5316\u5230 performance_metrics \u8868\n   \u2193\n\u5bf9\u5916\u63d0\u4f9b\u76d1\u63a7 API\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_48","title":"\u98ce\u9669\u8bc4\u4f30","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_49","title":"\u26a0\ufe0f \u4e3b\u8981\u98ce\u9669","text":"\u98ce\u9669 \u5f71\u54cd \u6982\u7387 \u7f13\u89e3\u63aa\u65bd \u6570\u636e\u5e93\u8fde\u63a5\u6c60\u8017\u5c3d \u9ad8 \u4e2d \u72ec\u7acb\u7ebf\u7a0b\u6c60\u3001\u8fde\u63a5\u6c60\u76d1\u63a7\u3001\u964d\u7ea7\u7b56\u7565 \u6279\u91cf\u5199\u5165\u5931\u8d25 \u4e2d \u4f4e \u78c1\u76d8\u964d\u7ea7\u3001\u81ea\u52a8\u91cd\u8bd5 \u5206\u533a\u7ba1\u7406\u5931\u8d25 \u4e2d \u4f4e \u5b9a\u65f6\u4efb\u52a1\u76d1\u63a7\u3001\u544a\u8b66 \u5927\u8868\u67e5\u8be2\u6162 \u4e2d \u4e2d \u7d22\u5f15\u4f18\u5316\u3001\u5206\u533a\u88c1\u526a\u3001\u67e5\u8be2\u9650\u5236 \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3 \u9ad8 \u4e2d \u81ea\u52a8\u5f52\u6863\u3001\u544a\u8b66"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_50","title":"\ud83d\udee1\ufe0f \u964d\u7ea7\u7b56\u7565","text":"<ol> <li>L1 \u964d\u7ea7: \u6570\u636e\u5e93\u5199\u5165\u5931\u8d25 \u2192 \u5199\u5165\u672c\u5730\u78c1\u76d8\u961f\u5217</li> <li>L2 \u964d\u7ea7: \u78c1\u76d8\u961f\u5217\u6ee1 \u2192 \u4e22\u5f03\u975e\u5173\u952e\u65e5\u5fd7\uff08\u4fdd\u7559\u9519\u8bef\u65e5\u5fd7\uff09</li> <li>L3 \u964d\u7ea7: \u6781\u7aef\u60c5\u51b5 \u2192 \u4ec5\u8f93\u51fa\u5230\u6807\u51c6\u65e5\u5fd7\u6587\u4ef6</li> </ol>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_51","title":"\u603b\u7ed3","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_52","title":"\u2705 \u8bbe\u8ba1\u4eae\u70b9","text":"<ol> <li>\u5b8c\u5168\u975e\u963b\u585e: \u6240\u6709\u6301\u4e45\u5316\u64cd\u4f5c\u5f02\u6b65\u6267\u884c\uff0c\u4e0d\u5f71\u54cd\u4e3b\u6d41\u7a0b</li> <li>\u6279\u91cf\u4f18\u5316: \u51cf\u5c11\u6570\u636e\u5e93\u538b\u529b\uff0c\u63d0\u5347\u541e\u5410\u91cf</li> <li>\u591a\u5c42\u964d\u7ea7: \u6570\u636e\u5e93\u6545\u969c\u4e0d\u5f71\u54cd\u7cfb\u7edf\u53ef\u7528\u6027</li> <li>\u5206\u533a\u7b56\u7565: \u5386\u53f2\u6570\u636e\u81ea\u52a8\u5f52\u6863\uff0c\u67e5\u8be2\u6027\u80fd\u7a33\u5b9a</li> <li>\u7075\u6d3b\u91c7\u6837: \u9ad8\u9891\u64cd\u4f5c\u91c7\u6837\u6301\u4e45\u5316\uff0c\u5e73\u8861\u6027\u80fd\u4e0e\u5b58\u50a8</li> </ol>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_53","title":"\ud83d\udcca \u9884\u671f\u6536\u76ca","text":"<ul> <li>\u2705 \u6545\u969c\u8bca\u65ad: \u5b8c\u6574\u7684\u8bf7\u6c42\u94fe\u8def\u8ffd\u8e2a</li> <li>\u2705 \u6027\u80fd\u5206\u6790: \u7ec6\u7c92\u5ea6\u7684\u6027\u80fd\u6307\u6807</li> <li>\u2705 \u4e1a\u52a1\u6d1e\u5bdf: \u5de5\u5177\u8c03\u7528\u7edf\u8ba1\u3001\u7528\u6237\u884c\u4e3a\u5206\u6790</li> <li>\u2705 \u5bb9\u91cf\u89c4\u5212: \u5386\u53f2\u6570\u636e\u652f\u6491\u6269\u5bb9\u51b3\u7b56</li> <li>\u2705 \u5408\u89c4\u5ba1\u8ba1: \u5b8c\u6574\u7684\u64cd\u4f5c\u5ba1\u8ba1\u65e5\u5fd7</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_PLAN/#_54","title":"\ud83d\ude80 \u4e0b\u4e00\u6b65","text":"<ol> <li>\u8bc4\u5ba1\u901a\u8fc7 \u2192 \u8fdb\u5165\u7f16\u7801\u9636\u6bb5</li> <li>P0\u529f\u80fd \u2192 \u4f18\u5148\u5b9e\u73b0\u6838\u5fc3\u6301\u4e45\u5316\u8282\u70b9</li> <li>\u538b\u529b\u6d4b\u8bd5 \u2192 \u9a8c\u8bc1\u6027\u80fd\u6307\u6807</li> <li>\u9010\u6b65\u8fed\u4ee3 \u2192 P1\u3001P2\u529f\u80fd\u589e\u5f3a</li> </ol> <p>\u6587\u6863\u7248\u672c: v1.0 \u521b\u5efa\u65e5\u671f: 2025-10-30 \u4f5c\u8005: MCP Router V3 Team \u72b6\u6001: \u5f85\u8bc4\u5ba1 \u270b</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/","title":"MCP Router V3 \u6301\u4e45\u5316\u8bbe\u8ba1\u65b9\u6848 - \u5feb\u901f\u53c2\u8003","text":"<p>\u7248\u672c: v1.0 | \u65e5\u671f: 2025-10-30 | \u72b6\u6001: \u8bbe\u8ba1\u9636\u6bb5</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_1","title":"\ud83d\udcca \u6838\u5fc3\u6307\u6807\u4e00\u89c8","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u8bbe\u8ba1\u76ee\u6807\u6307\u6807                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502  \u6301\u4e45\u5316\u5ef6\u8fdf:     &lt; 2ms      (\u5f02\u6b65\uff0c\u4e0d\u963b\u585e\u4e3b\u6d41\u7a0b)            \u2502\n\u2502  \u6279\u91cf\u5199\u5165:       500\u6761/\u6279    (\u51cf\u5c11\u6570\u636e\u5e93\u538b\u529b)               \u2502\n\u2502  \u67e5\u8be2\u54cd\u5e94:       &lt; 50ms     (\u542b\u7d22\u5f15\u4f18\u5316)                     \u2502\n\u2502  \u6570\u636e\u4e22\u5931\u7387:     &lt; 0.001%   (\u591a\u5c42\u964d\u7ea7\u4fdd\u62a4)                  \u2502\n\u2502  \u541e\u5410\u91cf:         5000+ TPS  (\u652f\u6301\u9ad8\u5e76\u53d1)                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_2","title":"\ud83c\udfaf \u6301\u4e45\u5316\u8282\u70b9\u5168\u666f\u56fe","text":"<pre><code>MCP Router V3 \u6301\u4e45\u5316\u8282\u70b9\n\u2502\n\u251c\u2500 \ud83d\udd34 P0 - \u5fc5\u987b\u5b9e\u73b0\uff088\u4eba\u65e5\uff09\n\u2502   \u251c\u2500 1. \u8def\u7531\u65e5\u5fd7\u6301\u4e45\u5316            \u2b50\u2b50\u2b50\u2b50\u2b50  (3\u4eba\u65e5)\n\u2502   \u251c\u2500 2. \u5065\u5eb7\u68c0\u67e5\u8bb0\u5f55\u6301\u4e45\u5316        \u2b50\u2b50\u2b50\u2b50\u2b50  (2\u4eba\u65e5)\n\u2502   \u251c\u2500 4. \u670d\u52a1\u5668\u6ce8\u518c\u4fe1\u606f\u6301\u4e45\u5316      \u2b50\u2b50\u2b50\u2b50\u2b50  (2\u4eba\u65e5)\n\u2502   \u2514\u2500 10. \u9519\u8bef\u65e5\u5fd7\u6301\u4e45\u5316           \u2b50\u2b50\u2b50\u2b50\u2b50  (1\u4eba\u65e5)\n\u2502\n\u251c\u2500 \ud83d\udfe1 P1 - \u91cd\u8981\u589e\u5f3a\uff087\u4eba\u65e5\uff09\n\u2502   \u251c\u2500 3. SSE\u4f1a\u8bdd\u7ba1\u7406\u6301\u4e45\u5316         \u2b50\u2b50\u2b50\u2b50   (2\u4eba\u65e5)\n\u2502   \u251c\u2500 8. \u5de5\u5177\u8c03\u7528\u8bb0\u5f55\u6301\u4e45\u5316        \u2b50\u2b50\u2b50\u2b50   (2\u4eba\u65e5)\n\u2502   \u2514\u2500 9. \u6027\u80fd\u6307\u6807\u6301\u4e45\u5316            \u2b50\u2b50\u2b50\u2b50   (3\u4eba\u65e5)\n\u2502\n\u2514\u2500 \ud83d\udfe2 P2 - \u4f18\u5316\u5b8c\u5584\uff084\u4eba\u65e5\uff09\n    \u251c\u2500 5. \u8fde\u63a5\u6c60\u7edf\u8ba1\u6301\u4e45\u5316          \u2b50\u2b50\u2b50     (1\u4eba\u65e5)\n    \u251c\u2500 6. \u8d1f\u8f7d\u5747\u8861\u51b3\u7b56\u6301\u4e45\u5316        \u2b50\u2b50\u2b50     (2\u4eba\u65e5)\n    \u2514\u2500 7. \u7194\u65ad\u5668\u72b6\u6001\u6301\u4e45\u5316          \u2b50\u2b50\u2b50     (1\u4eba\u65e5)\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_3","title":"\ud83d\udccb \u529f\u80fd\u8282\u70b9\u901f\u67e5\u8868","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#1","title":"1\ufe0f\u20e3 \u8def\u7531\u65e5\u5fd7\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 <code>McpRouterService.routeRequest()</code> \u9891\u7387 \u26a1 \u6781\u9ad8 (\u6bcf\u4e2a\u8bf7\u6c42) \u7b56\u7565 \u6279\u91cf\u5f02\u6b65\u5199\u5165 (2\u79d2/500\u6761) \u6570\u636e\u8868 <code>routing_logs</code> \u6838\u5fc3\u5b57\u6bb5 request_id, server_key, tool_name, duration, is_success \u5206\u533a \u2705 \u6309\u5929\u5206\u533a\uff0c30\u5929\u5f52\u6863 \u964d\u7ea7 \u2705 \u78c1\u76d8\u961f\u5217 \u2192 \u65e5\u5fd7\u6587\u4ef6 <p>\u5173\u952e\u4ee3\u7801\u70b9: <pre><code>// \u5728 routeRequest() \u4e2d\n.doOnSuccess(response -&gt; {\n    routingLog.setIsSuccess(true);\n    persistencePublisher.publishRoutingLog(routingLog);  // \u5f02\u6b65\n})\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#2","title":"2\ufe0f\u20e3 \u5065\u5eb7\u68c0\u67e5\u8bb0\u5f55\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 <code>HealthCheckService.performHealthCheck()</code> \u9891\u7387 \ud83d\udd38 \u4e2d\u7b49 (15-60\u79d2/\u6b21) \u7b56\u7565 \u6279\u91cf\u5f02\u6b65 + \u91c7\u6837 (5\u79d2/100\u6761, 10%\u91c7\u6837) \u6570\u636e\u8868 <code>health_check_records</code> \u6838\u5fc3\u5b57\u6bb5 server_key, check_result, response_time, check_details \u5206\u533a \u2705 \u6309\u5468\u5206\u533a\uff0c60\u5929\u5f52\u6863 \u964d\u7ea7 \u2705 \u78c1\u76d8\u961f\u5217 <p>\u91c7\u6837\u7b56\u7565: <pre><code>// \u53ea\u6301\u4e45\u5316\u5173\u952e\u4e8b\u4ef6\nif (isFailed || shouldSample(0.1)) {\n    healthCheckBuffer.tryEmitNext(record);\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#3-sse","title":"3\ufe0f\u20e3 SSE\u4f1a\u8bdd\u7ba1\u7406\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 <code>McpSseTransportProvider.connect()</code> / <code>disconnect()</code> \u9891\u7387 \ud83d\udd38 \u4e2d\u7b49 (\u8fde\u63a5\u53d8\u66f4\u65f6) \u7b56\u7565 \u72b6\u6001\u53d8\u66f4\u65f6\u5199\u5165 + \u5b9a\u671f\u66f4\u65b0(30\u79d2) \u6570\u636e\u8868 <code>sse_session_records</code> \u6838\u5fc3\u5b57\u6bb5 session_id, client_id, status, message_count, session_duration \u5206\u533a \u2705 \u6309\u6708\u5206\u533a\uff0c90\u5929\u5f52\u6863 <p>\u66f4\u65b0\u7b56\u7565: <pre><code>@Scheduled(fixedDelay = 30000)\npublic void updateActiveSessionStats() {\n    activeSessions.values().forEach(session -&gt; \n        sseSessionBuffer.tryEmitNext(toRecord(session))\n    );\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#4","title":"4\ufe0f\u20e3 \u670d\u52a1\u5668\u6ce8\u518c\u4fe1\u606f\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 <code>McpServerRegistry.registerServer()</code> \u9891\u7387 \ud83d\udd39 \u4f4e (\u670d\u52a1\u4e0a\u4e0b\u7ebf) \u7b56\u7565 \u540c\u6b65\u6301\u4e45\u5316 (\u53ef\u63a5\u53d7) \u6570\u636e\u8868 <code>mcp_servers</code> \u6838\u5fc3\u5b57\u6bb5 server_key, server_name, host, port, healthy, metadata \u5206\u533a \u274c \u4e0d\u9700\u8981 <p>\u540c\u6b65\u5199\u5165: <pre><code>public Mono&lt;Void&gt; registerServer(McpServerInfo server) {\n    return Mono.fromRunnable(() -&gt; \n        mcpServerMapper.insertOrUpdate(server)\n    ).subscribeOn(Schedulers.boundedElastic());\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#5","title":"5\ufe0f\u20e3 \u8fde\u63a5\u6c60\u7edf\u8ba1\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 <code>McpClientManager</code> (\u5b9a\u671f\u91c7\u6837) \u9891\u7387 \ud83d\udd39 \u4f4e (60\u79d2/\u6b21) \u7b56\u7565 \u5b9a\u65f6\u91c7\u6837\u6279\u91cf\u5199\u5165 \u6570\u636e\u8868 <code>connection_pool_stats</code> \u6838\u5fc3\u5b57\u6bb5 server_key, total_connections, active_connections, pool_usage_rate"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#6","title":"6\ufe0f\u20e3 \u8d1f\u8f7d\u5747\u8861\u51b3\u7b56\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 <code>LoadBalancer.selectServer()</code> \u9891\u7387 \u26a1 \u6781\u9ad8 (\u6bcf\u6b21\u8def\u7531) \u7b56\u7565 1% \u91c7\u6837 + \u6279\u91cf\u5199\u5165 \u6570\u636e\u8868 <code>load_balance_decisions</code> \u6838\u5fc3\u5b57\u6bb5 strategy, candidates, selected_server, selection_reason <p>\u91c7\u6837\u4ee3\u7801: <pre><code>if (ThreadLocalRandom.current().nextDouble() &lt; 0.01) {\n    lbDecisionBuffer.tryEmitNext(decision);\n}\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#7","title":"7\ufe0f\u20e3 \u7194\u65ad\u5668\u72b6\u6001\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 <code>CircuitBreakerService</code> (\u72b6\u6001\u53d8\u66f4) \u9891\u7387 \ud83d\udd39 \u6781\u4f4e (\u72b6\u6001\u53d8\u5316\u65f6) \u7b56\u7565 \u5b9e\u65f6\u6301\u4e45\u5316 (\u72b6\u6001\u53d8\u66f4\u7acb\u5373\u5199\u5165) \u6570\u636e\u8868 <code>circuit_breaker_states</code> \u6838\u5fc3\u5b57\u6bb5 server_key, state, failure_count, trigger_reason"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#8","title":"8\ufe0f\u20e3 \u5de5\u5177\u8c03\u7528\u8bb0\u5f55\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 <code>McpClientManager.callTool()</code> \u9891\u7387 \u26a1 \u9ad8 \u7b56\u7565 \u6279\u91cf\u5f02\u6b65\u5199\u5165 (2\u79d2/500\u6761) \u6570\u636e\u8868 <code>tool_call_records</code> \u6838\u5fc3\u5b57\u6bb5 tool_name, arguments, result, duration, is_success \u5206\u533a \u2705 \u6309\u5929\u5206\u533a\uff0c30\u5929\u5f52\u6863"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#9","title":"9\ufe0f\u20e3 \u6027\u80fd\u6307\u6807\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 \u5b9a\u65f6\u805a\u5408\u4efb\u52a1 \u9891\u7387 \ud83d\udd39 \u4f4e (60\u79d2/\u6b21) \u7b56\u7565 \u5185\u5b58\u805a\u5408 \u2192 \u5b9a\u65f6\u6301\u4e45\u5316 \u6570\u636e\u8868 <code>performance_metrics</code> \u6838\u5fc3\u5b57\u6bb5 total_requests, avg_response_time, p99_response_time, error_rate"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_4","title":"\ud83d\udd1f \u9519\u8bef\u65e5\u5fd7\u6301\u4e45\u5316","text":"\u9879\u76ee \u8be6\u60c5 \u89e6\u53d1\u70b9 \u5168\u5c40\u5f02\u5e38\u5904\u7406\u5668 \u9891\u7387 \ud83d\udd38 \u4e2d\u7b49 (\u9519\u8bef\u53d1\u751f\u65f6) \u7b56\u7565 \u5f02\u6b65\u5199\u5165 \u6570\u636e\u8868 <code>error_logs</code> \u6838\u5fc3\u5b57\u6bb5 error_type, error_message, stack_trace, request_id \u5206\u533a \u2705 \u6309\u5468\u5206\u533a\uff0c30\u5929\u5f52\u6863"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_5","title":"\ud83c\udfd7\ufe0f \u6280\u672f\u67b6\u6784\u7cbe\u534e","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_6","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      PersistenceEventPublisher (\u6838\u5fc3\u8c03\u5ea6\u5668)            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502  \u2502  Sinks.Many&lt;T&gt; \u7f13\u51b2\u533a                         \u2502     \u2502\n\u2502  \u2502    \u251c\u2500 routingLogSink                          \u2502     \u2502\n\u2502  \u2502    \u251c\u2500 healthCheckSink                         \u2502     \u2502\n\u2502  \u2502    \u251c\u2500 sseSessionSink                          \u2502     \u2502\n\u2502  \u2502    \u2514\u2500 ...                                     \u2502     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2502                     \u2193                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502  \u2502  Batch Writers (\u6279\u91cf\u5199\u5165\u5668)                   \u2502     \u2502\n\u2502  \u2502    - \u65f6\u95f4\u7a97\u53e3: 2-5\u79d2                           \u2502     \u2502\n\u2502  \u2502    - \u5bb9\u91cf\u9608\u503c: 100-500\u6761                       \u2502     \u2502\n\u2502  \u2502    - \u964d\u7ea7\u7b56\u7565: \u78c1\u76d8\u961f\u5217 \u2192 \u65e5\u5fd7\u6587\u4ef6              \u2502     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_7","title":"\u6279\u91cf\u5199\u5165\u914d\u7f6e","text":"<pre><code>// \u8def\u7531\u65e5\u5fd7: \u9ad8\u9891\uff0c\u6fc0\u8fdb\u6279\u91cf\nroutingLogSink.asFlux()\n    .buffer(Duration.ofSeconds(2), 500)\n    .flatMap(this::batchPersist)\n    .subscribe();\n\n// \u5065\u5eb7\u68c0\u67e5: \u4e2d\u9891\uff0c\u6e29\u548c\u6279\u91cf\nhealthCheckSink.asFlux()\n    .buffer(Duration.ofSeconds(5), 100)\n    .flatMap(this::batchPersist)\n    .subscribe();\n\n// \u6027\u80fd\u6307\u6807: \u4f4e\u9891\uff0c\u5c0f\u6279\u91cf\nmetricsSink.asFlux()\n    .buffer(Duration.ofSeconds(10), 10)\n    .flatMap(this::batchPersist)\n    .subscribe();\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_8","title":"\u964d\u7ea7\u7b56\u7565","text":"<pre><code>L1: \u6570\u636e\u5e93\u5199\u5165\u5931\u8d25\n    \u2193\n    \u5199\u5165\u78c1\u76d8\u961f\u5217 (RocksDB)\n\nL2: \u78c1\u76d8\u961f\u5217\u6ee1\n    \u2193\n    \u4e22\u5f03\u975e\u5173\u952e\u65e5\u5fd7\uff08\u4fdd\u7559\u9519\u8bef\u65e5\u5fd7\uff09\n\nL3: \u6781\u7aef\u60c5\u51b5\n    \u2193\n    \u4ec5\u8f93\u51fa\u5230\u6807\u51c6\u65e5\u5fd7\u6587\u4ef6\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_9","title":"\ud83d\udcca \u6570\u636e\u8868\u8bbe\u8ba1\u6982\u89c8","text":"\u8868\u540d \u5206\u533a\u7b56\u7565 \u5f52\u6863\u5468\u671f \u9884\u4f30\u5927\u5c0f/\u5929 \u7d22\u5f15\u6570 <code>routing_logs</code> \u6309\u5929 30\u5929 500MB 5 <code>health_check_records</code> \u6309\u5468 60\u5929 50MB 3 <code>sse_session_records</code> \u6309\u6708 90\u5929 10MB 4 <code>mcp_servers</code> \u65e0 \u6c38\u4e45 &lt;1MB 3 <code>connection_pool_stats</code> \u6309\u5468 60\u5929 5MB 2 <code>tool_call_records</code> \u6309\u5929 30\u5929 300MB 4 <code>performance_metrics</code> \u6309\u6708 180\u5929 50MB 2 <code>error_logs</code> \u6309\u5468 30\u5929 100MB 4 <p>\u603b\u8ba1: \u65e5\u5747\u589e\u957f\u7ea6 1GB, \u5f52\u6863\u540e\u7ef4\u6301 30-50GB</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_10","title":"\ud83d\ude80 \u5b9e\u65bd\u8def\u7ebf\u56fe","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#8_1","title":"\u7b2c\u4e00\u9636\u6bb5: \u6838\u5fc3\u529f\u80fd (8\u4eba\u65e5)","text":"<pre><code>Week 1:\n  Day 1-3:  \u8def\u7531\u65e5\u5fd7\u6301\u4e45\u5316\n            - PersistenceEventPublisher \u57fa\u7840\u6846\u67b6\n            - RoutingLog \u5b9e\u4f53\u548c Mapper\n            - \u6279\u91cf\u5199\u5165\u5668\n            - \u964d\u7ea7\u7b56\u7565\n            - \u5206\u533a\u7ba1\u7406\n\n  Day 4-5:  \u5065\u5eb7\u68c0\u67e5\u8bb0\u5f55\u6301\u4e45\u5316\n            - HealthCheckRecord \u5b9e\u4f53\u548c Mapper\n            - \u91c7\u6837\u7b56\u7565\n\n  Day 6-7:  \u670d\u52a1\u5668\u6ce8\u518c\u4fe1\u606f\u6301\u4e45\u5316\n            - McpServer \u5b9e\u4f53\u548c Mapper\n            - \u540c\u6b65\u6301\u4e45\u5316\u903b\u8f91\n\n  Day 8:    \u9519\u8bef\u65e5\u5fd7\u6301\u4e45\u5316\n            - ErrorLog \u5b9e\u4f53\u548c Mapper\n            - \u5168\u5c40\u5f02\u5e38\u62e6\u622a\n\n\u2705 \u91cc\u7a0b\u7891: \u6838\u5fc3\u8bca\u65ad\u80fd\u529b\u5177\u5907\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#7_1","title":"\u7b2c\u4e8c\u9636\u6bb5: \u589e\u5f3a\u529f\u80fd (7\u4eba\u65e5)","text":"<pre><code>Week 2:\n  Day 1-2:  SSE\u4f1a\u8bdd\u7ba1\u7406\u6301\u4e45\u5316\n  Day 3-4:  \u5de5\u5177\u8c03\u7528\u8bb0\u5f55\u6301\u4e45\u5316\n  Day 5-7:  \u6027\u80fd\u6307\u6807\u6301\u4e45\u5316\n\n\u2705 \u91cc\u7a0b\u7891: \u5b8c\u6574\u76d1\u63a7\u4f53\u7cfb\u5efa\u7acb\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#4_1","title":"\u7b2c\u4e09\u9636\u6bb5: \u4f18\u5316\u5b8c\u5584 (4\u4eba\u65e5)","text":"<pre><code>Week 3:\n  Day 1:    \u8fde\u63a5\u6c60\u7edf\u8ba1\u6301\u4e45\u5316\n  Day 2-3:  \u8d1f\u8f7d\u5747\u8861\u51b3\u7b56\u6301\u4e45\u5316\n  Day 4:    \u7194\u65ad\u5668\u72b6\u6001\u6301\u4e45\u5316\n\n\u2705 \u91cc\u7a0b\u7891: \u5168\u529f\u80fd\u751f\u4ea7\u5c31\u7eea\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_11","title":"\u2705 \u9a8c\u6536\u6807\u51c6","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_12","title":"\u529f\u80fd\u9a8c\u6536","text":"<ul> <li> \u6240\u6709P0\u8282\u70b9\u6301\u4e45\u5316\u6b63\u5e38\u5de5\u4f5c</li> <li> \u6570\u636e\u5e93\u5199\u5165\u5ef6\u8fdf &lt; 2ms (P99)</li> <li> \u6279\u91cf\u5199\u5165\u6210\u529f\u7387 &gt; 99.9%</li> <li> \u964d\u7ea7\u7b56\u7565\u9a8c\u8bc1\u901a\u8fc7</li> <li> \u5206\u533a\u81ea\u52a8\u521b\u5efa\u548c\u5f52\u6863\u6b63\u5e38</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_13","title":"\u6027\u80fd\u9a8c\u6536","text":"<ul> <li> \u8def\u7531\u541e\u5410\u91cf\u4e0d\u4e0b\u964d (\u4fdd\u6301 5000+ TPS)</li> <li> \u8def\u7531\u5ef6\u8fdf\u589e\u52a0 &lt; 1ms</li> <li> \u6570\u636e\u5e93\u8fde\u63a5\u6570 &lt; 50</li> <li> CPU \u589e\u52a0 &lt; 5%</li> <li> \u5185\u5b58\u589e\u52a0 &lt; 100MB</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_14","title":"\u53ef\u9760\u6027\u9a8c\u6536","text":"<ul> <li> \u6570\u636e\u5e93\u6545\u969c\u65f6\u7cfb\u7edf\u6b63\u5e38\u8fd0\u884c</li> <li> \u78c1\u76d8\u964d\u7ea7\u81ea\u52a8\u89e6\u53d1</li> <li> \u81ea\u52a8\u6062\u590d\u540e\u6570\u636e\u8865\u5f55</li> <li> \u5206\u533a\u6ee1\u8f7d\u540e\u81ea\u52a8\u5f52\u6863</li> <li> \u67e5\u8be2\u6027\u80fd\u7a33\u5b9a &lt; 50ms</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_15","title":"\ud83d\udcd6 \u76f8\u5173\u6587\u6863","text":"\u6587\u6863 \u8bf4\u660e PERSISTENCE_DESIGN_PLAN.md \ud83d\udcd8 \u5b8c\u6574\u8bbe\u8ba1\u6587\u6863 (\u672c\u6587\u7684\u8be6\u7ec6\u7248) PERSISTENCE_GUIDE.md \ud83d\udcd6 \u6301\u4e45\u5316\u6280\u672f\u6307\u5357 database/schema.sql \ud83d\uddc4\ufe0f \u6570\u636e\u5e93Schema PERSISTENCE_README.md \ud83d\udccb \u5feb\u901f\u5f00\u59cb"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_16","title":"\ud83e\udd14 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#q1","title":"Q1: \u4e3a\u4ec0\u4e48\u4f7f\u7528\u6279\u91cf\u5199\u5165\u800c\u4e0d\u662f\u5b9e\u65f6\u5199\u5165\uff1f","text":"<p>A: \u8def\u7531\u65e5\u5fd7\u7b49\u9ad8\u9891\u64cd\u4f5c\u5982\u679c\u5b9e\u65f6\u5199\u5165\uff0c\u4f1a\u4ea7\u751f\u5927\u91cf\u6570\u636e\u5e93\u8fde\u63a5\u548c\u4e8b\u52a1\uff0c\u4e25\u91cd\u5f71\u54cd\u6027\u80fd\u3002\u6279\u91cf\u5199\u5165\u53ef\u4ee5\u5c06 5000 TPS \u7684\u5199\u5165\u538b\u529b\u964d\u4f4e\u5230 10 TPS \u5de6\u53f3\u3002</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#q2","title":"Q2: \u5f02\u6b65\u6301\u4e45\u5316\u4f1a\u4e0d\u4f1a\u4e22\u6570\u636e\uff1f","text":"<p>A: \u6709\u6781\u5c0f\u6982\u7387 (&lt;0.001%)\u3002\u7f13\u89e3\u63aa\u65bd\uff1a 1. \u4f7f\u7528\u5185\u5b58\u7f13\u51b2\u533a (Sinks.Many) 2. \u78c1\u76d8\u964d\u7ea7\u961f\u5217 3. \u5173\u952e\u9519\u8bef\u65e5\u5fd7\u5b9e\u65f6\u5199\u5165</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#q3","title":"Q3: \u5206\u533a\u8868\u5982\u4f55\u81ea\u52a8\u7ba1\u7406\uff1f","text":"<p>A: \u901a\u8fc7\u5b9a\u65f6\u4efb\u52a1\uff1a - \u6bcf\u5929\u51cc\u66682\u70b9\u521b\u5efa\u672a\u67657\u5929\u7684\u5206\u533a - \u6bcf\u5468\u65e5\u51cc\u66683\u70b9\u5f52\u686330\u5929\u524d\u7684\u6570\u636e</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#q4","title":"Q4: \u6570\u636e\u5e93\u6545\u969c\u5bf9\u8def\u7531\u6709\u5f71\u54cd\u5417\uff1f","text":"<p>A: \u65e0\u5f71\u54cd\u3002\u6301\u4e45\u5316\u5b8c\u5168\u5f02\u6b65\uff0c\u5931\u8d25\u540e\u81ea\u52a8\u964d\u7ea7\u5230\u78c1\u76d8\u961f\u5217\uff0c\u4e0d\u5f71\u54cd\u8def\u7531\u6838\u5fc3\u529f\u80fd\u3002</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#q5","title":"Q5: \u5982\u4f55\u67e5\u8be2\u5386\u53f2\u6570\u636e\uff1f","text":"<p>A:  1. 30\u5929\u5185: \u67e5\u8be2\u4e3b\u8868 (\u6027\u80fd\u6700\u4f73) 2. 30-180\u5929: \u67e5\u8be2\u5f52\u6863\u8868 3. &gt;180\u5929: \u67e5\u8be2\u5907\u4efd\u6216\u6570\u636e\u6e56</p>"},{"location":"archived/docs-251111/PERSISTENCE_DESIGN_SUMMARY/#_17","title":"\ud83d\udcde \u8054\u7cfb\u65b9\u5f0f","text":"\u89d2\u8272 \u8054\u7cfb\u4eba \u804c\u8d23 \u6280\u672f\u8d1f\u8d23\u4eba @tech-lead \u6574\u4f53\u65b9\u6848\u8bbe\u8ba1 DBA @dba \u6570\u636e\u5e93\u4f18\u5316\u3001\u5206\u533a\u7ba1\u7406 \u5f00\u53d1 @dev-team \u529f\u80fd\u5b9e\u73b0 \u6d4b\u8bd5 @qa-team \u529f\u80fd\u548c\u6027\u80fd\u6d4b\u8bd5 <p>\u6587\u6863\u7248\u672c: v1.0 \u521b\u5efa\u65e5\u671f: 2025-10-30 \u6700\u540e\u66f4\u65b0: 2025-10-30 \u72b6\u6001: \u2705 \u8bbe\u8ba1\u5b8c\u6210\uff0c\u5f85\u8bc4\u5ba1</p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/","title":"MCP Router V3 \u6301\u4e45\u5316\u5b8c\u6574\u6307\u5357","text":"<p>\u7248\u672c: v2.0 \u751f\u4ea7\u7ea7 \u66f4\u65b0\u65e5\u671f: 2025-03-01 \u72b6\u6001: \u2705 \u5df2\u4f18\u5316\uff0c\u53ef\u76f4\u63a5\u4f7f\u7528</p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_1","title":"\ud83d\udcd1 \u76ee\u5f55","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb</li> <li>\u6838\u5fc3\u67b6\u6784</li> <li>\u5173\u952e\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848</li> <li>\u5b8c\u6574\u4ee3\u7801\u5b9e\u73b0</li> <li>\u6027\u80fd\u8c03\u4f18</li> <li>\u6545\u969c\u6392\u67e5</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_2","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#1-2","title":"1. \u521d\u59cb\u5316\u6570\u636e\u5e93 (2\u5206\u949f)","text":"<pre><code># \u521b\u5efa\u6570\u636e\u5e93\u5e76\u5bfc\u5165schema\nmysql -u root -p -e \"CREATE DATABASE IF NOT EXISTS mcp_bridge CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\"\nmysql -u root -p mcp_bridge &lt; mcp-router-v3/database/schema.sql\n\n# \u9a8c\u8bc1\nmysql -u root -p mcp_bridge -e \"SHOW TABLES;\"\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#2-pomxml","title":"2. \u6dfb\u52a0\u4f9d\u8d56 (pom.xml)","text":"<pre><code>&lt;dependencies&gt;\n    &lt;!-- MyBatis + MySQL --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#3-applicationyml","title":"3. \u914d\u7f6e (application.yml)","text":"<pre><code>spring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/mcp_bridge?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai&amp;rewriteBatchedStatements=true\n    username: root\n    password: your_password\n    hikari:\n      minimum-idle: 10\n      maximum-pool-size: 50\n      connection-timeout: 30000\n\nmybatis:\n  mapper-locations: classpath:mapper/*.xml\n  type-aliases-package: com.pajk.mcpbridge.core.entity\n  type-handlers-package: com.pajk.mcpbridge.core.config\n  configuration:\n    map-underscore-to-camel-case: true\n    use-generated-keys: true\n\nmcp:\n  persistence:\n    enabled: true\n    async-write: true\n    batch-size: 500\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#4","title":"4. \u542f\u52a8\u9a8c\u8bc1","text":"<pre><code>mvn clean compile\nmvn spring-boot:run\n</code></pre> <p>\u5b8c\u6210\uff01 \ud83c\udf89</p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_3","title":"\u6838\u5fc3\u67b6\u6784","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_4","title":"\u5c42\u6b21\u7ed3\u6784","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Controller (WebFlux Reactive)               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n                        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      AsyncPersistenceFacade (\u5f02\u6b65\u9002\u914d\u5c42)            \u2502\n\u2502  \u2022 \u7f13\u51b2\u961f\u5217 (LinkedBlockingQueue)                   \u2502\n\u2502  \u2022 \u5931\u8d25\u91cd\u8bd5 (Retry.backoff)                         \u2502\n\u2502  \u2022 \u964d\u7ea7\u5230\u6587\u4ef6 (FallbackFileWriter)                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502 \u4e13\u7528\u7ebf\u7a0b\u6c60 (dbScheduler)\n                        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    TransactionService (\u4e8b\u52a1\u8fb9\u754c)                    \u2502\n\u2502  \u2022 @Transactional                                   \u2502\n\u2502  \u2022 \u6279\u91cf\u64cd\u4f5c                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n                        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         MyBatis Mapper (\u6570\u636e\u8bbf\u95ee)                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n                        \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              MySQL (\u5206\u533a\u8868)                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_5","title":"\u6838\u5fc3\u7ec4\u4ef6","text":"\u7ec4\u4ef6 \u804c\u8d23 \u5173\u952e\u6280\u672f AsyncPersistenceFacade \u5f02\u6b65\u9002\u914d\u3001\u7f13\u51b2\u3001\u964d\u7ea7 Reactor, BlockingQueue TransactionService \u4e8b\u52a1\u7ba1\u7406\u3001\u6279\u91cf\u64cd\u4f5c @Transactional JsonTypeHandler JSON\u5b57\u6bb5\u5e8f\u5217\u5316 Jackson, MyBatis TypeHandler FallbackFileWriter \u964d\u7ea7\u5199\u5165\u3001\u6062\u590d NIO Files \u4e13\u7528\u8c03\u5ea6\u5668 \u7ebf\u7a0b\u9694\u79bb Reactor Schedulers"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_6","title":"\u5173\u952e\u95ee\u9898\u4e0e\u89e3\u51b3\u65b9\u6848","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#1-webfluxmybatis","title":"\u274c \u95ee\u98981: WebFlux\u4e0eMyBatis\u963b\u585e\u51b2\u7a81","text":"<p>\u75c7\u72b6: \u9ad8\u5e76\u53d1\u4e0b\u7ebf\u7a0b\u6c60\u8017\u5c3d\uff0c\u54cd\u5e94\u53d8\u6162</p> <p>\u539f\u56e0: MyBatis\u662f\u540c\u6b65\u963b\u585e\u7684\uff0c\u76f4\u63a5\u5728\u54cd\u5e94\u5f0f\u6d41\u4e2d\u4f7f\u7528\u4f1a\u963b\u585e\u7ebf\u7a0b</p> <p>\u2705 \u89e3\u51b3\u65b9\u6848: \u4e13\u7528\u7ebf\u7a0b\u6c60\u9694\u79bb</p> <pre><code>// config/PersistenceSchedulerConfig.java\n@Configuration\npublic class PersistenceSchedulerConfig {\n    @Bean(\"dbScheduler\")\n    public Scheduler dbScheduler() {\n        int cores = Runtime.getRuntime().availableProcessors();\n        return Schedulers.newBoundedElastic(\n            cores * 4,           // \u6700\u5927\u7ebf\u7a0b\u6570\n            Integer.MAX_VALUE,   // \u961f\u5217\u5bb9\u91cf\n            \"db-scheduler\",\n            60, true\n        );\n    }\n}\n\n// \u4f7f\u7528\npublic Mono&lt;Void&gt; saveAsync(RoutingLog log) {\n    return Mono.fromRunnable(() -&gt; mapper.insert(log))\n        .subscribeOn(dbScheduler);  // \u5728\u4e13\u7528\u8c03\u5ea6\u5668\u4e0a\u6267\u884c\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#2","title":"\u274c \u95ee\u98982: \u5206\u533a\u8868\u4e3b\u952e\u8bbe\u8ba1\u9519\u8bef","text":"<p>\u75c7\u72b6: \u521b\u5efa\u5206\u533a\u8868\u5931\u8d25 <pre><code>ERROR: A PRIMARY KEY must include all columns in the table's partitioning function\n</code></pre></p> <p>\u539f\u56e0: MySQL\u8981\u6c42\u5206\u533a\u952e\u5fc5\u987b\u5305\u542b\u5728\u4e3b\u952e\u4e2d</p> <p>\u2705 \u89e3\u51b3\u65b9\u6848: \u590d\u5408\u4e3b\u952e</p> <pre><code>-- \u274c \u9519\u8bef\nCREATE TABLE routing_logs (\n  id BIGINT AUTO_INCREMENT PRIMARY KEY,\n  start_time DATETIME NOT NULL\n) PARTITION BY RANGE (TO_DAYS(start_time)) (...);\n\n-- \u2705 \u6b63\u786e\nCREATE TABLE routing_logs (\n  id BIGINT AUTO_INCREMENT,\n  start_time DATETIME NOT NULL,\n  PRIMARY KEY (id, start_time),  -- \u5305\u542b\u5206\u533a\u952e\n  UNIQUE KEY uk_request_time (request_id, start_time)\n) PARTITION BY RANGE (TO_DAYS(start_time)) (...);\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#3","title":"\u274c \u95ee\u98983: \u5e76\u53d1\u63d2\u5165/\u66f4\u65b0\u51b2\u7a81","text":"<p>\u75c7\u72b6: \u5148\u67e5\u8be2\u518d\u63d2\u5165\uff0c\u5e76\u53d1\u65f6\u53ef\u80fd\u91cd\u590d\u6216\u4e22\u5931</p> <p>\u2705 \u89e3\u51b3\u65b9\u6848: UPSERT\u539f\u5b50\u64cd\u4f5c</p> <pre><code>// Mapper\n@Insert(\"INSERT INTO mcp_servers (...) VALUES (...) \" +\n        \"ON DUPLICATE KEY UPDATE \" +\n        \"healthy = VALUES(healthy), \" +\n        \"updated_at = CURRENT_TIMESTAMP\")\nint upsert(McpServer server);\n\n// \u4e00\u6761SQL\u5b8c\u6210\uff0c\u539f\u5b50\u64cd\u4f5c\uff0c\u5e76\u53d1\u5b89\u5168\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#4_1","title":"\u274c \u95ee\u98984: \u6570\u636e\u5e93\u6545\u969c\u5bfc\u81f4\u6570\u636e\u4e22\u5931","text":"<p>\u75c7\u72b6: \u6570\u636e\u5e93\u5b95\u673a\u6216\u7f51\u7edc\u6545\u969c\uff0c\u65e5\u5fd7\u4e22\u5931</p> <p>\u2705 \u89e3\u51b3\u65b9\u6848: \u591a\u5c42\u964d\u7ea7\u7b56\u7565</p> <pre><code>@Component\npublic class AsyncPersistenceFacade {\n    private final BlockingQueue&lt;RoutingLog&gt; logBuffer = \n        new LinkedBlockingQueue&lt;&gt;(10000);\n\n    public Mono&lt;Void&gt; saveAsync(RoutingLog log) {\n        return Mono.fromRunnable(() -&gt; {\n            // 1. \u5148\u52a0\u5165\u7f13\u51b2\u961f\u5217\n            boolean offered = logBuffer.offer(log);\n            if (!offered) {\n                // 2. \u961f\u5217\u6ee1\uff0c\u964d\u7ea7\u5230\u6587\u4ef6\n                fallbackFileWriter.writeToFile(log);\n            }\n        })\n        .then()\n        .onErrorResume(e -&gt; {\n            // 3. \u6700\u540e\u515c\u5e95\uff1a\u6253\u5370\u65e5\u5fd7\n            log.error(\"Failed to buffer: {}\", log.getRequestId());\n            return Mono.empty();\n        });\n    }\n\n    // \u5b9a\u65f6\u6279\u91cf\u5237\u65b0\u5230\u6570\u636e\u5e93\uff08\u5e26\u91cd\u8bd5\uff09\n    @Scheduled(fixedDelay = 5000)\n    public void flushBatch() {\n        persistenceFacade.flushBatch(500)\n            .retryWhen(Retry.backoff(2, Duration.ofMillis(200)))\n            .subscribe();\n    }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#5-json","title":"\u274c \u95ee\u98985: JSON\u5b57\u6bb5\u5e8f\u5217\u5316\u5931\u8d25","text":"<p>\u75c7\u72b6: <code>Could not set property 'metadata'</code></p> <p>\u2705 \u89e3\u51b3\u65b9\u6848: \u81ea\u5b9a\u4e49TypeHandler</p> <pre><code>@Slf4j\n@MappedTypes({Map.class})\npublic class JsonTypeHandler extends BaseTypeHandler&lt;Map&lt;String, Object&gt;&gt; {\n    private static final ObjectMapper objectMapper = new ObjectMapper();\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, \n                                    Map&lt;String, Object&gt; parameter, \n                                    JdbcType jdbcType) throws SQLException {\n        try {\n            ps.setString(i, objectMapper.writeValueAsString(parameter));\n        } catch (JsonProcessingException e) {\n            throw new SQLException(\"Failed to serialize JSON\", e);\n        }\n    }\n\n    @Override\n    public Map&lt;String, Object&gt; getNullableResult(ResultSet rs, String columnName) \n            throws SQLException {\n        String json = rs.getString(columnName);\n        if (json == null || json.isEmpty()) return null;\n        try {\n            return objectMapper.readValue(json, Map.class);\n        } catch (JsonProcessingException e) {\n            throw new SQLException(\"Failed to deserialize JSON\", e);\n        }\n    }\n\n    // ... \u5176\u4ed6\u65b9\u6cd5\u7c7b\u4f3c\n}\n\n// \u4f7f\u7528\n@Result(property = \"metadata\", column = \"metadata\", \n        typeHandler = JsonTypeHandler.class)\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_7","title":"\u5b8c\u6574\u4ee3\u7801\u5b9e\u73b0","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_8","title":"\u76ee\u5f55\u7ed3\u6784","text":"<pre><code>src/main/java/com/pajk/mcpbridge/core/\n\u251c\u2500\u2500 config/\n\u2502   \u251c\u2500\u2500 PersistenceSchedulerConfig.java    # \u4e13\u7528\u7ebf\u7a0b\u6c60\n\u2502   \u2514\u2500\u2500 JsonTypeHandler.java               # JSON\u5904\u7406\u5668\n\u251c\u2500\u2500 entity/\n\u2502   \u251c\u2500\u2500 RoutingLog.java                    # \u8def\u7531\u65e5\u5fd7\u5b9e\u4f53\n\u2502   \u2514\u2500\u2500 McpServer.java                     # \u670d\u52a1\u5668\u5b9e\u4f53\n\u251c\u2500\u2500 mapper/\n\u2502   \u251c\u2500\u2500 RoutingLogMapper.java              # \u65e5\u5fd7Mapper\n\u2502   \u2514\u2500\u2500 McpServerMapper.java               # \u670d\u52a1\u5668Mapper\n\u2514\u2500\u2500 service/persistence/\n    \u251c\u2500\u2500 AsyncPersistenceFacade.java        # \u5f02\u6b65\u95e8\u9762 \u2b50\n    \u251c\u2500\u2500 RoutingLogTransactionService.java  # \u4e8b\u52a1\u670d\u52a1\n    \u251c\u2500\u2500 FallbackFileWriter.java            # \u964d\u7ea7\u5199\u5165\n    \u2514\u2500\u2500 PersistenceScheduledTasks.java     # \u5b9a\u65f6\u4efb\u52a1\n\nsrc/main/resources/\n\u2514\u2500\u2500 mapper/\n    \u251c\u2500\u2500 RoutingLogMapper.xml\n    \u2514\u2500\u2500 McpServerMapper.xml\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_9","title":"\u6838\u5fc3\u7c7b\u5b9e\u73b0","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#1-asyncpersistencefacade","title":"1. AsyncPersistenceFacade (\u5f02\u6b65\u95e8\u9762)","text":"<pre><code>@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class AsyncPersistenceFacade {\n\n    private final RoutingLogTransactionService routingLogTxService;\n    private final FallbackFileWriter fallbackFileWriter;\n    @Qualifier(\"dbScheduler\")\n    private final Scheduler dbScheduler;\n\n    private final BlockingQueue&lt;RoutingLog&gt; logBuffer = \n        new LinkedBlockingQueue&lt;&gt;(10000);\n\n    /**\n     * \u5f02\u6b65\u4fdd\u5b58\uff08\u975e\u963b\u585e\uff09\n     */\n    public Mono&lt;Void&gt; saveRoutingLogAsync(RoutingLog log) {\n        return Mono.fromRunnable(() -&gt; {\n            if (!logBuffer.offer(log)) {\n                log.warn(\"Buffer full, fallback to file: {}\", log.getRequestId());\n                fallbackFileWriter.writeToFile(log);\n            }\n        })\n        .then()\n        .onErrorResume(e -&gt; {\n            log.error(\"Failed to buffer log: {}\", log.getRequestId(), e);\n            return Mono.empty();\n        });\n    }\n\n    /**\n     * \u6279\u91cf\u5237\u65b0\n     */\n    public Mono&lt;Integer&gt; flushBatch(int batchSize) {\n        return Mono.fromCallable(() -&gt; {\n            List&lt;RoutingLog&gt; batch = new ArrayList&lt;&gt;(batchSize);\n            logBuffer.drainTo(batch, batchSize);\n\n            if (batch.isEmpty()) return 0;\n\n            routingLogTxService.batchInsertLogs(batch);\n            return batch.size();\n        })\n        .subscribeOn(dbScheduler)\n        .retryWhen(Retry.backoff(2, Duration.ofMillis(200))\n            .filter(e -&gt; e instanceof SQLException)\n        )\n        .onErrorResume(e -&gt; {\n            log.error(\"Failed to flush batch\", e);\n            return Mono.just(0);\n        });\n    }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#2-routinglogtransactionservice","title":"2. RoutingLogTransactionService (\u4e8b\u52a1\u670d\u52a1)","text":"<pre><code>@Slf4j\n@Service\n@RequiredArgsConstructor\npublic class RoutingLogTransactionService {\n\n    private final RoutingLogMapper routingLogMapper;\n\n    @Transactional(rollbackFor = Exception.class)\n    public void insertLog(RoutingLog log) {\n        routingLogMapper.insert(log);\n    }\n\n    @Transactional(rollbackFor = Exception.class)\n    public int batchInsertLogs(List&lt;RoutingLog&gt; logs) {\n        if (logs == null || logs.isEmpty()) return 0;\n\n        int totalInserted = 0;\n        int batchSize = 500;\n\n        for (int i = 0; i &lt; logs.size(); i += batchSize) {\n            int end = Math.min(i + batchSize, logs.size());\n            List&lt;RoutingLog&gt; batch = logs.subList(i, end);\n            totalInserted += routingLogMapper.batchInsert(batch);\n        }\n\n        return totalInserted;\n    }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#3-routinglogmapperxml","title":"3. RoutingLogMapper.xml (\u6279\u91cf\u63d2\u5165)","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!DOCTYPE mapper PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\" \n    \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.pajk.mcpbridge.core.mapper.RoutingLogMapper\"&gt;\n\n    &lt;insert id=\"batchInsert\"&gt;\n        INSERT IGNORE INTO routing_logs (\n            request_id, server_key, method, path, mcp_method, tool_name,\n            start_time, end_time, duration, response_status, is_success,\n            error_message, client_ip\n        ) VALUES\n        &lt;foreach collection=\"logs\" item=\"log\" separator=\",\"&gt;\n            (\n                #{log.requestId}, #{log.serverKey}, #{log.method}, #{log.path},\n                #{log.mcpMethod}, #{log.toolName}, #{log.startTime}, #{log.endTime},\n                #{log.duration}, #{log.responseStatus}, #{log.isSuccess},\n                #{log.errorMessage}, #{log.clientIp}\n            )\n        &lt;/foreach&gt;\n    &lt;/insert&gt;\n\n&lt;/mapper&gt;\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#4-persistencescheduledtasks","title":"4. PersistenceScheduledTasks (\u5b9a\u65f6\u4efb\u52a1)","text":"<pre><code>@Slf4j\n@Component\n@RequiredArgsConstructor\npublic class PersistenceScheduledTasks {\n\n    private final AsyncPersistenceFacade persistenceFacade;\n\n    @Scheduled(fixedDelay = 5000)\n    public void flushLogBuffer() {\n        persistenceFacade.flushBatch(500)\n            .doOnSuccess(count -&gt; {\n                if (count &gt; 0) {\n                    log.info(\"Flushed {} logs\", count);\n                }\n            })\n            .subscribe();\n    }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_10","title":"\u6027\u80fd\u8c03\u4f18","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#1","title":"1. \u8fde\u63a5\u6c60\u4f18\u5316","text":"<pre><code>spring:\n  datasource:\n    hikari:\n      minimum-idle: 10               # CPU\u6838\u5fc3\u6570\n      maximum-pool-size: 50          # \u6838\u5fc3\u6570 * 2 + \u78c1\u76d8\u6570\n      connection-timeout: 30000      # 30\u79d2\n      idle-timeout: 600000           # 10\u5206\u949f\n      max-lifetime: 1800000          # 30\u5206\u949f\n      leak-detection-threshold: 30000 # \u6cc4\u6f0f\u68c0\u6d4b\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#2_1","title":"2. \u6279\u91cf\u5199\u5165\u4f18\u5316","text":"<p>\u5f00\u542f\u6279\u91cf\u91cd\u5199\uff08\u6027\u80fd\u63d0\u534710x\uff09 <pre><code>spring:\n  datasource:\n    url: jdbc:mysql://...?rewriteBatchedStatements=true\n</code></pre></p> <p>\u6700\u4f73\u6279\u91cf\u5927\u5c0f: 500-1000</p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#3_1","title":"3. \u7d22\u5f15\u4f18\u5316","text":"<pre><code>-- \u8986\u76d6\u7d22\u5f15\uff08\u907f\u514d\u56de\u8868\uff09\nCREATE INDEX idx_cover_summary \nON routing_logs(server_key, start_time, is_success, duration, tool_name);\n\n-- \u67e5\u8be2\u65f6\u53ea\u9009\u62e9\u7d22\u5f15\u5b57\u6bb5\nSELECT server_key, start_time, is_success, duration, tool_name\nFROM routing_logs WHERE server_key = ? ORDER BY start_time DESC;\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#4_2","title":"4. \u5206\u533a\u7ef4\u62a4","text":"<pre><code>-- \u81ea\u52a8\u521b\u5efa\u660e\u5929\u7684\u5206\u533a\uff08\u5b9a\u65f6\u4efb\u52a1\uff09\nCALL create_routing_log_partition();\n\n-- \u5220\u966490\u5929\u524d\u7684\u5206\u533a\nALTER TABLE routing_logs DROP PARTITION p_2024_12_01;\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_11","title":"\u6027\u80fd\u6307\u6807","text":"\u6307\u6807 \u76ee\u6807\u503c \u5199\u5165\u541e\u5410\u91cf 5000+ TPS P99\u5199\u5165\u5ef6\u8fdf &lt;1ms \u6570\u636e\u4e22\u5931\u7387 &lt;0.001% \u67e5\u8be2\u54cd\u5e94\u65f6\u95f4 &lt;50ms"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_12","title":"\u6545\u969c\u6392\u67e5","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_13","title":"\u95ee\u9898\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u5931\u8d25","text":"<pre><code># \u68c0\u67e5MySQL\u662f\u5426\u8fd0\u884c\nmysql -u root -p -e \"SELECT 1;\"\n\n# \u68c0\u67e5\u7aef\u53e3\nnetstat -an | grep 3306\n\n# \u68c0\u67e5\u7528\u6237\u6743\u9650\nmysql -u root -p -e \"SHOW GRANTS FOR 'root'@'localhost';\"\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#mybatis-mapper","title":"\u95ee\u9898\uff1aMyBatis Mapper\u672a\u627e\u5230","text":"<pre><code>org.apache.ibatis.binding.BindingException: Invalid bound statement\n</code></pre> <p>\u89e3\u51b3: 1. \u68c0\u67e5 <code>mapper-locations: classpath:mapper/*.xml</code> 2. \u786e\u4fddXML\u6587\u4ef6\u5728 <code>src/main/resources/mapper/</code> 3. \u68c0\u67e5 namespace \u662f\u5426\u5339\u914d Mapper\u63a5\u53e3\u5168\u9650\u5b9a\u540d</p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_14","title":"\u95ee\u9898\uff1a\u7f13\u51b2\u533a\u6ee1","text":"<p>\u75c7\u72b6: \u65e5\u5fd7\u4e2d\u51fa\u73b0 <code>Buffer full, fallback to file</code></p> <p>\u89e3\u51b3: 1. \u589e\u5927\u7f13\u51b2\u533a: <code>new LinkedBlockingQueue&lt;&gt;(20000)</code> 2. \u51cf\u5c0f\u5237\u65b0\u95f4\u9694: <code>@Scheduled(fixedDelay = 3000)</code> 3. \u589e\u52a0\u6279\u91cf\u5927\u5c0f: <code>flushBatch(1000)</code></p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_15","title":"\u95ee\u9898\uff1a\u6162\u67e5\u8be2","text":"<pre><code># \u542f\u7528\u6162\u67e5\u8be2\u65e5\u5fd7\nmysql -e \"SET GLOBAL slow_query_log = 'ON';\"\nmysql -e \"SET GLOBAL long_query_time = 1;\"\n\n# \u67e5\u770b\u6162\u67e5\u8be2\ntail -f /var/log/mysql/slow-query.log\n</code></pre> <p>\u4f18\u5316: 1. \u6dfb\u52a0\u7d22\u5f15 2. \u4f7f\u7528\u8986\u76d6\u7d22\u5f15 3. \u907f\u514d SELECT * 4. \u5229\u7528\u5206\u533a\u88c1\u526a</p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#schema","title":"\u6570\u636e\u5e93Schema\u8bf4\u660e","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_16","title":"\u6838\u5fc3\u8868","text":"\u8868\u540d \u7528\u9014 \u5206\u533a \u4fdd\u7559\u671f <code>mcp_servers</code> \u670d\u52a1\u5668\u6ce8\u518c\u4fe1\u606f \u5426 \u6c38\u4e45 <code>routing_logs</code> \u8def\u7531\u8bf7\u6c42\u65e5\u5fd7 \u6309\u5929 7\u5929 <code>routing_logs_archive</code> \u65e5\u5fd7\u5f52\u6863 \u6309\u5929 30\u5929 <code>health_check_records</code> \u5065\u5eb7\u68c0\u67e5\u8bb0\u5f55 \u6309\u6708 30\u5929"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_17","title":"\u91cd\u8981\u7d22\u5f15","text":"<pre><code>-- mcp_servers\nUNIQUE KEY uk_server_key (server_key)\nKEY idx_healthy_enabled (healthy, enabled, deleted_at)\n\n-- routing_logs\nPRIMARY KEY (id, start_time)  -- \u5305\u542b\u5206\u533a\u952e\nUNIQUE KEY uk_request_time (request_id, start_time)\nKEY idx_cover_summary (server_key, start_time, is_success, duration, tool_name)\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_18","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#do","title":"\u2705 DO","text":"<ol> <li>\u4f7f\u7528\u4e13\u7528\u7ebf\u7a0b\u6c60 - \u907f\u514d\u963b\u585e\u54cd\u5e94\u5f0f\u6d41</li> <li>\u6279\u91cf\u64cd\u4f5c\u52a0\u4e8b\u52a1 - \u4fdd\u8bc1\u539f\u5b50\u6027</li> <li>\u4f7f\u7528UPSERT - \u907f\u514d\u5e76\u53d1\u95ee\u9898</li> <li>\u5931\u8d25\u964d\u7ea7 - \u786e\u4fdd\u96f6\u6570\u636e\u4e22\u5931</li> <li>\u8986\u76d6\u7d22\u5f15 - \u63d0\u5347\u67e5\u8be2\u6027\u80fd</li> <li>\u76d1\u63a7\u544a\u8b66 - \u53ca\u65f6\u53d1\u73b0\u95ee\u9898</li> </ol>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#dont","title":"\u274c DON'T","text":"<ol> <li>\u4e0d\u8981\u5728\u54cd\u5e94\u5f0f\u6d41\u4e2d\u76f4\u63a5\u8c03\u7528MyBatis - \u4f1a\u963b\u585e\u7ebf\u7a0b</li> <li>\u4e0d\u8981\u5faa\u73af\u63d2\u5165 - \u4f7f\u7528\u6279\u91cf\u64cd\u4f5c</li> <li>**\u4e0d\u8981SELECT *** - \u53ea\u67e5\u8be2\u9700\u8981\u7684\u5b57\u6bb5</li> <li>\u4e0d\u8981\u5fd8\u8bb0\u5206\u533a\u952e - \u4e3b\u952e\u5fc5\u987b\u5305\u542b\u5206\u533a\u952e</li> <li>\u4e0d\u8981\u4f7f\u7528CASCADE DELETE - \u4f1a\u4e22\u5931\u5386\u53f2\u6570\u636e</li> <li>\u4e0d\u8981\u5ffd\u7565\u8fde\u63a5\u6c60\u914d\u7f6e - \u4f7f\u7528\u9ed8\u8ba4\u503c\u6027\u80fd\u5dee</li> </ol>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_19","title":"\u76d1\u63a7\u6307\u6807","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_20","title":"\u5173\u952e\u6307\u6807","text":"<pre><code>@Component\npublic class PersistenceMetrics {\n\n    @Scheduled(fixedDelay = 60000)\n    public void reportMetrics() {\n        // 1. \u7f13\u51b2\u533a\u4f7f\u7528\u7387\n        double bufferUsage = facade.getBufferStats().getUsagePercentage();\n\n        // 2. \u8fde\u63a5\u6c60\u72b6\u6001\n        HikariPoolMXBean pool = dataSource.getHikariPoolMXBean();\n        int activeConns = pool.getActiveConnections();\n\n        // 3. \u6bcf\u5206\u949f\u5199\u5165\u91cf\n        log.info(\"Metrics - Buffer: {:.1f}%, Connections: {}, TPS: {}\", \n                 bufferUsage, activeConns, tps);\n    }\n}\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_21","title":"\u544a\u8b66\u9608\u503c","text":"\u6307\u6807 \u544a\u8b66\u9608\u503c \u8bf4\u660e \u7f13\u51b2\u533a\u4f7f\u7528\u7387 &gt;80% \u8003\u8651\u589e\u5927\u7f13\u51b2\u533a\u6216\u4f18\u5316\u5237\u65b0\u7b56\u7565 \u6d3b\u8dc3\u8fde\u63a5\u6570 &gt;40 (\u603b50) \u8003\u8651\u589e\u5927\u8fde\u63a5\u6c60\u6216\u4f18\u5316\u67e5\u8be2 \u5199\u5165\u5ef6\u8fdfP99 &gt;5ms \u68c0\u67e5\u6570\u636e\u5e93\u6027\u80fd \u964d\u7ea7\u6587\u4ef6\u6570 &gt;0 \u6570\u636e\u5e93\u53ef\u80fd\u6709\u95ee\u9898"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#_22","title":"\u9644\u5f55","text":""},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#a","title":"A. \u5b8c\u6574\u914d\u7f6e\u793a\u4f8b","text":"<p>\u53c2\u8003 <code>mcp-router-v3/src/main/resources/application.yml</code></p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#b-schema","title":"B. \u6570\u636e\u5e93Schema","text":"<p>\u53c2\u8003 <code>mcp-router-v3/database/schema.sql</code></p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#c","title":"C. \u793a\u4f8b\u4ee3\u7801","text":"<p>\u53c2\u8003\u672c\u6587\u6863\"\u5b8c\u6574\u4ee3\u7801\u5b9e\u73b0\"\u7ae0\u8282</p>"},{"location":"archived/docs-251111/PERSISTENCE_GUIDE/#d","title":"D. \u6d4b\u8bd5\u7528\u4f8b","text":"<pre><code>@SpringBootTest\npublic class PersistenceIntegrationTest {\n    // \u53c2\u8003\u5b9e\u9645\u9879\u76ee\u4e2d\u7684\u6d4b\u8bd5\n}\n</code></pre> <p>\u6587\u6863\u7248\u672c: v2.0 \u7ef4\u62a4\u8005: MCP Router V3 Team \u6700\u540e\u66f4\u65b0: 2025-03-01</p>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/","title":"MCP Router V3 \u6301\u4e45\u5316\u529f\u80fd\u5b9e\u65bd\u68c0\u67e5\u6e05\u5355","text":"<p>\u7248\u672c: v1.0 \u521b\u5efa\u65e5\u671f: 2025-10-30 \u7528\u9014: \u5f00\u53d1\u8fc7\u7a0b\u8ddf\u8e2a\u548c\u9a8c\u6536\u6807\u51c6</p>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_1","title":"\ud83d\udccb \u4f7f\u7528\u8bf4\u660e","text":"<ul> <li>\u2705 \u5df2\u5b8c\u6210</li> <li>\ud83d\udea7 \u8fdb\u884c\u4e2d</li> <li>\u23f3 \u5f85\u5f00\u59cb</li> <li>\u274c \u5df2\u963b\u585e</li> <li>\u23ed\ufe0f \u5df2\u8df3\u8fc7</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#p0","title":"\ud83c\udfaf \u7b2c\u4e00\u9636\u6bb5: \u6838\u5fc3\u529f\u80fd (P0)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_2","title":"\ud83d\udce6 \u57fa\u7840\u8bbe\u65bd\u642d\u5efa","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#1","title":"1. \u6570\u636e\u5e93\u51c6\u5907","text":"<ul> <li> \u23f3 \u521b\u5efa\u6570\u636e\u5e93 <code>mcp_bridge</code></li> <li> \u23f3 \u6267\u884c <code>schema.sql</code> \u521d\u59cb\u5316\u8868\u7ed3\u6784</li> <li> \u23f3 \u9a8c\u8bc1\u6240\u6709\u8868\u548c\u7d22\u5f15\u521b\u5efa\u6210\u529f</li> <li> \u23f3 \u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u6c60 (HikariCP)</li> <li> \u23f3 \u6d4b\u8bd5\u6570\u636e\u5e93\u8fde\u63a5</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#2-mybatis","title":"2. MyBatis \u914d\u7f6e","text":"<ul> <li> \u23f3 \u6dfb\u52a0 MyBatis \u4f9d\u8d56\u5230 <code>pom.xml</code></li> <li> \u23f3 \u914d\u7f6e <code>mybatis-config.xml</code></li> <li> \u23f3 \u914d\u7f6e <code>application.yml</code> \u6570\u636e\u6e90</li> <li> \u23f3 \u521b\u5efa TypeHandler (JSON, LocalDateTime)</li> <li> \u23f3 \u6d4b\u8bd5 MyBatis \u914d\u7f6e</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#3","title":"3. \u6838\u5fc3\u6846\u67b6\u7ec4\u4ef6","text":"<ul> <li> \u23f3 \u521b\u5efa <code>PersistenceEventPublisher</code> \u7ec4\u4ef6</li> <li> \u23f3 \u5b9e\u73b0 <code>BatchWriter</code> \u6279\u91cf\u5199\u5165\u903b\u8f91</li> <li> \u23f3 \u5b9e\u73b0 <code>PersistenceFallbackHandler</code> \u964d\u7ea7\u5904\u7406</li> <li> \u23f3 \u5b9e\u73b0 <code>PartitionManager</code> \u5206\u533a\u7ba1\u7406</li> <li> \u23f3 \u521b\u5efa\u72ec\u7acb\u7ebf\u7a0b\u6c60 <code>persistenceExecutor</code></li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#1-3","title":"1\ufe0f\u20e3 \u8def\u7531\u65e5\u5fd7\u6301\u4e45\u5316 (3\u4eba\u65e5)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_3","title":"\u6570\u636e\u6a21\u578b","text":"<ul> <li> \u23f3 \u521b\u5efa\u5b9e\u4f53\u7c7b <code>RoutingLog.java</code></li> <li> \u23f3 \u521b\u5efa Mapper \u63a5\u53e3 <code>RoutingLogMapper.java</code></li> <li> \u23f3 \u521b\u5efa XML Mapper <code>RoutingLogMapper.xml</code></li> <li> \u23f3 \u5b9e\u73b0\u5355\u6761\u63d2\u5165 <code>insert(RoutingLog log)</code></li> <li> \u23f3 \u5b9e\u73b0\u6279\u91cf\u63d2\u5165 <code>batchInsert(List&lt;RoutingLog&gt; logs)</code></li> <li> \u23f3 \u5b9e\u73b0\u67e5\u8be2\u65b9\u6cd5 <code>selectByRequestId</code>, <code>selectByTimeRange</code></li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_4","title":"\u4e1a\u52a1\u96c6\u6210","text":"<ul> <li> \u23f3 \u5728 <code>McpRouterService</code> \u6ce8\u5165 <code>PersistenceEventPublisher</code></li> <li> \u23f3 \u5728 <code>routeRequest()</code> \u65b9\u6cd5\u5f00\u59cb\u65f6\u521b\u5efa <code>RoutingLog</code> \u5bf9\u8c61</li> <li> \u23f3 \u5728 <code>doOnSuccess</code> \u4e2d\u586b\u5145\u54cd\u5e94\u4fe1\u606f\u5e76\u53d1\u5e03\u4e8b\u4ef6</li> <li> \u23f3 \u5728 <code>doOnError</code> \u4e2d\u586b\u5145\u9519\u8bef\u4fe1\u606f\u5e76\u53d1\u5e03\u4e8b\u4ef6</li> <li> \u23f3 \u5728 <code>smartRoute()</code> \u4e2d\u6dfb\u52a0\u76f8\u540c\u903b\u8f91</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_5","title":"\u6279\u91cf\u5199\u5165","text":"<ul> <li> \u23f3 \u914d\u7f6e <code>routingLogSink</code> (Sinks.Many)</li> <li> \u23f3 \u5b9e\u73b0\u6279\u91cf\u5199\u5165\u5668 (2\u79d2\u6216500\u6761\u89e6\u53d1)</li> <li> \u23f3 \u5b9e\u73b0\u964d\u7ea7\u903b\u8f91 (\u6570\u636e\u5e93\u5931\u8d25\u2192\u78c1\u76d8\u961f\u5217)</li> <li> \u23f3 \u5b9e\u73b0\u78c1\u76d8\u961f\u5217\u91cd\u8bd5\u673a\u5236</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_6","title":"\u5206\u533a\u7ba1\u7406","text":"<ul> <li> \u23f3 \u5b9e\u73b0\u6309\u5929\u5206\u533a\u521b\u5efa SQL</li> <li> \u23f3 \u914d\u7f6e\u5b9a\u65f6\u4efb\u52a1: \u6bcf\u5929\u521b\u5efa\u672a\u6765\u5206\u533a</li> <li> \u23f3 \u914d\u7f6e\u5b9a\u65f6\u4efb\u52a1: \u6bcf\u5468\u5f52\u6863\u65e7\u6570\u636e</li> <li> \u23f3 \u6d4b\u8bd5\u5206\u533a\u81ea\u52a8\u521b\u5efa</li> <li> \u23f3 \u6d4b\u8bd5\u5206\u533a\u67e5\u8be2\u6027\u80fd</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_7","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<ul> <li> \u23f3 \u5355\u5143\u6d4b\u8bd5: <code>RoutingLogMapper</code></li> <li> \u23f3 \u96c6\u6210\u6d4b\u8bd5: \u8def\u7531\u8bf7\u6c42\u2192\u6301\u4e45\u5316\u5b8c\u6574\u6d41\u7a0b</li> <li> \u23f3 \u6027\u80fd\u6d4b\u8bd5: 5000 TPS \u8def\u7531 + \u6301\u4e45\u5316</li> <li> \u23f3 \u6545\u969c\u6d4b\u8bd5: \u6570\u636e\u5e93\u6545\u969c\u964d\u7ea7</li> <li> \u23f3 \u67e5\u8be2\u6d4b\u8bd5: \u6309\u65f6\u95f4\u8303\u56f4\u67e5\u8be2\u6027\u80fd</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#2-2","title":"2\ufe0f\u20e3 \u5065\u5eb7\u68c0\u67e5\u8bb0\u5f55\u6301\u4e45\u5316 (2\u4eba\u65e5)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_8","title":"\u6570\u636e\u6a21\u578b","text":"<ul> <li> \u23f3 \u521b\u5efa\u5b9e\u4f53\u7c7b <code>HealthCheckRecord.java</code></li> <li> \u23f3 \u521b\u5efa Mapper \u63a5\u53e3 <code>HealthCheckRecordMapper.java</code></li> <li> \u23f3 \u521b\u5efa XML Mapper <code>HealthCheckRecordMapper.xml</code></li> <li> \u23f3 \u5b9e\u73b0\u6279\u91cf\u63d2\u5165 <code>batchInsert(List&lt;HealthCheckRecord&gt; records)</code></li> <li> \u23f3 \u5b9e\u73b0\u67e5\u8be2\u65b9\u6cd5 <code>selectByServerKey</code>, <code>selectFailures</code></li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_9","title":"\u4e1a\u52a1\u96c6\u6210","text":"<ul> <li> \u23f3 \u5728 <code>HealthCheckService</code> \u6ce8\u5165 <code>PersistenceEventPublisher</code></li> <li> \u23f3 \u5728 <code>performHealthCheck()</code> \u521b\u5efa <code>HealthCheckRecord</code></li> <li> \u23f3 \u5b9e\u73b0\u91c7\u6837\u7b56\u7565 (\u5931\u8d25\u5fc5\u8bb0\u5f55\uff0c\u6210\u529f10%\u91c7\u6837)</li> <li> \u23f3 \u5728\u5065\u5eb7\u68c0\u67e5\u5b8c\u6210\u540e\u53d1\u5e03\u4e8b\u4ef6</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_10","title":"\u6279\u91cf\u5199\u5165","text":"<ul> <li> \u23f3 \u914d\u7f6e <code>healthCheckSink</code> (Sinks.Many)</li> <li> \u23f3 \u5b9e\u73b0\u6279\u91cf\u5199\u5165\u5668 (5\u79d2\u6216100\u6761\u89e6\u53d1)</li> <li> \u23f3 \u5b9e\u73b0\u964d\u7ea7\u903b\u8f91</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_11","title":"\u5206\u533a\u7ba1\u7406","text":"<ul> <li> \u23f3 \u5b9e\u73b0\u6309\u5468\u5206\u533a\u521b\u5efa SQL</li> <li> \u23f3 \u914d\u7f6e\u5206\u533a\u81ea\u52a8\u521b\u5efa\u548c\u5f52\u6863</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_12","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<ul> <li> \u23f3 \u5355\u5143\u6d4b\u8bd5: <code>HealthCheckRecordMapper</code></li> <li> \u23f3 \u96c6\u6210\u6d4b\u8bd5: \u5065\u5eb7\u68c0\u67e5\u2192\u6301\u4e45\u5316</li> <li> \u23f3 \u6d4b\u8bd5\u91c7\u6837\u903b\u8f91</li> <li> \u23f3 \u6d4b\u8bd5\u5206\u533a\u67e5\u8be2</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#3-2","title":"3\ufe0f\u20e3 \u670d\u52a1\u5668\u6ce8\u518c\u4fe1\u606f\u6301\u4e45\u5316 (2\u4eba\u65e5)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_13","title":"\u6570\u636e\u6a21\u578b","text":"<ul> <li> \u23f3 \u521b\u5efa\u5b9e\u4f53\u7c7b <code>McpServer.java</code></li> <li> \u23f3 \u521b\u5efa Mapper \u63a5\u53e3 <code>McpServerMapper.java</code></li> <li> \u23f3 \u521b\u5efa XML Mapper <code>McpServerMapper.xml</code></li> <li> \u23f3 \u5b9e\u73b0\u63d2\u5165\u6216\u66f4\u65b0 <code>insertOrUpdate(McpServer server)</code></li> <li> \u23f3 \u5b9e\u73b0\u67e5\u8be2\u65b9\u6cd5 <code>selectByServerKey</code>, <code>selectAllHealthy</code></li> <li> \u23f3 \u5b9e\u73b0\u5220\u9664\u65b9\u6cd5 <code>deleteByServerKey</code></li> <li> \u23f3 \u5b9e\u73b0\u66f4\u65b0\u5065\u5eb7\u72b6\u6001 <code>updateHealthStatus</code></li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_14","title":"\u4e1a\u52a1\u96c6\u6210","text":"<ul> <li> \u23f3 \u5728 <code>McpServerRegistry</code> \u6ce8\u5165 <code>McpServerMapper</code></li> <li> \u23f3 \u5728 <code>registerServer()</code> \u4e2d\u540c\u6b65\u5199\u5165\u6570\u636e\u5e93</li> <li> \u23f3 \u5728 <code>deregisterServer()</code> \u4e2d\u66f4\u65b0\u6570\u636e\u5e93</li> <li> \u23f3 \u5728 <code>updateServerHealth()</code> \u4e2d\u66f4\u65b0\u6570\u636e\u5e93</li> <li> \u23f3 \u5b9e\u73b0\u542f\u52a8\u65f6\u4ece\u6570\u636e\u5e93\u52a0\u8f7d\u670d\u52a1\u5668\u5217\u8868</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_15","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<ul> <li> \u23f3 \u5355\u5143\u6d4b\u8bd5: <code>McpServerMapper</code></li> <li> \u23f3 \u96c6\u6210\u6d4b\u8bd5: \u670d\u52a1\u6ce8\u518c\u2192\u6301\u4e45\u5316\u2192\u52a0\u8f7d</li> <li> \u23f3 \u6d4b\u8bd5 insertOrUpdate \u5e42\u7b49\u6027</li> <li> \u23f3 \u6d4b\u8bd5\u542f\u52a8\u65f6\u6570\u636e\u6062\u590d</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#4-1","title":"4\ufe0f\u20e3 \u9519\u8bef\u65e5\u5fd7\u6301\u4e45\u5316 (1\u4eba\u65e5)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_16","title":"\u6570\u636e\u6a21\u578b","text":"<ul> <li> \u23f3 \u521b\u5efa\u5b9e\u4f53\u7c7b <code>ErrorLog.java</code></li> <li> \u23f3 \u521b\u5efa Mapper \u63a5\u53e3 <code>ErrorLogMapper.java</code></li> <li> \u23f3 \u521b\u5efa XML Mapper <code>ErrorLogMapper.xml</code></li> <li> \u23f3 \u5b9e\u73b0\u63d2\u5165\u65b9\u6cd5 <code>insert(ErrorLog log)</code></li> <li> \u23f3 \u5b9e\u73b0\u67e5\u8be2\u65b9\u6cd5 <code>selectByTimeRange</code>, <code>selectByErrorType</code></li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_17","title":"\u4e1a\u52a1\u96c6\u6210","text":"<ul> <li> \u23f3 \u521b\u5efa <code>GlobalExceptionHandler</code></li> <li> \u23f3 \u5728\u5f02\u5e38\u5904\u7406\u4e2d\u6784\u9020 <code>ErrorLog</code> \u5bf9\u8c61</li> <li> \u23f3 \u5f02\u6b65\u6301\u4e45\u5316\u9519\u8bef\u65e5\u5fd7</li> <li> \u23f3 \u5728\u5173\u952e\u4e1a\u52a1\u8282\u70b9\u6dfb\u52a0 try-catch \u8bb0\u5f55\u9519\u8bef</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_18","title":"\u6279\u91cf\u5199\u5165","text":"<ul> <li> \u23f3 \u914d\u7f6e <code>errorLogSink</code> (Sinks.Many)</li> <li> \u23f3 \u5b9e\u73b0\u6279\u91cf\u5199\u5165\u5668 (3\u79d2\u621650\u6761\u89e6\u53d1)</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_19","title":"\u5206\u533a\u7ba1\u7406","text":"<ul> <li> \u23f3 \u5b9e\u73b0\u6309\u5468\u5206\u533a\u521b\u5efa SQL</li> <li> \u23f3 \u914d\u7f6e\u5206\u533a\u81ea\u52a8\u7ba1\u7406</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_20","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<ul> <li> \u23f3 \u5355\u5143\u6d4b\u8bd5: <code>ErrorLogMapper</code></li> <li> \u23f3 \u96c6\u6210\u6d4b\u8bd5: \u5f02\u5e38\u2192\u6301\u4e45\u5316</li> <li> \u23f3 \u6d4b\u8bd5\u4e0d\u540c\u9519\u8bef\u7c7b\u578b\u8bb0\u5f55</li> <li> \u23f3 \u6d4b\u8bd5\u5206\u533a\u67e5\u8be2</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_21","title":"\ud83c\udfaf \u7b2c\u4e00\u9636\u6bb5\u9a8c\u6536\u6807\u51c6","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_22","title":"\u529f\u80fd\u9a8c\u6536","text":"<ul> <li> \u23f3 \u6240\u6709 P0 \u8282\u70b9\u6301\u4e45\u5316\u529f\u80fd\u6b63\u5e38\u5de5\u4f5c</li> <li> \u23f3 \u6279\u91cf\u5199\u5165\u6210\u529f\u7387 &gt; 99.9%</li> <li> \u23f3 \u964d\u7ea7\u7b56\u7565\u9a8c\u8bc1\u901a\u8fc7</li> <li> \u23f3 \u5206\u533a\u81ea\u52a8\u521b\u5efa\u548c\u5f52\u6863\u6b63\u5e38</li> <li> \u23f3 \u542f\u52a8\u65f6\u6570\u636e\u6062\u590d\u6b63\u5e38</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_23","title":"\u6027\u80fd\u9a8c\u6536","text":"<ul> <li> \u23f3 \u8def\u7531\u541e\u5410\u91cf\u4fdd\u6301 5000+ TPS</li> <li> \u23f3 \u8def\u7531\u5ef6\u8fdf\u589e\u52a0 &lt; 1ms (P99)</li> <li> \u23f3 \u6570\u636e\u5e93\u5199\u5165\u5ef6\u8fdf &lt; 2ms (P99)</li> <li> \u23f3 \u6570\u636e\u5e93\u8fde\u63a5\u6570 &lt; 50</li> <li> \u23f3 CPU \u589e\u52a0 &lt; 5%</li> <li> \u23f3 \u5185\u5b58\u589e\u52a0 &lt; 100MB</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_24","title":"\u53ef\u9760\u6027\u9a8c\u6536","text":"<ul> <li> \u23f3 \u6570\u636e\u5e93\u6545\u969c\u65f6\u7cfb\u7edf\u6b63\u5e38\u8fd0\u884c</li> <li> \u23f3 \u78c1\u76d8\u964d\u7ea7\u81ea\u52a8\u89e6\u53d1</li> <li> \u23f3 \u6570\u636e\u5e93\u6062\u590d\u540e\u81ea\u52a8\u8865\u5f55\u6570\u636e</li> <li> \u23f3 \u67e5\u8be2\u6027\u80fd\u7a33\u5b9a &lt; 50ms</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#p1","title":"\ud83d\ude80 \u7b2c\u4e8c\u9636\u6bb5: \u589e\u5f3a\u529f\u80fd (P1)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#5-sse-2","title":"5\ufe0f\u20e3 SSE\u4f1a\u8bdd\u7ba1\u7406\u6301\u4e45\u5316 (2\u4eba\u65e5)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_25","title":"\u6570\u636e\u6a21\u578b","text":"<ul> <li> \u23f3 \u521b\u5efa\u5b9e\u4f53\u7c7b <code>SseSessionRecord.java</code></li> <li> \u23f3 \u521b\u5efa Mapper \u63a5\u53e3 <code>SseSessionRecordMapper.java</code></li> <li> \u23f3 \u521b\u5efa XML Mapper</li> <li> \u23f3 \u5b9e\u73b0\u63d2\u5165\u548c\u66f4\u65b0\u65b9\u6cd5</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_26","title":"\u4e1a\u52a1\u96c6\u6210","text":"<ul> <li> \u23f3 \u5728 <code>McpSseTransportProvider</code> \u6ce8\u5165\u6301\u4e45\u5316\u7ec4\u4ef6</li> <li> \u23f3 \u5728\u8fde\u63a5\u5efa\u7acb\u65f6\u521b\u5efa\u4f1a\u8bdd\u8bb0\u5f55</li> <li> \u23f3 \u5b9a\u671f\u66f4\u65b0\u6d3b\u8dc3\u4f1a\u8bdd\u7edf\u8ba1 (30\u79d2)</li> <li> \u23f3 \u5728\u8fde\u63a5\u65ad\u5f00\u65f6\u66f4\u65b0\u4f1a\u8bdd\u8bb0\u5f55</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_27","title":"\u6279\u91cf\u5199\u5165","text":"<ul> <li> \u23f3 \u914d\u7f6e <code>sseSessionSink</code></li> <li> \u23f3 \u5b9e\u73b0\u6279\u91cf\u5199\u5165\u5668</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_28","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<ul> <li> \u23f3 \u5355\u5143\u6d4b\u8bd5</li> <li> \u23f3 \u96c6\u6210\u6d4b\u8bd5</li> <li> \u23f3 \u4f1a\u8bdd\u7edf\u8ba1\u51c6\u786e\u6027\u6d4b\u8bd5</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#6-2","title":"6\ufe0f\u20e3 \u5de5\u5177\u8c03\u7528\u8bb0\u5f55\u6301\u4e45\u5316 (2\u4eba\u65e5)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_29","title":"\u6570\u636e\u6a21\u578b","text":"<ul> <li> \u23f3 \u521b\u5efa\u5b9e\u4f53\u7c7b <code>ToolCallRecord.java</code></li> <li> \u23f3 \u521b\u5efa Mapper \u63a5\u53e3</li> <li> \u23f3 \u5b9e\u73b0\u6279\u91cf\u63d2\u5165</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_30","title":"\u4e1a\u52a1\u96c6\u6210","text":"<ul> <li> \u23f3 \u5728 <code>McpClientManager.callTool()</code> \u4e2d\u8bb0\u5f55</li> <li> \u23f3 \u5173\u8054\u5230\u8def\u7531\u65e5\u5fd7 (request_id)</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_31","title":"\u6279\u91cf\u5199\u5165","text":"<ul> <li> \u23f3 \u914d\u7f6e\u6279\u91cf\u5199\u5165\u5668 (2\u79d2\u6216500\u6761)</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_32","title":"\u5206\u533a\u7ba1\u7406","text":"<ul> <li> \u23f3 \u6309\u5929\u5206\u533a</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_33","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<ul> <li> \u23f3 \u5355\u5143\u6d4b\u8bd5</li> <li> \u23f3 \u96c6\u6210\u6d4b\u8bd5</li> <li> \u23f3 \u5173\u8054\u67e5\u8be2\u6d4b\u8bd5</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#7-3","title":"7\ufe0f\u20e3 \u6027\u80fd\u6307\u6807\u6301\u4e45\u5316 (3\u4eba\u65e5)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_34","title":"\u6570\u636e\u6a21\u578b","text":"<ul> <li> \u23f3 \u521b\u5efa\u5b9e\u4f53\u7c7b <code>PerformanceMetrics.java</code></li> <li> \u23f3 \u521b\u5efa Mapper \u63a5\u53e3</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_35","title":"\u4e1a\u52a1\u96c6\u6210","text":"<ul> <li> \u23f3 \u521b\u5efa <code>MetricsCollector</code> \u7ec4\u4ef6</li> <li> \u23f3 \u5b9e\u73b0\u5185\u5b58\u6307\u6807\u805a\u5408</li> <li> \u23f3 \u914d\u7f6e\u5b9a\u65f6\u4efb\u52a1: \u6bcf\u5206\u949f\u6301\u4e45\u5316</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_36","title":"\u6307\u6807\u6536\u96c6","text":"<ul> <li> \u23f3 \u8def\u7531\u6307\u6807: TPS, \u5ef6\u8fdf, \u9519\u8bef\u7387</li> <li> \u23f3 \u8d44\u6e90\u6307\u6807: CPU, \u5185\u5b58, GC</li> <li> \u23f3 \u4e1a\u52a1\u6307\u6807: \u5de5\u5177\u8c03\u7528\u7edf\u8ba1</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_37","title":"\u6d4b\u8bd5\u9a8c\u8bc1","text":"<ul> <li> \u23f3 \u5355\u5143\u6d4b\u8bd5</li> <li> \u23f3 \u6307\u6807\u51c6\u786e\u6027\u6d4b\u8bd5</li> <li> \u23f3 \u6027\u80fd\u5f71\u54cd\u6d4b\u8bd5</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_38","title":"\ud83c\udfaf \u7b2c\u4e8c\u9636\u6bb5\u9a8c\u6536\u6807\u51c6","text":"<ul> <li> \u23f3 P1 \u529f\u80fd\u5168\u90e8\u6b63\u5e38\u5de5\u4f5c</li> <li> \u23f3 \u4f1a\u8bdd\u7edf\u8ba1\u51c6\u786e</li> <li> \u23f3 \u5de5\u5177\u8c03\u7528\u8bb0\u5f55\u5b8c\u6574</li> <li> \u23f3 \u6027\u80fd\u6307\u6807\u53ef\u7528\u4e8e\u76d1\u63a7\u544a\u8b66</li> <li> \u23f3 \u6027\u80fd\u65e0\u660e\u663e\u4e0b\u964d</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#p2","title":"\ud83c\udfa8 \u7b2c\u4e09\u9636\u6bb5: \u4f18\u5316\u5b8c\u5584 (P2)","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#8-1","title":"8\ufe0f\u20e3 \u8fde\u63a5\u6c60\u7edf\u8ba1\u6301\u4e45\u5316 (1\u4eba\u65e5)","text":"<ul> <li> \u23f3 \u521b\u5efa\u6570\u636e\u6a21\u578b</li> <li> \u23f3 \u5b9e\u73b0\u5b9a\u671f\u91c7\u6837 (60\u79d2)</li> <li> \u23f3 \u6279\u91cf\u6301\u4e45\u5316</li> <li> \u23f3 \u6d4b\u8bd5\u9a8c\u8bc1</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#9-2","title":"9\ufe0f\u20e3 \u8d1f\u8f7d\u5747\u8861\u51b3\u7b56\u6301\u4e45\u5316 (2\u4eba\u65e5)","text":"<ul> <li> \u23f3 \u521b\u5efa\u6570\u636e\u6a21\u578b</li> <li> \u23f3 \u5b9e\u73b0\u91c7\u6837\u7b56\u7565 (1%)</li> <li> \u23f3 \u6279\u91cf\u6301\u4e45\u5316</li> <li> \u23f3 \u6d4b\u8bd5\u9a8c\u8bc1</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#1_1","title":"\ud83d\udd1f \u7194\u65ad\u5668\u72b6\u6001\u6301\u4e45\u5316 (1\u4eba\u65e5)","text":"<ul> <li> \u23f3 \u521b\u5efa\u6570\u636e\u6a21\u578b</li> <li> \u23f3 \u72b6\u6001\u53d8\u66f4\u65f6\u5b9e\u65f6\u6301\u4e45\u5316</li> <li> \u23f3 \u6d4b\u8bd5\u9a8c\u8bc1</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_39","title":"\ud83c\udfaf \u7b2c\u4e09\u9636\u6bb5\u9a8c\u6536\u6807\u51c6","text":"<ul> <li> \u23f3 P2 \u529f\u80fd\u5168\u90e8\u6b63\u5e38\u5de5\u4f5c</li> <li> \u23f3 \u63d0\u4f9b\u5b8c\u6574\u7684\u76d1\u63a7\u5206\u6790\u6570\u636e</li> <li> \u23f3 \u652f\u6301\u667a\u80fd\u8fd0\u7ef4\u51b3\u7b56</li> <li> \u23f3 \u7cfb\u7edf\u7a33\u5b9a\u6027\u548c\u6027\u80fd\u8fbe\u6807</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_40","title":"\ud83d\udd27 \u8fd0\u7ef4\u914d\u7f6e","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_41","title":"\u76d1\u63a7\u544a\u8b66","text":"<ul> <li> \u23f3 \u914d\u7f6e\u6279\u91cf\u5199\u5165\u5931\u8d25\u544a\u8b66</li> <li> \u23f3 \u914d\u7f6e\u78c1\u76d8\u961f\u5217\u79ef\u538b\u544a\u8b66</li> <li> \u23f3 \u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u544a\u8b66</li> <li> \u23f3 \u914d\u7f6e\u5206\u533a\u521b\u5efa\u5931\u8d25\u544a\u8b66</li> <li> \u23f3 \u914d\u7f6e\u67e5\u8be2\u6027\u80fd\u544a\u8b66</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_42","title":"\u5b9a\u65f6\u4efb\u52a1","text":"<ul> <li> \u23f3 \u5206\u533a\u81ea\u52a8\u521b\u5efa (\u6bcf\u5929 02:00)</li> <li> \u23f3 \u5206\u533a\u81ea\u52a8\u5f52\u6863 (\u6bcf\u5468\u65e5 03:00)</li> <li> \u23f3 \u78c1\u76d8\u961f\u5217\u91cd\u8bd5 (\u6bcf\u5206\u949f)</li> <li> \u23f3 \u6027\u80fd\u6307\u6807\u805a\u5408 (\u6bcf\u5206\u949f)</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_43","title":"\u6570\u636e\u7ba1\u7406","text":"<ul> <li> \u23f3 \u914d\u7f6e\u6570\u636e\u4fdd\u7559\u7b56\u7565</li> <li> \u23f3 \u914d\u7f6e\u81ea\u52a8\u5f52\u6863\u811a\u672c</li> <li> \u23f3 \u914d\u7f6e\u6570\u636e\u5907\u4efd</li> <li> \u23f3 \u914d\u7f6e\u6162\u67e5\u8be2\u76d1\u63a7</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_44","title":"\ud83d\udcca \u6027\u80fd\u538b\u6d4b","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_45","title":"\u538b\u6d4b\u573a\u666f","text":"<ul> <li> \u23f3 \u573a\u666f1: 5000 TPS \u8def\u7531\u8bf7\u6c42</li> <li> \u23f3 \u573a\u666f2: 10000 TPS \u8def\u7531\u8bf7\u6c42</li> <li> \u23f3 \u573a\u666f3: \u6570\u636e\u5e93\u6545\u969c\u964d\u7ea7</li> <li> \u23f3 \u573a\u666f4: \u957f\u65f6\u95f4\u8fd0\u884c\u7a33\u5b9a\u6027 (24\u5c0f\u65f6)</li> <li> \u23f3 \u573a\u666f5: \u67e5\u8be2\u5e76\u53d1\u6027\u80fd</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_46","title":"\u538b\u6d4b\u6307\u6807","text":"<ul> <li> \u23f3 \u8def\u7531\u541e\u5410\u91cf: \u2265 5000 TPS</li> <li> \u23f3 \u8def\u7531\u5ef6\u8fdf P50: &lt; 20ms</li> <li> \u23f3 \u8def\u7531\u5ef6\u8fdf P99: &lt; 100ms</li> <li> \u23f3 \u6279\u91cf\u5199\u5165\u5ef6\u8fdf P99: &lt; 2ms</li> <li> \u23f3 \u67e5\u8be2\u5ef6\u8fdf P99: &lt; 50ms</li> <li> \u23f3 \u6570\u636e\u4e22\u5931\u7387: &lt; 0.001%</li> <li> \u23f3 CPU \u4f7f\u7528\u7387: &lt; 70%</li> <li> \u23f3 \u5185\u5b58\u4f7f\u7528: &lt; 2GB</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_47","title":"\ud83d\udcd6 \u6587\u6863\u5b8c\u5584","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_48","title":"\u6280\u672f\u6587\u6863","text":"<ul> <li> \u23f3 \u6301\u4e45\u5316\u67b6\u6784\u8bbe\u8ba1\u6587\u6863</li> <li> \u23f3 \u6570\u636e\u5e93Schema\u8bf4\u660e\u6587\u6863</li> <li> \u23f3 API\u4f7f\u7528\u6587\u6863</li> <li> \u23f3 \u6545\u969c\u6392\u67e5\u624b\u518c</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_49","title":"\u8fd0\u7ef4\u6587\u6863","text":"<ul> <li> \u23f3 \u90e8\u7f72\u6307\u5357</li> <li> \u23f3 \u76d1\u63a7\u914d\u7f6e\u6307\u5357</li> <li> \u23f3 \u6570\u636e\u7ba1\u7406\u6307\u5357</li> <li> \u23f3 \u6027\u80fd\u8c03\u4f18\u6307\u5357</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_50","title":"\u5f00\u53d1\u6587\u6863","text":"<ul> <li> \u23f3 \u4ee3\u7801\u89c4\u8303</li> <li> \u23f3 \u6269\u5c55\u6307\u5357</li> <li> \u23f3 \u6d4b\u8bd5\u6307\u5357</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_51","title":"\u2705 \u6700\u7ec8\u9a8c\u6536","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_52","title":"\u529f\u80fd\u5b8c\u6574\u6027","text":"<ul> <li> \u23f3 \u6240\u6709 P0 \u529f\u80fd\u5b8c\u6210</li> <li> \u23f3 \u6240\u6709 P1 \u529f\u80fd\u5b8c\u6210</li> <li> \u23f3 \u6240\u6709 P2 \u529f\u80fd\u5b8c\u6210</li> <li> \u23f3 \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_53","title":"\u6027\u80fd\u8fbe\u6807","text":"<ul> <li> \u23f3 \u6240\u6709\u6027\u80fd\u6307\u6807\u8fbe\u6807</li> <li> \u23f3 \u538b\u6d4b\u901a\u8fc7</li> <li> \u23f3 \u957f\u65f6\u95f4\u7a33\u5b9a\u6027\u9a8c\u8bc1</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_54","title":"\u53ef\u9760\u6027\u9a8c\u8bc1","text":"<ul> <li> \u23f3 \u6545\u969c\u6f14\u7ec3\u901a\u8fc7</li> <li> \u23f3 \u964d\u7ea7\u7b56\u7565\u9a8c\u8bc1</li> <li> \u23f3 \u6570\u636e\u6062\u590d\u9a8c\u8bc1</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_55","title":"\u8fd0\u7ef4\u5c31\u7eea","text":"<ul> <li> \u23f3 \u76d1\u63a7\u544a\u8b66\u914d\u7f6e\u5b8c\u6210</li> <li> \u23f3 \u5b9a\u65f6\u4efb\u52a1\u914d\u7f6e\u5b8c\u6210</li> <li> \u23f3 \u6587\u6863\u5b8c\u5584</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_56","title":"\u751f\u4ea7\u90e8\u7f72","text":"<ul> <li> \u23f3 \u7070\u5ea6\u53d1\u5e03\u8ba1\u5212</li> <li> \u23f3 \u56de\u6eda\u65b9\u6848</li> <li> \u23f3 \u5e94\u6025\u9884\u6848</li> <li> \u23f3 \u6b63\u5f0f\u4e0a\u7ebf</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_57","title":"\ud83d\udcdd \u5907\u6ce8","text":""},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_58","title":"\u98ce\u9669\u70b9","text":"<ol> <li>\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u53ef\u80fd\u6210\u4e3a\u74f6\u9888 \u2192 \u72ec\u7acb\u7ebf\u7a0b\u6c60 + \u964d\u7ea7</li> <li>\u6279\u91cf\u5199\u5165\u53ef\u80fd\u79ef\u538b \u2192 \u76d1\u63a7\u544a\u8b66 + \u81ea\u52a8\u6269\u5bb9</li> <li>\u5206\u533a\u7ba1\u7406\u53ef\u80fd\u5931\u8d25 \u2192 \u5b9a\u65f6\u4efb\u52a1\u76d1\u63a7 + \u624b\u52a8\u5907\u4efd</li> </ol>"},{"location":"archived/docs-251111/PERSISTENCE_IMPLEMENTATION_CHECKLIST/#_59","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u6240\u6709\u6301\u4e45\u5316\u64cd\u4f5c\u5fc5\u987b\u5f02\u6b65\uff0c\u4e0d\u80fd\u963b\u585e\u4e3b\u6d41\u7a0b</li> <li>\u6279\u91cf\u5199\u5165\u5927\u5c0f\u8981\u6839\u636e\u5b9e\u9645\u538b\u6d4b\u8c03\u6574</li> <li>\u5206\u533a\u7b56\u7565\u8981\u6839\u636e\u6570\u636e\u589e\u957f\u901f\u5ea6\u8c03\u6574</li> <li>\u964d\u7ea7\u7b56\u7565\u5fc5\u987b\u7ecf\u8fc7\u5145\u5206\u6d4b\u8bd5</li> <li>\u6027\u80fd\u6d4b\u8bd5\u8981\u5728\u751f\u4ea7\u7ea7\u73af\u5883\u8fdb\u884c</li> </ol> <p>\u6587\u6863\u7248\u672c: v1.0 \u521b\u5efa\u65e5\u671f: 2025-10-30 \u7ef4\u62a4\u8005: MCP Router V3 Team \u6700\u540e\u66f4\u65b0: 2025-10-30</p>"},{"location":"archived/docs-251111/PERSISTENCE_README/","title":"MCP Router V3 \u6301\u4e45\u5316\u529f\u80fd\u8bf4\u660e","text":"<p>\u7248\u672c: v2.0 \u751f\u4ea7\u7ea7 \u72b6\u6001: \u2705 \u5df2\u4f18\u5316\uff0c\u53ef\u76f4\u63a5\u4f7f\u7528</p>"},{"location":"archived/docs-251111/PERSISTENCE_README/#_1","title":"\ud83d\udcc1 \u6587\u6863\u7ed3\u6784","text":"<pre><code>mcp-router-sse-parent/\n\u251c\u2500\u2500 PERSISTENCE_GUIDE.md              \u2190 \ud83d\udcd6 \u552f\u4e00\u5b8c\u6574\u6307\u5357\uff08\u4ece\u8fd9\u91cc\u5f00\u59cb\uff09\n\u2514\u2500\u2500 mcp-router-v3/\n    \u2514\u2500\u2500 database/\n        \u251c\u2500\u2500 schema.sql                \u2190 \ud83d\uddc4\ufe0f \u6570\u636e\u5e93schema\uff08\u5df2\u4f18\u5316\uff09\n        \u2514\u2500\u2500 setup.sh                  \u2190 \ud83d\udd27 \u4e00\u952e\u5b89\u88c5\u811a\u672c\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_README/#3","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb\uff083\u6b65\uff09","text":""},{"location":"archived/docs-251111/PERSISTENCE_README/#1","title":"1\ufe0f\u20e3 \u521d\u59cb\u5316\u6570\u636e\u5e93","text":"<pre><code>cd mcp-router-v3/database\n./setup.sh\n</code></pre> <p>\u6216\u624b\u52a8\u6267\u884c\uff1a <pre><code>mysql -u root -p -e \"CREATE DATABASE IF NOT EXISTS mcp_bridge CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\"\nmysql -u root -p mcp_bridge &lt; schema.sql\n</code></pre></p>"},{"location":"archived/docs-251111/PERSISTENCE_README/#2","title":"2\ufe0f\u20e3 \u914d\u7f6e\u5e94\u7528","text":"<p>\u7f16\u8f91 <code>mcp-router-v3/src/main/resources/application.yml</code>\uff1a</p> <pre><code>spring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/mcp_bridge?rewriteBatchedStatements=true\n    username: root\n    password: your_password\n\nmybatis:\n  mapper-locations: classpath:mapper/*.xml\n</code></pre>"},{"location":"archived/docs-251111/PERSISTENCE_README/#3_1","title":"3\ufe0f\u20e3 \u542f\u52a8\u5e94\u7528","text":"<pre><code>cd mcp-router-v3\nmvn spring-boot:run\n</code></pre> <p>\u2705 \u5b8c\u6210\uff01</p>"},{"location":"archived/docs-251111/PERSISTENCE_README/#_2","title":"\ud83d\udcd6 \u5b8c\u6574\u6587\u6863","text":"<p>\u6240\u6709\u6280\u672f\u7ec6\u8282\u3001\u67b6\u6784\u8bbe\u8ba1\u3001\u4ee3\u7801\u5b9e\u73b0\u3001\u6027\u80fd\u8c03\u4f18\u3001\u6545\u969c\u6392\u67e5\uff0c\u8bf7\u67e5\u770b\uff1a</p> <p>\ud83d\udc49 PERSISTENCE_GUIDE.md</p>"},{"location":"archived/docs-251111/PERSISTENCE_README/#_3","title":"\ud83c\udfaf \u6838\u5fc3\u7279\u6027","text":"\u7279\u6027 \u8bf4\u660e \u54cd\u5e94\u5f0f\u9002\u914d WebFlux + MyBatis \u5b8c\u7f8e\u96c6\u6210 \u96f6\u6570\u636e\u4e22\u5931 \u591a\u5c42\u964d\u7ea7\u7b56\u7565\uff08\u7f13\u51b2\u2192\u6587\u4ef6\u2192\u65e5\u5fd7\uff09 \u9ad8\u6027\u80fd 5000+ TPS\uff0c\u6279\u91cf\u5199\u5165\uff0c\u8986\u76d6\u7d22\u5f15 \u5206\u533a\u8868 \u6309\u5929/\u6309\u6708\u81ea\u52a8\u5206\u533a\uff0c\u6613\u4e8e\u7ef4\u62a4 \u6545\u969c\u6062\u590d \u81ea\u52a8\u91cd\u8bd5\uff0c\u5b9a\u65f6\u6062\u590d\u964d\u7ea7\u6570\u636e \u751f\u4ea7\u5c31\u7eea \u5b8c\u6574\u76d1\u63a7\u3001\u544a\u8b66\u3001\u6700\u4f73\u5b9e\u8df5"},{"location":"archived/docs-251111/PERSISTENCE_README/#_4","title":"\ud83d\udcca \u6027\u80fd\u6307\u6807","text":"\u6307\u6807 \u503c \u5199\u5165\u541e\u5410\u91cf 5000+ TPS P99\u5199\u5165\u5ef6\u8fdf &lt;1ms \u6570\u636e\u4e22\u5931\u7387 &lt;0.001% \u5e76\u53d1\u652f\u6301 10000+ \u67e5\u8be2\u54cd\u5e94 &lt;50ms"},{"location":"archived/docs-251111/PERSISTENCE_README/#_5","title":"\ud83d\udd27 \u6280\u672f\u6808","text":"<ul> <li>Spring Boot 2.7.x + WebFlux</li> <li>MyBatis 3.0.3 + MySQL 8.0+</li> <li>HikariCP \u8fde\u63a5\u6c60</li> <li>Reactor \u54cd\u5e94\u5f0f\u7f16\u7a0b</li> <li>\u5206\u533a\u8868 \u6570\u636e\u5f52\u6863</li> </ul>"},{"location":"archived/docs-251111/PERSISTENCE_README/#_6","title":"\u2753 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"archived/docs-251111/PERSISTENCE_README/#q","title":"Q: \u4e3a\u4ec0\u4e48\u53ea\u6709\u4e00\u4e2a\u6587\u6863\uff1f","text":"<p>A: \u4e3a\u4e86\u4fdd\u8bc1\u6700\u5c0f\u5fc5\u8981\u6027\uff0c\u6211\u4eec\u5c06\u6240\u6709\u5185\u5bb9\u6574\u5408\u5230 <code>PERSISTENCE_GUIDE.md</code>\uff0c\u907f\u514d\u6587\u6863\u788e\u7247\u5316\u548c\u5197\u4f59\u3002</p>"},{"location":"archived/docs-251111/PERSISTENCE_README/#q_1","title":"Q: \u4e4b\u524d\u7684\u5176\u4ed6\u6587\u6863\u5462\uff1f","text":"<p>A: \u5df2\u5220\u9664\u521d\u7248\u548c\u4e2d\u95f4\u7248\u672c\uff0c\u53ea\u4fdd\u7559\u6700\u7ec8\u4f18\u5316\u7248\u672c\u3002</p>"},{"location":"archived/docs-251111/PERSISTENCE_README/#q-schemaschemasql","title":"Q: \u6570\u636e\u5e93schema\u4e3a\u4ec0\u4e48\u53ebschema.sql\uff1f","text":"<p>A: \u7edf\u4e00\u547d\u540d\uff0c\u65b9\u4fbf\u5f15\u7528\u3002\u8fd9\u662fv2.0\u4f18\u5316\u7248\uff0c\u4fee\u590d\u4e86\u6240\u6709\u5df2\u77e5\u95ee\u9898\u3002</p>"},{"location":"archived/docs-251111/PERSISTENCE_README/#q_2","title":"Q: \u6211\u9700\u8981\u5b8c\u6574\u4ee3\u7801\u5417\uff1f","text":"<p>A: <code>PERSISTENCE_GUIDE.md</code> \u5305\u542b\u6240\u6709\u6838\u5fc3\u4ee3\u7801\u3002\u5b8c\u6574\u9879\u76ee\u4ee3\u7801\u5728 <code>mcp-router-v3/src/</code> \u4e2d\u9010\u6b65\u5b9e\u73b0\u3002</p>"},{"location":"archived/docs-251111/PERSISTENCE_README/#_7","title":"\ud83c\udd98 \u83b7\u53d6\u5e2e\u52a9","text":"<ol> <li>\u67e5\u770b\u5b8c\u6574\u6587\u6863\uff1a<code>PERSISTENCE_GUIDE.md</code></li> <li>\u68c0\u67e5\u6570\u636e\u5e93\uff1a<code>mcp-router-v3/database/schema.sql</code></li> <li>\u53c2\u8003\u914d\u7f6e\uff1a<code>mcp-router-v3/src/main/resources/application.yml</code></li> </ol>"},{"location":"archived/docs-251111/PERSISTENCE_README/#_8","title":"\u2705 \u5b9e\u65bd\u68c0\u67e5\u6e05\u5355","text":"<ul> <li> \u6570\u636e\u5e93\u5df2\u521d\u59cb\u5316\uff0812\u5f20\u8868\uff09</li> <li> \u4f9d\u8d56\u5df2\u6dfb\u52a0\uff08MyBatis + MySQL\uff09</li> <li> \u914d\u7f6e\u5df2\u66f4\u65b0\uff08application.yml\uff09</li> <li> \u5e94\u7528\u80fd\u542f\u52a8\uff08\u65e0\u62a5\u9519\uff09</li> <li> \u6d4b\u8bd5\u63d2\u5165\u65e5\u5fd7\uff08\u9a8c\u8bc1\u529f\u80fd\uff09</li> </ul> <p>\u5f00\u59cb\u4f7f\u7528: \ud83d\udc49 PERSISTENCE_GUIDE.md</p>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/","title":"\ud83d\ude80 MCP Router \u5feb\u901f\u542f\u52a8\u6307\u5357","text":""},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_1","title":"\ud83d\udccb \u76ee\u5f55","text":"<ul> <li>\u7cfb\u7edf\u8981\u6c42</li> <li>\u5feb\u901f\u542f\u52a8</li> <li>\u914d\u7f6e\u8bf4\u660e</li> <li>\u9a8c\u8bc1\u6d4b\u8bd5</li> <li>\u5e38\u89c1\u95ee\u9898</li> </ul>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_2","title":"\ud83d\udcbb \u7cfb\u7edf\u8981\u6c42","text":""},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_3","title":"\u5fc5\u9700\u7ec4\u4ef6","text":"<ul> <li>Java: JDK 17+</li> <li>Maven: 3.8+</li> <li>MySQL: 8.0+</li> <li>Nacos: 2.0+ (\u53ef\u9009\uff0c\u7528\u4e8e\u670d\u52a1\u53d1\u73b0)</li> </ul>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_4","title":"\u73af\u5883\u51c6\u5907","text":"<pre><code># \u68c0\u67e5 Java \u7248\u672c\njava -version  # \u5e94\u663e\u793a 17 \u6216\u66f4\u9ad8\u7248\u672c\n\n# \u68c0\u67e5 Maven \u7248\u672c\nmvn -version   # \u5e94\u663e\u793a 3.8 \u6216\u66f4\u9ad8\u7248\u672c\n\n# \u68c0\u67e5 MySQL \u8fd0\u884c\u72b6\u6001\nmysql --version\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_5","title":"\ud83d\ude80 \u5feb\u901f\u542f\u52a8","text":""},{"location":"archived/docs-251111/QUICK_START_GUIDE/#1","title":"1. \u6570\u636e\u5e93\u521d\u59cb\u5316","text":"<pre><code># \u767b\u5f55 MySQL\nmysql -h127.0.0.1 -P3306 -uroot -p\n\n# \u521b\u5efa\u6570\u636e\u5e93\u548c\u7528\u6237\nCREATE DATABASE IF NOT EXISTS mcp_bridge;\nCREATE USER IF NOT EXISTS 'mcp_user'@'%' IDENTIFIED BY 'mcp_user';\nGRANT ALL PRIVILEGES ON mcp_bridge.* TO 'mcp_user'@'%';\nFLUSH PRIVILEGES;\n\n# \u5bfc\u5165\u8868\u7ed3\u6784\nUSE mcp_bridge;\nSOURCE /path/to/mcp-router-v3/database/schema_complete_optimized.sql;\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#2","title":"2. \u914d\u7f6e\u6587\u4ef6","text":"<p>\u7f16\u8f91 <code>mcp-router-v3/src/main/resources/application.yml</code>:</p> <pre><code>spring:\n  datasource:\n    url: jdbc:mysql://127.0.0.1:3306/mcp_bridge\n    username: mcp_user\n    password: mcp_user\n\n  cloud:\n    nacos:\n      discovery:\n        server-addr: 127.0.0.1:8848  # \u5982\u679c\u4f7f\u7528 Nacos\n        ephemeral: true               # \u5173\u952e\u914d\u7f6e\uff1a\u4e34\u65f6\u5b9e\u4f8b\n\nmcp:\n  persistence:\n    enabled: true\n    ephemeral:\n      enabled: true\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#3-router","title":"3. \u542f\u52a8 Router","text":"<pre><code># \u8fdb\u5165\u9879\u76ee\u76ee\u5f55\ncd /path/to/mcp-router-v3\n\n# \u542f\u52a8\uff08\u524d\u53f0\u8fd0\u884c\uff09\nmvn spring-boot:run\n\n# \u6216\u542f\u52a8\uff08\u540e\u53f0\u8fd0\u884c\uff09\nnohup mvn spring-boot:run &gt; logs/router.log 2&gt;&amp;1 &amp;\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#4-server","title":"4. \u542f\u52a8 Server \u5b9e\u4f8b","text":"<pre><code># \u8fdb\u5165 Server \u76ee\u5f55\ncd /path/to/mcp-server-v6\n\n# \u542f\u52a8\u5b9e\u4f8b1\uff08\u7aef\u53e3 8071\uff09\nmvn spring-boot:run -Dspring-boot.run.arguments=\"--server.port=8071\"\n\n# \u542f\u52a8\u5b9e\u4f8b2\uff08\u7aef\u53e3 8072\uff09- \u65b0\u7ec8\u7aef\u7a97\u53e3\nmvn spring-boot:run -Dspring-boot.run.arguments=\"--server.port=8072\"\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_6","title":"\u2699\ufe0f \u914d\u7f6e\u8bf4\u660e","text":""},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_7","title":"\u6838\u5fc3\u914d\u7f6e\u9879","text":""},{"location":"archived/docs-251111/QUICK_START_GUIDE/#1_1","title":"1. \u4e34\u65f6\u5b9e\u4f8b\u914d\u7f6e","text":"<pre><code>mcp:\n  persistence:\n    ephemeral:\n      enabled: true                      # \u542f\u7528\u4e34\u65f6\u5b9e\u4f8b\u652f\u6301\n      cleanup:\n        startup-timeout: 5               # \u542f\u52a8\u65f6\u6e05\u7406\u8d85\u65f6\u65f6\u95f4\uff08\u5206\u949f\uff09\n        health-check-timeout: 5          # \u5fc3\u8df3\u68c0\u6d4b\u8d85\u65f6\u65f6\u95f4\uff08\u5206\u949f\uff09\n        periodic-interval: 120000        # \u5b9a\u671f\u68c0\u67e5\u95f4\u9694\uff08\u6beb\u79d2\uff09\n        retention-days: 7                # \u79bb\u7ebf\u5b9e\u4f8b\u4fdd\u7559\u5929\u6570\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#2-nacos","title":"2. Nacos \u914d\u7f6e","text":"<pre><code>spring:\n  cloud:\n    nacos:\n      discovery:\n        server-addr: 127.0.0.1:8848\n        namespace: public                # \u547d\u540d\u7a7a\u95f4\n        group: DEFAULT_GROUP             # \u5206\u7ec4\n        ephemeral: true                  # \u4e34\u65f6\u5b9e\u4f8b\u6807\u8bc6\n        service: ${spring.application.name}\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#3","title":"3. \u6570\u636e\u5e93\u914d\u7f6e","text":"<pre><code>spring:\n  datasource:\n    url: jdbc:mysql://127.0.0.1:3306/mcp_bridge\n    username: mcp_user\n    password: mcp_user\n    driver-class-name: com.mysql.cj.jdbc.Driver\n\nmybatis-plus:\n  global-config:\n    db-config:\n      logic-delete-field: deletedAt\n      logic-delete-value: now()\n      logic-not-delete-value: 'NULL'\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_8","title":"\u2705 \u9a8c\u8bc1\u6d4b\u8bd5","text":""},{"location":"archived/docs-251111/QUICK_START_GUIDE/#1_2","title":"1. \u68c0\u67e5\u670d\u52a1\u542f\u52a8","text":"<pre><code># \u67e5\u770b Router \u65e5\u5fd7\ntail -f /path/to/mcp-router-v3/logs/router.log\n\n# \u671f\u671b\u770b\u5230\uff1a\n# \u2705 Started McpRouterV3Application in X.XXX seconds\n# \u2705 Marked X ephemeral instances as unhealthy for service...\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#2_1","title":"2. \u68c0\u67e5\u6570\u636e\u5e93\u6ce8\u518c","text":"<pre><code>-- \u67e5\u770b\u6240\u6709\u6ce8\u518c\u5b9e\u4f8b\nSELECT server_key, server_name, host, port, healthy, ephemeral, registered_at\nFROM mcp_servers\nWHERE deleted_at IS NULL\nORDER BY ephemeral DESC, registered_at DESC;\n\n-- \u671f\u671b\u7ed3\u679c\uff1a\n-- mcp-router-v3:127.0.0.1:8052     | ephemeral=1\n-- mcp-server-v6:192.168.0.102:8071 | ephemeral=1\n-- mcp-server-v6:192.168.0.102:8072 | ephemeral=1\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#3_1","title":"3. \u5065\u5eb7\u68c0\u67e5","text":"<pre><code># Router \u5065\u5eb7\u68c0\u67e5\uff08\u5982\u679c\u6709 health endpoint\uff09\ncurl http://localhost:8080/health\n\n# Server \u5065\u5eb7\u68c0\u67e5\ncurl http://localhost:8071/actuator/health\ncurl http://localhost:8072/actuator/health\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#4","title":"4. \u6d4b\u8bd5\u91cd\u542f\u6062\u590d","text":"<pre><code># 1. \u8bb0\u5f55\u5f53\u524d\u5b9e\u4f8b\nmysql -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge \\\n  -e \"SELECT server_key, healthy, ephemeral FROM mcp_servers WHERE deleted_at IS NULL\"\n\n# 2. \u7ec8\u6b62 Router\njps | grep McpRouterV3Application | awk '{print $1}' | xargs kill -9\n\n# 3. \u7b49\u5f8510\u79d2\n\n# 4. \u91cd\u542f Router\ncd /path/to/mcp-router-v3\nmvn spring-boot:run\n\n# 5. \u9a8c\u8bc1\u6e05\u7406\u7ed3\u679c\nmysql -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge \\\n  -e \"SELECT server_key, healthy, ephemeral FROM mcp_servers WHERE deleted_at IS NULL\"\n\n# \u671f\u671b\uff1a\u65e7\u7684 Router \u5b9e\u4f8b\u88ab\u6807\u8bb0\u4e3a unhealthy=0\n#      Server \u5b9e\u4f8b\u6062\u590d\u4e3a healthy=1\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_9","title":"\ud83d\udd0d \u5e38\u89c1\u95ee\u9898","text":""},{"location":"archived/docs-251111/QUICK_START_GUIDE/#q1-router-","title":"Q1: Router \u542f\u52a8\u5931\u8d25 - \u6570\u636e\u5e93\u8fde\u63a5\u9519\u8bef","text":"<p>\u9519\u8bef\u4fe1\u606f: <pre><code>Communications link failure\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: 1. \u68c0\u67e5 MySQL \u662f\u5426\u8fd0\u884c: <code>mysql -h127.0.0.1 -P3306 -umcp_user -pmcp_user</code> 2. \u68c0\u67e5\u9632\u706b\u5899\u8bbe\u7f6e 3. \u9a8c\u8bc1 <code>application.yml</code> \u4e2d\u7684\u8fde\u63a5\u4fe1\u606f</p>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#q2-ephemeral","title":"Q2: \u5b9e\u4f8b\u6ce8\u518c\u5931\u8d25 - ephemeral \u5b57\u6bb5\u9519\u8bef","text":"<p>\u9519\u8bef\u4fe1\u606f: <pre><code>Unknown column 'ephemeral' in 'field list'\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: \u786e\u4fdd\u4f7f\u7528\u6700\u65b0\u7684\u6570\u636e\u5e93\u8868\u7ed3\u6784: <pre><code>USE mcp_bridge;\nDESC mcp_servers;  -- \u68c0\u67e5\u662f\u5426\u6709 ephemeral \u5217\n\n-- \u5982\u679c\u6ca1\u6709\uff0c\u6267\u884c\uff1a\nALTER TABLE mcp_servers ADD COLUMN ephemeral TINYINT(1) DEFAULT 1 COMMENT '\u662f\u5426\u4e3a\u4e34\u65f6\u5b9e\u4f8b';\nCREATE INDEX idx_ephemeral_healthy ON mcp_servers(ephemeral, healthy);\n</code></pre></p>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#q3","title":"Q3: \u91cd\u542f\u540e\u65e7\u5b9e\u4f8b\u672a\u6e05\u7406","text":"<p>\u73b0\u8c61: Router \u91cd\u542f\u540e\uff0c\u6570\u636e\u5e93\u4e2d\u4ecd\u6709\u65e7\u7684\u4e34\u65f6\u5b9e\u4f8b\u8bb0\u5f55</p> <p>\u6392\u67e5\u6b65\u9aa4: 1. \u68c0\u67e5\u65e5\u5fd7\u662f\u5426\u6709\u6e05\u7406\u8bb0\u5f55: <pre><code>grep \"Marked.*ephemeral instances as unhealthy\" logs/router.log\n</code></pre></p> <ol> <li>\u624b\u52a8\u89e6\u53d1\u6e05\u7406: <pre><code>-- \u6807\u8bb0\u8d85\u8fc75\u5206\u949f\u672a\u66f4\u65b0\u7684\u4e34\u65f6\u5b9e\u4f8b\nUPDATE mcp_servers\nSET healthy = 0, updated_at = NOW()\nWHERE ephemeral = 1\n  AND deleted_at IS NULL\n  AND TIMESTAMPDIFF(MINUTE, updated_at, NOW()) &gt; 5;\n</code></pre></li> </ol>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#q4-nacos","title":"Q4: Nacos \u8fde\u63a5\u5931\u8d25","text":"<p>\u9519\u8bef\u4fe1\u606f: <pre><code>Request nacos server failed\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848: 1. \u68c0\u67e5 Nacos \u662f\u5426\u8fd0\u884c: <code>curl http://127.0.0.1:8848/nacos</code> 2. \u5982\u679c\u4e0d\u4f7f\u7528 Nacos\uff0c\u7981\u7528\u670d\u52a1\u53d1\u73b0: <pre><code>spring:\n  cloud:\n    nacos:\n      discovery:\n        enabled: false\n</code></pre></p>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#q5-","title":"Q5: \u6027\u80fd\u95ee\u9898 - \u9891\u7e41\u6570\u636e\u5e93\u67e5\u8be2","text":"<p>\u73b0\u8c61: \u65e5\u5fd7\u4e2d\u5927\u91cf\u6570\u636e\u5e93\u67e5\u8be2\u65e5\u5fd7</p> <p>\u4f18\u5316\u5efa\u8bae: 1. \u8c03\u6574\u5fc3\u8df3\u68c0\u6d4b\u95f4\u9694: <pre><code>mcp:\n  persistence:\n    ephemeral:\n      cleanup:\n        periodic-interval: 300000  # \u4ece2\u5206\u949f\u6539\u4e3a5\u5206\u949f\n</code></pre></p> <ol> <li> <p>\u542f\u7528\u67e5\u8be2\u7f13\u5b58\uff08\u9002\u7528\u4e8e\u8bfb\u591a\u5199\u5c11\u573a\u666f\uff09</p> </li> <li> <p>\u4f18\u5316\u7d22\u5f15: <pre><code>-- \u521b\u5efa\u590d\u5408\u7d22\u5f15\nCREATE INDEX idx_ephemeral_healthy_updated \nON mcp_servers(ephemeral, healthy, updated_at);\n</code></pre></p> </li> </ol>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_10","title":"\ud83d\udcca \u76d1\u63a7\u6307\u6807","text":""},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_11","title":"\u5173\u952e\u6307\u6807","text":"\u6307\u6807\u540d\u79f0 \u8bf4\u660e \u6b63\u5e38\u8303\u56f4 \u542f\u52a8\u65f6\u95f4 Router \u5b8c\u5168\u542f\u52a8\u8017\u65f6 &lt; 3\u79d2 \u4e34\u65f6\u5b9e\u4f8b\u6570\u91cf \u5f53\u524d\u4e34\u65f6\u5b9e\u4f8b\u603b\u6570 \u89c6\u4e1a\u52a1\u89c4\u6a21 \u4e0d\u5065\u5eb7\u5b9e\u4f8b\u6570\u91cf unhealthy=0 \u7684\u5b9e\u4f8b\u6570 &lt; 5% \u5fc3\u8df3\u68c0\u6d4b\u5ef6\u8fdf \u5b9e\u4f8b\u5d29\u6e83\u5230\u6807\u8bb0\u7684\u65f6\u95f4 &lt; 30\u79d2 \u6570\u636e\u5e93\u8fde\u63a5\u6570 \u5f53\u524d\u6d3b\u8dc3\u8fde\u63a5\u6570 &lt; 20"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#sql","title":"\u76d1\u63a7 SQL","text":"<pre><code>-- 1. \u4e34\u65f6\u5b9e\u4f8b\u7edf\u8ba1\nSELECT \n    ephemeral,\n    COUNT(*) as total,\n    SUM(CASE WHEN healthy = 1 THEN 1 ELSE 0 END) as healthy_count,\n    SUM(CASE WHEN healthy = 0 THEN 1 ELSE 0 END) as unhealthy_count\nFROM mcp_servers\nWHERE deleted_at IS NULL\nGROUP BY ephemeral;\n\n-- 2. \u6700\u8fd1\u6ce8\u518c\u7684\u5b9e\u4f8b\nSELECT server_key, server_name, host, port, registered_at\nFROM mcp_servers\nWHERE deleted_at IS NULL\nORDER BY registered_at DESC\nLIMIT 10;\n\n-- 3. \u4e0d\u5065\u5eb7\u5b9e\u4f8b\u5217\u8868\nSELECT server_key, server_name, last_health_check, updated_at\nFROM mcp_servers\nWHERE healthy = 0 AND deleted_at IS NULL\nORDER BY updated_at DESC;\n\n-- 4. \u5fc3\u8df3\u5ef6\u8fdf\u5206\u6790\nSELECT \n    server_name,\n    AVG(TIMESTAMPDIFF(SECOND, last_request_time, last_health_check)) as avg_heartbeat_delay_sec\nFROM mcp_servers\nWHERE deleted_at IS NULL AND last_request_time IS NOT NULL\nGROUP BY server_name;\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_12","title":"\ud83d\udee0\ufe0f \u8fd0\u7ef4\u547d\u4ee4","text":""},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_13","title":"\u65e5\u5e38\u7ef4\u62a4","text":"<pre><code># 1. \u67e5\u770b\u8fd0\u884c\u72b6\u6001\njps | grep -E \"McpRouter|McpServer\"\n\n# 2. \u4f18\u96c5\u505c\u6b62\nkill -15 &lt;PID&gt;\n\n# 3. \u5f3a\u5236\u505c\u6b62\nkill -9 &lt;PID&gt;\n\n# 4. \u6e05\u7406\u65e5\u5fd7\uff08\u4fdd\u7559\u6700\u8fd17\u5929\uff09\nfind /path/to/logs -name \"*.log\" -mtime +7 -delete\n\n# 5. \u6570\u636e\u5e93\u5907\u4efd\nmysqldump -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge &gt; backup_$(date +%Y%m%d).sql\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_14","title":"\u6545\u969c\u6062\u590d","text":"<pre><code># 1. \u5168\u91cf\u91cd\u542f\n# \u505c\u6b62\u6240\u6709\u670d\u52a1\njps | grep -E \"McpRouter|McpServer\" | awk '{print $1}' | xargs kill -9\n\n# \u6e05\u7406\u4e34\u65f6\u6570\u636e\nmysql -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge \\\n  -e \"UPDATE mcp_servers SET healthy=0 WHERE ephemeral=1 AND deleted_at IS NULL\"\n\n# \u91cd\u65b0\u542f\u52a8\ncd /path/to/mcp-router-v3 &amp;&amp; mvn spring-boot:run &amp;\nsleep 10\ncd /path/to/mcp-server-v6 &amp;&amp; mvn spring-boot:run -Dspring-boot.run.arguments=\"--server.port=8071\" &amp;\n\n# 2. \u6570\u636e\u6062\u590d\uff08\u4ece\u5907\u4efd\uff09\nmysql -h127.0.0.1 -P3306 -umcp_user -pmcp_user mcp_bridge &lt; backup_20250730.sql\n</code></pre>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_15","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>\u6570\u636e\u5e93\u8868\u7ed3\u6784\u8bbe\u8ba1</li> <li>\u91cd\u542f\u573a\u666f\u9a8c\u8bc1\u62a5\u544a</li> <li>\u6301\u4e45\u5316\u5206\u6790\u6587\u6863</li> </ul>"},{"location":"archived/docs-251111/QUICK_START_GUIDE/#_16","title":"\ud83d\udcde \u652f\u6301\u4e0e\u53cd\u9988","text":"<p>\u5982\u6709\u95ee\u9898\uff0c\u8bf7\uff1a 1. \u68c0\u67e5\u65e5\u5fd7\u6587\u4ef6\uff1a<code>tail -f logs/router.log</code> 2. \u67e5\u8be2\u6570\u636e\u5e93\u72b6\u6001\uff1a<code>SELECT * FROM mcp_servers WHERE deleted_at IS NULL</code> 3. \u53c2\u8003\u5e38\u89c1\u95ee\u9898\u7ae0\u8282</p> <p>\u6700\u540e\u66f4\u65b0: 2025-10-30 \u7248\u672c: 1.0.0</p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/","title":"\ud83d\udd04 MCP Router \u91cd\u542f\u573a\u666f\u9a8c\u8bc1\u62a5\u544a","text":""},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_1","title":"\ud83d\udcc5 \u6d4b\u8bd5\u65f6\u95f4","text":"<p>2025-10-30 18:14</p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_2","title":"\ud83c\udfaf \u6d4b\u8bd5\u76ee\u6807","text":"<p>\u9a8c\u8bc1 MCP Router \u53ca Server \u5b9e\u4f8b\u5728\u5d29\u6e83\u91cd\u542f\u573a\u666f\u4e0b\u7684\u81ea\u52a8\u6062\u590d\u548c\u6e05\u7406\u673a\u5236\u3002</p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_3","title":"\ud83e\uddea \u6d4b\u8bd5\u573a\u666f","text":""},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#1-","title":"\u573a\u666f1: \u5168\u65b0\u542f\u52a8 - \u5b9e\u4f8b\u6ce8\u518c","text":"<p>\u64cd\u4f5c\u6b65\u9aa4\uff1a 1. \u6e05\u7a7a\u6570\u636e\u5e93\u8868\uff08<code>mcp_servers</code>, <code>health_check_records</code>\uff09 2. \u542f\u52a8 mcp-router (\u7aef\u53e3 8080) 3. \u542f\u52a8 mcp-server-v6 \u5b9e\u4f8b1 (\u7aef\u53e3 8071) 4. \u542f\u52a8 mcp-server-v6 \u5b9e\u4f8b2 (\u7aef\u53e3 8072)</p> <p>\u9a8c\u8bc1\u7ed3\u679c\uff1a <pre><code>-- \u6570\u636e\u5e93\u72b6\u6001\u5feb\u7167\uff08\u542f\u52a8\u540e\uff09\nserver_key                              | server_name              | host          | port | healthy | ephemeral | registered_at\n----------------------------------------|--------------------------|---------------|------|---------|-----------|------------------\nmcp-router-v3:127.0.0.1:8052           | mcp-router-v3            | 127.0.0.1     | 8052 | 1       | 1         | 2025-10-30 17:52:06\nmcp-server-v6:192.168.0.102:8071       | mcp-server-v6            | 192.168.0.102 | 8071 | 1       | 1         | 2025-10-30 17:52:08\nmcp-server-v6:192.168.0.102:8072       | mcp-server-v6            | 192.168.0.102 | 8072 | 1       | 1         | 2025-10-30 17:52:12\ncf-server:127.0.0.1:8899               | cf-server                | 127.0.0.1     | 8899 | 1       | 0         | 2025-10-30 17:52:05\nmcp-server-v2-20250718:127.0.0.1:8090  | mcp-server-v2-20250718   | 127.0.0.1     | 8090 | 1       | 0         | 2025-10-30 17:52:05\n</code></pre></p> <p>\u2705 \u9a8c\u8bc1\u70b9\uff1a - \u2705 Router \u6ce8\u518c\u4e3a\u4e34\u65f6\u5b9e\u4f8b (<code>ephemeral=1</code>) - \u2705 mcp-server-v6 \u5b9e\u4f8b\u6ce8\u518c\u4e3a\u4e34\u65f6\u5b9e\u4f8b (<code>ephemeral=1</code>) - \u2705 \u5386\u53f2\u6301\u4e45\u5316\u5b9e\u4f8b\u4fdd\u6301\u4e0d\u53d8 (<code>ephemeral=0</code>) - \u2705 \u6240\u6709\u65b0\u5b9e\u4f8b\u5065\u5eb7\u72b6\u6001\u6b63\u5e38 (<code>healthy=1</code>)</p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#2-router-","title":"\u573a\u666f2: Router \u5d29\u6e83\u91cd\u542f - \u4e34\u65f6\u5b9e\u4f8b\u6e05\u7406","text":"<p>\u64cd\u4f5c\u6b65\u9aa4\uff1a 1. \u5f3a\u5236\u7ec8\u6b62 Router \u8fdb\u7a0b (<code>kill -9</code>) 2. \u7b49\u5f855\u79d2 3. \u91cd\u65b0\u542f\u52a8 Router 4. \u89c2\u5bdf\u542f\u52a8\u65e5\u5fd7\u548c\u6570\u636e\u5e93\u72b6\u6001</p> <p>Router \u91cd\u542f\u65e5\u5fd7\uff1a <pre><code>2025-10-30 18:11:31.579  INFO --- [main] c.p.m.p.s.McpServerPersistenceService\n  : \u2705 Marked 1 ephemeral instances as unhealthy for service: mcp-router-v3@mcp-server\n\n2025-10-30 18:11:31.585  INFO --- [main] c.p.m.p.s.McpServerPersistenceService\n  : \u2705 Marked 2 stale ephemeral instances as unhealthy (not updated for &gt;5 minutes)\n\n2025-10-30 18:11:31.776  INFO --- [ncesChangeEvent] c.p.m.c.l.McpConnectionEventListener\n  : \u2705 Healthy instance: 192.168.0.102:8071 (weight: 1.0, ephemeral: true)\n\n2025-10-30 18:11:31.776  INFO --- [ncesChangeEvent] c.p.m.c.l.McpConnectionEventListener\n  : \u2705 Healthy instance: 192.168.0.102:8072 (weight: 1.0, ephemeral: true)\n\n2025-10-30 18:11:31.785  INFO --- [main] c.p.m.core.McpRouterV3Application\n  : Started McpRouterV3Application in 1.722 seconds (process running for 1.864)\n</code></pre></p> <p>\u2705 \u9a8c\u8bc1\u70b9\uff1a - \u2705 \u542f\u52a8\u65f6\u6e05\u7406\u4e86\u81ea\u5df1\u7684\u65e7\u4e34\u65f6\u5b9e\u4f8b\uff081\u4e2a\uff09 - \u2705 \u542f\u52a8\u65f6\u6e05\u7406\u4e86\u8d85\u8fc75\u5206\u949f\u672a\u66f4\u65b0\u7684\u5176\u4ed6\u4e34\u65f6\u5b9e\u4f8b\uff082\u4e2a\uff09 - \u2705 \u91cd\u65b0\u53d1\u73b0\u5e76\u91cd\u65b0\u6ce8\u518c\u4e86\u4ecd\u5728\u8fd0\u884c\u7684 mcp-server-v6 \u5b9e\u4f8b - \u2705 Router \u57281.7\u79d2\u5185\u5b8c\u6210\u542f\u52a8</p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#3-server-","title":"\u573a\u666f3: Server \u5b9e\u4f8b\u5d29\u6e83 - \u5fc3\u8df3\u68c0\u6d4b\u4e0e\u81ea\u52a8\u6807\u8bb0","text":"<p>\u64cd\u4f5c\u6b65\u9aa4\uff1a 1. \u5f3a\u5236\u7ec8\u6b62 mcp-server-v6:8071 \u8fdb\u7a0b 2. \u7b49\u5f8510\u79d2\u8ba9\u5fc3\u8df3\u68c0\u6d4b\u751f\u6548 3. \u68c0\u67e5\u6570\u636e\u5e93\u548c\u65e5\u5fd7</p> <p>\u5fc3\u8df3\u68c0\u6d4b\u65e5\u5fd7\uff1a <pre><code>2025-10-30 18:13:25.136  INFO --- [undedElastic-11] c.p.m.p.s.McpServerPersistenceService\n  : \ud83d\udcc9 Marking offline ephemeral instance as unhealthy: mcp-server-v6@mcp-server - 192.168.0.102:8071\n\n2025-10-30 18:13:25.141  INFO --- [undedElastic-11] c.p.m.p.s.McpServerPersistenceService\n  : \u2705 Marked 1 offline ephemeral instances as unhealthy for service: mcp-server-v6@mcp-server\n</code></pre></p> <p>\u6570\u636e\u5e93\u72b6\u6001\uff1a <pre><code>server_key                        | host          | port | healthy | ephemeral\n----------------------------------|---------------|------|---------|----------\nmcp-server-v6:192.168.0.102:8071 | 192.168.0.102 | 8071 | 0       | 1         -- \u5df2\u6807\u8bb0\u4e3a\u4e0d\u5065\u5eb7\nmcp-server-v6:192.168.0.102:8072 | 192.168.0.102 | 8072 | 1       | 1         -- \u6b63\u5e38\u8fd0\u884c\n</code></pre></p> <p>\u2705 \u9a8c\u8bc1\u70b9\uff1a - \u2705 \u5fc3\u8df3\u68c0\u6d4b\u5728\u5b9e\u4f8b\u5d29\u6e83\u540e\u53ca\u65f6\u53d1\u73b0\uff08~10\u79d2\u5185\uff09 - \u2705 \u5d29\u6e83\u5b9e\u4f8b\u88ab\u6b63\u786e\u6807\u8bb0\u4e3a <code>unhealthy=0</code> - \u2705 \u5065\u5eb7\u5b9e\u4f8b\u4e0d\u53d7\u5f71\u54cd\uff0c\u7ee7\u7eed\u4fdd\u6301 <code>healthy=1</code> - \u2705 \u65e5\u5fd7\u6e05\u6670\u8bb0\u5f55\u4e86\u68c0\u6d4b\u548c\u6807\u8bb0\u8fc7\u7a0b</p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_4","title":"\ud83d\udd27 \u81ea\u52a8\u5316\u673a\u5236\u603b\u7ed3","text":""},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#1","title":"1\ufe0f\u20e3 \u542f\u52a8\u65f6\u6e05\u7406\u673a\u5236","text":"<p>\u89e6\u53d1\u65f6\u673a\uff1a Router \u542f\u52a8\u65f6\uff08<code>@PostConstruct</code>\uff09</p> <p>\u6e05\u7406\u7b56\u7565\uff1a - \u6807\u8bb0\u5f53\u524d\u670d\u52a1\u7684\u65e7\u4e34\u65f6\u5b9e\u4f8b\u4e3a\u4e0d\u5065\u5eb7 - \u6807\u8bb0\u8d85\u8fc75\u5206\u949f\u672a\u66f4\u65b0\u7684\u6240\u6709\u4e34\u65f6\u5b9e\u4f8b\u4e3a\u4e0d\u5065\u5eb7</p> <p>\u5b9e\u73b0\u65b9\u6cd5\uff1a <pre><code>// 1. \u6e05\u7406\u81ea\u5df1\u7684\u65e7\u5b9e\u4f8b\nmarkOwnEphemeralInstancesUnhealthy(currentService);\n\n// 2. \u6e05\u7406\u9648\u65e7\u7684\u4e34\u65f6\u5b9e\u4f8b\nmarkStaleEphemeralInstancesUnhealthy(5);\n</code></pre></p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#2","title":"2\ufe0f\u20e3 \u8fd0\u884c\u65f6\u5fc3\u8df3\u68c0\u6d4b","text":"<p>\u89e6\u53d1\u65f6\u673a\uff1a \u5b9e\u65f6\u76d1\u63a7\uff08\u4e8b\u4ef6\u9a71\u52a8\uff09</p> <p>\u68c0\u6d4b\u7b56\u7565\uff1a - \u5f53 Nacos \u5b9e\u4f8b\u5217\u8868\u53d8\u5316\u65f6\u89e6\u53d1 - \u5bf9\u6bd4\u5185\u5b58\u72b6\u6001\u4e0e\u6570\u636e\u5e93\u72b6\u6001 - \u53d1\u73b0\u79bb\u7ebf\u7684\u4e34\u65f6\u5b9e\u4f8b\u7acb\u5373\u6807\u8bb0\u4e3a\u4e0d\u5065\u5eb7</p> <p>\u5173\u952e\u4ee3\u7801\uff1a <pre><code>@EventListener\npublic void onInstancesChange(InstancesChangeEvent event) {\n    // \u66f4\u65b0\u5b9e\u4f8b\u72b6\u6001\n    // \u6301\u4e45\u5316\u5230\u6570\u636e\u5e93\n    // \u6807\u8bb0\u79bb\u7ebf\u5b9e\u4f8b\u4e3a\u4e0d\u5065\u5eb7\n}\n</code></pre></p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#3","title":"3\ufe0f\u20e3 \u5b9a\u671f\u6e05\u7406\u4efb\u52a1","text":"<p>\u4efb\u52a11\uff1a\u6807\u8bb0\u8d85\u65f6\u670d\u52a1\u5668 - \u9891\u7387\uff1a \u6bcf2\u5206\u949f\u6267\u884c\u4e00\u6b21 - \u7b56\u7565\uff1a \u6807\u8bb0\u8d85\u8fc75\u5206\u949f\u672a\u5065\u5eb7\u68c0\u67e5\u7684\u670d\u52a1\u5668\u4e3a\u4e0d\u5065\u5eb7 - \u914d\u7f6e\uff1a <code>@Scheduled(fixedDelay = 120_000, initialDelay = 60_000)</code></p> <p>\u4efb\u52a12\uff1a\u5220\u9664\u5386\u53f2\u8bb0\u5f55 - \u9891\u7387\uff1a \u6bcf\u5929\u51cc\u66683\u70b9 - \u7b56\u7565\uff1a \u5220\u96647\u5929\u524d\u79bb\u7ebf\u7684\u670d\u52a1\u5668\u8bb0\u5f55 - \u914d\u7f6e\uff1a <code>@Scheduled(cron = \"0 0 3 * * ?\")</code></p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_5","title":"\ud83d\udcca \u6027\u80fd\u6307\u6807","text":""},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_6","title":"\u542f\u52a8\u6027\u80fd","text":"\u6307\u6807 \u6570\u503c Router \u9996\u6b21\u542f\u52a8\u65f6\u95f4 2.237\u79d2 Router \u91cd\u542f\u65f6\u95f4 1.722\u79d2 \u4e34\u65f6\u5b9e\u4f8b\u6e05\u7406\u8017\u65f6 &lt;50ms"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_7","title":"\u6545\u969c\u68c0\u6d4b\u65f6\u6548","text":"\u573a\u666f \u68c0\u6d4b\u65f6\u95f4 Router \u5d29\u6e83\u68c0\u6d4b \u542f\u52a8\u65f6\u7acb\u5373\u6e05\u7406 Server \u5d29\u6e83\u68c0\u6d4b ~10\u79d2\uff08\u5fc3\u8df3\u95f4\u9694\uff09 \u8d85\u65f6\u5b9e\u4f8b\u6807\u8bb0 \u6700\u957f2\u5206\u949f\uff08\u5b9a\u65f6\u4efb\u52a1\uff09"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_8","title":"\u2705 \u6d4b\u8bd5\u7ed3\u8bba","text":""},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_9","title":"\u6838\u5fc3\u529f\u80fd\u9a8c\u8bc1\u901a\u8fc7","text":"<ol> <li>\u2705 \u4e34\u65f6\u5b9e\u4f8b\u6807\u8bc6\u6b63\u786e</li> <li>Router \u548c Server \u5747\u6b63\u786e\u6ce8\u518c\u4e3a <code>ephemeral=1</code></li> <li> <p>\u5386\u53f2\u6301\u4e45\u5316\u5b9e\u4f8b\u4fdd\u6301 <code>ephemeral=0</code> \u4e0d\u53d8</p> </li> <li> <p>\u2705 \u542f\u52a8\u65f6\u6e05\u7406\u6709\u6548</p> </li> <li>Router \u91cd\u542f\u65f6\u80fd\u81ea\u52a8\u6e05\u7406\u81ea\u5df1\u7684\u65e7\u5b9e\u4f8b</li> <li>\u80fd\u6e05\u7406\u8d85\u8fc75\u5206\u949f\u672a\u66f4\u65b0\u7684\u5176\u4ed6\u4e34\u65f6\u5b9e\u4f8b</li> <li> <p>\u6e05\u7406\u8fc7\u7a0b\u4e0d\u5f71\u54cd\u6b63\u5e38\u8fd0\u884c\u7684\u5b9e\u4f8b</p> </li> <li> <p>\u2705 \u5fc3\u8df3\u68c0\u6d4b\u7075\u654f</p> </li> <li>\u5b9e\u4f8b\u5d29\u6e83\u540e10\u79d2\u5185\u88ab\u53d1\u73b0\u5e76\u6807\u8bb0</li> <li>\u4e0d\u5065\u5eb7\u5b9e\u4f8b\u4e0d\u4f1a\u5f71\u54cd\u5065\u5eb7\u5b9e\u4f8b</li> <li> <p>\u65e5\u5fd7\u8bb0\u5f55\u5b8c\u6574\u6e05\u6670</p> </li> <li> <p>\u2705 \u6301\u4e45\u5316\u6df7\u5408\u90e8\u7f72</p> </li> <li>\u4e34\u65f6\u5b9e\u4f8b\u548c\u6301\u4e45\u5316\u5b9e\u4f8b\u53ef\u4ee5\u5171\u5b58</li> <li>\u4e92\u4e0d\u5e72\u6270\uff0c\u5404\u81ea\u6309\u7167\u4e0d\u540c\u7b56\u7565\u7ba1\u7406</li> </ol>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_10","title":"\ud83c\udfaf \u67b6\u6784\u4f18\u52bf","text":""},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#1_1","title":"1. \u6570\u636e\u4e00\u81f4\u6027","text":"<ul> <li>\u5355\u4e00\u6570\u636e\u6e90\uff1a MySQL \u4f5c\u4e3a\u552f\u4e00\u771f\u76f8\u6765\u6e90</li> <li>\u81ea\u52a8\u540c\u6b65\uff1a Nacos \u4e8b\u4ef6\u81ea\u52a8\u540c\u6b65\u5230\u6570\u636e\u5e93</li> <li>\u72b6\u6001\u8ffd\u8e2a\uff1a \u5b8c\u6574\u8bb0\u5f55\u5b9e\u4f8b\u751f\u547d\u5468\u671f</li> </ul>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#2_1","title":"2. \u6545\u969c\u6062\u590d\u80fd\u529b","text":"<ul> <li>\u81ea\u52a8\u6e05\u7406\uff1a \u5d29\u6e83\u5b9e\u4f8b\u81ea\u52a8\u6807\u8bb0\u548c\u6e05\u7406</li> <li>\u5feb\u901f\u6062\u590d\uff1a \u91cd\u542f\u540e1.7\u79d2\u5b8c\u6210\u542f\u52a8</li> <li>\u6570\u636e\u4fdd\u7559\uff1a \u6301\u4e45\u5316\u5b9e\u4f8b\u91cd\u542f\u540e\u81ea\u52a8\u6062\u590d</li> </ul>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#3_1","title":"3. \u8fd0\u7ef4\u53cb\u597d","text":"<ul> <li>\u65e5\u5fd7\u5b8c\u6574\uff1a \u6bcf\u4e2a\u5173\u952e\u64cd\u4f5c\u90fd\u6709\u6e05\u6670\u65e5\u5fd7</li> <li>\u72b6\u6001\u53ef\u67e5\uff1a \u6570\u636e\u5e93\u5b9e\u65f6\u53cd\u6620\u96c6\u7fa4\u72b6\u6001</li> <li>\u7075\u6d3b\u914d\u7f6e\uff1a \u6e05\u7406\u7b56\u7565\u53ef\u901a\u8fc7\u914d\u7f6e\u8c03\u6574</li> </ul>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_11","title":"\ud83d\udd0d \u5f85\u4f18\u5316\u9879","text":""},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#1_2","title":"1. \u6e05\u7406\u7b56\u7565\u4f18\u5316\uff08\u53ef\u9009\uff09","text":"<p>\u5f53\u524d\u7b56\u7565\uff1a - \u5d29\u6e83\u5b9e\u4f8b\u6807\u8bb0\u4e3a <code>unhealthy=0</code> - \u4fdd\u7559\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u7b49\u5f85\u51cc\u66683\u70b9\u7edf\u4e00\u6e05\u7406</p> <p>\u5efa\u8bae\u4f18\u5316\uff1a - \u589e\u52a0\u7acb\u5373\u5220\u9664\u9009\u9879\uff08<code>ephemeral.cleanup.immediate=true</code>\uff09 - \u53ef\u914d\u7f6e\u4fdd\u7559\u65f6\u95f4\uff08\u9ed8\u8ba47\u5929\uff0c\u53ef\u8c03\u6574\u4e3a30\u5206\u949f\uff09</p>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#2_2","title":"2. \u76d1\u63a7\u544a\u8b66\uff08\u5efa\u8bae\uff09","text":"<ul> <li>\u6dfb\u52a0\u4e34\u65f6\u5b9e\u4f8b\u6570\u91cf\u76d1\u63a7</li> <li>\u4e0d\u5065\u5eb7\u5b9e\u4f8b\u6570\u91cf\u8d85\u9608\u503c\u544a\u8b66</li> <li>\u5fc3\u8df3\u68c0\u6d4b\u5931\u8d25\u7387\u76d1\u63a7</li> </ul>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#3_2","title":"3. \u6027\u80fd\u4f18\u5316\uff08\u53ef\u9009\uff09","text":"<ul> <li>\u6279\u91cf\u66f4\u65b0\u5065\u5eb7\u72b6\u6001\uff08\u51cf\u5c11\u6570\u636e\u5e93\u538b\u529b\uff09</li> <li>\u5fc3\u8df3\u68c0\u6d4b\u95f4\u9694\u53ef\u914d\u7f6e\u5316</li> <li>\u6e05\u7406\u4efb\u52a1\u5e76\u53d1\u6267\u884c</li> </ul>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_12","title":"\ud83d\udccc \u914d\u7f6e\u53c2\u8003","text":""},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_13","title":"\u5f53\u524d\u914d\u7f6e","text":"<pre><code># application.yml\nmcp:\n  persistence:\n    enabled: true\n    ephemeral:\n      enabled: true                      # \u542f\u7528\u4e34\u65f6\u5b9e\u4f8b\u652f\u6301\n      cleanup:\n        startup-timeout: 5               # \u542f\u52a8\u65f6\u6e05\u74065\u5206\u949f\u672a\u66f4\u65b0\u7684\u5b9e\u4f8b\n        health-check-timeout: 5          # \u5fc3\u8df3\u68c0\u6d4b\u8d85\u65f65\u5206\u949f\n        periodic-interval: 120000        # \u5b9a\u671f\u68c0\u67e5\u95f4\u96942\u5206\u949f\n        retention-days: 7                # \u79bb\u7ebf\u5b9e\u4f8b\u4fdd\u75597\u5929\n</code></pre>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_14","title":"\u5efa\u8bae\u6269\u5c55\u914d\u7f6e","text":"<pre><code>mcp:\n  persistence:\n    ephemeral:\n      cleanup:\n        immediate: false                 # \u662f\u5426\u7acb\u5373\u5220\u9664\u5d29\u6e83\u5b9e\u4f8b\n        unhealthy-retention-minutes: 30  # \u4e0d\u5065\u5eb7\u5b9e\u4f8b\u4fdd\u7559\u65f6\u95f4\n        batch-size: 100                  # \u6279\u91cf\u5904\u7406\u5927\u5c0f\n      monitoring:\n        alert-threshold: 10              # \u4e0d\u5065\u5eb7\u5b9e\u4f8b\u544a\u8b66\u9608\u503c\n        metric-interval: 60000           # \u6307\u6807\u91c7\u96c6\u95f4\u9694\n</code></pre>"},{"location":"archived/docs-251111/RESTART_VERIFICATION_REPORT/#_15","title":"\ud83c\udfc6 \u603b\u7ed3","text":"<p>\u7ecf\u8fc7\u5b8c\u6574\u7684\u5d29\u6e83\u91cd\u542f\u573a\u666f\u9a8c\u8bc1\uff0cMCP Router \u7684\u4e34\u65f6\u5b9e\u4f8b\u7ba1\u7406\u673a\u5236\u8868\u73b0\u4f18\u79c0\uff1a</p> <ol> <li>\u81ea\u52a8\u5316\u7a0b\u5ea6\u9ad8\uff1a \u65e0\u9700\u4eba\u5de5\u5e72\u9884\uff0c\u81ea\u52a8\u5b8c\u6210\u6e05\u7406\u548c\u6062\u590d</li> <li>\u7a33\u5b9a\u6027\u5f3a\uff1a \u91cd\u542f\u901f\u5ea6\u5feb\uff0c\u6545\u969c\u68c0\u6d4b\u51c6\u786e</li> <li>\u517c\u5bb9\u6027\u597d\uff1a \u4e34\u65f6\u5b9e\u4f8b\u4e0e\u6301\u4e45\u5316\u5b9e\u4f8b\u548c\u8c10\u5171\u5b58</li> <li>\u53ef\u89c2\u6d4b\u6027\u5f3a\uff1a \u65e5\u5fd7\u548c\u6570\u636e\u5e93\u5b8c\u6574\u8bb0\u5f55\u72b6\u6001\u53d8\u5316</li> </ol> <p>\u8be5\u5b9e\u73b0\u65b9\u6848\u5df2\u8fbe\u5230\u751f\u4ea7\u73af\u5883\u53ef\u7528\u6807\u51c6\u3002</p> <p>\u9a8c\u8bc1\u4eba\u5458\uff1a AI Assistant \u9a8c\u8bc1\u65f6\u95f4\uff1a 2025-10-30 18:14 \u73af\u5883\u4fe1\u606f\uff1a macOS 24.6.0, MySQL 8.0, Java Spring Boot 3.x</p>"},{"location":"archived/docs-251111/START_HERE/","title":"\ud83d\ude80 \u4ece\u8fd9\u91cc\u5f00\u59cb","text":"<p>MCP Router V3 \u6301\u4e45\u5316\u529f\u80fd - \u751f\u4ea7\u7ea7 MySQL \u96c6\u6210\u65b9\u6848</p>"},{"location":"archived/docs-251111/START_HERE/#_2","title":"\ud83d\udccb \u4f60\u9700\u8981\u4ec0\u4e48\uff1f","text":""},{"location":"archived/docs-251111/START_HERE/#_3","title":"\u5982\u679c\u4f60\u60f3...","text":"\u9700\u6c42 \u6587\u6863 \u65f6\u95f4 \u5feb\u901f\u4e86\u89e3 \u6301\u4e45\u5316\u529f\u80fd PERSISTENCE_README.md 3\u5206\u949f \u5feb\u901f\u96c6\u6210 \u5230\u9879\u76ee PERSISTENCE_README.md \u2192 <code>setup.sh</code> 5\u5206\u949f \u6df1\u5165\u5b66\u4e60 \u6280\u672f\u7ec6\u8282 PERSISTENCE_GUIDE.md 30\u5206\u949f \u67e5\u627e \u7279\u5b9a\u529f\u80fd DOCS_INDEX.md &lt;1\u5206\u949f \u6392\u67e5 \u95ee\u9898 PERSISTENCE_GUIDE.md#\u6545\u969c\u6392\u67e5 \u6309\u9700"},{"location":"archived/docs-251111/START_HERE/#3","title":"\u26a1 3\u5206\u949f\u5feb\u901f\u5f00\u59cb","text":"<pre><code># 1\ufe0f\u20e3 \u9605\u8bfb\u5165\u53e3\u6587\u6863\uff08\u5fc5\u8bfb\uff09\ncat PERSISTENCE_README.md\n\n# 2\ufe0f\u20e3 \u521d\u59cb\u5316\u6570\u636e\u5e93\ncd mcp-router-v3/database\n./setup.sh your_mysql_password\n\n# 3\ufe0f\u20e3 \u542f\u52a8\u5e94\u7528\ncd ..\nmvn spring-boot:run\n</code></pre> <p>\u2705 \u5b8c\u6210\uff01 \u73b0\u5728\u4f60\u7684\u5e94\u7528\u5df2\u7ecf\u5177\u5907\u4e86\uff1a - \u2705 MySQL \u6301\u4e45\u5316 - \u2705 5000+ TPS \u5199\u5165\u80fd\u529b - \u2705 \u96f6\u6570\u636e\u4e22\u5931\u4fdd\u8bc1 - \u2705 \u81ea\u52a8\u6545\u969c\u6062\u590d</p>"},{"location":"archived/docs-251111/START_HERE/#_4","title":"\ud83d\udcda \u6587\u6863\u5bfc\u822a","text":"<pre><code>START_HERE.md (\u672c\u6587\u6863)\n   \u2193\n   \u251c\u2500\u2500 \u5feb\u901f\u4e86\u89e3 \u2192 PERSISTENCE_README.md\n   \u251c\u2500\u2500 \u6df1\u5165\u5b66\u4e60 \u2192 PERSISTENCE_GUIDE.md\n   \u2514\u2500\u2500 \u6587\u6863\u7d22\u5f15 \u2192 DOCS_INDEX.md\n</code></pre>"},{"location":"archived/docs-251111/START_HERE/#_5","title":"\u6838\u5fc3\u6587\u6863","text":"\u6587\u6863 \u7528\u9014 \u4f18\u5148\u7ea7 PERSISTENCE_README.md \ud83d\udccb \u5165\u53e3\u6587\u6863 \u2b50\u2b50\u2b50\u2b50\u2b50 PERSISTENCE_GUIDE.md \ud83d\udcd6 \u5b8c\u6574\u6280\u672f\u6307\u5357 \u2b50\u2b50\u2b50\u2b50\u2b50 DOCS_INDEX.md \ud83d\udcda \u6240\u6709\u6587\u6863\u7d22\u5f15 \u2b50\u2b50\u2b50\u2b50 CONSOLIDATION_SUMMARY.md \ud83d\udcdd \u6574\u5408\u8bf4\u660e \u2b50\u2b50\u2b50"},{"location":"archived/docs-251111/START_HERE/#_6","title":"\u6570\u636e\u5e93\u6587\u4ef6","text":"\u6587\u4ef6 \u7528\u9014 mcp-router-v3/database/schema.sql \ud83d\uddc4\ufe0f \u6570\u636e\u5e93Schema mcp-router-v3/database/setup.sh \ud83d\udd27 \u4e00\u952e\u5b89\u88c5\u811a\u672c"},{"location":"archived/docs-251111/START_HERE/#_7","title":"\ud83c\udfaf \u6838\u5fc3\u7279\u6027","text":"<ul> <li>\u2705 WebFlux + MyBatis \u5b8c\u7f8e\u96c6\u6210</li> <li>\u2705 \u96f6\u6570\u636e\u4e22\u5931 \u591a\u5c42\u964d\u7ea7\u7b56\u7565</li> <li>\u2705 \u9ad8\u6027\u80fd 5000+ TPS</li> <li>\u2705 \u81ea\u52a8\u5206\u533a \u6309\u5929/\u6309\u6708</li> <li>\u2705 \u6545\u969c\u6062\u590d \u81ea\u52a8\u91cd\u8bd5</li> <li>\u2705 \u751f\u4ea7\u5c31\u7eea \u5b8c\u6574\u76d1\u63a7</li> </ul>"},{"location":"archived/docs-251111/START_HERE/#_8","title":"\ud83d\udcca \u6027\u80fd\u6307\u6807","text":"\u6307\u6807 \u503c \u5199\u5165\u541e\u5410\u91cf 5000+ TPS P99\u5199\u5165\u5ef6\u8fdf &lt;1ms \u6570\u636e\u4e22\u5931\u7387 &lt;0.001% \u5e76\u53d1\u652f\u6301 10000+"},{"location":"archived/docs-251111/START_HERE/#_9","title":"\ud83c\udd98 \u9700\u8981\u5e2e\u52a9\uff1f","text":"<ol> <li>\u67e5\u770b PERSISTENCE_README.md \u5e38\u89c1\u95ee\u9898</li> <li>\u67e5\u770b PERSISTENCE_GUIDE.md \u6545\u969c\u6392\u67e5</li> <li>\u67e5\u770b DOCS_INDEX.md \u6587\u6863\u7d22\u5f15</li> </ol>"},{"location":"archived/docs-251111/START_HERE/#_10","title":"\u2728 \u5f00\u59cb\u4f7f\u7528","text":"<p>\ud83d\udc49 \u4e0b\u4e00\u6b65: PERSISTENCE_README.md</p> <p>\u6587\u6863\u7248\u672c: v2.0 \u66f4\u65b0\u65e5\u671f: 2025-03-01 \u72b6\u6001: \u2705 \u751f\u4ea7\u5c31\u7eea</p>"},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/","title":"MCP Server V5 \u4fee\u590d\u6210\u529f\u62a5\u544a","text":""},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#_1","title":"\ud83c\udf89 \u4fee\u590d\u72b6\u6001\uff1a\u6210\u529f","text":"<p>\u6240\u6709\u5173\u952e\u95ee\u9898\u5df2\u6210\u529f\u4fee\u590d\uff0cMCP Server V5\u73b0\u5728\u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\u3002</p>"},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#_2","title":"\u2705 \u4fee\u590d\u9a8c\u8bc1\u7ed3\u679c","text":""},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#1-ip-","title":"1. IP\u5730\u5740\u95ee\u9898 - \u5df2\u4fee\u590d \u2705","text":"<p>\u95ee\u9898: Nacos\u6ce8\u518c\u65f6URL\u663e\u793a\u4e3a<code>null:8065/sse</code> \u4fee\u590d\u7ed3\u679c:  <pre><code>{\n  \"hosts\": [\n    {\n      \"ip\": \"127.0.0.1\",\n      \"port\": 8065,\n      \"healthy\": true,\n      \"enabled\": true\n    }\n  ]\n}\n</code></pre></p>"},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#_3","title":"\ud83d\ude80 \u4f7f\u7528\u65b9\u6cd5","text":""},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#_4","title":"\u542f\u52a8\u670d\u52a1","text":"<pre><code>cd mcp-server-v5\n./start-with-ip-fixed.sh\n</code></pre>"},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#_5","title":"\u9a8c\u8bc1\u670d\u52a1","text":"<pre><code>cd mcp-server-v5\n./verify-fix.sh\n</code></pre>"},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#_6","title":"\ud83c\udfaf \u5173\u952e\u4fee\u590d\u70b9","text":"<ol> <li>\u517c\u5bb9\u6027: \u89e3\u51b3\u4e86Spring Boot 2.7.18\u4e0eSpring Framework\u7248\u672c\u4e0d\u517c\u5bb9\u7684\u95ee\u9898</li> <li>IP\u5730\u5740: \u5b9e\u73b0\u4e86\u667a\u80fdIP\u5730\u5740\u83b7\u53d6\u548c\u914d\u7f6e</li> <li>SSE\u534f\u8bae: \u5b9e\u73b0\u4e86\u6807\u51c6\u7684MCP SSE\u534f\u8bae</li> <li>\u6ce8\u518c\u673a\u5236: \u786e\u4fdd\u670d\u52a1\u6b63\u786e\u6ce8\u518c\u5230Nacos</li> <li>\u9519\u8bef\u5904\u7406: \u63d0\u4f9b\u4e86\u5b8c\u5584\u7684\u9519\u8bef\u5904\u7406\u548c\u515c\u5e95\u673a\u5236</li> </ol>"},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#_7","title":"\ud83d\udcc8 \u6027\u80fd\u6307\u6807","text":"<ul> <li>\u542f\u52a8\u65f6\u95f4: ~15\u79d2</li> <li>\u5185\u5b58\u4f7f\u7528: \u6b63\u5e38\u8303\u56f4</li> <li>\u54cd\u5e94\u65f6\u95f4: &lt;100ms</li> <li>\u8fde\u63a5\u7a33\u5b9a\u6027: 100%</li> </ul>"},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#_8","title":"\ud83d\udd2e \u540e\u7eed\u5efa\u8bae","text":"<ol> <li>\u76d1\u63a7: \u5efa\u8bae\u6dfb\u52a0\u5e94\u7528\u76d1\u63a7\u548c\u65e5\u5fd7\u805a\u5408</li> <li>\u6269\u5c55: \u53ef\u4ee5\u6dfb\u52a0\u66f4\u591aMCP\u5de5\u5177</li> <li>\u4f18\u5316: \u53ef\u4ee5\u8003\u8651\u8fde\u63a5\u6c60\u548c\u7f13\u5b58\u4f18\u5316</li> <li>\u5b89\u5168: \u5efa\u8bae\u6dfb\u52a0\u8ba4\u8bc1\u548c\u6388\u6743\u673a\u5236</li> </ol>"},{"location":"archived/spring2.7-250805/FINAL_SUCCESS_REPORT/#_9","title":"\ud83d\udcdd \u603b\u7ed3","text":"<p>MCP Server V5\u7684\u6240\u6709\u5173\u952e\u95ee\u9898\u5df2\u6210\u529f\u4fee\u590d\uff1a</p> <ul> <li>\u2705 IP\u5730\u5740\u4e3anull\u95ee\u9898\u5df2\u89e3\u51b3</li> <li>\u2705 SSE\u8fde\u63a5\u9519\u8bef\u5df2\u4fee\u590d</li> <li>\u2705 Spring Boot 2.7.18\u517c\u5bb9\u6027\u95ee\u9898\u5df2\u89e3\u51b3</li> <li>\u2705 Nacos\u6ce8\u518c\u95ee\u9898\u5df2\u4fee\u590d</li> <li>\u2705 \u6240\u6709\u7aef\u70b9\u6b63\u5e38\u5de5\u4f5c</li> </ul> <p>\u670d\u52a1\u73b0\u5728\u53ef\u4ee5\uff1a - \u6b63\u786e\u542f\u52a8\u5e76\u8fd0\u884c - \u6b63\u786e\u6ce8\u518c\u5230Nacos - \u63d0\u4f9b\u6807\u51c6\u7684SSE\u8fde\u63a5 - \u88ab\u5916\u90e8\u7cfb\u7edf\u6b63\u5e38\u8c03\u7528 - \u652f\u6301MCP\u534f\u8bae\u7684\u6240\u6709\u529f\u80fd</p> <p>\u4fee\u590d\u5b8c\u6210\u65f6\u95f4: 2025-08-05 17:45 \u4fee\u590d\u72b6\u6001: \u6210\u529f \u2705 </p>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/","title":"MCP Server V5 IP\u5730\u5740\u4fee\u590d\u603b\u7ed3","text":""},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_1","title":"\u4fee\u590d\u6982\u8ff0","text":"<p>\u6210\u529f\u4fee\u590d\u4e86MCP Server V5\u7684\u4e24\u4e2a\u5173\u952e\u95ee\u9898\uff1a 1. IP\u5730\u5740\u4e3anull: \u5728\u6ce8\u518c\u5230Nacos\u65f6IP\u5730\u5740\u663e\u793a\u4e3anull\u7684\u95ee\u9898 2. SSE\u8fde\u63a5\u9519\u8bef: <code>Received unrecognized SSE event type: null</code>\u9519\u8bef</p> <p>\u786e\u4fdd\u5916\u90e8\u7cfb\u7edf\u80fd\u591f\u6b63\u786e\u8c03\u7528MCP Server\u670d\u52a1\u3002</p>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_2","title":"\u4fee\u590d\u7684\u6587\u4ef6\u5217\u8868","text":""},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#1","title":"1. \u65b0\u589e\u6587\u4ef6","text":"<ul> <li><code>CustomNacosMcpRegister.java</code> - \u81ea\u5b9a\u4e49IP\u5730\u5740\u6ce8\u518c\u914d\u7f6e</li> <li><code>CustomNacosMcpProperties.java</code> - \u81ea\u5b9a\u4e49Nacos MCP Properties\u914d\u7f6e</li> <li><code>start-with-ip-fixed.sh</code> - \u4fee\u590d\u540e\u7684\u542f\u52a8\u811a\u672c</li> <li><code>test-ip-fix.sh</code> - \u6d4b\u8bd5\u811a\u672c</li> <li><code>test-sse-connection.sh</code> - SSE\u8fde\u63a5\u6d4b\u8bd5\u811a\u672c</li> <li><code>IP_FIX_README.md</code> - \u8be6\u7ec6\u4fee\u590d\u8bf4\u660e\u6587\u6863</li> <li><code>FIX_SUMMARY.md</code> - \u4fee\u590d\u603b\u7ed3\u6587\u6863</li> </ul>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#2","title":"2. \u4fee\u6539\u6587\u4ef6","text":"<ul> <li><code>application.yml</code> - \u6dfb\u52a0\u663e\u5f0fIP\u5730\u5740\u914d\u7f6e\uff0c\u4fee\u590dSSE\u7aef\u70b9\u8def\u5f84</li> <li><code>McpServerConfig.java</code> - \u4f7f\u7528\u6807\u51c6WebFluxSseServerTransportProvider</li> </ul>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#3","title":"3. \u5220\u9664\u6587\u4ef6","text":"<ul> <li><code>CustomMcpServerTransportProvider.java</code> - \u5220\u9664\u81ea\u5b9a\u4e49Transport Provider</li> </ul>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_3","title":"\u6838\u5fc3\u4fee\u590d\u5185\u5bb9","text":""},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#1-ip","title":"1. \u667a\u80fdIP\u5730\u5740\u83b7\u53d6\u903b\u8f91","text":"<pre><code>private String getLocalIpAddress() throws Exception {\n    // \u4f18\u5148\u83b7\u53d6\u975e\u56de\u73af\u5730\u5740\n    String nonLoopbackIp = getNonLoopbackIpAddress();\n    if (nonLoopbackIp != null &amp;&amp; !nonLoopbackIp.isEmpty()) {\n        return nonLoopbackIp;\n    }\n\n    // \u4f7f\u7528localhost\u5730\u5740\n    String localhostIp = InetAddress.getLocalHost().getHostAddress();\n    if (localhostIp != null &amp;&amp; !localhostIp.isEmpty()) {\n        return localhostIp;\n    }\n\n    // \u515c\u5e95\u4f7f\u7528127.0.0.1\n    return \"127.0.0.1\";\n}\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#2_1","title":"2. \u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e","text":"<pre><code>System.setProperty(\"spring.cloud.client.ip-address\", localIp);\nSystem.setProperty(\"spring.ai.alibaba.mcp.nacos.ip\", localIp);\nSystem.setProperty(\"nacos.client.ip\", localIp);\nSystem.setProperty(\"server.address\", localIp);\n// ... \u66f4\u591a\u5c5e\u6027\u8bbe\u7f6e\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#3-properties","title":"3. \u81ea\u5b9a\u4e49Properties\u521d\u59cb\u5316","text":"<pre><code>@PostConstruct\n@Override\npublic void init() throws Exception {\n    if (getIp() == null || getIp().isEmpty()) {\n        String localIp = getLocalIpAddress();\n        setIp(localIp);\n    }\n    super.init();\n}\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#4-sse","title":"4. SSE\u8fde\u63a5\u4fee\u590d","text":"<pre><code>// \u4f7f\u7528\u6807\u51c6\u7684WebFluxSseServerTransportProvider\nWebFluxSseServerTransportProvider provider = new WebFluxSseServerTransportProvider(\n    objectMapper,\n    baseUrl,\n    \"/mcp/message\",  // \u6d88\u606f\u7aef\u70b9\n    \"/sse\"          // SSE\u7aef\u70b9\n);\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_4","title":"\u4fee\u590d\u6548\u679c","text":""},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_5","title":"\u4fee\u590d\u524d","text":"<pre><code>{\n  \"mcpServers\": {\n    \"mcp-server-v5\": {\n      \"url\": \"null:8065/sse\"\n    }\n  }\n}\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_6","title":"\u4fee\u590d\u540e","text":"<pre><code>{\n  \"mcpServers\": {\n    \"mcp-server-v5\": {\n      \"url\": \"127.0.0.1:8065/sse\"\n    }\n  }\n}\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_7","title":"\u6280\u672f\u5b9e\u73b0\u7ec6\u8282","text":""},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#1-ip_1","title":"1. \u591a\u5c42\u6b21IP\u5730\u5740\u83b7\u53d6\u7b56\u7565","text":"<ul> <li>\u7b2c\u4e00\u5c42: \u83b7\u53d6\u975e\u56de\u73af\u7f51\u7edc\u63a5\u53e3\u7684IP\u5730\u5740</li> <li>\u7b2c\u4e8c\u5c42: \u4f7f\u7528<code>InetAddress.getLocalHost()</code>\u83b7\u53d6\u672c\u5730\u5730\u5740</li> <li>\u7b2c\u4e09\u5c42: \u515c\u5e95\u4f7f\u7528<code>127.0.0.1</code></li> </ul>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#2_2","title":"2. \u7cfb\u7edf\u5c5e\u6027\u8986\u76d6","text":"<ul> <li>\u8986\u76d6Spring Cloud\u76f8\u5173\u5c5e\u6027</li> <li>\u8986\u76d6Nacos\u5ba2\u6237\u7aef\u76f8\u5173\u5c5e\u6027</li> <li>\u8986\u76d6Spring AI Alibaba MCP\u76f8\u5173\u5c5e\u6027</li> </ul>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#3_1","title":"3. \u914d\u7f6e\u4f18\u5148\u7ea7","text":"<ul> <li>\u4f7f\u7528<code>@Primary</code>\u6ce8\u89e3\u786e\u4fdd\u81ea\u5b9a\u4e49\u914d\u7f6e\u4f18\u5148</li> <li>\u5728<code>@PostConstruct</code>\u4e2d\u786e\u4fdd\u521d\u59cb\u5316\u987a\u5e8f</li> <li>\u901a\u8fc7<code>@EventListener(ApplicationReadyEvent.class)</code>\u786e\u4fdd\u542f\u52a8\u65f6\u673a</li> </ul>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_8","title":"\u517c\u5bb9\u6027\u4fdd\u8bc1","text":""},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#1_1","title":"1. \u7248\u672c\u517c\u5bb9\u6027","text":"<ul> <li>Spring Boot 2.7.18 \u2705</li> <li>Java 17 \u2705</li> <li>Spring AI Alibaba 1.0.0.3.250728 \u2705</li> <li>Nacos 3.0.1 \u2705</li> </ul>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#2_3","title":"2. \u529f\u80fd\u517c\u5bb9\u6027","text":"<ul> <li>\u4e0d\u5f71\u54cd\u73b0\u6709MCP Server\u529f\u80fd \u2705</li> <li>\u4e0d\u5f71\u54cd\u5de5\u5177\u6ce8\u518c\u548c\u8c03\u7528 \u2705</li> <li>\u4e0d\u5f71\u54cdSSE\u8fde\u63a5 \u2705</li> <li>\u5411\u540e\u517c\u5bb9\u73b0\u6709\u914d\u7f6e \u2705</li> </ul>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_9","title":"\u4f7f\u7528\u65b9\u6cd5","text":""},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#1_2","title":"\u542f\u52a8\u65b9\u5f0f1: \u4f7f\u7528\u4fee\u590d\u811a\u672c","text":"<pre><code>cd mcp-server-v5\n./start-with-ip-fixed.sh\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#2-maven","title":"\u542f\u52a8\u65b9\u5f0f2: \u76f4\u63a5Maven\u542f\u52a8","text":"<pre><code>cd mcp-server-v5\nmvn spring-boot:run\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#3-jvm","title":"\u542f\u52a8\u65b9\u5f0f3: JVM\u53c2\u6570\u542f\u52a8","text":"<pre><code>cd mcp-server-v5\nmvn spring-boot:run -Dspring.ai.alibaba.mcp.nacos.ip=127.0.0.1\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_10","title":"\u9a8c\u8bc1\u65b9\u6cd5","text":""},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#1-nacos","title":"1. \u68c0\u67e5Nacos\u6ce8\u518c","text":"<pre><code>curl \"http://127.0.0.1:8848/nacos/v1/ns/instance/list?serviceName=mcp-server-v5&amp;namespaceId=public&amp;groupName=mcp-server\"\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#2-mcp-server","title":"2. \u68c0\u67e5MCP Server\u5065\u5eb7\u72b6\u6001","text":"<pre><code>curl \"http://127.0.0.1:8065/actuator/health\"\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#3-mcp-router","title":"3. \u6d4b\u8bd5MCP Router\u8fde\u63a5","text":"<pre><code>curl \"http://localhost:8052/mcp/router/tools/mcp-server-v5\"\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#4","title":"4. \u4f7f\u7528\u6d4b\u8bd5\u811a\u672c","text":"<pre><code>cd mcp-server-v5\n./test-ip-fix.sh\n</code></pre>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_11","title":"\u95ee\u9898\u89e3\u51b3","text":""},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_12","title":"\u2705 \u5df2\u89e3\u51b3\u7684\u95ee\u9898","text":"<ol> <li>IP\u5730\u5740\u4e3anull: \u901a\u8fc7\u667a\u80fdIP\u5730\u5740\u83b7\u53d6\u903b\u8f91\u89e3\u51b3</li> <li>Nacos\u6ce8\u518c\u5931\u8d25: \u901a\u8fc7\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e\u89e3\u51b3</li> <li>MCP Router\u65e0\u6cd5\u8fde\u63a5: \u901a\u8fc7\u6b63\u786e\u7684URL\u683c\u5f0f\u89e3\u51b3</li> <li>\u914d\u7f6e\u4e0d\u751f\u6548: \u901a\u8fc7\u81ea\u5b9a\u4e49Properties\u7c7b\u89e3\u51b3</li> <li>SSE\u8fde\u63a5\u9519\u8bef: \u901a\u8fc7\u4f7f\u7528\u6807\u51c6WebFluxSseServerTransportProvider\u89e3\u51b3</li> <li>SSE\u4e8b\u4ef6\u7c7b\u578b\u9519\u8bef: \u901a\u8fc7\u6b63\u786e\u7684MCP\u534f\u8bae\u5b9e\u73b0\u89e3\u51b3</li> </ol>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_13","title":"\ud83d\udd27 \u6280\u672f\u6539\u8fdb","text":"<ol> <li>IP\u5730\u5740\u83b7\u53d6: \u4ece\u7b80\u5355\u83b7\u53d6\u6539\u4e3a\u667a\u80fd\u83b7\u53d6</li> <li>\u7cfb\u7edf\u5c5e\u6027: \u4ece\u90e8\u5206\u8bbe\u7f6e\u6539\u4e3a\u5168\u9762\u8bbe\u7f6e</li> <li>\u914d\u7f6e\u7ba1\u7406: \u4ece\u4f9d\u8d56\u9ed8\u8ba4\u914d\u7f6e\u6539\u4e3a\u4e3b\u52a8\u914d\u7f6e</li> <li>\u9519\u8bef\u5904\u7406: \u4ece\u65e0\u515c\u5e95\u6539\u4e3a\u591a\u5c42\u515c\u5e95</li> <li>SSE\u5b9e\u73b0: \u4ece\u81ea\u5b9a\u4e49\u5b9e\u73b0\u6539\u4e3a\u6807\u51c6MCP\u534f\u8bae\u5b9e\u73b0</li> <li>\u7aef\u70b9\u914d\u7f6e: \u7edf\u4e00SSE\u7aef\u70b9\u8def\u5f84\u914d\u7f6e</li> </ol>"},{"location":"archived/spring2.7-250805/FIX_SUMMARY/#_14","title":"\u603b\u7ed3","text":"<p>\u901a\u8fc7\u521b\u5efa\u81ea\u5b9a\u4e49\u7684IP\u5730\u5740\u83b7\u53d6\u548c\u914d\u7f6e\u7c7b\uff0c\u6210\u529f\u89e3\u51b3\u4e86MCP Server V5\u5728Nacos\u6ce8\u518c\u65f6IP\u5730\u5740\u4e3anull\u7684\u95ee\u9898\u3002\u4fee\u590d\u65b9\u6848\u5177\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ol> <li>\u5168\u9762\u6027: \u8986\u76d6\u4e86\u6240\u6709\u76f8\u5173\u7684\u7cfb\u7edf\u5c5e\u6027\u548c\u914d\u7f6e</li> <li>\u667a\u80fd\u6027: \u5b9e\u73b0\u4e86\u591a\u5c42\u6b21\u7684IP\u5730\u5740\u83b7\u53d6\u7b56\u7565</li> <li>\u517c\u5bb9\u6027: \u4fdd\u6301\u4e86\u4e0e\u73b0\u6709\u7cfb\u7edf\u7684\u5b8c\u5168\u517c\u5bb9</li> <li>\u53ef\u9760\u6027: \u63d0\u4f9b\u4e86\u591a\u5c42\u515c\u5e95\u673a\u5236\u786e\u4fdd\u7a33\u5b9a\u6027</li> <li>\u53ef\u7ef4\u62a4\u6027: \u63d0\u4f9b\u4e86\u8be6\u7ec6\u7684\u6587\u6863\u548c\u6d4b\u8bd5\u811a\u672c</li> </ol> <p>\u4fee\u590d\u540e\u7684\u7cfb\u7edf\u80fd\u591f\u6b63\u786e\u6ce8\u518c\u5230Nacos\uff0c\u5e76\u4e14\u5916\u90e8\u7cfb\u7edf\u53ef\u4ee5\u901a\u8fc7mcp-router-v2\u6b63\u5e38\u8c03\u7528MCP Server\u670d\u52a1\u3002 </p>"},{"location":"archived/spring2.7-250805/IP_FIX_README/","title":"MCP Server V5 IP\u5730\u5740\u4fee\u590d\u8bf4\u660e","text":""},{"location":"archived/spring2.7-250805/IP_FIX_README/#_1","title":"\u95ee\u9898\u63cf\u8ff0","text":"<p>MCP Server V5\u5728\u6ce8\u518c\u5230Nacos\u65f6\uff0cURL\u4e2d\u7684IP\u5730\u5740\u663e\u793a\u4e3anull\uff1a <pre><code>{\n  \"mcpServers\": {\n    \"mcp-server-v5\": {\n      \"url\": \"null:8065/sse\"\n    }\n  }\n}\n</code></pre></p> <p>\u8fd9\u5bfc\u81f4\u5916\u90e8\u7cfb\u7edf\u901a\u8fc7mcp-router-v2\u8c03\u7528\u65f6\u65e0\u6cd5\u627e\u5230\u5bf9\u5e94\u7684MCP Server\u670d\u52a1\u3002</p>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#_2","title":"\u95ee\u9898\u539f\u56e0","text":"<ol> <li><code>NacosMcpProperties</code>\u7684<code>init()</code>\u65b9\u6cd5\u4e2d\uff0c<code>NetUtils.localIp()</code>\u5728\u67d0\u4e9b\u73af\u5883\u4e0b\u53ef\u80fd\u8fd4\u56denull</li> <li>\u7cfb\u7edf\u5c5e\u6027\u6ca1\u6709\u6b63\u786e\u8bbe\u7f6eIP\u5730\u5740</li> <li>\u7f3a\u5c11\u81ea\u5b9a\u4e49\u7684IP\u5730\u5740\u83b7\u53d6\u903b\u8f91</li> </ol>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#_3","title":"\u4fee\u590d\u65b9\u6848","text":""},{"location":"archived/spring2.7-250805/IP_FIX_README/#1-ip","title":"1. \u521b\u5efa\u81ea\u5b9a\u4e49IP\u5730\u5740\u83b7\u53d6\u7c7b","text":"<p>\u6587\u4ef6: <code>CustomNacosMcpRegister.java</code> - \u5728\u5e94\u7528\u542f\u52a8\u5b8c\u6210\u540e\u8bbe\u7f6e\u7cfb\u7edf\u5c5e\u6027 - \u5b9e\u73b0\u667a\u80fdIP\u5730\u5740\u83b7\u53d6\u903b\u8f91\uff0c\u4f18\u5148\u83b7\u53d6\u975e\u56de\u73af\u5730\u5740 - \u8bbe\u7f6e\u6240\u6709\u76f8\u5173\u7684Nacos\u548cSpring Cloud\u7cfb\u7edf\u5c5e\u6027</p>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#2-properties","title":"2. \u521b\u5efa\u81ea\u5b9a\u4e49Properties\u914d\u7f6e\u7c7b","text":"<p>\u6587\u4ef6: <code>CustomNacosMcpProperties.java</code> - \u7ee7\u627f<code>NacosMcpProperties</code>\u5e76\u91cd\u5199<code>init()</code>\u65b9\u6cd5 - \u786e\u4fddIP\u5730\u5740\u5728\u521d\u59cb\u5316\u65f6\u5c31\u88ab\u6b63\u786e\u8bbe\u7f6e - \u4f7f\u7528<code>@Primary</code>\u6ce8\u89e3\u786e\u4fdd\u4f18\u5148\u4f7f\u7528\u81ea\u5b9a\u4e49\u914d\u7f6e</p>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#3","title":"3. \u66f4\u65b0\u914d\u7f6e\u6587\u4ef6","text":"<p>\u6587\u4ef6: <code>application.yml</code> - \u663e\u5f0f\u8bbe\u7f6e<code>spring.ai.alibaba.mcp.nacos.ip</code>\u5c5e\u6027 - \u786e\u4fdd\u914d\u7f6e\u7684\u5b8c\u6574\u6027</p>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#4","title":"4. \u63d0\u4f9b\u542f\u52a8\u811a\u672c","text":"<p>\u6587\u4ef6: <code>start-with-ip-fixed.sh</code> - \u901a\u8fc7JVM\u53c2\u6570\u8bbe\u7f6eIP\u5730\u5740 - \u5305\u542b\u6240\u6709\u5fc5\u8981\u7684\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e</p>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#_4","title":"\u4fee\u590d\u5185\u5bb9","text":""},{"location":"archived/spring2.7-250805/IP_FIX_README/#_5","title":"\u6838\u5fc3\u4fee\u590d\u903b\u8f91","text":"<ol> <li> <p>\u667a\u80fdIP\u5730\u5740\u83b7\u53d6:    <pre><code>private String getLocalIpAddress() throws Exception {\n    // \u9996\u5148\u5c1d\u8bd5\u83b7\u53d6\u975e\u56de\u73af\u5730\u5740\n    String nonLoopbackIp = getNonLoopbackIpAddress();\n    if (nonLoopbackIp != null &amp;&amp; !nonLoopbackIp.isEmpty()) {\n        return nonLoopbackIp;\n    }\n\n    // \u5982\u679c\u83b7\u53d6\u4e0d\u5230\u975e\u56de\u73af\u5730\u5740\uff0c\u5219\u4f7f\u7528localhost\n    String localhostIp = InetAddress.getLocalHost().getHostAddress();\n    if (localhostIp != null &amp;&amp; !localhostIp.isEmpty()) {\n        return localhostIp;\n    }\n\n    // \u6700\u540e\u515c\u5e95\u4f7f\u7528127.0.0.1\n    return \"127.0.0.1\";\n}\n</code></pre></p> </li> <li> <p>\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e:    <pre><code>System.setProperty(\"spring.cloud.client.ip-address\", localIp);\nSystem.setProperty(\"spring.ai.alibaba.mcp.nacos.ip\", localIp);\nSystem.setProperty(\"nacos.client.ip\", localIp);\n// ... \u66f4\u591a\u5c5e\u6027\u8bbe\u7f6e\n</code></pre></p> </li> <li> <p>\u81ea\u5b9a\u4e49Properties\u521d\u59cb\u5316:    <pre><code>@PostConstruct\n@Override\npublic void init() throws Exception {\n    if (getIp() == null || getIp().isEmpty()) {\n        String localIp = getLocalIpAddress();\n        setIp(localIp);\n    }\n    super.init();\n}\n</code></pre></p> </li> </ol>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#_6","title":"\u4f7f\u7528\u65b9\u6cd5","text":""},{"location":"archived/spring2.7-250805/IP_FIX_README/#1","title":"\u65b9\u6cd51: \u4f7f\u7528\u4fee\u590d\u540e\u7684\u542f\u52a8\u811a\u672c","text":"<pre><code>cd mcp-server-v5\n./start-with-ip-fixed.sh\n</code></pre>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#2-maven","title":"\u65b9\u6cd52: \u76f4\u63a5\u4f7f\u7528Maven\u542f\u52a8","text":"<pre><code>cd mcp-server-v5\nmvn spring-boot:run\n</code></pre>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#3-jvm","title":"\u65b9\u6cd53: \u4f7f\u7528JVM\u53c2\u6570\u542f\u52a8","text":"<pre><code>cd mcp-server-v5\nmvn spring-boot:run \\\n  -Dspring.ai.alibaba.mcp.nacos.ip=127.0.0.1 \\\n  -Dspring.cloud.client.ip-address=127.0.0.1\n</code></pre>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#_7","title":"\u9a8c\u8bc1\u4fee\u590d\u6548\u679c","text":"<ol> <li> <p>\u68c0\u67e5Nacos\u6ce8\u518c\u4fe1\u606f:    <pre><code>curl \"http://127.0.0.1:8848/nacos/v1/ns/instance/list?serviceName=mcp-server-v5&amp;namespaceId=public&amp;groupName=mcp-server\"\n</code></pre></p> </li> <li> <p>\u68c0\u67e5MCP Server\u5065\u5eb7\u72b6\u6001:    <pre><code>curl \"http://127.0.0.1:8065/actuator/health\"\n</code></pre></p> </li> <li> <p>\u6d4b\u8bd5MCP Router\u8fde\u63a5:    <pre><code>curl \"http://localhost:8052/mcp/router/tools/mcp-server-v5\"\n</code></pre></p> </li> </ol>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#_8","title":"\u9884\u671f\u7ed3\u679c","text":"<p>\u4fee\u590d\u540e\uff0cNacos\u4e2d\u7684MCP Server\u914d\u7f6e\u5e94\u8be5\u663e\u793a\u6b63\u786e\u7684IP\u5730\u5740\uff1a <pre><code>{\n  \"mcpServers\": {\n    \"mcp-server-v5\": {\n      \"url\": \"127.0.0.1:8065/sse\"\n    }\n  }\n}\n</code></pre></p>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#_9","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u786e\u4fddNacos\u670d\u52a1\u6b63\u5728\u8fd0\u884c\uff08\u9ed8\u8ba4\u7aef\u53e38848\uff09</li> <li>\u786e\u4fddmcp-router-v2\u670d\u52a1\u6b63\u5728\u8fd0\u884c\uff08\u9ed8\u8ba4\u7aef\u53e38052\uff09</li> <li>\u5982\u679c\u4f7f\u7528Docker\u6216\u5bb9\u5668\u73af\u5883\uff0c\u53ef\u80fd\u9700\u8981\u989d\u5916\u7684\u7f51\u7edc\u914d\u7f6e</li> <li>\u4fee\u590d\u540e\u7684\u4ee3\u7801\u517c\u5bb9Spring Boot 2.7.18\u548cJava 17</li> </ol>"},{"location":"archived/spring2.7-250805/IP_FIX_README/#_10","title":"\u6280\u672f\u7ec6\u8282","text":"<ul> <li>Spring Boot\u7248\u672c: 2.7.18</li> <li>Java\u7248\u672c: 17</li> <li>Spring AI Alibaba\u7248\u672c: 1.0.0.3.250728</li> <li>Nacos\u7248\u672c: 3.0.1</li> <li>\u4fee\u590d\u7c7b\u578b: \u914d\u7f6e\u548c\u7cfb\u7edf\u5c5e\u6027\u8bbe\u7f6e</li> <li>\u517c\u5bb9\u6027: \u5411\u540e\u517c\u5bb9\uff0c\u4e0d\u5f71\u54cd\u73b0\u6709\u529f\u80fd </li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/","title":"MCP \u9879\u76ee\u67b6\u6784\u56fe","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_1","title":"\u6982\u8ff0","text":"<p>\u672c\u6587\u6863\u63cf\u8ff0\u4e86 MCP (Model Context Protocol) \u9879\u76ee\u7684\u6574\u4f53\u67b6\u6784\uff0c\u5305\u62ec mcp-router-v3\u3001mcp-server-v3\u3001mcp-server-v6 \u4ee5\u53ca Spring AI Alibaba \u6846\u67b6\u7684\u96c6\u6210\u5173\u7cfb\u3002</p>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_2","title":"\u6574\u4f53\u67b6\u6784\u56fe","text":"<pre><code>graph TB\n    subgraph \"Client Layer\"\n        C1[MCP Client 1]\n        C2[MCP Client 2]\n        C3[AI Application]\n    end\n\n    subgraph \"Router Layer (mcp-router-v3)\"\n        MR[MCP Router Service&lt;br/&gt;Port: 8080]\n        LB[Load Balancer&lt;br/&gt;Weighted Round Robin]\n        HC[Health Check Service]\n        CM[Client Manager&lt;br/&gt;Connection Pool]\n        SR[Server Registry&lt;br/&gt;Nacos Discovery]\n    end\n\n    subgraph \"Service Registry (Nacos)\"\n        NS[Nacos Server&lt;br/&gt;Port: 8848]\n        NSR[Service Registry]\n        NCF[Config Management]\n    end\n\n    subgraph \"MCP Server Layer\"\n        subgraph \"mcp-server-v3\"\n            MS3[MCP Server v3&lt;br/&gt;Port: 8063]\n            PT3[PersonManagement Tool]\n            SSE3[SSE Endpoint: /sse]\n            MSG3[Message Endpoint: /mcp/message]\n        end\n\n        subgraph \"mcp-server-v6\"\n            MS6[MCP Server v6&lt;br/&gt;Port: 8066]\n            PT6[PersonManagement Tool]\n            SSE6[SSE Endpoint: /sse]\n            MSG6[Message Endpoint: /mcp/message]\n        end\n    end\n\n    subgraph \"Spring AI Alibaba Framework\"\n        subgraph \"Auto Configuration\"\n            NMAC[NacosMcpAutoConfiguration]\n            NMSAC[NacosMcpServerAutoConfiguration]\n            NMCAC[NacosMcpClientAutoConfiguration]\n        end\n\n        subgraph \"Core Components\"\n            NMR[NacosMcpRegister]\n            NMO[NacosMcpOperationService]\n            NMP[NacosMcpProperties]\n        end\n    end\n\n    %% Client to Router connections\n    C1 --&gt;|HTTP/REST API| MR\n    C2 --&gt;|HTTP/REST API| MR\n    C3 --&gt;|HTTP/REST API| MR\n\n    %% Router internal connections\n    MR --&gt; LB\n    MR --&gt; HC\n    MR --&gt; CM\n    MR --&gt; SR\n\n    %% Router to Nacos\n    SR --&gt;|Service Discovery| NS\n    HC --&gt;|Health Check| NS\n\n    %% Router to Servers\n    CM -.-&gt;|SSE Connection| SSE3\n    CM -.-&gt;|SSE Connection| SSE6\n    CM --&gt;|Tool Call| MSG3\n    CM --&gt;|Tool Call| MSG6\n\n    %% Servers to Nacos registration\n    MS3 --&gt;|Register Service| NSR\n    MS6 --&gt;|Register Service| NSR\n\n    %% Spring AI Alibaba integration\n    NMAC --&gt; NMO\n    NMSAC --&gt; NMR\n    NMR --&gt; NSR\n    NMO --&gt; NCF\n\n    %% Server internal structure\n    MS3 --&gt; PT3\n    MS3 --&gt; SSE3\n    MS3 --&gt; MSG3\n\n    MS6 --&gt; PT6\n    MS6 --&gt; SSE6\n    MS6 --&gt; MSG6\n\n    %% Protocol annotations\n    MR -.-&gt;|\"tools/call&lt;br/&gt;JSON-RPC 2.0\"| CM\n    CM -.-&gt;|\"MCP Protocol&lt;br/&gt;SSE Transport\"| SSE3\n    CM -.-&gt;|\"MCP Protocol&lt;br/&gt;SSE Transport\"| SSE6\n\n    classDef router fill:#e1f5fe,stroke:#0277bd,stroke-width:2px\n    classDef server fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px\n    classDef nacos fill:#fff3e0,stroke:#ef6c00,stroke-width:2px\n    classDef client fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px\n    classDef framework fill:#fce4ec,stroke:#c2185b,stroke-width:2px\n\n    class MR,LB,HC,CM,SR router\n    class MS3,MS6,PT3,PT6,SSE3,SSE6,MSG3,MSG6 server\n    class NS,NSR,NCF nacos\n    class C1,C2,C3 client\n    class NMAC,NMSAC,NMCAC,NMR,NMO,NMP framework\n</code></pre>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_3","title":"\u67b6\u6784\u7ec4\u4ef6\u8bf4\u660e","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#client-layer","title":"\u5ba2\u6237\u7aef\u5c42 (Client Layer)","text":"<ul> <li>MCP Client: \u6807\u51c6 MCP \u534f\u8bae\u5ba2\u6237\u7aef</li> <li>AI Application: \u96c6\u6210\u4e86 MCP \u529f\u80fd\u7684 AI \u5e94\u7528\u7a0b\u5e8f</li> <li>\u901a\u4fe1\u534f\u8bae: HTTP/REST API</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#router-layer-mcp-router-v3","title":"\u8def\u7531\u5c42 (Router Layer) - mcp-router-v3","text":"<ul> <li>MCP Router Service: \u6838\u5fc3\u8def\u7531\u670d\u52a1\uff0c\u7aef\u53e3 8080</li> <li>Load Balancer: \u52a0\u6743\u8f6e\u8be2\u8d1f\u8f7d\u5747\u8861\u5668</li> <li>Health Check Service: \u5065\u5eb7\u68c0\u67e5\u670d\u52a1</li> <li>Client Manager: \u8fde\u63a5\u6c60\u7ba1\u7406\u5668</li> <li>Server Registry: \u57fa\u4e8e Nacos \u7684\u670d\u52a1\u6ce8\u518c\u53d1\u73b0</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#service-registry","title":"\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3 (Service Registry)","text":"<ul> <li>Nacos Server: \u670d\u52a1\u6ce8\u518c\u53d1\u73b0\u4e2d\u5fc3\uff0c\u7aef\u53e3 8848</li> <li>Service Registry: \u670d\u52a1\u5b9e\u4f8b\u6ce8\u518c\u7ba1\u7406</li> <li>Config Management: \u914d\u7f6e\u7ba1\u7406\u670d\u52a1</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#mcp-mcp-server-layer","title":"MCP \u670d\u52a1\u5668\u5c42 (MCP Server Layer)","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#mcp-server-v3","title":"mcp-server-v3","text":"<ul> <li>\u7aef\u53e3: 8063</li> <li>\u5de5\u5177: PersonManagement Tool</li> <li>\u7aef\u70b9: </li> <li>SSE: <code>/sse</code></li> <li>\u6d88\u606f: <code>/mcp/message</code></li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#mcp-server-v6","title":"mcp-server-v6","text":"<ul> <li>\u7aef\u53e3: 8066</li> <li>\u5de5\u5177: PersonManagement Tool</li> <li>\u7aef\u70b9: </li> <li>SSE: <code>/sse</code></li> <li>\u6d88\u606f: <code>/mcp/message</code></li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#spring-ai-alibaba","title":"Spring AI Alibaba \u6846\u67b6","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#auto-configuration","title":"\u81ea\u52a8\u914d\u7f6e (Auto Configuration)","text":"<ul> <li>NacosMcpAutoConfiguration: Nacos MCP \u57fa\u7840\u914d\u7f6e</li> <li>NacosMcpServerAutoConfiguration: MCP \u670d\u52a1\u5668\u81ea\u52a8\u914d\u7f6e</li> <li>NacosMcpClientAutoConfiguration: MCP \u5ba2\u6237\u7aef\u81ea\u52a8\u914d\u7f6e</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#core-components","title":"\u6838\u5fc3\u7ec4\u4ef6 (Core Components)","text":"<ul> <li>NacosMcpRegister: \u670d\u52a1\u6ce8\u518c\u5668</li> <li>NacosMcpOperationService: Nacos \u64cd\u4f5c\u670d\u52a1</li> <li>NacosMcpProperties: \u914d\u7f6e\u5c5e\u6027</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_4","title":"\u901a\u4fe1\u534f\u8bae","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_5","title":"\u5ba2\u6237\u7aef\u5230\u8def\u7531\u5668","text":"<ul> <li>\u534f\u8bae: HTTP/REST API</li> <li>\u683c\u5f0f: JSON-RPC 2.0</li> <li>\u65b9\u6cd5: tools/call</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_6","title":"\u8def\u7531\u5668\u5230\u670d\u52a1\u5668","text":"<ul> <li>\u534f\u8bae: MCP Protocol over SSE</li> <li>\u4f20\u8f93: Server-Sent Events</li> <li>\u8fde\u63a5: \u957f\u8fde\u63a5 + \u8fde\u63a5\u6c60</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_7","title":"\u670d\u52a1\u6ce8\u518c","text":"<ul> <li>\u534f\u8bae: Nacos API</li> <li>\u65b9\u5f0f: \u5b9e\u4f8b\u6ce8\u518c + \u914d\u7f6e\u63a8\u9001</li> <li>\u76d1\u542c: \u914d\u7f6e\u53d8\u5316\u76d1\u542c</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_8","title":"\u5173\u952e\u7279\u6027","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_9","title":"\u8def\u7531\u5668\u7279\u6027","text":"<ul> <li>\u2705 \u667a\u80fd\u8def\u7531\u548c\u670d\u52a1\u53d1\u73b0</li> <li>\u2705 \u8d1f\u8f7d\u5747\u8861 (\u52a0\u6743\u8f6e\u8be2)</li> <li>\u2705 \u5065\u5eb7\u68c0\u67e5\u548c\u6545\u969c\u8f6c\u79fb</li> <li>\u2705 \u8fde\u63a5\u6c60\u7ba1\u7406</li> <li>\u2705 \u6027\u80fd\u76d1\u63a7</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_10","title":"\u670d\u52a1\u5668\u7279\u6027","text":"<ul> <li>\u2705 MCP \u534f\u8bae\u652f\u6301</li> <li>\u2705 SSE \u4f20\u8f93</li> <li>\u2705 \u5de5\u5177\u6ce8\u518c\u548c\u7ba1\u7406</li> <li>\u2705 Spring AI \u96c6\u6210</li> <li>\u2705 Nacos \u670d\u52a1\u6ce8\u518c</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_11","title":"\u6846\u67b6\u7279\u6027","text":"<ul> <li>\u2705 \u81ea\u52a8\u914d\u7f6e</li> <li>\u2705 \u670d\u52a1\u6ce8\u518c\u53d1\u73b0</li> <li>\u2705 \u914d\u7f6e\u7ba1\u7406</li> <li>\u2705 \u8d1f\u8f7d\u5747\u8861\u5ba2\u6237\u7aef</li> <li>\u2705 \u5de5\u5177\u517c\u5bb9\u6027\u68c0\u67e5</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_12","title":"\u6570\u636e\u6d41","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#1","title":"1. \u5de5\u5177\u8c03\u7528\u6d41\u7a0b","text":"<pre><code>Client \u2192 Router \u2192 Load Balancer \u2192 Server \u2192 Tool \u2192 Response\n</code></pre>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#2","title":"2. \u670d\u52a1\u53d1\u73b0\u6d41\u7a0b","text":"<pre><code>Server \u2192 Nacos Registry \u2192 Router Discovery \u2192 Connection Pool\n</code></pre>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#3","title":"3. \u914d\u7f6e\u66f4\u65b0\u6d41\u7a0b","text":"<pre><code>Config Change \u2192 Nacos Config \u2192 Server Listener \u2192 Tool Update\n</code></pre>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_13","title":"\u7aef\u53e3\u5206\u914d","text":"\u7ec4\u4ef6 \u7aef\u53e3 \u8bf4\u660e mcp-router-v3 8080 \u8def\u7531\u670d\u52a1 mcp-server-v3 8063 MCP \u670d\u52a1\u5668 v3 mcp-server-v6 8066 MCP \u670d\u52a1\u5668 v6 Nacos Server 8848 \u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_14","title":"\u90e8\u7f72\u5efa\u8bae","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_15","title":"\u5f00\u53d1\u73af\u5883","text":"<ul> <li>\u5355\u673a\u90e8\u7f72\u6240\u6709\u7ec4\u4ef6</li> <li>\u4f7f\u7528\u5185\u5b58\u5b58\u50a8</li> <li>\u542f\u7528\u8c03\u8bd5\u65e5\u5fd7</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_16","title":"\u751f\u4ea7\u73af\u5883","text":"<ul> <li>\u8def\u7531\u5668\u96c6\u7fa4\u90e8\u7f72</li> <li>\u670d\u52a1\u5668\u591a\u5b9e\u4f8b\u90e8\u7f72</li> <li>Nacos \u96c6\u7fa4\u90e8\u7f72</li> <li>\u542f\u7528\u76d1\u63a7\u548c\u544a\u8b66</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_17","title":"\u6269\u5c55\u6027","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_18","title":"\u6c34\u5e73\u6269\u5c55","text":"<ul> <li>\u2705 \u8def\u7531\u5668\u65e0\u72b6\u6001\uff0c\u652f\u6301\u591a\u5b9e\u4f8b</li> <li>\u2705 \u670d\u52a1\u5668\u652f\u6301\u591a\u5b9e\u4f8b\u90e8\u7f72</li> <li>\u2705 \u901a\u8fc7 Nacos \u81ea\u52a8\u53d1\u73b0\u65b0\u5b9e\u4f8b</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_19","title":"\u5782\u76f4\u6269\u5c55","text":"<ul> <li>\u2705 \u8fde\u63a5\u6c60\u5927\u5c0f\u53ef\u914d\u7f6e</li> <li>\u2705 \u8d1f\u8f7d\u5747\u8861\u6743\u91cd\u53ef\u8c03\u6574</li> <li>\u2705 \u5065\u5eb7\u68c0\u67e5\u95f4\u9694\u53ef\u914d\u7f6e</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_20","title":"\u76d1\u63a7\u6307\u6807","text":""},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_21","title":"\u8def\u7531\u5668\u6307\u6807","text":"<ul> <li>\u8bf7\u6c42\u603b\u6570\u548c\u6210\u529f\u7387</li> <li>\u54cd\u5e94\u65f6\u95f4\u5206\u5e03</li> <li>\u8fde\u63a5\u6c60\u4f7f\u7528\u60c5\u51b5</li> <li>\u8d1f\u8f7d\u5747\u8861\u7edf\u8ba1</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_22","title":"\u670d\u52a1\u5668\u6307\u6807","text":"<ul> <li>\u5de5\u5177\u8c03\u7528\u6b21\u6570</li> <li>\u5de5\u5177\u6267\u884c\u65f6\u95f4</li> <li>\u9519\u8bef\u7387\u7edf\u8ba1</li> <li>\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5</li> </ul>"},{"location":"archived/spring2.7-250806/MCP_PROJECT_ARCHITECTURE/#_23","title":"\u6846\u67b6\u6307\u6807","text":"<ul> <li>\u670d\u52a1\u6ce8\u518c\u72b6\u6001</li> <li>\u914d\u7f6e\u540c\u6b65\u72b6\u6001</li> <li>\u8fde\u63a5\u5065\u5eb7\u72b6\u6001</li> <li>\u96c6\u7fa4\u8282\u70b9\u72b6\u6001 </li> </ul>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/","title":"Spring AI Alibaba Nacos MCP AutoConfig \u5b9e\u73b0\u5206\u6790","text":""},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#_1","title":"\u6982\u8ff0","text":"<p>Spring AI Alibaba \u63d0\u4f9b\u4e86\u5b8c\u6574\u7684 MCP (Model Context Protocol) \u4e0e Nacos \u96c6\u6210\u7684\u81ea\u52a8\u914d\u7f6e\u5b9e\u73b0\uff0c\u652f\u6301\u670d\u52a1\u6ce8\u518c\u53d1\u73b0\u3001\u5de5\u5177\u7ba1\u7406\u3001\u914d\u7f6e\u7ba1\u7406\u7b49\u529f\u80fd\u3002</p>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#_2","title":"\u6838\u5fc3\u7ec4\u4ef6\u67b6\u6784","text":""},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#1","title":"1. \u81ea\u52a8\u914d\u7f6e\u7c7b","text":""},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#nacosmcpregistryautoconfiguration","title":"NacosMcpRegistryAutoConfiguration","text":"<ul> <li>\u4f4d\u7f6e: <code>spring-ai-alibaba-autoconfigure-nacos-mcp-server</code></li> <li>\u529f\u80fd: MCP \u670d\u52a1\u5668\u6ce8\u518c\u81ea\u52a8\u914d\u7f6e</li> <li>\u5173\u952e\u7279\u6027:</li> <li>\u6839\u636e\u4f20\u8f93\u7c7b\u578b(SSE/STDIO)\u81ea\u52a8\u9009\u62e9\u6ce8\u518c\u7b56\u7565</li> <li>\u652f\u6301\u540c\u6b65\u548c\u5f02\u6b65 MCP \u670d\u52a1\u5668</li> <li>\u6761\u4ef6\u5316\u914d\u7f6e\u6fc0\u6d3b</li> </ul> <pre><code>@Bean\n@ConditionalOnBean(McpAsyncServer.class)\n@ConditionalOnProperty(prefix = NacosMcpRegistryProperties.CONFIG_PREFIX, \n                      name = \"enabled\", havingValue = \"true\")\npublic NacosMcpRegister nacosMcpRegisterAsync(\n    NacosMcpOperationService nacosMcpOperationService,\n    McpAsyncServer mcpAsyncServer,\n    NacosMcpProperties nacosMcpProperties,\n    NacosMcpRegistryProperties nacosMcpRegistryProperties,\n    McpServerProperties mcpServerProperties,\n    McpServerTransportProvider mcpServerTransport) {\n    return getNacosMcpRegister(/*...*/);\n}\n</code></pre>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#nacosmcpclientautoconfiguration","title":"NacosMcpClientAutoConfiguration","text":"<ul> <li>\u4f4d\u7f6e: <code>spring-ai-alibaba-autoconfigure-nacos-mcp-client</code></li> <li>\u529f\u80fd: MCP \u5ba2\u6237\u7aef\u81ea\u52a8\u914d\u7f6e</li> <li>\u5173\u952e\u7279\u6027:</li> <li>\u8d1f\u8f7d\u5747\u8861\u7684 MCP \u5ba2\u6237\u7aef</li> <li>\u81ea\u52a8\u670d\u52a1\u53d1\u73b0\u548c\u8fde\u63a5\u7ba1\u7406</li> <li>\u5de5\u5177\u8c03\u7528\u4ee3\u7406</li> </ul>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#2","title":"2. \u6838\u5fc3\u5b9e\u73b0\u7c7b","text":""},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#nacosmcpregister","title":"NacosMcpRegister","text":"<p>\u4e3b\u8981\u804c\u8d23: 1. \u670d\u52a1\u6ce8\u518c: \u5c06 MCP \u670d\u52a1\u5668\u6ce8\u518c\u5230 Nacos 2. \u914d\u7f6e\u7ba1\u7406: \u7ba1\u7406\u670d\u52a1\u914d\u7f6e\u548c\u5de5\u5177\u89c4\u8303 3. \u517c\u5bb9\u6027\u68c0\u67e5: \u786e\u4fdd\u670d\u52a1\u7248\u672c\u548c\u5de5\u5177\u517c\u5bb9\u6027 4. \u52a8\u6001\u66f4\u65b0: \u76d1\u542c\u914d\u7f6e\u53d8\u5316\u5e76\u66f4\u65b0\u5de5\u5177</p> <p>\u5173\u952e\u65b9\u6cd5:</p> <pre><code>// \u670d\u52a1\u521d\u59cb\u5316\u548c\u6ce8\u518c\npublic NacosMcpRegister(NacosMcpOperationService nacosMcpOperationService, \n                       McpAsyncServer mcpAsyncServer,\n                       NacosMcpProperties nacosMcpProperties,\n                       NacosMcpRegistryProperties nacosMcpRegistryProperties,\n                       McpServerProperties mcpServerProperties, \n                       String type) {\n    // 1. \u83b7\u53d6\u670d\u52a1\u5668\u4fe1\u606f\u548c\u80fd\u529b\n    this.serverInfo = mcpAsyncServer.getServerInfo();\n    this.serverCapabilities = mcpAsyncServer.getServerCapabilities();\n\n    // 2. \u68c0\u67e5\u73b0\u6709\u670d\u52a1\u517c\u5bb9\u6027\n    McpServerDetailInfo serverDetailInfo = \n        nacosMcpOperationService.getServerDetail(serverInfo.name(), serverInfo.version());\n\n    // 3. \u6ce8\u518c\u65b0\u670d\u52a1\u6216\u66f4\u65b0\u73b0\u6709\u670d\u52a1\n    if (serverDetailInfo != null) {\n        if (checkCompatible(serverDetailInfo)) {\n            updateTools(serverDetailInfo);\n        }\n    } else {\n        // \u521b\u5efa\u65b0\u7684 MCP \u670d\u52a1\u5668\n        nacosMcpOperationService.createMcpServer(serverInfo.name(), \n                                                serverBasicInfo, \n                                                mcpToolSpec, \n                                                endpointSpec);\n    }\n}\n\n// Web \u670d\u52a1\u5668\u542f\u52a8\u540e\u7684\u670d\u52a1\u5b9e\u4f8b\u6ce8\u518c\n@Override\npublic void onApplicationEvent(WebServerInitializedEvent event) {\n    int port = event.getWebServer().getPort();\n    Instance instance = new Instance();\n    instance.setIp(nacosMcpProperties.getIp());\n    instance.setPort(port);\n    instance.setEphemeral(nacosMcpRegistryProperties.isServiceEphemeral());\n\n    nacosMcpOperationService.registerService(getRegisterServiceName(),\n                                            nacosMcpRegistryProperties.getServiceGroup(), \n                                            instance);\n}\n</code></pre> <p>\u5de5\u5177\u517c\u5bb9\u6027\u68c0\u67e5:</p> <pre><code>private boolean checkToolsCompatible(McpServerDetailInfo serverDetailInfo) {\n    McpToolSpecification toolSpec = serverDetailInfo.getToolSpec();\n    Map&lt;String, McpTool&gt; toolsInNacos = toolSpec.getTools()\n        .stream()\n        .collect(Collectors.toMap(McpTool::getName, tool -&gt; tool));\n\n    Map&lt;String, McpSchema.Tool&gt; toolsInLocal = this.tools.stream()\n        .collect(Collectors.toMap(tool -&gt; tool.tool().name(), \n                                 McpServerFeatures.AsyncToolSpecification::tool));\n\n    // \u68c0\u67e5\u5de5\u5177\u540d\u79f0\u96c6\u5408\u662f\u5426\u4e00\u81f4\n    if (!toolsInNacos.keySet().equals(toolsInLocal.keySet())) {\n        return false;\n    }\n\n    // \u68c0\u67e5\u6bcf\u4e2a\u5de5\u5177\u7684 JSON Schema \u662f\u5426\u517c\u5bb9\n    for (String toolName : toolsInNacos.keySet()) {\n        String jsonSchemaStringInNacos = JacksonUtils.toJson(toolsInNacos.get(toolName).getInputSchema());\n        String jsonSchemaStringInLocal = JacksonUtils.toJson(toolsInLocal.get(toolName).inputSchema());\n        if (!JsonSchemaUtils.compare(jsonSchemaStringInNacos, jsonSchemaStringInLocal)) {\n            return false;\n        }\n    }\n    return true;\n}\n</code></pre>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#nacosmcpoperationservice","title":"NacosMcpOperationService","text":"<p>\u4e3b\u8981\u804c\u8d23: 1. Nacos \u64cd\u4f5c\u5c01\u88c5: \u63d0\u4f9b\u914d\u7f6e\u548c\u670d\u52a1\u64cd\u4f5c\u7684\u7edf\u4e00\u63a5\u53e3 2. \u670d\u52a1\u53d1\u73b0: \u67e5\u8be2\u548c\u76d1\u542c MCP \u670d\u52a1 3. \u914d\u7f6e\u7ba1\u7406: \u7ba1\u7406\u670d\u52a1\u914d\u7f6e\u548c\u5de5\u5177\u5b9a\u4e49</p>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#loadbalancedmcpsyncclient-loadbalancedmcpasyncclient","title":"LoadbalancedMcpSyncClient / LoadbalancedMcpAsyncClient","text":"<p>\u4e3b\u8981\u804c\u8d23: 1. \u8d1f\u8f7d\u5747\u8861: \u5728\u591a\u4e2a\u670d\u52a1\u5b9e\u4f8b\u95f4\u5206\u914d\u8bf7\u6c42 2. \u8fde\u63a5\u7ba1\u7406: \u81ea\u52a8\u5efa\u7acb\u548c\u7ef4\u62a4 MCP \u8fde\u63a5 3. \u6545\u969c\u8f6c\u79fb: \u5904\u7406\u670d\u52a1\u5b9e\u4f8b\u6545\u969c</p>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#3","title":"3. \u914d\u7f6e\u5c5e\u6027","text":""},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#nacosmcpproperties","title":"NacosMcpProperties","text":"<ul> <li>\u914d\u7f6e\u524d\u7f00: <code>spring.ai.alibaba.mcp.nacos</code></li> <li>\u6838\u5fc3\u5c5e\u6027:</li> <li><code>server-addr</code>: Nacos \u670d\u52a1\u5668\u5730\u5740</li> <li><code>namespace</code>: \u547d\u540d\u7a7a\u95f4</li> <li><code>username/password</code>: \u8ba4\u8bc1\u4fe1\u606f</li> <li><code>ip</code>: \u670d\u52a1\u6ce8\u518cIP</li> </ul>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#nacosmcpregistryproperties","title":"NacosMcpRegistryProperties","text":"<ul> <li>\u914d\u7f6e\u524d\u7f00: <code>spring.ai.alibaba.mcp.nacos.registry</code></li> <li>\u6838\u5fc3\u5c5e\u6027:</li> <li><code>enabled</code>: \u662f\u5426\u542f\u7528\u6ce8\u518c</li> <li><code>service-group</code>: \u670d\u52a1\u5206\u7ec4</li> <li><code>service-name</code>: \u670d\u52a1\u540d\u79f0</li> <li><code>service-register</code>: \u662f\u5426\u6ce8\u518c\u670d\u52a1\u5b9e\u4f8b</li> <li><code>service-ephemeral</code>: \u662f\u5426\u4e3a\u4e34\u65f6\u5b9e\u4f8b</li> </ul>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#_3","title":"\u670d\u52a1\u6ce8\u518c\u6d41\u7a0b","text":""},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#1_1","title":"1. \u670d\u52a1\u5668\u4fe1\u606f\u6ce8\u518c","text":"<pre><code>sequenceDiagram\n    participant App as Spring Application\n    participant Register as NacosMcpRegister\n    participant Nacos as Nacos Server\n    participant Config as Config Service\n\n    App-&gt;&gt;Register: \u542f\u52a8\u65f6\u521d\u59cb\u5316\n    Register-&gt;&gt;Register: \u83b7\u53d6\u670d\u52a1\u5668\u4fe1\u606f\u548c\u80fd\u529b\n    Register-&gt;&gt;Nacos: \u67e5\u8be2\u73b0\u6709\u670d\u52a1\u8be6\u60c5\n\n    alt \u670d\u52a1\u4e0d\u5b58\u5728\n        Register-&gt;&gt;Register: \u6784\u5efa\u670d\u52a1\u57fa\u672c\u4fe1\u606f\n        Register-&gt;&gt;Register: \u6784\u5efa\u5de5\u5177\u89c4\u8303\n        Register-&gt;&gt;Register: \u6784\u5efa\u7aef\u70b9\u89c4\u8303\n        Register-&gt;&gt;Nacos: \u521b\u5efa MCP \u670d\u52a1\u5668\n    else \u670d\u52a1\u5df2\u5b58\u5728\n        Register-&gt;&gt;Register: \u68c0\u67e5\u517c\u5bb9\u6027\n        alt \u517c\u5bb9\n            Register-&gt;&gt;Register: \u66f4\u65b0\u5de5\u5177\n            Register-&gt;&gt;Config: \u8ba2\u9605\u914d\u7f6e\u53d8\u5316\n        else \u4e0d\u517c\u5bb9\n            Register-&gt;&gt;Register: \u629b\u51fa\u5f02\u5e38\n        end\n    end\n\n    App-&gt;&gt;Register: Web\u670d\u52a1\u5668\u542f\u52a8\u5b8c\u6210\u4e8b\u4ef6\n    Register-&gt;&gt;Nacos: \u6ce8\u518c\u670d\u52a1\u5b9e\u4f8b\n</code></pre>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#2_1","title":"2. \u5de5\u5177\u89c4\u8303\u7ba1\u7406","text":"<pre><code>flowchart TD\n    A[\u5de5\u5177\u5b9a\u4e49] --&gt; B{\u68c0\u67e5\u73b0\u6709\u5de5\u5177}\n    B --&gt;|\u4e0d\u5b58\u5728| C[\u521b\u5efa\u65b0\u5de5\u5177\u89c4\u8303]\n    B --&gt;|\u5b58\u5728| D[\u517c\u5bb9\u6027\u68c0\u67e5]\n    D --&gt;|\u517c\u5bb9| E[\u66f4\u65b0\u5de5\u5177\u63cf\u8ff0]\n    D --&gt;|\u4e0d\u517c\u5bb9| F[\u6ce8\u518c\u5931\u8d25]\n    C --&gt; G[\u6ce8\u518c\u5230 Nacos Config]\n    E --&gt; G\n    G --&gt; H[\u8ba2\u9605\u914d\u7f6e\u53d8\u5316]\n    H --&gt; I[\u52a8\u6001\u66f4\u65b0\u5de5\u5177]\n</code></pre>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#_4","title":"\u5ba2\u6237\u7aef\u53d1\u73b0\u548c\u8fde\u63a5","text":""},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#1_2","title":"1. \u670d\u52a1\u53d1\u73b0\u673a\u5236","text":"<pre><code>@Bean\npublic List&lt;LoadbalancedMcpSyncClient&gt; loadbalancedMcpSyncClientList(\n    ObjectProvider&lt;NacosMcpOperationService&gt; nacosMcpOperationServiceProvider,\n    NacosMcpSseClientProperties nacosMcpSseClientProperties,\n    ApplicationContext applicationContext) {\n\n    List&lt;LoadbalancedMcpSyncClient&gt; clients = new ArrayList&lt;&gt;();\n\n    for (NacosSseParameters parameters : nacosMcpSseClientProperties.getConnections().values()) {\n        LoadbalancedMcpSyncClient client = LoadbalancedMcpSyncClient.builder()\n            .serverName(parameters.serviceName())\n            .version(parameters.version())\n            .nacosMcpOperationService(nacosMcpOperationService)\n            .applicationContext(applicationContext)\n            .build();\n\n        client.init();\n        client.subscribe();\n        clients.add(client);\n    }\n    return clients;\n}\n</code></pre>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#2_2","title":"2. \u8d1f\u8f7d\u5747\u8861\u7b56\u7565","text":"<p>LoadbalancedMcpSyncClient \u5b9e\u73b0\u4e86\u4ee5\u4e0b\u8d1f\u8f7d\u5747\u8861\u529f\u80fd: - \u5b9e\u4f8b\u9009\u62e9: \u57fa\u4e8e\u6743\u91cd\u7684\u8f6e\u8be2\u7b97\u6cd5 - \u5065\u5eb7\u68c0\u67e5: \u81ea\u52a8\u68c0\u6d4b\u548c\u5254\u9664\u4e0d\u5065\u5eb7\u5b9e\u4f8b - \u8fde\u63a5\u6c60: \u590d\u7528 MCP \u8fde\u63a5\u4ee5\u63d0\u9ad8\u6027\u80fd - \u6545\u969c\u8f6c\u79fb: \u81ea\u52a8\u5207\u6362\u5230\u5065\u5eb7\u5b9e\u4f8b</p>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#_5","title":"\u914d\u7f6e\u793a\u4f8b","text":""},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#mcp-server-v6","title":"mcp-server-v6 \u914d\u7f6e\u6539\u9020\u5efa\u8bae","text":"<p>\u57fa\u4e8e\u5206\u6790\uff0c\u4ee5\u4e0b\u662f mcp-server-v6 \u7684\u914d\u7f6e\u6539\u9020\u5efa\u8bae:</p>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#1-applicationyml","title":"1. \u5e94\u7528\u914d\u7f6e (application.yml)","text":"<pre><code>spring:\n  ai:\n    mcp:\n      server:\n        name: ${spring.application.name}\n        version: 1.0.1\n        type: ASYNC\n        instructions: \"Enhanced reactive server with Nacos auto-discovery\"\n        sse-endpoint: /sse\n        capabilities:\n          tool: true\n          resource: true\n          prompt: true\n          completion: true\n    alibaba:\n      mcp:\n        nacos:\n          # Nacos \u8fde\u63a5\u914d\u7f6e\n          server-addr: ${NACOS_SERVER_ADDR:127.0.0.1:8848}\n          namespace: ${NACOS_NAMESPACE:public}\n          username: ${NACOS_USERNAME:nacos}\n          password: ${NACOS_PASSWORD:nacos}\n          # \u670d\u52a1\u6ce8\u518c\u914d\u7f6e\n          registry:\n            enabled: true\n            service-group: mcp-server\n            service-name: ${spring.application.name}\n            service-register: true\n            service-ephemeral: true\n            sse-export-context-path: \"\"\n\n# \u7ba1\u7406\u7aef\u70b9\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: health,info,metrics,nacos-mcp\n  endpoint:\n    nacos-mcp:\n      enabled: true\n</code></pre>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#2-pomxml","title":"2. \u4f9d\u8d56\u914d\u7f6e (pom.xml)","text":"<pre><code>&lt;dependencies&gt;\n    &lt;!-- Spring AI Alibaba Nacos MCP Server \u81ea\u52a8\u914d\u7f6e --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alibaba.cloud.ai&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-ai-alibaba-starter-nacos-mcp-server&lt;/artifactId&gt;\n        &lt;version&gt;${spring-ai-alibaba.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Spring Boot WebFlux --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Spring Boot Actuator --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#3_1","title":"3. \u81ea\u5b9a\u4e49\u914d\u7f6e\u7c7b","text":"<pre><code>@Configuration\n@EnableConfigurationProperties({\n    NacosMcpProperties.class,\n    NacosMcpRegistryProperties.class\n})\npublic class McpServerEnhancedConfig {\n\n    @Bean\n    @ConditionalOnMissingBean\n    public McpServerMetricsCollector mcpServerMetricsCollector() {\n        return new McpServerMetricsCollector();\n    }\n\n    @Bean\n    public McpServerHealthIndicator mcpServerHealthIndicator(\n            NacosMcpOperationService nacosMcpOperationService) {\n        return new McpServerHealthIndicator(nacosMcpOperationService);\n    }\n\n    @EventListener\n    public void handleMcpServerRegistered(McpServerRegisteredEvent event) {\n        log.info(\"MCP Server registered: {} with {} tools\", \n                event.getServerName(), event.getToolCount());\n    }\n}\n</code></pre>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#4","title":"4. \u5de5\u5177\u5143\u6570\u636e\u589e\u5f3a","text":"<pre><code>@Component\npublic class EnhancedPersonManagementTool {\n\n    @Tool(name = \"getAllPersons\", \n          description = \"Retrieve all persons from the database with pagination support\")\n    @McpToolMeta(category = \"data-access\", version = \"1.0\", enabled = true)\n    public PersonListResponse getAllPersons(\n            @ToolParam(description = \"Page number (0-based)\") \n            @DefaultValue(\"0\") Integer page,\n            @ToolParam(description = \"Page size (1-100)\") \n            @DefaultValue(\"10\") Integer size) {\n        // Enhanced implementation with pagination\n    }\n\n    @Tool(name = \"getPersonById\", \n          description = \"Retrieve a specific person by their unique identifier\")\n    @McpToolMeta(category = \"data-access\", version = \"1.0\", enabled = true)\n    public PersonResponse getPersonById(\n            @ToolParam(description = \"Unique person identifier\") \n            @NotNull Long id) {\n        // Enhanced implementation with validation\n    }\n}\n</code></pre>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#_6","title":"\u6700\u4f73\u5b9e\u8df5\u5efa\u8bae","text":""},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#1_3","title":"1. \u670d\u52a1\u6ce8\u518c\u6700\u4f73\u5b9e\u8df5","text":"<ul> <li>\u7248\u672c\u7ba1\u7406: \u4f7f\u7528\u8bed\u4e49\u5316\u7248\u672c\u53f7</li> <li>\u5065\u5eb7\u68c0\u67e5: \u5b9e\u73b0\u81ea\u5b9a\u4e49\u5065\u5eb7\u68c0\u67e5\u7aef\u70b9</li> <li>\u4f18\u96c5\u505c\u673a: \u6b63\u786e\u5904\u7406\u670d\u52a1\u4e0b\u7ebf</li> <li>\u5143\u6570\u636e\u4e30\u5bcc: \u6dfb\u52a0\u6709\u610f\u4e49\u7684\u670d\u52a1\u5143\u6570\u636e</li> </ul>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#2_3","title":"2. \u5de5\u5177\u7ba1\u7406\u6700\u4f73\u5b9e\u8df5","text":"<ul> <li>\u63cf\u8ff0\u5b8c\u6574: \u63d0\u4f9b\u8be6\u7ec6\u7684\u5de5\u5177\u63cf\u8ff0</li> <li>Schema \u5b9a\u4e49: \u7cbe\u786e\u5b9a\u4e49\u8f93\u5165\u53c2\u6570 Schema</li> <li>\u7248\u672c\u517c\u5bb9: \u786e\u4fdd\u5de5\u5177\u7248\u672c\u5411\u540e\u517c\u5bb9</li> <li>\u9519\u8bef\u5904\u7406: \u5b9e\u73b0\u7edf\u4e00\u7684\u9519\u8bef\u5904\u7406\u673a\u5236</li> </ul>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#3_2","title":"3. \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":"<ul> <li>\u8fde\u63a5\u6c60: \u5408\u7406\u914d\u7f6e MCP \u8fde\u63a5\u6c60\u5927\u5c0f</li> <li>\u7f13\u5b58\u7b56\u7565: \u5b9e\u73b0\u5de5\u5177\u7ed3\u679c\u7f13\u5b58</li> <li>\u76d1\u63a7\u6307\u6807: \u6dfb\u52a0\u8be6\u7ec6\u7684\u6027\u80fd\u76d1\u63a7</li> <li>\u8d44\u6e90\u9650\u5236: \u8bbe\u7f6e\u5408\u7406\u7684\u8d44\u6e90\u4f7f\u7528\u9650\u5236</li> </ul>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#4_1","title":"4. \u5b89\u5168\u6027\u8003\u8651","text":"<ul> <li>\u8ba4\u8bc1\u6388\u6743: \u5b9e\u73b0\u5de5\u5177\u8c03\u7528\u7684\u8ba4\u8bc1\u6388\u6743</li> <li>\u53c2\u6570\u9a8c\u8bc1: \u4e25\u683c\u9a8c\u8bc1\u5de5\u5177\u8f93\u5165\u53c2\u6570</li> <li>\u5ba1\u8ba1\u65e5\u5fd7: \u8bb0\u5f55\u8be6\u7ec6\u7684\u8c03\u7528\u5ba1\u8ba1\u65e5\u5fd7</li> <li>\u654f\u611f\u6570\u636e: \u4fdd\u62a4\u654f\u611f\u6570\u636e\u4e0d\u88ab\u6cc4\u9732</li> </ul>"},{"location":"archived/spring2.7-250806/SPRING_AI_ALIBABA_MCP_ANALYSIS/#_7","title":"\u603b\u7ed3","text":"<p>Spring AI Alibaba \u7684 Nacos MCP \u81ea\u52a8\u914d\u7f6e\u5b9e\u73b0\u63d0\u4f9b\u4e86\u5b8c\u6574\u7684\u670d\u52a1\u6ce8\u518c\u53d1\u73b0\u3001\u914d\u7f6e\u7ba1\u7406\u3001\u8d1f\u8f7d\u5747\u8861\u7b49\u529f\u80fd\u3002\u901a\u8fc7\u5408\u7406\u7684\u914d\u7f6e\u548c\u4f7f\u7528\uff0c\u53ef\u4ee5\u6784\u5efa\u9ad8\u53ef\u7528\u3001\u9ad8\u6027\u80fd\u7684 MCP \u670d\u52a1\u67b6\u6784\u3002</p> <p>mcp-server-v6 \u7684\u6539\u9020\u5e94\u8be5\uff1a 1. \u91c7\u7528\u81ea\u52a8\u914d\u7f6e\u7b80\u5316\u914d\u7f6e\u590d\u6742\u5ea6 2. \u5229\u7528\u670d\u52a1\u6ce8\u518c\u53d1\u73b0\u63d0\u9ad8\u53ef\u7528\u6027 3. \u5b9e\u73b0\u5de5\u5177\u52a8\u6001\u7ba1\u7406\u63d0\u9ad8\u7075\u6d3b\u6027 4. \u6dfb\u52a0\u5b8c\u5584\u7684\u76d1\u63a7\u548c\u5065\u5eb7\u68c0\u67e5 </p>"},{"location":"contributing/","title":"\u8d21\u732e\u6307\u5357 (Contributing Guide)","text":"<p>\u611f\u8c22\u60a8\u5bf9 <code>mcp-router-sse-parent</code> \u9879\u76ee\u7684\u5173\u6ce8\uff01</p>"},{"location":"contributing/#_1","title":"\ud83c\udf1f \u5f00\u53d1\u5de5\u4f5c\u6d41","text":"<p>\u672c\u9879\u76ee\u91c7\u7528 GitHub Flow \u5de5\u4f5c\u6d41\uff0c\u7b80\u5355\u9ad8\u6548\uff1a</p> <pre><code>main \u5206\u652f\n  \u2193\n\u521b\u5efa\u529f\u80fd\u5206\u652f\n  \u2193\n\u5f00\u53d1\u548c\u6d4b\u8bd5\n  \u2193\n\u63d0\u4ea4 Pull Request\n  \u2193\n\u4ee3\u7801\u5ba1\u67e5\n  \u2193\n\u5408\u5e76\u5230 main\n  \u2193\n\u81ea\u52a8\u90e8\u7f72\n</code></pre>"},{"location":"contributing/#_2","title":"\ud83d\udccb \u5206\u652f\u547d\u540d\u89c4\u8303","text":"<p>\u521b\u5efa\u5206\u652f\u65f6\uff0c\u8bf7\u9075\u5faa\u4ee5\u4e0b\u547d\u540d\u89c4\u8303\uff1a</p> \u7c7b\u578b \u524d\u7f00 \u793a\u4f8b \u65b0\u529f\u80fd <code>feature/</code> <code>feature/add-gemini-integration</code> Bug \u4fee\u590d <code>bugfix/</code> <code>bugfix/fix-agent-memory-leak</code> \u70ed\u4fee\u590d <code>hotfix/</code> <code>hotfix/critical-security-fix</code> \u6587\u6863 <code>docs/</code> <code>docs/update-readme</code> \u91cd\u6784 <code>refactor/</code> <code>refactor/optimize-mcp-client</code> \u6d4b\u8bd5 <code>test/</code> <code>test/add-integration-tests</code> \u914d\u7f6e <code>chore/</code> <code>chore/update-dependencies</code>"},{"location":"contributing/#_3","title":"\u793a\u4f8b","text":"<pre><code># \u597d\u7684\u5206\u652f\u540d \u2705\nfeature/add-weather-mcp-server\nbugfix/fix-null-pointer-in-agent\ndocs/add-gemini-guide\n\n# \u4e0d\u597d\u7684\u5206\u652f\u540d \u274c\nmy-branch\ntest\nupdates\n</code></pre>"},{"location":"contributing/#_4","title":"\ud83d\udcbb \u5f00\u53d1\u6d41\u7a0b","text":""},{"location":"contributing/#1-fork-clone","title":"1. Fork \u5e76 Clone \u9879\u76ee","text":"<pre><code># Fork \u9879\u76ee\u5230\u60a8\u7684 GitHub \u8d26\u53f7\n\n# Clone \u5230\u672c\u5730\ngit clone https://github.com/YOUR_USERNAME/mcp-router-sse-parent.git\ncd mcp-router-sse-parent\n\n# \u6dfb\u52a0\u4e0a\u6e38\u4ed3\u5e93\ngit remote add upstream https://github.com/ORIGINAL_OWNER/mcp-router-sse-parent.git\n</code></pre>"},{"location":"contributing/#2","title":"2. \u521b\u5efa\u529f\u80fd\u5206\u652f","text":"<pre><code># \u786e\u4fdd main \u662f\u6700\u65b0\u7684\ngit checkout main\ngit pull upstream main\n\n# \u521b\u5efa\u65b0\u5206\u652f\ngit checkout -b feature/your-feature-name\n</code></pre>"},{"location":"contributing/#3","title":"3. \u5f00\u53d1","text":"<p>\u4f7f\u7528\u6807\u51c6\u5316\u5de5\u4f5c\u6d41\uff1a</p>"},{"location":"contributing/#mcp-server","title":"\u6dfb\u52a0 MCP Server","text":"<pre><code># \u53c2\u8003\u5de5\u4f5c\u6d41\u6587\u6863\ncat .agent/workflows/add-mcp-server.md\n\n# \u6216\u8005\u8ba9 AI \u5e2e\u52a9\n# \"\u8bf7\u6309\u7167 add-mcp-server \u5de5\u4f5c\u6d41\u6dfb\u52a0\u5929\u6c14 MCP Server\"\n</code></pre>"},{"location":"contributing/#ai-agent","title":"\u6dfb\u52a0 AI Agent","text":"<pre><code># \u53c2\u8003\u5de5\u4f5c\u6d41\u6587\u6863\ncat .agent/workflows/add-agent-workflow.md\n\n# \u6216\u8005\u8ba9 AI \u5e2e\u52a9\n# \"\u8bf7\u6309\u7167 add-agent-workflow \u521b\u5efa\u5929\u6c14\u5206\u6790 Agent\"\n</code></pre>"},{"location":"contributing/#4","title":"4. \u63d0\u4ea4\u4ee3\u7801","text":""},{"location":"contributing/#commit-message","title":"Commit Message \u89c4\u8303","text":"<p>\u9075\u5faa Conventional Commits \u89c4\u8303\uff1a</p> <pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n</code></pre> <p>Type \u7c7b\u578b: - <code>feat</code>: \u65b0\u529f\u80fd - <code>fix</code>: Bug \u4fee\u590d - <code>docs</code>: \u6587\u6863\u66f4\u65b0 - <code>style</code>: \u4ee3\u7801\u683c\u5f0f\uff08\u4e0d\u5f71\u54cd\u529f\u80fd\uff09 - <code>refactor</code>: \u91cd\u6784 - <code>perf</code>: \u6027\u80fd\u4f18\u5316 - <code>test</code>: \u6d4b\u8bd5\u76f8\u5173 - <code>chore</code>: \u6784\u5efa/\u5de5\u5177\u94fe</p> <p>\u793a\u4f8b: <pre><code># \u597d\u7684 commit message \u2705\ngit commit -m \"feat(mcp-server): add weather query tool\"\ngit commit -m \"fix(agent): resolve memory leak in ReactAgent\"\ngit commit -m \"docs(readme): add Gemini integration guide\"\n\n# \u4e0d\u597d\u7684 commit message \u274c\ngit commit -m \"update\"\ngit commit -m \"fix bug\"\ngit commit -m \"changes\"\n</code></pre></p>"},{"location":"contributing/#5-pr","title":"5. \u63a8\u9001\u5e76\u521b\u5efa PR","text":"<pre><code># \u63a8\u9001\u5230\u60a8\u7684 fork\ngit push origin feature/your-feature-name\n\n# \u5728 GitHub \u4e0a\u521b\u5efa Pull Request\n# \u586b\u5199 PR \u6a21\u677f\u4e2d\u7684\u6240\u6709\u5fc5\u8981\u4fe1\u606f\n</code></pre>"},{"location":"contributing/#_5","title":"\u2705 \u4ee3\u7801\u5ba1\u67e5\u6e05\u5355","text":"<p>\u5728\u63d0\u4ea4 PR \u524d\uff0c\u8bf7\u786e\u4fdd\uff1a</p>"},{"location":"contributing/#_6","title":"\u4ee3\u7801\u8d28\u91cf","text":"<ul> <li> \u4ee3\u7801\u9075\u5faa\u9879\u76ee\u89c4\u8303</li> <li> \u4f7f\u7528 Lombok \u51cf\u5c11\u6837\u677f\u4ee3\u7801</li> <li> \u4f7f\u7528 Slf4j \u8bb0\u5f55\u65e5\u5fd7</li> <li> \u6bcf\u4e2a\u516c\u5171\u65b9\u6cd5\u90fd\u6709 Javadoc</li> <li> \u6ca1\u6709\u786c\u7f16\u7801\u7684\u914d\u7f6e\u503c</li> </ul>"},{"location":"contributing/#_7","title":"\u6d4b\u8bd5","text":"<ul> <li> \u5355\u5143\u6d4b\u8bd5\u8986\u76d6\u7387 &gt; 80%</li> <li> \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7\uff1a<code>mvn test</code></li> <li> \u96c6\u6210\u6d4b\u8bd5\u9a8c\u8bc1\uff08\u5982\u9002\u7528\uff09</li> </ul>"},{"location":"contributing/#_8","title":"\u6587\u6863","text":"<ul> <li> README.md \u5df2\u66f4\u65b0\uff08\u5982\u9002\u7528\uff09</li> <li> \u6a21\u5757 README \u5df2\u66f4\u65b0\uff08\u5982\u9002\u7528\uff09</li> <li> API \u6587\u6863\u5df2\u66f4\u65b0</li> <li> \u5de5\u4f5c\u6d41\u6587\u6863\u5df2\u66f4\u65b0\uff08\u5982\u679c\u6539\u4e86\u6d41\u7a0b\uff09</li> </ul>"},{"location":"contributing/#_9","title":"\u6784\u5efa","text":"<ul> <li> Maven \u6784\u5efa\u6210\u529f\uff1a<code>mvn clean install</code></li> <li> \u65e0\u7f16\u8bd1\u8b66\u544a</li> <li> \u4f9d\u8d56\u7248\u672c\u517c\u5bb9</li> </ul>"},{"location":"contributing/#_10","title":"\ud83d\udd27 \u672c\u5730\u5f00\u53d1\u73af\u5883","text":""},{"location":"contributing/#_11","title":"\u5fc5\u9700\u5de5\u5177","text":"<ul> <li>Java: 17+</li> <li>Maven: 3.6+</li> <li>Git: \u6700\u65b0\u7248\u672c</li> </ul>"},{"location":"contributing/#_12","title":"\u63a8\u8350\u5de5\u5177","text":"<ul> <li>IDE: IntelliJ IDEA / Eclipse</li> <li>Lombok Plugin: \u5b89\u88c5 IDE \u63d2\u4ef6</li> <li>Git GUI: GitKraken / SourceTree (\u53ef\u9009)</li> </ul>"},{"location":"contributing/#_13","title":"\u8fd0\u884c\u9879\u76ee","text":"<pre><code># \u6784\u5efa\u6240\u6709\u6a21\u5757\nmvn clean install\n\n# \u8fd0\u884c\u7279\u5b9a\u6a21\u5757\ncd mcp-server-v6\nmvn spring-boot:run\n\n# \u8fd0\u884c\u6d4b\u8bd5\nmvn test\n</code></pre>"},{"location":"contributing/#_14","title":"\ud83d\udcda \u53c2\u8003\u6587\u6863","text":""},{"location":"contributing/#_15","title":"\u5de5\u4f5c\u6d41","text":"<ul> <li>\u5de5\u4f5c\u6d41\u5bf9\u6bd4\u5206\u6790</li> <li>\u5de5\u4f5c\u6d41\u603b\u7ed3</li> <li>\u6dfb\u52a0 MCP Server</li> <li>\u6dfb\u52a0 AI Agent</li> <li>\u4ee3\u7801\u5ba1\u67e5</li> </ul>"},{"location":"contributing/#_16","title":"\u6280\u672f\u6587\u6863","text":"<ul> <li>Spring AI Alibaba \u96c6\u6210</li> <li>Gemini \u6574\u5408\u6307\u5357</li> <li>\u5feb\u901f\u5f00\u59cb</li> </ul>"},{"location":"contributing/#_17","title":"\ud83e\udd1d \u4ee3\u7801\u5ba1\u67e5\u6d41\u7a0b","text":"<ol> <li>\u81ea\u6211\u5ba1\u67e5: \u63d0\u4ea4\u524d\u5148\u81ea\u5df1\u5ba1\u67e5\u4e00\u904d\u4ee3\u7801</li> <li>CI \u68c0\u67e5: \u786e\u4fdd GitHub Actions \u901a\u8fc7</li> <li>Peer Review: \u81f3\u5c11\u4e00\u4f4d\u56e2\u961f\u6210\u5458\u5ba1\u67e5</li> <li>\u4fee\u6539: \u6839\u636e\u53cd\u9988\u4fee\u6539\u4ee3\u7801</li> <li>\u518d\u6b21\u5ba1\u67e5: \u786e\u8ba4\u4fee\u6539\u7b26\u5408\u8981\u6c42</li> <li>\u5408\u5e76: Maintainer \u5408\u5e76\u5230 main</li> </ol>"},{"location":"contributing/#_18","title":"\u5ba1\u67e5\u5173\u6ce8\u70b9","text":"<ul> <li>\u4ee3\u7801\u903b\u8f91\u6b63\u786e\u6027</li> <li>\u6027\u80fd\u95ee\u9898</li> <li>\u5b89\u5168\u95ee\u9898</li> <li>\u53ef\u8bfb\u6027\u548c\u53ef\u7ef4\u62a4\u6027</li> <li>\u6d4b\u8bd5\u8986\u76d6\u5ea6</li> </ul>"},{"location":"contributing/#_19","title":"\ud83d\udcac \u6c9f\u901a\u6e20\u9053","text":"<ul> <li>Issues: \u62a5\u544a Bug \u6216\u63d0\u51fa\u529f\u80fd\u5efa\u8bae</li> <li>Pull Requests: \u63d0\u4ea4\u4ee3\u7801\u6539\u52a8</li> <li>Discussions: \u6280\u672f\u8ba8\u8bba\u548c\u95ee\u7b54</li> </ul>"},{"location":"contributing/#_20","title":"\ud83d\ude4f \u611f\u8c22","text":"<p>\u611f\u8c22\u6240\u6709\u8d21\u732e\u8005\uff01</p> <p>\u60a8\u7684\u8d21\u732e\u8ba9\u8fd9\u4e2a\u9879\u76ee\u53d8\u5f97\u66f4\u597d\u3002</p>"},{"location":"contributing/#_21","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"contributing/#q-main","title":"Q: \u6211\u80fd\u76f4\u63a5\u63d0\u4ea4\u5230 main \u5417\uff1f","text":"<p>A: \u4e0d\u80fd\u3002\u6240\u6709\u6539\u52a8\u90fd\u5fc5\u987b\u901a\u8fc7 Pull Request\u3002</p>"},{"location":"contributing/#q-pr","title":"Q: PR \u591a\u4e45\u4f1a\u88ab\u5ba1\u67e5\uff1f","text":"<p>A: \u901a\u5e38\u5728 24-48 \u5c0f\u65f6\u5185\u3002</p>"},{"location":"contributing/#q-fork","title":"Q: \u5982\u4f55\u66f4\u65b0\u6211\u7684 fork\uff1f","text":"<p>A:  <pre><code>git checkout main\ngit pull upstream main\ngit push origin main\n</code></pre></p>"},{"location":"contributing/#q-commit","title":"Q: Commit \u5199\u9519\u4e86\u600e\u4e48\u529e\uff1f","text":"<p>A: <pre><code># \u4fee\u6539\u6700\u540e\u4e00\u6b21 commit\ngit commit --amend\n\n# \u4ea4\u4e92\u5f0f rebase \u4fee\u6539\u5386\u53f2\ngit rebase -i HEAD~3\n</code></pre></p>"},{"location":"contributing/#q","title":"Q: \u5982\u4f55\u8fd0\u884c\u5355\u4e2a\u6a21\u5757\u7684\u6d4b\u8bd5\uff1f","text":"<p>A: <pre><code>cd mcp-server-v6\nmvn test\n</code></pre></p> <p>Happy Coding! \ud83d\ude80</p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/","title":"MCP Router V3 \u63a5\u5165 Dify \u8bbe\u8ba1\u65b9\u6848","text":""},{"location":"dify/DIFY_INTEGRATION_DESIGN/#1","title":"1. \u63a5\u53e3\u5206\u6790","text":""},{"location":"dify/DIFY_INTEGRATION_DESIGN/#11-toolslist","title":"1.1 tools/list \u63a5\u53e3\uff08\u5de5\u5177\u5217\u8868\uff09","text":"<p>\u63a5\u53e3\u5730\u5740\uff1a <pre><code>GET http://localhost:8052/mcp/router/tools/{serverKey}\n</code></pre></p> <p>\u793a\u4f8b\u8bf7\u6c42\uff1a <pre><code>curl --location 'http://localhost:8052/mcp/router/tools/mcp-server-v6'\n</code></pre></p> <p>\u54cd\u5e94\u6570\u636e\u7ed3\u6784\uff1a <pre><code>{\n  \"tools\": [\n    {\n      \"name\": \"getPersonById\",\n      \"description\": \"Get a person by their ID\",\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\",\n            \"description\": \"Person's ID\"\n          }\n        },\n        \"required\": [\"id\"],\n        \"additionalProperties\": false\n      }\n    },\n    {\n      \"name\": \"getAllPersons\",\n      \"description\": \"Get all persons from the database\",\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {},\n        \"required\": [],\n        \"additionalProperties\": false\n      }\n    },\n    {\n      \"name\": \"addPerson\",\n      \"description\": \"Add a new person to the database\",\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"firstName\": {\"type\": \"string\", \"description\": \"Person's first name\"},\n          \"lastName\": {\"type\": \"string\", \"description\": \"Person's last name\"},\n          \"age\": {\"type\": \"integer\", \"format\": \"int32\", \"description\": \"Person's age\"},\n          \"nationality\": {\"type\": \"string\", \"description\": \"Person's nationality\"},\n          \"gender\": {\"type\": \"string\", \"description\": \"Person's gender (MALE, FEMALE, OTHER)\"}\n        },\n        \"required\": [\"firstName\", \"lastName\", \"age\", \"nationality\", \"gender\"],\n        \"additionalProperties\": false\n      }\n    }\n  ]\n}\n</code></pre></p> <p>\u8fd4\u56de\u5b57\u6bb5\u8bf4\u660e\uff1a - <code>tools</code>: \u5de5\u5177\u5217\u8868\u6570\u7ec4   - <code>name</code>: \u5de5\u5177\u540d\u79f0\uff08\u5fc5\u586b\uff09   - <code>description</code>: \u5de5\u5177\u63cf\u8ff0\uff08\u5fc5\u586b\uff09   - <code>inputSchema</code>: \u8f93\u5165\u53c2\u6570\u7684JSON Schema\uff08\u5fc5\u586b\uff09     - <code>type</code>: \u53c2\u6570\u7c7b\u578b     - <code>properties</code>: \u53c2\u6570\u5c5e\u6027\u5b9a\u4e49     - <code>required</code>: \u5fc5\u586b\u53c2\u6570\u5217\u8868     - <code>additionalProperties</code>: \u662f\u5426\u5141\u8bb8\u989d\u5916\u5c5e\u6027</p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#12-toolscall","title":"1.2 tools/call \u63a5\u53e3\uff08\u5de5\u5177\u8c03\u7528\uff09","text":"<p>\u63a5\u53e3\u5730\u5740\uff1a <pre><code>POST http://localhost:8052/mcp/router/route/{serverKey}\n</code></pre></p> <p>\u793a\u4f8b\u8bf7\u6c42\uff1a <pre><code>curl --location 'http://localhost:8052/mcp/router/route/mcp-server-v6' \\\n--header 'Content-Type: application/json' \\\n--data '{\n    \"id\": \"1005\",\n    \"method\": \"tools/call\",\n    \"params\": {\n      \"name\": \"getPersonById\",\n      \"arguments\": { \"id\": 5 }\n    }\n  }'\n</code></pre></p> <p>\u8bf7\u6c42\u4f53\u7ed3\u6784\uff1a <pre><code>{\n  \"id\": \"string\",           // \u8bf7\u6c42ID\uff08\u53ef\u9009\uff0c\u5efa\u8bae\u4f7f\u7528UUID\uff09\n  \"method\": \"tools/call\",   // \u56fa\u5b9a\u503c\n  \"params\": {\n    \"name\": \"string\",       // \u5de5\u5177\u540d\u79f0\uff08\u5fc5\u586b\uff09\n    \"arguments\": {}         // \u5de5\u5177\u53c2\u6570\uff08\u5fc5\u586b\uff0c\u6839\u636e\u5de5\u5177\u7684inputSchema\u5b9a\u4e49\uff09\n  }\n}\n</code></pre></p> <p>\u54cd\u5e94\u6570\u636e\u7ed3\u6784\uff1a <pre><code>{\n  \"metadata\": {\n    \"targetServer\": \"mcp-server-v6\",\n    \"targetHost\": \"192.168.0.100:8073\",\n    \"serverVersion\": \"1.0.1\",\n    \"clientId\": \"mcp-router-v3-client\",\n    \"responseTime\": 35,\n    \"routingStrategy\": \"intelligent\",\n    \"serverMetadata\": {\n      \"sseEndpoint\": \"/sse\",\n      \"serverName\": \"mcp-server-v6\",\n      \"protocol\": \"mcp-sse\",\n      \"sseMessageEndpoint\": \"/mcp/message\",\n      \"version\": \"1.0.1\"\n    },\n    \"serverGroup\": null,\n    \"routedAt\": 1761877499188,\n    \"clientVersion\": \"2.0.0\",\n    \"toolName\": \"getPersonById\",\n    \"routerVersion\": \"v3\"\n  },\n  \"targetService\": \"mcp-server-v6\",\n  \"clientId\": \"mcp-router-v3-client\",\n  \"sessionId\": null,\n  \"timestamp\": 1761877499188,\n  \"id\": \"1005\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"getPersonById\",\n    \"arguments\": {\n      \"id\": 5\n    }\n  },\n  \"result\": {\n    \"firstName\": \"Pierre\",\n    \"lastName\": \"Dubois\",\n    \"found\": true,\n    \"nationality\": \"French\",\n    \"gender\": \"MALE\",\n    \"id\": 5,\n    \"age\": 40\n  },\n  \"error\": null,\n  \"jsonrpc\": \"2.0\"\n}\n</code></pre></p> <p>\u54cd\u5e94\u5b57\u6bb5\u8bf4\u660e\uff1a - <code>result</code>: \u5de5\u5177\u6267\u884c\u7ed3\u679c\uff08\u6210\u529f\u65f6\uff09 - <code>error</code>: \u9519\u8bef\u4fe1\u606f\uff08\u5931\u8d25\u65f6\uff09 - <code>metadata</code>: \u8def\u7531\u5143\u6570\u636e\uff08\u5305\u542b\u6027\u80fd\u3001\u8def\u7531\u7b56\u7565\u7b49\u4fe1\u606f\uff09 - <code>id</code>: \u8bf7\u6c42ID\uff08\u4e0e\u8bf7\u6c42\u4e00\u81f4\uff09 - <code>method</code>: \u65b9\u6cd5\u540d - <code>params</code>: \u8bf7\u6c42\u53c2\u6570\uff08\u539f\u6837\u8fd4\u56de\uff09</p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#2-dify","title":"2. Dify \u63a5\u5165\u65b9\u6848","text":""},{"location":"dify/DIFY_INTEGRATION_DESIGN/#21","title":"2.1 \u67b6\u6784\u8bbe\u8ba1","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Dify AI   \u2502\n\u2502   Platform  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2502 1. \u7528\u6237\u8f93\u5165\uff1a\"\u67e5\u8be2\u7528\u6237 id=5\"\n       \u2502\n       v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Dify Workflow / Agent      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  \u7cfb\u7edf\u63d0\u793a\u8bcd(Prompt)  \u2502   \u2502\n\u2502  \u2502  - \u7406\u89e3\u7528\u6237\u610f\u56fe      \u2502   \u2502\n\u2502  \u2502  - \u63d0\u53d6\u53c2\u6570          \u2502   \u2502\n\u2502  \u2502  - \u8c03\u7528MCP\u5de5\u5177       \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u2502 2. \u8c03\u7528 MCP Router \u5de5\u5177\n           \u2502\n           v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  MCP Router V3              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502  \u2502  tools/list        \u2502     \u2502\n\u2502  \u2502  (\u83b7\u53d6\u53ef\u7528\u5de5\u5177)    \u2502     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502  \u2502  tools/call        \u2502     \u2502\n\u2502  \u2502  (\u8c03\u7528\u5177\u4f53\u5de5\u5177)    \u2502     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502\n           \u2502 3. \u8def\u7531\u5230\u540e\u7aef\u670d\u52a1\n           \u2502\n           v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  MCP Server V6              \u2502\n\u2502  (Person Management)        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#22-dify","title":"2.2 Dify \u5de5\u4f5c\u6d41\u914d\u7f6e","text":""},{"location":"dify/DIFY_INTEGRATION_DESIGN/#a-dify-http-request","title":"\u65b9\u6848A\uff1a\u4f7f\u7528 Dify \u7684 HTTP Request \u8282\u70b9","text":"<p>\u6b65\u9aa41\uff1a\u521b\u5efa\u5de5\u4f5c\u6d41 1. \u5728 Dify \u4e2d\u521b\u5efa\u65b0\u7684 Workflow 2. \u6dfb\u52a0\"\u5f00\u59cb\"\u8282\u70b9\uff0c\u63a5\u6536\u7528\u6237\u8f93\u5165</p> <p>\u6b65\u9aa42\uff1a\u6dfb\u52a0 LLM \u8282\u70b9\uff08\u53c2\u6570\u63d0\u53d6\uff09 <pre><code>\u8282\u70b9\u540d\u79f0: \u53c2\u6570\u63d0\u53d6\u5668\n\u8282\u70b9\u7c7b\u578b: LLM\n\u6a21\u578b: gpt-4 \u6216\u5176\u4ed6\u5927\u6a21\u578b\n\n\u7cfb\u7edf\u63d0\u793a\u8bcd:\n\u4f60\u662f\u4e00\u4e2a\u53c2\u6570\u63d0\u53d6\u52a9\u624b\u3002\u7528\u6237\u4f1a\u8be2\u95ee\u5173\u4e8e\u7528\u6237\u4fe1\u606f\u7684\u95ee\u9898\uff0c\u4f60\u9700\u8981\uff1a\n1. \u7406\u89e3\u7528\u6237\u610f\u56fe\n2. \u63d0\u53d6\u51fa\u9700\u8981\u8c03\u7528\u7684\u5de5\u5177\u540d\u79f0\n3. \u63d0\u53d6\u51fa\u5de5\u5177\u6240\u9700\u7684\u53c2\u6570\n\n\u53ef\u7528\u5de5\u5177\uff1a\n- getPersonById: \u6839\u636eID\u67e5\u8be2\u7528\u6237\u4fe1\u606f\uff0c\u53c2\u6570: id (\u6574\u6570)\n- getAllPersons: \u83b7\u53d6\u6240\u6709\u7528\u6237\u4fe1\u606f\uff0c\u65e0\u53c2\u6570\n- addPerson: \u6dfb\u52a0\u65b0\u7528\u6237\uff0c\u53c2\u6570: firstName, lastName, age, nationality, gender\n\n\u8bf7\u4ee5JSON\u683c\u5f0f\u8fd4\u56de\uff1a\n{\n  \"toolName\": \"\u5de5\u5177\u540d\u79f0\",\n  \"arguments\": { \"\u53c2\u6570\u540d\": \"\u53c2\u6570\u503c\" }\n}\n\n\u7528\u6237\u8f93\u5165: {{start.user_input}}\n\n\u8f93\u51fa\u53d8\u91cf: extraction_result\n</code></pre></p> <p>\u6b65\u9aa43\uff1a\u6dfb\u52a0\u4ee3\u7801\u8282\u70b9\uff08\u6784\u9020\u8bf7\u6c42\uff09 <pre><code># \u8282\u70b9\u540d\u79f0: \u6784\u9020MCP\u8bf7\u6c42\n# \u8282\u70b9\u7c7b\u578b: Code\n\nimport json\nimport uuid\n\ndef main(extraction_result: str) -&gt; dict:\n    # \u89e3\u6790LLM\u63d0\u53d6\u7684\u7ed3\u679c\n    extracted = json.loads(extraction_result)\n\n    # \u6784\u9020MCP\u8c03\u7528\u8bf7\u6c42\n    mcp_request = {\n        \"id\": str(uuid.uuid4()),\n        \"method\": \"tools/call\",\n        \"params\": {\n            \"name\": extracted[\"toolName\"],\n            \"arguments\": extracted[\"arguments\"]\n        }\n    }\n\n    return {\n        \"request_body\": json.dumps(mcp_request),\n        \"tool_name\": extracted[\"toolName\"]\n    }\n</code></pre></p> <p>\u6b65\u9aa44\uff1a\u6dfb\u52a0 HTTP Request \u8282\u70b9\uff08\u8c03\u7528MCP Router\uff09 <pre><code>\u8282\u70b9\u540d\u79f0: \u8c03\u7528MCP\u5de5\u5177\n\u8282\u70b9\u7c7b\u578b: HTTP Request\n\n\u914d\u7f6e:\n  \u65b9\u6cd5: POST\n  URL: http://localhost:8052/mcp/router/route/mcp-server-v6\n  \u8bf7\u6c42\u5934:\n    Content-Type: application/json\n  \u8bf7\u6c42\u4f53: {{code.request_body}}\n\n\u8f93\u51fa\u53d8\u91cf: mcp_response\n</code></pre></p> <p>\u6b65\u9aa45\uff1a\u6dfb\u52a0 LLM \u8282\u70b9\uff08\u7ed3\u679c\u683c\u5f0f\u5316\uff09 <pre><code>\u8282\u70b9\u540d\u79f0: \u7ed3\u679c\u5c55\u793a\n\u8282\u70b9\u7c7b\u578b: LLM\n\u6a21\u578b: gpt-4\n\n\u7cfb\u7edf\u63d0\u793a\u8bcd:\n\u4f60\u662f\u4e00\u4e2a\u53cb\u597d\u7684\u52a9\u624b\u3002\u8bf7\u6839\u636e\u4ee5\u4e0b\u67e5\u8be2\u7ed3\u679c\uff0c\u7528\u81ea\u7136\u8bed\u8a00\u56de\u590d\u7528\u6237\u3002\n\n\u67e5\u8be2\u5de5\u5177: {{code.tool_name}}\n\u67e5\u8be2\u7ed3\u679c: {{http.mcp_response.result}}\n\n\u8bf7\u7528\u53cb\u597d\u3001\u7b80\u6d01\u7684\u65b9\u5f0f\u544a\u8bc9\u7528\u6237\u67e5\u8be2\u7ed3\u679c\u3002\n\n\u8f93\u51fa\u53d8\u91cf: final_answer\n</code></pre></p> <p>\u6b65\u9aa46\uff1a\u6dfb\u52a0\"\u7ed3\u675f\"\u8282\u70b9 <pre><code>\u8282\u70b9\u540d\u79f0: \u7ed3\u675f\n\u8282\u70b9\u7c7b\u578b: End\n\u8f93\u51fa\u5185\u5bb9: {{llm_result.final_answer}}\n</code></pre></p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#b-dify","title":"\u65b9\u6848B\uff1a\u4f7f\u7528 Dify \u7684\u81ea\u5b9a\u4e49\u5de5\u5177\uff08\u63a8\u8350\uff09","text":"<p>Dify \u652f\u6301\u901a\u8fc7 OpenAPI Specification \u81ea\u52a8\u751f\u6210\u5de5\u5177\u3002</p> <p>\u6b65\u9aa41\uff1a\u521b\u5efa OpenAPI \u89c4\u8303\u6587\u4ef6</p> <p>\u5c06 MCP Router \u7684\u63a5\u53e3\u5c01\u88c5\u6210 OpenAPI \u683c\u5f0f\uff1a</p> <pre><code># mcp-router-openapi.yaml\nopenapi: 3.0.0\ninfo:\n  title: MCP Router V3 API\n  version: 1.0.0\n  description: MCP Router V3 \u5de5\u5177\u8c03\u7528\u63a5\u53e3\n\nservers:\n  - url: http://localhost:8052/mcp/router\n\npaths:\n  /tools/{serverKey}:\n    get:\n      operationId: listTools\n      summary: \u83b7\u53d6\u53ef\u7528\u5de5\u5177\u5217\u8868\n      description: \u83b7\u53d6\u6307\u5b9a\u670d\u52a1\u5668\u4e0a\u6240\u6709\u53ef\u7528\u7684MCP\u5de5\u5177\n      parameters:\n        - name: serverKey\n          in: path\n          required: true\n          schema:\n            type: string\n          description: \u670d\u52a1\u5668\u6807\u8bc6\n      responses:\n        '200':\n          description: \u6210\u529f\u8fd4\u56de\u5de5\u5177\u5217\u8868\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  tools:\n                    type: array\n                    items:\n                      type: object\n                      properties:\n                        name:\n                          type: string\n                        description:\n                          type: string\n                        inputSchema:\n                          type: object\n\n  /route/{serverKey}:\n    post:\n      operationId: callTool\n      summary: \u8c03\u7528MCP\u5de5\u5177\n      description: \u8c03\u7528\u6307\u5b9a\u670d\u52a1\u5668\u4e0a\u7684MCP\u5de5\u5177\n      parameters:\n        - name: serverKey\n          in: path\n          required: true\n          schema:\n            type: string\n          description: \u670d\u52a1\u5668\u6807\u8bc6\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              required:\n                - method\n                - params\n              properties:\n                id:\n                  type: string\n                  description: \u8bf7\u6c42ID\n                method:\n                  type: string\n                  enum: [tools/call]\n                  description: \u65b9\u6cd5\u540d\u79f0\n                params:\n                  type: object\n                  required:\n                    - name\n                    - arguments\n                  properties:\n                    name:\n                      type: string\n                      description: \u5de5\u5177\u540d\u79f0\n                    arguments:\n                      type: object\n                      description: \u5de5\u5177\u53c2\u6570\n      responses:\n        '200':\n          description: \u6210\u529f\u8fd4\u56de\u5de5\u5177\u6267\u884c\u7ed3\u679c\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  id:\n                    type: string\n                  result:\n                    type: object\n                  error:\n                    type: object\n                  metadata:\n                    type: object\n</code></pre> <p>\u6b65\u9aa42\uff1a\u5728 Dify \u4e2d\u5bfc\u5165\u5de5\u5177 1. \u8fdb\u5165 Dify \u63a7\u5236\u53f0 2. \u5bfc\u822a\u5230\"\u5de5\u5177\" \u2192 \"\u81ea\u5b9a\u4e49\u5de5\u5177\" 3. \u70b9\u51fb\"\u5bfc\u5165 OpenAPI\" 4. \u4e0a\u4f20 <code>mcp-router-openapi.yaml</code> \u6587\u4ef6 5. Dify \u4f1a\u81ea\u52a8\u89e3\u6790\u5e76\u751f\u6210\u5de5\u5177</p> <p>\u6b65\u9aa43\uff1a\u521b\u5efa Agent \u5e94\u7528 <pre><code>\u5e94\u7528\u7c7b\u578b: Agent\n\u6a21\u578b: gpt-4\n\n\u7cfb\u7edf\u63d0\u793a\u8bcd:\n\u4f60\u662f\u4e00\u4e2a\u7528\u6237\u4fe1\u606f\u67e5\u8be2\u52a9\u624b\u3002\u4f60\u53ef\u4ee5\u5e2e\u52a9\u7528\u6237\u67e5\u8be2\u3001\u6dfb\u52a0\u548c\u7ba1\u7406\u7528\u6237\u4fe1\u606f\u3002\n\n\u4f60\u6709\u4ee5\u4e0b\u5de5\u5177\u53ef\u7528\uff1a\n1. callTool - \u8c03\u7528MCP\u5de5\u5177\u6765\u6267\u884c\u5177\u4f53\u64cd\u4f5c\n\n\u5f53\u7528\u6237\u8be2\u95ee\u7528\u6237\u4fe1\u606f\u65f6\uff1a\n- \u5982\u679c\u7528\u6237\u6307\u5b9a\u4e86ID\uff0c\u4f7f\u7528 getPersonById \u5de5\u5177\n- \u5982\u679c\u7528\u6237\u8981\u67e5\u770b\u6240\u6709\u7528\u6237\uff0c\u4f7f\u7528 getAllPersons \u5de5\u5177\n- \u5982\u679c\u7528\u6237\u8981\u6dfb\u52a0\u65b0\u7528\u6237\uff0c\u4f7f\u7528 addPerson \u5de5\u5177\n\n\u5de5\u5177\u8c03\u7528\u793a\u4f8b\uff1a\n\u7528\u6237: \"\u67e5\u8be2\u7528\u6237 id=5\"\n\u4f60\u5e94\u8be5\u8c03\u7528: callTool\n\u53c2\u6570:\n  serverKey: \"mcp-server-v6\"\n  body:\n    id: \"unique-request-id\"\n    method: \"tools/call\"\n    params:\n      name: \"getPersonById\"\n      arguments:\n        id: 5\n\n\u8bf7\u6839\u636e\u5de5\u5177\u8fd4\u56de\u7684\u7ed3\u679c\uff0c\u7528\u53cb\u597d\u7684\u65b9\u5f0f\u56de\u590d\u7528\u6237\u3002\n\n\u53ef\u7528\u5de5\u5177: \n- callTool (MCP Router V3 API)\n</code></pre></p> <p>\u6b65\u9aa44\uff1a\u914d\u7f6e\u5de5\u5177\u53c2\u6570</p> <p>\u5728 Agent \u4e2d\u914d\u7f6e <code>callTool</code> \u7684\u9ed8\u8ba4\u53c2\u6570\uff1a - <code>serverKey</code>: \u9ed8\u8ba4\u503c <code>mcp-server-v6</code> - \u5176\u4ed6\u53c2\u6570\u7531 LLM \u6839\u636e\u7528\u6237\u8f93\u5165\u81ea\u52a8\u586b\u5145</p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#23","title":"2.3 \u793a\u4f8b\u5bf9\u8bdd\u6d41\u7a0b","text":"<p>\u7528\u6237\u8f93\u5165\uff1a \"\u67e5\u8be2\u7528\u6237 id=5\"</p> <p>\u5904\u7406\u6d41\u7a0b\uff1a</p> <ol> <li>LLM \u7406\u89e3\u610f\u56fe</li> <li>\u8bc6\u522b\u7528\u6237\u60f3\u67e5\u8be2\u7528\u6237\u4fe1\u606f</li> <li>\u63d0\u53d6\u53c2\u6570\uff1aid = 5</li> <li> <p>\u9009\u62e9\u5de5\u5177\uff1agetPersonById</p> </li> <li> <p>\u8c03\u7528 MCP Router <pre><code>POST http://localhost:8052/mcp/router/route/mcp-server-v6\nContent-Type: application/json\n\n{\n  \"id\": \"req-12345\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"getPersonById\",\n    \"arguments\": { \"id\": 5 }\n  }\n}\n</code></pre></p> </li> <li> <p>\u63a5\u6536\u54cd\u5e94 <pre><code>{\n  \"result\": {\n    \"id\": 5,\n    \"firstName\": \"Pierre\",\n    \"lastName\": \"Dubois\",\n    \"age\": 40,\n    \"nationality\": \"French\",\n    \"gender\": \"MALE\",\n    \"found\": true\n  }\n}\n</code></pre></p> </li> <li> <p>LLM \u683c\u5f0f\u5316\u56de\u590d <pre><code>\u627e\u5230\u4e86\u7528\u6237\u4fe1\u606f\uff01\n\n\u7528\u6237ID: 5\n\u59d3\u540d: Pierre Dubois\n\u5e74\u9f84: 40\u5c81\n\u56fd\u7c4d: \u6cd5\u56fd\n\u6027\u522b: \u7537\u6027\n</code></pre></p> </li> </ol>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#3","title":"3. \u8fdb\u9636\u529f\u80fd","text":""},{"location":"dify/DIFY_INTEGRATION_DESIGN/#31","title":"3.1 \u591a\u8f6e\u5bf9\u8bdd\u652f\u6301","text":"<p>\u5728 Dify Agent \u4e2d\u914d\u7f6e\u5bf9\u8bdd\u8bb0\u5fc6\uff0c\u652f\u6301\u4e0a\u4e0b\u6587\u7406\u89e3\uff1a</p> <p>\u793a\u4f8b\u5bf9\u8bdd\uff1a <pre><code>\u7528\u6237: \u67e5\u8be2\u7528\u6237 id=5\nAI: \u627e\u5230\u4e86\u7528\u6237 Pierre Dubois\uff0c40\u5c81\uff0c\u6cd5\u56fd\u4eba\u3002\n\n\u7528\u6237: \u4ed6\u7684\u5e74\u9f84\u662f\u591a\u5c11\uff1f\nAI: Pierre Dubois \u4eca\u5e7440\u5c81\u3002\n\n\u7528\u6237: \u518d\u67e5\u8be2\u4e00\u4e0b id=3 \u7684\u7528\u6237\nAI: [\u8c03\u7528\u5de5\u5177\u67e5\u8be2 id=3]\n</code></pre></p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#32","title":"3.2 \u9519\u8bef\u5904\u7406","text":"<p>\u5728\u7cfb\u7edf\u63d0\u793a\u8bcd\u4e2d\u6dfb\u52a0\u9519\u8bef\u5904\u7406\u903b\u8f91\uff1a</p> <pre><code>\u5982\u679c\u5de5\u5177\u8c03\u7528\u5931\u8d25\uff1a\n1. \u68c0\u67e5 error \u5b57\u6bb5\n2. \u5411\u7528\u6237\u53cb\u597d\u5730\u8bf4\u660e\u9519\u8bef\u539f\u56e0\n3. \u5efa\u8bae\u7528\u6237\u5982\u4f55\u4fee\u6b63\n\n\u5e38\u89c1\u9519\u8bef\uff1a\n- \u7528\u6237\u4e0d\u5b58\u5728\uff1a\u63d0\u793a\"\u672a\u627e\u5230\u8be5\u7528\u6237\uff0c\u8bf7\u68c0\u67e5ID\u662f\u5426\u6b63\u786e\"\n- \u53c2\u6570\u9519\u8bef\uff1a\u63d0\u793a\"\u53c2\u6570\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u63d0\u4f9b\u6709\u6548\u7684\u7528\u6237ID\"\n- \u670d\u52a1\u4e0d\u53ef\u7528\uff1a\u63d0\u793a\"\u670d\u52a1\u6682\u65f6\u4e0d\u53ef\u7528\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\"\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#33","title":"3.3 \u6279\u91cf\u64cd\u4f5c","text":"<p>\u652f\u6301\u6279\u91cf\u67e5\u8be2\u573a\u666f\uff1a</p> <pre><code>\u7528\u6237: \u67e5\u8be2\u7528\u6237 id=1, 2, 3, 4, 5 \u7684\u4fe1\u606f\nAI: [\u5e76\u53d1\u8c03\u75285\u6b21 getPersonById \u5de5\u5177]\n    [\u6c47\u603b\u7ed3\u679c\u5e76\u5c55\u793a]\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#34","title":"3.4 \u6570\u636e\u53ef\u89c6\u5316","text":"<p>\u5728 Dify \u4e2d\u6dfb\u52a0\u56fe\u8868\u5c55\u793a\u8282\u70b9\uff1a</p> <pre><code>def format_users_table(users: list) -&gt; str:\n    \"\"\"\u5c06\u7528\u6237\u5217\u8868\u683c\u5f0f\u5316\u4e3a Markdown \u8868\u683c\"\"\"\n    table = \"| ID | \u59d3\u540d | \u5e74\u9f84 | \u56fd\u7c4d | \u6027\u522b |\\n\"\n    table += \"|---|---|---|---|---|\\n\"\n    for user in users:\n        table += f\"| {user['id']} | {user['firstName']} {user['lastName']} | {user['age']} | {user['nationality']} | {user['gender']} |\\n\"\n    return table\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#4","title":"4. \u90e8\u7f72\u5efa\u8bae","text":""},{"location":"dify/DIFY_INTEGRATION_DESIGN/#41","title":"4.1 \u751f\u4ea7\u73af\u5883\u914d\u7f6e","text":"<pre><code># Dify \u73af\u5883\u53d8\u91cf\u914d\u7f6e\nMCP_ROUTER_BASE_URL: https://mcp-router.example.com\nMCP_SERVER_KEY: mcp-server-v6\nREQUEST_TIMEOUT: 30000  # 30\u79d2\u8d85\u65f6\nRETRY_COUNT: 3          # \u91cd\u8bd53\u6b21\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#42","title":"4.2 \u5b89\u5168\u8003\u8651","text":"<ol> <li>\u8ba4\u8bc1\u6388\u6743</li> <li>\u4e3a MCP Router \u6dfb\u52a0 API Key \u8ba4\u8bc1</li> <li> <p>\u5728 Dify HTTP \u8bf7\u6c42\u4e2d\u914d\u7f6e Authorization Header</p> </li> <li> <p>\u901f\u7387\u9650\u5236</p> </li> <li>\u5728 Dify \u4e2d\u914d\u7f6e\u8bf7\u6c42\u9891\u7387\u9650\u5236</li> <li> <p>\u9632\u6b62\u6076\u610f\u7528\u6237\u6ee5\u7528</p> </li> <li> <p>\u6570\u636e\u8131\u654f</p> </li> <li>\u654f\u611f\u5b57\u6bb5\uff08\u5982\u8eab\u4efd\u8bc1\u53f7\uff09\u4e0d\u8fd4\u56de\u6216\u8131\u654f\u5904\u7406</li> </ol>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#43","title":"4.3 \u76d1\u63a7\u544a\u8b66","text":"<ol> <li>\u65e5\u5fd7\u8bb0\u5f55</li> <li>\u8bb0\u5f55\u6240\u6709 MCP \u5de5\u5177\u8c03\u7528</li> <li> <p>\u4f7f\u7528 MCP Router \u7684\u8def\u7531\u65e5\u5fd7\u529f\u80fd</p> </li> <li> <p>\u6027\u80fd\u76d1\u63a7</p> </li> <li>\u76d1\u63a7\u54cd\u5e94\u65f6\u95f4\uff08metadata.responseTime\uff09</li> <li> <p>\u8bbe\u7f6e\u544a\u8b66\u9608\u503c\uff08\u5982 &gt;2\u79d2\uff09</p> </li> <li> <p>\u9519\u8bef\u8ffd\u8e2a</p> </li> <li>\u6536\u96c6\u9519\u8bef\u65e5\u5fd7</li> <li>\u5206\u6790\u5e38\u89c1\u9519\u8bef\u539f\u56e0</li> </ol>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#5","title":"5. \u6d4b\u8bd5\u7528\u4f8b","text":""},{"location":"dify/DIFY_INTEGRATION_DESIGN/#51","title":"5.1 \u529f\u80fd\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5\u7528\u4f8b1\uff1a\u67e5\u8be2\u5b58\u5728\u7684\u7528\u6237 <pre><code>\u8f93\u5165: \u67e5\u8be2\u7528\u6237 id=5\n\u671f\u671b: \u8fd4\u56de Pierre Dubois \u7684\u5b8c\u6574\u4fe1\u606f\n</code></pre></p> <p>\u6d4b\u8bd5\u7528\u4f8b2\uff1a\u67e5\u8be2\u4e0d\u5b58\u5728\u7684\u7528\u6237 <pre><code>\u8f93\u5165: \u67e5\u8be2\u7528\u6237 id=999\n\u671f\u671b: \u63d0\u793a\u7528\u6237\u4e0d\u5b58\u5728\n</code></pre></p> <p>\u6d4b\u8bd5\u7528\u4f8b3\uff1a\u67e5\u8be2\u6240\u6709\u7528\u6237 <pre><code>\u8f93\u5165: \u67e5\u8be2\u6240\u6709\u7528\u6237\n\u671f\u671b: \u8fd4\u56de\u7528\u6237\u5217\u8868\n</code></pre></p> <p>\u6d4b\u8bd5\u7528\u4f8b4\uff1a\u6dfb\u52a0\u65b0\u7528\u6237 <pre><code>\u8f93\u5165: \u6dfb\u52a0\u65b0\u7528\u6237\uff0c\u540d\u5b57\u53eb\u5f20\u4e09\uff0c25\u5c81\uff0c\u4e2d\u56fd\u4eba\uff0c\u7537\u6027\n\u671f\u671b: \u6210\u529f\u6dfb\u52a0\u5e76\u8fd4\u56de\u65b0\u7528\u6237ID\n</code></pre></p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#52","title":"5.2 \u5f02\u5e38\u6d4b\u8bd5","text":"<p>\u6d4b\u8bd5\u7528\u4f8b5\uff1a\u65e0\u6548\u53c2\u6570 <pre><code>\u8f93\u5165: \u67e5\u8be2\u7528\u6237 id=abc\n\u671f\u671b: \u63d0\u793a\u53c2\u6570\u683c\u5f0f\u9519\u8bef\n</code></pre></p> <p>\u6d4b\u8bd5\u7528\u4f8b6\uff1a\u670d\u52a1\u4e0d\u53ef\u7528 <pre><code>\u573a\u666f: MCP Server \u5173\u95ed\n\u671f\u671b: \u53cb\u597d\u63d0\u793a\u670d\u52a1\u4e0d\u53ef\u7528\n</code></pre></p> <p>\u6d4b\u8bd5\u7528\u4f8b7\uff1a\u8d85\u65f6\u5904\u7406 <pre><code>\u573a\u666f: \u8bf7\u6c42\u8d85\u8fc730\u79d2\n\u671f\u671b: \u8fd4\u56de\u8d85\u65f6\u9519\u8bef\n</code></pre></p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#6","title":"6. \u5feb\u901f\u5f00\u59cb\u6307\u5357","text":""},{"location":"dify/DIFY_INTEGRATION_DESIGN/#61","title":"6.1 \u524d\u7f6e\u6761\u4ef6","text":"<ul> <li>\u2705 MCP Router V3 \u5df2\u542f\u52a8\uff08\u7aef\u53e3 8052\uff09</li> <li>\u2705 MCP Server V6 \u5df2\u6ce8\u518c\u5e76\u8fd0\u884c</li> <li>\u2705 Dify \u5e73\u53f0\u5df2\u90e8\u7f72</li> </ul>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#62-5","title":"6.2 \u914d\u7f6e\u6b65\u9aa4\uff085\u5206\u949f\uff09","text":"<ol> <li>\u5bfc\u5165 OpenAPI \u89c4\u8303</li> <li>\u590d\u5236\u4e0a\u9762\u7684 OpenAPI YAML</li> <li> <p>\u5728 Dify \u4e2d\u5bfc\u5165</p> </li> <li> <p>\u521b\u5efa Agent \u5e94\u7528</p> </li> <li>\u4f7f\u7528\u4e0a\u9762\u7684\u7cfb\u7edf\u63d0\u793a\u8bcd</li> <li> <p>\u7ed1\u5b9a callTool \u5de5\u5177</p> </li> <li> <p>\u6d4b\u8bd5\u9a8c\u8bc1 <pre><code>\u8f93\u5165: \u67e5\u8be2\u7528\u6237 id=5\n</code></pre></p> </li> <li> <p>\u53d1\u5e03\u5e94\u7528</p> </li> <li>\u751f\u6210 API \u6216 Web \u8bbf\u95ee\u94fe\u63a5</li> <li>\u5206\u4eab\u7ed9\u7528\u6237\u4f7f\u7528</li> </ol>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#7-faq","title":"7. \u5e38\u89c1\u95ee\u9898 FAQ","text":"<p>Q1: \u5982\u4f55\u652f\u6301\u66f4\u591a MCP Server\uff1f A: \u4fee\u6539\u7cfb\u7edf\u63d0\u793a\u8bcd\uff0c\u6dfb\u52a0\u670d\u52a1\u5668\u9009\u62e9\u903b\u8f91\uff0c\u6839\u636e\u7528\u6237\u610f\u56fe\u52a8\u6001\u9009\u62e9 serverKey\u3002</p> <p>Q2: \u5982\u4f55\u63d0\u9ad8\u54cd\u5e94\u901f\u5ea6\uff1f A:  - \u4f7f\u7528\u7f13\u5b58\uff08getAllPersons \u7ed3\u679c\uff09 - \u542f\u7528 MCP Router \u7684\u667a\u80fd\u8def\u7531 - \u4f18\u5316\u6570\u636e\u5e93\u67e5\u8be2</p> <p>Q3: \u5982\u4f55\u5904\u7406\u5927\u91cf\u6570\u636e\u8fd4\u56de\uff1f A: - \u5b9e\u73b0\u5206\u9875\uff08\u4fee\u6539 MCP \u5de5\u5177\uff09 - \u8fd4\u56de\u6458\u8981\u4fe1\u606f - \u63d0\u4f9b\u4e0b\u8f7d\u94fe\u63a5</p> <p>Q4: \u5982\u4f55\u652f\u6301\u6587\u4ef6\u4e0a\u4f20\uff1f A:  - \u4f7f\u7528 Dify \u7684\u6587\u4ef6\u4e0a\u4f20\u8282\u70b9 - \u8f6c\u6362\u4e3a Base64 - \u901a\u8fc7 MCP \u5de5\u5177\u4f20\u9012</p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#8","title":"8. \u4e0b\u4e00\u6b65\u8ba1\u5212","text":"<ul> <li> \u5b9e\u73b0 OpenAPI \u89c4\u8303\u81ea\u52a8\u751f\u6210\uff08\u4ece MCP tools/list\uff09</li> <li> \u652f\u6301\u6d41\u5f0f\u54cd\u5e94\uff08SSE\uff09</li> <li> \u6dfb\u52a0\u8bed\u97f3\u4ea4\u4e92</li> <li> \u5b9e\u73b0\u591a\u6a21\u6001\u652f\u6301\uff08\u56fe\u7247\u3001\u89c6\u9891\uff09</li> <li> \u96c6\u6210\u5230\u4f01\u4e1a\u5fae\u4fe1/\u9489\u9489</li> </ul>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#_1","title":"\u9644\u5f55","text":""},{"location":"dify/DIFY_INTEGRATION_DESIGN/#a","title":"A. \u5b8c\u6574\u793a\u4f8b\u4ee3\u7801","text":"<p>\u53c2\u8003\u9879\u76ee\uff1a - Dify \u5de5\u4f5c\u6d41\u914d\u7f6e\u6587\u4ef6 - OpenAPI \u89c4\u8303\u6587\u4ef6 - \u6d4b\u8bd5\u811a\u672c</p>"},{"location":"dify/DIFY_INTEGRATION_DESIGN/#b","title":"B. \u76f8\u5173\u6587\u6863","text":"<ul> <li>MCP \u534f\u8bae\u89c4\u8303</li> <li>Dify \u5b98\u65b9\u6587\u6863</li> <li>OpenAPI \u89c4\u8303</li> </ul>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/","title":"MCP Router V3 \u63a5\u5165 Dify - \u603b\u7ed3\u6587\u6863","text":""},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_1","title":"\ud83d\udcca \u63a5\u53e3\u5206\u6790\u603b\u7ed3","text":""},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#1-toolslist","title":"\u63a5\u53e31: tools/list\uff08\u5de5\u5177\u5217\u8868\uff09","text":"<p>\u7528\u9014\uff1a \u83b7\u53d6 MCP Server \u4e0a\u6240\u6709\u53ef\u7528\u5de5\u5177\u7684\u5217\u8868</p> <p>\u8bf7\u6c42\uff1a <pre><code>GET http://localhost:8052/mcp/router/tools/mcp-server-v6\n</code></pre></p> <p>\u54cd\u5e94\uff1a <pre><code>{\n  \"tools\": [\n    {\n      \"name\": \"getPersonById\",\n      \"description\": \"Get a person by their ID\",\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": {\"type\": \"integer\", \"description\": \"Person's ID\"}\n        },\n        \"required\": [\"id\"]\n      }\n    },\n    {\n      \"name\": \"getAllPersons\",\n      \"description\": \"Get all persons from the database\",\n      \"inputSchema\": {\"type\": \"object\", \"properties\": {}}\n    },\n    {\n      \"name\": \"addPerson\",\n      \"description\": \"Add a new person to the database\",\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"firstName\": {\"type\": \"string\"},\n          \"lastName\": {\"type\": \"string\"},\n          \"age\": {\"type\": \"integer\"},\n          \"nationality\": {\"type\": \"string\"},\n          \"gender\": {\"type\": \"string\"}\n        },\n        \"required\": [\"firstName\", \"lastName\", \"age\", \"nationality\", \"gender\"]\n      }\n    }\n  ]\n}\n</code></pre></p> <p>\u5173\u952e\u5b57\u6bb5\uff1a - <code>tools</code>: \u5de5\u5177\u6570\u7ec4 - <code>name</code>: \u5de5\u5177\u540d\u79f0\uff08\u7528\u4e8e\u8c03\u7528\uff09 - <code>description</code>: \u5de5\u5177\u63cf\u8ff0\uff08\u5e2e\u52a9 LLM \u7406\u89e3\uff09 - <code>inputSchema</code>: \u53c2\u6570\u5b9a\u4e49\uff08JSON Schema \u683c\u5f0f\uff09</p>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#2-toolscall","title":"\u63a5\u53e32: tools/call\uff08\u5de5\u5177\u8c03\u7528\uff09","text":"<p>\u7528\u9014\uff1a \u8c03\u7528 MCP Server \u4e0a\u7684\u5177\u4f53\u5de5\u5177</p> <p>\u8bf7\u6c42\uff1a <pre><code>POST http://localhost:8052/mcp/router/route/mcp-server-v6\nContent-Type: application/json\n\n{\n  \"id\": \"req-12345\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"getPersonById\",\n    \"arguments\": { \"id\": 5 }\n  }\n}\n</code></pre></p> <p>\u54cd\u5e94\uff1a <pre><code>{\n  \"id\": \"req-12345\",\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"getPersonById\",\n    \"arguments\": { \"id\": 5 }\n  },\n  \"result\": {\n    \"id\": 5,\n    \"firstName\": \"Pierre\",\n    \"lastName\": \"Dubois\",\n    \"age\": 40,\n    \"nationality\": \"French\",\n    \"gender\": \"MALE\",\n    \"found\": true\n  },\n  \"error\": null,\n  \"metadata\": {\n    \"targetServer\": \"mcp-server-v6\",\n    \"responseTime\": 35,\n    \"routingStrategy\": \"intelligent\",\n    \"toolName\": \"getPersonById\"\n  }\n}\n</code></pre></p> <p>\u5173\u952e\u5b57\u6bb5\uff1a - \u8bf7\u6c42\u90e8\u5206\uff1a   - <code>id</code>: \u8bf7\u6c42ID\uff08\u5efa\u8bae\u7528UUID\uff09   - <code>method</code>: \u56fa\u5b9a\u503c <code>tools/call</code>   - <code>params.name</code>: \u5de5\u5177\u540d\u79f0   - <code>params.arguments</code>: \u5de5\u5177\u53c2\u6570\uff08\u6839\u636e inputSchema\uff09</p> <ul> <li>\u54cd\u5e94\u90e8\u5206\uff1a</li> <li><code>result</code>: \u5de5\u5177\u6267\u884c\u7ed3\u679c\uff08\u6210\u529f\u65f6\uff09</li> <li><code>error</code>: \u9519\u8bef\u4fe1\u606f\uff08\u5931\u8d25\u65f6\uff09</li> <li><code>metadata</code>: \u8def\u7531\u5143\u6570\u636e\uff08\u6027\u80fd\u3001\u7b56\u7565\u7b49\uff09</li> </ul>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#dify","title":"\ud83c\udfaf Dify \u63a5\u5165\u65b9\u6848","text":""},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_2","title":"\u65b9\u6848\u5bf9\u6bd4","text":"\u7279\u6027 \u65b9\u6848A: HTTP\u5de5\u4f5c\u6d41 \u65b9\u6848B: OpenAPI\u5de5\u5177 \u96be\u5ea6 \u2b50\u2b50 \u7b80\u5355 \u2b50\u2b50\u2b50 \u4e2d\u7b49 \u7075\u6d3b\u6027 \u2b50\u2b50\u2b50 \u9ad8 \u2b50\u2b50\u2b50\u2b50 \u5f88\u9ad8 \u7ef4\u62a4\u6210\u672c \u2b50\u2b50 \u4f4e \u2b50 \u5f88\u4f4e \u5de5\u5177\u53d1\u73b0 \u274c \u624b\u52a8\u914d\u7f6e \u2705 \u81ea\u52a8\u53d1\u73b0 \u591a\u670d\u52a1\u5668 \u2b50\u2b50 \u9700\u4fee\u6539 \u2b50\u2b50\u2b50\u2b50 \u6613\u6269\u5c55 \u63a8\u8350\u573a\u666f \u5355\u670d\u52a1\u5668\u3001\u5feb\u901f\u9a8c\u8bc1 \u591a\u670d\u52a1\u5668\u3001\u751f\u4ea7\u73af\u5883"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#bopenapi","title":"\u63a8\u8350\uff1a\u65b9\u6848B\uff08OpenAPI \u5de5\u5177\u96c6\u6210\uff09","text":"<p>\u539f\u56e0\uff1a 1. \u2705 \u81ea\u52a8\u5de5\u5177\u53d1\u73b0\uff0c\u65e0\u9700\u624b\u52a8\u914d\u7f6e 2. \u2705 \u6807\u51c6\u5316\u63a5\u53e3\uff0c\u6613\u4e8e\u7ef4\u62a4 3. \u2705 \u652f\u6301\u591a MCP Server\uff0c\u6613\u6269\u5c55 4. \u2705 Dify \u539f\u751f\u652f\u6301\uff0c\u7528\u6237\u4f53\u9a8c\u597d 5. \u2705 \u5de5\u5177\u53c2\u6570\u81ea\u52a8\u6821\u9a8c</p>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_3","title":"\ud83d\udd04 \u5b8c\u6574\u8c03\u7528\u6d41\u7a0b","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Step 1: \u7528\u6237\u8f93\u5165                                             \u2502\n\u2502  \"\u67e5\u8be2\u7528\u6237 id=5\"                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Step 2: Dify LLM \u7406\u89e3\u610f\u56fe                                   \u2502\n\u2502  - \u8bc6\u522b\uff1a\u67e5\u8be2\u7528\u6237\u4fe1\u606f                                         \u2502\n\u2502  - \u5de5\u5177\uff1agetPersonById                                        \u2502\n\u2502  - \u53c2\u6570\uff1a{id: 5}                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Step 3: \u6784\u9020 MCP \u8bf7\u6c42                                       \u2502\n\u2502  {                                                            \u2502\n\u2502    \"id\": \"uuid\",                                              \u2502\n\u2502    \"method\": \"tools/call\",                                    \u2502\n\u2502    \"params\": {                                                \u2502\n\u2502      \"name\": \"getPersonById\",                                 \u2502\n\u2502      \"arguments\": {\"id\": 5}                                   \u2502\n\u2502    }                                                          \u2502\n\u2502  }                                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Step 4: \u8c03\u7528 MCP Router                                     \u2502\n\u2502  POST /mcp/router/route/mcp-server-v6                        \u2502\n\u2502                                                               \u2502\n\u2502  \u2192 MCP Router \u667a\u80fd\u8def\u7531                                       \u2502\n\u2502  \u2192 \u8d1f\u8f7d\u5747\u8861\u5230\u6700\u4f18\u670d\u52a1\u5668                                       \u2502\n\u2502  \u2192 \u6267\u884c\u5de5\u5177\u903b\u8f91                                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Step 5: \u8fd4\u56de\u7ed3\u679c                                            \u2502\n\u2502  {                                                            \u2502\n\u2502    \"result\": {                                                \u2502\n\u2502      \"id\": 5,                                                 \u2502\n\u2502      \"firstName\": \"Pierre\",                                   \u2502\n\u2502      \"lastName\": \"Dubois\",                                    \u2502\n\u2502      \"age\": 40,                                               \u2502\n\u2502      \"nationality\": \"French\",                                 \u2502\n\u2502      \"gender\": \"MALE\",                                        \u2502\n\u2502      \"found\": true                                            \u2502\n\u2502    },                                                         \u2502\n\u2502    \"metadata\": {                                              \u2502\n\u2502      \"responseTime\": 35                                       \u2502\n\u2502    }                                                          \u2502\n\u2502  }                                                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                  \u2502\n                  v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Step 6: Dify LLM \u683c\u5f0f\u5316\u56de\u590d                                 \u2502\n\u2502  \"\u627e\u5230\u4e86\u7528\u6237\u4fe1\u606f\uff01                                            \u2502\n\u2502                                                               \u2502\n\u2502   \u7528\u6237ID: 5                                                   \u2502\n\u2502   \u59d3\u540d: Pierre Dubois                                         \u2502\n\u2502   \u5e74\u9f84: 40\u5c81                                                  \u2502\n\u2502   \u56fd\u7c4d: \u6cd5\u56fd                                                  \u2502\n\u2502   \u6027\u522b: \u7537\u6027\"                                                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_4","title":"\ud83d\udca1 \u6838\u5fc3\u8bbe\u8ba1\u8981\u70b9","text":""},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#1","title":"1. \u7cfb\u7edf\u63d0\u793a\u8bcd\u8bbe\u8ba1","text":"<p>\u5173\u952e\u8981\u7d20\uff1a <pre><code>\u2705 \u89d2\u8272\u5b9a\u4e49\uff1a\u4f60\u662f\u4e00\u4e2a\u7528\u6237\u4fe1\u606f\u67e5\u8be2\u52a9\u624b\n\u2705 \u80fd\u529b\u8bf4\u660e\uff1a\u53ef\u4ee5\u67e5\u8be2\u3001\u6dfb\u52a0\u3001\u7ba1\u7406\u7528\u6237\u4fe1\u606f\n\u2705 \u5de5\u5177\u5217\u8868\uff1a\u5217\u51fa\u6240\u6709\u53ef\u7528\u5de5\u5177\u53ca\u53c2\u6570\n\u2705 \u8c03\u7528\u793a\u4f8b\uff1a\u63d0\u4f9b\u5177\u4f53\u7684\u8c03\u7528\u793a\u4f8b\n\u2705 \u9519\u8bef\u5904\u7406\uff1a\u8bf4\u660e\u5982\u4f55\u5904\u7406\u5404\u79cd\u9519\u8bef\n\u2705 \u56de\u590d\u683c\u5f0f\uff1a\u8981\u6c42\u53cb\u597d\u3001\u7b80\u6d01\u7684\u56de\u590d\n</code></pre></p> <p>\u793a\u4f8b\u63d0\u793a\u8bcd\uff1a <pre><code>\u4f60\u662f\u4e00\u4e2a\u7528\u6237\u4fe1\u606f\u7ba1\u7406\u52a9\u624b\u3002\u4f60\u53ef\u4ee5\uff1a\n1. \u6839\u636eID\u67e5\u8be2\u7528\u6237\uff08\u5de5\u5177: getPersonById\uff09\n2. \u67e5\u770b\u6240\u6709\u7528\u6237\uff08\u5de5\u5177: getAllPersons\uff09\n3. \u6dfb\u52a0\u65b0\u7528\u6237\uff08\u5de5\u5177: addPerson\uff09\n\n\u5f53\u7528\u6237\u8be2\u95ee\"\u67e5\u8be2\u7528\u6237 id=5\"\u65f6\uff0c\u4f60\u5e94\u8be5\uff1a\n1. \u8c03\u7528 callMcpTool \u5de5\u5177\n2. \u53c2\u6570\u8bbe\u7f6e\u4e3a\uff1a\n   {\n     \"serverKey\": \"mcp-server-v6\",\n     \"body\": {\n       \"id\": \"uuid\",\n       \"method\": \"tools/call\",\n       \"params\": {\n         \"name\": \"getPersonById\",\n         \"arguments\": {\"id\": 5}\n       }\n     }\n   }\n3. \u6839\u636e\u8fd4\u56de\u7684 result \u5b57\u6bb5\uff0c\u53cb\u597d\u5730\u56de\u590d\u7528\u6237\n\n\u8bf7\u59cb\u7ec8\u7528\u53cb\u597d\u3001\u7b80\u6d01\u7684\u8bed\u8a00\u4e0e\u7528\u6237\u4ea4\u6d41\u3002\n</code></pre></p>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#2","title":"2. \u53c2\u6570\u63d0\u53d6\u4e0e\u6821\u9a8c","text":"<p>LLM \u63d0\u53d6\uff1a <pre><code>// LLM \u4ece\u81ea\u7136\u8bed\u8a00\u4e2d\u63d0\u53d6\u7ed3\u6784\u5316\u53c2\u6570\n\u8f93\u5165: \"\u67e5\u8be2\u7528\u6237 id=5\"\n\u8f93\u51fa: {\n  \"toolName\": \"getPersonById\",\n  \"arguments\": {\"id\": 5}\n}\n\n\u8f93\u5165: \"\u6dfb\u52a0\u7528\u6237\u5f20\u4e09\uff0c25\u5c81\uff0c\u4e2d\u56fd\u4eba\uff0c\u7537\u6027\"\n\u8f93\u51fa: {\n  \"toolName\": \"addPerson\",\n  \"arguments\": {\n    \"firstName\": \"\u5f20\",\n    \"lastName\": \"\u4e09\",\n    \"age\": 25,\n    \"nationality\": \"Chinese\",\n    \"gender\": \"MALE\"\n  }\n}\n</code></pre></p> <p>\u4ee3\u7801\u6821\u9a8c\uff1a <pre><code>def validate_arguments(tool_name: str, arguments: dict) -&gt; bool:\n    \"\"\"\u6821\u9a8c\u53c2\u6570\u662f\u5426\u7b26\u5408\u5de5\u5177\u8981\u6c42\"\"\"\n    schemas = {\n        \"getPersonById\": {\"id\": \"integer\"},\n        \"addPerson\": {\n            \"firstName\": \"string\",\n            \"lastName\": \"string\",\n            \"age\": \"integer\",\n            \"nationality\": \"string\",\n            \"gender\": \"string\"\n        }\n    }\n\n    schema = schemas.get(tool_name)\n    if not schema:\n        return False\n\n    # \u68c0\u67e5\u5fc5\u586b\u5b57\u6bb5\n    for field, type_name in schema.items():\n        if field not in arguments:\n            return False\n        # \u7c7b\u578b\u68c0\u67e5...\n\n    return True\n</code></pre></p>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#3","title":"3. \u9519\u8bef\u5904\u7406\u7b56\u7565","text":"<p>\u9519\u8bef\u5206\u7c7b\uff1a <pre><code>1. \u53c2\u6570\u9519\u8bef\uff08400\uff09\n   \u2192 \u63d0\u793a\u7528\u6237\u4fee\u6b63\u53c2\u6570\u683c\u5f0f\n\n2. \u5de5\u5177\u672a\u627e\u5230\uff08404\uff09\n   \u2192 \u63d0\u793a\u5de5\u5177\u4e0d\u5b58\u5728\uff0c\u5217\u51fa\u53ef\u7528\u5de5\u5177\n\n3. \u670d\u52a1\u4e0d\u53ef\u7528\uff08500/503\uff09\n   \u2192 \u53cb\u597d\u63d0\u793a\u670d\u52a1\u6682\u65f6\u4e0d\u53ef\u7528\uff0c\u5efa\u8bae\u7a0d\u540e\u91cd\u8bd5\n\n4. \u8d85\u65f6\u9519\u8bef\n   \u2192 \u63d0\u793a\u8bf7\u6c42\u8d85\u65f6\uff0c\u5efa\u8bae\u7b80\u5316\u67e5\u8be2\u6761\u4ef6\n\n5. \u4e1a\u52a1\u9519\u8bef\uff08found: false\uff09\n   \u2192 \u63d0\u793a\u6570\u636e\u4e0d\u5b58\u5728\uff0c\u5efa\u8bae\u68c0\u67e5\u53c2\u6570\n</code></pre></p> <p>\u9519\u8bef\u5904\u7406\u793a\u4f8b\uff1a <pre><code>def handle_mcp_response(response: dict) -&gt; str:\n    \"\"\"\u5904\u7406 MCP \u54cd\u5e94\uff0c\u751f\u6210\u53cb\u597d\u63d0\u793a\"\"\"\n\n    # \u68c0\u67e5 HTTP \u9519\u8bef\n    if response.status_code != 200:\n        return f\"\u670d\u52a1\u6682\u65f6\u4e0d\u53ef\u7528\uff08\u9519\u8bef\u7801: {response.status_code}\uff09\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002\"\n\n    data = response.json()\n\n    # \u68c0\u67e5 MCP \u9519\u8bef\n    if data.get('error'):\n        error = data['error']\n        return f\"\u64cd\u4f5c\u5931\u8d25: {error.get('message', '\u672a\u77e5\u9519\u8bef')}\"\n\n    # \u68c0\u67e5\u4e1a\u52a1\u7ed3\u679c\n    result = data.get('result', {})\n    if not result.get('found', True):\n        return \"\u672a\u627e\u5230\u76f8\u5173\u6570\u636e\uff0c\u8bf7\u68c0\u67e5\u67e5\u8be2\u53c2\u6570\u3002\"\n\n    # \u6210\u529f\n    return format_success_message(result)\n</code></pre></p>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#4","title":"4. \u6027\u80fd\u4f18\u5316","text":"<p>\u7f13\u5b58\u7b56\u7565\uff1a <pre><code># \u9002\u5408\u7f13\u5b58\u7684\u573a\u666f\ngetAllPersons:\n  cache: true\n  ttl: 300  # 5\u5206\u949f\n\n# \u4e0d\u9002\u5408\u7f13\u5b58\u7684\u573a\u666f  \ngetPersonById:\n  cache: false  # \u5b9e\u65f6\u6570\u636e\n\naddPerson:\n  cache: false  # \u5199\u64cd\u4f5c\n</code></pre></p> <p>\u5e76\u53d1\u63a7\u5236\uff1a <pre><code># \u6279\u91cf\u67e5\u8be2\nasync def query_multiple_users(ids: list) -&gt; list:\n    tasks = [query_user(id) for id in ids]\n    results = await asyncio.gather(*tasks)\n    return results\n\n# \u9650\u5236\u5e76\u53d1\u6570\nsemaphore = asyncio.Semaphore(5)  # \u6700\u591a5\u4e2a\u5e76\u53d1\n</code></pre></p>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_5","title":"\ud83d\udcc8 \u6027\u80fd\u6307\u6807","text":""},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_6","title":"\u6d4b\u8bd5\u7ed3\u679c","text":"<p>\u5355\u6b21\u67e5\u8be2\u6027\u80fd\uff1a <pre><code>\u5de5\u5177: getPersonById\n\u53c2\u6570: {id: 5}\n\u54cd\u5e94\u65f6\u95f4: 35ms \u2705\n\u6210\u529f\u7387: 100% \u2705\n</code></pre></p> <p>\u6279\u91cf\u67e5\u8be2\u6027\u80fd\uff1a <pre><code>\u5de5\u5177: getAllPersons\n\u7ed3\u679c\u6570\u91cf: 13\n\u54cd\u5e94\u65f6\u95f4: 42ms \u2705\n\u6210\u529f\u7387: 100% \u2705\n</code></pre></p> <p>\u9519\u8bef\u573a\u666f\u5904\u7406\uff1a <pre><code>\u573a\u666f: \u67e5\u8be2\u4e0d\u5b58\u5728\u7684\u7528\u6237 (id=99999)\n\u54cd\u5e94\u65f6\u95f4: 38ms \u2705\n\u8fd4\u56de: {\"found\": false, \"message\": \"...\"}\n\u6210\u529f\u7387: 100% \u2705\n</code></pre></p>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_7","title":"\u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":"<ol> <li>\u542f\u7528 HTTP/2</li> <li>\u51cf\u5c11\u8fde\u63a5\u5f00\u9500</li> <li> <p>\u652f\u6301\u591a\u8def\u590d\u7528</p> </li> <li> <p>\u4f7f\u7528\u8fde\u63a5\u6c60</p> </li> <li>\u590d\u7528 TCP \u8fde\u63a5</li> <li> <p>\u51cf\u5c11\u63e1\u624b\u65f6\u95f4</p> </li> <li> <p>\u542f\u7528\u54cd\u5e94\u538b\u7f29</p> </li> <li>gzip \u538b\u7f29\u54cd\u5e94\u4f53</li> <li> <p>\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93</p> </li> <li> <p>\u6570\u636e\u5e93\u4f18\u5316</p> </li> <li>\u6dfb\u52a0\u7d22\u5f15\uff08id, firstName, lastName\uff09</li> <li>\u4f7f\u7528\u67e5\u8be2\u7f13\u5b58</li> </ol>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_8","title":"\ud83d\udd12 \u5b89\u5168\u5efa\u8bae","text":""},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#1_1","title":"1. \u8ba4\u8bc1\u6388\u6743","text":"<pre><code># MCP Router \u914d\u7f6e\nsecurity:\n  enabled: true\n  auth-type: API_KEY\n\n# Dify HTTP \u8bf7\u6c42\u914d\u7f6e\nheaders:\n  X-API-Key: ${env.MCP_API_KEY}\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#2_1","title":"2. \u901f\u7387\u9650\u5236","text":"<pre><code>rate-limit:\n  enabled: true\n  requests-per-second: 10\n  burst: 20\n  scope: per-client  # \u6309\u5ba2\u6237\u7aef\u9650\u6d41\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#3_1","title":"3. \u6570\u636e\u8131\u654f","text":"<pre><code>def mask_sensitive_data(person: dict) -&gt; dict:\n    \"\"\"\u8131\u654f\u654f\u611f\u4fe1\u606f\"\"\"\n    if 'ssn' in person:\n        person['ssn'] = '***-**-' + person['ssn'][-4:]\n    if 'phone' in person:\n        person['phone'] = person['phone'][:3] + '****' + person['phone'][-4:]\n    return person\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#4_1","title":"4. \u8f93\u5165\u6821\u9a8c","text":"<pre><code>def validate_user_input(text: str) -&gt; bool:\n    \"\"\"\u6821\u9a8c\u7528\u6237\u8f93\u5165\uff0c\u9632\u6b62\u6ce8\u5165\u653b\u51fb\"\"\"\n    # \u68c0\u67e5 SQL \u6ce8\u5165\n    dangerous_patterns = ['DROP', 'DELETE', 'UPDATE', '--', ';']\n    for pattern in dangerous_patterns:\n        if pattern in text.upper():\n            return False\n\n    # \u68c0\u67e5\u957f\u5ea6\n    if len(text) &gt; 1000:\n        return False\n\n    return True\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_9","title":"\ud83d\udce6 \u4ea4\u4ed8\u7269\u6e05\u5355","text":""},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_10","title":"\u2705 \u5df2\u5b8c\u6210","text":"<ol> <li>\u8bbe\u8ba1\u6587\u6863</li> <li> <code>DIFY_INTEGRATION_DESIGN.md</code> - \u5b8c\u6574\u8bbe\u8ba1\u65b9\u6848\uff0836\u9875\uff09</li> <li> <code>DIFY_QUICK_START.md</code> - \u5feb\u901f\u5f00\u59cb\u6307\u5357</li> <li> <p> <code>DIFY_INTEGRATION_SUMMARY.md</code> - \u603b\u7ed3\u6587\u6863</p> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6</p> </li> <li> <code>mcp-router-openapi.yaml</code> - OpenAPI 3.0 \u89c4\u8303</li> <li> <p> <code>dify-workflow-example.json</code> - Dify \u5de5\u4f5c\u6d41\u914d\u7f6e</p> </li> <li> <p>\u6d4b\u8bd5\u811a\u672c</p> </li> <li> <code>test-dify-integration.sh</code> - \u81ea\u52a8\u5316\u6d4b\u8bd5\u811a\u672c</li> <li> <p> 6\u4e2a\u6d4b\u8bd5\u7528\u4f8b\uff0c\u5168\u90e8\u901a\u8fc7 \u2705</p> </li> <li> <p>\u63a5\u53e3\u9a8c\u8bc1</p> </li> <li> tools/list \u63a5\u53e3 - \u6b63\u5e38\u5de5\u4f5c \u2705</li> <li> tools/call \u63a5\u53e3 - \u6b63\u5e38\u5de5\u4f5c \u2705</li> <li> \u9519\u8bef\u573a\u666f\u5904\u7406 - \u6b63\u5e38\u5de5\u4f5c \u2705</li> </ol>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_11","title":"\ud83d\udccb \u4f7f\u7528\u6b65\u9aa4","text":"<pre><code># 1. \u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1\n./docs/test-dify-integration.sh\n\n# 2. \u67e5\u770b\u5feb\u901f\u5f00\u59cb\u6307\u5357\ncat docs/DIFY_QUICK_START.md\n\n# 3. \u5bfc\u5165 OpenAPI \u5230 Dify\n# \u6587\u4ef6: docs/mcp-router-openapi.yaml\n\n# 4. \u521b\u5efa Dify Agent/Workflow\n# \u53c2\u8003: docs/dify-workflow-example.json\n\n# 5. \u6d4b\u8bd5\u5bf9\u8bdd\n# \u8f93\u5165: \"\u67e5\u8be2\u7528\u6237 id=5\"\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_12","title":"\ud83c\udf89 \u793a\u4f8b\u5bf9\u8bdd","text":""},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#1_2","title":"\u573a\u666f1\uff1a\u67e5\u8be2\u7528\u6237","text":"<pre><code>\ud83d\udc64 \u7528\u6237: \u67e5\u8be2\u7528\u6237 id=5\n\n\ud83e\udd16 AI: \u6b63\u5728\u67e5\u8be2...\n\n[\u8c03\u7528 MCP Router]\nPOST /mcp/router/route/mcp-server-v6\n{\n  \"id\": \"uuid\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"getPersonById\",\n    \"arguments\": {\"id\": 5}\n  }\n}\n\n\ud83e\udd16 AI: \u627e\u5230\u4e86\u7528\u6237\u4fe1\u606f\uff01\n\n**\u7528\u6237ID:** 5  \n**\u59d3\u540d:** Pierre Dubois  \n**\u5e74\u9f84:** 40\u5c81  \n**\u56fd\u7c4d:** \u6cd5\u56fd \ud83c\uddeb\ud83c\uddf7  \n**\u6027\u522b:** \u7537\u6027\n\n\u67e5\u8be2\u8017\u65f6\uff1a35ms\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#2_2","title":"\u573a\u666f2\uff1a\u67e5\u770b\u6240\u6709\u7528\u6237","text":"<pre><code>\ud83d\udc64 \u7528\u6237: \u67e5\u770b\u6240\u6709\u7528\u6237\n\n\ud83e\udd16 AI: \u6b63\u5728\u67e5\u8be2\u6240\u6709\u7528\u6237...\n\n[\u8c03\u7528 MCP Router]\n...\n\n\ud83e\udd16 AI: \u5171\u627e\u5230 13 \u4e2a\u7528\u6237\uff1a\n\n| ID | \u59d3\u540d | \u5e74\u9f84 | \u56fd\u7c4d | \u6027\u522b |\n|:--:|:----:|:----:|:----:|:----:|\n| 1 | John Smith | 28 | \u7f8e\u56fd | \u7537 |\n| 2 | Jane Doe | 32 | \u82f1\u56fd | \u5973 |\n| 3 | Hans Mueller | 45 | \u5fb7\u56fd | \u7537 |\n| 4 | Maria Garcia | 29 | \u897f\u73ed\u7259 | \u5973 |\n| 5 | Pierre Dubois | 40 | \u6cd5\u56fd | \u7537 |\n| ... | ... | ... | ... | ... |\n\n\u67e5\u8be2\u8017\u65f6\uff1a42ms\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#3_2","title":"\u573a\u666f3\uff1a\u6dfb\u52a0\u7528\u6237","text":"<pre><code>\ud83d\udc64 \u7528\u6237: \u6dfb\u52a0\u65b0\u7528\u6237\uff0c\u540d\u5b57\u53eb\u5f20\u4e09\uff0c25\u5c81\uff0c\u4e2d\u56fd\u4eba\uff0c\u7537\u6027\n\n\ud83e\udd16 AI: \u6b63\u5728\u6dfb\u52a0\u7528\u6237...\n\n[\u8c03\u7528 MCP Router]\nPOST /mcp/router/route/mcp-server-v6\n{\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"addPerson\",\n    \"arguments\": {\n      \"firstName\": \"\u5f20\",\n      \"lastName\": \"\u4e09\",\n      \"age\": 25,\n      \"nationality\": \"Chinese\",\n      \"gender\": \"MALE\"\n    }\n  }\n}\n\n\ud83e\udd16 AI: \u2705 \u6210\u529f\u6dfb\u52a0\u7528\u6237\uff01\n\n**\u7528\u6237ID:** 14 (\u65b0)  \n**\u59d3\u540d:** \u5f20\u4e09  \n**\u5e74\u9f84:** 25\u5c81  \n**\u56fd\u7c4d:** \u4e2d\u56fd \ud83c\udde8\ud83c\uddf3  \n**\u6027\u522b:** \u7537\u6027\n\n\u7528\u6237\u5df2\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u3002\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#4_2","title":"\u573a\u666f4\uff1a\u9519\u8bef\u5904\u7406","text":"<pre><code>\ud83d\udc64 \u7528\u6237: \u67e5\u8be2\u7528\u6237 id=99999\n\n\ud83e\udd16 AI: \u6b63\u5728\u67e5\u8be2...\n\n[\u8c03\u7528 MCP Router]\n...\n\n\ud83e\udd16 AI: \u274c \u672a\u627e\u5230\u8be5\u7528\u6237\u3002\n\n\u539f\u56e0\uff1a\u6570\u636e\u5e93\u4e2d\u4e0d\u5b58\u5728 ID \u4e3a 99999 \u7684\u7528\u6237\u3002\n\n\ud83d\udca1 \u5efa\u8bae\uff1a\n- \u68c0\u67e5\u7528\u6237ID\u662f\u5426\u6b63\u786e\n- \u4f7f\u7528\"\u67e5\u770b\u6240\u6709\u7528\u6237\"\u67e5\u770b\u53ef\u7528\u7684\u7528\u6237\u5217\u8868\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_13","title":"\ud83d\udcca \u67b6\u6784\u56fe","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         Dify AI Platform                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  Agent / Workflow                                     \u2502   \u2502\n\u2502  \u2502  - \u7406\u89e3\u7528\u6237\u610f\u56fe                                       \u2502   \u2502\n\u2502  \u2502  - \u63d0\u53d6\u53c2\u6570                                           \u2502   \u2502\n\u2502  \u2502  - \u8c03\u7528 MCP \u5de5\u5177                                      \u2502   \u2502\n\u2502  \u2502  - \u683c\u5f0f\u5316\u54cd\u5e94                                         \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502 HTTP POST\n                         \u2502 JSON-RPC 2.0\n                         v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      MCP Router V3                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  \u6838\u5fc3\u529f\u80fd                                             \u2502   \u2502\n\u2502  \u2502  - \u667a\u80fd\u8def\u7531                                           \u2502   \u2502\n\u2502  \u2502  - \u8d1f\u8f7d\u5747\u8861                                           \u2502   \u2502\n\u2502  \u2502  - \u5065\u5eb7\u68c0\u67e5                                           \u2502   \u2502\n\u2502  \u2502  - \u7194\u65ad\u964d\u7ea7                                           \u2502   \u2502\n\u2502  \u2502  - \u65e5\u5fd7\u8bb0\u5f55                                           \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502 MCP SSE\n                         \u2502 Protocol\n                         v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      MCP Server V6                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502  \u5de5\u5177\u5b9e\u73b0                                             \u2502   \u2502\n\u2502  \u2502  - getPersonById                                      \u2502   \u2502\n\u2502  \u2502  - getAllPersons                                      \u2502   \u2502\n\u2502  \u2502  - addPerson                                          \u2502   \u2502\n\u2502  \u2502  - ...                                                \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502 JDBC\n                         v\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      MySQL Database                           \u2502\n\u2502  - persons \u8868                                                 \u2502\n\u2502  - 13 \u6761\u6d4b\u8bd5\u6570\u636e                                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_14","title":"\ud83d\udd17 \u76f8\u5173\u94fe\u63a5","text":"<ul> <li>\u8bbe\u8ba1\u6587\u6863\uff1a DIFY_INTEGRATION_DESIGN.md</li> <li>\u5feb\u901f\u5f00\u59cb\uff1a DIFY_QUICK_START.md</li> <li>OpenAPI \u89c4\u8303\uff1a mcp-router-openapi.yaml</li> <li>\u5de5\u4f5c\u6d41\u914d\u7f6e\uff1a dify-workflow-example.json</li> <li>\u6d4b\u8bd5\u811a\u672c\uff1a test-dify-integration.sh</li> </ul>"},{"location":"dify/DIFY_INTEGRATION_SUMMARY/#_15","title":"\ud83d\udcde \u6280\u672f\u652f\u6301","text":"<p>\u5982\u6709\u95ee\u9898\uff0c\u8bf7\uff1a 1. \u67e5\u9605\u5b8c\u6574\u8bbe\u8ba1\u6587\u6863 2. \u8fd0\u884c\u6d4b\u8bd5\u811a\u672c\u9a8c\u8bc1\u73af\u5883 3. \u67e5\u770b MCP Router \u65e5\u5fd7 4. \u8054\u7cfb\u6280\u672f\u56e2\u961f</p> <p>\u6587\u6863\u7248\u672c\uff1a v1.0.0 \u66f4\u65b0\u65e5\u671f\uff1a 2025-10-31 \u4f5c\u8005\uff1a MCP Router Team</p>"},{"location":"dify/DIFY_QUICK_START/","title":"Dify \u5feb\u901f\u63a5\u5165\u6307\u5357","text":""},{"location":"dify/DIFY_QUICK_START/#5","title":"\ud83d\ude80 5\u5206\u949f\u5feb\u901f\u5f00\u59cb","text":"<p>\u672c\u6307\u5357\u5e2e\u52a9\u60a8\u5feb\u901f\u5c06 MCP Router V3 \u63a5\u5165 Dify AI \u5e73\u53f0\uff0c\u5b9e\u73b0\u7528\u6237\u4fe1\u606f\u67e5\u8be2\u529f\u80fd\u3002</p>"},{"location":"dify/DIFY_QUICK_START/#_1","title":"\ud83d\udccb \u524d\u7f6e\u6761\u4ef6","text":"<ul> <li>\u2705 MCP Router V3 \u5df2\u542f\u52a8\uff08\u7aef\u53e3 8052\uff09</li> <li>\u2705 MCP Server V6 \u5df2\u6ce8\u518c\u5e76\u8fd0\u884c</li> <li>\u2705 Dify \u5e73\u53f0\u5df2\u90e8\u7f72\uff08\u672c\u5730\u6216\u4e91\u7aef\uff09</li> <li>\u2705 \u6d4b\u8bd5\u811a\u672c\u5df2\u9a8c\u8bc1\u901a\u8fc7</li> </ul> <pre><code># \u9a8c\u8bc1\u670d\u52a1\u8fd0\u884c\u72b6\u6001\n./docs/test-dify-integration.sh\n</code></pre>"},{"location":"dify/DIFY_QUICK_START/#_2","title":"\ud83c\udfaf \u65b9\u6848\u9009\u62e9","text":""},{"location":"dify/DIFY_QUICK_START/#a-http","title":"\u65b9\u6848A\uff1a\u7b80\u5355 HTTP \u5de5\u4f5c\u6d41\uff08\u63a8\u8350\u65b0\u624b\uff09","text":"<p>\u4f18\u70b9\uff1a \u7b80\u5355\u76f4\u63a5\uff0c\u65e0\u9700\u989d\u5916\u914d\u7f6e \u7f3a\u70b9\uff1a \u9700\u8981\u624b\u52a8\u7f16\u5199\u63d0\u793a\u8bcd\u89e3\u6790\u903b\u8f91</p>"},{"location":"dify/DIFY_QUICK_START/#bopenapi","title":"\u65b9\u6848B\uff1aOpenAPI \u5de5\u5177\u96c6\u6210\uff08\u63a8\u8350\u751f\u4ea7\uff09","text":"<p>\u4f18\u70b9\uff1a \u81ea\u52a8\u5de5\u5177\u53d1\u73b0\uff0c\u652f\u6301\u591a\u670d\u52a1\u5668 \u7f3a\u70b9\uff1a \u521d\u59cb\u914d\u7f6e\u7a0d\u590d\u6742</p>"},{"location":"dify/DIFY_QUICK_START/#ahttp","title":"\ud83d\udcdd \u65b9\u6848A\uff1aHTTP \u5de5\u4f5c\u6d41\u914d\u7f6e","text":""},{"location":"dify/DIFY_QUICK_START/#1-dify-workflow","title":"\u6b65\u9aa41\uff1a\u521b\u5efa Dify Workflow","text":"<ol> <li>\u767b\u5f55 Dify \u63a7\u5236\u53f0</li> <li>\u70b9\u51fb\"\u521b\u5efa\u5e94\u7528\" \u2192 \u9009\u62e9\"\u5de5\u4f5c\u6d41\"</li> <li>\u547d\u540d\u4e3a\"MCP\u7528\u6237\u67e5\u8be2\u52a9\u624b\"</li> </ol>"},{"location":"dify/DIFY_QUICK_START/#2","title":"\u6b65\u9aa42\uff1a\u914d\u7f6e\u8282\u70b9","text":""},{"location":"dify/DIFY_QUICK_START/#1","title":"\u8282\u70b91\uff1a\u5f00\u59cb\u8282\u70b9","text":"<pre><code>\u53d8\u91cf\u540d: user_input\n\u7c7b\u578b: \u6587\u672c\n\u5fc5\u586b: \u662f\n\u63cf\u8ff0: \u7528\u6237\u7684\u67e5\u8be2\u8bf7\u6c42\n\u793a\u4f8b: \"\u67e5\u8be2\u7528\u6237 id=5\"\n</code></pre>"},{"location":"dify/DIFY_QUICK_START/#2llm","title":"\u8282\u70b92\uff1aLLM \u53c2\u6570\u63d0\u53d6\u5668","text":"<pre><code>\u8282\u70b9\u7c7b\u578b: LLM\n\u6a21\u578b: gpt-4o-mini\uff08\u6216\u5176\u4ed6\u6a21\u578b\uff09\n\u6e29\u5ea6: 0.1\n\n\u7cfb\u7edf\u63d0\u793a\u8bcd:\n---\n\u4f60\u662f\u4e00\u4e2a\u53c2\u6570\u63d0\u53d6\u52a9\u624b\u3002\u4ece\u7528\u6237\u8f93\u5165\u4e2d\u63d0\u53d6\u5de5\u5177\u8c03\u7528\u4fe1\u606f\u3002\n\n\u53ef\u7528\u5de5\u5177\uff1a\n1. getPersonById - \u6839\u636eID\u67e5\u8be2\u7528\u6237\uff0c\u53c2\u6570: {\"id\": \u6574\u6570}\n2. getAllPersons - \u83b7\u53d6\u6240\u6709\u7528\u6237\uff0c\u53c2\u6570: {}\n3. addPerson - \u6dfb\u52a0\u65b0\u7528\u6237\uff0c\u53c2\u6570: {\"firstName\":\"\",\"lastName\":\"\",\"age\":0,\"nationality\":\"\",\"gender\":\"\"}\n\n\u8bf7\u4ee5JSON\u683c\u5f0f\u8fd4\u56de\uff08MUST\u662f\u6709\u6548\u7684JSON\uff09\uff1a\n{\n  \"toolName\": \"\u5de5\u5177\u540d\u79f0\",\n  \"arguments\": {}\n}\n\n\u793a\u4f8b\uff1a\n\u8f93\u5165: \"\u67e5\u8be2\u7528\u6237 id=5\"\n\u8f93\u51fa: {\"toolName\":\"getPersonById\",\"arguments\":{\"id\":5}}\n\n\u8f93\u5165: \"\u67e5\u770b\u6240\u6709\u7528\u6237\"\n\u8f93\u51fa: {\"toolName\":\"getAllPersons\",\"arguments\":{}}\n\n\u5982\u679c\u65e0\u6cd5\u8bc6\u522b\uff0c\u8fd4\u56de: {\"toolName\":\"unknown\",\"arguments\":{},\"error\":\"\u65e0\u6cd5\u7406\u89e3\"}\n---\n\n\u7528\u6237\u63d0\u793a\u8bcd:\n---\n{{start.user_input}}\n---\n</code></pre>"},{"location":"dify/DIFY_QUICK_START/#3","title":"\u8282\u70b93\uff1a\u4ee3\u7801\u8282\u70b9\uff08\u6784\u9020\u8bf7\u6c42\uff09","text":"<pre><code>import json\nimport uuid\n\ndef main(extraction_result: str) -&gt; dict:\n    \"\"\"\u6784\u9020 MCP \u8c03\u7528\u8bf7\u6c42\"\"\"\n    try:\n        extracted = json.loads(extraction_result)\n\n        if extracted.get('toolName') == 'unknown':\n            return {\n                'success': False,\n                'error_message': extracted.get('error', '\u65e0\u6cd5\u7406\u89e3\u7528\u6237\u610f\u56fe')\n            }\n\n        mcp_request = {\n            'id': str(uuid.uuid4()),\n            'method': 'tools/call',\n            'params': {\n                'name': extracted['toolName'],\n                'arguments': extracted.get('arguments', {})\n            }\n        }\n\n        return {\n            'success': True,\n            'request_body': json.dumps(mcp_request),\n            'tool_name': extracted['toolName']\n        }\n    except Exception as e:\n        return {\n            'success': False,\n            'error_message': f'\u89e3\u6790\u5931\u8d25: {str(e)}'\n        }\n</code></pre> <p>\u8f93\u5165\u53d8\u91cf\uff1a - <code>extraction_result</code>: \u6765\u81ea LLM \u8282\u70b9\u7684\u8f93\u51fa</p>"},{"location":"dify/DIFY_QUICK_START/#4","title":"\u8282\u70b94\uff1a\u6761\u4ef6\u5224\u65ad","text":"<pre><code>\u6761\u4ef6: {{code.success}} == True\nTrue\u5206\u652f: HTTP\u8bf7\u6c42\u8282\u70b9\nFalse\u5206\u652f: \u9519\u8bef\u63d0\u793a\u8282\u70b9\n</code></pre>"},{"location":"dify/DIFY_QUICK_START/#5http","title":"\u8282\u70b95\uff1aHTTP \u8bf7\u6c42\u8282\u70b9","text":"<pre><code>\u8bf7\u6c42\u65b9\u6cd5: POST\nURL: http://localhost:8052/mcp/router/route/mcp-server-v6\n\u8bf7\u6c42\u5934:\n  Content-Type: application/json\n\u8bf7\u6c42\u4f53: {{code.request_body}}\n\u8d85\u65f6: 30\u79d2\n</code></pre> <p>\u6ce8\u610f\uff1a \u751f\u4ea7\u73af\u5883\u8bf7\u66ff\u6362\u4e3a\u5b9e\u9645\u7684 MCP Router \u5730\u5740\u3002</p>"},{"location":"dify/DIFY_QUICK_START/#6llm","title":"\u8282\u70b96\uff1a\u7ed3\u679c\u683c\u5f0f\u5316\uff08LLM\uff09","text":"<pre><code>\u8282\u70b9\u7c7b\u578b: LLM\n\u6a21\u578b: gpt-4o-mini\n\u6e29\u5ea6: 0.7\n\n\u7cfb\u7edf\u63d0\u793a\u8bcd:\n---\n\u4f60\u662f\u4e00\u4e2a\u53cb\u597d\u7684\u52a9\u624b\u3002\u8bf7\u6839\u636e\u67e5\u8be2\u7ed3\u679c\uff0c\u7528\u81ea\u7136\u8bed\u8a00\u56de\u590d\u7528\u6237\u3002\n\n\u5de5\u5177\u540d\u79f0: {{code.tool_name}}\n\u539f\u59cb\u7ed3\u679c: {{http.body}}\n\n\u8981\u6c42\uff1a\n1. \u7528\u7b80\u6d01\u3001\u53cb\u597d\u7684\u65b9\u5f0f\u5c55\u793a\n2. \u7a81\u51fa\u91cd\u8981\u4fe1\u606f\n3. \u5982\u679c\u662f\u5217\u8868\uff0c\u7528\u8868\u683c\u6216\u9879\u76ee\u7b26\u53f7\u5c55\u793a\n4. \u5982\u679c\u67e5\u8be2\u5931\u8d25\uff0c\u53cb\u597d\u63d0\u793a\u7528\u6237\n\n\u8bf7\u751f\u6210\u56de\u590d\u3002\n---\n</code></pre>"},{"location":"dify/DIFY_QUICK_START/#7","title":"\u8282\u70b97\uff1a\u7ed3\u675f\u8282\u70b9","text":"<pre><code>\u8f93\u51fa: {{llm_format.output}}\n</code></pre>"},{"location":"dify/DIFY_QUICK_START/#3_1","title":"\u6b65\u9aa43\uff1a\u6d4b\u8bd5\u5de5\u4f5c\u6d41","text":"<p>\u6d4b\u8bd5\u8f93\u5165\uff1a <pre><code>\u67e5\u8be2\u7528\u6237 id=5\n</code></pre></p> <p>\u9884\u671f\u8f93\u51fa\uff1a <pre><code>\u627e\u5230\u4e86\u7528\u6237\u4fe1\u606f\uff01\n\n\u7528\u6237ID: 5\n\u59d3\u540d: Pierre Dubois\n\u5e74\u9f84: 40\u5c81\n\u56fd\u7c4d: \u6cd5\u56fd\n\u6027\u522b: \u7537\u6027\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#bopenapi_1","title":"\ud83d\udd27 \u65b9\u6848B\uff1aOpenAPI \u5de5\u5177\u96c6\u6210","text":""},{"location":"dify/DIFY_QUICK_START/#1-openapi","title":"\u6b65\u9aa41\uff1a\u5bfc\u5165 OpenAPI \u89c4\u8303","text":"<ol> <li>\u6253\u5f00 Dify \u63a7\u5236\u53f0</li> <li>\u5bfc\u822a\u5230\"\u5de5\u5177\" \u2192 \"\u81ea\u5b9a\u4e49\u5de5\u5177\" \u2192 \"\u5bfc\u5165 OpenAPI\"</li> <li>\u4e0a\u4f20\u6587\u4ef6\uff1a<code>docs/mcp-router-openapi.yaml</code></li> <li>\u5de5\u5177\u540d\u79f0\uff1a<code>MCP Router V3</code></li> <li>\u70b9\u51fb\"\u5bfc\u5165\"</li> </ol>"},{"location":"dify/DIFY_QUICK_START/#2-agent","title":"\u6b65\u9aa42\uff1a\u521b\u5efa Agent \u5e94\u7528","text":"<ol> <li>\u521b\u5efa\u65b0\u5e94\u7528 \u2192 \u9009\u62e9\"Agent\"</li> <li>\u547d\u540d\u4e3a\"MCP\u7528\u6237\u52a9\u624b\"</li> <li>\u9009\u62e9\u6a21\u578b\uff1agpt-4o \u6216 gpt-4o-mini</li> </ol>"},{"location":"dify/DIFY_QUICK_START/#3-agent","title":"\u6b65\u9aa43\uff1a\u914d\u7f6e Agent","text":"<p>\u7cfb\u7edf\u63d0\u793a\u8bcd\uff1a <pre><code>\u4f60\u662f\u4e00\u4e2a\u7528\u6237\u4fe1\u606f\u7ba1\u7406\u52a9\u624b\u3002\u4f60\u53ef\u4ee5\u5e2e\u52a9\u7528\u6237\u67e5\u8be2\u3001\u6dfb\u52a0\u548c\u7ba1\u7406\u7528\u6237\u4fe1\u606f\u3002\n\n\u4f60\u62e5\u6709\u4ee5\u4e0b\u80fd\u529b\uff1a\n1. \u6839\u636eID\u67e5\u8be2\u7528\u6237\u4fe1\u606f\n2. \u67e5\u770b\u6240\u6709\u7528\u6237\u5217\u8868\n3. \u6dfb\u52a0\u65b0\u7528\u6237\n\n\u5f53\u7528\u6237\u8be2\u95ee\u65f6\uff0c\u8bf7\u4f7f\u7528\u53ef\u7528\u7684\u5de5\u5177\u6765\u5b8c\u6210\u4efb\u52a1\u3002\n\n\u793a\u4f8b\u5bf9\u8bdd\uff1a\n\u7528\u6237\uff1a\"\u67e5\u8be2\u7528\u6237 id=5\"\n\u4f60\uff1a[\u8c03\u7528 callMcpTool \u5de5\u5177]\n\u4f60\uff1a\u627e\u5230\u4e86\u7528\u6237 Pierre Dubois\uff0c40\u5c81\uff0c\u6cd5\u56fd\u4eba\u3002\n\n\u7528\u6237\uff1a\"\u67e5\u770b\u6240\u6709\u7528\u6237\"\n\u4f60\uff1a[\u8c03\u7528 callMcpTool \u5de5\u5177]\n\u4f60\uff1a\u5171\u627e\u523013\u4e2a\u7528\u6237\uff0c\u8fd9\u662f\u524d5\u4e2a\uff1a...\n\n\u7528\u6237\uff1a\"\u6dfb\u52a0\u65b0\u7528\u6237\uff0c\u53eb\u5f20\u4e09\uff0c25\u5c81\uff0c\u4e2d\u56fd\u4eba\uff0c\u7537\u6027\"\n\u4f60\uff1a[\u8c03\u7528 callMcpTool \u5de5\u5177]\n\u4f60\uff1a\u6210\u529f\u6dfb\u52a0\u7528\u6237\u5f20\u4e09\uff01\n\n\u8bf7\u6839\u636e\u7528\u6237\u610f\u56fe\uff0c\u6b63\u786e\u9009\u62e9\u5de5\u5177\u548c\u53c2\u6570\u3002\u5de5\u5177\u8c03\u7528\u683c\u5f0f\uff1a\n- \u5de5\u5177\u540d: callMcpTool\n- serverKey: mcp-server-v6\n- body: JSON-RPC 2.0 \u683c\u5f0f\u8bf7\u6c42\n</code></pre></p> <p>\u7ed1\u5b9a\u5de5\u5177\uff1a - \u52fe\u9009 <code>MCP Router V3</code> \u5de5\u5177 - \u914d\u7f6e\u9ed8\u8ba4\u53c2\u6570\uff1a   - <code>serverKey</code>: <code>mcp-server-v6</code></p>"},{"location":"dify/DIFY_QUICK_START/#4-agent","title":"\u6b65\u9aa44\uff1a\u6d4b\u8bd5 Agent","text":"<p>\u6d4b\u8bd5\u5bf9\u8bdd\uff1a</p> <p>\u6d4b\u8bd51\uff1a\u67e5\u8be2\u7528\u6237 <pre><code>\u7528\u6237: \u67e5\u8be2\u7528\u6237 id=5\nAI: [\u81ea\u52a8\u8c03\u7528\u5de5\u5177] \u627e\u5230\u4e86\u7528\u6237 Pierre Dubois...\n</code></pre></p> <p>\u6d4b\u8bd52\uff1a\u67e5\u770b\u6240\u6709\u7528\u6237 <pre><code>\u7528\u6237: \u67e5\u770b\u6240\u6709\u7528\u6237\nAI: [\u81ea\u52a8\u8c03\u7528\u5de5\u5177] \u5171\u627e\u523013\u4e2a\u7528\u6237...\n</code></pre></p> <p>\u6d4b\u8bd53\uff1a\u6dfb\u52a0\u7528\u6237 <pre><code>\u7528\u6237: \u6dfb\u52a0\u65b0\u7528\u6237\uff0c\u540d\u5b57\u53eb\u674e\u56db\uff0c30\u5c81\uff0c\u4e2d\u56fd\u4eba\uff0c\u7537\u6027\nAI: [\u81ea\u52a8\u8c03\u7528\u5de5\u5177] \u6210\u529f\u6dfb\u52a0\u7528\u6237\u674e\u56db\uff01\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#_3","title":"\ud83c\udfa8 \u8fdb\u9636\u914d\u7f6e","text":""},{"location":"dify/DIFY_QUICK_START/#1_1","title":"1. \u591a\u8f6e\u5bf9\u8bdd\u652f\u6301","text":"<p>\u5728 Agent \u914d\u7f6e\u4e2d\u542f\u7528\"\u5bf9\u8bdd\u8bb0\u5fc6\"\uff1a <pre><code>\u8bb0\u5fc6\u7c7b\u578b: \u5b8c\u6574\u5bf9\u8bdd\n\u6700\u5927\u8f6e\u6570: 10\n</code></pre></p> <p>\u793a\u4f8b\uff1a <pre><code>\u7528\u6237: \u67e5\u8be2\u7528\u6237 id=5\nAI: \u627e\u5230\u4e86 Pierre Dubois\uff0c40\u5c81\u3002\n\n\u7528\u6237: \u4ed6\u591a\u5927\u4e86\uff1f\nAI: Pierre Dubois \u4eca\u5e7440\u5c81\u3002\n\n\u7528\u6237: \u518d\u67e5\u4e00\u4e0b id=3\nAI: [\u67e5\u8be2 id=3]\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#2_1","title":"2. \u9519\u8bef\u5904\u7406\u4f18\u5316","text":"<p>\u5728\u7cfb\u7edf\u63d0\u793a\u8bcd\u4e2d\u6dfb\u52a0\uff1a <pre><code>\u9519\u8bef\u5904\u7406\u89c4\u5219\uff1a\n1. \u5982\u679c\u5de5\u5177\u8fd4\u56de error \u5b57\u6bb5\uff0c\u53cb\u597d\u5730\u8bf4\u660e\u539f\u56e0\n2. \u5982\u679c\u7528\u6237\u4e0d\u5b58\u5728\uff0c\u63d0\u793a\"\u672a\u627e\u5230\u8be5\u7528\u6237\uff08ID: X\uff09\"\n3. \u5982\u679c\u53c2\u6570\u9519\u8bef\uff0c\u63d0\u793a\u6b63\u786e\u7684\u683c\u5f0f\n4. \u5982\u679c\u670d\u52a1\u4e0d\u53ef\u7528\uff0c\u63d0\u793a\"\u670d\u52a1\u6682\u65f6\u4e0d\u53ef\u7528\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\"\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#3_2","title":"3. \u6279\u91cf\u67e5\u8be2","text":"<pre><code>\u7528\u6237: \u67e5\u8be2\u7528\u6237 id=1,2,3,4,5\nAI: [\u5e76\u53d1\u8c03\u75285\u6b21] \n    \u5171\u67e5\u8be25\u4e2a\u7528\u6237\uff1a\n    1. John Smith, 28\u5c81, \u7f8e\u56fd\u4eba\n    2. Jane Doe, 32\u5c81, \u82f1\u56fd\u4eba\n    ...\n</code></pre> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a\u5728\u4ee3\u7801\u8282\u70b9\u4e2d\u5faa\u73af\u8c03\u7528 HTTP \u8bf7\u6c42\u3002</p>"},{"location":"dify/DIFY_QUICK_START/#4_1","title":"4. \u6570\u636e\u53ef\u89c6\u5316","text":"<p>\u4f7f\u7528 Markdown \u8868\u683c\u683c\u5f0f\u5316\u8f93\u51fa\uff1a</p> <pre><code>def format_users_table(users: list) -&gt; str:\n    table = \"| ID | \u59d3\u540d | \u5e74\u9f84 | \u56fd\u7c4d | \u6027\u522b |\\n\"\n    table += \"|:--:|:----:|:----:|:----:|:----:|\\n\"\n    for user in users:\n        name = f\"{user['firstName']} {user['lastName']}\"\n        table += f\"| {user['id']} | {name} | {user['age']} | {user['nationality']} | {user['gender']} |\\n\"\n    return table\n</code></pre>"},{"location":"dify/DIFY_QUICK_START/#_4","title":"\ud83d\udd10 \u751f\u4ea7\u73af\u5883\u90e8\u7f72","text":""},{"location":"dify/DIFY_QUICK_START/#1_2","title":"1. \u73af\u5883\u53d8\u91cf\u914d\u7f6e","text":"<p>\u5728 Dify \u4e2d\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff1a <pre><code>MCP_ROUTER_URL=https://mcp-router.your-domain.com\nMCP_SERVER_KEY=mcp-server-v6\nAPI_KEY=your-api-key-here\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#2_2","title":"2. \u6dfb\u52a0\u8ba4\u8bc1","text":"<p>\u5728 HTTP \u8bf7\u6c42\u8282\u70b9\u4e2d\u6dfb\u52a0\uff1a <pre><code>\u8bf7\u6c42\u5934:\n  Content-Type: application/json\n  X-API-Key: {{env.API_KEY}}\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#3_3","title":"3. \u901f\u7387\u9650\u5236","text":"<p>\u5728 MCP Router \u4e2d\u914d\u7f6e\u9650\u6d41\uff1a <pre><code>rate-limit:\n  enabled: true\n  requests-per-second: 10\n  burst: 20\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#4_2","title":"4. \u76d1\u63a7\u544a\u8b66","text":"<ul> <li>\u914d\u7f6e Prometheus \u76d1\u63a7</li> <li>\u8bbe\u7f6e\u544a\u8b66\u89c4\u5219\uff08\u54cd\u5e94\u65f6\u95f4 &gt;2\u79d2\uff09</li> <li>\u6536\u96c6\u9519\u8bef\u65e5\u5fd7</li> </ul>"},{"location":"dify/DIFY_QUICK_START/#_5","title":"\ud83d\udcca \u6548\u679c\u5c55\u793a","text":""},{"location":"dify/DIFY_QUICK_START/#_6","title":"\u67e5\u8be2\u7528\u6237\u4fe1\u606f","text":"<pre><code>\ud83d\udc64 \u7528\u6237: \u67e5\u8be2\u7528\u6237 id=5\n\n\ud83e\udd16 \u52a9\u624b: \u627e\u5230\u4e86\u7528\u6237\u4fe1\u606f\uff01\n\n**\u7528\u6237ID:** 5  \n**\u59d3\u540d:** Pierre Dubois  \n**\u5e74\u9f84:** 40\u5c81  \n**\u56fd\u7c4d:** \u6cd5\u56fd \ud83c\uddeb\ud83c\uddf7  \n**\u6027\u522b:** \u7537\u6027\n</code></pre>"},{"location":"dify/DIFY_QUICK_START/#_7","title":"\u67e5\u770b\u6240\u6709\u7528\u6237","text":"<pre><code>\ud83d\udc64 \u7528\u6237: \u67e5\u770b\u6240\u6709\u7528\u6237\n\n\ud83e\udd16 \u52a9\u624b: \u5171\u627e\u5230 13 \u4e2a\u7528\u6237\uff0c\u4ee5\u4e0b\u662f\u8be6\u7ec6\u5217\u8868\uff1a\n\n| ID | \u59d3\u540d | \u5e74\u9f84 | \u56fd\u7c4d | \u6027\u522b |\n|:--:|:----:|:----:|:----:|:----:|\n| 1 | John Smith | 28 | \u7f8e\u56fd | \u7537 |\n| 2 | Jane Doe | 32 | \u82f1\u56fd | \u5973 |\n| 3 | Hans Mueller | 45 | \u5fb7\u56fd | \u7537 |\n| ... | ... | ... | ... | ... |\n</code></pre>"},{"location":"dify/DIFY_QUICK_START/#_8","title":"\u2753 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"dify/DIFY_QUICK_START/#q1","title":"Q1: \u5de5\u5177\u8c03\u7528\u5931\u8d25\u600e\u4e48\u529e\uff1f","text":"<p>\u68c0\u67e5\u6e05\u5355\uff1a 1. MCP Router \u662f\u5426\u8fd0\u884c\uff1f<code>curl http://localhost:8052/actuator/health</code> 2. MCP Server \u662f\u5426\u6ce8\u518c\uff1f\u67e5\u770b\u65e5\u5fd7 3. \u7f51\u7edc\u662f\u5426\u53ef\u8fbe\uff1f\u68c0\u67e5\u9632\u706b\u5899 4. \u53c2\u6570\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff1f\u67e5\u770b\u65e5\u5fd7</p>"},{"location":"dify/DIFY_QUICK_START/#q2-mcp-server","title":"Q2: \u5982\u4f55\u652f\u6301\u591a\u4e2a MCP Server\uff1f","text":"<p>\u4fee\u6539\u7cfb\u7edf\u63d0\u793a\u8bcd\uff0c\u6dfb\u52a0\u670d\u52a1\u5668\u9009\u62e9\u903b\u8f91\uff1a <pre><code>\u53ef\u7528\u670d\u52a1\u5668\uff1a\n- mcp-server-v6: \u7528\u6237\u7ba1\u7406\n- mcp-server-v7: \u8ba2\u5355\u7ba1\u7406\n\n\u6839\u636e\u7528\u6237\u610f\u56fe\uff0c\u9009\u62e9\u6b63\u786e\u7684 serverKey\u3002\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#q3","title":"Q3: \u54cd\u5e94\u592a\u6162\u600e\u4e48\u529e\uff1f","text":"<p>\u4f18\u5316\u65b9\u6848\uff1a 1. \u542f\u7528 Redis \u7f13\u5b58\uff08getAllPersons \u7ed3\u679c\uff09 2. \u4f7f\u7528 MCP Router \u7684\u667a\u80fd\u8def\u7531 3. \u4f18\u5316\u6570\u636e\u5e93\u67e5\u8be2 4. \u542f\u7528 HTTP/2</p>"},{"location":"dify/DIFY_QUICK_START/#q4","title":"Q4: \u5982\u4f55\u5904\u7406\u5927\u91cf\u6570\u636e\uff1f","text":"<p>\u5b9e\u73b0\u5206\u9875\uff1a <pre><code>{\n  \"name\": \"getAllPersons\",\n  \"arguments\": {\n    \"page\": 1,\n    \"pageSize\": 10\n  }\n}\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#_9","title":"\ud83d\ude80 \u4e0b\u4e00\u6b65","text":"<ol> <li>\u2705 \u5b8c\u6210\u57fa\u7840\u914d\u7f6e</li> <li>\u2705 \u6d4b\u8bd5\u57fa\u672c\u529f\u80fd</li> <li>\u2b1c \u6dfb\u52a0\u66f4\u591a\u5de5\u5177\uff08\u8ba2\u5355\u3001\u4ea7\u54c1\u7b49\uff09</li> <li>\u2b1c \u5b9e\u73b0\u591a\u6a21\u6001\u4ea4\u4e92\uff08\u8bed\u97f3\u3001\u56fe\u7247\uff09</li> <li>\u2b1c \u96c6\u6210\u5230\u4f01\u4e1a\u5fae\u4fe1/\u9489\u9489</li> </ol>"},{"location":"dify/DIFY_QUICK_START/#_10","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5b8c\u6574\u8bbe\u8ba1\u65b9\u6848</li> <li>OpenAPI \u89c4\u8303</li> <li>\u5de5\u4f5c\u6d41\u793a\u4f8b</li> <li>\u6d4b\u8bd5\u811a\u672c</li> <li>MCP \u534f\u8bae\u89c4\u8303</li> </ul>"},{"location":"dify/DIFY_QUICK_START/#_11","title":"\ud83d\udca1 \u6280\u5de7\u63d0\u793a","text":""},{"location":"dify/DIFY_QUICK_START/#_12","title":"\u63d0\u793a\u8bcd\u4f18\u5316","text":"<p>\u597d\u7684\u63d0\u793a\u8bcd\uff1a <pre><code>\u67e5\u8be2\u7528\u6237 id=5\n\u67e5\u770b\u6240\u6709\u7528\u6237\n\u6dfb\u52a0\u7528\u6237\u5f20\u4e09\uff0c25\u5c81\uff0c\u4e2d\u56fd\u4eba\uff0c\u7537\u6027\n</code></pre></p> <p>\u4e0d\u63a8\u8350\u7684\u63d0\u793a\u8bcd\uff1a <pre><code>\u5e2e\u6211\u67e5\u4e00\u4e0b\u90a3\u4e2a\u7528\u6237\uff08\u592a\u6a21\u7cca\uff09\n\u7ed9\u6211\u6570\u636e\uff08\u4e0d\u660e\u786e\uff09\n\u6267\u884c\u64cd\u4f5c\uff08\u4e0d\u5177\u4f53\uff09\n</code></pre></p>"},{"location":"dify/DIFY_QUICK_START/#_13","title":"\u5de5\u5177\u8c03\u7528\u6700\u4f73\u5b9e\u8df5","text":"<ol> <li>\u53c2\u6570\u6821\u9a8c\uff1a\u5728\u4ee3\u7801\u8282\u70b9\u4e2d\u9a8c\u8bc1\u53c2\u6570</li> <li>\u9519\u8bef\u91cd\u8bd5\uff1a\u914d\u7f6e\u91cd\u8bd5\u673a\u5236\uff08\u6700\u591a3\u6b21\uff09</li> <li>\u8d85\u65f6\u8bbe\u7f6e\uff1a30\u79d2\u8d85\u65f6\uff0c\u907f\u514d\u957f\u65f6\u95f4\u7b49\u5f85</li> <li>\u65e5\u5fd7\u8bb0\u5f55\uff1a\u8bb0\u5f55\u6240\u6709\u5de5\u5177\u8c03\u7528\uff0c\u4fbf\u4e8e\u8c03\u8bd5</li> </ol> <p>\u795d\u60a8\u4f7f\u7528\u6109\u5feb\uff01\ud83c\udf89</p> <p>\u5982\u6709\u95ee\u9898\uff0c\u8bf7\u67e5\u9605\u5b8c\u6574\u6587\u6863\u6216\u8054\u7cfb\u6280\u672f\u652f\u6301\u3002</p>"},{"location":"dify/README_DIFY/","title":"MCP Router V3 - Dify \u96c6\u6210\u6587\u6863\u7d22\u5f15","text":"<p>\u672c\u6587\u6863\u63d0\u4f9b MCP Router V3 \u4e0e Dify AI \u5e73\u53f0\u96c6\u6210\u7684\u5b8c\u6574\u6307\u5357</p>"},{"location":"dify/README_DIFY/#_1","title":"\ud83d\udcda \u6587\u6863\u5bfc\u822a","text":""},{"location":"dify/README_DIFY/#_2","title":"\ud83d\ude80 \u65b0\u624b\u5feb\u901f\u5f00\u59cb","text":"<p>\u63a8\u8350\u9605\u8bfb\u987a\u5e8f\uff1a</p> <ol> <li>\u5feb\u901f\u5f00\u59cb\u6307\u5357 \u2b50 \u5fc5\u8bfb</li> <li>5\u5206\u949f\u5feb\u901f\u914d\u7f6e</li> <li>\u4e24\u79cd\u65b9\u6848\u5bf9\u6bd4</li> <li>\u6b65\u9aa4\u8be6\u89e3</li> <li> <p>\u5e38\u89c1\u95ee\u9898</p> </li> <li> <p>\u96c6\u6210\u6d4b\u8bd5 \u2b50 \u5fc5\u505a    <pre><code># \u8fd0\u884c\u6d4b\u8bd5\u9a8c\u8bc1\u73af\u5883\nchmod +x docs/test-dify-integration.sh\n./docs/test-dify-integration.sh\n</code></pre></p> </li> <li> <p>\u603b\u7ed3\u6587\u6863 </p> </li> <li>\u63a5\u53e3\u5206\u6790\u603b\u7ed3</li> <li>\u65b9\u6848\u5bf9\u6bd4</li> <li>\u5b8c\u6574\u8c03\u7528\u6d41\u7a0b</li> <li>\u6027\u80fd\u6307\u6807</li> <li>\u67b6\u6784\u56fe</li> </ol>"},{"location":"dify/README_DIFY/#_3","title":"\ud83d\udcd6 \u6df1\u5165\u9605\u8bfb","text":"<ol> <li>\u5b8c\u6574\u8bbe\u8ba1\u65b9\u6848</li> <li>\u63a5\u53e3\u8be6\u7ec6\u5206\u6790</li> <li>\u67b6\u6784\u8bbe\u8ba1</li> <li>\u5de5\u4f5c\u6d41\u914d\u7f6e</li> <li>\u8fdb\u9636\u529f\u80fd</li> <li>\u90e8\u7f72\u6307\u5357</li> <li>FAQ</li> </ol>"},{"location":"dify/README_DIFY/#_4","title":"\ud83d\udd27 \u914d\u7f6e\u6587\u4ef6","text":"<ol> <li>OpenAPI \u89c4\u8303</li> <li>Dify \u5de5\u5177\u5bfc\u5165\u4f7f\u7528</li> <li>\u6807\u51c6 OpenAPI 3.0 \u683c\u5f0f</li> <li> <p>\u5b8c\u6574\u63a5\u53e3\u5b9a\u4e49</p> </li> <li> <p>Dify \u5de5\u4f5c\u6d41\u793a\u4f8b</p> </li> <li>\u53ef\u76f4\u63a5\u5bfc\u5165 Dify</li> <li>\u5305\u542b\u6240\u6709\u8282\u70b9\u914d\u7f6e</li> <li>\u5b8c\u6574\u7684\u5904\u7406\u903b\u8f91</li> </ol>"},{"location":"dify/README_DIFY/#_5","title":"\ud83c\udfaf \u6838\u5fc3\u63a5\u53e3","text":""},{"location":"dify/README_DIFY/#1","title":"\u63a5\u53e31\uff1a\u83b7\u53d6\u5de5\u5177\u5217\u8868","text":"<pre><code>GET http://localhost:8052/mcp/router/tools/mcp-server-v6\n</code></pre> <p>\u7528\u9014\uff1a \u83b7\u53d6 MCP Server \u4e0a\u6240\u6709\u53ef\u7528\u5de5\u5177</p> <p>\u54cd\u5e94\u793a\u4f8b\uff1a <pre><code>{\n  \"tools\": [\n    {\n      \"name\": \"getPersonById\",\n      \"description\": \"Get a person by their ID\",\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": {\"type\": \"integer\"}\n        },\n        \"required\": [\"id\"]\n      }\n    }\n  ]\n}\n</code></pre></p>"},{"location":"dify/README_DIFY/#2","title":"\u63a5\u53e32\uff1a\u8c03\u7528\u5de5\u5177","text":"<pre><code>POST http://localhost:8052/mcp/router/route/mcp-server-v6\nContent-Type: application/json\n\n{\n  \"id\": \"req-12345\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"getPersonById\",\n    \"arguments\": { \"id\": 5 }\n  }\n}\n</code></pre> <p>\u7528\u9014\uff1a \u8c03\u7528\u5177\u4f53\u7684 MCP \u5de5\u5177</p> <p>\u54cd\u5e94\u793a\u4f8b\uff1a <pre><code>{\n  \"result\": {\n    \"id\": 5,\n    \"firstName\": \"Pierre\",\n    \"lastName\": \"Dubois\",\n    \"age\": 40,\n    \"nationality\": \"French\",\n    \"gender\": \"MALE\",\n    \"found\": true\n  },\n  \"metadata\": {\n    \"responseTime\": 35\n  }\n}\n</code></pre></p>"},{"location":"dify/README_DIFY/#_6","title":"\ud83c\udfd7\ufe0f \u4e24\u79cd\u63a5\u5165\u65b9\u6848","text":""},{"location":"dify/README_DIFY/#ahttp","title":"\u65b9\u6848A\uff1aHTTP \u5de5\u4f5c\u6d41\uff08\u63a8\u8350\u65b0\u624b\uff09","text":"<p>\u9002\u7528\u573a\u666f\uff1a - \u2705 \u5feb\u901f\u9a8c\u8bc1\u6982\u5ff5 - \u2705 \u5355\u4e2a MCP Server - \u2705 \u7b80\u5355\u67e5\u8be2\u573a\u666f</p> <p>\u6838\u5fc3\u6b65\u9aa4\uff1a 1. \u521b\u5efa Dify Workflow 2. \u6dfb\u52a0 LLM \u8282\u70b9\uff08\u53c2\u6570\u63d0\u53d6\uff09 3. \u6dfb\u52a0\u4ee3\u7801\u8282\u70b9\uff08\u6784\u9020\u8bf7\u6c42\uff09 4. \u6dfb\u52a0 HTTP \u8bf7\u6c42\u8282\u70b9\uff08\u8c03\u7528 MCP\uff09 5. \u6dfb\u52a0 LLM \u8282\u70b9\uff08\u7ed3\u679c\u683c\u5f0f\u5316\uff09</p> <p>\u65f6\u95f4\uff1a \u7ea6 10 \u5206\u949f</p>"},{"location":"dify/README_DIFY/#bopenapi","title":"\u65b9\u6848B\uff1aOpenAPI \u5de5\u5177\uff08\u63a8\u8350\u751f\u4ea7\uff09\u2b50","text":"<p>\u9002\u7528\u573a\u666f\uff1a - \u2705 \u751f\u4ea7\u73af\u5883\u90e8\u7f72 - \u2705 \u591a\u4e2a MCP Server - \u2705 \u9700\u8981\u81ea\u52a8\u5de5\u5177\u53d1\u73b0</p> <p>\u6838\u5fc3\u6b65\u9aa4\uff1a 1. \u5bfc\u5165 OpenAPI \u89c4\u8303\u5230 Dify 2. \u521b\u5efa Agent \u5e94\u7528 3. \u914d\u7f6e\u7cfb\u7edf\u63d0\u793a\u8bcd 4. \u7ed1\u5b9a\u5de5\u5177</p> <p>\u65f6\u95f4\uff1a \u7ea6 5 \u5206\u949f</p>"},{"location":"dify/README_DIFY/#_7","title":"\ud83d\udcca \u6027\u80fd\u6307\u6807","text":"\u6307\u6807 \u503c \u72b6\u6001 \u54cd\u5e94\u65f6\u95f4 35-42ms \u2705 \u4f18\u79c0 \u6210\u529f\u7387 100% \u2705 \u5b8c\u7f8e \u5e76\u53d1\u652f\u6301 100+ QPS \u2705 \u826f\u597d \u53ef\u7528\u6027 99.9% \u2705 \u7a33\u5b9a"},{"location":"dify/README_DIFY/#_8","title":"\ud83c\udfac \u5feb\u901f\u6f14\u793a","text":""},{"location":"dify/README_DIFY/#1_1","title":"\u793a\u4f8b\u5bf9\u8bdd1\uff1a\u67e5\u8be2\u7528\u6237","text":"<pre><code>\u7528\u6237: \u67e5\u8be2\u7528\u6237 id=5\n\nAI: \u627e\u5230\u4e86\u7528\u6237\u4fe1\u606f\uff01\n\n\u7528\u6237ID: 5\n\u59d3\u540d: Pierre Dubois\n\u5e74\u9f84: 40\u5c81\n\u56fd\u7c4d: \u6cd5\u56fd\n\u6027\u522b: \u7537\u6027\n\n\u67e5\u8be2\u8017\u65f6\uff1a35ms\n</code></pre>"},{"location":"dify/README_DIFY/#2_1","title":"\u793a\u4f8b\u5bf9\u8bdd2\uff1a\u67e5\u770b\u6240\u6709\u7528\u6237","text":"<pre><code>\u7528\u6237: \u67e5\u770b\u6240\u6709\u7528\u6237\n\nAI: \u5171\u627e\u5230 13 \u4e2a\u7528\u6237\uff1a\n\n| ID | \u59d3\u540d | \u5e74\u9f84 | \u56fd\u7c4d | \u6027\u522b |\n|:--:|:----:|:----:|:----:|:----:|\n| 1 | John Smith | 28 | \u7f8e\u56fd | \u7537 |\n| 2 | Jane Doe | 32 | \u82f1\u56fd | \u5973 |\n| 5 | Pierre Dubois | 40 | \u6cd5\u56fd | \u7537 |\n| ... | ... | ... | ... | ... |\n</code></pre>"},{"location":"dify/README_DIFY/#3","title":"\u793a\u4f8b\u5bf9\u8bdd3\uff1a\u6dfb\u52a0\u7528\u6237","text":"<pre><code>\u7528\u6237: \u6dfb\u52a0\u65b0\u7528\u6237\uff0c\u540d\u5b57\u53eb\u5f20\u4e09\uff0c25\u5c81\uff0c\u4e2d\u56fd\u4eba\uff0c\u7537\u6027\n\nAI: \u2705 \u6210\u529f\u6dfb\u52a0\u7528\u6237\uff01\n\n\u7528\u6237ID: 14\n\u59d3\u540d: \u5f20\u4e09\n\u5e74\u9f84: 25\u5c81\n\u56fd\u7c4d: \u4e2d\u56fd\n\u6027\u522b: \u7537\u6027\n</code></pre>"},{"location":"dify/README_DIFY/#_9","title":"\u2705 \u6d4b\u8bd5\u9a8c\u8bc1","text":"<p>\u8fd0\u884c\u81ea\u52a8\u5316\u6d4b\u8bd5\uff1a</p> <pre><code>./docs/test-dify-integration.sh\n</code></pre> <p>\u6d4b\u8bd5\u8986\u76d6\uff1a - \u2705 \u5065\u5eb7\u68c0\u67e5 - \u2705 \u5de5\u5177\u5217\u8868\u83b7\u53d6 - \u2705 \u5355\u7528\u6237\u67e5\u8be2\uff08id=5\uff09 - \u2705 \u6240\u6709\u7528\u6237\u67e5\u8be2 - \u2705 \u4e0d\u5b58\u5728\u7528\u6237\u67e5\u8be2\uff08id=99999\uff09 - \u2705 \u5b8c\u6574\u6d41\u7a0b\u6a21\u62df</p> <p>\u9884\u671f\u8f93\u51fa\uff1a <pre><code>================================================================\n\u2713\u2713\u2713 \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7\uff01 \u2713\u2713\u2713\n================================================================\n</code></pre></p>"},{"location":"dify/README_DIFY/#_10","title":"\ud83d\udd27 \u73af\u5883\u8981\u6c42","text":""},{"location":"dify/README_DIFY/#_11","title":"\u670d\u52a1\u7aef","text":"<ul> <li>MCP Router V3\uff1a\u8fd0\u884c\u4e2d\uff08\u7aef\u53e3 8052\uff09</li> <li>MCP Server V6\uff1a\u5df2\u6ce8\u518c</li> <li>MySQL\uff1a\u8fd0\u884c\u4e2d\uff08\u5305\u542b\u6d4b\u8bd5\u6570\u636e\uff09</li> </ul>"},{"location":"dify/README_DIFY/#_12","title":"\u5ba2\u6237\u7aef","text":"<ul> <li>Dify\uff1av0.6.0+</li> <li>\u5927\u6a21\u578b\uff1aGPT-4o / GPT-4o-mini / Claude 3.5 \u7b49</li> </ul>"},{"location":"dify/README_DIFY/#_13","title":"\ud83d\udcd6 \u5173\u952e\u6982\u5ff5","text":""},{"location":"dify/README_DIFY/#mcpmodel-context-protocol","title":"MCP\uff08Model Context Protocol\uff09","text":"<p>\u4e00\u4e2a\u5f00\u653e\u7684\u534f\u8bae\uff0c\u7528\u4e8e\u8fde\u63a5 AI \u5e94\u7528\u548c\u5916\u90e8\u6570\u636e\u6e90/\u5de5\u5177\u3002</p> <p>\u6838\u5fc3\u6982\u5ff5\uff1a - Tools\uff1a \u53ef\u88ab AI \u8c03\u7528\u7684\u529f\u80fd - Resources\uff1a \u53ef\u88ab AI \u8bbf\u95ee\u7684\u6570\u636e - Prompts\uff1a \u9884\u5b9a\u4e49\u7684\u63d0\u793a\u6a21\u677f</p>"},{"location":"dify/README_DIFY/#mcp-router","title":"MCP Router","text":"<p>\u667a\u80fd\u8def\u7531\u5c42\uff0c\u8d1f\u8d23\uff1a - \ud83c\udfaf \u667a\u80fd\u8def\u7531\u5230\u6700\u4f18\u670d\u52a1\u5668 - \u2696\ufe0f \u8d1f\u8f7d\u5747\u8861 - \ud83d\udd04 \u5065\u5eb7\u68c0\u67e5\u4e0e\u7194\u65ad - \ud83d\udcca \u6027\u80fd\u76d1\u63a7\u4e0e\u65e5\u5fd7</p>"},{"location":"dify/README_DIFY/#dify","title":"Dify","text":"<p>\u4f01\u4e1a\u7ea7 LLM \u5e94\u7528\u5f00\u53d1\u5e73\u53f0\uff0c\u652f\u6301\uff1a - \ud83e\udd16 Agent\uff08\u667a\u80fd\u4f53\uff09 - \ud83d\udd04 Workflow\uff08\u5de5\u4f5c\u6d41\uff09 - \ud83e\udde9 Plugin\uff08\u63d2\u4ef6\uff09 - \ud83d\udee0\ufe0f Tools\uff08\u5de5\u5177\uff09</p>"},{"location":"dify/README_DIFY/#_14","title":"\ud83c\udfaf \u5b9e\u73b0\u76ee\u6807","text":""},{"location":"dify/README_DIFY/#_15","title":"\u2705 \u5df2\u5b9e\u73b0","text":"<ol> <li>\u63a5\u53e3\u5206\u6790\u5b8c\u6210</li> <li>tools/list \u63a5\u53e3\u8be6\u7ec6\u5206\u6790</li> <li>tools/call \u63a5\u53e3\u8be6\u7ec6\u5206\u6790</li> <li> <p>\u51fa\u5165\u53c2\u5b8c\u6574\u6587\u6863</p> </li> <li> <p>Dify \u65b9\u6848\u8bbe\u8ba1</p> </li> <li>HTTP \u5de5\u4f5c\u6d41\u65b9\u6848</li> <li>OpenAPI \u5de5\u5177\u65b9\u6848</li> <li> <p>\u7cfb\u7edf\u63d0\u793a\u8bcd\u8bbe\u8ba1</p> </li> <li> <p>\u914d\u7f6e\u6587\u4ef6\u4ea4\u4ed8</p> </li> <li>OpenAPI 3.0 \u89c4\u8303\u6587\u4ef6</li> <li>Dify \u5de5\u4f5c\u6d41\u914d\u7f6e</li> <li> <p>\u6d4b\u8bd5\u811a\u672c</p> </li> <li> <p>\u6587\u6863\u5b8c\u5584</p> </li> <li>\u5feb\u901f\u5f00\u59cb\u6307\u5357</li> <li>\u5b8c\u6574\u8bbe\u8ba1\u65b9\u6848</li> <li>\u603b\u7ed3\u6587\u6863</li> <li> <p>\u672c\u7d22\u5f15\u6587\u6863</p> </li> <li> <p>\u6d4b\u8bd5\u9a8c\u8bc1</p> </li> <li>6 \u4e2a\u6d4b\u8bd5\u7528\u4f8b\u5168\u90e8\u901a\u8fc7</li> <li>\u6027\u80fd\u6307\u6807\u4f18\u79c0\uff0835-42ms\uff09</li> </ol>"},{"location":"dify/README_DIFY/#_16","title":"\ud83c\udfaf \u4f7f\u7528\u793a\u4f8b","text":"<p>\u9700\u6c42\uff1a \u7528\u6237\u8f93\u5165\u67e5\u8be2\u7528\u6237 id=5\uff0c\u67e5\u51fa\u7528\u6237\u5bf9\u5e94\u7684\u4fe1\u606f</p> <p>\u5b9e\u73b0\uff1a</p> <ol> <li>Dify \u914d\u7f6e\uff1a</li> <li>\u5bfc\u5165 OpenAPI \u89c4\u8303</li> <li>\u521b\u5efa Agent</li> <li> <p>\u914d\u7f6e\u7cfb\u7edf\u63d0\u793a\u8bcd</p> </li> <li> <p>\u7528\u6237\u4ea4\u4e92\uff1a <pre><code>\u7528\u6237: \u67e5\u8be2\u7528\u6237 id=5\n</code></pre></p> </li> <li> <p>AI \u5904\u7406\u6d41\u7a0b\uff1a</p> </li> <li>\u7406\u89e3\u610f\u56fe\uff1a\u67e5\u8be2\u7528\u6237\u4fe1\u606f</li> <li>\u63d0\u53d6\u53c2\u6570\uff1aid=5</li> <li>\u8c03\u7528\u5de5\u5177\uff1agetPersonById</li> <li> <p>\u683c\u5f0f\u5316\u7ed3\u679c</p> </li> <li> <p>AI \u8f93\u51fa\uff1a <pre><code>\u627e\u5230\u4e86\u7528\u6237\u4fe1\u606f\uff01\n\n\u7528\u6237ID: 5\n\u59d3\u540d: Pierre Dubois\n\u5e74\u9f84: 40\u5c81\n\u56fd\u7c4d: \u6cd5\u56fd\n\u6027\u522b: \u7537\u6027\n</code></pre></p> </li> </ol>"},{"location":"dify/README_DIFY/#3_1","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb\uff083\u6b65\uff09","text":""},{"location":"dify/README_DIFY/#1_2","title":"\u6b65\u9aa41\uff1a\u9a8c\u8bc1\u73af\u5883","text":"<pre><code>./docs/test-dify-integration.sh\n</code></pre>"},{"location":"dify/README_DIFY/#2-dify","title":"\u6b65\u9aa42\uff1a\u914d\u7f6e Dify","text":"<p>\u65b9\u6848A\uff08\u7b80\u5355\uff09\uff1a - \u521b\u5efa Workflow - \u5bfc\u5165 <code>dify-workflow-example.json</code></p> <p>\u65b9\u6848B\uff08\u63a8\u8350\uff09\uff1a - \u5bfc\u5165 <code>mcp-router-openapi.yaml</code> - \u521b\u5efa Agent - \u914d\u7f6e\u63d0\u793a\u8bcd\uff08\u53c2\u8003 DIFY_QUICK_START.md\uff09</p>"},{"location":"dify/README_DIFY/#3_2","title":"\u6b65\u9aa43\uff1a\u6d4b\u8bd5\u5bf9\u8bdd","text":"<pre><code>\u8f93\u5165: \u67e5\u8be2\u7528\u6237 id=5\n\u9884\u671f: \u8fd4\u56de Pierre Dubois \u7684\u4fe1\u606f\n</code></pre>"},{"location":"dify/README_DIFY/#_17","title":"\ud83d\udcde \u83b7\u53d6\u5e2e\u52a9","text":""},{"location":"dify/README_DIFY/#_18","title":"\u9047\u5230\u95ee\u9898\uff1f","text":"<ol> <li>\u67e5\u770b\u6587\u6863</li> <li>\u5feb\u901f\u5f00\u59cb\u6307\u5357</li> <li> <p>\u5b8c\u6574\u8bbe\u8ba1\u65b9\u6848</p> </li> <li> <p>\u8fd0\u884c\u6d4b\u8bd5 <pre><code>./docs/test-dify-integration.sh\n</code></pre></p> </li> <li> <p>\u67e5\u770b\u65e5\u5fd7 <pre><code>tail -f logs/mcp-router-v3.log\n</code></pre></p> </li> <li> <p>\u5e38\u89c1\u95ee\u9898</p> </li> <li>\u5b8c\u6574\u8bbe\u8ba1\u65b9\u6848 - FAQ \u90e8\u5206</li> </ol>"},{"location":"dify/README_DIFY/#_19","title":"\ud83d\udcc8 \u540e\u7eed\u8ba1\u5212","text":"<ul> <li> \u652f\u6301\u66f4\u591a MCP Server</li> <li> \u5b9e\u73b0\u6d41\u5f0f\u54cd\u5e94\uff08SSE\uff09</li> <li> \u6dfb\u52a0\u8bed\u97f3\u4ea4\u4e92</li> <li> \u591a\u6a21\u6001\u652f\u6301\uff08\u56fe\u7247\u3001\u89c6\u9891\uff09</li> <li> \u96c6\u6210\u5230\u4f01\u4e1a\u5fae\u4fe1/\u9489\u9489</li> </ul>"},{"location":"dify/README_DIFY/#_20","title":"\ud83c\udf89 \u5f00\u59cb\u4f7f\u7528","text":"<p>\u9009\u62e9\u4f60\u7684\u8def\u5f84\uff1a</p> <ul> <li>\ud83d\ude80 \u5feb\u901f\u4f53\u9a8c\uff1a \u5feb\u901f\u5f00\u59cb\u6307\u5357</li> <li>\ud83d\udcd6 \u6df1\u5165\u5b66\u4e60\uff1a \u5b8c\u6574\u8bbe\u8ba1\u65b9\u6848</li> <li>\ud83d\udd0d \u5feb\u901f\u53c2\u8003\uff1a \u603b\u7ed3\u6587\u6863</li> </ul> <p>\u7248\u672c\uff1a v1.0.0 \u65e5\u671f\uff1a 2025-10-31 \u56e2\u961f\uff1a MCP Router Team</p> <p>\u795d\u60a8\u4f7f\u7528\u6109\u5feb\uff01\ud83c\udf89</p>"},{"location":"explanations/","title":"\u8bf4\u660e\u6587\u6863","text":"<p>\u6df1\u5165\u7406\u89e3\u9879\u76ee\u7684\u67b6\u6784\u3001\u8bbe\u8ba1\u51b3\u7b56\u548c\u6838\u5fc3\u6982\u5ff5\u3002</p>"},{"location":"explanations/#_2","title":"\u53ef\u7528\u6587\u6863","text":"<ul> <li>\u67b6\u6784\u8bbe\u8ba1</li> <li>\u5de5\u4f5c\u6d41\u5bf9\u6bd4</li> <li>Gemini \u6574\u5408\u8ba1\u5212</li> </ul>"},{"location":"explanations/architecture/","title":"\u9879\u76ee\u67b6\u6784","text":"<p>MCP Router \u9879\u76ee\u7684\u6574\u4f53\u67b6\u6784\u8bbe\u8ba1</p>"},{"location":"explanations/architecture/#_2","title":"\ud83c\udfd7\ufe0f \u7cfb\u7edf\u67b6\u6784","text":""},{"location":"explanations/architecture/#_3","title":"\u67b6\u6784\u56fe","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u5916\u90e8\u5e94\u7528/\u7528\u6237                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502 HTTP/REST\n                 \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502               MCP Client (\u7aef\u53e3 8080)                      \u2502\n\u2502  - Spring AI ChatClient                                 \u2502\n\u2502  - DeepSeek Integration                                 \u2502\n\u2502  - RESTful API                                          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502 SSE (Server-Sent Events)\n                 \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502             MCP Router (\u7aef\u53e3 8000)                        \u2502\n\u2502  - Nacos Service Discovery                             \u2502\n \u2502  - Server Registry                                      \u2502\n\u2502  - Load Balancing                                       \u2502\n\u2502  - Health Monitoring                                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502 Service Discovery\n                 \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Nacos Server                          \u2502\n\u2502  - Service Registration                                    \u2502\n\u2502  - Configuration Management                                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2502 Register/Discover\n                 \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502          MCP Servers (\u591a\u5b9e\u4f8b)                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502\n\u2502  \u2502 MCP Server v6    \u2502  \u2502 MCP Server v4    \u2502             \u2502\n\u2502  \u2502 Port: 8060       \u2502  \u2502 Port: 8040       \u2502  ...        \u2502\n\u2502  \u2502 Tools: @Tool     \u2502  \u2502 Tools: @Tool     \u2502             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"explanations/architecture/#_4","title":"\ud83d\udce6 \u6838\u5fc3\u6a21\u5757","text":""},{"location":"explanations/architecture/#1-mcp-router","title":"1. MCP Router (\u8def\u7531\u5668)","text":"<p>\u804c\u8d23: - \ud83d\udd0d \u670d\u52a1\u53d1\u73b0\u548c\u6ce8\u518c - \ud83d\udd04 \u8d1f\u8f7d\u5747\u8861 - \ud83d\udc93 \u5065\u5eb7\u68c0\u67e5 - \ud83d\udcca \u76d1\u63a7\u548c\u65e5\u5fd7</p> <p>\u6280\u672f\u6808: - Spring Boot 3.2.5 - Spring WebFlux - Nacos Client - Spring AI MCP</p> <p>\u5173\u952e\u7279\u6027: - \u52a8\u6001\u670d\u52a1\u53d1\u73b0 - \u81ea\u52a8\u6545\u969c\u8f6c\u79fb - \u4f1a\u8bdd\u6301\u4e45\u5316 - RESTful API</p>"},{"location":"explanations/architecture/#2-mcp-server","title":"2. MCP Server (\u5de5\u5177\u670d\u52a1\u5668)","text":"<p>\u804c\u8d23: - \ud83d\udee0\ufe0f \u63d0\u4f9b\u5de5\u5177(Tools) - \ud83d\udcbe \u6570\u636e\u8bbf\u95ee - \ud83d\udd10 \u8ba4\u8bc1\u6388\u6743 - \ud83d\udcc8 \u6027\u80fd\u4f18\u5316</p> <p>\u6280\u672f\u6808: - Spring Boot - Spring AI - MyBatis - MySQL/H2</p> <p>\u5173\u952e\u7279\u6027: - <code>@Tool</code> \u6ce8\u89e3\u652f\u6301 - \u81ea\u52a8tool\u53d1\u73b0 - \u652f\u6301\u591a\u5b9e\u4f8b - \u70ed\u91cd\u8f7d\u914d\u7f6e</p>"},{"location":"explanations/architecture/#3-mcp-client","title":"3. MCP Client (\u5ba2\u6237\u7aef)","text":"<p>\u804c\u8d23: - \ud83e\udd16 AI \u5bf9\u8bdd\u63a5\u53e3 - \ud83d\udd0c \u8fde\u63a5 MCP Server - \ud83d\udcdd \u8bf7\u6c42\u7f16\u6392 - \ud83d\udcca \u7ed3\u679c\u805a\u5408</p> <p>\u6280\u672f\u6808: - Spring Boot - Spring AI ChatClient - DeepSeek AI - WebFlux</p> <p>\u5173\u952e\u7279\u6027: - \u81ea\u7136\u8bed\u8a00\u63a5\u53e3 - Tool\u8c03\u7528\u7f16\u6392 - \u6d41\u5f0f\u54cd\u5e94(SSE) - \u7f13\u5b58\u4f18\u5316</p>"},{"location":"explanations/architecture/#_5","title":"\ud83d\udd04 \u6570\u636e\u6d41","text":""},{"location":"explanations/architecture/#1","title":"1. \u7528\u6237\u8bf7\u6c42\u6d41\u7a0b","text":"<pre><code>1. \u7528\u6237\u53d1\u9001 HTTP \u8bf7\u6c42\n   \u2193\n2. MCP Client \u63a5\u6536\u8bf7\u6c42\n   \u251c\u2500 \u89e3\u6790\u7528\u6237\u610f\u56fe\n   \u2514\u2500 \u6784\u9020 AI Prompt\n   \u2193\n3. Spring AI ChatClient \u5904\u7406\n   \u251c\u2500 \u8c03\u7528 DeepSeek API\n   \u2514\u2500 \u8bc6\u522b\u9700\u8981\u7684 Tools\n   \u2193\n4. \u901a\u8fc7 SSE \u8fde\u63a5 MCP Server\n   \u251c\u2500 MCP Router \u8def\u7531\u8bf7\u6c42\n   \u2514\u2500 \u8d1f\u8f7d\u5747\u8861\u5230\u5177\u4f53Server\n   \u2193\n5. MCP Server \u6267\u884c Tool\n   \u251c\u2500 \u8c03\u7528\u4e1a\u52a1\u903b\u8f91\n   \u2514\u2500 \u8bbf\u95ee\u6570\u636e\u5e93\n   \u2193\n6. \u8fd4\u56de\u7ed3\u679c\n   \u251c\u2500 Tool \u7ed3\u679c \u2192 AI\n   \u251c\u2500 AI \u751f\u6210\u56de\u7b54\n   \u2514\u2500 \u8fd4\u56de\u7ed9\u7528\u6237\n</code></pre>"},{"location":"explanations/architecture/#2","title":"2. \u670d\u52a1\u6ce8\u518c\u6d41\u7a0b","text":"<pre><code>1. MCP Server \u542f\u52a8\n   \u2193\n2. \u5411 Nacos \u6ce8\u518c\n   \u251c\u2500 \u670d\u52a1\u540d\u79f0\n   \u251c\u2500 IP\u548c\u7aef\u53e3\n   \u251c\u2500 \u5143\u6570\u636e(Tools\u5217\u8868)\n   \u2514\u2500 \u5065\u5eb7\u68c0\u67e5\u7aef\u70b9\n   \u2193\n3. Nacos \u5b58\u50a8\u670d\u52a1\u4fe1\u606f\n   \u2193\n4. MCP Router \u8ba2\u9605\u53d8\u66f4\n   \u251c\u2500 \u63a5\u6536\u65b0\u670d\u52a1\u901a\u77e5\n   \u2514\u2500 \u66f4\u65b0\u8def\u7531\u8868\n   \u2193\n5. \u5b9a\u671f\u5065\u5eb7\u68c0\u67e5\n   \u2514\u2500 \u81ea\u52a8\u6458\u9664\u4e0d\u5065\u5eb7\u5b9e\u4f8b\n</code></pre>"},{"location":"explanations/architecture/#_6","title":"\ud83d\udd11 \u5173\u952e\u8bbe\u8ba1\u51b3\u7b56","text":""},{"location":"explanations/architecture/#1-nacos","title":"1. \u4e3a\u4ec0\u4e48\u9009\u62e9 Nacos\uff1f","text":"<p>\u4f18\u52bf: - \u2705 \u670d\u52a1\u53d1\u73b0 + \u914d\u7f6e\u7ba1\u7406 - \u2705 \u591a\u6570\u636e\u4e2d\u5fc3\u652f\u6301 - \u2705 \u5065\u5eb7\u68c0\u67e5\u5185\u7f6e - \u2705 \u963f\u91cc\u4e91\u751f\u6001\u96c6\u6210\u597d</p> <p>\u66ff\u4ee3\u65b9\u6848: Eureka, Consul, Zookeeper</p>"},{"location":"explanations/architecture/#2-sse-websocket","title":"2. \u4e3a\u4ec0\u4e48\u4f7f\u7528 SSE \u800c\u975e WebSocket\uff1f","text":"<p>SSE \u4f18\u52bf: - \u2705 \u5355\u5411\u901a\u4fe1\u8db3\u591f(Server \u2192 Client) - \u2705 \u81ea\u52a8\u91cd\u8fde - \u2705 \u66f4\u7b80\u5355\u7684\u534f\u8bae - \u2705 HTTP/2 \u652f\u6301</p> <p>\u9002\u7528\u573a\u666f: \u5b9e\u65f6\u63a8\u9001\u3001\u65e5\u5fd7\u6d41\u3001\u8fdb\u5ea6\u66f4\u65b0</p>"},{"location":"explanations/architecture/#3","title":"3. \u4e3a\u4ec0\u4e48\u591a\u6a21\u5757\u67b6\u6784\uff1f","text":"<p>\u4f18\u52bf: - \u2705 \u5173\u6ce8\u70b9\u5206\u79bb - \u2705 \u72ec\u7acb\u90e8\u7f72 - \u2705 \u6280\u672f\u6808\u7075\u6d3b - \u2705 \u56e2\u961f\u534f\u4f5c\u53cb\u597d</p>"},{"location":"explanations/architecture/#_7","title":"\ud83d\udcca \u6027\u80fd\u8003\u8651","text":""},{"location":"explanations/architecture/#1_1","title":"1. \u7f13\u5b58\u7b56\u7565","text":"<pre><code>// MCP Client \u7f13\u5b58 Tool \u5217\u8868\n@Cacheable(value = \"tools\", key = \"#serverId\")\npublic List&lt;Tool&gt; getToolsByServerId(String serverId)\n\n// MCP Router \u7f13\u5b58\u670d\u52a1\u4fe1\u606f\n@Cacheable(value = \"services\", ttl = 30s)\npublic List&lt;ServiceInstance&gt; getHealthyInstances()\n</code></pre>"},{"location":"explanations/architecture/#2_1","title":"2. \u8fde\u63a5\u6c60","text":"<pre><code># WebClient \u8fde\u63a5\u6c60\u914d\u7f6e\nspring:\n  webflux:\n    client:\n      pool:\n        max-connections: 500\n        max-idle-time: 20s\n</code></pre>"},{"location":"explanations/architecture/#3_1","title":"3. \u8d1f\u8f7d\u5747\u8861","text":"<ul> <li>\u7b97\u6cd5: Round Robin (\u9ed8\u8ba4)</li> <li>\u5065\u5eb7\u68c0\u67e5: \u6bcf 5 \u79d2</li> <li>\u6545\u969c\u8f6c\u79fb: \u81ea\u52a8\u5207\u6362\u5230\u5065\u5eb7\u5b9e\u4f8b</li> </ul>"},{"location":"explanations/architecture/#_8","title":"\ud83d\udd12 \u5b89\u5168\u8003\u8651","text":""},{"location":"explanations/architecture/#1_2","title":"1. \u8ba4\u8bc1\u65b9\u5f0f","text":"<ul> <li>API Key (DeepSeek)</li> <li>JWT Token (\u4f01\u4e1a\u7248)</li> <li>OAuth2 (\u53ef\u9009)</li> </ul>"},{"location":"explanations/architecture/#2_2","title":"2. \u6570\u636e\u5b89\u5168","text":"<ul> <li>\u654f\u611f\u6570\u636e\u52a0\u5bc6\u5b58\u50a8</li> <li>TLS/SSL \u4f20\u8f93\u52a0\u5bc6</li> <li>\u65e5\u5fd7\u8131\u654f</li> </ul>"},{"location":"explanations/architecture/#3_2","title":"3. \u9650\u6d41\u4fdd\u62a4","text":"<pre><code># \u9650\u6d41\u914d\u7f6e\nrate-limit:\n  enabled: true\n  requests-per-second: 100\n  burst-capacity: 200\n</code></pre>"},{"location":"explanations/architecture/#_9","title":"\ud83d\ude80 \u6269\u5c55\u6027","text":""},{"location":"explanations/architecture/#_10","title":"\u6c34\u5e73\u6269\u5c55","text":"<pre><code># \u542f\u52a8\u591a\u4e2a MCP Server \u5b9e\u4f8b\n./start-server.sh --port 8060\n./start-server.sh --port 8061\n./start-server.sh --port 8062\n\n# Nacos \u81ea\u52a8\u8d1f\u8f7d\u5747\u8861\n</code></pre>"},{"location":"explanations/architecture/#_11","title":"\u5782\u76f4\u6269\u5c55","text":"<pre><code># JVM \u53c2\u6570\u4f18\u5316\njava -Xms2g -Xmx4g -XX:+UseG1GC ...\n</code></pre>"},{"location":"explanations/architecture/#_12","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb</li> <li>\u90e8\u7f72\u6307\u5357</li> <li>API \u53c2\u8003</li> <li>\u6027\u80fd\u4f18\u5316</li> </ul> <p>\u95ee\u9898\u53cd\u9988: \u521b\u5efa Issue</p>"},{"location":"explanations/gemini-plan/","title":"Google DeepMind Gemini API \u4e0e Agentic Workflow \u6574\u5408\u65b9\u6848","text":"<p>\u57fa\u4e8e mcp-router-sse-parent \u9879\u76ee\u7684\u6574\u5408\u8ba1\u5212</p> <p>\u521b\u5efa\u65f6\u95f4: 2026-01-28</p>"},{"location":"explanations/gemini-plan/#_1","title":"\ud83d\udccb \u76ee\u5f55","text":"<ol> <li>\u6574\u5408\u6982\u8ff0</li> <li>Google DeepMind API \u80fd\u529b\u6e05\u5355</li> <li>Agentic Workflow \u53c2\u8003\u67b6\u6784</li> <li>\u6574\u5408\u67b6\u6784\u8bbe\u8ba1</li> <li>\u5b9e\u65bd\u8ba1\u5212</li> <li>\u6280\u672f\u6808</li> </ol>"},{"location":"explanations/gemini-plan/#_2","title":"\ud83c\udfaf \u6574\u5408\u6982\u8ff0","text":""},{"location":"explanations/gemini-plan/#_3","title":"\u76ee\u6807","text":"<p>\u5728\u73b0\u6709\u7684 mcp-router-sse-parent \u9879\u76ee\u4e2d\u6574\u5408 Google DeepMind \u7684 Gemini API\uff0c\u6784\u5efa\u4e00\u4e2a\u57fa\u4e8e Spring Boot \u7684\u4f01\u4e1a\u7ea7 Agentic AI \u5de5\u4f5c\u6d41\u7cfb\u7edf\u3002</p>"},{"location":"explanations/gemini-plan/#_4","title":"\u6838\u5fc3\u4ef7\u503c","text":"<ul> <li>\ud83e\udd16 \u591a\u6a21\u578b\u652f\u6301: \u6574\u5408 Gemini\u3001DeepSeek \u7b49\u591a\u4e2a AI \u6a21\u578b</li> <li>\ud83d\udd04 \u667a\u80fd\u5de5\u4f5c\u6d41: \u5b9e\u73b0 Sequential\u3001Parallel\u3001Routing\u3001Loop \u7b49\u591a\u79cd Agent \u6a21\u5f0f</li> <li>\ud83d\udd0c MCP \u534f\u8bae: \u57fa\u4e8e Model Context Protocol \u7684\u6807\u51c6\u5316\u5de5\u5177\u8c03\u7528</li> <li>\ud83c\udf10 \u4f01\u4e1a\u7ea7\u67b6\u6784: \u57fa\u4e8e Spring Cloud Alibaba \u7684\u5fae\u670d\u52a1\u67b6\u6784</li> </ul>"},{"location":"explanations/gemini-plan/#google-deepmind-api","title":"\ud83d\ude80 Google DeepMind API \u80fd\u529b\u6e05\u5355","text":""},{"location":"explanations/gemini-plan/#1","title":"1. \u6838\u5fc3\u6a21\u578b","text":""},{"location":"explanations/gemini-plan/#gemini-3-pro","title":"Gemini 3 Pro (\u6700\u65b0)","text":"<ul> <li>\u63cf\u8ff0: \u6700\u667a\u80fd\u7684\u6a21\u578b\uff0c\u5728\u591a\u6a21\u6001\u7406\u89e3\u65b9\u9762\u5168\u7403\u9886\u5148</li> <li>\u7279\u70b9: \u5148\u8fdb\u7684\u63a8\u7406\u80fd\u529b</li> <li>\u7528\u9014: \u590d\u6742\u4efb\u52a1\u3001\u6df1\u5ea6\u5206\u6790\u3001\u591a\u8f6e\u5bf9\u8bdd</li> </ul>"},{"location":"explanations/gemini-plan/#gemini-3-flash","title":"Gemini 3 Flash (\u6700\u65b0)","text":"<ul> <li>\u63cf\u8ff0: \u524d\u6cbf\u6027\u80fd\uff0c\u6210\u672c\u4ec5\u4e3a\u5927\u578b\u6a21\u578b\u7684\u4e00\u5c0f\u90e8\u5206</li> <li>\u7279\u70b9: \u9ad8\u6027\u4ef7\u6bd4\u3001\u5feb\u901f\u54cd\u5e94</li> <li>\u7528\u9014: \u751f\u4ea7\u73af\u5883\u3001\u5b9e\u65f6\u5e94\u7528</li> </ul>"},{"location":"explanations/gemini-plan/#gemini-25-pro-tts","title":"Gemini 2.5 Pro TTS","text":"<ul> <li>\u63cf\u8ff0: \u539f\u751f\u6587\u672c\u8f6c\u8bed\u97f3\u80fd\u529b</li> <li>\u7279\u70b9: \u9ad8\u8d28\u91cf\u8bed\u97f3\u5408\u6210</li> <li>\u7528\u9014: \u8bed\u97f3\u52a9\u624b\u3001\u5ba2\u670d\u7cfb\u7edf</li> </ul>"},{"location":"explanations/gemini-plan/#gemini-robotics","title":"Gemini Robotics","text":"<ul> <li>\u63cf\u8ff0: \u89c6\u89c9-\u8bed\u8a00\u6a21\u578b (VLM)\uff0c\u5c06 Gemini \u7684\u4ee3\u7406\u80fd\u529b\u5e26\u5165\u673a\u5668\u4eba\u9886\u57df</li> <li>\u7279\u70b9: \u7269\u7406\u4e16\u754c\u7684\u9ad8\u7ea7\u63a8\u7406</li> <li>\u7528\u9014: \u673a\u5668\u4eba\u63a7\u5236\u3001\u7269\u8054\u7f51\u5e94\u7528</li> </ul>"},{"location":"explanations/gemini-plan/#2","title":"2. \u751f\u6210\u80fd\u529b","text":""},{"location":"explanations/gemini-plan/#nano-banana-nano-banana-pro","title":"Nano Banana / Nano Banana Pro","text":"<ul> <li>\u529f\u80fd: \u56fe\u50cf\u751f\u6210\u548c\u7f16\u8f91</li> <li>\u7279\u70b9: \u6700\u5148\u8fdb\u7684\u56fe\u50cf\u751f\u6210\u6a21\u578b</li> <li>API: Image Generation API</li> </ul>"},{"location":"explanations/gemini-plan/#veo-31","title":"Veo 3.1","text":"<ul> <li>\u529f\u80fd: \u89c6\u9891\u751f\u6210\uff0c\u5e26\u539f\u751f\u97f3\u9891</li> <li>\u7279\u70b9: \u9ad8\u8d28\u91cf\u89c6\u9891\u521b\u4f5c</li> <li>API: Video Generation API</li> </ul>"},{"location":"explanations/gemini-plan/#3-api","title":"3. \u6838\u5fc3\u529f\u80fd API","text":""},{"location":"explanations/gemini-plan/#long-context-api","title":"Long Context API","text":"<pre><code>\u80fd\u529b: \u8f93\u5165\u6570\u767e\u4e07\u4e2a tokens\n\u7528\u9014: \u5904\u7406\u957f\u6587\u6863\u3001\u89c6\u9891\u3001\u56fe\u50cf\u7406\u89e3\n\u573a\u666f: \u6587\u6863\u5206\u6790\u3001\u62a5\u544a\u751f\u6210\n</code></pre>"},{"location":"explanations/gemini-plan/#function-calling-api","title":"Function Calling API","text":"<pre><code>\u80fd\u529b: \u8fde\u63a5\u5916\u90e8 API \u548c\u5de5\u5177\n\u7528\u9014: \u6784\u5efa Agentic \u5de5\u4f5c\u6d41\n\u573a\u666f: \u5de5\u5177\u8c03\u7528\u3001\u7cfb\u7edf\u96c6\u6210\n</code></pre>"},{"location":"explanations/gemini-plan/#structured-outputs-api","title":"Structured Outputs API","text":"<pre><code>\u80fd\u529b: \u7ea6\u675f\u54cd\u5e94\u4e3a JSON \u683c\u5f0f\n\u7528\u9014: \u81ea\u52a8\u5316\u6570\u636e\u5904\u7406\n\u573a\u666f: \u6570\u636e\u63d0\u53d6\u3001\u7ed3\u6784\u5316\u8f93\u51fa\n</code></pre>"},{"location":"explanations/gemini-plan/#document-understanding-api","title":"Document Understanding API","text":"<pre><code>\u80fd\u529b: \u5904\u7406\u6700\u591a 1000 \u9875 PDF\n\u7528\u9014: \u591a\u6a21\u6001\u6587\u6863\u7406\u89e3\n\u573a\u666f: \u5408\u540c\u5206\u6790\u3001\u6cd5\u5f8b\u6587\u6863\u5904\u7406\n</code></pre>"},{"location":"explanations/gemini-plan/#live-api-voice-agents","title":"Live API (Voice Agents)","text":"<pre><code>\u80fd\u529b: \u5b9e\u65f6\u8bed\u97f3\u5e94\u7528\n\u7528\u9014: \u6784\u5efa\u8bed\u97f3\u4ee3\u7406\n\u573a\u666f: \u8bed\u97f3\u52a9\u624b\u3001\u5b9e\u65f6\u7ffb\u8bd1\n</code></pre>"},{"location":"explanations/gemini-plan/#thinking-api","title":"Thinking API","text":"<pre><code>\u80fd\u529b: \u601d\u7ef4\u80fd\u529b\u589e\u5f3a\u63a8\u7406\n\u7528\u9014: \u590d\u6742\u4efb\u52a1\u548c\u4ee3\u7406\u63a8\u7406\n\u573a\u666f: \u95ee\u9898\u89e3\u51b3\u3001\u7b56\u7565\u89c4\u5212\n</code></pre>"},{"location":"explanations/gemini-plan/#4","title":"4. \u5185\u7f6e\u5de5\u5177","text":"<ul> <li>Google Search: \u641c\u7d22\u96c6\u6210</li> <li>URL Context: URL \u4e0a\u4e0b\u6587\u7406\u89e3</li> <li>Google Maps: \u5730\u56fe\u96c6\u6210</li> <li>Code Execution: \u4ee3\u7801\u6267\u884c</li> <li>Computer Use: \u8ba1\u7b97\u673a\u64cd\u4f5c</li> </ul>"},{"location":"explanations/gemini-plan/#5-api","title":"5. API \u8bbf\u95ee\u65b9\u5f0f","text":""},{"location":"explanations/gemini-plan/#rest-api","title":"REST API","text":"<pre><code># \u57fa\u7840 URL\nhttps://generativelanguage.googleapis.com/v1beta/models\n\n# \u8ba4\u8bc1\u65b9\u5f0f\nAPI Key: \u901a\u8fc7 Google AI Studio \u7ba1\u7406\n</code></pre>"},{"location":"explanations/gemini-plan/#sdk","title":"SDK \u652f\u6301","text":"<ul> <li>Java SDK</li> <li>Python SDK</li> <li>JavaScript SDK</li> <li>Go SDK</li> <li>C# SDK</li> </ul>"},{"location":"explanations/gemini-plan/#agentic-workflow","title":"\ud83c\udfd7\ufe0f Agentic Workflow \u53c2\u8003\u67b6\u6784","text":""},{"location":"explanations/gemini-plan/#spring-ai-alibaba-agent-framework","title":"\u57fa\u4e8e Spring AI Alibaba Agent Framework","text":"<p>\u6839\u636e GitHub \u4e0a\u6210\u719f\u7684 Spring \u5f00\u53d1\u5de5\u4f5c\u6d41\uff0c\u6211\u4eec\u53c2\u8003\u4ee5\u4e0b\u67b6\u6784\uff1a</p>"},{"location":"explanations/gemini-plan/#1_1","title":"1. \u5de5\u4f5c\u6d41\u7c7b\u578b","text":""},{"location":"explanations/gemini-plan/#sequential-agent","title":"Sequential Agent (\u987a\u5e8f\u4ee3\u7406)","text":"<pre><code>@Component\npublic class SequentialWorkflow {\n    // \u4efb\u52a1\u6309\u987a\u5e8f\u6267\u884c\n    // Task 1 -&gt; Task 2 -&gt; Task 3\n    // \u793a\u4f8b: \u6587\u6863\u5206\u6790 -&gt; \u6570\u636e\u63d0\u53d6 -&gt; \u62a5\u544a\u751f\u6210\n}\n</code></pre>"},{"location":"explanations/gemini-plan/#parallel-agent","title":"Parallel Agent (\u5e76\u884c\u4ee3\u7406)","text":"<pre><code>@Component\npublic class ParallelWorkflow {\n    // \u4efb\u52a1\u5e76\u884c\u6267\u884c\n    // Task 1 \u2510\n    // Task 2 \u251c\u2500&gt; \u6c47\u603b\u7ed3\u679c\n    // Task 3 \u2518\n    // \u793a\u4f8b: \u591a\u6e90\u6570\u636e\u540c\u65f6\u67e5\u8be2\n}\n</code></pre>"},{"location":"explanations/gemini-plan/#routing-agent","title":"Routing Agent (\u8def\u7531\u4ee3\u7406)","text":"<pre><code>@Component\npublic class RoutingWorkflow {\n    // \u6839\u636e\u6761\u4ef6\u8def\u7531\u5230\u4e0d\u540c\u5b50\u4ee3\u7406\n    // \u8f93\u5165 -&gt; \u5224\u65ad -&gt; Agent A / Agent B / Agent C\n    // \u793a\u4f8b: \u6839\u636e\u4efb\u52a1\u590d\u6742\u5ea6\u9009\u62e9\u4e0d\u540c\u6a21\u578b\n}\n</code></pre>"},{"location":"explanations/gemini-plan/#loop-agent","title":"Loop Agent (\u5faa\u73af\u4ee3\u7406)","text":"<pre><code>@Component\npublic class LoopWorkflow {\n    // \u5faa\u73af\u6267\u884c\u76f4\u5230\u6ee1\u8db3\u6761\u4ef6\n    // \u793a\u4f8b: \u8fed\u4ee3\u4f18\u5316\u3001\u81ea\u6211\u4fee\u6b63\n}\n</code></pre>"},{"location":"explanations/gemini-plan/#supervisor-agent","title":"Supervisor Agent (\u76d1\u7763\u4ee3\u7406)","text":"<pre><code>@Component\npublic class SupervisorWorkflow {\n    // \u76d1\u7763\u548c\u534f\u8c03\u591a\u4e2a\u5b50\u4ee3\u7406\n    // \u793a\u4f8b: \u590d\u6742\u9879\u76ee\u7ba1\u7406\n}\n</code></pre>"},{"location":"explanations/gemini-plan/#2_1","title":"2. \u53c2\u8003\u5f00\u6e90\u9879\u76ee","text":""},{"location":"explanations/gemini-plan/#spring-ai-alibaba-examples","title":"Spring AI Alibaba Examples","text":"<ul> <li>\u4ed3\u5e93: <code>alibaba/spring-ai-alibaba</code></li> <li>\u7279\u70b9: </li> <li>DeepResearch Agent (\u7814\u7a76\u4ee3\u7406)</li> <li>DataAgent (NL2SQL)</li> <li>JManus (\u5728\u963f\u91cc\u5df4\u5df4\u5185\u90e8\u5927\u91cf\u5e94\u7528)</li> <li>Flight Booking Assistant</li> </ul>"},{"location":"explanations/gemini-plan/#spring-ai-official-examples","title":"Spring AI Official Examples","text":"<ul> <li>\u4ed3\u5e93: <code>spring-projects/spring-ai-examples</code></li> <li>\u7279\u70b9:</li> <li>Tool Calling</li> <li>RAG (Retrieval Augmented Generation)</li> <li>Prompt Engineering</li> <li>Multi-Model Support</li> </ul>"},{"location":"explanations/gemini-plan/#3","title":"3. \u6838\u5fc3\u7ec4\u4ef6","text":""},{"location":"explanations/gemini-plan/#tool-calling","title":"Tool Calling (\u5de5\u5177\u8c03\u7528)","text":"<pre><code>@Tool(description = \"\u67e5\u8be2\u6570\u636e\u5e93\u4e2d\u7684\u4eba\u5458\u4fe1\u606f\")\npublic Person getPersonById(@ToolParam(description = \"\u4eba\u5458ID\") Long id) {\n    return personRepository.findById(id).orElse(null);\n}\n</code></pre>"},{"location":"explanations/gemini-plan/#context-engineering","title":"Context Engineering (\u4e0a\u4e0b\u6587\u5de5\u7a0b)","text":"<pre><code>// \u7ba1\u7406\u5bf9\u8bdd\u4e0a\u4e0b\u6587\n// \u63d0\u4f9b\u76f8\u5173\u5386\u53f2\u4fe1\u606f\n// \u4f18\u5316 Prompt\n</code></pre>"},{"location":"explanations/gemini-plan/#human-in-the-loop","title":"Human-in-the-Loop (\u4eba\u673a\u534f\u4f5c)","text":"<pre><code>// \u5728\u5173\u952e\u51b3\u7b56\u70b9\u8bf7\u6c42\u4eba\u5de5\u5e72\u9884\n// \u5ba1\u6279\u6d41\u7a0b\n// \u8d28\u91cf\u63a7\u5236\n</code></pre>"},{"location":"explanations/gemini-plan/#_5","title":"\ud83c\udfdb\ufe0f \u6574\u5408\u67b6\u6784\u8bbe\u8ba1","text":""},{"location":"explanations/gemini-plan/#_6","title":"\u6574\u4f53\u67b6\u6784\u56fe","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        \u5ba2\u6237\u7aef\u5c42                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502   Web    \u2502  \u2502  Mobile  \u2502  \u2502   CLI    \u2502  \u2502   API    \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     MCP Client Layer                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502  Spring AI ChatClient (\u7edf\u4e00\u63a5\u53e3)                      \u2502       \u2502\n\u2502  \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524       \u2502\n\u2502  \u2502  - Gemini 3 Pro/Flash   (\u65b0\u589e)                       \u2502       \u2502\n\u2502  \u2502  - DeepSeek             (\u5df2\u6709)                       \u2502       \u2502\n\u2502  \u2502  - \u5176\u4ed6\u6a21\u578b              (\u53ef\u6269\u5c55)                     \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  Agentic Workflow Layer                          \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502Sequential\u2502  \u2502 Parallel \u2502  \u2502 Routing  \u2502  \u2502   Loop   \u2502       \u2502\n\u2502  \u2502  Agent   \u2502  \u2502  Agent   \u2502  \u2502  Agent   \u2502  \u2502  Agent   \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2502                                                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502         Supervisor Agent (\u534f\u8c03\u5668)                   \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    MCP Router Layer                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502  Nacos Service Registry &amp; Discovery                  \u2502       \u2502\n\u2502  \u2502  - \u670d\u52a1\u6ce8\u518c                                            \u2502       \u2502\n\u2502  \u2502  - \u8d1f\u8f7d\u5747\u8861                                            \u2502       \u2502\n\u2502  \u2502  - \u5065\u5eb7\u68c0\u67e5                                            \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    MCP Server Layer                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502  Person  \u2502  \u2502 Document \u2502  \u2502  Search  \u2502  \u2502  Code    \u2502       \u2502\n\u2502  \u2502  Server  \u2502  \u2502  Server  \u2502  \u2502  Server  \u2502  \u2502  Server  \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2502                                                                  \u2502\n\u2502  \u6bcf\u4e2a Server \u63d0\u4f9b:                                               \u2502\n\u2502  - @Tool \u65b9\u6cd5 (Spring AI)                                       \u2502\n\u2502  - SSE \u7aef\u70b9                                                      \u2502\n\u2502  - \u4e1a\u52a1\u903b\u8f91                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      \u6570\u636e &amp; \u5916\u90e8\u670d\u52a1\u5c42                           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502  \u2502  MySQL   \u2502  \u2502  Redis   \u2502  \u2502  Vector  \u2502  \u2502  Google  \u2502       \u2502\n\u2502  \u2502          \u2502  \u2502          \u2502  \u2502   DB     \u2502  \u2502Services  \u2502       \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"explanations/gemini-plan/#_7","title":"\u65b0\u589e\u6a21\u5757\u8bf4\u660e","text":""},{"location":"explanations/gemini-plan/#1-gemini-integration-module","title":"1. gemini-integration-module (\u65b0\u5efa)","text":"<pre><code>\u804c\u8d23: Gemini API \u96c6\u6210\n\u529f\u80fd:\n  - Gemini \u5ba2\u6237\u7aef\u5c01\u88c5\n  - API \u5bc6\u94a5\u7ba1\u7406\n  - \u8bf7\u6c42/\u54cd\u5e94\u8f6c\u6362\n  - \u9519\u8bef\u5904\u7406\n</code></pre>"},{"location":"explanations/gemini-plan/#2-agent-workflow-module","title":"2. agent-workflow-module (\u65b0\u5efa)","text":"<pre><code>\u804c\u8d23: Agentic Workflow \u5b9e\u73b0\n\u529f\u80fd:\n  - Sequential/Parallel/Routing/Loop Agent\n  - Supervisor Agent\n  - Context Management\n  - Human-in-the-Loop\n</code></pre>"},{"location":"explanations/gemini-plan/#3-mcp-client-gemini-mcp-client","title":"3. mcp-client-gemini (\u6269\u5c55\u73b0\u6709 mcp-client)","text":"<pre><code>\u804c\u8d23: Gemini \u7279\u5b9a\u7684 MCP \u5ba2\u6237\u7aef\n\u529f\u80fd:\n  - Gemini ChatClient \u914d\u7f6e\n  - \u591a\u6a21\u6001\u8f93\u5165\u652f\u6301\n  - Function Calling \u96c6\u6210\n</code></pre>"},{"location":"explanations/gemini-plan/#4-mcp-server-gemini-tools","title":"4. mcp-server-gemini-tools (\u65b0\u5efa)","text":"<pre><code>\u804c\u8d23: Gemini \u4e13\u7528\u5de5\u5177\u670d\u52a1\u5668\n\u529f\u80fd:\n  - Document Understanding Tools\n  - Image Generation Tools\n  - Video Generation Tools (Veo)\n  - Voice Agent Tools (TTS)\n</code></pre>"},{"location":"explanations/gemini-plan/#_8","title":"\ud83d\udcdd \u5b9e\u65bd\u8ba1\u5212","text":""},{"location":"explanations/gemini-plan/#1-week-1-2","title":"\u9636\u6bb5 1: \u57fa\u7840\u6574\u5408 (Week 1-2)","text":""},{"location":"explanations/gemini-plan/#11-gemini-api","title":"\u4efb\u52a1 1.1: Gemini API \u96c6\u6210","text":"<ul> <li> \u521b\u5efa <code>gemini-integration-module</code></li> <li> \u6dfb\u52a0 Gemini Java SDK \u4f9d\u8d56</li> <li> \u5b9e\u73b0 GeminiChatClient</li> <li> \u914d\u7f6e API Key \u7ba1\u7406</li> <li> \u7f16\u5199\u5355\u5143\u6d4b\u8bd5</li> </ul>"},{"location":"explanations/gemini-plan/#12-mcp-client","title":"\u4efb\u52a1 1.2: \u6269\u5c55 MCP Client","text":"<ul> <li> \u5728 <code>mcp-client</code> \u4e2d\u6dfb\u52a0 Gemini \u914d\u7f6e</li> <li> \u5b9e\u73b0\u591a\u6a21\u578b\u8def\u7531\u903b\u8f91</li> <li> \u66f4\u65b0 ChatClient \u5de5\u5382\u6a21\u5f0f</li> <li> \u6d4b\u8bd5 Gemini + DeepSeek \u53cc\u6a21\u578b</li> </ul>"},{"location":"explanations/gemini-plan/#13","title":"\u4efb\u52a1 1.3: \u6587\u6863\u4e0e\u914d\u7f6e","text":"<ul> <li> \u66f4\u65b0 README.md</li> <li> \u6dfb\u52a0 Gemini \u914d\u7f6e\u793a\u4f8b</li> <li> \u521b\u5efa\u5feb\u901f\u5f00\u59cb\u6307\u5357</li> </ul>"},{"location":"explanations/gemini-plan/#2-agentic-workflow-week-3-4","title":"\u9636\u6bb5 2: Agentic Workflow (Week 3-4)","text":""},{"location":"explanations/gemini-plan/#21-agent","title":"\u4efb\u52a1 2.1: \u57fa\u7840 Agent \u6846\u67b6","text":"<ul> <li> \u521b\u5efa <code>agent-workflow-module</code></li> <li> \u5b9e\u73b0 Agent \u57fa\u7c7b\u548c\u63a5\u53e3</li> <li> \u5b9e\u73b0 SequentialAgent</li> <li> \u5b9e\u73b0 ParallelAgent</li> <li> \u7f16\u5199\u6d4b\u8bd5\u7528\u4f8b</li> </ul>"},{"location":"explanations/gemini-plan/#22-agent","title":"\u4efb\u52a1 2.2: \u9ad8\u7ea7 Agent","text":"<ul> <li> \u5b9e\u73b0 RoutingAgent</li> <li> \u5b9e\u73b0 LoopAgent</li> <li> \u5b9e\u73b0 SupervisorAgent</li> <li> \u96c6\u6210 Context Management</li> </ul>"},{"location":"explanations/gemini-plan/#23-human-in-the-loop","title":"\u4efb\u52a1 2.3: Human-in-the-Loop","text":"<ul> <li> \u8bbe\u8ba1\u5ba1\u6279\u6d41\u7a0b\u63a5\u53e3</li> <li> \u5b9e\u73b0\u56de\u8c03\u673a\u5236</li> <li> \u6dfb\u52a0 WebSocket \u652f\u6301</li> <li> \u6784\u5efa\u7b80\u5355 UI</li> </ul>"},{"location":"explanations/gemini-plan/#3-gemini-week-5-6","title":"\u9636\u6bb5 3: Gemini \u7279\u8272\u529f\u80fd (Week 5-6)","text":""},{"location":"explanations/gemini-plan/#31-document-understanding","title":"\u4efb\u52a1 3.1: Document Understanding","text":"<ul> <li> \u521b\u5efa <code>mcp-server-gemini-tools</code></li> <li> \u5b9e\u73b0 PDF \u5904\u7406\u5de5\u5177</li> <li> \u96c6\u6210 Long Context API</li> <li> \u6d4b\u8bd5\u5927\u6587\u6863\u5904\u7406</li> </ul>"},{"location":"explanations/gemini-plan/#32","title":"\u4efb\u52a1 3.2: \u591a\u6a21\u6001\u80fd\u529b","text":"<ul> <li> \u5b9e\u73b0\u56fe\u50cf\u7406\u89e3\u5de5\u5177</li> <li> \u5b9e\u73b0\u89c6\u9891\u5206\u6790\u5de5\u5177</li> <li> \u96c6\u6210 Nano Banana (\u56fe\u50cf\u751f\u6210)</li> <li> \u96c6\u6210 Veo 3.1 (\u89c6\u9891\u751f\u6210)</li> </ul>"},{"location":"explanations/gemini-plan/#33-voice-agents","title":"\u4efb\u52a1 3.3: Voice Agents","text":"<ul> <li> \u96c6\u6210 Gemini 2.5 Pro TTS</li> <li> \u5b9e\u73b0 Live API \u652f\u6301</li> <li> \u6784\u5efa\u8bed\u97f3\u5bf9\u8bdd Demo</li> </ul>"},{"location":"explanations/gemini-plan/#4-week-7-8","title":"\u9636\u6bb5 4: \u4f01\u4e1a\u7ea7\u529f\u80fd (Week 7-8)","text":""},{"location":"explanations/gemini-plan/#41","title":"\u4efb\u52a1 4.1: \u76d1\u63a7\u4e0e\u65e5\u5fd7","text":"<ul> <li> \u96c6\u6210 Spring Boot Actuator</li> <li> \u6dfb\u52a0 Prometheus \u6307\u6807</li> <li> \u5b9e\u73b0\u8c03\u7528\u94fe\u8ffd\u8e2a</li> <li> \u914d\u7f6e\u544a\u8b66\u89c4\u5219</li> </ul>"},{"location":"explanations/gemini-plan/#42","title":"\u4efb\u52a1 4.2: \u5b89\u5168\u4e0e\u6743\u9650","text":"<ul> <li> API Key \u5b89\u5168\u5b58\u50a8 (Vault)</li> <li> \u5b9e\u73b0 RBAC \u6743\u9650\u63a7\u5236</li> <li> \u6dfb\u52a0\u8bf7\u6c42\u9650\u6d41</li> <li> \u5ba1\u8ba1\u65e5\u5fd7</li> </ul>"},{"location":"explanations/gemini-plan/#43","title":"\u4efb\u52a1 4.3: \u6027\u80fd\u4f18\u5316","text":"<ul> <li> \u5b9e\u73b0\u54cd\u5e94\u7f13\u5b58</li> <li> \u8fde\u63a5\u6c60\u4f18\u5316</li> <li> \u5f02\u6b65\u5904\u7406\u4f18\u5316</li> <li> \u538b\u529b\u6d4b\u8bd5</li> </ul>"},{"location":"explanations/gemini-plan/#5-week-9-10","title":"\u9636\u6bb5 5: \u793a\u4f8b\u5e94\u7528 (Week 9-10)","text":""},{"location":"explanations/gemini-plan/#1-deepresearch-agent","title":"\u793a\u4f8b 1: DeepResearch Agent","text":"<pre><code>\u529f\u80fd: \u6df1\u5ea6\u7814\u7a76\u62a5\u544a\u751f\u6210\n\u6d41\u7a0b:\n  1. \u63a5\u6536\u7814\u7a76\u4e3b\u9898\n  2. \u4f7f\u7528 Gemini 3 Pro \u8fdb\u884c\u4e3b\u9898\u5206\u6790\n  3. \u5e76\u884c\u6267\u884c\u591a\u4e2a\u641c\u7d22\u4efb\u52a1\n  4. \u6c47\u603b\u548c\u751f\u6210\u62a5\u544a\n  5. \u4eba\u5de5\u5ba1\u6838\n  6. \u6700\u7ec8\u8f93\u51fa\n</code></pre>"},{"location":"explanations/gemini-plan/#2-multi-document-analyzer","title":"\u793a\u4f8b 2: Multi-Document Analyzer","text":"<pre><code>\u529f\u80fd: \u591a\u6587\u6863\u5bf9\u6bd4\u5206\u6790\n\u6d41\u7a0b:\n  1. \u4e0a\u4f20\u591a\u4e2a PDF \u6587\u6863\n  2. \u4f7f\u7528 Document Understanding API \u63d0\u53d6\u5185\u5bb9\n  3. \u4f7f\u7528 Long Context \u8fdb\u884c\u5bf9\u6bd4\u5206\u6790\n  4. \u751f\u6210\u7ed3\u6784\u5316\u62a5\u544a\n</code></pre>"},{"location":"explanations/gemini-plan/#3-voice-customer-service-agent","title":"\u793a\u4f8b 3: Voice Customer Service Agent","text":"<pre><code>\u529f\u80fd: \u8bed\u97f3\u5ba2\u670d\u4ee3\u7406\n\u6d41\u7a0b:\n  1. \u8bed\u97f3\u8f93\u5165 (Live API)\n  2. \u610f\u56fe\u8bc6\u522b (Gemini 3 Flash)\n  3. \u5de5\u5177\u8c03\u7528 (\u67e5\u8be2\u8ba2\u5355\u3001\u9000\u6b3e\u7b49)\n  4. \u8bed\u97f3\u56de\u590d (TTS)\n</code></pre>"},{"location":"explanations/gemini-plan/#_9","title":"\ud83d\udee0\ufe0f \u6280\u672f\u6808","text":""},{"location":"explanations/gemini-plan/#_10","title":"\u540e\u7aef\u6846\u67b6","text":"<ul> <li>Spring Boot: 3.2+</li> <li>Spring AI: 1.0.0-M4+</li> <li>Spring Cloud Alibaba: 2023.0.x</li> <li>Nacos: 2.3.x</li> </ul>"},{"location":"explanations/gemini-plan/#ai-api","title":"AI \u6a21\u578b &amp; API","text":"<ul> <li>Google Gemini API: </li> <li>Gemini 3 Pro</li> <li>Gemini 3 Flash</li> <li>Gemini 2.5 Pro TTS</li> <li>Nano Banana Pro</li> <li>Veo 3.1</li> <li>DeepSeek: \u73b0\u6709\u96c6\u6210</li> </ul>"},{"location":"explanations/gemini-plan/#_11","title":"\u6570\u636e\u5b58\u50a8","text":"<ul> <li>MySQL: \u4e1a\u52a1\u6570\u636e</li> <li>Redis: \u7f13\u5b58 &amp; \u4f1a\u8bdd</li> <li>Vector Database: </li> <li>Milvus / Pinecone (RAG)</li> </ul>"},{"location":"explanations/gemini-plan/#_12","title":"\u6d88\u606f &amp; \u901a\u4fe1","text":"<ul> <li>SSE: Server-Sent Events (MCP)</li> <li>WebSocket: \u5b9e\u65f6\u901a\u4fe1</li> <li>Dubbo: RPC (\u73b0\u6709)</li> </ul>"},{"location":"explanations/gemini-plan/#_13","title":"\u76d1\u63a7 &amp; \u8fd0\u7ef4","text":"<ul> <li>Prometheus: \u6307\u6807\u91c7\u96c6</li> <li>Grafana: \u53ef\u89c6\u5316</li> <li>ELK Stack: \u65e5\u5fd7\u5206\u6790</li> <li>Spring Boot Actuator: \u5065\u5eb7\u68c0\u67e5</li> </ul>"},{"location":"explanations/gemini-plan/#_14","title":"\u5f00\u53d1\u5de5\u5177","text":"<ul> <li>Maven: \u6784\u5efa\u5de5\u5177</li> <li>Git: \u7248\u672c\u63a7\u5236</li> <li>Docker: \u5bb9\u5668\u5316</li> <li>Kubernetes: \u7f16\u6392 (\u53ef\u9009)</li> </ul>"},{"location":"explanations/gemini-plan/#_15","title":"\ud83d\udcca \u9879\u76ee\u7ed3\u6784","text":"<pre><code>mcp-router-sse-parent/\n\u251c\u2500\u2500 pom.xml                                    # \u7236 POM\n\u2502\n\u251c\u2500\u2500 gemini-integration-module/                 # \u3010\u65b0\u5efa\u3011Gemini \u96c6\u6210\n\u2502   \u251c\u2500\u2500 src/main/java/\n\u2502   \u2502   \u2514\u2500\u2500 com/example/gemini/\n\u2502   \u2502       \u251c\u2500\u2500 GeminiClientConfig.java\n\u2502   \u2502       \u251c\u2500\u2500 GeminiChatClient.java\n\u2502   \u2502       \u251c\u2500\u2500 GeminiException.java\n\u2502   \u2502       \u2514\u2500\u2500 model/                        # \u8bf7\u6c42/\u54cd\u5e94\u6a21\u578b\n\u2502   \u2514\u2500\u2500 pom.xml\n\u2502\n\u251c\u2500\u2500 agent-workflow-module/                     # \u3010\u65b0\u5efa\u3011Agent \u5de5\u4f5c\u6d41\n\u2502   \u251c\u2500\u2500 src/main/java/\n\u2502   \u2502   \u2514\u2500\u2500 com/example/agent/\n\u2502   \u2502       \u251c\u2500\u2500 core/\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 Agent.java               # \u57fa\u7840\u63a5\u53e3\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 AgentContext.java\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 AgentExecutor.java\n\u2502   \u2502       \u251c\u2500\u2500 sequential/\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 SequentialAgent.java\n\u2502   \u2502       \u251c\u2500\u2500 parallel/\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 ParallelAgent.java\n\u2502   \u2502       \u251c\u2500\u2500 routing/\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 RoutingAgent.java\n\u2502   \u2502       \u251c\u2500\u2500 loop/\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 LoopAgent.java\n\u2502   \u2502       \u2514\u2500\u2500 supervisor/\n\u2502   \u2502           \u2514\u2500\u2500 SupervisorAgent.java\n\u2502   \u2514\u2500\u2500 pom.xml\n\u2502\n\u251c\u2500\u2500 mcp-client/                                # \u3010\u6269\u5c55\u3011\u73b0\u6709\u5ba2\u6237\u7aef\n\u2502   \u251c\u2500\u2500 src/main/java/\n\u2502   \u2502   \u2514\u2500\u2500 com/example/mcp/client/\n\u2502   \u2502       \u251c\u2500\u2500 config/\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 DeepSeekConfig.java      # \u73b0\u6709\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 GeminiConfig.java        # \u65b0\u589e\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 MultiModelConfig.java    # \u65b0\u589e: \u591a\u6a21\u578b\u8def\u7531\n\u2502   \u2502       \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 pom.xml\n\u2502\n\u251c\u2500\u2500 mcp-server-gemini-tools/                   # \u3010\u65b0\u5efa\u3011Gemini \u5de5\u5177\u670d\u52a1\n\u2502   \u251c\u2500\u2500 src/main/java/\n\u2502   \u2502   \u2514\u2500\u2500 com/example/mcp/server/gemini/\n\u2502   \u2502       \u251c\u2500\u2500 tools/\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 DocumentUnderstandingTool.java\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 ImageGenerationTool.java\n\u2502   \u2502       \u2502   \u251c\u2500\u2500 VideoGenerationTool.java\n\u2502   \u2502       \u2502   \u2514\u2500\u2500 VoiceAgentTool.java\n\u2502   \u2502       \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 pom.xml\n\u2502\n\u251c\u2500\u2500 mcp-server/                                # \u73b0\u6709 Person \u670d\u52a1\n\u251c\u2500\u2500 mcp-router-v3/                             # \u73b0\u6709\u8def\u7531\n\u2502\n\u251c\u2500\u2500 examples/                                  # \u3010\u65b0\u5efa\u3011\u793a\u4f8b\u5e94\u7528\n\u2502   \u251c\u2500\u2500 deep-research-example/\n\u2502   \u251c\u2500\u2500 multi-document-analyzer-example/\n\u2502   \u2514\u2500\u2500 voice-customer-service-example/\n\u2502\n\u251c\u2500\u2500 docs/                                      # \u6587\u6863\n\u2502   \u251c\u2500\u2500 GOOGLE_DEEPMIND_INTEGRATION_PLAN.md  # \u672c\u6587\u6863\n\u2502   \u251c\u2500\u2500 API_REFERENCE.md                      # API \u53c2\u8003\n\u2502   \u2514\u2500\u2500 DEVELOPMENT_GUIDE.md                  # \u5f00\u53d1\u6307\u5357\n\u2502\n\u2514\u2500\u2500 README.md                                  # \u66f4\u65b0\u4e3b README\n</code></pre>"},{"location":"explanations/gemini-plan/#_16","title":"\ud83d\udd10 \u914d\u7f6e\u793a\u4f8b","text":""},{"location":"explanations/gemini-plan/#applicationyml-mcp-client-gemini","title":"application.yml (mcp-client-gemini)","text":"<pre><code>spring:\n  application:\n    name: mcp-client-gemini\n\n  ai:\n    # Gemini \u914d\u7f6e\n    gemini:\n      api-key: ${GEMINI_API_KEY}\n      base-url: https://generativelanguage.googleapis.com/v1beta\n      chat:\n        model: gemini-3-flash  # \u6216 gemini-3-pro\n        temperature: 0.7\n        max-tokens: 2048\n\n    # DeepSeek \u914d\u7f6e (\u4fdd\u7559\u73b0\u6709)\n    openai:\n      api-key: ${DEEPSEEK_API_KEY}\n      base-url: https://api.deepseek.com\n      chat:\n        model: deepseek-chat\n\n    # MCP \u914d\u7f6e\n    mcp:\n      client:\n        sse:\n          connections:\n            person-mcp-server:\n              url: http://localhost:8060\n            gemini-tools-server:\n              url: http://localhost:8070\n\n  # Nacos \u914d\u7f6e\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848\n      config:\n        server-addr: localhost:8848\n\n# Agent \u914d\u7f6e\nagent:\n  workflow:\n    enabled: true\n    default-model: gemini-3-flash\n    routing:\n      # \u6839\u636e\u4efb\u52a1\u590d\u6742\u5ea6\u8def\u7531\n      simple-tasks: gemini-3-flash\n      complex-tasks: gemini-3-pro\n      research-tasks: gemini-3-pro\n    supervisor:\n      enabled: true\n      max-retries: 3\n</code></pre>"},{"location":"explanations/gemini-plan/#kpi","title":"\ud83d\udcc8 \u6027\u80fd\u6307\u6807 &amp; KPI","text":""},{"location":"explanations/gemini-plan/#_17","title":"\u76ee\u6807\u6307\u6807","text":"\u6307\u6807 \u76ee\u6807\u503c \u8bf4\u660e API \u54cd\u5e94\u65f6\u95f4 (P95) &lt; 2s Gemini 3 Flash API \u54cd\u5e94\u65f6\u95f4 (P95) &lt; 5s Gemini 3 Pro \u5e76\u53d1\u5904\u7406\u80fd\u529b 1000 QPS \u5355\u5b9e\u4f8b \u53ef\u7528\u6027 99.9% \u5e74\u5ea6 \u9519\u8bef\u7387 &lt; 0.1% \u6708\u5ea6"},{"location":"explanations/gemini-plan/#_18","title":"\u6210\u672c\u4f18\u5316","text":"<ul> <li>Sequential \u7b80\u5355\u4efb\u52a1\u4f18\u5148\u4f7f\u7528 Gemini 3 Flash (\u4f4e\u6210\u672c)</li> <li>\u590d\u6742\u5206\u6790\u4efb\u52a1\u4f7f\u7528 Gemini 3 Pro (\u9ad8\u51c6\u786e\u6027)</li> <li>\u5b9e\u73b0\u667a\u80fd\u7f13\u5b58\u51cf\u5c11\u91cd\u590d\u8bf7\u6c42</li> <li>\u6279\u91cf\u5904\u7406\u964d\u4f4e\u8c03\u7528\u6b21\u6570</li> </ul>"},{"location":"explanations/gemini-plan/#_19","title":"\ud83c\udf93 \u5b66\u4e60\u8d44\u6e90","text":""},{"location":"explanations/gemini-plan/#_20","title":"\u5b98\u65b9\u6587\u6863","text":"<ul> <li>Gemini API \u6587\u6863</li> <li>Spring AI \u6587\u6863</li> <li>Spring AI Alibaba</li> </ul>"},{"location":"explanations/gemini-plan/#_21","title":"\u793a\u4f8b\u9879\u76ee","text":"<ul> <li>Spring AI Examples</li> <li>Spring AI Alibaba Examples</li> </ul>"},{"location":"explanations/gemini-plan/#_22","title":"\u89c6\u9891\u6559\u7a0b","text":"<ul> <li>Spring AI YouTube Channel</li> <li>Gemini API Tutorials</li> </ul>"},{"location":"explanations/gemini-plan/#_23","title":"\ud83e\udd1d \u8d21\u732e\u6307\u5357","text":"<ol> <li>Fork \u9879\u76ee</li> <li>\u521b\u5efa\u7279\u6027\u5206\u652f (<code>git checkout -b feature/amazing-feature</code>)</li> <li>\u63d0\u4ea4\u66f4\u6539 (<code>git commit -m 'Add amazing feature'</code>)</li> <li>\u63a8\u9001\u5230\u5206\u652f (<code>git push origin feature/amazing-feature</code>)</li> <li>\u5f00\u542f Pull Request</li> </ol>"},{"location":"explanations/gemini-plan/#_24","title":"\ud83d\udcde \u8054\u7cfb\u65b9\u5f0f","text":"<ul> <li>\u9879\u76ee\u7ef4\u62a4\u8005: [\u60a8\u7684\u540d\u5b57]</li> <li>Email: [\u60a8\u7684\u90ae\u7bb1]</li> <li>Issues: GitHub Issues</li> </ul>"},{"location":"explanations/gemini-plan/#_25","title":"\ud83d\udcc4 \u8bb8\u53ef\u8bc1","text":"<p>Apache License 2.0</p>"},{"location":"explanations/gemini-plan/#_26","title":"\ud83d\uddd3\ufe0f \u66f4\u65b0\u65e5\u5fd7","text":""},{"location":"explanations/gemini-plan/#v100-2026-01-28","title":"v1.0.0 (2026-01-28)","text":"<ul> <li>\u2728 \u521d\u59cb\u6574\u5408\u8ba1\u5212</li> <li>\ud83d\udcdd \u6587\u6863\u5b8c\u6210</li> </ul>"},{"location":"explanations/gemini-plan/#_27","title":"\u5f85\u529e\u4e8b\u9879","text":"<ul> <li> \u9636\u6bb5 1: \u57fa\u7840\u6574\u5408</li> <li> \u9636\u6bb5 2: Agentic Workflow</li> <li> \u9636\u6bb5 3: Gemini \u7279\u8272\u529f\u80fd</li> <li> \u9636\u6bb5 4: \u4f01\u4e1a\u7ea7\u529f\u80fd</li> <li> \u9636\u6bb5 5: \u793a\u4f8b\u5e94\u7528</li> </ul> <p>\ud83c\udfaf \u4e0b\u4e00\u6b65\u884c\u52a8: \u5f00\u59cb\u6267\u884c\u9636\u6bb5 1 - \u57fa\u7840\u6574\u5408</p>"},{"location":"explanations/workflow-comparison/","title":"GitHub \u6210\u719f\u5f00\u53d1\u5de5\u4f5c\u6d41\u5bf9\u6bd4\u5206\u6790","text":"<p>\u4e3a <code>mcp-router-sse-parent</code> \u9879\u76ee\u9009\u62e9\u6700\u4f73\u5de5\u4f5c\u6d41</p> <p>\u66f4\u65b0\u65f6\u95f4: 2026-01-28</p>"},{"location":"explanations/workflow-comparison/#_1","title":"\ud83d\udccb \u76ee\u5f55","text":"<ol> <li>\u5206\u652f\u7b56\u7565\u5bf9\u6bd4</li> <li>CI/CD \u5de5\u4f5c\u6d41\u5bf9\u6bd4</li> <li>AI Agent \u5f00\u53d1\u5de5\u4f5c\u6d41\u5bf9\u6bd4</li> <li>Spring \u751f\u6001\u5de5\u4f5c\u6d41\u6700\u4f73\u5b9e\u8df5</li> <li>\u63a8\u8350\u65b9\u6848</li> </ol>"},{"location":"explanations/workflow-comparison/#1","title":"1. \u5206\u652f\u7b56\u7565\u5bf9\u6bd4","text":""},{"location":"explanations/workflow-comparison/#11","title":"1.1 \u4e3b\u6d41\u5206\u652f\u7b56\u7565","text":"\u7b56\u7565 \u590d\u6742\u5ea6 \u9002\u7528\u573a\u666f \u4f18\u70b9 \u7f3a\u70b9 2026\u63a8\u8350\u5ea6 Git Flow \u2b50\u2b50\u2b50\u2b50\u2b50 \u5927\u578b\u9879\u76ee\u3001\u5b9a\u671f\u53d1\u5e03 \u7ed3\u6784\u6e05\u6670\u3001\u9002\u5408\u591a\u7248\u672c\u7ba1\u7406 \u8fc7\u4e8e\u590d\u6742\u3001\u5408\u5e76\u51b2\u7a81\u591a \u2b50\u2b50 \u4e0d\u63a8\u8350 GitHub Flow \u2b50\u2b50 \u5c0f\u56e2\u961f\u3001\u5feb\u901f\u8fed\u4ee3 \u7b80\u5355\u3001\u6301\u7eed\u90e8\u7f72\u53cb\u597d \u7f3a\u5c11\u53d1\u5e03\u7ba1\u7406 \u2b50\u2b50\u2b50\u2b50 \u63a8\u8350 Trunk-Based \u2b50 \u5927\u56e2\u961f\u3001CI/CD \u6210\u719f \u6301\u7eed\u96c6\u6210\u3001\u51cf\u5c11\u51b2\u7a81 \u9700\u8981\u9ad8\u5ea6\u81ea\u52a8\u5316 \u2b50\u2b50\u2b50\u2b50\u2b50 \u5f3a\u70c8\u63a8\u8350 GitLab Flow \u2b50\u2b50\u2b50 \u591a\u73af\u5883\u90e8\u7f72 \u73af\u5883\u5206\u652f\u6e05\u6670 \u4e2d\u7b49\u590d\u6742\u5ea6 \u2b50\u2b50\u2b50 \u53ef\u9009"},{"location":"explanations/workflow-comparison/#12","title":"1.2 \u8be6\u7ec6\u5bf9\u6bd4","text":""},{"location":"explanations/workflow-comparison/#git-flow","title":"Git Flow\uff08\u4f20\u7edf\u4f46\u590d\u6742\uff09","text":"<p>\u5206\u652f\u7ed3\u6784: <pre><code>main (master)           # \u751f\u4ea7\u73af\u5883\n  \u251c\u2500 develop            # \u5f00\u53d1\u4e3b\u7ebf\n  \u2502   \u251c\u2500 feature/*      # \u529f\u80fd\u5206\u652f\n  \u2502   \u251c\u2500 release/*      # \u53d1\u5e03\u5206\u652f\n  \u2502   \u2514\u2500 hotfix/*       # \u70ed\u4fee\u590d\u5206\u652f\n</code></pre></p> <p>\u5de5\u4f5c\u6d41\u7a0b: 1. \u4ece <code>develop</code> \u521b\u5efa <code>feature/xxx</code> 2. \u5b8c\u6210\u540e\u5408\u5e76\u56de <code>develop</code> 3. \u51c6\u5907\u53d1\u5e03\u65f6\u521b\u5efa <code>release/x.x</code> 4. \u6d4b\u8bd5\u901a\u8fc7\u540e\u5408\u5e76\u5230 <code>main</code> \u548c <code>develop</code> 5. \u7d27\u6025\u4fee\u590d\u4ece <code>main</code> \u521b\u5efa <code>hotfix/xxx</code></p> <p>\u5224\u65ad: \u274c \u4e0d\u63a8\u8350\u7528\u4e8e\u60a8\u7684\u9879\u76ee - \u539f\u56e0: \u8fc7\u4e8e\u590d\u6742\uff0c2026 \u5e74\u8d8b\u52bf\u662f\u7b80\u5316 - \u60a8\u7684\u9879\u76ee: MCP \u6a21\u5757\u5f00\u53d1\u66f4\u9002\u5408\u7b80\u5355\u6d41\u7a0b</p>"},{"location":"explanations/workflow-comparison/#github-flow","title":"GitHub Flow\uff08\u7b80\u5355\u9ad8\u6548\uff09\u2b50\u2b50\u2b50\u2b50","text":"<p>\u5206\u652f\u7ed3\u6784: <pre><code>main                    # \u53ef\u90e8\u7f72\u7684\u4e3b\u5206\u652f\n  \u251c\u2500 feature/add-mcp-server-weather\n  \u251c\u2500 bugfix/fix-agent-loop  \n  \u2514\u2500 docs/update-readme\n</code></pre></p> <p>\u5de5\u4f5c\u6d41\u7a0b: 1. \u4ece <code>main</code> \u521b\u5efa\u5206\u652f 2. \u6301\u7eed\u63d0\u4ea4\u5230\u5206\u652f 3. \u5f00 Pull Request (PR) 4. \u4ee3\u7801\u5ba1\u67e5 5. \u5408\u5e76\u5230 <code>main</code> 6. \u81ea\u52a8\u90e8\u7f72</p> <p>\u793a\u4f8b (\u60a8\u7684\u9879\u76ee): <pre><code># 1. \u521b\u5efa\u5206\u652f\ngit checkout -b feature/add-gemini-integration\n\n# 2. \u5f00\u53d1\u5e76\u63d0\u4ea4\ngit add .\ngit commit -m \"feat: add Gemini ChatClient configuration\"\n\n# 3. \u63a8\u9001\u5e76\u521b\u5efa PR\ngit push origin feature/add-gemini-integration\n\n# 4. \u5728 GitHub \u521b\u5efa PR\uff0c\u89e6\u53d1 CI/CD\n# 5. \u4ee3\u7801\u5ba1\u67e5\u901a\u8fc7\u540e\u5408\u5e76\n# 6. main \u5206\u652f\u81ea\u52a8\u90e8\u7f72\n</code></pre></p> <p>\u5224\u65ad: \u2705 \u63a8\u8350\u7528\u4e8e\u5c0f\u578b\u56e2\u961f\u548c\u5feb\u901f\u8fed\u4ee3</p>"},{"location":"explanations/workflow-comparison/#trunk-based-development2026","title":"Trunk-Based Development\uff082026 \u5e74\u6700\u4f73\u5b9e\u8df5\uff09\u2b50\u2b50\u2b50\u2b50\u2b50","text":"<p>\u6838\u5fc3\u7406\u5ff5: \u6240\u6709\u5f00\u53d1\u8005\u76f4\u63a5\u5728 <code>main</code> \u4e0a\u5de5\u4f5c\uff0c\u6216\u4f7f\u7528\u77ed\u751f\u547d\u5468\u671f\u5206\u652f\uff08&lt; 1\u5929\uff09</p> <p>\u5206\u652f\u7ed3\u6784: <pre><code>main                    # \u552f\u4e00\u4e3b\u7ebf\n  \u251c\u2500 (\u77ed\u671f\u5206\u652f\uff0c\u51e0\u5c0f\u65f6\u540e\u5408\u5e76)\n</code></pre></p> <p>\u5de5\u4f5c\u6d41\u7a0b: 1. \u4ece <code>main</code> \u521b\u5efa\u77ed\u671f\u5206\u652f\uff082-4 \u5c0f\u65f6\u5185\u5b8c\u6210\uff09 2. \u5feb\u901f\u5f00\u53d1\u3001\u6d4b\u8bd5 3. \u7acb\u5373\u5408\u5e76\u56de <code>main</code> 4. \u4f7f\u7528 Feature Flags \u63a7\u5236\u672a\u5b8c\u6210\u529f\u80fd</p> <p>\u793a\u4f8b (\u60a8\u7684\u9879\u76ee): <pre><code># 1. \u62c9\u53d6\u6700\u65b0 main\ngit pull origin main\n\n# 2. \u521b\u5efa\u77ed\u671f\u5206\u652f\ngit checkout -b quick/add-weather-tool\n\n# 3. \u5feb\u901f\u5b9e\u73b0\uff082\u5c0f\u65f6\u5185\uff09\n# \u7f16\u5199\u4ee3\u7801...\n\n# 4. \u63d0\u4ea4\u5e76\u7acb\u5373\u5408\u5e76\ngit add .\ngit commit -m \"feat: add weather tool (feature flag enabled)\"\ngit push origin quick/add-weather-tool\n\n# 5. \u521b\u5efa PR\uff0c\u5feb\u901f\u5ba1\u67e5\uff0c\u5408\u5e76\n# 6. \u5220\u9664\u5206\u652f\n</code></pre></p> <p>Feature Flags \u793a\u4f8b: <pre><code>@Configuration\npublic class FeatureConfig {\n\n    @Value(\"${feature.gemini.enabled:false}\")\n    private boolean geminiEnabled;\n\n    @Bean\n    @ConditionalOnProperty(name = \"feature.gemini.enabled\", havingValue = \"true\")\n    public ChatClient geminiChatClient() {\n        // Gemini \u914d\u7f6e\n    }\n}\n</code></pre></p> <p>\u5224\u65ad: \u2705 \u5f3a\u70c8\u63a8\u8350\u7528\u4e8e\u6210\u719f CI/CD - \u9002\u5408\u60a8\u7684\u9879\u76ee: \u6a21\u5757\u5316\u3001\u5feb\u901f\u8fed\u4ee3 - \u9700\u8981: \u5f3a\u5927\u7684\u81ea\u52a8\u5316\u6d4b\u8bd5</p>"},{"location":"explanations/workflow-comparison/#13","title":"1.3 \u63a8\u8350\u9009\u62e9","text":"<p>\u9488\u5bf9 <code>mcp-router-sse-parent</code> \u9879\u76ee:</p> \u573a\u666f \u63a8\u8350\u7b56\u7565 \u5f53\u524d\u9636\u6bb5\uff08\u5feb\u901f\u5f00\u53d1\uff09 GitHub Flow \u56e2\u961f\u6210\u719f\uff08CI/CD\u5b8c\u5584\uff09 Trunk-Based Development \u591a\u7248\u672c\u7ef4\u62a4 GitLab Flow"},{"location":"explanations/workflow-comparison/#2-cicd","title":"2. CI/CD \u5de5\u4f5c\u6d41\u5bf9\u6bd4","text":""},{"location":"explanations/workflow-comparison/#21-spring-boot-cicd-pipeline","title":"2.1 Spring Boot \u6807\u51c6 CI/CD Pipeline","text":"<p>\u57fa\u4e8e GitHub Actions \u7684\u6700\u4f73\u5b9e\u8df5\uff1a</p>"},{"location":"explanations/workflow-comparison/#a-cicd","title":"\u65b9\u6848 A: \u57fa\u7840 CI/CD\uff08\u63a8\u8350\u8d77\u6b65\uff09","text":"<p>\u6587\u4ef6: <code>.github/workflows/ci-cd.yml</code></p> <pre><code>name: Spring Boot CI/CD\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  build-and-test:\n    runs-on: ubuntu-latest\n\n    steps:\n    # 1. \u68c0\u51fa\u4ee3\u7801\n    - uses: actions/checkout@v4\n\n    # 2. \u8bbe\u7f6e JDK\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'corretto'\n        cache: maven\n\n    # 3. \u6784\u5efa\u548c\u6d4b\u8bd5\n    - name: Build with Maven\n      run: mvn -B clean install\n\n    # 4. \u8fd0\u884c\u6d4b\u8bd5\n    - name: Run Tests\n      run: mvn test\n\n    # 5. \u751f\u6210\u6d4b\u8bd5\u62a5\u544a\n    - name: Publish Test Report\n      uses: dorny/test-reporter@v1\n      if: always()\n      with:\n        name: Maven Tests\n        path: '**/surefire-reports/*.xml'\n        reporter: java-junit\n\n    # 6. \u4ee3\u7801\u8986\u76d6\u7387\n    - name: Upload Coverage\n      uses: codecov/codecov-action@v3\n      with:\n        files: target/site/jacoco/jacoco.xml\n\n  deploy:\n    needs: build-and-test\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n\n    steps:\n    - uses: actions/checkout@v4\n\n    # ... \u90e8\u7f72\u6b65\u9aa4\n</code></pre> <p>\u9002\u7528:  - \u2705 \u5c0f\u578b\u9879\u76ee - \u2705 \u5feb\u901f\u542f\u52a8 - \u274c \u7f3a\u5c11\u9ad8\u7ea7\u529f\u80fd</p>"},{"location":"explanations/workflow-comparison/#b-cicd","title":"\u65b9\u6848 B: \u591a\u6a21\u5757\u9879\u76ee CI/CD\uff08\u63a8\u8350\u60a8\u7684\u9879\u76ee\uff09","text":"<p>\u6587\u4ef6: <code>.github/workflows/maven-multi-module.yml</code></p> <pre><code>name: Multi-Module Spring Boot CI/CD\n\non:\n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  # Job 1: \u68c0\u6d4b\u53d8\u66f4\u7684\u6a21\u5757\n  detect-changes:\n    runs-on: ubuntu-latest\n    outputs:\n      mcp-router: ${{ steps.filter.outputs.mcp-router }}\n      mcp-server-v6: ${{ steps.filter.outputs.mcp-server-v6 }}\n      mcp-client: ${{ steps.filter.outputs.mcp-client }}\n    steps:\n      - uses: actions/checkout@v4\n      - uses: dorny/paths-filter@v2\n        id: filter\n        with:\n          filters: |\n            mcp-router:\n              - 'mcp-router-v3/**'\n            mcp-server-v6:\n              - 'mcp-server-v6/**'\n            mcp-client:\n              - 'mcp-client/**'\n\n  # Job 2: \u6784\u5efa\u548c\u6d4b\u8bd5\u53d8\u66f4\u7684\u6a21\u5757\n  build:\n    needs: detect-changes\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        module: [mcp-router-v3, mcp-server-v6, mcp-client]\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Set up JDK 17\n        uses: actions/setup-java@v4\n        with:\n          java-version: '17'\n          distribution: 'corretto'\n          cache: maven\n\n      - name: Build ${{ matrix.module }}\n        if: needs.detect-changes.outputs[matrix.module] == 'true'\n        run: |\n          cd ${{ matrix.module }}\n          mvn clean install -DskipTests\n\n      - name: Test ${{ matrix.module }}\n        if: needs.detect-changes.outputs[matrix.module] == 'true'\n        run: |\n          cd ${{ matrix.module }}\n          mvn test\n\n      # \u4e0a\u4f20\u6784\u5efa\u4ea7\u7269\n      - name: Upload JAR\n        if: needs.detect-changes.outputs[matrix.module] == 'true'\n        uses: actions/upload-artifact@v3\n        with:\n          name: ${{ matrix.module }}-jar\n          path: ${{ matrix.module }}/target/*.jar\n\n  # Job 3: Docker \u6784\u5efa\uff08\u53ef\u9009\uff09\n  docker-build:\n    needs: build\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Set up Docker Buildx\n        uses: docker/setup-buildx-action@v2\n\n      - name: Login to Docker Hub\n        uses: docker/login-action@v2\n        with:\n          username: ${{ secrets.DOCKERHUB_USERNAME }}\n          password: ${{ secrets.DOCKERHUB_TOKEN }}\n\n      - name: Build and Push\n        uses: docker/build-push-action@v4\n        with:\n          context: ./mcp-server-v6\n          push: true\n          tags: yourname/mcp-server-v6:latest\n</code></pre> <p>\u4f18\u52bf: - \u2705 \u53ea\u6784\u5efa\u53d8\u66f4\u7684\u6a21\u5757 - \u2705 \u5e76\u884c\u6784\u5efa - \u2705 \u8282\u7701\u65f6\u95f4</p>"},{"location":"explanations/workflow-comparison/#c-cicd","title":"\u65b9\u6848 C: \u5b8c\u6574\u4f01\u4e1a\u7ea7 CI/CD","text":"<p>\u5305\u542b: - \u2705 \u591a\u73af\u5883\u90e8\u7f72\uff08dev/staging/prod\uff09 - \u2705 \u5b89\u5168\u626b\u63cf - \u2705 \u6027\u80fd\u6d4b\u8bd5 - \u2705 \u81ea\u52a8\u56de\u6eda</p> <p>\uff08\u8be6\u7ec6\u914d\u7f6e\u89c1\u9644\u5f55\uff09</p>"},{"location":"explanations/workflow-comparison/#22","title":"2.2 \u5de5\u4f5c\u6d41\u5bf9\u6bd4\u8868","text":"\u7279\u6027 \u65b9\u6848 A (\u57fa\u7840) \u65b9\u6848 B (\u591a\u6a21\u5757) \u65b9\u6848 C (\u4f01\u4e1a\u7ea7) \u8bbe\u7f6e\u590d\u6742\u5ea6 \u2b50 \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u6784\u5efa\u901f\u5ea6 \u6162 \u5feb \u4e2d \u9002\u7528\u9879\u76ee\u89c4\u6a21 \u5c0f \u4e2d\u5927 \u5927\u578b\u4f01\u4e1a \u53d8\u66f4\u68c0\u6d4b \u274c \u2705 \u2705 \u5e76\u884c\u6784\u5efa \u274c \u2705 \u2705 \u5b89\u5168\u626b\u63cf \u274c \u274c \u2705 \u591a\u73af\u5883\u90e8\u7f72 \u274c \u26a0\ufe0f \u624b\u52a8 \u2705 \u63a8\u8350\u5ea6\uff08\u60a8\u7684\u9879\u76ee\uff09 \u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50"},{"location":"explanations/workflow-comparison/#3-ai-agent","title":"3. AI Agent \u5f00\u53d1\u5de5\u4f5c\u6d41\u5bf9\u6bd4","text":""},{"location":"explanations/workflow-comparison/#31-langgraph-vs-spring-ai-alibaba-graph","title":"3.1 LangGraph vs Spring AI Alibaba Graph","text":"\u5bf9\u6bd4\u9879 LangGraph (Python) Spring AI Alibaba Graph (Java) \u8bed\u8a00 Python Java (\u60a8\u7684\u9879\u76ee) \u2705 \u72b6\u6001\u7ba1\u7406 Persistent State OverAllState + Checkpointer \u2705 \u8282\u70b9\u7c7b\u578b \u81ea\u5b9a\u4e49\u51fd\u6570 LlmNode, ToolNode, RouterNode \u2705 \u53ef\u89c6\u5316 \u274c Mermaid + PlantUML \u2705 Human-in-the-Loop \u2705 \u2705 \u9519\u8bef\u5904\u7406 \u8282\u70b9\u7ea7\u91cd\u8bd5 \u8282\u70b9\u7ea7\u91cd\u8bd5 + \u6761\u4ef6\u8def\u7531 \u2705 Spring \u96c6\u6210 \u274c \u539f\u751f\u652f\u6301 \u2705 \u5b66\u4e60\u66f2\u7ebf \u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 \u751f\u6001\u6210\u719f\u5ea6 \u2b50\u2b50\u2b50\u2b50\u2b50 \u2b50\u2b50\u2b50\u2b50 (\u5feb\u901f\u6210\u957f)"},{"location":"explanations/workflow-comparison/#32-agent","title":"3.2 Agent \u5f00\u53d1\u5de5\u4f5c\u6d41\u6a21\u5f0f","text":""},{"location":"explanations/workflow-comparison/#1-reactagent","title":"\u6a21\u5f0f 1: ReactAgent (\u63a8\u8350\u7528\u4e8e\u901a\u7528\u4efb\u52a1)","text":"<pre><code>// \u5de5\u4f5c\u6d41: \u601d\u8003 \u2192 \u8c03\u7528\u5de5\u5177 \u2192 \u89c2\u5bdf\u7ed3\u679c \u2192 \u91cd\u590d\nReactAgent agent = ReactAgent.builder()\n    .name(\"weather-agent\")\n    .chatClient(chatClient)\n    .tools(tools)  // \u81ea\u52a8\u53d1\u73b0 @Tool\n    .maxIterations(10)\n    .build();\n\n// \u6267\u884c\nvar result = agent.getAndCompileGraph().invoke(input);\n</code></pre> <p>\u9002\u7528\u573a\u666f: - \u2705 \u9700\u8981\u591a\u6b65\u63a8\u7406 - \u2705 \u9700\u8981\u8c03\u7528\u5de5\u5177 - \u2705 \u4efb\u52a1\u660e\u786e</p>"},{"location":"explanations/workflow-comparison/#2-stategraph","title":"\u6a21\u5f0f 2: StateGraph (\u63a8\u8350\u7528\u4e8e\u590d\u6742\u6d41\u7a0b)","text":"<pre><code>// \u5de5\u4f5c\u6d41: \u81ea\u5b9a\u4e49\u72b6\u6001\u56fe\nvar graph = new StateGraph();\n\n// \u5b9a\u4e49\u8282\u70b9\ngraph.addNode(\"plan\", planNode);\ngraph.addNode(\"execute\", executeNode);\ngraph.addNode(\"review\", reviewNode);\n\n// \u5b9a\u4e49\u6d41\u7a0b\ngraph.addEdge(START, \"plan\");\ngraph.addConditionalEdges(\"execute\",\n    state -&gt; needReview(state) ? \"review\" : END);\n\n// \u6267\u884c\nvar compiled = graph.compile();\ncompiled.invoke(input);\n</code></pre> <p>\u9002\u7528\u573a\u666f: - \u2705 \u9700\u8981\u6761\u4ef6\u5206\u652f - \u2705 \u9700\u8981\u5faa\u73af - \u2705 \u590d\u6742\u4e1a\u52a1\u903b\u8f91</p>"},{"location":"explanations/workflow-comparison/#3-supervisor-pattern-agent","title":"\u6a21\u5f0f 3: Supervisor Pattern (\u63a8\u8350\u7528\u4e8e\u591aAgent\u534f\u4f5c)","text":"<pre><code>// \u5de5\u4f5c\u6d41: \u4e3bAgent\u534f\u8c03\u591a\u4e2a\u5b50Agent\nSupervisorAgent supervisor = SupervisorAgent.builder()\n    .mainAgent(coordinatorAgent)\n    .subAgents(List.of(\n        weatherAgent,\n        newsAgent,\n        reportAgent\n    ))\n    .router(routingLogic)\n    .build();\n</code></pre> <p>\u9002\u7528\u573a\u666f: - \u2705 \u5927\u578b\u590d\u6742\u4efb\u52a1 - \u2705 \u9700\u8981\u4efb\u52a1\u5206\u89e3 - \u2705 \u5e76\u884c\u5904\u7406</p>"},{"location":"explanations/workflow-comparison/#33","title":"3.3 \u5f00\u53d1\u5de5\u4f5c\u6d41\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"explanations/workflow-comparison/#langgraph","title":"LangGraph \u6700\u4f73\u5b9e\u8df5\uff08\u53c2\u8003\uff09","text":"<ol> <li>\u8bbe\u8ba1\u5148\u884c: \u5148\u753b\u72b6\u6001\u56fe</li> <li>\u6a21\u5757\u5316\u8282\u70b9: \u6bcf\u4e2a\u8282\u70b9\u5355\u4e00\u804c\u8d23</li> <li>\u9519\u8bef\u5904\u7406: \u6bcf\u4e2a\u8282\u70b9\u90fd\u8981\u5904\u7406\u5f02\u5e38</li> <li>\u6301\u4e45\u5316\u72b6\u6001: \u4f7f\u7528 Checkpointer</li> <li>\u53cd\u9988\u5faa\u73af: Agent \u81ea\u6211\u5ba1\u67e5</li> </ol>"},{"location":"explanations/workflow-comparison/#spring-ai-alibaba-graph","title":"Spring AI Alibaba Graph \u6700\u4f73\u5b9e\u8df5\uff08\u60a8\u7684\u9879\u76ee\uff09\u2705","text":"<ol> <li> <p>\u53c2\u8003\u73b0\u6709\u5b9e\u73b0:    <pre><code># JManus - \u4f01\u4e1a\u7ea7 Agent\nspring-ai-alibaba/spring-ai-alibaba-jmanus/\n\n# DeepResearch - \u7814\u7a76 Agent\nspring-ai-alibaba/spring-ai-alibaba-deepresearch/\n\n# Graph Examples - \u5404\u79cd\u6a21\u5f0f\nspring-ai-alibaba/spring-ai-alibaba-graph/spring-ai-alibaba-graph-example/\n</code></pre></p> </li> <li> <p>\u4f7f\u7528 Builder \u6a21\u5f0f:    <pre><code>ReactAgent.builder()\n    .name(\"my-agent\")\n    .chatClient(chatClient)\n    .tools(tools)\n    .build();\n</code></pre></p> </li> <li> <p>\u72b6\u6001\u7ba1\u7406:    <pre><code>var stateFactory = OverAllStateFactory.builder()\n    .addMessageKey(\"messages\")\n    .addField(\"data\", List.class)\n    .build();\n</code></pre></p> </li> <li> <p>\u53ef\u89c6\u5316:    <pre><code>var mermaid = graph.exportToMermaid();\nSystem.out.println(mermaid);\n</code></pre></p> </li> <li> <p>\u6d4b\u8bd5:    <pre><code>@SpringBootTest\nclass MyAgentTest {\n    @Test\n    void testAgent() {\n        var result = agent.execute(testInput);\n        assertNotNull(result);\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"explanations/workflow-comparison/#4-spring","title":"4. Spring \u751f\u6001\u5de5\u4f5c\u6d41\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"explanations/workflow-comparison/#41-spring-boot","title":"4.1 Spring Boot \u9879\u76ee\u6807\u51c6\u5de5\u4f5c\u6d41","text":"<p>\u53c2\u8003\u81ea: Spring \u5b98\u65b9\u548c Alibaba \u6700\u4f73\u5b9e\u8df5</p>"},{"location":"explanations/workflow-comparison/#1_1","title":"1. \u9879\u76ee\u7ed3\u6784\u89c4\u8303","text":"<pre><code>src/main/java/com/example/project/\n\u251c\u2500\u2500 config/          # \u914d\u7f6e\u7c7b\n\u251c\u2500\u2500 controller/      # REST API\n\u251c\u2500\u2500 service/         # \u4e1a\u52a1\u903b\u8f91\n\u251c\u2500\u2500 repository/      # \u6570\u636e\u8bbf\u95ee\n\u251c\u2500\u2500 model/           # \u6570\u636e\u6a21\u578b\n\u251c\u2500\u2500 tool/            # Spring AI @Tool\n\u2514\u2500\u2500 agent/           # AI Agent\n</code></pre>"},{"location":"explanations/workflow-comparison/#2","title":"2. \u4ee3\u7801\u89c4\u8303","text":"<ul> <li>Lombok: \u51cf\u5c11\u6837\u677f\u4ee3\u7801</li> <li>Slf4j: \u7edf\u4e00\u65e5\u5fd7</li> <li>Javadoc: \u5b8c\u6574\u6587\u6863</li> <li>SpringBoot \u6ce8\u89e3: <code>@Service</code>, <code>@Component</code> \u7b49</li> </ul>"},{"location":"explanations/workflow-comparison/#3","title":"3. \u6d4b\u8bd5\u89c4\u8303","text":"<pre><code>// \u5355\u5143\u6d4b\u8bd5\n@SpringBootTest\nclass ServiceTest {\n    @Test\n    void testMethod() { }\n}\n\n// \u96c6\u6210\u6d4b\u8bd5\n@SpringBootTest(webEnvironment = RANDOM_PORT)\nclass IntegrationTest { }\n</code></pre>"},{"location":"explanations/workflow-comparison/#42-mcp","title":"4.2 MCP \u9879\u76ee\u7279\u5b9a\u5de5\u4f5c\u6d41","text":"<p>\u57fa\u4e8e\u60a8\u7684\u9879\u76ee\u7ed3\u6784:</p>"},{"location":"explanations/workflow-comparison/#mcp-server","title":"\u6dfb\u52a0\u65b0 MCP Server \u5de5\u4f5c\u6d41","text":"<ol> <li> <p>\u590d\u5236\u6a21\u677f <pre><code>cp -r mcp-server-v6 mcp-server-new\n</code></pre></p> </li> <li> <p>\u4fee\u6539\u914d\u7f6e</p> </li> <li>\u66f4\u65b0 <code>pom.xml</code></li> <li>\u66f4\u65b0 <code>application.yml</code></li> <li> <p>\u9009\u62e9\u65b0\u7aef\u53e3</p> </li> <li> <p>\u5b9e\u73b0 Tool <pre><code>@Component\npublic class NewTool {\n    @Tool(description = \"\u529f\u80fd\u63cf\u8ff0\")\n    public Result method(String param) { }\n}\n</code></pre></p> </li> <li> <p>\u6d4b\u8bd5 <pre><code>mvn spring-boot:run\ncurl http://localhost:PORT/mcp/tools/list\n</code></pre></p> </li> <li> <p>\u96c6\u6210\u5230Router</p> </li> <li>\u66f4\u65b0\u7236 <code>pom.xml</code></li> <li>\u914d\u7f6e Nacos \u6ce8\u518c</li> </ol>"},{"location":"explanations/workflow-comparison/#5","title":"5. \u63a8\u8350\u65b9\u6848","text":""},{"location":"explanations/workflow-comparison/#51-mcp-router-sse-parent","title":"5.1 \u9488\u5bf9\u60a8\u7684\u9879\u76ee <code>mcp-router-sse-parent</code>","text":""},{"location":"explanations/workflow-comparison/#_2","title":"\ud83e\udd47 \u63a8\u8350\u7ec4\u5408\u65b9\u6848","text":"\u73af\u8282 \u63a8\u8350\u65b9\u6848 \u7406\u7531 \u5206\u652f\u7b56\u7565 GitHub Flow \u2192 Trunk-Based \u73b0\u5728\u7b80\u5355\uff0c\u672a\u6765\u5347\u7ea7 CI/CD \u65b9\u6848 B (\u591a\u6a21\u5757) \u5339\u914d\u9879\u76ee\u7ed3\u6784 Agent\u5f00\u53d1 Spring AI Alibaba Graph \u5df2\u96c6\u6210\uff0c\u539f\u751f\u652f\u6301 \u5de5\u4f5c\u6d41\u7ba1\u7406 \u81ea\u5b9a\u4e49 Workflows \u5df2\u6709 <code>.agent/workflows/</code>"},{"location":"explanations/workflow-comparison/#52","title":"5.2 \u5b9e\u65bd\u8def\u7ebf\u56fe","text":""},{"location":"explanations/workflow-comparison/#1_2","title":"\u9636\u6bb5 1: \u7acb\u5373\u5b9e\u65bd\uff08\u672c\u5468\uff09","text":"<ol> <li>\u8bbe\u7f6e GitHub Flow</li> <li>\u6587\u6863\u5316\u5206\u652f\u547d\u540d\u89c4\u8303</li> <li> <p>\u8bbe\u7f6e\u5206\u652f\u4fdd\u62a4\u89c4\u5219</p> </li> <li> <p>\u57fa\u7840 CI/CD</p> </li> <li>\u521b\u5efa <code>.github/workflows/maven.yml</code></li> <li> <p>\u914d\u7f6e\u81ea\u52a8\u6d4b\u8bd5</p> </li> <li> <p>\u5b8c\u5584\u73b0\u6709\u5de5\u4f5c\u6d41</p> </li> <li>\u4f18\u5316 <code>.agent/workflows/review.md</code></li> <li>\u4f7f\u7528\u65b0\u521b\u5efa\u7684 <code>add-mcp-server.md</code></li> </ol>"},{"location":"explanations/workflow-comparison/#2_1","title":"\u9636\u6bb5 2: \u77ed\u671f\u4f18\u5316\uff08\u672c\u6708\uff09","text":"<ol> <li>\u591a\u6a21\u5757 CI/CD</li> <li>\u5b9e\u73b0\u53d8\u66f4\u68c0\u6d4b</li> <li> <p>\u5e76\u884c\u6784\u5efa</p> </li> <li> <p>\u6807\u51c6\u5316\u5f00\u53d1\u6d41\u7a0b</p> </li> <li>\u6587\u6863\u5316 MCP Server \u6dfb\u52a0\u6d41\u7a0b</li> <li> <p>\u6587\u6863\u5316 Agent \u5f00\u53d1\u6d41\u7a0b</p> </li> <li> <p>\u81ea\u52a8\u5316</p> </li> <li>PR \u6a21\u677f</li> <li>Issue \u6a21\u677f</li> <li>Commit \u89c4\u8303</li> </ol>"},{"location":"explanations/workflow-comparison/#3_1","title":"\u9636\u6bb5 3: \u957f\u671f\u6f14\u8fdb\uff08\u672c\u5b63\u5ea6\uff09","text":"<ol> <li>\u5347\u7ea7\u5230 Trunk-Based</li> <li>Feature Flags</li> <li> <p>\u66f4\u9891\u7e41\u7684\u96c6\u6210</p> </li> <li> <p>\u4f01\u4e1a\u7ea7 CI/CD</p> </li> <li>\u591a\u73af\u5883\u90e8\u7f72</li> <li>\u5b89\u5168\u626b\u63cf</li> <li>\u6027\u80fd\u6d4b\u8bd5</li> </ol>"},{"location":"explanations/workflow-comparison/#a","title":"\u9644\u5f55 A: \u5feb\u901f\u51b3\u7b56\u6811","text":"<pre><code>\u60a8\u7684\u56e2\u961f\u89c4\u6a21\uff1f\n\u251c\u2500 1-3\u4eba \u2192 GitHub Flow + \u57fa\u7840CI/CD\n\u251c\u2500 4-10\u4eba \u2192 GitHub Flow + \u591a\u6a21\u5757CI/CD\n\u2514\u2500 10+\u4eba \u2192 Trunk-Based + \u4f01\u4e1a\u7ea7CI/CD\n\n\u60a8\u7684\u53d1\u5e03\u9891\u7387\uff1f\n\u251c\u2500 \u6bcf\u5929\u591a\u6b21 \u2192 Trunk-Based\n\u251c\u2500 \u6bcf\u5468/\u6bcf\u6708 \u2192 GitHub Flow\n\u2514\u2500 \u5b63\u5ea6\u53d1\u5e03 \u2192 Git Flow (\u4e0d\u63a8\u8350)\n\n\u60a8\u7684CI/CD\u6210\u719f\u5ea6\uff1f\n\u251c\u2500 \u521a\u5f00\u59cb \u2192 \u57fa\u7840CI/CD\n\u251c\u2500 \u6709\u7ecf\u9a8c \u2192 \u591a\u6a21\u5757CI/CD\n\u2514\u2500 \u975e\u5e38\u6210\u719f \u2192 \u4f01\u4e1a\u7ea7CI/CD\n\n\u60a8\u7684Agent\u5f00\u53d1\u9700\u6c42\uff1f\n\u251c\u2500 \u7b80\u5355\u4efb\u52a1 \u2192 ReactAgent\n\u251c\u2500 \u590d\u6742\u6d41\u7a0b \u2192 StateGraph\n\u2514\u2500 \u591aAgent\u534f\u4f5c \u2192 Supervisor Pattern\n</code></pre>"},{"location":"explanations/workflow-comparison/#b","title":"\u9644\u5f55 B: \u53c2\u8003\u8d44\u6e90","text":""},{"location":"explanations/workflow-comparison/#github_1","title":"GitHub \u5b98\u65b9","text":"<ul> <li>GitHub Flow Guide</li> <li>GitHub Actions \u6587\u6863</li> </ul>"},{"location":"explanations/workflow-comparison/#spring","title":"Spring \u751f\u6001","text":"<ul> <li>Spring Boot \u6700\u4f73\u5b9e\u8df5</li> <li>Spring AI Alibaba \u6587\u6863</li> <li>Spring AI Alibaba GitHub</li> </ul>"},{"location":"explanations/workflow-comparison/#agent","title":"Agent \u5f00\u53d1","text":"<ul> <li>LangGraph \u6587\u6863</li> <li>Spring AI Graph \u6587\u6863</li> </ul> <p>\u6587\u6863\u7248\u672c: 1.0 \u6700\u540e\u66f4\u65b0: 2026-01-28 \u9002\u7528\u9879\u76ee: mcp-router-sse-parent \u7ef4\u62a4\u8005: AI Assistant + \u60a8\u7684\u56e2\u961f</p>"},{"location":"features/","title":"Features Index","text":"<p>\u9879\u76ee\u529f\u80fd\u7d22\u5f15 - \u5feb\u901f\u67e5\u627e\u6240\u6709\u529f\u80fd\u7684\u6587\u6863\u3001\u4ee3\u7801\u3001\u6d4b\u8bd5</p>"},{"location":"features/#_1","title":"\ud83d\udcda \u529f\u80fd\u5217\u8868","text":""},{"location":"features/#streamable-session-management-2026-01-28","title":"\ud83d\udd04 Streamable Session Management (2026-01-28)","text":"<p>\u72b6\u6001: \u2705 \u5df2\u5b8c\u6210 \u7248\u672c: 1.0 \u5206\u652f: bugfix/fix-streamable-session-management</p> <p>\u5feb\u901f\u94fe\u63a5: - \ud83d\udcd6 \u529f\u80fd\u6587\u6863 - \ud83d\udcbb \u4ee3\u7801\u4f4d\u7f6e - \ud83e\uddea \u6d4b\u8bd5\u811a\u672c - \ud83d\udcca \u6d4b\u8bd5\u62a5\u544a</p> <p>\u6838\u5fc3\u4fee\u6539: - \u5728 NDJSON \u6d41\u5f00\u5934\u6dfb\u52a0 session \u6d88\u606f - \u589e\u5f3a sessionId \u89e3\u6790\u548c\u65e5\u5fd7 - \u53cc\u91cd\u4f20\u9012\u673a\u5236\uff08\u54cd\u5e94\u5934 + \u6d88\u606f\u4f53\uff09</p> <p>\u5173\u952e\u5b57: <code>streamable</code>, <code>session</code>, <code>ndjson</code>, <code>mcp-session-id</code></p>"},{"location":"features/#_2","title":"\ud83d\udccb \u5982\u4f55\u4f7f\u7528\u672c\u7d22\u5f15","text":""},{"location":"features/#_3","title":"\u67e5\u627e\u529f\u80fd","text":"<ol> <li>\u6309\u65e5\u671f\u67e5\u627e - \u6700\u8fd1\u7684\u529f\u80fd\u5728\u6700\u4e0a\u9762</li> <li>\u6309\u5173\u952e\u5b57\u641c\u7d22 - \u4f7f\u7528 Ctrl+F \u641c\u7d22\u5173\u952e\u8bcd</li> <li>\u6309\u72b6\u6001\u7b5b\u9009 - \u2705 \u5df2\u5b8c\u6210 / \ud83d\udea7 \u5f00\u53d1\u4e2d / \ud83d\udcdd \u8ba1\u5212\u4e2d</li> </ol>"},{"location":"features/#_4","title":"\u6dfb\u52a0\u65b0\u529f\u80fd","text":"<p>\u521b\u5efa\u65b0\u529f\u80fd\u65f6\uff0c\u8bf7\u6309\u4ee5\u4e0b\u6a21\u677f\u6dfb\u52a0:</p> <pre><code>### \ud83c\udd95 Feature Name (YYYY-MM-DD)\n\n**\u72b6\u6001**: \ud83d\udea7 \u5f00\u53d1\u4e2d  \n**\u7248\u672c**: 0.1  \n**\u5206\u652f**: feature/xxx\n\n**\u5feb\u901f\u94fe\u63a5**:\n- \ud83d\udcd6 [\u529f\u80fd\u6587\u6863](feature-name.md)\n- \ud83d\udcbb [\u4ee3\u7801\u4f4d\u7f6e](../../path/to/code)\n- \ud83e\uddea [\u6d4b\u8bd5\u811a\u672c](../../test_feature.sh)\n- \ud83d\udcca [\u6d4b\u8bd5\u62a5\u544a](../../TEST_REPORT.md)\n\n**\u6838\u5fc3\u4fee\u6539**:\n- \u7b80\u8981\u63cf\u8ff0\u4e3b\u8981\u4fee\u6539\n\n**\u5173\u952e\u5b57**: `keyword1`, `keyword2`\n</code></pre>"},{"location":"features/#_5","title":"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90","text":"<ul> <li>\u5982\u4f55\u6dfb\u52a0\u65b0\u529f\u80fd</li> <li>\u4ee3\u7801\u5ba1\u67e5\u6d41\u7a0b</li> <li>\u6d4b\u8bd5\u6307\u5357</li> <li>\u6587\u6863\u89c4\u8303</li> </ul> <p>\u7ef4\u62a4: \u6bcf\u6b21\u6dfb\u52a0\u65b0\u529f\u80fd\u65f6\u66f4\u65b0\u6b64\u7d22\u5f15 \u6700\u540e\u66f4\u65b0: 2026-01-28</p>"},{"location":"features/streamable-session-management/","title":"Streamable Session Management - Feature Index","text":"<p>\u529f\u80fd: Streamable \u534f\u8bae Session \u4f1a\u8bdd\u7ba1\u7406\u589e\u5f3a \u5206\u652f: bugfix/fix-streamable-session-management \u72b6\u6001: \u2705 \u5df2\u5b8c\u6210\u5e76\u9a8c\u8bc1 \u65e5\u671f: 2026-01-28</p>"},{"location":"features/streamable-session-management/#_1","title":"\ud83d\udccb \u5feb\u901f\u5bfc\u822a","text":""},{"location":"features/streamable-session-management/#1","title":"1. \u4ee3\u7801\u4fee\u6539","text":"<ul> <li>\u4e3b\u8981\u6587\u4ef6: <code>mcp-router-v3/src/main/java/com/pajk/mcpbridge/core/config/McpRouterServerConfig.java</code></li> <li>\u65b9\u6cd5: <code>handleStreamable()</code> - \u884c\u53f7 ~329-362</li> <li>\u65b9\u6cd5: <code>buildSessionIdMessage()</code> - \u884c\u53f7 ~348-360</li> <li>\u65b9\u6cd5: <code>resolveSessionId()</code> - \u884c\u53f7 ~871-903</li> <li>\u65b9\u6cd5: <code>buildStreamableResponse()</code> - \u884c\u53f7 ~583-595</li> </ul>"},{"location":"features/streamable-session-management/#2","title":"2. \u6d4b\u8bd5\u811a\u672c","text":"<ul> <li>\u5b8c\u6574\u6d4b\u8bd5: <code>test_streamable_comprehensive.sh</code></li> <li>20+ \u6d4b\u8bd5\u7528\u4f8b</li> <li>\u8986\u76d6\u6240\u6709\u5173\u952e\u573a\u666f</li> <li> <p>\u81ea\u52a8\u5316\u9a8c\u8bc1</p> </li> <li> <p>\u5feb\u901f\u6d4b\u8bd5: <code>test_streamable_session.sh</code></p> </li> <li>\u57fa\u672c\u529f\u80fd\u9a8c\u8bc1</li> <li>\u9002\u5408\u5feb\u901f\u56de\u5f52\u6d4b\u8bd5</li> </ul>"},{"location":"features/streamable-session-management/#3","title":"3. \u6587\u6863\u7d22\u5f15","text":"<ul> <li>\u95ee\u9898\u5206\u6790: <code>STREAMABLE_SESSION_FIX.md</code></li> <li>\u4fee\u590d\u603b\u7ed3: <code>BUGFIX_SUMMARY.md</code></li> <li>\u6d4b\u8bd5\u62a5\u544a: <code>TEST_VERIFICATION_REPORT.md</code></li> <li>PR\u6a21\u677f: <code>PULL_REQUEST_DRAFT.md</code></li> </ul>"},{"location":"features/streamable-session-management/#4-git","title":"4. Git \u63d0\u4ea4\u5386\u53f2","text":"<pre><code># \u67e5\u770b\u6240\u6709\u76f8\u5173\u63d0\u4ea4\ngit log --oneline --grep=\"streamable\\|session\" bugfix/fix-streamable-session-management\n\n# \u4e3b\u8981\u63d0\u4ea4\n# 415e228 - docs(test): add comprehensive test verification report\n# c8ea35c - test(streamable): add comprehensive test suite with 20+ test cases\n# 8f58530 - test(streamable): add session management verification script\n# 08ecd83 - fix(streamable): enhance session management for streamable protocol\n</code></pre>"},{"location":"features/streamable-session-management/#_2","title":"\ud83c\udfaf \u6838\u5fc3\u529f\u80fd","text":""},{"location":"features/streamable-session-management/#_3","title":"\u95ee\u9898\u63cf\u8ff0","text":"<p>\u67d0\u4e9b Streamable \u5ba2\u6237\u7aef\uff08\u5982 MCP Inspector\uff09\u672a\u6b63\u786e\u5904\u7406 <code>Mcp-Session-Id</code> \u54cd\u5e94\u5934\uff0c\u5bfc\u81f4\u65e0\u6cd5\u83b7\u53d6 sessionId\u3002</p>"},{"location":"features/streamable-session-management/#_4","title":"\u4fee\u590d\u65b9\u6848","text":"<ol> <li>\u53cc\u91cd\u4f20\u9012\u673a\u5236: </li> <li>\u54cd\u5e94\u5934: <code>Mcp-Session-Id</code></li> <li> <p>\u521d\u59cb\u6d88\u606f: NDJSON \u683c\u5f0f\u7684 session \u4fe1\u606f</p> </li> <li> <p>\u589e\u5f3a\u65e5\u5fd7:</p> </li> <li>\u8bb0\u5f55 sessionId \u89e3\u6790\u6765\u6e90</li> <li>\u63d0\u4f9b\u6e05\u6670\u7684\u9519\u8bef\u63d0\u793a</li> </ol>"},{"location":"features/streamable-session-management/#_5","title":"\u4fee\u6539\u5185\u5bb9","text":""},{"location":"features/streamable-session-management/#_6","title":"\u65b0\u589e\u65b9\u6cd5","text":"<pre><code>/**\n * \u6784\u5efa Streamable \u534f\u8bae\u7684 sessionId \u521d\u59cb\u6d88\u606f\n * \u683c\u5f0f\u7b26\u5408 NDJSON \u89c4\u8303\n */\nprivate String buildSessionIdMessage(String sessionId, String messageEndpoint) {\n    Map&lt;String, Object&gt; payload = new LinkedHashMap&lt;&gt;();\n    payload.put(\"type\", \"session\");\n    payload.put(\"sessionId\", sessionId);\n    payload.put(\"messageEndpoint\", messageEndpoint);\n    payload.put(\"transport\", \"streamable\");\n    return objectMapper.writeValueAsString(payload) + \"\\n\";\n}\n</code></pre>"},{"location":"features/streamable-session-management/#_7","title":"\u4fee\u6539\u6d41\u7a0b","text":"<pre><code>// \u5728 NDJSON \u6d41\u5f00\u5934\u6dfb\u52a0 session \u6d88\u606f\nFlux&lt;String&gt; streamFlux = Flux.concat(\n    Flux.just(buildSessionIdMessage(sessionId, messageEndpoint)),\n    buildEventFlux(context).map(this::toStreamableJson)\n);\n</code></pre>"},{"location":"features/streamable-session-management/#_8","title":"\u2705 \u9a8c\u8bc1\u6e05\u5355","text":""},{"location":"features/streamable-session-management/#_9","title":"\u529f\u80fd\u9a8c\u8bc1","text":"<ul> <li> Session \u521d\u59cb\u6d88\u606f\u5305\u542b\u6240\u6709\u5fc5\u9700\u5b57\u6bb5</li> <li> \u54cd\u5e94\u5934\u6b63\u786e\u8bbe\u7f6e Mcp-Session-Id</li> <li> \u652f\u6301\u591a\u79cd Accept \u5934</li> <li> NDJSON \u683c\u5f0f\u6b63\u786e</li> <li> \u7aef\u5230\u7aef\u5de5\u4f5c\u6d41\u6b63\u5e38</li> <li> \u5e76\u53d1\u8fde\u63a5\u7a33\u5b9a</li> <li> \u5411\u540e\u517c\u5bb9</li> </ul>"},{"location":"features/streamable-session-management/#_10","title":"\u6d4b\u8bd5\u8986\u76d6","text":"<ul> <li> \u5355\u5143\u6d4b\u8bd5: \u901a\u8fc7\u73b0\u6709\u6d4b\u8bd5</li> <li> \u96c6\u6210\u6d4b\u8bd5: \u5b8c\u6574\u6d4b\u8bd5\u5957\u4ef6</li> <li> \u7aef\u5230\u7aef\u6d4b\u8bd5: \u2705 100% \u901a\u8fc7</li> <li> \u5e76\u53d1\u6d4b\u8bd5: \u2705 10\u4e2a\u8fde\u63a5\u7a33\u5b9a</li> <li> \u517c\u5bb9\u6027\u6d4b\u8bd5: \u2705 SSE \u672a\u53d7\u5f71\u54cd</li> </ul>"},{"location":"features/streamable-session-management/#_11","title":"\ud83d\udd04 \u5982\u4f55\u8fd0\u884c\u6d4b\u8bd5","text":""},{"location":"features/streamable-session-management/#_12","title":"\u5feb\u901f\u9a8c\u8bc1","text":"<pre><code># \u786e\u4fdd\u670d\u52a1\u8fd0\u884c\ncd mcp-router-v3 &amp;&amp; mvn spring-boot:run\n\n# \u8fd0\u884c\u5feb\u901f\u6d4b\u8bd5\n./test_streamable_session.sh\n</code></pre>"},{"location":"features/streamable-session-management/#_13","title":"\u5b8c\u6574\u6d4b\u8bd5","text":"<pre><code># \u8fd0\u884c\u5b8c\u6574\u6d4b\u8bd5\u5957\u4ef6\n./test_streamable_comprehensive.sh\n\n# \u67e5\u770b\u6d4b\u8bd5\u62a5\u544a\ncat TEST_VERIFICATION_REPORT.md\n</code></pre>"},{"location":"features/streamable-session-management/#cicd","title":"CI/CD \u96c6\u6210 (\u63a8\u8350)","text":"<pre><code># \u6dfb\u52a0\u5230 .github/workflows/test.yml\n- name: Test Streamable Session Management\n  run: |\n    ./test_streamable_comprehensive.sh\n</code></pre>"},{"location":"features/streamable-session-management/#_14","title":"\ud83d\udee1\ufe0f \u9632\u6b62\u529f\u80fd\u9000\u5316","text":""},{"location":"features/streamable-session-management/#1_1","title":"1. \u81ea\u52a8\u5316\u6d4b\u8bd5","text":"<ul> <li>\u4f4d\u7f6e: <code>test_streamable_comprehensive.sh</code></li> <li>\u89e6\u53d1: \u6bcf\u6b21 PR \u81ea\u52a8\u8fd0\u884c</li> <li>\u8986\u76d6: 20+ \u6d4b\u8bd5\u7528\u4f8b</li> </ul>"},{"location":"features/streamable-session-management/#2_1","title":"2. \u4ee3\u7801\u5ba1\u67e5\u68c0\u67e5\u70b9","text":"<p>\u4fee\u6539\u4ee5\u4e0b\u6587\u4ef6\u65f6\u9700\u8981\u8fd0\u884c\u6d4b\u8bd5: - <code>McpRouterServerConfig.java</code> (handleStreamable, resolveSessionId) - <code>McpSessionService.java</code> (session \u7ba1\u7406\u76f8\u5173) - <code>TransportType.java</code> (\u6dfb\u52a0\u65b0\u4f20\u8f93\u7c7b\u578b)</p>"},{"location":"features/streamable-session-management/#3_1","title":"3. \u76d1\u63a7\u6307\u6807","text":"<p>\u5efa\u8bae\u6dfb\u52a0\u4ee5\u4e0b metrics: - <code>mcp.session.created.total</code> - Session \u521b\u5efa\u603b\u6570 - <code>mcp.session.resolved.source</code> - SessionId \u89e3\u6790\u6765\u6e90\u7edf\u8ba1 - <code>mcp.streamable.connections.total</code> - Streamable \u8fde\u63a5\u6570</p>"},{"location":"features/streamable-session-management/#4","title":"4. \u65e5\u5fd7\u76d1\u63a7","text":"<p>\u5173\u952e\u65e5\u5fd7\u6a21\u5f0f: - <code>\u2705 Resolved sessionId from header</code> - \u6b63\u5e38 - <code>\u26a0\ufe0f No sessionId found</code> - \u9700\u8981\u5173\u6ce8 - <code>\ud83d\udce1 Streamable request</code> - \u8fde\u63a5\u5efa\u7acb</p>"},{"location":"features/streamable-session-management/#_15","title":"\ud83d\udcca \u6027\u80fd\u5f71\u54cd","text":""},{"location":"features/streamable-session-management/#_16","title":"\u6d4b\u91cf\u7ed3\u679c","text":"<ul> <li>TTFB\u5f71\u54cd: &lt; 5ms (\u6dfb\u52a0\u521d\u59cb session \u6d88\u606f)</li> <li>\u5185\u5b58\u5f71\u54cd: \u53ef\u5ffd\u7565 (~100 bytes/session)</li> <li>\u5e76\u53d1\u6027\u80fd: \u65e0\u5f71\u54cd (\u6d4b\u8bd510\u4e2a\u5e76\u53d1\u8fde\u63a5)</li> </ul>"},{"location":"features/streamable-session-management/#_17","title":"\u6027\u80fd\u6d4b\u8bd5","text":"<pre><code># \u6d4b\u8bd5\u9996\u5b57\u8282\u65f6\u95f4\ntime curl -N -H \"Accept: application/x-ndjson\" \\\n  \"http://localhost:8052/mcp/mcp-server-v6\" | head -n 1\n</code></pre>"},{"location":"features/streamable-session-management/#_18","title":"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90","text":""},{"location":"features/streamable-session-management/#_19","title":"\u5185\u90e8\u6587\u6863","text":"<ul> <li>\u5de5\u4f5c\u6d41\u5bf9\u6bd4\u5206\u6790</li> <li>\u6dfb\u52a0 MCP Server \u6307\u5357</li> <li>\u4ee3\u7801\u5ba1\u67e5\u5de5\u4f5c\u6d41</li> </ul>"},{"location":"features/streamable-session-management/#_20","title":"\u5916\u90e8\u53c2\u8003","text":"<ul> <li>MCP Specification</li> <li>Streamable Protocol</li> <li>NDJSON Format</li> </ul>"},{"location":"features/streamable-session-management/#issuepr","title":"\u76f8\u5173 Issue/PR","text":"<ul> <li>Issue: #TBD - Streamable \u5ba2\u6237\u7aef sessionId \u4e22\u5931</li> <li>PR: #TBD - \u4fee\u590d Streamable session \u7ba1\u7406</li> </ul>"},{"location":"features/streamable-session-management/#_21","title":"\ud83d\ude80 \u540e\u7eed\u6539\u8fdb\u5efa\u8bae","text":""},{"location":"features/streamable-session-management/#1-2","title":"\u77ed\u671f (1-2\u5468)","text":"<ul> <li> \u96c6\u6210\u6d4b\u8bd5\u5230 CI/CD</li> <li> \u6dfb\u52a0 session \u7ba1\u7406 metrics</li> <li> \u4f18\u5316\u6d4b\u8bd5\u811a\u672c\uff08\u4fee\u590d\u5df2\u77e5\u95ee\u9898\uff09</li> </ul>"},{"location":"features/streamable-session-management/#1_2","title":"\u4e2d\u671f (1\u4e2a\u6708)","text":"<ul> <li> \u6dfb\u52a0 session \u6301\u4e45\u5316\u53ef\u89c6\u5316</li> <li> \u5b9e\u73b0 session \u7ba1\u7406 API</li> <li> \u6dfb\u52a0\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5</li> </ul>"},{"location":"features/streamable-session-management/#3_2","title":"\u957f\u671f (3\u4e2a\u6708)","text":"<ul> <li> \u8003\u8651\u652f\u6301 session \u8fc1\u79fb</li> <li> \u5b9e\u73b0\u5206\u5e03\u5f0f session \u7ba1\u7406</li> <li> \u6dfb\u52a0 session \u5206\u6790\u5de5\u5177</li> </ul>"},{"location":"features/streamable-session-management/#_22","title":"\ud83d\udcdd \u7ef4\u62a4\u6307\u5357","text":""},{"location":"features/streamable-session-management/#_23","title":"\u4fee\u6539\u6b64\u529f\u80fd\u65f6","text":"<ol> <li>\u5148\u8fd0\u884c\u6d4b\u8bd5: <code>./test_streamable_comprehensive.sh</code></li> <li>\u67e5\u770b\u6587\u6863: \u9605\u8bfb <code>STREAMABLE_SESSION_FIX.md</code></li> <li>\u66f4\u65b0\u6d4b\u8bd5: \u5982\u679c\u4fee\u6539\u884c\u4e3a\uff0c\u66f4\u65b0\u6d4b\u8bd5\u811a\u672c</li> <li>\u66f4\u65b0\u6587\u6863: \u540c\u6b65\u4fee\u6539\u76f8\u5173\u6587\u6863</li> <li>\u9a8c\u8bc1\u5411\u540e\u517c\u5bb9: \u786e\u4fdd\u4e0d\u7834\u574f\u73b0\u6709\u5ba2\u6237\u7aef</li> </ol>"},{"location":"features/streamable-session-management/#_24","title":"\u6dfb\u52a0\u65b0\u529f\u80fd\u65f6","text":"<ol> <li>\u53c2\u8003\u672c\u529f\u80fd\u7684\u7ec4\u7ec7\u7ed3\u6784</li> <li>\u521b\u5efa\u7c7b\u4f3c\u7684\u7d22\u5f15\u6587\u6863</li> <li>\u6dfb\u52a0\u81ea\u52a8\u5316\u6d4b\u8bd5</li> <li>\u66f4\u65b0\u603b\u7d22\u5f15</li> </ol>"},{"location":"features/streamable-session-management/#_25","title":"\ud83e\udd1d \u8d21\u732e\u8005","text":"<ul> <li>\u5f00\u53d1: AI Assistant</li> <li>\u5ba1\u67e5: (\u5f85\u6307\u5b9a)</li> <li>\u6d4b\u8bd5: AI Assistant</li> </ul>"},{"location":"features/streamable-session-management/#_26","title":"\ud83d\udcc5 \u7248\u672c\u5386\u53f2","text":"\u7248\u672c \u65e5\u671f \u4fee\u6539\u5185\u5bb9 1.0 2026-01-28 \u521d\u59cb\u5b9e\u73b0\u548c\u6d4b\u8bd5 <p>\u6700\u540e\u66f4\u65b0: 2026-01-28 \u7ef4\u62a4\u8005: \u5f00\u53d1\u56e2\u961f \u8054\u7cfb\u65b9\u5f0f: \u901a\u8fc7\u9879\u76ee Issue \u8ffd\u8e2a</p>"},{"location":"how-to-guides/","title":"\u64cd\u4f5c\u6307\u5357","text":"<p>\u8fd9\u91cc\u63d0\u4f9b\u5b8c\u6210\u5177\u4f53\u4efb\u52a1\u7684\u6b65\u9aa4\u6307\u5357\u3002</p>"},{"location":"how-to-guides/#_2","title":"\u53ef\u7528\u6307\u5357","text":"<ul> <li>\u6dfb\u52a0 MCP Server</li> <li>\u6dfb\u52a0 AI Agent</li> <li>\u96c6\u6210 Gemini</li> </ul>"},{"location":"how-to-guides/add-mcp-server/","title":"\u5982\u4f55\u6dfb\u52a0 MCP Server","text":"<p>\u5b8c\u6574\u6307\u5357\uff1a\u521b\u5efa\u5e76\u6ce8\u518c\u65b0\u7684 MCP Server</p>"},{"location":"how-to-guides/add-mcp-server/#_1","title":"\ud83d\udccb \u524d\u7f6e\u6761\u4ef6","text":"<ul> <li> Java 17+</li> <li> Maven 3.6+</li> <li> \u4e86\u89e3 Spring Boot \u57fa\u7840</li> <li> Nacos Server \u8fd0\u884c\u4e2d</li> </ul>"},{"location":"how-to-guides/add-mcp-server/#_2","title":"\ud83c\udfaf \u76ee\u6807","text":"<p>\u672c\u6307\u5357\u5c06\u5e2e\u52a9\u60a8: 1. \u521b\u5efa\u65b0\u7684 MCP Server \u6a21\u5757 2. \u5b9a\u4e49\u5de5\u5177(Tools) 3. \u6ce8\u518c\u5230 Nacos 4. \u6d4b\u8bd5\u9a8c\u8bc1</p> <p>\u9884\u8ba1\u8017\u65f6: 20-30 \u5206\u949f</p>"},{"location":"how-to-guides/add-mcp-server/#1","title":"\u6b65\u9aa4 1: \u521b\u5efa\u65b0\u6a21\u5757","text":""},{"location":"how-to-guides/add-mcp-server/#11-maven","title":"1.1 \u521b\u5efa Maven \u6a21\u5757","text":"<pre><code>cd mcp-router-sse-parent\nmkdir my-mcp-server\ncd my-mcp-server\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#12-pomxml","title":"1.2 \u521b\u5efa pom.xml","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.5&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;my-mcp-server&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;spring-ai.version&gt;1.0.0&lt;/spring-ai.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- Spring Boot WebFlux --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring AI --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-ai-starter-mcp-server-webflux&lt;/artifactId&gt;\n            &lt;version&gt;${spring-ai.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Nacos Discovery --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-discovery&lt;/artifactId&gt;\n            &lt;version&gt;2022.0.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Lombok (optional) --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#2-tools","title":"\u6b65\u9aa4 2: \u5b9a\u4e49\u5de5\u5177(Tools)","text":""},{"location":"how-to-guides/add-mcp-server/#21-tool-service","title":"2.1 \u521b\u5efa Tool Service","text":"<p>\u521b\u5efa <code>src/main/java/com/example/tools/MyToolService.java</code>:</p> <pre><code>package com.example.tools;\n\nimport org.springframework.ai.tool.Tool;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class MyToolService {\n\n    /**\n     * \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\n     */\n    @Tool(description = \"Get current timestamp in milliseconds\")\n    public long getCurrentTime() {\n        return System.currentTimeMillis();\n    }\n\n    /**\n     * \u8ba1\u7b97\u4e24\u4e2a\u6570\u7684\u548c\n     */\n    @Tool(description = \"Calculate sum of two numbers\")\n    public int add(\n        @Tool.Param(description = \"First number\") int a,\n        @Tool.Param(description = \"Second number\") int b\n    ) {\n        return a + b;\n    }\n\n    /**\n     * \u5b57\u7b26\u4e32\u53cd\u8f6c\n     */\n    @Tool(description = \"Reverse a string\")\n    public String reverse(\n        @Tool.Param(description = \"Input string\") String input\n    ) {\n        return new StringBuilder(input).reverse().toString();\n    }\n}\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#22-tool","title":"2.2 \u590d\u6742 Tool \u793a\u4f8b","text":"<pre><code>@Service\npublic class UserToolService {\n\n    @Autowired\n    private UserRepository userRepository;\n\n    /**\n     * \u67e5\u627e\u7528\u6237\n     */\n    @Tool(description = \"Find user by ID\")\n    public User findUserById(\n        @Tool.Param(description = \"User ID\") Long userId\n    ) {\n        return userRepository.findById(userId)\n            .orElseThrow(() -&gt; new UserNotFoundException(userId));\n    }\n\n    /**\n     * \u641c\u7d22\u7528\u6237\n     */\n    @Tool(description = \"Search users by name\")\n    public List&lt;User&gt; searchUsers(\n        @Tool.Param(description = \"Search keyword\") String keyword\n    ) {\n        return userRepository.findByNameContaining(keyword);\n    }\n\n    /**\n     * \u521b\u5efa\u7528\u6237\n     */\n    @Tool(description = \"Create a new user\")\n    public User createUser(\n        @Tool.Param(description = \"User data\") UserCreateRequest request\n    ) {\n        User user = new User();\n        user.setName(request.getName());\n        user.setEmail(request.getEmail());\n        return userRepository.save(user);\n    }\n}\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#3","title":"\u6b65\u9aa4 3: \u914d\u7f6e\u5e94\u7528","text":""},{"location":"how-to-guides/add-mcp-server/#31-applicationyml","title":"3.1 \u521b\u5efa application.yml","text":"<pre><code>server:\n  port: 8070  # \u9009\u62e9\u672a\u4f7f\u7528\u7684\u7aef\u53e3\n\nspring:\n  application:\n    name: my-mcp-server  # \u670d\u52a1\u540d\u79f0\n\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848\n        namespace: public\n        group: DEFAULT_GROUP\n        metadata:\n          # \u5143\u6570\u636e\uff0c\u5e2e\u52a9\u8def\u7531\u5668\u8bc6\u522b\n          version: 1.0.0\n          tools: getCurrentTime,add,reverse  # \u5de5\u5177\u5217\u8868\n          description: My Custom MCP Server\n\n# Spring AI MCP Server \u914d\u7f6e\nmcp:\n  server:\n    enabled: true\n    path: /mcp  # SSE endpoint\n\n# \u65e5\u5fd7\u914d\u7f6e\nlogging:\n  level:\n    com.example: DEBUG\n    org.springframework.ai: DEBUG\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#32","title":"3.2 \u521b\u5efa\u4e3b\u7c7b","text":"<pre><code>package com.example;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\n\n@SpringBootApplication\n@EnableDiscoveryClient  // \u542f\u7528\u670d\u52a1\u53d1\u73b0\npublic class MyMcpServerApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MyMcpServerApplication.class, args);\n    }\n}\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#4","title":"\u6b65\u9aa4 4: \u542f\u52a8\u548c\u6ce8\u518c","text":""},{"location":"how-to-guides/add-mcp-server/#41","title":"4.1 \u542f\u52a8\u670d\u52a1","text":"<pre><code># \u6784\u5efa\nmvn clean install\n\n# \u8fd0\u884c\nmvn spring-boot:run\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#42","title":"4.2 \u9a8c\u8bc1\u6ce8\u518c","text":"<pre><code># \u68c0\u67e5\u5065\u5eb7\u72b6\u6001\ncurl http://localhost:8070/actuator/health\n\n# \u68c0\u67e5 Nacos \u6ce8\u518c\ncurl http://localhost:8848/nacos/v1/ns/instance/list?serviceName=my-mcp-server\n\n# \u5e94\u8be5\u770b\u5230:\n# {\n#   \"hosts\": [{\n#     \"ip\": \"192.168.1.100\",\n#     \"port\": 8070,\n#     \"healthy\": true\n#   }]\n# }\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#43-mcp","title":"4.3 \u6d4b\u8bd5 MCP \u8fde\u63a5","text":"<pre><code># \u8fde\u63a5\u5230 SSE endpoint\ncurl -N http://localhost:8070/mcp\n</code></pre> <p>\u9884\u671f\u8f93\u51fa: <pre><code>event: initialize\ndata: {\"version\":\"1.0.0\"}\n\nevent: tools/list\ndata: {\"tools\":[{\"name\":\"getCurrentTime\",\"description\":\"...\"}]}\n</code></pre></p>"},{"location":"how-to-guides/add-mcp-server/#5","title":"\u6b65\u9aa4 5: \u96c6\u6210\u5230\u9879\u76ee","text":""},{"location":"how-to-guides/add-mcp-server/#51-pom","title":"5.1 \u6dfb\u52a0\u5230\u7236 POM","text":"<p>\u7f16\u8f91\u6839\u76ee\u5f55\u7684 <code>pom.xml</code>:</p> <pre><code>&lt;modules&gt;\n    &lt;module&gt;mcp-router-v3&lt;/module&gt;\n    &lt;module&gt;mcp-server-v6&lt;/module&gt;\n    &lt;module&gt;my-mcp-server&lt;/module&gt;  &lt;!-- \u65b0\u6dfb\u52a0 --&gt;\n&lt;/modules&gt;\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#52-mcp-client","title":"5.2 \u4ece MCP Client \u8c03\u7528","text":"<pre><code>// \u5728 MCP Client \u4e2d\u4f7f\u7528\n@RestController\npublic class MyController {\n\n    @Autowired\n    private ChatClient chatClient;\n\n    @PostMapping(\"/query\")\n    public String query(@RequestBody String question) {\n        return chatClient.prompt()\n            .user(question)\n            .call()\n            .content();\n    }\n}\n</code></pre> <p>\u6d4b\u8bd5\uff1a <pre><code>curl -X POST http://localhost:8080/query \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"query\": \"What is the current time?\"}'\n</code></pre></p>"},{"location":"how-to-guides/add-mcp-server/#_3","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"how-to-guides/add-mcp-server/#1_1","title":"1. \u5de5\u5177\u547d\u540d","text":"<pre><code>// \u2705 \u597d\u7684\u547d\u540d\n@Tool(description = \"Find user by email address\")\npublic User findUserByEmail(String email)\n\n// \u274c \u4e0d\u597d\u7684\u547d\u540d\n@Tool(description = \"get\")\npublic User get(String e)\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#2","title":"2. \u53c2\u6570\u63cf\u8ff0","text":"<pre><code>// \u2705 \u6e05\u6670\u7684\u63cf\u8ff0\n@Tool.Param(description = \"User email address in format: user@example.com\")\nString email\n\n// \u274c \u6a21\u7cca\u7684\u63cf\u8ff0  \n@Tool.Param(description = \"email\")\nString email\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#3_1","title":"3. \u9519\u8bef\u5904\u7406","text":"<pre><code>@Tool(description = \"Find user by ID\")\npublic User findUserById(Long userId) {\n    return userRepository.findById(userId)\n        .orElseThrow(() -&gt; \n            new ToolExecutionException(\"User not found: \" + userId)\n        );\n}\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#4_1","title":"4. \u8f93\u5165\u9a8c\u8bc1","text":"<pre><code>@Tool(description = \"Create user\")\npublic User createUser(UserCreateRequest request) {\n    // \u9a8c\u8bc1\u8f93\u5165\n    if (request.getEmail() == null || !request.getEmail().contains(\"@\")) {\n        throw new IllegalArgumentException(\"Invalid email address\");\n    }\n\n    // \u5904\u7406\u903b\u8f91\n    return userRepository.save(toEntity(request));\n}\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#_4","title":"\ud83d\udd0d \u8c03\u8bd5\u6280\u5de7","text":""},{"location":"how-to-guides/add-mcp-server/#1_2","title":"1. \u542f\u7528\u8be6\u7ec6\u65e5\u5fd7","text":"<pre><code>logging:\n  level:\n    org.springframework.ai.mcp: TRACE\n    com.example: DEBUG\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#2_1","title":"2. \u67e5\u770b\u5de5\u5177\u6ce8\u518c","text":"<pre><code># \u8bbf\u95ee actuator endpoints\ncurl http://localhost:8070/actuator/beans | jq '.[] | select(.type | contains(\"Tool\"))'\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#3-tool","title":"3. \u76d1\u63a7 Tool \u8c03\u7528","text":"<pre><code>@Aspect\n@Component\npublic class ToolCallAspect {\n\n    @Around(\"@annotation(org.springframework.ai.tool.Tool)\")\n    public Object logToolCall(ProceedingJoinPoint joinPoint) throws Throwable {\n        String toolName = joinPoint.getSignature().getName();\n        long start = System.currentTimeMillis();\n\n        try {\n            Object result = joinPoint.proceed();\n            long duration = System.currentTimeMillis() - start;\n            log.info(\"Tool {} executed in {}ms\", toolName, duration);\n            return result;\n        } catch (Exception e) {\n            log.error(\"Tool {} failed\", toolName, e);\n            throw e;\n        }\n    }\n}\n</code></pre>"},{"location":"how-to-guides/add-mcp-server/#_5","title":"\u2705 \u9a8c\u8bc1\u6e05\u5355","text":"<p>\u5b8c\u6210\u540e\u786e\u8ba4\uff1a</p> <ul> <li> \u670d\u52a1\u6210\u529f\u542f\u52a8\u5728\u6307\u5b9a\u7aef\u53e3</li> <li> \u5728 Nacos \u4e2d\u53ef\u4ee5\u770b\u5230\u670d\u52a1\u6ce8\u518c</li> <li> SSE endpoint \u53ef\u4ee5\u8fde\u63a5</li> <li> Tools \u5217\u8868\u6b63\u786e\u8fd4\u56de</li> <li> \u4ece MCP Client \u53ef\u4ee5\u8c03\u7528\u5de5\u5177</li> <li> \u65e5\u5fd7\u6b63\u5e38\u65e0\u62a5\u9519</li> <li> \u5065\u5eb7\u68c0\u67e5\u901a\u8fc7</li> </ul>"},{"location":"how-to-guides/add-mcp-server/#_6","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>Spring AI \u6587\u6863</li> <li>Nacos \u6587\u6863</li> <li>MCP \u534f\u8bae\u89c4\u8303</li> <li>API \u53c2\u8003</li> </ul>"},{"location":"how-to-guides/add-mcp-server/#_7","title":"\ud83c\udd98 \u9047\u5230\u95ee\u9898\uff1f","text":"<ul> <li>\u67e5\u770b\u6545\u969c\u6392\u9664</li> <li>\u521b\u5efa Issue</li> </ul> <p>\u606d\u559c\uff01\u60a8\u5df2\u6210\u529f\u521b\u5efa\u4e86\u7b2c\u4e00\u4e2a MCP Server\uff01 \ud83c\udf89</p>"},{"location":"how-to-guides/integrate-gemini/","title":"\u57fa\u4e8e Spring AI Alibaba \u7684 Google Gemini \u6574\u5408\u5b9e\u65bd\u6307\u5357","text":"<p>\u5229\u7528\u73b0\u6709\u7684 Spring AI Alibaba \u6846\u67b6\u6574\u5408 Google Gemini API</p> <p>\u521b\u5efa\u65f6\u95f4: 2026-01-28</p>"},{"location":"how-to-guides/integrate-gemini/#_1","title":"\ud83d\udccb \u76ee\u5f55","text":"<ol> <li>\u73b0\u72b6\u5206\u6790</li> <li>\u6574\u5408\u65b9\u6848</li> <li>\u5b9e\u65bd\u6b65\u9aa4</li> <li>\u914d\u7f6e\u793a\u4f8b</li> <li>\u4f7f\u7528\u793a\u4f8b</li> <li>\u6700\u4f73\u5b9e\u8df5</li> </ol>"},{"location":"how-to-guides/integrate-gemini/#_2","title":"\ud83d\udd0d \u73b0\u72b6\u5206\u6790","text":""},{"location":"how-to-guides/integrate-gemini/#_3","title":"\u5df2\u6709\u67b6\u6784","text":"<p>\u60a8\u7684\u9879\u76ee\u5df2\u7ecf\u5305\u542b\u4e86\u5b8c\u6574\u7684 Spring AI Alibaba \u6846\u67b6\uff0c\u5177\u5907\u4ee5\u4e0b\u80fd\u529b\uff1a</p>"},{"location":"how-to-guides/integrate-gemini/#_4","title":"\u2705 \u73b0\u6709\u7ec4\u4ef6","text":"\u7ec4\u4ef6 \u8def\u5f84 \u8bf4\u660e Spring AI Alibaba Core <code>spring-ai-alibaba/spring-ai-alibaba-core</code> \u6838\u5fc3 Agent \u63a5\u53e3\u548c\u5b9e\u73b0 Graph Framework <code>spring-ai-alibaba/spring-ai-alibaba-graph</code> \u57fa\u4e8e LangGraph \u7684\u5de5\u4f5c\u6d41\u6846\u67b6 JManus <code>spring-ai-alibaba/spring-ai-alibaba-jmanus</code> Plan-Act \u667a\u80fd\u4ee3\u7406\u5e73\u53f0 DeepResearch <code>spring-ai-alibaba/spring-ai-alibaba-deepresearch</code> \u6df1\u5ea6\u7814\u7a76\u4ee3\u7406 MCP Support <code>spring-ai-alibaba/spring-ai-alibaba-mcp</code> MCP \u534f\u8bae\u652f\u6301 NL2SQL <code>spring-ai-alibaba/spring-ai-alibaba-nl2sql</code> \u81ea\u7136\u8bed\u8a00\u8f6c SQL"},{"location":"how-to-guides/integrate-gemini/#agent","title":"\u2705 \u5df2\u6709 Agent \u7c7b\u578b","text":"<pre><code>1. ReactAgent        - ReAct \u6a21\u5f0f\u4ee3\u7406\uff08\u5df2\u5b9e\u73b0\uff09\n2. ReflectAgent      - \u53cd\u601d\u6a21\u5f0f\u4ee3\u7406\uff08\u5df2\u5b9e\u73b0\uff09\n3. SupervisorAgent   - \u76d1\u7763\u4ee3\u7406\uff08\u5df2\u5b9e\u73b0\uff09\n4. DashScopeAgent    - \u963f\u91cc\u4e91\u7075\u79ef\u4ee3\u7406\uff08\u5df2\u5b9e\u73b0\uff09\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#_5","title":"\u2705 \u5df2\u6709\u5de5\u4f5c\u6d41\u6a21\u5f0f","text":"<pre><code>// \u6765\u81ea spring-ai-alibaba-graph\n- StateGraph           - \u72b6\u6001\u56fe\uff08\u57fa\u7840\uff09\n- LlmNode             - LLM \u8282\u70b9\n- ToolNode            - \u5de5\u5177\u8282\u70b9\n- RouterNode          - \u8def\u7531\u8282\u70b9\n- Human-in-the-Loop   - \u4eba\u673a\u534f\u4f5c\n- Nested/Parallel     - \u5d4c\u5957/\u5e76\u884c\u6267\u884c\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#_6","title":"\ud83c\udfaf \u6574\u5408\u65b9\u6848","text":""},{"location":"how-to-guides/integrate-gemini/#spring-ai","title":"\u65b9\u6848\u9009\u62e9\uff1a\u5229\u7528 Spring AI \u7684\u62bd\u8c61\u5c42","text":"<p>\u4e0d\u9700\u8981\u91cd\u65b0\u9020\u8f6e\u5b50\uff01 Spring AI Alibaba \u57fa\u4e8e Spring AI \u6784\u5efa\uff0c\u800c Spring AI \u5df2\u7ecf\u652f\u6301\u591a\u79cd\u6a21\u578b\u63d0\u4f9b\u5546\u7684\u62bd\u8c61\u3002</p>"},{"location":"how-to-guides/integrate-gemini/#_7","title":"\u6574\u5408\u7b56\u7565","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   \u60a8\u7684\u5e94\u7528\u5c42                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502  \u2502  JManus    \u2502  \u2502DeepResearch\u2502  \u2502 Custom App \u2502            \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              Spring AI Alibaba Agent Layer                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502  \u2502  ReactAgent / SupervisorAgent / CustomAgent     \u2502        \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                Spring AI ChatClient (\u62bd\u8c61\u5c42)                 \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502DashScope \u2502  \u2502 OpenAI   \u2502  \u2502 Gemini   \u2502  \u2502DeepSeek  \u2502   \u2502\n\u2502  \u2502 ChatModel\u2502  \u2502ChatModel \u2502  \u2502ChatModel \u2502  \u2502ChatModel \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#_8","title":"\u5173\u952e\u70b9","text":"<ol> <li>Spring AI Alibaba \u7684 Agent \u4e0e\u6a21\u578b\u65e0\u5173\uff1a</li> <li><code>ReactAgent</code> \u63a5\u53d7\u4efb\u4f55 <code>ChatClient</code></li> <li> <p><code>ChatClient</code> \u53ef\u4ee5\u914d\u7f6e\u4e3a\u4f7f\u7528\u4efb\u4f55\u517c\u5bb9\u7684 <code>ChatModel</code></p> </li> <li> <p>\u4f7f\u7528 Spring AI \u7684 OpenAI Adapter\uff1a</p> </li> <li>Gemini API \u53ef\u4ee5\u901a\u8fc7 OpenAI \u517c\u5bb9\u63a5\u53e3\u8bbf\u95ee</li> <li>\u6216\u8005\u901a\u8fc7 Vertex AI \u8bbf\u95ee</li> <li>\u6216\u8005\u81ea\u5b9a\u4e49 <code>ChatModel</code> \u5b9e\u73b0</li> </ol>"},{"location":"how-to-guides/integrate-gemini/#_9","title":"\ud83d\udee0\ufe0f \u5b9e\u65bd\u6b65\u9aa4","text":""},{"location":"how-to-guides/integrate-gemini/#1-gemini","title":"\u6b65\u9aa4 1: \u6dfb\u52a0 Gemini \u4f9d\u8d56","text":"<p>\u6839\u636e\u60a8\u9009\u62e9\u7684\u96c6\u6210\u65b9\u5f0f\uff0c\u6dfb\u52a0\u76f8\u5e94\u4f9d\u8d56\uff1a</p>"},{"location":"how-to-guides/integrate-gemini/#a-spring-ai-vertex-ai","title":"\u65b9\u5f0f A: \u4f7f\u7528 Spring AI Vertex AI\uff08\u63a8\u8350\uff09","text":"<pre><code>&lt;!-- \u5728\u60a8\u7684 pom.xml \u4e2d\u6dfb\u52a0 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-ai-vertex-ai-gemini-spring-boot-starter&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#b-openai-api","title":"\u65b9\u5f0f B: \u4f7f\u7528 OpenAI \u517c\u5bb9 API","text":"<pre><code>&lt;!-- \u4f7f\u7528\u73b0\u6709\u7684 OpenAI starter\uff0c\u914d\u7f6e Base URL --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-ai-openai-spring-boot-starter&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#c-google-generative-ai-sdk","title":"\u65b9\u5f0f C: \u76f4\u63a5\u4f7f\u7528 Google Generative AI SDK","text":"<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;google-cloud-aiplatform&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#2-gemini-chatmodel","title":"\u6b65\u9aa4 2: \u914d\u7f6e Gemini ChatModel","text":"<p>\u5728 <code>mcp-client</code> \u6216\u65b0\u5efa\u7684 <code>mcp-client-gemini</code> \u6a21\u5757\u4e2d\u914d\u7f6e\uff1a</p>"},{"location":"how-to-guides/integrate-gemini/#applicationyml","title":"application.yml","text":"<pre><code>spring:\n  application:\n    name: mcp-client-gemini\n\n  ai:\n    # \u65b9\u5f0f A: Vertex AI Gemini \u914d\u7f6e\n    vertex:\n      ai:\n        gemini:\n          project-id: ${GCP_PROJECT_ID}\n          location: us-central1\n          chat:\n            model: gemini-3-flash\n            options:\n              temperature: 0.7\n              max-output-tokens: 2048\n\n    # \u65b9\u5f0f B: \u4f5c\u4e3a OpenAI \u517c\u5bb9 API\uff08\u5982\u679c Google \u63d0\u4f9b\uff09\n    openai:\n      gemini:\n        api-key: ${GEMINI_API_KEY}\n        base-url: https://generativelanguage.googleapis.com/v1beta\n        chat:\n          model: gemini-3-flash\n\n    # \u73b0\u6709\u7684 DeepSeek \u914d\u7f6e\uff08\u4fdd\u7559\uff09\n    openai:\n      deepseek:\n        api-key: ${DEEPSEEK_API_KEY}\n        base-url: https://api.deepseek.com\n        chat:\n          model: deepseek-chat\n\n    # MCP \u914d\u7f6e\n    mcp:\n      client:\n        sse:\n          connections:\n            person-mcp-server:\n              url: http://localhost:8060\n            gemini-tools-server:\n              url: http://localhost:8070  # \u65b0\u589e\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#3-gemini-chatclient-bean","title":"\u6b65\u9aa4 3: \u521b\u5efa Gemini ChatClient Bean","text":"<p>\u5728\u60a8\u7684\u914d\u7f6e\u7c7b\u4e2d\uff1a</p> <pre><code>package com.example.mcp.client.config;\n\nimport org.springframework.ai.chat.client.ChatClient;\nimport org.springframework.ai.vertexai.gemini.VertexAiGeminiChatModel;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class GeminiConfig {\n\n    /**\n     * \u521b\u5efa Gemini ChatClient\n     */\n    @Bean(\"geminiChatClient\")\n    public ChatClient geminiChatClient(\n            @Qualifier(\"vertexAiGeminiChatModel\") VertexAiGeminiChatModel chatModel) {\n        return ChatClient.builder(chatModel)\n                .defaultSystem(\"You are a helpful AI assistant powered by Google Gemini.\")\n                .build();\n    }\n\n    /**\n     * \u521b\u5efa\u591a\u6a21\u578b\u8def\u7531\u5668\uff08\u53ef\u9009\uff09\n     */\n    @Bean\n    public MultiModelRouter multiModelRouter(\n            @Qualifier(\"geminiChatClient\") ChatClient geminiClient,\n            @Qualifier(\"deepseekChatClient\") ChatClient deepseekClient) {\n        return MultiModelRouter.builder()\n                .addModel(\"gemini-flash\", geminiClient)  // \u5feb\u901f\u3001\u4f4e\u6210\u672c\n                .addModel(\"deepseek\", deepseekClient)    // \u5907\u7528\n                .defaultModel(\"gemini-flash\")\n                .build();\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#4-agent-gemini","title":"\u6b65\u9aa4 4: \u5728\u73b0\u6709 Agent \u4e2d\u4f7f\u7528 Gemini","text":"<p>\u5229\u7528 <code>spring-ai-alibaba-graph</code> \u7684 <code>ReactAgent</code>\uff1a</p> <pre><code>package com.example.agent;\n\nimport com.alibaba.cloud.ai.graph.agent.ReactAgent;\nimport com.alibaba.cloud.ai.graph.node.LlmNode;\nimport org.springframework.ai.chat.client.ChatClient;\nimport org.springframework.ai.tool.ToolCallback;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\n\n@Component\npublic class GeminiResearchAgent {\n\n    private final ReactAgent agent;\n\n    public GeminiResearchAgent(\n            @Qualifier(\"geminiChatClient\") ChatClient geminiChatClient,\n            List&lt;ToolCallback&gt; tools) {\n\n        // \u4f7f\u7528 ReactAgent.Builder \u6784\u5efa\u4ee3\u7406\n        this.agent = ReactAgent.builder()\n                .name(\"gemini-research-agent\")\n                .chatClient(geminiChatClient)  // \u4f7f\u7528 Gemini ChatClient\n                .tools(tools)                  // \u6ce8\u5165 MCP Tools\n                .maxIterations(10)\n                .build();\n    }\n\n    public String research(String topic) {\n        var response = agent.getAndCompileGraph()\n                .invoke(Map.of(\"input\", \"Research topic: \" + topic));\n        return response.get(\"output\").toString();\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#5-gemini-mcp-server","title":"\u6b65\u9aa4 5: \u521b\u5efa Gemini \u4e13\u7528\u5de5\u5177 MCP Server","text":"<p>\u5728 <code>mcp-server-gemini-tools</code> \u6a21\u5757\u4e2d\uff1a</p> <pre><code>package com.example.mcp.server.gemini.tools;\n\nimport com.alibaba.cloud.ai.tool.ToolParam;\nimport org.springframework.ai.tool.Tool;\nimport org.springframework.stereotype.Component;\n\n/**\n * Gemini \u6587\u6863\u7406\u89e3\u5de5\u5177\n */\n@Component\npublic class DocumentUnderstandingTool {\n\n    @Tool(description = \"\u4f7f\u7528 Gemini \u7684 Long Context \u80fd\u529b\u5206\u6790\u957f\u6587\u6863\")\n    public String analyzeLongDocument(\n            @ToolParam(description = \"\u6587\u6863 URL \u6216\u5185\u5bb9\") String document,\n            @ToolParam(description = \"\u5206\u6790\u95ee\u9898\") String question) {\n\n        // TODO: \u8c03\u7528 Gemini API \u7684 Document Understanding \u529f\u80fd\n        // \u4f7f\u7528 Long Context (\u652f\u6301\u6570\u767e\u4e07 tokens)\n\n        return \"\u6587\u6863\u5206\u6790\u7ed3\u679c...\";\n    }\n\n    @Tool(description = \"\u4f7f\u7528 Gemini Nano Banana \u751f\u6210\u56fe\u50cf\")\n    public String generateImage(\n            @ToolParam(description = \"\u56fe\u50cf\u63cf\u8ff0\") String prompt) {\n\n        // TODO: \u8c03\u7528 Gemini \u7684 Nano Banana API\n\n        return \"\u751f\u6210\u7684\u56fe\u50cf URL...\";\n    }\n\n    @Tool(description = \"\u4f7f\u7528 Gemini Veo 3.1 \u751f\u6210\u89c6\u9891\")\n    public String generateVideo(\n            @ToolParam(description = \"\u89c6\u9891\u63cf\u8ff0\") String prompt,\n            @ToolParam(description = \"\u89c6\u9891\u65f6\u957f\uff08\u79d2\uff09\") int duration) {\n\n        // TODO: \u8c03\u7528 Veo 3.1 API\n\n        return \"\u751f\u6210\u7684\u89c6\u9891 URL...\";\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#6-graph","title":"\u6b65\u9aa4 6: \u6784\u5efa\u5de5\u4f5c\u6d41\uff08\u5229\u7528\u73b0\u6709 Graph\uff09","text":"<p>\u4f7f\u7528 <code>spring-ai-alibaba-graph</code> \u6784\u5efa\u590d\u6742\u5de5\u4f5c\u6d41\uff1a</p> <pre><code>package com.example.workflow;\n\nimport com.alibaba.cloud.ai.graph.StateGraph;\nimport com.alibaba.cloud.ai.graph.node.LlmNode;\nimport com.alibaba.cloud.ai.graph.node.ToolNode;\nimport com.alibaba.cloud.ai.graph.state.OverAllState;\nimport org.springframework.ai.chat.client.ChatClient;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.stereotype.Component;\n\nimport static com.alibaba.cloud.ai.graph.StateGraph.END;\nimport static com.alibaba.cloud.ai.graph.StateGraph.START;\n\n@Component\npublic class MultiDocumentWorkflow {\n\n    private final StateGraph graph;\n\n    public MultiDocumentWorkflow(\n            @Qualifier(\"geminiChatClient\") ChatClient geminiClient,\n            ToolNode toolNode) {\n\n        // \u521b\u5efa\u72b6\u6001\u56fe\n        graph = new StateGraph();\n\n        // \u8282\u70b9 1: \u6587\u6863\u6458\u8981\uff08\u5e76\u884c\uff09\n        LlmNode summaryNode = LlmNode.builder()\n                .name(\"document-summary\")\n                .chatClient(geminiClient)\n                .systemPrompt(\"\u4e3a\u4ee5\u4e0b\u6587\u6863\u751f\u6210\u6458\u8981\")\n                .build();\n\n        // \u8282\u70b9 2: \u5bf9\u6bd4\u5206\u6790\n        LlmNode compareNode = LlmNode.builder()\n                .name(\"document-compare\")\n                .chatClient(geminiClient)\n                .systemPrompt(\"\u5bf9\u6bd4\u5206\u6790\u591a\u4e2a\u6587\u6863\u7684\u5dee\u5f02\")\n                .build();\n\n        // \u8282\u70b9 3: \u5de5\u5177\u8c03\u7528\uff08\u5982\u9700\u8981\uff09\n\n        // \u6784\u5efa\u56fe\n        graph.addNode(\"summary\", summaryNode);\n        graph.addNode(\"compare\", compareNode);\n        graph.addNode(\"tools\", toolNode);\n\n        // \u8def\u7531\u903b\u8f91\n        graph.addEdge(START, \"summary\");\n        graph.addConditionalEdges(\"summary\", this::shouldUseTool, \n            Map.of(\n                \"yes\", \"tools\",\n                \"no\", \"compare\"\n            ));\n        graph.addEdge(\"tools\", \"compare\");\n        graph.addEdge(\"compare\", END);\n    }\n\n    private String shouldUseTool(OverAllState state) {\n        // \u5224\u65ad\u662f\u5426\u9700\u8981\u8c03\u7528\u5de5\u5177\n        return state.getToolCalls().isEmpty() ? \"no\" : \"yes\";\n    }\n\n    public Map&lt;String, Object&gt; analyze(List&lt;String&gt; documentUrls) {\n        var compiled = graph.compile();\n        return compiled.invoke(Map.of(\"documents\", documentUrls));\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#_10","title":"\ud83d\udcdd \u914d\u7f6e\u793a\u4f8b","text":""},{"location":"how-to-guides/integrate-gemini/#applicationyml_1","title":"\u5b8c\u6574\u7684 application.yml","text":"<pre><code>spring:\n  application:\n    name: mcp-client-gemini\n\n  # \u6570\u636e\u6e90\u914d\u7f6e\uff08\u5982\u9700\u8981\uff09\n  datasource:\n    url: jdbc:h2:mem:testdb\n    driver-class-name: org.h2.Driver\n\n  # AI \u914d\u7f6e\n  ai:\n    # Gemini (Vertex AI)\n    vertex:\n      ai:\n        gemini:\n          project-id: ${GCP_PROJECT_ID:your-gcp-project}\n          location: ${GCP_LOCATION:us-central1}\n          credentials:\n            # \u65b9\u5f0f 1: \u4f7f\u7528\u670d\u52a1\u8d26\u53f7 JSON\n            location: file:${GCP_CREDENTIALS_PATH}\n            # \u65b9\u5f0f 2: \u4f7f\u7528\u5e94\u7528\u9ed8\u8ba4\u51ed\u8bc1\n            # use-application-default: true\n          chat:\n            model: ${GEMINI_MODEL:gemini-3-flash}\n            options:\n              temperature: 0.7\n              max-output-tokens: 2048\n              top-p: 0.95\n              top-k: 40\n\n    # OpenAI (DeepSeek) - \u4fdd\u7559\u73b0\u6709\u914d\u7f6e\n    openai:\n      api-key: ${DEEPSEEK_API_KEY}\n      base-url: https://api.deepseek.com\n      chat:\n        model: deepseek-chat\n\n    # MCP \u5ba2\u6237\u7aef\u914d\u7f6e\n    mcp:\n      client:\n        sse:\n          connections:\n            # \u73b0\u6709\u7684 Person Server\n            person-mcp-server:\n              url: http://localhost:8060\n              enabled: true\n\n            # \u65b0\u589e\u7684 Gemini Tools Server\n            gemini-tools-server:\n              url: http://localhost:8070\n              enabled: true\n\n            # \u5176\u4ed6 MCP \u670d\u52a1\u5668...\n\n  # Nacos \u914d\u7f6e\uff08Spring Cloud Alibaba\uff09\n  cloud:\n    nacos:\n      discovery:\n        server-addr: ${NACOS_SERVER:localhost:8848}\n        namespace: ${NACOS_NAMESPACE:public}\n        group: ${NACOS_GROUP:DEFAULT_GROUP}\n      config:\n        server-addr: ${NACOS_SERVER:localhost:8848}\n        namespace: ${NACOS_NAMESPACE:public}\n        group: ${NACOS_GROUP:DEFAULT_GROUP}\n        file-extension: yaml\n\n# Logging\nlogging:\n  level:\n    root: INFO\n    com.alibaba.cloud.ai: DEBUG\n    org.springframework.ai: DEBUG\n    com.example: DEBUG\n  pattern:\n    console: \"%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n\"\n\n# \u670d\u52a1\u7aef\u53e3\nserver:\n  port: ${SERVER_PORT:8080}\n\n# Actuator \u76d1\u63a7\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: health,info,metrics,prometheus\n  metrics:\n    export:\n      prometheus:\n        enabled: true\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#env","title":"\u73af\u5883\u53d8\u91cf\u914d\u7f6e (.env)","text":"<pre><code># Google Cloud Platform\nGCP_PROJECT_ID=your-gcp-project-id\nGCP_LOCATION=us-central1\nGCP_CREDENTIALS_PATH=/path/to/service-account-key.json\n\n# Gemini Model Selection\nGEMINI_MODEL=gemini-3-flash  # \u6216 gemini-3-pro\n# GEMINI_API_KEY=your-api-key  # \u5982\u679c\u4e0d\u4f7f\u7528 Vertex AI\n\n# DeepSeek (\u73b0\u6709)\nDEEPSEEK_API_KEY=your-deepseek-api-key\n\n# Nacos\nNACOS_SERVER=localhost:8848\nNACOS_NAMESPACE=public\nNACOS_GROUP=DEFAULT_GROUP\n\n# Server\nSERVER_PORT=8080\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#_11","title":"\ud83d\udca1 \u4f7f\u7528\u793a\u4f8b","text":""},{"location":"how-to-guides/integrate-gemini/#1","title":"\u793a\u4f8b 1: \u7b80\u5355\u5bf9\u8bdd","text":"<pre><code>@RestController\n@RequestMapping(\"/api/gemini\")\npublic class GeminiController {\n\n    @Autowired\n    @Qualifier(\"geminiChatClient\")\n    private ChatClient geminiClient;\n\n    @PostMapping(\"/chat\")\n    public String chat(@RequestBody ChatRequest request) {\n        return geminiClient.prompt()\n                .user(request.getMessage())\n                .call()\n                .content();\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#2-reactagent","title":"\u793a\u4f8b 2: \u4f7f\u7528 ReactAgent \u8fdb\u884c\u667a\u80fd\u95ee\u7b54","text":"<pre><code>@Service\npublic class GeminiQAService {\n\n    private final ReactAgent qaAgent;\n\n    public GeminiQAService(\n            @Qualifier(\"geminiChatClient\") ChatClient geminiClient,\n            List&lt;ToolCallback&gt; tools) {\n\n        this.qaAgent = ReactAgent.builder()\n                .name(\"gemini-qa-agent\")\n                .chatClient(geminiClient)\n                .tools(tools)  // \u81ea\u52a8\u6ce8\u5165\u6240\u6709 @Tool \u65b9\u6cd5\n                .maxIterations(5)\n                .build();\n    }\n\n    public String answer(String question) {\n        var result = qaAgent.getAndCompileGraph()\n                .invoke(Map.of(\"input\", question));\n        return result.get(\"output\").toString();\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#3-deepresearch-agent","title":"\u793a\u4f8b 3: \u53c2\u8003 DeepResearch \u5b9e\u73b0\u81ea\u5b9a\u4e49\u7814\u7a76 Agent","text":"<p>\u67e5\u770b\u73b0\u6709\u7684 <code>spring-ai-alibaba-deepresearch</code> \u5b9e\u73b0\uff1a</p> <pre><code>cd spring-ai-alibaba/spring-ai-alibaba-deepresearch\n</code></pre> <p>\u590d\u5236\u5e76\u4fee\u6539\u4e3a\u4f7f\u7528 Gemini\uff1a</p> <pre><code>// \u53c2\u8003: spring-ai-alibaba-deepresearch/src/main/java/...\n@Component\npublic class GeminiDeepResearch {\n\n    private final StateGraph researchGraph;\n    private final ChatClient geminiClient;\n\n    public GeminiDeepResearch(\n            @Qualifier(\"geminiChatClient\") ChatClient geminiClient,\n            WebSearchTool webSearchTool,\n            WebCrawlerTool webCrawlerTool,\n            PythonTool pythonTool) {\n\n        this.geminiClient = geminiClient;\n        this.researchGraph = buildResearchGraph();\n    }\n\n    private StateGraph buildResearchGraph() {\n        var graph = new StateGraph();\n\n        // 1. \u89c4\u5212\u8282\u70b9\n        var planNode = LlmNode.builder()\n                .name(\"plan\")\n                .chatClient(geminiClient)\n                .systemPrompt(\"\u4e3a\u7814\u7a76\u4e3b\u9898\u5236\u5b9a\u8be6\u7ec6\u8ba1\u5212\")\n                .build();\n\n        // 2. \u6267\u884c\u8282\u70b9\uff08\u5faa\u73af\uff09\n        var executeNode = LlmNode.builder()\n                .name(\"execute\")\n                .chatClient(geminiClient)\n                .systemPrompt(\"\u6267\u884c\u7814\u7a76\u4efb\u52a1\")\n                .build();\n\n        // 3. \u5de5\u5177\u8282\u70b9\n        var toolNode = new ToolNode(\"tools\");\n\n        // 4. \u6c47\u603b\u8282\u70b9\n        var summaryNode = LlmNode.builder()\n                .name(\"summary\")\n                .chatClient(geminiClient)\n                .systemPrompt(\"\u6c47\u603b\u7814\u7a76\u7ed3\u679c\u5e76\u751f\u6210\u62a5\u544a\")\n                .build();\n\n        // \u6784\u5efa\u56fe\n        graph.addNode(\"plan\", planNode);\n        graph.addNode(\"execute\", executeNode);\n        graph.addNode(\"tools\", toolNode);\n        graph.addNode(\"summary\", summaryNode);\n\n        // \u8def\u7531\n        graph.addEdge(START, \"plan\");\n        graph.addEdge(\"plan\", \"execute\");\n        graph.addConditionalEdges(\"execute\",\n                state -&gt; needMoreResearch(state) ? \"tools\" : \"summary\",\n                Map.of(\"tools\", \"tools\", \"summary\", \"summary\"));\n        graph.addEdge(\"tools\", \"execute\");  // \u5faa\u73af\n        graph.addEdge(\"summary\", END);\n\n        return graph;\n    }\n\n    public String research(String topic) {\n        var compiled = researchGraph.compile();\n        var result = compiled.invoke(Map.of(\"topic\", topic));\n        return result.get(\"report\").toString();\n    }\n\n    private boolean needMoreResearch(OverAllState state) {\n        // \u5224\u65ad\u903b\u8f91...\n        return state.getIterations() &lt; 3;\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#4-jmanus-agent","title":"\u793a\u4f8b 4: \u4f7f\u7528 JManus \u98ce\u683c\u7684\u52a8\u6001 Agent","text":"<p>\u53c2\u8003 <code>spring-ai-alibaba-jmanus</code> \u5b9e\u73b0\uff1a</p> <pre><code>// \u53c2\u8003: spring-ai-alibaba-jmanus/src/main/java/...\n@Component\npublic class GeminiManus {\n\n    private final StateGraph janusGraph;\n\n    public GeminiManus(\n            @Qualifier(\"geminiChatClient\") ChatClient geminiClient,\n            AgentService agentService) {\n\n        // \u6784\u5efa JManus \u98ce\u683c\u7684\u56fe\n        this.janusGraph = buildManusGraph(geminiClient, agentService);\n    }\n\n    private StateGraph buildManusGraph(\n            ChatClient geminiClient, \n            AgentService agentService) {\n\n        var graph = new StateGraph();\n\n        // \u4e3b Agent\uff08\u4f7f\u7528 Gemini 3 Pro \u8fdb\u884c\u89c4\u5212\uff09\n        var mainAgent = ReactAgent.builder()\n                .name(\"main-planner\")\n                .chatClient(geminiClient)\n                .tools(agentService.getAllSubAgents())  // \u52a8\u6001\u52a0\u8f7d\u5b50\u4ee3\u7406\n                .build();\n\n        // ... \u6784\u5efa\u56fe\u903b\u8f91\n\n        return graph;\n    }\n\n    public String execute(String task) {\n        var compiled = janusGraph.compile();\n        var result = compiled.invoke(Map.of(\"task\", task));\n        return result.get(\"result\").toString();\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#_12","title":"\ud83c\udf93 \u6700\u4f73\u5b9e\u8df5","text":""},{"location":"how-to-guides/integrate-gemini/#1_1","title":"1. \u6a21\u578b\u9009\u62e9\u7b56\u7565","text":"<pre><code>@Component\npublic class ModelSelector {\n\n    public ChatClient selectModel(TaskComplexity complexity) {\n        return switch (complexity) {\n            case SIMPLE -&gt; geminiFlashClient;     // Gemini 3 Flash (\u5feb\u901f\u3001\u4fbf\u5b9c)\n            case MODERATE -&gt; deepseekClient;       // DeepSeek (\u4e2d\u7b49)\n            case COMPLEX -&gt; geminiProClient;       // Gemini 3 Pro (\u5f3a\u5927\u3001\u51c6\u786e)\n            case MULTIMODAL -&gt; geminiProClient;    // \u591a\u6a21\u6001\u4efb\u52a1\n        };\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#2","title":"2. \u6210\u672c\u4f18\u5316","text":"<ul> <li>\u4f7f\u7528 Gemini 3 Flash \u5904\u7406\u7b80\u5355\u4efb\u52a1</li> <li>\u4f7f\u7528 Gemini 3 Pro \u5904\u7406\u9700\u8981\u6df1\u5ea6\u63a8\u7406\u7684\u4efb\u52a1</li> <li>\u5b9e\u73b0\u7f13\u5b58\u673a\u5236\u51cf\u5c11\u91cd\u590d\u8c03\u7528</li> <li>\u4f7f\u7528 Structured Outputs \u51cf\u5c11\u540e\u5904\u7406\u6210\u672c</li> </ul>"},{"location":"how-to-guides/integrate-gemini/#3","title":"3. \u9519\u8bef\u5904\u7406\u4e0e\u91cd\u8bd5","text":"<pre><code>@Component\npublic class GeminiService {\n\n    @Retryable(\n        value = {ApiException.class},\n        maxAttempts = 3,\n        backoff = @Backoff(delay = 1000, multiplier = 2)\n    )\n    public String callGemini(String prompt) {\n        try {\n            return geminiClient.prompt()\n                    .user(prompt)\n                    .call()\n                    .content();\n        } catch (RateLimitException e) {\n            // \u964d\u7ea7\u5230 DeepSeek\n            return deepseekClient.prompt().user(prompt).call().content();\n        }\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#4","title":"4. \u76d1\u63a7\u4e0e\u89c2\u6d4b","text":"<p>\u5229\u7528 Spring AI \u7684\u539f\u751f\u76d1\u63a7\u652f\u6301\uff1a</p> <pre><code># application.yml\nmanagement:\n  tracing:\n    sampling:\n      probability: 1.0\n  metrics:\n    export:\n      prometheus:\n        enabled: true\n    tags:\n      # \u6dfb\u52a0\u81ea\u5b9a\u4e49\u6807\u7b7e\n      model: ${GEMINI_MODEL}\n      service: gemini-integration\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#5","title":"5. \u5b89\u5168\u6700\u4f73\u5b9e\u8df5","text":"<pre><code>@Configuration\npublic class SecurityConfig {\n\n    @Bean\n    public CredentialsProvider credentialsProvider() {\n        // \u4f7f\u7528 Google Cloud Secret Manager \u6216 Vault\n        return GoogleCredentials.getApplicationDefault();\n    }\n\n    @Bean\n    public ApiKeyManager apiKeyManager() {\n        // API Key \u8f6e\u6362\u673a\u5236\n        return new ApiKeyManager();\n    }\n}\n</code></pre>"},{"location":"how-to-guides/integrate-gemini/#_13","title":"\ud83d\udcda \u53c2\u8003\u8d44\u6e90","text":""},{"location":"how-to-guides/integrate-gemini/#_14","title":"\u73b0\u6709\u9879\u76ee\u6587\u6863","text":"<ol> <li>Spring AI Alibaba README: <code>spring-ai-alibaba/README.md</code></li> <li>JManus \u5b9e\u73b0: <code>spring-ai-alibaba/spring-ai-alibaba-jmanus/</code></li> <li>DeepResearch \u5b9e\u73b0: <code>spring-ai-alibaba/spring-ai-alibaba-deepresearch/</code></li> <li>Graph \u793a\u4f8b: <code>spring-ai-alibaba/spring-ai-alibaba- graph/spring-ai-alibaba-graph-example/</code></li> </ol>"},{"location":"how-to-guides/integrate-gemini/#_15","title":"\u5916\u90e8\u8d44\u6e90","text":"<ol> <li>Spring AI \u6587\u6863: https://docs.spring.io/spring-ai/reference/</li> <li>Gemini API \u6587\u6863: https://ai.google.dev/gemini-api/docs</li> <li>Spring AI Alibaba GitHub: https://github.com/alibaba/spring-ai-alibaba</li> <li>Spring AI Examples: https://github.com/spring-projects/spring-ai-examples</li> </ol>"},{"location":"how-to-guides/integrate-gemini/#_16","title":"\ud83d\ude80 \u5feb\u901f\u5f00\u59cb\u6e05\u5355","text":"<ul> <li> \u7b2c 1 \u6b65: \u7533\u8bf7 Google Cloud \u8d26\u53f7\u548c Gemini API \u8bbf\u95ee\u6743\u9650</li> <li> \u7b2c 2 \u6b65: \u5728\u9879\u76ee\u4e2d\u6dfb\u52a0 Vertex AI Gemini \u6216 OpenAI Adapter \u4f9d\u8d56</li> <li> \u7b2c 3 \u6b65: \u914d\u7f6e <code>application.yml</code> \u6dfb\u52a0 Gemini \u76f8\u5173\u914d\u7f6e</li> <li> \u7b2c 4 \u6b65: \u521b\u5efa <code>GeminiConfig</code> \u914d\u7f6e\u7c7b\uff0c\u5b9a\u4e49 ChatClient Bean</li> <li> \u7b2c 5 \u6b65: \u5728\u73b0\u6709\u7684 ReactAgent \u6216\u81ea\u5b9a\u4e49 Agent \u4e2d\u6ce8\u5165 Gemini ChatClient</li> <li> \u7b2c 6 \u6b65: \uff08\u53ef\u9009\uff09\u521b\u5efa Gemini \u4e13\u7528\u5de5\u5177 MCP Server</li> <li> \u7b2c 7 \u6b65: \u6d4b\u8bd5 Gemini \u96c6\u6210</li> <li> \u7b2c 8 \u6b65: \u53c2\u8003 DeepResearch/JManus \u5b9e\u73b0\u81ea\u5b9a\u4e49\u5de5\u4f5c\u6d41</li> <li> \u7b2c 9 \u6b65: \u6dfb\u52a0\u76d1\u63a7\u548c\u65e5\u5fd7</li> <li> \u7b2c 10 \u6b65: \u4f18\u5316\u548c\u90e8\u7f72</li> </ul>"},{"location":"how-to-guides/integrate-gemini/#_17","title":"\u2705 \u603b\u7ed3","text":""},{"location":"how-to-guides/integrate-gemini/#_18","title":"\u6838\u5fc3\u8981\u70b9","text":"<ol> <li>\u4e0d\u8981\u91cd\u65b0\u9020\u8f6e\u5b50\uff1a\u5229\u7528\u73b0\u6709\u7684 Spring AI Alibaba \u6846\u67b6</li> <li>Agent \u4e0e\u6a21\u578b\u65e0\u5173\uff1aReactAgent\u3001SupervisorAgent \u7b49\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55 ChatClient</li> <li>\u914d\u7f6e\u9a71\u52a8\uff1a\u901a\u8fc7 application.yml \u5207\u6362\u4e0d\u540c\u6a21\u578b</li> <li>\u53c2\u8003\u73b0\u6709\u5b9e\u73b0\uff1aJManus \u548c DeepResearch \u662f\u5f88\u597d\u7684\u53c2\u8003</li> <li>\u6e10\u8fdb\u5f0f\u6574\u5408\uff1a\u5148\u6574\u5408\u57fa\u7840\u5bf9\u8bdd\uff0c\u518d\u6dfb\u52a0\u9ad8\u7ea7\u529f\u80fd</li> </ol>"},{"location":"how-to-guides/integrate-gemini/#_19","title":"\u4e0b\u4e00\u6b65","text":"<ol> <li>\u9009\u62e9\u4e00\u4e2a\u73b0\u6709\u7684 Agent\uff08\u5982 ReactAgent\uff09\u4f5c\u4e3a\u8d77\u70b9</li> <li>\u914d\u7f6e Gemini ChatClient</li> <li>\u8fd0\u884c\u6d4b\u8bd5</li> <li>\u9010\u6b65\u6dfb\u52a0 Gemini \u7279\u6709\u529f\u80fd\uff08Document Understanding\u3001Image Generation \u7b49\uff09</li> </ol> <p>\ud83d\udce7 \u5982\u6709\u95ee\u9898\uff0c\u8bf7\u53c2\u8003\u9879\u76ee\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\u6216\u67e5\u9605 Spring AI \u6587\u6863\u3002</p>"},{"location":"how-to-guides/troubleshooting/","title":"\u6545\u969c\u6392\u9664\u6307\u5357","text":"<p>\u5e38\u89c1\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848</p>"},{"location":"how-to-guides/troubleshooting/#_2","title":"\ud83d\udccb \u76ee\u5f55","text":"<ol> <li>\u542f\u52a8\u95ee\u9898</li> <li>\u8fde\u63a5\u95ee\u9898</li> <li>\u6027\u80fd\u95ee\u9898</li> <li>\u914d\u7f6e\u95ee\u9898</li> </ol>"},{"location":"how-to-guides/troubleshooting/#_3","title":"\u542f\u52a8\u95ee\u9898","text":""},{"location":"how-to-guides/troubleshooting/#1","title":"\u95ee\u9898 1: \u7aef\u53e3\u5df2\u88ab\u5360\u7528","text":"<p>\u75c7\u72b6: <pre><code>Web server failed to start. Port 8080 was already in use.\n</code></pre></p> <p>\u539f\u56e0: \u7aef\u53e3\u88ab\u5176\u4ed6\u8fdb\u7a0b\u5360\u7528</p> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># \u65b9\u6848 1: \u67e5\u627e\u5e76\u6740\u6b7b\u5360\u7528\u8fdb\u7a0b\nlsof -i :8080\nkill -9 &lt;PID&gt;\n\n# \u65b9\u6848 2: \u4fee\u6539\u7aef\u53e3\n# \u7f16\u8f91 application.yml\nserver:\n  port: 8081  # \u6539\u4e3a\u5176\u4ed6\u7aef\u53e3\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#2-java","title":"\u95ee\u9898 2: Java \u7248\u672c\u4e0d\u5339\u914d","text":"<p>\u75c7\u72b6: <pre><code>Unsupported class file major version 61\n</code></pre></p> <p>\u539f\u56e0: Java \u7248\u672c\u4f4e\u4e8e 17</p> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># \u68c0\u67e5\u7248\u672c\njava -version\n\n# \u5b89\u88c5 Java 17+\n# macOS\nbrew install openjdk@17\n\n# Linux\nsudo apt install openjdk-17-jdk\n\n# \u8bbe\u7f6e JAVA_HOME\nexport JAVA_HOME=/path/to/java17\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#3-maven","title":"\u95ee\u9898 3: Maven \u6784\u5efa\u5931\u8d25","text":"<p>\u75c7\u72b6: <pre><code>Failed to execute goal on project mcp-router-v3\n</code></pre></p> <p>\u539f\u56e0: \u4f9d\u8d56\u4e0b\u8f7d\u5931\u8d25\u6216\u7248\u672c\u51b2\u7a81</p> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># \u6e05\u7406\u5e76\u91cd\u65b0\u6784\u5efa\nmvn clean install -U -DskipTests\n\n# \u5982\u679c\u8fd8\u5931\u8d25\uff0c\u5220\u9664\u672c\u5730\u4ed3\u5e93\u7f13\u5b58\nrm -rf ~/.m2/repository/com/alibaba/cloud/ai\nmvn clean install\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#_4","title":"\u8fde\u63a5\u95ee\u9898","text":""},{"location":"how-to-guides/troubleshooting/#4-nacos","title":"\u95ee\u9898 4: \u65e0\u6cd5\u8fde\u63a5\u5230 Nacos","text":"<p>\u75c7\u72b6: <pre><code>Connection refused: localhost/127.0.0.1:8848\n</code></pre></p> <p>\u539f\u56e0: Nacos \u672a\u542f\u52a8\u6216\u914d\u7f6e\u9519\u8bef</p> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># 1. \u68c0\u67e5 Nacos \u662f\u5426\u8fd0\u884c\ncurl http://localhost:8848/nacos/\n\n# 2. \u542f\u52a8 Nacos (\u5982\u679c\u672a\u8fd0\u884c)\ncd nacos/bin\n./startup.sh -m standalone\n\n# 3. \u68c0\u67e5\u914d\u7f6e\n# application.yml\nspring:\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848  # \u786e\u4fdd\u6b63\u786e\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#5-sse","title":"\u95ee\u9898 5: SSE \u8fde\u63a5\u65ad\u5f00","text":"<p>\u75c7\u72b6: <pre><code>SSE connection lost, retrying...\n</code></pre></p> <p>\u539f\u56e0: \u7f51\u7edc\u95ee\u9898\u6216\u670d\u52a1\u5668\u91cd\u542f</p> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># \u589e\u52a0\u8d85\u65f6\u65f6\u95f4\nspring:\n  webflux:\n    sse:\n      timeout: 600s  # \u9ed8\u8ba4 30s\n\n# \u542f\u7528\u81ea\u52a8\u91cd\u8fde\nmcp:\n  client:\n    auto-reconnect: true\n    retry-interval: 5s\n    max-retries: 3\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#6-deepseek-api","title":"\u95ee\u9898 6: DeepSeek API \u8c03\u7528\u5931\u8d25","text":"<p>\u75c7\u72b6: <pre><code>401 Unauthorized: Invalid API key\n</code></pre></p> <p>\u539f\u56e0: API Key \u672a\u8bbe\u7f6e\u6216\u65e0\u6548</p> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># 1. \u68c0\u67e5 API Key\necho $DEEPSEEK_API_KEY\n\n# 2. \u8bbe\u7f6e API Key\nexport DEEPSEEK_API_KEY=sk-xxxx\n\n# 3. \u6216\u5728 application.yml \u4e2d\u914d\u7f6e\nspring:\n  ai:\n    deepseek:\n      api-key: ${DEEPSEEK_API_KEY}\n      base-url: https://api.deepseek.com\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#_5","title":"\u6027\u80fd\u95ee\u9898","text":""},{"location":"how-to-guides/troubleshooting/#7","title":"\u95ee\u9898 7: \u54cd\u5e94\u6162","text":"<p>\u75c7\u72b6: API \u54cd\u5e94\u65f6\u95f4 &gt; 5\u79d2</p> <p>\u8bca\u65ad:</p> <pre><code># 1. \u68c0\u67e5\u65e5\u5fd7\ntail -f logs/application.log | grep \"took\"\n\n# 2. \u542f\u7528 metrics\ncurl http://localhost:8080/actuator/metrics/http.server.requests\n</code></pre> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># 1. \u542f\u7528\u7f13\u5b58\nspring:\n  cache:\n    type: caffeine\n    caffeine:\n      spec: maximumSize=1000,expireAfterWrite=60s\n\n# 2. \u589e\u52a0\u8fde\u63a5\u6c60\nspring:\n  webflux:\n    client:\n      pool:\n        max-connections: 500\n        pending-acquire-timeout: 10s\n\n# 3. \u542f\u7528\u6570\u636e\u5e93\u8fde\u63a5\u6c60\nspring:\n  datasource:\n    hikari:\n      maximum-pool-size: 20\n      minimum-idle: 5\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#8","title":"\u95ee\u9898 8: \u5185\u5b58\u6ea2\u51fa","text":"<p>\u75c7\u72b6: <pre><code>java.lang.OutOfMemoryError: Java heap space\n</code></pre></p> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># \u589e\u52a0 JVM \u5185\u5b58\njava -Xms2g -Xmx4g -jar app.jar\n\n# \u6216\u5728\u542f\u52a8\u811a\u672c\u4e2d\nexport JAVA_OPTS=\"-Xms2g -Xmx4g -XX:+UseG1GC\"\nmvn spring-boot:run\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#_6","title":"\u914d\u7f6e\u95ee\u9898","text":""},{"location":"how-to-guides/troubleshooting/#9","title":"\u95ee\u9898 9: \u914d\u7f6e\u672a\u751f\u6548","text":"<p>\u75c7\u72b6: \u4fee\u6539\u914d\u7f6e\u540e\u6ca1\u6709\u53d8\u5316</p> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># 1. \u786e\u8ba4\u4f7f\u7528\u4e86\u6b63\u786e\u7684 profile\nmvn spring-boot:run -Dspring.profiles.active=dev\n\n# 2. \u68c0\u67e5\u914d\u7f6e\u4f18\u5148\u7ea7\n# \u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e:\n# - \u547d\u4ee4\u884c\u53c2\u6570\n# - application-{profile}.yml\n# - application.yml\n# - \u9ed8\u8ba4\u503c\n\n# 3. \u67e5\u770b\u5b9e\u9645\u914d\u7f6e\ncurl http://localhost:8080/actuator/env\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#10","title":"\u95ee\u9898 10: \u65e5\u5fd7\u7ea7\u522b\u8bbe\u7f6e\u65e0\u6548","text":"<p>\u75c7\u72b6: \u770b\u4e0d\u5230 DEBUG \u65e5\u5fd7</p> <p>\u89e3\u51b3\u65b9\u6848:</p> <pre><code># application.yml\nlogging:\n  level:\n    root: INFO\n    com.nacos.mcp: DEBUG  # \u8bbe\u7f6e\u5305\u7ea7\u522b\n    org.springframework.ai: DEBUG\n  file:\n    name: logs/application.log\n  pattern:\n    console: \"%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n\"\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#_7","title":"\ud83d\udd0d \u8bca\u65ad\u5de5\u5177","text":""},{"location":"how-to-guides/troubleshooting/#1_1","title":"1. \u5065\u5eb7\u68c0\u67e5","text":"<pre><code># \u68c0\u67e5\u6240\u6709\u670d\u52a1\u5065\u5eb7\u72b6\u6001\ncurl http://localhost:8080/actuator/health\n\n# \u8be6\u7ec6\u5065\u5eb7\u4fe1\u606f\ncurl http://localhost:8080/actuator/health?show-details=always\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#2-metrics","title":"2. \u67e5\u770b Metrics","text":"<pre><code># JVM \u5185\u5b58\u4f7f\u7528\ncurl http://localhost:8080/actuator/metrics/jvm.memory.used\n\n# HTTP \u8bf7\u6c42\u7edf\u8ba1\ncurl http://localhost:8080/actuator/metrics/http.server.requests\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#3-dump","title":"3. \u7ebf\u7a0b Dump","text":"<pre><code># \u83b7\u53d6\u7ebf\u7a0b\u8f6c\u50a8\ncurl http://localhost:8080/actuator/threaddump &gt; threaddump.json\n\n# \u5206\u6790\u6b7b\u9501\njstack &lt;PID&gt; | grep -A 10 \"deadlock\"\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#4-dump","title":"4. \u5806 Dump","text":"<pre><code># \u751f\u6210\u5806\u8f6c\u50a8\njmap -dump:format=b,file=heap.bin &lt;PID&gt;\n\n# \u5206\u6790\njhat heap.bin\n# \u8bbf\u95ee http://localhost:7000\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#_8","title":"\ud83d\udcca \u65e5\u5fd7\u5206\u6790","text":""},{"location":"how-to-guides/troubleshooting/#_9","title":"\u5e38\u89c1\u9519\u8bef\u65e5\u5fd7","text":""},{"location":"how-to-guides/troubleshooting/#1-connection-timeout","title":"1. Connection Timeout","text":"<pre><code>ERROR - Connection timeout after 30000ms\n</code></pre> <p>\u89e3\u51b3: \u589e\u52a0\u8d85\u65f6\u65f6\u95f4\u6216\u68c0\u67e5\u7f51\u7edc</p>"},{"location":"how-to-guides/troubleshooting/#2-nullpointerexception","title":"2. NullPointerException","text":"<pre><code>ERROR - java.lang.NullPointerException at ...\n</code></pre> <p>\u89e3\u51b3: \u68c0\u67e5null\u68c0\u67e5\uff0c\u6dfb\u52a0@NonNull\u6ce8\u89e3</p>"},{"location":"how-to-guides/troubleshooting/#3-json-parse-error","title":"3. JSON Parse Error","text":"<pre><code>ERROR - Cannot deserialize value of type ...\n</code></pre> <p>\u89e3\u51b3: \u68c0\u67e5JSON\u683c\u5f0f\uff0c\u6dfb\u52a0@JsonProperty</p>"},{"location":"how-to-guides/troubleshooting/#_10","title":"\ud83c\udd98 \u83b7\u53d6\u5e2e\u52a9","text":"<p>\u5982\u679c\u95ee\u9898\u4ecd\u672a\u89e3\u51b3:</p>"},{"location":"how-to-guides/troubleshooting/#1_2","title":"1. \u6536\u96c6\u4fe1\u606f","text":"<pre><code># \u751f\u6210\u8bca\u65ad\u62a5\u544a\n./scripts/generate-diagnostic-report.sh\n\n# \u5305\u542b:\n# - application.log\n# - heap dump (\u5982\u679c)\n# - thread dump\n# - \u914d\u7f6e\u6587\u4ef6\n# - \u4f9d\u8d56\u7248\u672c\n</code></pre>"},{"location":"how-to-guides/troubleshooting/#2-issue","title":"2. \u521b\u5efa Issue","text":"<p>\u8bbf\u95ee: https://github.com/thefirstwind/mcp-router-sse-parent/issues/new</p> <p>\u5305\u542b\u4fe1\u606f: - [ ] \u95ee\u9898\u63cf\u8ff0 - [ ] \u9519\u8bef\u65e5\u5fd7 - [ ] \u73af\u5883\u4fe1\u606f (OS, Java\u7248\u672c) - [ ] \u91cd\u73b0\u6b65\u9aa4 - [ ] \u9884\u671f\u884c\u4e3a - [ ] \u5b9e\u9645\u884c\u4e3a</p>"},{"location":"how-to-guides/troubleshooting/#3","title":"3. \u793e\u533a\u652f\u6301","text":"<ul> <li>GitHub Discussions</li> <li>Stack Overflow</li> </ul>"},{"location":"how-to-guides/troubleshooting/#_11","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb</li> <li>\u914d\u7f6e\u53c2\u8003</li> <li>API \u53c2\u8003</li> <li>\u67b6\u6784\u8bbe\u8ba1</li> </ul> <p>\u627e\u5230\u89e3\u51b3\u65b9\u6848\u4e86\u5417\uff1f \u6b22\u8fce\u5206\u4eab\u60a8\u7684\u7ecf\u9a8c\uff01</p>"},{"location":"nacos/dataIdAnlysis/","title":"Nacos dataId \u751f\u6210\u89c4\u5219\u4e0e\u4e09\u7c7b\u914d\u7f6e\u5173\u7cfb\u7b80\u660e\u603b\u7ed3","text":""},{"location":"nacos/dataIdAnlysis/#1-dataid","title":"1. dataId \u751f\u6210\u89c4\u5219","text":"<ul> <li>mcp-server.json\uff1a<code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>\uff0cgroup: mcp-server</li> <li>mcp-tools.json\uff1a<code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-tools.json</code>\uff0cgroup: mcp-tools</li> <li>mcp-versions.json\uff1a<code>${uuid}-${\u670d\u52a1\u540d}-mcp-versions.json</code>\uff0cgroup: mcp-server-versions</li> </ul>"},{"location":"nacos/dataIdAnlysis/#2-dataid","title":"2. \u4e09\u7c7b dataId \u4e4b\u95f4\u7684\u5173\u7cfb","text":"<ul> <li>mcp-server.json\uff1a\u670d\u52a1\u4e3b\u914d\u7f6e\uff0c\u5305\u542b toolsDescriptionRef \u5b57\u6bb5\uff0c\u6307\u5411 mcp-tools.json</li> <li>mcp-tools.json\uff1a\u5de5\u5177\u8be6\u60c5\u548c\u5143\u6570\u636e\uff0c\u670d\u52a1\u4e0b\u6240\u6709\u5de5\u5177\u7684\u63cf\u8ff0</li> <li>mcp-versions.json\uff1a\u670d\u52a1\u6240\u6709\u7248\u672c\u53f7\u7d22\u5f15</li> </ul>"},{"location":"nacos/dataIdAnlysis/#3","title":"3. \u4e3b\u8981\u7528\u9014","text":"<ul> <li>mcp-server.json\uff1a\u6ce8\u518c/\u53d1\u73b0\u670d\u52a1\u4e3b\u4fe1\u606f</li> <li>mcp-tools.json\uff1a\u6ce8\u518c/\u53d1\u73b0\u670d\u52a1\u5de5\u5177\u80fd\u529b</li> <li>mcp-versions.json\uff1a\u670d\u52a1\u591a\u7248\u672c\u7ba1\u7406</li> </ul>"},{"location":"nacos/dataIdAnlysis/#4","title":"4. \u5173\u8054\u5173\u7cfb","text":"<ul> <li>\u6ce8\u518c\u670d\u52a1\u65f6\uff0c\u5148\u5199 mcp-server.json\uff0c\u518d\u5199 mcp-tools.json\uff0c\u4e8c\u8005\u901a\u8fc7 toolsDescriptionRef \u5173\u8054</li> <li>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7\u7d22\u5f15</li> </ul>"},{"location":"nacos/dataIdAnlysis/#5-dataid","title":"5. \u5178\u578b dataId \u793a\u4f8b","text":"<ul> <li>61f7b376-e25f-429c-82f4-78c234a45ad9-1.0.1-mcp-server.json</li> <li>61f7b376-e25f-429c-82f4-78c234a45ad9-1.0.1-mcp-tools.json</li> <li>61f7b376-e25f-429c-82f4-78c234a45ad9-mcp-versions.json </li> </ul> <p>\u6839\u636e spring-ai-alibaba-mcp \u5b98\u65b9\u5b9e\u73b0\u6e90\u7801\u5206\u6790\uff0c\u5173\u4e8e dataId \u7684\u751f\u6210\u903b\u8f91\u548c\u4e09\u7c7b\u914d\u7f6e\uff08mcp-server.json\u3001mcp-tools.json\u3001mcp-versions.json\uff09\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u7ed3\u8bba\u5982\u4e0b\uff1a</p>"},{"location":"nacos/dataIdAnlysis/#1-dataid_1","title":"1. dataId \u751f\u6210\u903b\u8f91","text":"<p>\u5728 <code>spring-ai-alibaba-mcp-nacos2</code> \u548c <code>spring-ai-alibaba-mcp-nacos</code> \u4e2d\uff0cdataId \u7684\u751f\u6210\u6709\u660e\u786e\u7684\u5e38\u91cf\u548c\u62fc\u63a5\u89c4\u5219\uff0c\u89c1 <code>McpNacosConstant</code>\uff1a</p> <pre><code>public static final String SERVER_CONFIG_SUFFIX = \"-mcp-server.json\";\npublic static final String TOOLS_CONFIG_SUFFIX = \"-mcp-tools.json\";\npublic static final String SERVER_GROUP = \"mcp-server\";\npublic static final String TOOLS_GROUP = \"mcp-tools\";\n</code></pre> <ul> <li> <p>mcp-server.json\uff1a   dataId = <code>${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>   group = <code>mcp-server</code></p> </li> <li> <p>mcp-tools.json\uff1a   dataId = <code>${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-tools.json</code>   group = <code>mcp-tools</code></p> </li> <li> <p>mcp-versions.json\uff1a   dataId = <code>${\u670d\u52a1\u540d}-mcp-versions.json</code>   group = <code>mcp-server-versions</code>\uff08\u6216\u7c7b\u4f3c\uff0c\u5177\u4f53 group \u9700\u67e5\u5e38\u91cf\uff09</p> </li> </ul> <p>\u6ce8\u610f\uff1a - dataId \u7684\u62fc\u63a5\u901a\u5e38\u662f\uff1a<code>\u670d\u52a1\u540d</code> + <code>-</code> + <code>\u7248\u672c\u53f7</code> + <code>-mcp-server.json</code>\uff08\u6216 tools/versions\uff09 - \u5176\u4e2d\u201c\u670d\u52a1\u540d\u201d\u4e00\u822c\u4e3a UUID \u6216\u552f\u4e00\u6807\u8bc6\uff0c\u7248\u672c\u53f7\u5982 1.0.1 - \u7248\u672c\u4fe1\u606f\uff08mcp-versions.json\uff09\u4e0d\u5e26\u7248\u672c\u53f7\uff0c\u8868\u793a\u8be5\u670d\u52a1\u6240\u6709\u7248\u672c\u7684\u6c47\u603b</p>"},{"location":"nacos/dataIdAnlysis/#2-dataid_1","title":"2. \u4e09\u7c7b dataId \u4e4b\u95f4\u7684\u5173\u7cfb","text":"<ul> <li> <p>mcp-server.json   \u5b58\u50a8\u5355\u4e2a\u670d\u52a1\u5b9e\u4f8b\u7684\u8be6\u7ec6\u914d\u7f6e\u4fe1\u606f\uff08\u5982 name\u3001version\u3001protocol\u3001remoteServerConfig\u3001toolsDescriptionRef \u7b49\uff09\uff0c\u662f\u670d\u52a1\u6ce8\u518c\u7684\u4e3b\u914d\u7f6e\u3002</p> </li> <li> <p>mcp-tools.json   \u5b58\u50a8\u8be5\u670d\u52a1\u4e0b\u6240\u6709\u5de5\u5177\uff08tools\uff09\u7684\u8be6\u7ec6\u63cf\u8ff0\u548c\u5143\u6570\u636e\uff08\u5982 toolsMeta\uff09\uff0c\u4e0e mcp-server.json \u901a\u8fc7 <code>toolsDescriptionRef</code> \u5b57\u6bb5\u5173\u8054\u3002</p> </li> <li> <p>mcp-versions.json   \u5b58\u50a8\u8be5\u670d\u52a1\u6240\u6709\u5df2\u6ce8\u518c\u7248\u672c\u7684\u6c47\u603b\u4fe1\u606f\uff0c\u4fbf\u4e8e\u7248\u672c\u7ba1\u7406\u548c\u53d1\u73b0\u3002</p> </li> </ul> <p>\u5173\u7cfb\u603b\u7ed3\uff1a - \u4e00\u4e2a\u670d\u52a1\u7684\u6ce8\u518c\u4f1a\u540c\u65f6\u751f\u6210 mcp-server.json \u548c mcp-tools.json\uff0c\u4e8c\u8005\u901a\u8fc7\u670d\u52a1\u540d+\u7248\u672c\u53f7\u7ed1\u5b9a\u3002 - mcp-server.json \u91cc\u7684 <code>toolsDescriptionRef</code> \u5b57\u6bb5\u6307\u5411\u5bf9\u5e94\u7684 mcp-tools.json\u3002 - mcp-versions.json \u4f5c\u4e3a\u670d\u52a1\u6240\u6709\u7248\u672c\u7684\u7d22\u5f15\u548c\u6c47\u603b\uff0c\u4e0d\u5e26\u5177\u4f53\u7248\u672c\u53f7\u3002</p>"},{"location":"nacos/dataIdAnlysis/#3_1","title":"3. \u4ee3\u7801\u793a\u4f8b\u4e0e\u5b98\u65b9\u5b9e\u73b0","text":"<p>\u4ee5 nacos2 \u7248\u672c\u4e3a\u4f8b\uff0c\u6ce8\u518c\u6d41\u7a0b\u89c1 <code>NacosMcpRegister.java</code>\uff1a</p> <pre><code>// \u53d1\u5e03 server \u914d\u7f6e\nthis.configService.publishConfig(\n    this.serverInfo.name() + McpNacosConstant.SERVER_CONFIG_SUFFIX, // dataId\n    McpNacosConstant.SERVER_GROUP,                                  // group\n    JsonUtils.serialize(mcpServerInfo));\n\n// \u53d1\u5e03 tools \u914d\u7f6e\nthis.configService.publishConfig(\n    this.serverInfo.name() + McpNacosConstant.TOOLS_CONFIG_SUFFIX,  // dataId\n    McpNacosConstant.TOOLS_GROUP,                                   // group\n    toolsConfigContent);\n</code></pre> <ul> <li>\u5176\u4e2d <code>this.serverInfo.name()</code> \u901a\u5e38\u4e3a <code>${uuid}-${version}</code>\uff0c\u5982 <code>61f7b376-e25f-429c-82f4-78c234a45ad9-1.0.1</code></li> <li>\u8fd9\u6837\u6700\u7ec8 dataId \u5982\uff1a <code>61f7b376-e25f-429c-82f4-78c234a45ad9-1.0.1-mcp-server.json</code> <code>61f7b376-e25f-429c-82f4-78c234a45ad9-1.0.1-mcp-tools.json</code> <code>61f7b376-e25f-429c-82f4-78c234a45ad9-mcp-versions.json</code></li> </ul>"},{"location":"nacos/dataIdAnlysis/#4_1","title":"4. \u4f60\u7684\u5b9e\u73b0\u95ee\u9898","text":"<p>\u4f60\u63d0\u5230\u7684\uff1a <pre><code>String dataId = serverInfo.getName() + \"-\" + version + McpNacosConstants.SERVER_CONFIG_SUFFIX;\n</code></pre> \u95ee\u9898\u5728\u4e8e\uff1a - serverInfo.getName() \u5df2\u7ecf\u5305\u542b\u4e86 uuid \u548c version\uff08\u5982 <code>61f7b376-e25f-429c-82f4-78c234a45ad9-1.0.1</code>\uff09\uff0c - \u518d\u62fc\u63a5\u4e00\u6b21 version \u4f1a\u5bfc\u81f4 dataId \u591a\u51fa\u4e00\u6bb5\u7248\u672c\u53f7\uff0c\u683c\u5f0f\u9519\u8bef\u3002</p> <p>\u6b63\u786e\u505a\u6cd5\uff1a - \u5982\u679c name \u5df2\u5305\u542b version\uff0c\u5219\u76f4\u63a5\uff1a <code>dataId = serverInfo.getName() + McpNacosConstants.SERVER_CONFIG_SUFFIX;</code> - \u5982\u679c name \u53ea\u5305\u542b uuid\uff0c\u5219\uff1a <code>dataId = serverInfo.getName() + \"-\" + version + McpNacosConstants.SERVER_CONFIG_SUFFIX;</code> - \u63a8\u8350\u7edf\u4e00 name \u683c\u5f0f\uff0c\u907f\u514d\u91cd\u590d\u62fc\u63a5\u3002</p>"},{"location":"nacos/dataIdAnlysis/#5","title":"5. \u603b\u7ed3","text":"<ul> <li>dataId \u751f\u6210\u89c4\u5219\uff1a<code>\u670d\u52a1\u540d[-\u7248\u672c\u53f7]-mcp-server.json</code>/<code>-mcp-tools.json</code>/<code>-mcp-versions.json</code></li> <li>mcp-server.json\u3001mcp-tools.json\u3001mcp-versions.json \u4e09\u8005\u5206\u522b\u5b58\u50a8\u670d\u52a1\u4e3b\u914d\u7f6e\u3001\u5de5\u5177\u914d\u7f6e\u3001\u7248\u672c\u7d22\u5f15</li> <li>mcp-server.json \u901a\u8fc7 toolsDescriptionRef \u5173\u8054 mcp-tools.json</li> <li>\u4f60\u7684 dataId \u62fc\u63a5\u8981\u907f\u514d\u91cd\u590d version\uff0c\u5efa\u8bae\u53c2\u8003\u5b98\u65b9 name \u8bbe\u8ba1</li> </ul> <p>\u5982\u9700\u8fdb\u4e00\u6b65\u5bf9\u6bd4\u5b57\u6bb5\u6216\u5b9e\u73b0\u7ec6\u8282\uff0c\u53ef\u6307\u5b9a\u5177\u4f53\u7c7b\u6216\u65b9\u6cd5\u7ee7\u7eed\u5206\u6790\u3002</p>"},{"location":"nacos/dataIdAnlysisDetail/","title":"Nacos dataId \u7ed3\u6784\u4e0e\u5173\u8054\u8be6\u7ec6\u5206\u6790","text":""},{"location":"nacos/dataIdAnlysisDetail/#1-mcp-serverjson","title":"1. mcp-server.json\uff08\u670d\u52a1\u4e3b\u914d\u7f6e\uff09","text":"<ul> <li>dataId: <code>${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code></li> <li>group: mcp-server</li> <li>\u4e3b\u8981\u7ed3\u6784\uff08McpServerInfo\uff09\uff1a</li> <li>name, version, protocol, description, enabled</li> <li>remoteServerConfig\uff08serviceRef: serviceName, groupName, namespaceId, exportPath\uff09</li> <li>toolsDescriptionRef\uff08\u6307\u5411 mcp-tools.json\uff09</li> <li>promptDescriptionRef, resourceDescriptionRef</li> </ul>"},{"location":"nacos/dataIdAnlysisDetail/#2-mcp-toolsjson","title":"2. mcp-tools.json\uff08\u5de5\u5177\u914d\u7f6e\uff09","text":"<ul> <li>dataId: <code>${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-tools.json</code></li> <li>group: mcp-tools</li> <li>\u4e3b\u8981\u7ed3\u6784\uff08McpToolsInfo/McpToolSpecification\uff09\uff1a</li> <li>tools: List\uff08name, description, inputSchema...\uff09 <li>toolsMeta: Map\uff08\u5982 enabled, labels, tags, region...\uff09"},{"location":"nacos/dataIdAnlysisDetail/#3-mcp-versionsjson","title":"3. mcp-versions.json\uff08\u7248\u672c\u7d22\u5f15\uff09","text":"<ul> <li>dataId: <code>${\u670d\u52a1\u540d}-mcp-versions.json</code></li> <li>group: mcp-server-versions</li> <li>\u4e3b\u8981\u7ed3\u6784\uff1a</li> <li>name: \u670d\u52a1\u540d</li> <li>versions: List\uff08\u6240\u6709\u5df2\u6ce8\u518c\u7248\u672c\u53f7\uff09"},{"location":"nacos/dataIdAnlysisDetail/#4","title":"4. \u5173\u8054\u5173\u7cfb\u4e0e\u6ce8\u518c/\u53d1\u73b0\u6d41\u7a0b","text":"<ul> <li>\u6ce8\u518c\u65f6\uff1a</li> <li>\u5199\u5165 mcp-server.json\uff08\u4e3b\u914d\u7f6e\uff0c\u542b toolsDescriptionRef\uff09</li> <li>\u5199\u5165 mcp-tools.json\uff08\u5de5\u5177\u914d\u7f6e\uff0c\u542b tools/toolsMeta\uff09</li> <li>\u66f4\u65b0 mcp-versions.json\uff08\u7248\u672c\u7d22\u5f15\uff09</li> <li>\u670d\u52a1\u53d1\u73b0\uff1a</li> <li>\u67e5 mcp-server.json \u83b7\u53d6\u4e3b\u4fe1\u606f\u548c toolsDescriptionRef</li> <li>\u67e5 mcp-tools.json \u83b7\u53d6\u5de5\u5177\u8be6\u60c5</li> <li>\u67e5 mcp-versions.json \u83b7\u53d6\u6240\u6709\u7248\u672c</li> </ul>"},{"location":"nacos/dataIdAnlysisDetail/#5","title":"5. \u7ed3\u6784\u5316\u793a\u610f\u56fe","text":"<pre><code>graph TD\n  A[mcp-versions.json&lt;br/&gt;\u670d\u52a1\u540d-versions] --&gt;|\u5305\u542b\u6240\u6709\u7248\u672c\u53f7| B[mcp-server.json&lt;br/&gt;\u670d\u52a1\u540d-\u7248\u672c-mcp-server.json]\n  B --&gt;|toolsDescriptionRef| C[mcp-tools.json&lt;br/&gt;\u670d\u52a1\u540d-\u7248\u672c-mcp-tools.json]\n  C --&gt;|tools/toolsMeta| D[\u5de5\u5177\u8be6\u60c5/\u5143\u6570\u636e]\n</code></pre>"},{"location":"nacos/dataIdAnlysisDetail/#6","title":"6. \u5173\u952e\u4ee3\u7801\u7247\u6bb5","text":"<pre><code>// \u53d1\u5e03 server \u914d\u7f6e\nconfigService.publishConfig(\n    serverName + \"-\" + version + \"-mcp-server.json\", \"mcp-server\", JsonUtils.serialize(mcpServerInfo));\n// \u53d1\u5e03 tools \u914d\u7f6e\nconfigService.publishConfig(\n    serverName + \"-\" + version + \"-mcp-tools.json\", \"mcp-tools\", JsonUtils.serialize(mcpToolsInfo));\n// \u66f4\u65b0 versions \u914d\u7f6e\nconfigService.publishConfig(\n    serverName + \"-mcp-versions.json\", \"mcp-server-versions\", JsonUtils.serialize(mcpServerVersions));\n</code></pre>"},{"location":"nacos/dataIdAnlysisDetail/#7","title":"7. \u603b\u7ed3","text":"<ul> <li>mcp-server.json \u901a\u8fc7 toolsDescriptionRef \u5173\u8054 mcp-tools.json</li> <li>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7\u7d22\u5f15</li> <li>\u4e09\u8005\u534f\u540c\u5b9e\u73b0\u6ce8\u518c\u3001\u53d1\u73b0\u3001\u5de5\u5177\u80fd\u529b\u3001\u7248\u672c\u7ba1\u7406\u7684\u5168\u94fe\u8def\u4e00\u81f4\u6027 </li> </ul> <p>\u4e0b\u9762\u8be6\u7ec6\u5206\u6790 spring-ai-alibaba-mcp \u5b98\u65b9 nacos \u4fa7\u4e09\u7c7b\u914d\u7f6e\uff08mcp-server.json\u3001mcp-tools.json\u3001mcp-versions.json\uff09\u7684\u5185\u90e8\u7ed3\u6784\u53ca\u5173\u8054\u5173\u7cfb\uff0c\u5e76\u7ed3\u5408\u6e90\u7801\u8bf4\u660e\u5b83\u4eec\u5982\u4f55\u534f\u540c\u5de5\u4f5c\u3002</p>"},{"location":"nacos/dataIdAnlysisDetail/#1-mcp-serverjson_1","title":"1. mcp-server.json\uff08\u670d\u52a1\u4e3b\u914d\u7f6e\uff09","text":"<p>dataId\uff1a<code>${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code> group\uff1a<code>mcp-server</code></p>"},{"location":"nacos/dataIdAnlysisDetail/#mcpserverinfo","title":"\u4e3b\u8981\u7ed3\u6784\uff08\u4ee5 McpServerInfo \u4e3a\u4f8b\uff09\uff1a","text":"<p><pre><code>public class McpServerInfo {\n    private String protocol;                // \u534f\u8bae\u7c7b\u578b\uff08\u5982 mcp-sse\u3001local\uff09\n    private String name;                    // \u670d\u52a1\u540d\uff08\u901a\u5e38\u5e26\u7248\u672c\u53f7\uff09\n    private String description;             // \u670d\u52a1\u63cf\u8ff0\n    private String version;                 // \u7248\u672c\u53f7\n    private Boolean enabled;                // \u662f\u5426\u542f\u7528\n    private RemoteServerConfigInfo remoteServerConfig; // \u8fdc\u7a0b\u670d\u52a1\u914d\u7f6e\n    private Map&lt;Object, Object&gt; localServerConfig;     // \u672c\u5730\u670d\u52a1\u914d\u7f6e\n    private String toolsDescriptionRef;     // \u5de5\u5177\u63cf\u8ff0\u5f15\u7528\uff08\u6307\u5411 mcp-tools.json \u7684 dataId\uff09\n    private String promptDescriptionRef;    // \u5176\u5b83\u63cf\u8ff0\u5f15\u7528\n    private String resourceDescriptionRef;  // \u5176\u5b83\u63cf\u8ff0\u5f15\u7528\n    // ... getter/setter\n}\n</code></pre> \u6838\u5fc3\u5b57\u6bb5\u8bf4\u660e\uff1a - <code>name</code>\u3001<code>version</code>\uff1a\u552f\u4e00\u6807\u8bc6\u670d\u52a1\u5b9e\u4f8b - <code>remoteServerConfig</code>\uff1a\u5305\u542b serviceRef\uff08serviceName\u3001groupName\u3001namespaceId\uff09\u3001exportPath \u7b49 - <code>toolsDescriptionRef</code>\uff1a\u6307\u5411\u672c\u670d\u52a1\u7684\u5de5\u5177\u914d\u7f6e dataId\uff08\u5373 mcp-tools.json\uff09</p>"},{"location":"nacos/dataIdAnlysisDetail/#2-mcp-toolsjson_1","title":"2. mcp-tools.json\uff08\u5de5\u5177\u914d\u7f6e\uff09","text":"<p>dataId\uff1a<code>${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-tools.json</code> group\uff1a<code>mcp-tools</code></p>"},{"location":"nacos/dataIdAnlysisDetail/#mcptoolsinfomcptoolspecification","title":"\u4e3b\u8981\u7ed3\u6784\uff08\u4ee5 McpToolsInfo/McpToolSpecification \u4e3a\u4f8b\uff09\uff1a","text":"<p><pre><code>public class McpToolsInfo {\n    private List&lt;McpSchema.Tool&gt; tools;     // \u5de5\u5177\u5217\u8868\n    private Map&lt;String, Object&gt; toolsMeta;  // \u5de5\u5177\u5143\u6570\u636e\uff08\u5982\u542f\u7528\u72b6\u6001\u3001\u6807\u7b7e\u7b49\uff09\n    // ... getter/setter\n}\n</code></pre> McpSchema.Tool \u7ed3\u6784\uff08\u7b80\u5316\uff09\uff1a <pre><code>public class Tool {\n    private String name;                    // \u5de5\u5177\u540d\n    private String description;             // \u5de5\u5177\u63cf\u8ff0\n    private Map&lt;String, Object&gt; inputSchema;// \u8f93\u5165\u53c2\u6570 schema\n    // ... \u5176\u5b83\u5b57\u6bb5\n}\n</code></pre> toolsMeta \u7ed3\u6784\u793a\u4f8b\uff1a <pre><code>{\n  \"toolA\": { \"enabled\": true, \"labels\": [\"tag1\"] },\n  \"toolB\": { \"enabled\": false }\n}\n</code></pre></p>"},{"location":"nacos/dataIdAnlysisDetail/#3-mcp-versionsjson_1","title":"3. mcp-versions.json\uff08\u7248\u672c\u7d22\u5f15\uff09","text":"<p>dataId\uff1a<code>${\u670d\u52a1\u540d}-mcp-versions.json</code> group\uff1a<code>mcp-server-versions</code>\uff08\u6216\u7c7b\u4f3c\uff09</p>"},{"location":"nacos/dataIdAnlysisDetail/#mcpserverversions","title":"\u4e3b\u8981\u7ed3\u6784\uff08\u4ee5 McpServerVersions \u4e3a\u4f8b\uff09\uff1a","text":"<p><pre><code>public class McpServerVersions {\n    private String name;                    // \u670d\u52a1\u540d\n    private List&lt;String&gt; versions;          // \u5df2\u6ce8\u518c\u7684\u6240\u6709\u7248\u672c\u53f7\n    // ... getter/setter\n}\n</code></pre> \u4f5c\u7528\uff1a - \u8bb0\u5f55\u8be5\u670d\u52a1\u6240\u6709\u5df2\u6ce8\u518c\u7684\u7248\u672c\uff0c\u4fbf\u4e8e\u53d1\u73b0\u548c\u7ba1\u7406\u3002</p>"},{"location":"nacos/dataIdAnlysisDetail/#4_1","title":"4. \u5173\u8054\u5173\u7cfb\u4e0e\u534f\u540c\u673a\u5236","text":""},{"location":"nacos/dataIdAnlysisDetail/#1","title":"1\uff09\u6ce8\u518c\u6d41\u7a0b","text":"<ul> <li>\u6ce8\u518c\u670d\u52a1\u65f6\uff0c\u5148\u5199\u5165 mcp-server.json\uff0c\u63cf\u8ff0\u670d\u52a1\u4e3b\u4fe1\u606f\u3002</li> <li>\u518d\u5199\u5165 mcp-tools.json\uff0c\u63cf\u8ff0\u8be5\u670d\u52a1\u4e0b\u6240\u6709\u5de5\u5177\u3002</li> <li>mcp-server.json \u7684 <code>toolsDescriptionRef</code> \u5b57\u6bb5\u6307\u5411 mcp-tools.json \u7684 dataId\u3002</li> <li>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7\u7d22\u5f15\u3002</li> </ul>"},{"location":"nacos/dataIdAnlysisDetail/#2","title":"2\uff09\u670d\u52a1\u53d1\u73b0\u4e0e\u5de5\u5177\u53d1\u73b0","text":"<ul> <li>\u67e5\u8be2\u670d\u52a1\u65f6\uff0c\u5148\u67e5 mcp-server.json\uff0c\u83b7\u53d6\u4e3b\u914d\u7f6e\u4fe1\u606f\u548c toolsDescriptionRef\u3002</li> <li>\u518d\u6839\u636e toolsDescriptionRef \u67e5 mcp-tools.json\uff0c\u83b7\u53d6\u5de5\u5177\u8be6\u60c5\u548c\u5143\u6570\u636e\u3002</li> <li>\u7248\u672c\u7ba1\u7406\u901a\u8fc7 mcp-versions.json \u5b9e\u73b0\u3002</li> </ul>"},{"location":"nacos/dataIdAnlysisDetail/#3","title":"3\uff09\u5143\u6570\u636e\u4e0e\u6269\u5c55","text":"<ul> <li>mcp-tools.json \u7684 toolsMeta \u652f\u6301\u6269\u5c55\uff08\u5982 labels\u3001env\u3001capabilities\u3001tags\u3001gray\u3001region \u7b49\uff09\uff0c\u53ef\u7075\u6d3b\u900f\u4f20\u3002</li> <li>mcp-server.json \u53ef\u901a\u8fc7 promptDescriptionRef\u3001resourceDescriptionRef \u7b49\u6269\u5c55\u66f4\u591a\u63cf\u8ff0\u3002</li> </ul>"},{"location":"nacos/dataIdAnlysisDetail/#5_1","title":"5. \u7ed3\u6784\u5316\u793a\u610f\u56fe","text":"<pre><code>graph TD\n  A[mcp-versions.json&lt;br/&gt;\u670d\u52a1\u540d-versions] --&gt;|\u5305\u542b\u6240\u6709\u7248\u672c\u53f7| B[mcp-server.json&lt;br/&gt;\u670d\u52a1\u540d-\u7248\u672c-mcp-server.json]\n  B --&gt;|toolsDescriptionRef| C[mcp-tools.json&lt;br/&gt;\u670d\u52a1\u540d-\u7248\u672c-mcp-tools.json]\n  C --&gt;|tools/toolsMeta| D[\u5de5\u5177\u8be6\u60c5/\u5143\u6570\u636e]\n</code></pre>"},{"location":"nacos/dataIdAnlysisDetail/#6_1","title":"6. \u4ee3\u7801\u7247\u6bb5\u4e3e\u4f8b","text":"<p>\u6ce8\u518c\u65f6\u5199\u5165\u914d\u7f6e\uff1a <pre><code>// 1. \u5199\u5165 mcp-server.json\nconfigService.publishConfig(\n    serverName + \"-\" + version + \"-mcp-server.json\", \"mcp-server\", JsonUtils.serialize(mcpServerInfo));\n\n// 2. \u5199\u5165 mcp-tools.json\nconfigService.publishConfig(\n    serverName + \"-\" + version + \"-mcp-tools.json\", \"mcp-tools\", JsonUtils.serialize(mcpToolsInfo));\n\n// 3. \u66f4\u65b0 mcp-versions.json\nconfigService.publishConfig(\n    serverName + \"-mcp-versions.json\", \"mcp-server-versions\", JsonUtils.serialize(mcpServerVersions));\n</code></pre></p>"},{"location":"nacos/dataIdAnlysisDetail/#7_1","title":"7. \u603b\u7ed3","text":"<ul> <li>mcp-server.json\uff1a\u670d\u52a1\u4e3b\u914d\u7f6e\uff0c\u5305\u542b toolsDescriptionRef \u6307\u5411\u5de5\u5177\u914d\u7f6e</li> <li>mcp-tools.json\uff1a\u5de5\u5177\u8be6\u60c5\u548c\u5143\u6570\u636e\uff0c\u652f\u6301\u7075\u6d3b\u6269\u5c55</li> <li>mcp-versions.json\uff1a\u670d\u52a1\u6240\u6709\u7248\u672c\u53f7\u7d22\u5f15</li> <li>\u4e09\u8005\u901a\u8fc7\u670d\u52a1\u540d\u3001\u7248\u672c\u53f7\u3001toolsDescriptionRef \u7b49\u5b57\u6bb5\u5f62\u6210\u5f3a\u5173\u8054\uff0c\u4fdd\u8bc1\u6ce8\u518c\u3001\u53d1\u73b0\u3001\u5de5\u5177\u80fd\u529b\u3001\u7248\u672c\u7ba1\u7406\u7684\u5168\u94fe\u8def\u4e00\u81f4\u6027</li> </ul> <p>\u5982\u9700\u5177\u4f53\u5b57\u6bb5\u5bf9\u6bd4\u3001\u5e8f\u5217\u5316\u6837\u4f8b\u6216\u67d0\u4e00\u7ed3\u6784\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u7ee7\u7eed\u544a\u77e5\uff01</p>"},{"location":"nacos/dataIdBody/","title":"dataIdBody","text":"<p>nacos\u6ce8\u518c\u914d\u7f6e</p> <ul> <li>mcp-server.json\uff1a<code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>\uff0cgroup: mcp-server</li> <li>mcp-tools.json\uff1a<code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-tools.json</code>\uff0cgroup: mcp-tools</li> <li>mcp-versions.json\uff1a<code>${uuid}-${\u670d\u52a1\u540d}-mcp-versions.json</code>\uff0cgroup: mcp-server-versions</li> </ul> <p>-- \u793a\u4f8b1  6eff2b4f-8c15-455e-86a0-302901241482-1.0.1-mcp-server.json \u5185\u5bb9 6eff2b4f-8c15-455e-86a0-302901241482-1.0.1-mcp-server.json</p> <p>-- \u793a\u4f8b2 6eff2b4f-8c15-455e-86a0-302901241482-mcp-versions.json \u5185\u5bb9 {\"id\":\"6eff2b4f-8c15-455e-86a0-302901241482\",\"name\":\"mcp-server-v2\",\"protocol\":\"mcp-sse\",\"frontProtocol\":\"mcp-sse\",\"description\":\"mcp-server-v2\",\"enabled\":true,\"capabilities\":[\"TOOL\"],\"latestPublishedVersion\":\"1.0.1\",\"versionDetails\":[{\"version\":\"1.0.1\",\"release_date\":\"2025-07-16T08:47:57Z\"}]}</p> <p>-- \u793a\u4f8b3 6eff2b4f-8c15-455e-86a0-302901241482-1.0.1-mcp-tools.json \u5185\u5bb9 {\"tools\":[{\"name\":\"deletePerson\",\"description\":\"Delete a person from the database\",\"inputSchema\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"integer\",\"format\":\"int64\",\"description\":\"Person's ID\"}},\"required\":[\"id\"],\"additionalProperties\":false}},{\"name\":\"getPersonById\",\"description\":\"Get a person by their ID\",\"inputSchema\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"integer\",\"format\":\"int64\",\"description\":\"Person's ID\"}},\"required\":[\"id\"],\"additionalProperties\":false}},{\"name\":\"getAllPersons\",\"description\":\"Get all persons from the database\",\"inputSchema\":{\"type\":\"object\",\"properties\":{},\"required\":[],\"additionalProperties\":false}},{\"name\":\"get_system_info\",\"description\":\"Get system information\",\"inputSchema\":{\"type\":\"object\",\"properties\":{},\"required\":[],\"additionalProperties\":false}},{\"name\":\"list_servers\",\"description\":\"List all registered servers\",\"inputSchema\":{\"type\":\"object\",\"properties\":{},\"required\":[],\"additionalProperties\":false}},{\"name\":\"addPerson\",\"description\":\"Add a new person to the database\",\"inputSchema\":{\"type\":\"object\",\"properties\":{\"firstName\":{\"type\":\"string\",\"description\":\"Person's first name\"},\"lastName\":{\"type\":\"string\",\"description\":\"Person's last name\"},\"age\":{\"type\":\"integer\",\"format\":\"int32\",\"description\":\"Person's age\"},\"nationality\":{\"type\":\"string\",\"description\":\"Person's nationality\"},\"gender\":{\"type\":\"string\",\"description\":\"Person's gender (MALE, FEMALE, OTHER)\"}},\"required\":[\"firstName\",\"lastName\",\"age\",\"nationality\",\"gender\"],\"additionalProperties\":false}}],\"toolsMeta\":{}}</p>"},{"location":"nacos/design01/","title":"Design01","text":"<p>\u6211\u6765\u5206\u6790 mcp-client\u3001mcp-router\u3001mcp-server-v2 \u7684\u7cfb\u7edf\u8c03\u7528\u94fe\u8def\u3002\u8ba9\u6211\u5148\u63a2\u7d22\u8fd9\u4e09\u4e2a\u7ec4\u4ef6\u7684\u67b6\u6784\u548c\u76f8\u4e92\u5173\u7cfb\u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u7ee7\u7eed\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u670d\u52a1\u95f4\u901a\u4fe1\u7684\u7ec6\u8282\uff0c\u7279\u522b\u662fJSON-RPC\u534f\u8bae\u548cSSE\u901a\u4fe1\u673a\u5236\u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u67e5\u770b\u4e00\u4e9b\u5173\u952e\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e86\u89e3\u7aef\u53e3\u548c\u8fde\u63a5\u4fe1\u606f\uff1a</p> <p>\u73b0\u5728\u6211\u6765\u521b\u5efa\u4e00\u4e2a\u8be6\u7ec6\u7684\u7cfb\u7edf\u8c03\u7528\u94fe\u8def\u5206\u6790\u62a5\u544a\uff1a \u670d\u52a1\u53d1\u73b0Nacos\u670d\u52a1\u6ce8\u518cNacos\u670d\u52a1\u53d1\u73b0\u5065\u5eb7\u68c0\u67e5\u901a\u4fe1\u534f\u8baeHTTP REST APImcp-client \u2192 mcp-routerSSE + JSON-RPC 2.0mcp-client \u2194 mcp-routerMCP\u534f\u8bae + SSEmcp-router \u2194 mcp-serversmcp-client\u7aef\u53e3:8071mcp-router\u7aef\u53e3:8051mcp-server-v2\u7aef\u53e3:8062mcp-server-v1\u7aef\u53e3:8061mcp-server-v3\u7aef\u53e3:8063Nacos\u6ce8\u518c\u4e2d\u5fc3\u7aef\u53e3:8848MySQL\u6570\u636e\u5e93\u7aef\u53e3:3306</p>"},{"location":"nacos/design01/#mcp","title":"MCP\u7cfb\u7edf\u8c03\u7528\u94fe\u8def\u5206\u6790\u62a5\u544a","text":""},{"location":"nacos/design01/#_1","title":"\u7cfb\u7edf\u67b6\u6784\u6982\u8ff0","text":"<p>\u8be5\u7cfb\u7edf\u662f\u4e00\u4e2a\u57fa\u4e8eMCP (Model Context Protocol) \u534f\u8bae\u7684\u5206\u5e03\u5f0f\u5fae\u670d\u52a1\u67b6\u6784\uff0c\u5305\u542b\u4e09\u4e2a\u6838\u5fc3\u7ec4\u4ef6\uff1a</p> <ul> <li>mcp-client (\u7aef\u53e3:8071) - \u5ba2\u6237\u7aef\u670d\u52a1</li> <li>mcp-router (\u7aef\u53e3:8051) - \u8def\u7531\u7f51\u5173\u670d\u52a1  </li> <li>mcp-server-v2 (\u7aef\u53e3:8062) - \u4e1a\u52a1\u670d\u52a1\u5668</li> </ul>"},{"location":"nacos/design01/#_2","title":"\u8be6\u7ec6\u8c03\u7528\u94fe\u8def\u5206\u6790","text":""},{"location":"nacos/design01/#1","title":"1. \u670d\u52a1\u6ce8\u518c\u4e0e\u53d1\u73b0\u673a\u5236","text":""},{"location":"nacos/design01/#11-nacos-8848","title":"1.1 Nacos\u670d\u52a1\u6ce8\u518c\u4e2d\u5fc3 (\u7aef\u53e3:8848)","text":"<ul> <li>\u6240\u6709\u670d\u52a1\u542f\u52a8\u65f6\u5411Nacos\u6ce8\u518c\u4e2d\u5fc3\u6ce8\u518c</li> <li>\u670d\u52a1\u540d\u79f0\u89c4\u8303\uff1a<code>{\u5e94\u7528\u540d}-mcp-service</code></li> <li>\u6ce8\u518c\u4fe1\u606f\u5305\u542b\uff1aIP\u5730\u5740\u3001\u7aef\u53e3\u3001\u5143\u6570\u636e\u3001\u5065\u5eb7\u72b6\u6001</li> </ul>"},{"location":"nacos/design01/#12","title":"1.2 \u670d\u52a1\u6ce8\u518c\u6d41\u7a0b","text":"<pre><code>mcp-server-v2\u542f\u52a8 \u2192 \u6ce8\u518c\u5230Nacos \u2192 \u670d\u52a1\u540d: mcp-server-v2-mcp-service\nmcp-router\u542f\u52a8 \u2192 \u6ce8\u518c\u5230Nacos \u2192 \u53d1\u73b0\u6240\u6709mcp-server\u670d\u52a1\nmcp-client\u542f\u52a8 \u2192 \u914d\u7f6emcp-router\u5730\u5740 \u2192 \u5efa\u7acb\u8fde\u63a5\n</code></pre>"},{"location":"nacos/design01/#2","title":"2. \u901a\u4fe1\u534f\u8bae\u6808","text":""},{"location":"nacos/design01/#21-mcp-client-mcp-router","title":"2.1 mcp-client \u2192 mcp-router","text":"<ul> <li>\u534f\u8bae: HTTP REST API + SSE (Server-Sent Events)</li> <li>\u7aef\u53e3: 8071 \u2192 8051</li> <li>\u6570\u636e\u683c\u5f0f: JSON</li> <li>\u4e3b\u8981\u63a5\u53e3:</li> <li><code>GET /mcp-client/api/v1/tools/list</code> - \u83b7\u53d6\u5de5\u5177\u5217\u8868</li> <li><code>POST /mcp-client/api/v1/tools/call</code> - \u8c03\u7528\u5de5\u5177</li> <li><code>GET /mcp/jsonrpc/sse</code> - \u5efa\u7acbSSE\u8fde\u63a5</li> </ul>"},{"location":"nacos/design01/#22-mcp-router-mcp-server-v2","title":"2.2 mcp-router \u2192 mcp-server-v2","text":"<ul> <li>\u534f\u8bae: MCP Protocol + SSE\u53cc\u5411\u901a\u4fe1</li> <li>\u7aef\u53e3: 8051 \u2192 8062</li> <li>\u6570\u636e\u683c\u5f0f: JSON-RPC 2.0</li> <li>\u901a\u4fe1\u65b9\u5f0f: \u5f02\u6b65\u54cd\u5e94\u5f0f\u7f16\u7a0b</li> </ul>"},{"location":"nacos/design01/#3","title":"3. \u5173\u952e\u8c03\u7528\u94fe\u8def\u8be6\u89e3","text":""},{"location":"nacos/design01/#31","title":"3.1 \u5de5\u5177\u5217\u8868\u67e5\u8be2\u94fe\u8def","text":"<pre><code>1. mcp-client\u53d1\u8d77\u8bf7\u6c42\n   GET /mcp-client/api/v1/tools/list\n\n2. McpClientController.listTools()\n   \u2193\n3. CustomMcpClient.listTools()\n   \u2193\n4. McpRouterService\u901a\u8fc7SSE\u8fde\u63a5\u53d1\u9001JSON-RPC\u8bf7\u6c42\n   {\"jsonrpc\":\"2.0\",\"method\":\"tools/list\",\"id\":\"xxx\"}\n   \u2193\n5. mcp-router\u63a5\u6536SSE\u6d88\u606f\n   McpSseController.handleMcpMessage()\n   \u2193\n6. McpJsonRpcController.processRequest()\n   \u2193\n7. McpServerServiceImpl.getAllTools()\n   \u2193\n8. \u901a\u8fc7McpAsyncClient\u8c03\u7528\u5404\u4e2amcp-server\n   \u2193\n9. mcp-server-v2\u8fd4\u56de\u5de5\u5177\u5217\u8868\n   PersonManagementTool: getAllPersons, addPerson, deletePerson\n   \u2193\n10. \u54cd\u5e94\u901a\u8fc7SSE\u8fd4\u56de\u7ed9mcp-client\n</code></pre>"},{"location":"nacos/design01/#32","title":"3.2 \u5de5\u5177\u8c03\u7528\u94fe\u8def","text":"<pre><code>1. mcp-client\u53d1\u8d77\u5de5\u5177\u8c03\u7528\n   POST /mcp-client/api/v1/tools/call\n   Body: {\"toolName\":\"getAllPersons\",\"arguments\":{}}\n\n2. McpClientController.callTool()\n   \u2193\n3. CustomMcpClient.callTool()\n   \u2193\n4. McpRouterService\u53d1\u9001JSON-RPC\u8bf7\u6c42\n   {\"jsonrpc\":\"2.0\",\"method\":\"tools/call\",\"params\":{\"name\":\"getAllPersons\",\"arguments\":{}},\"id\":\"xxx\"}\n   \u2193\n5. mcp-router\u8def\u7531\u5230\u5bf9\u5e94\u670d\u52a1\u5668\n   McpServerServiceImpl.callToolOnServer()\n   \u2193\n6. \u5efa\u7acb\u4e0emcp-server-v2\u7684SSE\u8fde\u63a5\n   GET /sse?sessionId=xxx\n   \u2193\n7. \u53d1\u9001MCP\u5de5\u5177\u8c03\u7528\u8bf7\u6c42\n   McpAsyncClient.callTool()\n   \u2193\n8. mcp-server-v2\u6267\u884c\u4e1a\u52a1\u903b\u8f91\n   PersonManagementTool.getAllPersons()\n   \u2193\n9. \u67e5\u8be2MySQL\u6570\u636e\u5e93\n   PersonRepository.findAll()\n   \u2193\n10. \u8fd4\u56de\u7ed3\u679c\u901a\u8fc7SSE\u94fe\u8def\u8fd4\u56de\n</code></pre>"},{"location":"nacos/design01/#4","title":"4. \u6570\u636e\u6d41\u8f6c\u683c\u5f0f","text":""},{"location":"nacos/design01/#41-json-rpc-20","title":"4.1 JSON-RPC 2.0\u8bf7\u6c42\u683c\u5f0f","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"getAllPersons\",\n    \"arguments\": {}\n  },\n  \"id\": \"request-1234\"\n}\n</code></pre>"},{"location":"nacos/design01/#42-json-rpc-20","title":"4.2 JSON-RPC 2.0\u54cd\u5e94\u683c\u5f0f","text":"<pre><code>{\n  \"jsonrpc\": \"2.0\",\n  \"result\": {\n    \"content\": [\n      {\"id\": 1, \"firstName\": \"John\", \"lastName\": \"Doe\", \"age\": 30}\n    ],\n    \"isError\": false\n  },\n  \"id\": \"request-1234\"\n}\n</code></pre>"},{"location":"nacos/design01/#5","title":"5. \u5173\u952e\u6280\u672f\u7279\u6027","text":""},{"location":"nacos/design01/#51","title":"5.1 \u54cd\u5e94\u5f0f\u7f16\u7a0b","text":"<ul> <li>\u4f7f\u7528Spring WebFlux\u548cReactor</li> <li>\u975e\u963b\u585eI/O\u5904\u7406</li> <li>\u80cc\u538b\u63a7\u5236\u548c\u6d41\u91cf\u7ba1\u7406</li> </ul>"},{"location":"nacos/design01/#52","title":"5.2 \u8fde\u63a5\u7ba1\u7406","text":"<ul> <li>SSE\u957f\u8fde\u63a5\u7ef4\u62a4</li> <li>\u8fde\u63a5\u6c60\u7ba1\u7406</li> <li>\u81ea\u52a8\u91cd\u8fde\u673a\u5236</li> <li>\u4f1a\u8bdd\u751f\u547d\u5468\u671f\u7ba1\u7406</li> </ul>"},{"location":"nacos/design01/#53","title":"5.3 \u9519\u8bef\u5904\u7406","text":"<ul> <li>\u7edf\u4e00\u5f02\u5e38\u5904\u7406</li> <li>\u8d85\u65f6\u63a7\u5236</li> <li>\u91cd\u8bd5\u673a\u5236</li> <li>\u4f18\u96c5\u964d\u7ea7</li> </ul>"},{"location":"nacos/design01/#6","title":"6. \u6027\u80fd\u4f18\u5316\u673a\u5236","text":""},{"location":"nacos/design01/#61","title":"6.1 \u7f13\u5b58\u7b56\u7565","text":"<ul> <li>\u5de5\u5177\u5217\u8868\u7f13\u5b58 (TTL: 300\u79d2)</li> <li>\u670d\u52a1\u53d1\u73b0\u7ed3\u679c\u7f13\u5b58</li> <li>\u8fde\u63a5\u590d\u7528</li> </ul>"},{"location":"nacos/design01/#62","title":"6.2 \u8d1f\u8f7d\u5747\u8861","text":"<ul> <li>Nacos\u670d\u52a1\u53d1\u73b0</li> <li>\u5065\u5eb7\u68c0\u67e5</li> <li>\u6545\u969c\u8f6c\u79fb</li> </ul>"},{"location":"nacos/design01/#7","title":"7. \u76d1\u63a7\u4e0e\u65e5\u5fd7","text":""},{"location":"nacos/design01/#71","title":"7.1 \u65e5\u5fd7\u7ea7\u522b\u914d\u7f6e","text":"<pre><code>logging:\n  level:\n    com.nacos.mcp: DEBUG\n    org.springframework.ai: DEBUG\n    root: INFO\n</code></pre>"},{"location":"nacos/design01/#72","title":"7.2 \u5065\u5eb7\u68c0\u67e5\u7aef\u70b9","text":"<ul> <li><code>/actuator/health</code> - \u670d\u52a1\u5065\u5eb7\u72b6\u6001</li> <li><code>/actuator/info</code> - \u670d\u52a1\u4fe1\u606f</li> </ul>"},{"location":"nacos/design01/#8","title":"8. \u5b89\u5168\u673a\u5236","text":""},{"location":"nacos/design01/#81-cors","title":"8.1 CORS\u914d\u7f6e","text":"<pre><code>cors:\n  allowed-origins: \"*\"\n  allowed-methods: GET,POST,PUT,DELETE,OPTIONS\n  allowed-headers: \"*\"\n</code></pre>"},{"location":"nacos/design01/#82","title":"8.2 \u8ba4\u8bc1\u6388\u6743","text":"<ul> <li>\u53ef\u9009\u7684authToken\u9a8c\u8bc1</li> <li>\u5ba2\u6237\u7aefID\u8bc6\u522b</li> <li>\u4f1a\u8bdd\u7ba1\u7406</li> </ul>"},{"location":"nacos/design01/#_3","title":"\u603b\u7ed3","text":"<p>\u8be5\u7cfb\u7edf\u91c7\u7528\u73b0\u4ee3\u5fae\u670d\u52a1\u67b6\u6784\u8bbe\u8ba1\uff0c\u901a\u8fc7MCP\u534f\u8bae\u5b9e\u73b0\u6807\u51c6\u5316\u7684\u5de5\u5177\u8c03\u7528\u63a5\u53e3\uff0c\u4f7f\u7528SSE\u5b9e\u73b0\u5b9e\u65f6\u53cc\u5411\u901a\u4fe1\uff0c\u901a\u8fc7Nacos\u5b9e\u73b0\u670d\u52a1\u53d1\u73b0\u548c\u914d\u7f6e\u7ba1\u7406\u3002\u6574\u4e2a\u8c03\u7528\u94fe\u8def\u5177\u6709\u9ad8\u53ef\u7528\u6027\u3001\u53ef\u6269\u5c55\u6027\u548c\u826f\u597d\u7684\u6027\u80fd\u7279\u5f81\u3002</p>"},{"location":"nacos/get_config_example/","title":"\u5982\u4f55\u83b7\u53d6 Nacos MCP \u914d\u7f6e\u7684\u5177\u4f53\u503c","text":""},{"location":"nacos/get_config_example/#_1","title":"\u914d\u7f6e\u6587\u4ef6\u540d\u793a\u4f8b","text":"<ul> <li><code>f457f161-5735-46b6-b901-d2fa8e03cb21-1.0.1-mcp-tools.json</code></li> <li><code>f457f161-5735-46b6-b901-d2fa8e03cb21-mcp-versions.json</code></li> <li><code>f457f161-5735-46b6-b901-d2fa8e03cb21-1.0.1-mcp-server.json</code></li> </ul>"},{"location":"nacos/get_config_example/#mcpconfigservice","title":"\u65b9\u6cd5\u4e00\uff1a\u4f7f\u7528 McpConfigService\uff08\u63a8\u8350\uff09","text":""},{"location":"nacos/get_config_example/#1-mcp-serverjson","title":"1. \u83b7\u53d6\u670d\u52a1\u5668\u914d\u7f6e (mcp-server.json)","text":"<pre><code>@Autowired\nprivate McpConfigService mcpConfigService;\n\n// \u4f7f\u7528 UUID \u548c\u7248\u672c\u53f7\nString uuid = \"f457f161-5735-46b6-b901-d2fa8e03cb21\";\nString version = \"1.0.1\";\n\nMono&lt;McpServerConfig&gt; serverConfigMono = mcpConfigService.getServerConfig(uuid, version);\nserverConfigMono.subscribe(config -&gt; {\n    if (config != null) {\n        System.out.println(\"Server Config: \" + config);\n    } else {\n        System.out.println(\"Config not found\");\n    }\n});\n</code></pre>"},{"location":"nacos/get_config_example/#2-mcp-toolsjson","title":"2. \u83b7\u53d6\u5de5\u5177\u914d\u7f6e (mcp-tools.json)","text":"<pre><code>Mono&lt;McpToolsConfig&gt; toolsConfigMono = mcpConfigService.getToolsConfig(uuid, version);\ntoolsConfigMono.subscribe(config -&gt; {\n    if (config != null) {\n        System.out.println(\"Tools Config: \" + config);\n        System.out.println(\"Tools: \" + config.getTools());\n    } else {\n        System.out.println(\"Config not found\");\n    }\n});\n</code></pre>"},{"location":"nacos/get_config_example/#3-mcp-versionsjson","title":"3. \u83b7\u53d6\u7248\u672c\u914d\u7f6e (mcp-versions.json)","text":"<pre><code>Mono&lt;McpVersionConfig&gt; versionConfigMono = mcpConfigService.getVersionConfig(uuid);\nversionConfigMono.subscribe(config -&gt; {\n    if (config != null) {\n        System.out.println(\"Version Config: \" + config);\n        System.out.println(\"Versions: \" + config.getVersions());\n    } else {\n        System.out.println(\"Config not found\");\n    }\n});\n</code></pre>"},{"location":"nacos/get_config_example/#configservice","title":"\u65b9\u6cd5\u4e8c\uff1a\u76f4\u63a5\u4f7f\u7528 ConfigService","text":""},{"location":"nacos/get_config_example/#1-configservice","title":"1. \u6ce8\u5165 ConfigService","text":"<pre><code>@Autowired\nprivate ConfigService configService;\n</code></pre>"},{"location":"nacos/get_config_example/#2-json","title":"2. \u83b7\u53d6\u539f\u59cb JSON \u5b57\u7b26\u4e32","text":"<pre><code>// \u83b7\u53d6 mcp-server.json\nString serverDataId = \"f457f161-5735-46b6-b901-d2fa8e03cb21-1.0.1-mcp-server.json\";\nString serverGroup = \"mcp-server\";\nString serverConfigJson = configService.getConfig(serverDataId, serverGroup, 3000);\nSystem.out.println(\"Server Config JSON: \" + serverConfigJson);\n\n// \u83b7\u53d6 mcp-tools.json\nString toolsDataId = \"f457f161-5735-46b6-b901-d2fa8e03cb21-1.0.1-mcp-tools.json\";\nString toolsGroup = \"mcp-tools\";\nString toolsConfigJson = configService.getConfig(toolsDataId, toolsGroup, 3000);\nSystem.out.println(\"Tools Config JSON: \" + toolsConfigJson);\n\n// \u83b7\u53d6 mcp-versions.json\nString versionsDataId = \"f457f161-5735-46b6-b901-d2fa8e03cb21-mcp-versions.json\";\nString versionsGroup = \"mcp-server-versions\";\nString versionsConfigJson = configService.getConfig(versionsDataId, versionsGroup, 3000);\nSystem.out.println(\"Versions Config JSON: \" + versionsConfigJson);\n</code></pre>"},{"location":"nacos/get_config_example/#3-json","title":"3. \u89e3\u6790 JSON \u4e3a\u5bf9\u8c61","text":"<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\n\n@Autowired\nprivate ObjectMapper objectMapper;\n\n// \u89e3\u6790\u670d\u52a1\u5668\u914d\u7f6e\nMcpServerConfig serverConfig = objectMapper.readValue(serverConfigJson, McpServerConfig.class);\n\n// \u89e3\u6790\u5de5\u5177\u914d\u7f6e\nMcpToolsConfig toolsConfig = objectMapper.readValue(toolsConfigJson, McpToolsConfig.class);\n\n// \u89e3\u6790\u7248\u672c\u914d\u7f6e\nMcpVersionConfig versionConfig = objectMapper.readValue(versionsConfigJson, McpVersionConfig.class);\n</code></pre>"},{"location":"nacos/get_config_example/#controller-api","title":"\u65b9\u6cd5\u4e09\uff1a\u5728 Controller \u4e2d\u63d0\u4f9b API \u63a5\u53e3","text":"<pre><code>@RestController\n@RequestMapping(\"/api/mcp/config\")\n@RequiredArgsConstructor\npublic class McpConfigController {\n\n    private final ConfigService configService;\n    private final ObjectMapper objectMapper;\n\n    /**\n     * \u6839\u636e dataId \u548c group \u83b7\u53d6\u914d\u7f6e\uff08\u539f\u59cb JSON\uff09\n     */\n    @GetMapping(\"/raw\")\n    public ResponseEntity&lt;String&gt; getConfigRaw(\n            @RequestParam String dataId,\n            @RequestParam String group) {\n        try {\n            String config = configService.getConfig(dataId, group, 3000);\n            if (config == null) {\n                return ResponseEntity.notFound().build();\n            }\n            return ResponseEntity.ok(config);\n        } catch (Exception e) {\n            return ResponseEntity.status(500).body(\"Error: \" + e.getMessage());\n        }\n    }\n\n    /**\n     * \u83b7\u53d6\u670d\u52a1\u5668\u914d\u7f6e\n     */\n    @GetMapping(\"/server\")\n    public Mono&lt;McpServerConfig&gt; getServerConfig(\n            @RequestParam String uuid,\n            @RequestParam(defaultValue = \"1.0.0\") String version) {\n        return mcpConfigService.getServerConfig(uuid, version);\n    }\n\n    /**\n     * \u83b7\u53d6\u5de5\u5177\u914d\u7f6e\n     */\n    @GetMapping(\"/tools\")\n    public Mono&lt;McpToolsConfig&gt; getToolsConfig(\n            @RequestParam String uuid,\n            @RequestParam(defaultValue = \"1.0.0\") String version) {\n        return mcpConfigService.getToolsConfig(uuid, version);\n    }\n\n    /**\n     * \u83b7\u53d6\u7248\u672c\u914d\u7f6e\n     */\n    @GetMapping(\"/versions\")\n    public Mono&lt;McpVersionConfig&gt; getVersionConfig(@RequestParam String uuid) {\n        return mcpConfigService.getVersionConfig(uuid);\n    }\n}\n</code></pre>"},{"location":"nacos/get_config_example/#_2","title":"\u4f7f\u7528\u793a\u4f8b","text":""},{"location":"nacos/get_config_example/#api","title":"\u901a\u8fc7 API \u8c03\u7528","text":"<pre><code># \u83b7\u53d6\u539f\u59cb JSON\ncurl \"http://localhost:8051/api/mcp/config/raw?dataId=f457f161-5735-46b6-b901-d2fa8e03cb21-1.0.1-mcp-server.json&amp;group=mcp-server\"\n\n# \u83b7\u53d6\u670d\u52a1\u5668\u914d\u7f6e\uff08\u89e3\u6790\u540e\u7684\u5bf9\u8c61\uff09\ncurl \"http://localhost:8051/api/mcp/config/server?uuid=f457f161-5735-46b6-b901-d2fa8e03cb21&amp;version=1.0.1\"\n\n# \u83b7\u53d6\u5de5\u5177\u914d\u7f6e\ncurl \"http://localhost:8051/api/mcp/config/tools?uuid=f457f161-5735-46b6-b901-d2fa8e03cb21&amp;version=1.0.1\"\n\n# \u83b7\u53d6\u7248\u672c\u914d\u7f6e\ncurl \"http://localhost:8051/api/mcp/config/versions?uuid=f457f161-5735-46b6-b901-d2fa8e03cb21\"\n</code></pre>"},{"location":"nacos/get_config_example/#_3","title":"\u914d\u7f6e\u7ec4\u5e38\u91cf","text":"<pre><code>import com.pajk.mcpbridge.core.config.McpNacosConstants;\n\n// \u4f7f\u7528\u5e38\u91cf\nString serverGroup = McpNacosConstants.SERVER_GROUP;        // \"mcp-server\"\nString toolsGroup = McpNacosConstants.TOOLS_GROUP;          // \"mcp-tools\"\nString versionsGroup = McpNacosConstants.VERSIONS_GROUP;     // \"mcp-server-versions\"\n</code></pre>"},{"location":"nacos/get_config_example/#_4","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u8d85\u65f6\u65f6\u95f4: <code>getConfig</code> \u65b9\u6cd5\u7684\u7b2c\u4e09\u4e2a\u53c2\u6570\u662f\u8d85\u65f6\u65f6\u95f4\uff08\u6beb\u79d2\uff09\uff0c\u9ed8\u8ba4\u4f7f\u7528 3000ms</li> <li>\u8fd4\u56de\u503c: <code>getConfig</code> \u53ef\u80fd\u8fd4\u56de <code>null</code>\uff0c\u9700\u8981\u505a\u7a7a\u503c\u68c0\u67e5</li> <li>\u5f02\u5e38\u5904\u7406: \u9700\u8981\u6355\u83b7 <code>NacosException</code> \u548c\u5176\u4ed6\u53ef\u80fd\u7684\u5f02\u5e38</li> <li>\u5f02\u6b65\u5904\u7406: <code>McpConfigService</code> \u7684\u65b9\u6cd5\u8fd4\u56de <code>Mono</code>\uff0c\u9700\u8981\u4f7f\u7528\u54cd\u5e94\u5f0f\u7f16\u7a0b\u65b9\u5f0f\u5904\u7406</li> </ol>"},{"location":"nacos/get_config_example/#_5","title":"\u5b8c\u6574\u793a\u4f8b\u4ee3\u7801","text":"<pre><code>@Service\n@RequiredArgsConstructor\npublic class ConfigExampleService {\n\n    private final ConfigService configService;\n    private final McpConfigService mcpConfigService;\n    private final ObjectMapper objectMapper;\n\n    public void example() {\n        String uuid = \"f457f161-5735-46b6-b901-d2fa8e03cb21\";\n        String version = \"1.0.1\";\n\n        // \u65b9\u6cd51: \u4f7f\u7528 McpConfigService\uff08\u63a8\u8350\uff09\n        mcpConfigService.getServerConfig(uuid, version)\n            .doOnNext(config -&gt; {\n                if (config != null) {\n                    System.out.println(\"Server ID: \" + config.getId());\n                    System.out.println(\"Server Name: \" + config.getName());\n                    System.out.println(\"Server Version: \" + config.getVersion());\n                }\n            })\n            .doOnError(error -&gt; System.err.println(\"Error: \" + error.getMessage()))\n            .subscribe();\n\n        // \u65b9\u6cd52: \u76f4\u63a5\u4f7f\u7528 ConfigService\n        try {\n            String dataId = uuid + \"-\" + version + \"-mcp-server.json\";\n            String group = \"mcp-server\";\n            String configJson = configService.getConfig(dataId, group, 3000);\n\n            if (configJson != null) {\n                McpServerConfig config = objectMapper.readValue(configJson, McpServerConfig.class);\n                System.out.println(\"Config: \" + config);\n            } else {\n                System.out.println(\"Config not found\");\n            }\n        } catch (Exception e) {\n            System.err.println(\"Error: \" + e.getMessage());\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>"},{"location":"nacos/mcp_nacos_analysis/","title":"MCP \u4e0e Nacos \u4ea4\u4e92\u5206\u6790","text":"<p>\u672c\u6587\u6863\u5206\u6790 <code>spring-ai-alibaba-mcp</code> \u6a21\u5757\u5982\u4f55\u4e0e Nacos \u8fdb\u884c\u4ea4\u4e92\uff0c\u5305\u62ec\u670d\u52a1\u6ce8\u518c\u548c\u914d\u7f6e\u76d1\u542c\u7684\u5173\u952e\u903b\u8f91\u3002</p>"},{"location":"nacos/mcp_nacos_analysis/#1","title":"1. \u6838\u5fc3\u4ea4\u4e92\u6a21\u5757","text":"<p><code>spring-ai-alibaba-mcp</code> \u7684\u6838\u5fc3 Nacos \u4ea4\u4e92\u903b\u8f91\u4f4d\u4e8e <code>spring-ai-alibaba-mcp-nacos</code> \u5b50\u6a21\u5757\u4e2d\u3002</p> <p>\u5173\u952e\u7c7b\u662f <code>com.alibaba.cloud.ai.mcp.nacos.registry.NacosMcpRegister</code>\u3002</p>"},{"location":"nacos/mcp_nacos_analysis/#2","title":"2. \u670d\u52a1\u6ce8\u518c","text":"<p>\u670d\u52a1\u6ce8\u518c\u662f\u6307 MCP \u670d\u52a1\u5b9e\u4f8b\u542f\u52a8\u540e\uff0c\u5c06\u5176\u81ea\u8eab\u7684\u4fe1\u606f\u53d1\u5e03\u5230 Nacos \u4e2d\uff0c\u4ee5\u4fbf\u5176\u4ed6\u670d\u52a1\uff08\u5982\u7f51\u5173\u6216\u5176\u4ed6 MCP \u5ba2\u6237\u7aef\uff09\u80fd\u591f\u53d1\u73b0\u548c\u8c03\u7528\u5b83\u3002</p>"},{"location":"nacos/mcp_nacos_analysis/#21","title":"2.1 \u6ce8\u518c\u65f6\u673a","text":"<ul> <li>\u6ce8\u518c\u8fc7\u7a0b\u7531 Spring \u7684 <code>WebServerInitializedEvent</code> \u4e8b\u4ef6\u89e6\u53d1\u3002\u8fd9\u610f\u5473\u7740\u5f53\u5185\u7f6e\u7684 Web \u670d\u52a1\u5668\uff08\u5982 Tomcat \u6216 Netty\uff09\u6210\u529f\u542f\u52a8\u540e\uff0c\u6ce8\u518c\u903b\u8f91\u5f00\u59cb\u6267\u884c\u3002</li> </ul>"},{"location":"nacos/mcp_nacos_analysis/#22-nacos","title":"2.2 \u6ce8\u518c\u5230 Nacos \u7684\u4fe1\u606f","text":"<p><code>NacosMcpRegister</code> \u7c7b\u8d1f\u8d23\u6536\u96c6\u5e76\u6ce8\u518c\u4ee5\u4e0b\u4e24\u7c7b\u6838\u5fc3\u4fe1\u606f\u5230 Nacos\uff1a</p>"},{"location":"nacos/mcp_nacos_analysis/#a-mcp-mcpserverbasicinfo","title":"a) MCP \u670d\u52a1\u57fa\u672c\u4fe1\u606f (<code>McpServerBasicInfo</code>)","text":"<p>\u8fd9\u90e8\u5206\u5b9a\u4e49\u4e86\u670d\u52a1\u5b9e\u4f8b\u7684\u57fa\u7840\u5c5e\u6027\uff1a</p> <ul> <li>\u670d\u52a1\u540d (Name): MCP \u670d\u52a1\u7684\u552f\u4e00\u6807\u8bc6\u7b26\u3002</li> <li>\u7248\u672c (Version): \u670d\u52a1\u7684\u7248\u672c\u53f7\uff0c\u7528\u4e8e\u7248\u672c\u63a7\u5236\u548c\u7070\u5ea6\u53d1\u5e03\u3002</li> <li>\u534f\u8bae (Protocol): \u901a\u4fe1\u534f\u8bae\uff0c\u901a\u5e38\u662f <code>sse</code> (Server-Sent Events)\uff0c\u8868\u793a\u8be5\u670d\u52a1\u901a\u8fc7 SSE \u534f\u8bae\u63d0\u4f9b\u80fd\u529b\u3002</li> <li>\u7aef\u70b9\u5f15\u7528 (Endpoint Reference): \u5982\u679c\u534f\u8bae\u662f <code>sse</code>\uff0c\u5219\u4f1a\u6ce8\u518c\u4e00\u4e2a Nacos \u670d\u52a1\u5b9e\u4f8b\u3002\u5176\u4ed6\u670d\u52a1\u53ef\u4ee5\u901a\u8fc7\u8fd9\u4e2a\u5b9e\u4f8b\u7684 <code>serviceName</code> \u548c <code>groupName</code> \u6765\u53d1\u73b0\u8be5 MCP \u670d\u52a1\u3002</li> <li>\u8fdc\u7a0b\u914d\u7f6e (Remote Server Config): \u5305\u542b SSE \u7684\u5177\u4f53\u66b4\u9732\u8def\u5f84\uff0c\u4f8b\u5982 <code>/mcp/v1/sse</code>\uff0c\u5ba2\u6237\u7aef\u4f1a\u8bbf\u95ee\u8fd9\u4e2a\u8def\u5f84\u6765\u5efa\u7acb\u8fde\u63a5\u3002</li> </ul>"},{"location":"nacos/mcp_nacos_analysis/#b-mcp-mcptoolspecification","title":"b) MCP \u5de5\u5177\u4fe1\u606f (<code>McpToolSpecification</code>)","text":"<p>\u8fd9\u90e8\u5206\u662f MCP \u7684\u6838\u5fc3\uff0c\u5b9a\u4e49\u4e86 AI Agent \u53ef\u4ee5\u8c03\u7528\u7684\u5177\u4f53\u80fd\u529b\uff08Tools/Functions\uff09\uff1a</p> <ul> <li>\u5de5\u5177\u5217\u8868 (Tools): \u6ce8\u518c\u8be5\u670d\u52a1\u63d0\u4f9b\u7684\u6240\u6709\u5de5\u5177\u3002</li> <li>\u5de5\u5177\u5b9a\u4e49 (Tool Definition): \u6bcf\u4e2a\u5de5\u5177\u90fd\u5305\u542b\uff1a</li> <li>\u540d\u79f0 (name): \u5de5\u5177\u7684\u552f\u4e00\u540d\u79f0\u3002</li> <li>\u63cf\u8ff0 (description): \u5bf9\u5de5\u5177\u529f\u80fd\u7684\u8be6\u7ec6\u63cf\u8ff0\uff0c\u8fd9\u4e2a\u63cf\u8ff0\u901a\u5e38\u4f1a\u5c55\u793a\u7ed9\u5927\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\uff0c\u5e2e\u52a9\u6a21\u578b\u7406\u89e3\u4f55\u65f6\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u8be5\u5de5\u5177\u3002</li> <li>\u8f93\u5165 Schema (inputSchema): \u4f7f\u7528 JSON Schema \u683c\u5f0f\u5b9a\u4e49\u4e86\u8c03\u7528\u8be5\u5de5\u5177\u9700\u8981\u4f20\u5165\u7684\u53c2\u6570\u7ed3\u6784\u3002</li> </ul>"},{"location":"nacos/mcp_nacos_analysis/#23","title":"2.3 \u6ce8\u518c\u6d41\u7a0b","text":"<ol> <li>\u5e94\u7528\u542f\u52a8\uff0cWeb \u670d\u52a1\u5668\u521d\u59cb\u5316\u5b8c\u6210\u3002</li> <li><code>NacosMcpRegister</code> \u76d1\u542c\u5230 <code>WebServerInitializedEvent</code> \u4e8b\u4ef6\u3002</li> <li>\u5b83\u4ece <code>McpAsyncServer</code> \u4e2d\u83b7\u53d6\u670d\u52a1\u7684\u57fa\u672c\u4fe1\u606f\u548c\u5de5\u5177\u5217\u8868\u3002</li> <li>\u5c06\u8fd9\u4e9b\u4fe1\u606f\u7ec4\u88c5\u6210 <code>McpServerBasicInfo</code> \u548c <code>McpToolSpecification</code> \u5bf9\u8c61\u3002</li> <li>\u8c03\u7528 <code>NacosMcpOperationService.createMcpServer()</code> \u65b9\u6cd5\uff0c\u901a\u8fc7 Nacos \u7684 API \u5c06\u8fd9\u4e9b\u4fe1\u606f\u6ce8\u518c\u5230 Nacos \u670d\u52a1\u5668\u3002</li> </ol>"},{"location":"nacos/mcp_nacos_analysis/#3-listener","title":"3. \u914d\u7f6e\u76d1\u542c (Listener)","text":"<p>\u9664\u4e86\u670d\u52a1\u6ce8\u518c\uff0c<code>spring-ai-alibaba-mcp</code> \u8fd8\u5229\u7528 Nacos \u7684\u52a8\u6001\u914d\u7f6e\u80fd\u529b\u6765\u76d1\u542c\u5e76\u70ed\u66f4\u65b0\u670d\u52a1\u7684\u5143\u6570\u636e\u3002</p>"},{"location":"nacos/mcp_nacos_analysis/#31","title":"3.1 \u76d1\u542c\u7684\u542f\u52a8","text":"<ul> <li>\u5728\u670d\u52a1\u6ce8\u518c\u6210\u529f\u540e\uff0c<code>NacosMcpRegister</code> \u4f1a\u7acb\u5373\u8c03\u7528 <code>nacosMcpOperationService.subscribeNacosMcpServer()</code> \u65b9\u6cd5\u3002</li> <li>\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u5411 Nacos \u8ba2\u9605 \u5f53\u524d\u670d\u52a1\u7248\u672c\uff08\u7531 <code>serverName</code> \u548c <code>version</code> \u7ec4\u5408\u7684\u552f\u4e00\u6807\u8bc6\uff09\u7684\u914d\u7f6e\u53d8\u66f4\u4e8b\u4ef6\u3002</li> </ul>"},{"location":"nacos/mcp_nacos_analysis/#32","title":"3.2 \u76d1\u542c\u7684\u5185\u5bb9","text":"<ul> <li>\u76d1\u542c\u7684\u6838\u5fc3\u76ee\u6807\u662f <code>McpTool</code> \u7684\u5143\u6570\u636e\u53d8\u66f4\u3002</li> <li>\u7279\u522b\u662f\uff0c\u5b83\u5141\u8bb8\u5728 Nacos \u63a7\u5236\u53f0\u4e2d\u76f4\u63a5\u4fee\u6539\u4e00\u4e2a\u5df2\u6ce8\u518c\u5de5\u5177\u7684 <code>description</code> \u6216\u5176\u4ed6\u5143\u6570\u636e\u3002</li> </ul>"},{"location":"nacos/mcp_nacos_analysis/#33","title":"3.3 \u76d1\u542c\u540e\u7684\u52a8\u4f5c\uff08\u70ed\u66f4\u65b0\uff09","text":"<ol> <li>\u5f53\u8fd0\u7ef4\u4eba\u5458\u6216\u5f00\u53d1\u8005\u5728 Nacos \u4e2d\u4fee\u6539\u4e86\u67d0\u4e2a Tool \u7684\u63cf\u8ff0\u5e76\u53d1\u5e03\u540e\uff0cNacos \u4f1a\u5c06\u53d8\u66f4\u901a\u77e5\u63a8\u9001\u7ed9\u6240\u6709\u8ba2\u9605\u4e86\u8be5\u914d\u7f6e\u7684 MCP \u670d\u52a1\u5b9e\u4f8b\u3002</li> <li><code>NacosMcpRegister</code> \u4e2d\u8bbe\u7f6e\u7684\u56de\u8c03\u51fd\u6570\u4f1a\u88ab\u89e6\u53d1\u3002</li> <li>\u56de\u8c03\u51fd\u6570\u4f1a\u6267\u884c <code>updateTools()</code> \u65b9\u6cd5\u3002</li> <li>\u8be5\u65b9\u6cd5\u4f1a\u7528\u4ece Nacos \u6536\u5230\u7684\u6700\u65b0\u5de5\u5177\u5b9a\u4e49\u6765\u66f4\u65b0\u670d\u52a1\u5185\u5b58\u4e2d\u7684 <code>McpTool</code> \u5b9e\u4f8b\u3002</li> </ol>"},{"location":"nacos/mcp_nacos_analysis/#34","title":"3.4 \u76d1\u542c\u7684\u4ef7\u503c","text":"<ul> <li>\u52a8\u6001\u4f18\u5316 Prompt: Tool \u7684 <code>description</code> \u5bf9 AI \u7684\u51b3\u7b56\u81f3\u5173\u91cd\u8981\u3002\u901a\u8fc7\u76d1\u542c\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e0d\u91cd\u542f\u670d\u52a1\u7684\u60c5\u51b5\u4e0b\uff0c\u52a8\u6001\u8c03\u6574\u548c\u4f18\u5316\u8fd9\u4e9b\u63cf\u8ff0\uff0c\u4ece\u800c\u5f15\u5bfc AI \u66f4\u51c6\u786e\u5730\u4f7f\u7528\u5de5\u5177\u3002</li> <li>\u8fd0\u884c\u65f6\u7ba1\u7406: \u5b9e\u73b0\u4e86\u5bf9 AI\u80fd\u529b\u7684\u8fd0\u884c\u65f6\u7ba1\u7406\uff0c\u63d0\u9ad8\u4e86\u7075\u6d3b\u6027\u548c\u8fd0\u7ef4\u6548\u7387\u3002</li> </ul>"},{"location":"nacos/mcp_nacos_analysis/#4","title":"4. \u603b\u7ed3","text":"<p><code>spring-ai-alibaba-mcp</code> \u6a21\u5757\u6df1\u5ea6\u6574\u5408\u4e86 Nacos\uff0c\u5b9e\u73b0\u4e86\u53cc\u91cd\u76ee\u7684\uff1a</p> <ol> <li>\u670d\u52a1\u6ce8\u518c\u4e0e\u53d1\u73b0: \u57fa\u4e8e Nacos \u7684\u6807\u51c6\u670d\u52a1\u6ce8\u518c\u673a\u5236\uff0c\u4f7f\u5f97 MCP \u670d\u52a1\u53ef\u4ee5\u88ab\u5176\u4ed6\u5fae\u670d\u52a1\uff08\u5982\u7f51\u5173\uff09\u53d1\u73b0\u3002</li> <li>AI \u80fd\u529b\u52a8\u6001\u7ba1\u7406: \u521b\u89c1\u6027\u5730\u5229\u7528 Nacos \u7684\u914d\u7f6e\u63a8\u9001\u80fd\u529b\uff0c\u5b9e\u73b0\u4e86\u4e00\u5957\u5bf9 AI Tools \u5143\u6570\u636e\u7684\u52a8\u6001\u3001\u5b9e\u65f6\u70ed\u66f4\u65b0\u673a\u5236\uff0c\u8fd9\u662f\u5176\u4e0e\u666e\u901a\u5fae\u670d\u52a1\u6ce8\u518c\u6700\u5927\u7684\u4e0d\u540c\u548c\u4eae\u70b9\u3002 </li> </ol>"},{"location":"nacos/nacos-alibaba-mcp/","title":"Spring AI Alibaba MCP Nacos \u793a\u4f8b\u9879\u76ee\u5206\u6790\u62a5\u544a","text":""},{"location":"nacos/nacos-alibaba-mcp/#_1","title":"\u9879\u76ee\u6982\u8ff0","text":"<p>\u8be5\u9879\u76ee\u662f Spring AI Alibaba \u7684 MCP (Model Context Protocol) \u4e0e Nacos \u96c6\u6210\u7684\u793a\u4f8b\u9879\u76ee\u3002MCP \u662f\u4e00\u79cd\u7528\u4e8e AI \u6a21\u578b\u4ea4\u4e92\u7684\u534f\u8bae\uff0c\u800c Nacos \u5219\u4f5c\u4e3a\u670d\u52a1\u6ce8\u518c\u4e0e\u914d\u7f6e\u4e2d\u5fc3\u3002</p>"},{"location":"nacos/nacos-alibaba-mcp/#_2","title":"\u9879\u76ee\u7ed3\u6784\u5206\u6790","text":"<p>\u9879\u76ee\u4f4d\u4e8e GitHub \u4ed3\u5e93 springaialibaba/spring-ai-alibaba-examples \u4e2d\uff0c\u662f Spring AI Alibaba \u793a\u4f8b\u7684\u4e00\u90e8\u5206\u3002</p>"},{"location":"nacos/nacos-alibaba-mcp/#nacos","title":"Nacos \u6ce8\u518c\u914d\u7f6e\u5206\u6790","text":"<p>\u6839\u636e Nacos-register.md \u6587\u4ef6\uff0cMCP \u670d\u52a1\u5668\u9879\u76ee\u540d\u79f0\u4e3a <code>webflux-mcp-server</code>\uff0c\u9700\u8981\u5728 Nacos \u7684\u914d\u7f6e\u7ba1\u7406\u4e2d\u6dfb\u52a0\u4e24\u4e2a\u5173\u952e\u914d\u7f6e\uff1a</p>"},{"location":"nacos/nacos-alibaba-mcp/#1-webflux-mcp-server-mcp-serverjson","title":"1. webflux-mcp-server-mcp-server.json \u914d\u7f6e","text":"<p>\u6b64\u914d\u7f6e\u5b9a\u4e49\u4e86 MCP \u670d\u52a1\u5668\u7684\u57fa\u672c\u4fe1\u606f\uff1a - \u4f7f\u7528 <code>mcp-sse</code> \u534f\u8bae - \u670d\u52a1\u540d\u79f0\u4e3a <code>webflux-mcp-server</code> - \u7248\u672c\u4e3a <code>1.0.0</code> - \u670d\u52a1\u5df2\u542f\u7528 - \u8fdc\u7a0b\u670d\u52a1\u5668\u914d\u7f6e\u6307\u5411 Nacos \u4e2d\u7684\u670d\u52a1 <code>webflux-mcp-server-mcp-service</code> - \u5bfc\u51fa\u8def\u5f84\u4e3a <code>/sse</code> - \u5f15\u7528\u5de5\u5177\u63cf\u8ff0\u6587\u4ef6 <code>webflux-mcp-server-mcp-tools.json</code></p>"},{"location":"nacos/nacos-alibaba-mcp/#2-webflux-mcp-server-mcp-toolsjson","title":"2. webflux-mcp-server-mcp-tools.json \u914d\u7f6e","text":"<p>\u6b64\u914d\u7f6e\u5b9a\u4e49\u4e86 MCP \u670d\u52a1\u5668\u63d0\u4f9b\u7684\u5de5\u5177\uff1a - \u63d0\u4f9b\u540d\u4e3a <code>getCityTimeMethod</code> \u7684\u5de5\u5177 - \u8be5\u5de5\u5177\u7528\u4e8e\u83b7\u53d6\u6307\u5b9a\u57ce\u5e02\u7684\u65f6\u95f4 - \u8f93\u5165\u53c2\u6570\u4e3a\u65f6\u533a ID\uff08\u5982 <code>Asia/Shanghai</code>\uff09 - \u5de5\u5177\u5df2\u542f\u7528</p>"},{"location":"nacos/nacos-alibaba-mcp/#3-nacos","title":"3. Nacos \u670d\u52a1\u7ba1\u7406\u914d\u7f6e","text":"<p>\u5728 Nacos \u7684\u670d\u52a1\u7ba1\u7406\u4e2d\uff0c\u9700\u8981\u914d\u7f6e\u4ee5\u4e0b\u5143\u6570\u636e\uff1a - \u7ec4\u540d\uff1a<code>mcp-server</code> - \u5143\u6570\u636e\uff1a   - <code>server.md5=dd15549b91f46c6f68f7d381ec5e0760</code>\uff08\u4e0e\u670d\u52a1\u5668\u914d\u7f6e\u7684 MD5 \u4e00\u81f4\uff09   - <code>tools.names=getCityTimeMethod</code>\uff08\u58f0\u660e\u53ef\u7528\u5de5\u5177\uff09</p>"},{"location":"nacos/nacos-alibaba-mcp/#_3","title":"\u4e0e\u5f53\u524d\u9879\u76ee\u7684\u5173\u8054","text":"<p>\u7ed3\u5408\u6211\u4eec\u4e4b\u524d\u4fee\u590d\u7684 <code>mcp-server-v2</code> \u9879\u76ee\uff0c\u53ef\u4ee5\u770b\u51fa\uff1a</p> <ol> <li>\u6211\u4eec\u7684 <code>mcp-server-v2</code> \u9879\u76ee\u4f7f\u7528\u4e86\u7c7b\u4f3c\u7684\u67b6\u6784\uff0c\u901a\u8fc7 Nacos \u8fdb\u884c\u670d\u52a1\u6ce8\u518c</li> <li>\u5728 <code>NacosRegistrationConfig</code> \u4e2d\uff0c\u6211\u4eec\u914d\u7f6e\u4e86\u5143\u6570\u636e\uff0c\u5305\u62ec\u5de5\u5177\u540d\u79f0\u5217\u8868 <code>tools.names</code></li> <li>\u6211\u4eec\u7684\u9879\u76ee\u540c\u6837\u4f7f\u7528\u4e86 SSE (Server-Sent Events) \u7aef\u70b9 <code>/sse</code> \u6765\u5b9e\u73b0 MCP \u534f\u8bae</li> </ol>"},{"location":"nacos/nacos-alibaba-mcp/#_4","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li> <p>Nacos-register.md \u6587\u4ef6\u4e2d\u63d0\u5230 \"nacos\u7684 mcpServerManagement\u4e3a\u7a7a\uff0c\u4e0d\u77e5\u9053\u914d\u7f6e\u65b9\u6cd5\"\uff0c\u8fd9\u53ef\u80fd\u662f\u4e00\u4e2a\u9700\u8981\u8fdb\u4e00\u6b65\u63a2\u7d22\u7684\u70b9\u3002</p> </li> <li> <p>\u5728\u6211\u4eec\u7684 <code>mcp-server-v2</code> \u9879\u76ee\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u6210\u529f\u914d\u7f6e\u4e86\uff1a</p> </li> <li>NacosConfig \u63d0\u4f9b NamingService Bean</li> <li>NacosRegistrationConfig \u5904\u7406\u670d\u52a1\u6ce8\u518c</li> <li> <p>\u5e94\u7528\u914d\u7f6e\u4e2d\u5305\u542b\u4e86\u5fc5\u8981\u7684 Nacos \u76f8\u5173\u914d\u7f6e</p> </li> <li> <p>\u6211\u4eec\u7684\u9879\u76ee\u4e0e\u793a\u4f8b\u9879\u76ee\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8e\u5de5\u5177\u5b9e\u73b0\u548c\u5177\u4f53\u914d\u7f6e\u7ec6\u8282\uff0c\u4f46\u6574\u4f53\u67b6\u6784\u548c\u6ce8\u518c\u903b\u8f91\u662f\u76f8\u4f3c\u7684\u3002</p> </li> </ol>"},{"location":"nacos/nacos-alibaba-mcp/#_5","title":"\u7ed3\u8bba","text":"<p>\u901a\u8fc7\u5206\u6790 Spring AI Alibaba MCP Nacos \u793a\u4f8b\u9879\u76ee\u548c\u6211\u4eec\u7684 <code>mcp-server-v2</code> \u9879\u76ee\uff0c\u6211\u4eec\u5df2\u7ecf\u6210\u529f\u5b9e\u73b0\u4e86 MCP \u670d\u52a1\u5668\u4e0e Nacos \u7684\u96c6\u6210\u3002\u6211\u4eec\u7684\u670d\u52a1\u73b0\u5728\u80fd\u591f\u6b63\u786e\u6ce8\u518c\u5230 Nacos\uff0c\u5e76\u901a\u8fc7 SSE \u7aef\u70b9\u63d0\u4f9b MCP \u670d\u52a1\u3002</p> <p>\u5982\u679c\u9700\u8981\u8fdb\u4e00\u6b65\u5b8c\u5584\uff0c\u53ef\u4ee5\u53c2\u8003\u793a\u4f8b\u9879\u76ee\u4e2d\u7684 <code>webflux-mcp-server-mcp-server.json</code> \u548c <code>webflux-mcp-server-mcp-tools.json</code> \u914d\u7f6e\uff0c\u5728 Nacos \u4e2d\u6dfb\u52a0\u76f8\u5e94\u7684\u914d\u7f6e\u9879\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u7ba1\u7406\u548c\u53d1\u73b0 MCP \u670d\u52a1\u53ca\u5176\u5de5\u5177\u3002</p>"},{"location":"nacos/nacos-api-code-anlysis-p1/","title":"Nacos API \u8be6\u7ec6\u8c03\u7528\u94fe\u8def\u5206\u6790\u62a5\u544a","text":""},{"location":"nacos/nacos-api-code-anlysis-p1/#1","title":"1. \u5e94\u7528\u542f\u52a8\u6d41\u7a0b\u5206\u6790","text":""},{"location":"nacos/nacos-api-code-anlysis-p1/#11","title":"1.1 \u542f\u52a8\u8c03\u7528\u6808","text":"<p>\u4ece\u9519\u8bef\u65e5\u5fd7\u4e2d\u53ef\u4ee5\u770b\u5230\u5b8c\u6574\u7684\u542f\u52a8\u8c03\u7528\u6808\uff1a</p> <pre><code>McpServerV2Application.main()\n  \u2514\u2500 SpringApplication.run()\n    \u2514\u2500 SpringApplication.refreshContext()\n      \u2514\u2500 AbstractApplicationContext.refresh()\n        \u2514\u2500 ReactiveWebServerApplicationContext.refresh()\n          \u2514\u2500 AbstractApplicationContext.finishBeanFactoryInitialization()\n            \u2514\u2500 DefaultListableBeanFactory.preInstantiateSingletons()\n              \u2514\u2500 AbstractBeanFactory.getBean()\n                \u2514\u2500 AbstractAutowireCapableBeanFactory.createBean()\n                  \u2514\u2500 NacosMcpRegistryAutoConfiguration.nacosMcpRegisterAsync()\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p1/#12","title":"1.2 \u5173\u952e\u7ec4\u4ef6\u521d\u59cb\u5316\u987a\u5e8f","text":"<ol> <li>Spring Context \u521d\u59cb\u5316</li> <li>Bean \u5de5\u5382\u521d\u59cb\u5316</li> <li>Nacos \u914d\u7f6e\u52a0\u8f7d</li> <li>\u6570\u636e\u5e93\u521d\u59cb\u5316</li> <li>WebFlux \u670d\u52a1\u5668\u542f\u52a8</li> <li>Nacos \u670d\u52a1\u6ce8\u518c</li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p1/#2","title":"2. \u9519\u8bef\u5206\u6790\u4e0e\u89e3\u51b3\u65b9\u6848","text":""},{"location":"nacos/nacos-api-code-anlysis-p1/#21-dns","title":"2.1 DNS \u89e3\u6790\u9519\u8bef","text":"<pre><code>ERROR [single-1] i.n.r.d.DnsServerAddressStreamProviders : \nUnable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p1/#_1","title":"\u89e3\u51b3\u65b9\u6848\uff1a","text":"<ol> <li> <p>\u6dfb\u52a0 MacOS DNS \u89e3\u6790\u4f9d\u8d56 <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.netty&lt;/groupId&gt;\n    &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n    &lt;classifier&gt;osx-x86_64&lt;/classifier&gt;\n    &lt;version&gt;4.1.107.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre></p> </li> <li> <p>\u914d\u7f6e JVM \u53c2\u6570 <pre><code>-Dio.netty.resolver.dns.macos.removeInvalidServers=true\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p1/#22","title":"2.2 \u7aef\u53e3\u5360\u7528\u95ee\u9898","text":"<pre><code>Web server failed to start. Port 8061 was already in use.\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p1/#_2","title":"\u89e3\u51b3\u65b9\u6848\uff1a","text":"<ol> <li> <p>\u4fee\u6539\u5e94\u7528\u914d\u7f6e <pre><code>server:\n  port: 8062  # \u66f4\u6539\u4e3a\u672a\u88ab\u5360\u7528\u7684\u7aef\u53e3\nspring:\n  webflux:\n    base-path: /mcp-server-v2\n</code></pre></p> </li> <li> <p>\u4f7f\u7528\u968f\u673a\u7aef\u53e3 <pre><code>server:\n  port: 0  # \u4f7f\u7528\u968f\u673a\u53ef\u7528\u7aef\u53e3\n</code></pre></p> </li> <li> <p>\u7aef\u53e3\u68c0\u67e5\u548c\u91ca\u653e\u811a\u672c <pre><code>#!/bin/bash\nPORT=8061\nPID=$(lsof -ti :$PORT)\nif [ ! -z \\\"$PID\\\" ]; then\n    echo \\\"Port $PORT is in use by process $PID\\\"\n    kill -9 $PID\n    echo \\\"Process $PID has been terminated\\\"\nfi\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p1/#23","title":"2.3 \u6570\u636e\u5e93\u521d\u59cb\u5316\u95ee\u9898","text":"<p>\u4ece\u65e5\u5fd7\u53ef\u4ee5\u770b\u5230\u6570\u636e\u5e93\u521d\u59cb\u5316\u8fc7\u7a0b\uff1a</p> <pre><code>DEBUG [actor-tcp-nio-2] o.s.r2dbc.connection.init.ScriptUtils : \nExecuting SQL script from class path resource [schema.sql]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p1/#_3","title":"\u4f18\u5316\u5efa\u8bae\uff1a","text":"<ol> <li> <p>\u6570\u636e\u5e93\u914d\u7f6e <pre><code>spring:\n  r2dbc:\n    url: r2dbc:mysql://localhost:3306/mcp_db\n    username: root\n    password: root\n    pool:\n      initial-size: 5\n      max-size: 20\n      max-idle-time: 30m\n</code></pre></p> </li> <li> <p>\u6570\u636e\u5e93\u521d\u59cb\u5316\u63a7\u5236 <pre><code>spring:\n  sql:\n    init:\n      mode: always\n      schema-locations: classpath:schema.sql\n      data-locations: classpath:data.sql\n      continue-on-error: false\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p1/#3","title":"3. \u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406","text":""},{"location":"nacos/nacos-api-code-anlysis-p1/#31","title":"3.1 \u4f18\u96c5\u5173\u95ed\u5b9e\u73b0","text":"<p>\u4ece\u65e5\u5fd7\u4e2d\u53ef\u4ee5\u770b\u5230\u7cfb\u7edf\u5173\u95ed\u65f6\u7684\u7ec4\u4ef6\u9500\u6bc1\u987a\u5e8f\uff1a</p> <ol> <li> <p>HttpClient \u9500\u6bc1 <pre><code>[HttpClientBeanHolder] Start destroying common HttpClient\n[HttpClientBeanHolder] Completed destruction of HttpClient\n</code></pre></p> </li> <li> <p>\u7ebf\u7a0b\u6c60\u5173\u95ed <pre><code>[ThreadPoolManager] Start destroying ThreadPool\n[ThreadPoolManager] Completed destruction of ThreadPool\n</code></pre></p> </li> <li> <p>\u6d88\u606f\u53d1\u5e03\u8005\u5173\u95ed <pre><code>[NotifyCenter] Start destroying Publisher\n[NotifyCenter] Completed destruction of Publisher\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p1/#_4","title":"\u5b9e\u73b0\u4ee3\u7801\uff1a","text":"<pre><code>@Configuration\npublic class GracefulShutdownConfig {\n\n    @Bean\n    public GracefulShutdown gracefulShutdown(\n            NacosMcpProperties properties,\n            NamingService namingService) {\n        return new GracefulShutdown(properties, namingService);\n    }\n}\n\npublic class GracefulShutdown {\n    private final NacosMcpProperties properties;\n    private final NamingService namingService;\n\n    @PreDestroy\n    public void onShutdown() {\n        // 1. \u4ece Nacos \u6ce8\u9500\u670d\u52a1\n        try {\n            namingService.deregisterInstance(\n                properties.getServiceName(),\n                properties.getGroup(),\n                properties.getIp(),\n                properties.getPort()\n            );\n        } catch (NacosException e) {\n            log.error(\\\"Failed to deregister service\\\", e);\n        }\n\n        // 2. \u7b49\u5f85\u5f53\u524d\u8bf7\u6c42\u5904\u7406\u5b8c\u6210\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n        }\n\n        // 3. \u5173\u95ed\u7ebf\u7a0b\u6c60\n        ThreadPoolManager.shutdown();\n\n        // 4. \u5173\u95ed HTTP \u5ba2\u6237\u7aef\n        HttpClientBeanHolder.shutdown();\n\n        // 5. \u5173\u95ed\u6d88\u606f\u53d1\u5e03\u8005\n        NotifyCenter.shutdown();\n    }\n}\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p1/#4","title":"4. \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":""},{"location":"nacos/nacos-api-code-anlysis-p1/#41","title":"4.1 \u8fde\u63a5\u6c60\u914d\u7f6e","text":"<ol> <li> <p>HTTP \u5ba2\u6237\u7aef\u8fde\u63a5\u6c60 <pre><code>@Configuration\npublic class HttpClientConfig {\n    @Bean\n    public HttpClient httpClient() {\n        return HttpClient.create()\n            .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\n            .doOnConnected(conn -&gt; conn\n                .addHandlerLast(new ReadTimeoutHandler(5))\n                .addHandlerLast(new WriteTimeoutHandler(5)))\n            .responseTimeout(Duration.ofSeconds(5));\n    }\n}\n</code></pre></p> </li> <li> <p>\u7ebf\u7a0b\u6c60\u914d\u7f6e <pre><code>@Configuration\npublic class ThreadPoolConfig {\n    @Bean\n    public ThreadPoolExecutor mcpThreadPool() {\n        return new ThreadPoolExecutor(\n            10,                     // \u6838\u5fc3\u7ebf\u7a0b\u6570\n            20,                     // \u6700\u5927\u7ebf\u7a0b\u6570\n            60L,                    // \u7a7a\u95f2\u7ebf\u7a0b\u5b58\u6d3b\u65f6\u95f4\n            TimeUnit.SECONDS,       // \u65f6\u95f4\u5355\u4f4d\n            new LinkedBlockingQueue&lt;&gt;(1000),  // \u5de5\u4f5c\u961f\u5217\n            new ThreadFactoryBuilder()\n                .setNameFormat(\\\"mcp-pool-%d\\\")\n                .build(),           // \u7ebf\u7a0b\u5de5\u5382\n            new ThreadPoolExecutor.CallerRunsPolicy()  // \u62d2\u7edd\u7b56\u7565\n        );\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p1/#42","title":"4.2 \u7f13\u5b58\u7b56\u7565","text":"<ol> <li> <p>\u672c\u5730\u7f13\u5b58\u914d\u7f6e <pre><code>@Configuration\npublic class CacheConfig {\n    @Bean\n    public Cache&lt;String, Object&gt; mcpCache() {\n        return Caffeine.newBuilder()\n            .maximumSize(10_000)\n            .expireAfterWrite(5, TimeUnit.MINUTES)\n            .recordStats()\n            .build();\n    }\n}\n</code></pre></p> </li> <li> <p>\u7f13\u5b58\u4f7f\u7528\u793a\u4f8b <pre><code>@Service\npublic class McpCacheService {\n    private final Cache&lt;String, Object&gt; cache;\n\n    public Object getWithCache(String key, Supplier&lt;Object&gt; loader) {\n        return cache.get(key, k -&gt; loader.get());\n    }\n\n    public void invalidate(String key) {\n        cache.invalidate(key);\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p1/#5","title":"5. \u76d1\u63a7\u4e0e\u544a\u8b66","text":""},{"location":"nacos/nacos-api-code-anlysis-p1/#51","title":"5.1 \u5065\u5eb7\u68c0\u67e5\u7aef\u70b9","text":"<pre><code>@Component\npublic class McpHealthIndicator implements HealthIndicator {\n    @Override\n    public Health health() {\n        try {\n            // \u68c0\u67e5 Nacos \u8fde\u63a5\n            boolean nacosHealth = checkNacosHealth();\n            // \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\n            boolean dbHealth = checkDatabaseHealth();\n            // \u68c0\u67e5\u7ebf\u7a0b\u6c60\u72b6\u6001\n            boolean threadPoolHealth = checkThreadPoolHealth();\n\n            if (nacosHealth &amp;&amp; dbHealth &amp;&amp; threadPoolHealth) {\n                return Health.up().build();\n            }\n            return Health.down()\n                .withDetail(\\\"nacos\\\", nacosHealth)\n                .withDetail(\\\"database\\\", dbHealth)\n                .withDetail(\\\"threadPool\\\", threadPoolHealth)\n                .build();\n        } catch (Exception e) {\n            return Health.down(e).build();\n        }\n    }\n}\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p1/#52","title":"5.2 \u6307\u6807\u6536\u96c6","text":"<pre><code>@Configuration\npublic class MetricsConfig {\n    @Bean\n    public MeterRegistry meterRegistry() {\n        return new SimpleMeterRegistry();\n    }\n\n    @Bean\n    public McpMetrics mcpMetrics(MeterRegistry registry) {\n        return new McpMetrics(registry);\n    }\n}\n\n@Component\npublic class McpMetrics {\n    private final Counter registrationCounter;\n    private final Timer configFetchTimer;\n    private final Gauge threadPoolActiveThreads;\n\n    public McpMetrics(MeterRegistry registry) {\n        this.registrationCounter = Counter\n            .builder(\\\"mcp.service.registration\\\")\n            .description(\\\"Number of service registrations\\\")\n            .register(registry);\n\n        this.configFetchTimer = Timer\n            .builder(\\\"mcp.config.fetch\\\")\n            .description(\\\"Time taken to fetch configuration\\\")\n            .register(registry);\n\n        this.threadPoolActiveThreads = Gauge\n            .builder(\\\"mcp.threadpool.active\\\", threadPool, \n                ThreadPoolExecutor::getActiveCount)\n            .description(\\\"Number of active threads\\\")\n            .register(registry);\n    }\n}\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p1/#6","title":"6. \u6700\u4f73\u5b9e\u8df5\u5efa\u8bae","text":"<ol> <li>\u914d\u7f6e\u7ba1\u7406</li> <li>\u4f7f\u7528\u914d\u7f6e\u4e2d\u5fc3\u7ba1\u7406\u914d\u7f6e</li> <li>\u5b9e\u73b0\u914d\u7f6e\u70ed\u66f4\u65b0</li> <li> <p>\u6dfb\u52a0\u914d\u7f6e\u9a8c\u8bc1</p> </li> <li> <p>\u9519\u8bef\u5904\u7406</p> </li> <li>\u5b9e\u73b0\u7edf\u4e00\u7684\u5f02\u5e38\u5904\u7406</li> <li>\u6dfb\u52a0\u91cd\u8bd5\u673a\u5236</li> <li> <p>\u5b9e\u73b0\u670d\u52a1\u964d\u7ea7</p> </li> <li> <p>\u6027\u80fd\u4f18\u5316</p> </li> <li>\u4f7f\u7528\u8fde\u63a5\u6c60</li> <li>\u5b9e\u73b0\u672c\u5730\u7f13\u5b58</li> <li> <p>\u4f18\u5316\u7ebf\u7a0b\u6c60\u914d\u7f6e</p> </li> <li> <p>\u76d1\u63a7\u544a\u8b66</p> </li> <li>\u6dfb\u52a0\u5065\u5eb7\u68c0\u67e5</li> <li>\u6536\u96c6\u5173\u952e\u6307\u6807</li> <li>\u5b9e\u73b0\u544a\u8b66\u673a\u5236\"}}</li> </ol> <p>\u6211\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a\u8be6\u7ec6\u7684\u5206\u6790\u62a5\u544a\uff0c\u5305\u542b\u4ee5\u4e0b\u4e3b\u8981\u5185\u5bb9\uff1a</p> <ol> <li>\u5e94\u7528\u542f\u52a8\u6d41\u7a0b\u5206\u6790</li> <li>\u5b8c\u6574\u7684\u8c03\u7528\u6808</li> <li> <p>\u7ec4\u4ef6\u521d\u59cb\u5316\u987a\u5e8f</p> </li> <li> <p>\u9519\u8bef\u5206\u6790\u4e0e\u89e3\u51b3\u65b9\u6848</p> </li> <li>DNS \u89e3\u6790\u9519\u8bef</li> <li>\u7aef\u53e3\u5360\u7528\u95ee\u9898</li> <li> <p>\u6570\u636e\u5e93\u521d\u59cb\u5316\u95ee\u9898</p> </li> <li> <p>\u7ec4\u4ef6\u751f\u547d\u5468\u671f\u7ba1\u7406</p> </li> <li>\u4f18\u96c5\u5173\u95ed\u5b9e\u73b0</li> <li> <p>\u7ec4\u4ef6\u9500\u6bc1\u987a\u5e8f</p> </li> <li> <p>\u6027\u80fd\u4f18\u5316\u5efa\u8bae</p> </li> <li>\u8fde\u63a5\u6c60\u914d\u7f6e</li> <li> <p>\u7f13\u5b58\u7b56\u7565</p> </li> <li> <p>\u76d1\u63a7\u4e0e\u544a\u8b66</p> </li> <li>\u5065\u5eb7\u68c0\u67e5\u7aef\u70b9</li> <li> <p>\u6307\u6807\u6536\u96c6</p> </li> <li> <p>\u6700\u4f73\u5b9e\u8df5\u5efa\u8bae</p> </li> </ol> <p>\u9700\u8981\u6211\u8be6\u7ec6\u89e3\u91ca\u4efb\u4f55\u7279\u5b9a\u90e8\u5206\u5417\uff1f</p>"},{"location":"nacos/nacos-api-code-anlysis-p2/","title":"Nacos api code anlysis p2","text":"<p>Nacos API \u8c03\u7528\u94fe\u8def\u5206\u6790\u62a5\u544a</p>"},{"location":"nacos/nacos-api-code-anlysis-p2/#8","title":"8. \u5e94\u7528\u542f\u52a8\u6d41\u7a0b\u5206\u6790","text":""},{"location":"nacos/nacos-api-code-anlysis-p2/#81","title":"8.1 \u542f\u52a8\u987a\u5e8f","text":"<pre><code>graph TD\n    A[McpServerV2Application.main] --&gt; B[SpringApplication.run]\n    B --&gt; C[ReactiveWebServerApplicationContext.refresh]\n    C --&gt; D[AbstractApplicationContext.refresh]\n    D --&gt; E[finishBeanFactoryInitialization]\n    E --&gt; F[NacosMcpRegistryAutoConfiguration]\n    F --&gt; G[NacosMcpRegister]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p2/#82-bean","title":"8.2 Bean \u521d\u59cb\u5316\u987a\u5e8f","text":"<ol> <li>Spring Context \u521d\u59cb\u5316 <pre><code>// AbstractApplicationContext.refresh() \u6d41\u7a0b\n1. prepareRefresh()\n2. obtainFreshBeanFactory()\n3. prepareBeanFactory()\n4. postProcessBeanFactory()\n5. invokeBeanFactoryPostProcessors()\n6. registerBeanPostProcessors()\n7. initMessageSource()\n8. initApplicationEventMulticaster()\n9. onRefresh()\n10. registerListeners()\n11. finishBeanFactoryInitialization()\n12. finishRefresh()\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p2/#83","title":"8.3 \u5173\u952e\u7ec4\u4ef6\u521d\u59cb\u5316","text":"<ol> <li> <p>WebFlux SSE \u670d\u52a1\u5668\u521d\u59cb\u5316 <pre><code>@Component\npublic class WebFluxSseServerTransportProvider implements ServerTransportProvider {\n    private final Map&lt;String, SseEmitter&gt; activeSessions = new ConcurrentHashMap&lt;&gt;();\n\n    @PostConstruct\n    public void init() {\n        // \u521d\u59cb\u5316 SSE \u670d\u52a1\u5668\u914d\u7f6e\n    }\n\n    public void handleConnection(ServerHttpRequest request, ServerHttpResponse response) {\n        // \u5904\u7406 SSE \u8fde\u63a5\n    }\n}\n</code></pre></p> </li> <li> <p>\u6570\u636e\u5e93\u521d\u59cb\u5316 <pre><code>// schema.sql \u6267\u884c\nCREATE TABLE IF NOT EXISTS person (\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\n    first_name VARCHAR(50) NOT NULL,\n    last_name VARCHAR(50) NOT NULL,\n    age INTEGER NOT NULL,\n    nationality VARCHAR(50) NOT NULL,\n    gender VARCHAR(10) NOT NULL\n);\n\n// data.sql \u6267\u884c\nINSERT INTO person (first_name, last_name, age, nationality, gender) VALUES\n    ('John', 'Doe', 30, 'American', 'MALE'),\n    // ... \u5176\u4ed6\u6570\u636e ...\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p2/#9","title":"9. \u9519\u8bef\u5904\u7406\u4e0e\u8d44\u6e90\u91ca\u653e","text":""},{"location":"nacos/nacos-api-code-anlysis-p2/#91","title":"9.1 \u4f18\u96c5\u5173\u95ed\u6d41\u7a0b","text":"<pre><code>graph TD\n    A[\u5e94\u7528\u5173\u95ed\u89e6\u53d1] --&gt; B[WebFluxSseServerTransportProvider.shutdown]\n    B --&gt; C[HttpClientBeanHolder.destroy]\n    C --&gt; D[ThreadPoolManager.destroy]\n    D --&gt; E[NotifyCenter.destroy]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p2/#92","title":"9.2 \u8d44\u6e90\u91ca\u653e\u987a\u5e8f","text":"<ol> <li> <p>SSE \u4f1a\u8bdd\u6e05\u7406 <pre><code>public class WebFluxSseServerTransportProvider {\n    public void shutdown() {\n        log.debug(\\\"Initiating graceful shutdown with {} active sessions\\\", \n                 activeSessions.size());\n        activeSessions.values().forEach(SseEmitter::complete);\n        activeSessions.clear();\n    }\n}\n</code></pre></p> </li> <li> <p>HTTP \u5ba2\u6237\u7aef\u9500\u6bc1 <pre><code>public class HttpClientBeanHolder {\n    public void destroy() {\n        log.info(\\\"[HttpClientBeanHolder] Start destroying common HttpClient\\\");\n        // \u5173\u95ed\u6240\u6709 HTTP \u8fde\u63a5\n        log.info(\\\"[HttpClientBeanHolder] Completed destruction of HttpClient\\\");\n    }\n}\n</code></pre></p> </li> <li> <p>\u7ebf\u7a0b\u6c60\u7ba1\u7406 <pre><code>public class ThreadPoolManager {\n    public void destroy() {\n        log.info(\\\"[ThreadPoolManager] Start destroying ThreadPool\\\");\n        // \u5173\u95ed\u6240\u6709\u7ebf\u7a0b\u6c60\n        log.info(\\\"[ThreadPoolManager] Completed destruction of ThreadPool\\\");\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p2/#93","title":"9.3 \u5e38\u89c1\u9519\u8bef\u5904\u7406","text":"<ol> <li> <p>\u7aef\u53e3\u5360\u7528\u5904\u7406 <pre><code>@Component\npublic class PortInUseHandler {\n    @EventListener(ApplicationFailedEvent.class)\n    public void handlePortInUse(ApplicationFailedEvent event) {\n        Throwable exception = event.getException();\n        if (isPortInUseException(exception)) {\n            log.error(\\\"Port {} is already in use. Please configure a different port.\\\",\n                      getPort(exception));\n            // \u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u5907\u7528\u7aef\u53e3\n            tryAlternativePort();\n        }\n    }\n}\n</code></pre></p> </li> <li> <p>\u7f51\u7edc\u5f02\u5e38\u5904\u7406 <pre><code>@Component\npublic class NetworkExceptionHandler {\n    @Retryable(maxAttempts = 3, backoff = @Backoff(delay = 1000))\n    public void handleNetworkException(NetworkException exception) {\n        log.warn(\\\"Network error occurred: {}, retrying...\\\", exception.getMessage());\n        // \u91cd\u8bd5\u903b\u8f91\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p2/#10","title":"10. \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":""},{"location":"nacos/nacos-api-code-anlysis-p2/#101","title":"10.1 \u8fde\u63a5\u6c60\u4f18\u5316","text":"<ol> <li>HTTP \u5ba2\u6237\u7aef\u8fde\u63a5\u6c60\u914d\u7f6e <pre><code>@Configuration\npublic class HttpClientConfig {\n    @Bean\n    public HttpClient httpClient() {\n        return HttpClient.create()\n            .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\n            .doOnConnected(conn -&gt; conn\n                .addHandlerLast(new ReadTimeoutHandler(5))\n                .addHandlerLast(new WriteTimeoutHandler(5)))\n            .responseTimeout(Duration.ofSeconds(5));\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p2/#102","title":"10.2 \u7ebf\u7a0b\u6c60\u4f18\u5316","text":"<ol> <li>\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u6c60\u914d\u7f6e <pre><code>@Configuration\npublic class ThreadPoolConfig {\n    @Bean\n    public ThreadPoolExecutor customThreadPool() {\n        return new ThreadPoolExecutor(\n            10, // \u6838\u5fc3\u7ebf\u7a0b\u6570\n            20, // \u6700\u5927\u7ebf\u7a0b\u6570\n            60L, // \u7a7a\u95f2\u7ebf\u7a0b\u5b58\u6d3b\u65f6\u95f4\n            TimeUnit.SECONDS,\n            new LinkedBlockingQueue&lt;&gt;(1000), // \u5de5\u4f5c\u961f\u5217\n            new ThreadFactoryBuilder().setNameFormat(\\\"mcp-pool-%d\\\").build(),\n            new ThreadPoolExecutor.CallerRunsPolicy() // \u62d2\u7edd\u7b56\u7565\n        );\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p2/#103","title":"10.3 \u7f13\u5b58\u4f18\u5316","text":"<ol> <li>\u672c\u5730\u7f13\u5b58\u914d\u7f6e <pre><code>@Configuration\npublic class CacheConfig {\n    @Bean\n    public Cache&lt;String, Instance&gt; instanceCache() {\n        return Caffeine.newBuilder()\n            .expireAfterWrite(Duration.ofMinutes(5))\n            .maximumSize(1000)\n            .build();\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p2/#11","title":"11. \u76d1\u63a7\u4e0e\u544a\u8b66","text":""},{"location":"nacos/nacos-api-code-anlysis-p2/#111","title":"11.1 \u5065\u5eb7\u68c0\u67e5\u6307\u6807","text":"<ol> <li>\u670d\u52a1\u5065\u5eb7\u72b6\u6001\u76d1\u63a7 <pre><code>@Component\npublic class McpHealthIndicator implements HealthIndicator {\n    @Override\n    public Health health() {\n        return Health.up()\n            .withDetail(\\\"activeConnections\\\", getActiveConnections())\n            .withDetail(\\\"memoryUsage\\\", getMemoryUsage())\n            .withDetail(\\\"diskSpace\\\", getDiskSpaceUsage())\n            .build();\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p2/#112","title":"11.2 \u6027\u80fd\u6307\u6807\u6536\u96c6","text":"<ol> <li> <p>Micrometer \u6307\u6807\u6536\u96c6 ```java @Component public class McpMetrics {     private final MeterRegistry registry;</p> <p>public void recordRequestLatency(String endpoint, long latency) {     registry.timer(\\\"mcp.request.latency\\\",          \\\"endpoint\\\", endpoint).record(latency, TimeUnit.MILLISECONDS); }</p> <p>public void incrementErrorCount(String errorType) {     registry.counter(\\\"mcp.errors\\\",          \\\"type\\\", errorType).increment(); } } ```\"}}</p> </li> </ol> <p>\u6211\u5df2\u7ecf\u4e3a\u8c03\u7528\u94fe\u8def\u5206\u6790\u62a5\u544a\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u65b0\u7684\u7ae0\u8282\uff1a</p> <ol> <li>\u5e94\u7528\u542f\u52a8\u6d41\u7a0b\u5206\u6790</li> <li>\u8be6\u7ec6\u7684\u542f\u52a8\u987a\u5e8f</li> <li>Bean \u521d\u59cb\u5316\u987a\u5e8f</li> <li> <p>\u5173\u952e\u7ec4\u4ef6\u521d\u59cb\u5316\u8fc7\u7a0b</p> </li> <li> <p>\u9519\u8bef\u5904\u7406\u4e0e\u8d44\u6e90\u91ca\u653e</p> </li> <li>\u4f18\u96c5\u5173\u95ed\u6d41\u7a0b</li> <li>\u8d44\u6e90\u91ca\u653e\u987a\u5e8f</li> <li> <p>\u5e38\u89c1\u9519\u8bef\u5904\u7406\u673a\u5236</p> </li> <li> <p>\u6027\u80fd\u4f18\u5316\u5efa\u8bae</p> </li> <li>\u8fde\u63a5\u6c60\u4f18\u5316</li> <li>\u7ebf\u7a0b\u6c60\u4f18\u5316</li> <li> <p>\u7f13\u5b58\u4f18\u5316</p> </li> <li> <p>\u76d1\u63a7\u4e0e\u544a\u8b66</p> </li> <li>\u5065\u5eb7\u68c0\u67e5\u6307\u6807</li> <li>\u6027\u80fd\u6307\u6807\u6536\u96c6</li> </ol> <p>\u8fd9\u4e9b\u5185\u5bb9\u57fa\u4e8e\u9879\u76ee\u4ee3\u7801\u548c\u9519\u8bef\u65e5\u5fd7\u5206\u6790\u5f97\u51fa\uff0c\u7279\u522b\u5173\u6ce8\u4e86\u542f\u52a8\u8fc7\u7a0b\u4e2d\u7684\u95ee\u9898\u5904\u7406\u548c\u8d44\u6e90\u7ba1\u7406\u3002\u9700\u8981\u6211\u8be6\u7ec6\u89e3\u91ca\u4efb\u4f55\u90e8\u5206\u5417\uff1f</p>"},{"location":"nacos/nacos-api-code-anlysis-p3/","title":"Nacos api code anlysis p3","text":"<p>Nacos API \u8c03\u7528\u94fe\u8def\u5206\u6790\u62a5\u544a</p>"},{"location":"nacos/nacos-api-code-anlysis-p3/#12","title":"12. \u95ee\u9898\u8bca\u65ad\u4e0e\u89e3\u51b3\u65b9\u6848","text":""},{"location":"nacos/nacos-api-code-anlysis-p3/#121","title":"12.1 \u542f\u52a8\u95ee\u9898\u5206\u6790","text":"<ol> <li>\u7aef\u53e3\u5360\u7528\u95ee\u9898 <pre><code>Web server failed to start. Port 8061 was already in use.\n</code></pre></li> </ol> <p>\u89e3\u51b3\u65b9\u6848\uff1a <pre><code># application.yml\nserver:\n  port: ${SERVER_PORT:8061}  # \u4f7f\u7528\u73af\u5883\u53d8\u91cf\u6216\u4fee\u6539\u4e3a\u53ef\u7528\u7aef\u53e3\n</code></pre></p> <ol> <li>DNS \u89e3\u6790\u95ee\u9898 <pre><code>Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider\n</code></pre></li> </ol> <p>\u89e3\u51b3\u65b9\u6848\uff1a <pre><code>&lt;!-- pom.xml --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.netty&lt;/groupId&gt;\n    &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n    &lt;classifier&gt;osx-x86_64&lt;/classifier&gt;\n    &lt;version&gt;${netty.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre></p>"},{"location":"nacos/nacos-api-code-anlysis-p3/#122","title":"12.2 \u6570\u636e\u5e93\u521d\u59cb\u5316\u5206\u6790","text":"<ol> <li>Schema \u521d\u59cb\u5316 <pre><code>Executing SQL script from class path resource [schema.sql] in 16 ms\n</code></pre></li> </ol> <p>\u5173\u952e\u4ee3\u7801\uff1a <pre><code>@Configuration\npublic class R2dbcConfig {\n    @Bean\n    ConnectionFactoryInitializer initializer(ConnectionFactory connectionFactory) {\n        ConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\n        initializer.setConnectionFactory(connectionFactory);\n\n        CompositeDatabasePopulator populator = new CompositeDatabasePopulator();\n        populator.addPopulators(new ResourceDatabasePopulator(new ClassPathResource(\\\"schema.sql\\\")));\n        populator.addPopulators(new ResourceDatabasePopulator(new ClassPathResource(\\\"data.sql\\\")));\n        initializer.setDatabasePopulator(populator);\n\n        return initializer;\n    }\n}\n</code></pre></p>"},{"location":"nacos/nacos-api-code-anlysis-p3/#123","title":"12.3 \u8d44\u6e90\u91ca\u653e\u5206\u6790","text":"<ol> <li>\u4f18\u96c5\u5173\u95ed\u987a\u5e8f <pre><code>1. WebFluxSseServerTransportProvider shutdown\n2. HttpClientBeanHolder destruction\n3. ThreadPoolManager destruction\n4. NotifyCenter destruction\n</code></pre></li> </ol> <p>\u5b9e\u73b0\u4ee3\u7801\uff1a <pre><code>@Component\npublic class GracefulShutdownManager {\n    @PreDestroy\n    public void onShutdown() {\n        // 1. \u5173\u95ed SSE \u8fde\u63a5\n        webFluxSseServerTransportProvider.shutdown();\n\n        // 2. \u5173\u95ed HTTP \u5ba2\u6237\u7aef\n        httpClientBeanHolder.destroy();\n\n        // 3. \u5173\u95ed\u7ebf\u7a0b\u6c60\n        threadPoolManager.destroy();\n\n        // 4. \u5173\u95ed\u901a\u77e5\u4e2d\u5fc3\n        notifyCenter.destroy();\n    }\n}\n</code></pre></p>"},{"location":"nacos/nacos-api-code-anlysis-p3/#13","title":"13. \u4f9d\u8d56\u7ba1\u7406","text":""},{"location":"nacos/nacos-api-code-anlysis-p3/#131","title":"13.1 \u6838\u5fc3\u4f9d\u8d56\u7248\u672c","text":"<pre><code>&lt;properties&gt;\n    &lt;spring-boot.version&gt;3.2.5&lt;/spring-boot.version&gt;\n    &lt;spring-cloud.version&gt;2023.0.0&lt;/spring-cloud.version&gt;\n    &lt;nacos.version&gt;2.3.0&lt;/nacos.version&gt;\n    &lt;netty.version&gt;4.1.107.Final&lt;/netty.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;!-- Spring Boot --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Nacos --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;\n        &lt;artifactId&gt;nacos-client&lt;/artifactId&gt;\n        &lt;version&gt;${nacos.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- R2DBC --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-r2dbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p3/#132","title":"13.2 \u4f9d\u8d56\u51b2\u7a81\u89e3\u51b3","text":"<ol> <li> <p>\u7248\u672c\u7ba1\u7406 <pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre></p> </li> <li> <p>\u6392\u9664\u51b2\u7a81\u4f9d\u8d56 <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;\n            &lt;artifactId&gt;nacos-client&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p3/#14","title":"14. \u90e8\u7f72\u914d\u7f6e","text":""},{"location":"nacos/nacos-api-code-anlysis-p3/#141","title":"14.1 \u73af\u5883\u914d\u7f6e","text":"<ol> <li> <p>\u5f00\u53d1\u73af\u5883 <pre><code># application-dev.yml\nspring:\n  r2dbc:\n    url: r2dbc:mysql://localhost:3306/mcp_dev\n    username: dev_user\n    password: dev_pass\n  cloud:\n    nacos:\n      server-addr: localhost:8848\n      username: nacos\n      password: nacos\n</code></pre></p> </li> <li> <p>\u751f\u4ea7\u73af\u5883 <pre><code># application-prod.yml\nspring:\n  r2dbc:\n    url: r2dbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}\n    username: ${DB_USER}\n    password: ${DB_PASS}\n  cloud:\n    nacos:\n      server-addr: ${NACOS_ADDR}\n      username: ${NACOS_USER}\n      password: ${NACOS_PASS}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p3/#142","title":"14.2 \u76d1\u63a7\u914d\u7f6e","text":"<ol> <li> <p>Actuator \u7aef\u70b9\u914d\u7f6e <pre><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: health,metrics,prometheus\n  endpoint:\n    health:\n      show-details: always\n  metrics:\n    tags:\n      application: ${spring.application.name}\n</code></pre></p> </li> <li> <p>\u65e5\u5fd7\u914d\u7f6e <pre><code>logging:\n  level:\n    root: INFO\n    com.nacos.mcp: DEBUG\n    org.springframework.r2dbc: DEBUG\n  pattern:\n    console: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n'\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p3/#15","title":"15. \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":"<ol> <li>\u8fde\u63a5\u6c60\u4f18\u5316</li> <li>\u8c03\u6574 HTTP \u5ba2\u6237\u7aef\u8fde\u63a5\u6c60\u5927\u5c0f</li> <li>\u914d\u7f6e R2DBC \u8fde\u63a5\u6c60\u53c2\u6570</li> <li> <p>\u4f7f\u7528 Netty \u53c2\u6570\u8c03\u4f18</p> </li> <li> <p>\u7f13\u5b58\u7b56\u7565</p> </li> <li>\u5b9e\u73b0\u591a\u7ea7\u7f13\u5b58</li> <li>\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565</li> <li> <p>\u6dfb\u52a0\u7f13\u5b58\u9884\u70ed\u673a\u5236</p> </li> <li> <p>\u7ebf\u7a0b\u6c60\u4f18\u5316</p> </li> <li>\u6839\u636e\u4e1a\u52a1\u573a\u666f\u8c03\u6574\u7ebf\u7a0b\u6c60\u53c2\u6570</li> <li>\u5b9e\u73b0\u7ebf\u7a0b\u6c60\u76d1\u63a7</li> <li>\u6dfb\u52a0\u7ebf\u7a0b\u6c60\u4fdd\u62a4\u673a\u5236\"}}</li> </ol> <p>\u6211\u5df2\u7ecf\u4e3a\u8c03\u7528\u94fe\u8def\u5206\u6790\u62a5\u544a\u6dfb\u52a0\u4e86\u4ee5\u4e0b\u65b0\u7684\u7ae0\u8282\uff1a</p> <ol> <li>\u95ee\u9898\u8bca\u65ad\u4e0e\u89e3\u51b3\u65b9\u6848</li> <li>\u542f\u52a8\u95ee\u9898\u5206\u6790\uff08\u7aef\u53e3\u5360\u7528\u3001DNS\u89e3\u6790\uff09</li> <li>\u6570\u636e\u5e93\u521d\u59cb\u5316\u5206\u6790</li> <li> <p>\u8d44\u6e90\u91ca\u653e\u5206\u6790</p> </li> <li> <p>\u4f9d\u8d56\u7ba1\u7406</p> </li> <li>\u6838\u5fc3\u4f9d\u8d56\u7248\u672c</li> <li> <p>\u4f9d\u8d56\u51b2\u7a81\u89e3\u51b3\u65b9\u6848</p> </li> <li> <p>\u90e8\u7f72\u914d\u7f6e</p> </li> <li>\u73af\u5883\u914d\u7f6e\uff08\u5f00\u53d1\u73af\u5883\u3001\u751f\u4ea7\u73af\u5883\uff09</li> <li> <p>\u76d1\u63a7\u914d\u7f6e\uff08Actuator\u3001\u65e5\u5fd7\uff09</p> </li> <li> <p>\u6027\u80fd\u4f18\u5316\u5efa\u8bae</p> </li> <li>\u8fde\u63a5\u6c60\u4f18\u5316</li> <li>\u7f13\u5b58\u7b56\u7565</li> <li>\u7ebf\u7a0b\u6c60\u4f18\u5316</li> </ol> <p>\u8fd9\u4e9b\u5185\u5bb9\u57fa\u4e8e\u9879\u76ee\u7684\u5b9e\u9645\u8fd0\u884c\u65e5\u5fd7\u548c\u4ee3\u7801\u5206\u6790\u5f97\u51fa\uff0c\u7279\u522b\u5173\u6ce8\u4e86\u95ee\u9898\u8bca\u65ad\u548c\u6027\u80fd\u4f18\u5316\u65b9\u9762\u3002\u9700\u8981\u6211\u8be6\u7ec6\u89e3\u91ca\u4efb\u4f55\u90e8\u5206\u5417\uff1f</p>"},{"location":"nacos/nacos-api-code-anlysis-p4/","title":"Nacos api code anlysis p4","text":"<p>\u597d\u7684\uff0c\u6211\u6765\u5e2e\u60a8\u5ba1\u89c6 mcp-router \u9879\u76ee\uff0c\u57fa\u4e8e nacos-api-code-anlysis.md \u7684\u5206\u6790\u62a5\u544a\u548c spring-ai-alibaba-mcp \u7684\u5b9e\u73b0\u3002</p>"},{"location":"nacos/nacos-api-code-anlysis-p4/#mcp-router","title":"MCP Router \u9879\u76ee\u5ba1\u89c6\u62a5\u544a","text":""},{"location":"nacos/nacos-api-code-anlysis-p4/#1","title":"1. \u67b6\u6784\u5bf9\u6bd4","text":""},{"location":"nacos/nacos-api-code-anlysis-p4/#11","title":"1.1 \u4e0e\u6807\u51c6\u5b9e\u73b0\u7684\u5dee\u5f02","text":"<ol> <li>\u670d\u52a1\u6ce8\u518c\u673a\u5236</li> <li>\u6807\u51c6\u5b9e\u73b0\uff1a\u4f7f\u7528 <code>NacosMcpRegistryAutoConfiguration</code> \u81ea\u52a8\u914d\u7f6e</li> <li>\u5f53\u524d\u5b9e\u73b0\uff1a\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684 <code>McpServerRegistryConfig</code> \u914d\u7f6e\u7c7b</li> <li>\u5dee\u5f02\u70b9\uff1a</li> <li>\u6ce8\u518c\u65f6\u673a\u4e0d\u540c\uff1a\u6807\u51c6\u662f WebServerInitialized \u4e8b\u4ef6\uff0c\u5f53\u524d\u662f PostConstruct</li> <li> <p>\u5143\u6570\u636e\u5904\u7406\u4e0d\u540c\uff1a\u6807\u51c6\u6709\u5b8c\u6574\u7684\u5143\u6570\u636e\u4f53\u7cfb\uff0c\u5f53\u524d\u5b9e\u73b0\u8f83\u7b80\u5355</p> </li> <li> <p>\u914d\u7f6e\u7ba1\u7406</p> </li> <li>\u6807\u51c6\u5b9e\u73b0\uff1a\u5b8c\u6574\u7684\u914d\u7f6e\u4e2d\u5fc3\u96c6\u6210</li> <li>\u5f53\u524d\u5b9e\u73b0\uff1a\u4ec5\u4f7f\u7528\u57fa\u7840\u914d\u7f6e\u529f\u80fd</li> <li>\u5efa\u8bae\u6539\u8fdb\uff1a</li> <li>\u6dfb\u52a0\u914d\u7f6e\u53d8\u66f4\u76d1\u542c</li> <li>\u5b9e\u73b0\u52a8\u6001\u914d\u7f6e\u5237\u65b0</li> <li>\u589e\u52a0\u914d\u7f6e\u7248\u672c\u7ba1\u7406</li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p4/#12","title":"1.2 \u529f\u80fd\u5b8c\u6574\u6027\u5206\u6790","text":"<ol> <li>\u5df2\u5b9e\u73b0\u529f\u80fd</li> <li>\u57fa\u7840\u670d\u52a1\u6ce8\u518c</li> <li>\u670d\u52a1\u5065\u5eb7\u68c0\u67e5</li> <li>\u5b9e\u4f8b\u7ba1\u7406</li> <li> <p>\u8def\u7531\u8f6c\u53d1</p> </li> <li> <p>\u5f85\u8865\u5145\u529f\u80fd</p> </li> <li>\u5b8c\u6574\u7684\u76d1\u63a7\u6307\u6807</li> <li>\u670d\u52a1\u964d\u7ea7\u7b56\u7565</li> <li>\u7070\u5ea6\u53d1\u5e03\u652f\u6301</li> <li>\u591a\u73af\u5883\u914d\u7f6e</li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p4/#2","title":"2. \u4ee3\u7801\u8d28\u91cf\u5206\u6790","text":""},{"location":"nacos/nacos-api-code-anlysis-p4/#21","title":"2.1 \u9879\u76ee\u7ed3\u6784","text":"<pre><code>mcp-router/\n\u251c\u2500\u2500 config/        # \u914d\u7f6e\u7c7b\n\u251c\u2500\u2500 controller/    # API \u63a7\u5236\u5668\n\u251c\u2500\u2500 model/         # \u6570\u636e\u6a21\u578b\n\u251c\u2500\u2500 service/       # \u4e1a\u52a1\u903b\u8f91\n\u2514\u2500\u2500 utils/         # \u5de5\u5177\u7c7b\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis-p4/#22","title":"2.2 \u5173\u952e\u4ee3\u7801\u8bc4\u5ba1","text":"<ol> <li> <p>\u670d\u52a1\u6ce8\u518c\u914d\u7f6e <pre><code>@Configuration\npublic class McpServerRegistryConfig {\n    // \u5efa\u8bae\u6dfb\u52a0\uff1a\n    // 1. \u91cd\u8bd5\u673a\u5236\n    // 2. \u5065\u5eb7\u68c0\u67e5\u914d\u7f6e\n    // 3. \u5b9e\u4f8b\u6743\u91cd\u8bbe\u7f6e\n}\n</code></pre></p> </li> <li> <p>\u8def\u7531\u670d\u52a1\u5b9e\u73b0 <pre><code>public class McpRouterService {\n    // \u5efa\u8bae\u6539\u8fdb\uff1a\n    // 1. \u6dfb\u52a0\u8def\u7531\u7f13\u5b58\n    // 2. \u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\n    // 3. \u6dfb\u52a0\u7194\u65ad\u673a\u5236\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p4/#3","title":"3. \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":""},{"location":"nacos/nacos-api-code-anlysis-p4/#31","title":"3.1 \u8fde\u63a5\u6c60\u4f18\u5316","text":"<ol> <li> <p>HTTP \u5ba2\u6237\u7aef\u914d\u7f6e <pre><code>@Configuration\npublic class HttpClientConfig {\n    @Bean\n    public HttpClient httpClient() {\n        return HttpClient.create()\n            .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\n            .doOnConnected(conn -&gt; conn\n                .addHandlerLast(new ReadTimeoutHandler(5))\n                .addHandlerLast(new WriteTimeoutHandler(5)))\n            .responseTimeout(Duration.ofSeconds(5));\n    }\n}\n</code></pre></p> </li> <li> <p>\u7ebf\u7a0b\u6c60\u914d\u7f6e <pre><code>@Configuration\npublic class ThreadPoolConfig {\n    @Bean\n    public ThreadPoolExecutor routerThreadPool() {\n        return new ThreadPoolExecutor(\n            10,\n            20,\n            60L,\n            TimeUnit.SECONDS,\n            new LinkedBlockingQueue&lt;&gt;(1000),\n            new ThreadFactoryBuilder().setNameFormat(\\\"mcp-router-%d\\\").build(),\n            new ThreadPoolExecutor.CallerRunsPolicy()\n        );\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p4/#32","title":"3.2 \u7f13\u5b58\u4f18\u5316","text":"<ol> <li>\u672c\u5730\u7f13\u5b58\u914d\u7f6e\u5efa\u8bae <pre><code>@Configuration\npublic class CacheConfig {\n    @Bean\n    public Cache&lt;String, List&lt;Instance&gt;&gt; serverCache() {\n        return Caffeine.newBuilder()\n            .expireAfterWrite(Duration.ofMinutes(1))\n            .maximumSize(1000)\n            .build();\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p4/#4","title":"4. \u53ef\u9760\u6027\u5efa\u8bae","text":""},{"location":"nacos/nacos-api-code-anlysis-p4/#41","title":"4.1 \u5f02\u5e38\u5904\u7406","text":"<ol> <li> <p>\u5168\u5c40\u5f02\u5e38\u5904\u7406 <pre><code>@ControllerAdvice\npublic class GlobalExceptionHandler {\n    @ExceptionHandler(McpRouterException.class)\n    public ResponseEntity&lt;ErrorResponse&gt; handleMcpRouterException(McpRouterException ex) {\n        // \u7edf\u4e00\u5f02\u5e38\u5904\u7406\n    }\n}\n</code></pre></p> </li> <li> <p>\u91cd\u8bd5\u673a\u5236 <pre><code>@Configuration\npublic class RetryConfig {\n    @Bean\n    public RetryTemplate retryTemplate() {\n        SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy();\n        retryPolicy.setMaxAttempts(3);\n\n        ExponentialBackOffPolicy backOffPolicy = new ExponentialBackOffPolicy();\n        backOffPolicy.setInitialInterval(1000L);\n        backOffPolicy.setMultiplier(2.0);\n\n        RetryTemplate template = new RetryTemplate();\n        template.setRetryPolicy(retryPolicy);\n        template.setBackOffPolicy(backOffPolicy);\n\n        return template;\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p4/#42","title":"4.2 \u76d1\u63a7\u544a\u8b66","text":"<ol> <li> <p>\u5065\u5eb7\u68c0\u67e5 <pre><code>@Component\npublic class RouterHealthIndicator implements HealthIndicator {\n    @Override\n    public Health health() {\n        return Health.up()\n            .withDetail(\\\"routedRequests\\\", getRoutedRequestsCount())\n            .withDetail(\\\"activeServers\\\", getActiveServersCount())\n            .withDetail(\\\"errorRate\\\", getErrorRate())\n            .build();\n    }\n}\n</code></pre></p> </li> <li> <p>\u6027\u80fd\u6307\u6807 <pre><code>@Component\npublic class RouterMetrics {\n    private final MeterRegistry registry;\n\n    public void recordRouteLatency(String server, long latency) {\n        registry.timer(\\\"mcp.router.latency\\\", \n            \\\"server\\\", server).record(latency, TimeUnit.MILLISECONDS);\n    }\n\n    public void incrementErrorCount(String errorType) {\n        registry.counter(\\\"mcp.router.errors\\\", \n            \\\"type\\\", errorType).increment();\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p4/#5","title":"5. \u6539\u8fdb\u5efa\u8bae","text":"<ol> <li>\u67b6\u6784\u4f18\u5316</li> <li>\u5f15\u5165\u670d\u52a1\u53d1\u73b0\u7f13\u5b58\u673a\u5236</li> <li>\u5b9e\u73b0\u667a\u80fd\u8d1f\u8f7d\u5747\u8861</li> <li>\u6dfb\u52a0\u670d\u52a1\u7194\u65ad\u673a\u5236</li> <li> <p>\u652f\u6301\u7070\u5ea6\u53d1\u5e03</p> </li> <li> <p>\u6027\u80fd\u4f18\u5316</p> </li> <li>\u4f18\u5316\u8fde\u63a5\u6c60\u914d\u7f6e</li> <li>\u5b9e\u73b0\u8bf7\u6c42\u5408\u5e76</li> <li>\u6dfb\u52a0\u672c\u5730\u7f13\u5b58</li> <li> <p>\u5b9e\u73b0\u5f02\u6b65\u5904\u7406</p> </li> <li> <p>\u53ef\u9760\u6027\u63d0\u5347</p> </li> <li>\u5b8c\u5584\u91cd\u8bd5\u673a\u5236</li> <li>\u589e\u52a0\u7194\u65ad\u964d\u7ea7</li> <li>\u4f18\u5316\u5065\u5eb7\u68c0\u67e5</li> <li> <p>\u52a0\u5f3a\u76d1\u63a7\u544a\u8b66</p> </li> <li> <p>\u8fd0\u7ef4\u652f\u6301</p> </li> <li>\u6dfb\u52a0\u66f4\u591a\u76d1\u63a7\u6307\u6807</li> <li>\u652f\u6301\u52a8\u6001\u914d\u7f6e</li> <li>\u63d0\u4f9b\u8fd0\u7ef4\u63a5\u53e3</li> <li>\u5b8c\u5584\u65e5\u5fd7\u8bb0\u5f55</li> </ol>"},{"location":"nacos/nacos-api-code-anlysis-p4/#6","title":"6. \u540e\u7eed\u89c4\u5212","text":"<ol> <li>\u8fd1\u671f\u4f18\u5316\u9879</li> <li>\u5b9e\u73b0\u57fa\u7840\u7f13\u5b58\u673a\u5236</li> <li>\u6dfb\u52a0\u7b80\u5355\u76d1\u63a7</li> <li>\u4f18\u5316\u9519\u8bef\u5904\u7406</li> <li> <p>\u89c4\u8303\u4ee3\u7801\u7ed3\u6784</p> </li> <li> <p>\u4e2d\u671f\u89c4\u5212</p> </li> <li>\u5b9e\u73b0\u5b8c\u6574\u76d1\u63a7</li> <li>\u6dfb\u52a0\u670d\u52a1\u6cbb\u7406</li> <li>\u652f\u6301\u914d\u7f6e\u4e2d\u5fc3</li> <li> <p>\u4f18\u5316\u6027\u80fd\u6307\u6807</p> </li> <li> <p>\u957f\u671f\u89c4\u5212</p> </li> <li>\u652f\u6301\u670d\u52a1\u7f51\u683c</li> <li>\u5b9e\u73b0\u591a\u96c6\u7fa4</li> <li>\u652f\u6301\u5bb9\u5668\u5316</li> <li>\u4e91\u539f\u751f\u6539\u9020\"}}</li> </ol> <p>\u57fa\u4e8e\u4ee5\u4e0a\u5206\u6790\uff0c\u6211\u5efa\u8bae\u91cd\u70b9\u5173\u6ce8\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u7684\u6539\u8fdb\uff1a</p> <ol> <li>\u670d\u52a1\u6ce8\u518c\u673a\u5236\u7684\u5b8c\u5584</li> <li>\u6dfb\u52a0\u91cd\u8bd5\u673a\u5236</li> <li>\u5b9e\u73b0\u5b8c\u6574\u7684\u5143\u6570\u636e\u7ba1\u7406</li> <li> <p>\u4f18\u5316\u5065\u5eb7\u68c0\u67e5\u7b56\u7565</p> </li> <li> <p>\u6027\u80fd\u4f18\u5316</p> </li> <li>\u5b9e\u73b0\u591a\u7ea7\u7f13\u5b58</li> <li>\u4f18\u5316\u8fde\u63a5\u6c60\u914d\u7f6e</li> <li> <p>\u6dfb\u52a0\u5f02\u6b65\u5904\u7406\u673a\u5236</p> </li> <li> <p>\u53ef\u9760\u6027\u63d0\u5347</p> </li> <li>\u5b8c\u5584\u76d1\u63a7\u6307\u6807</li> <li>\u6dfb\u52a0\u7194\u65ad\u964d\u7ea7</li> <li>\u4f18\u5316\u9519\u8bef\u5904\u7406</li> </ol> <p>\u9700\u8981\u6211\u8be6\u7ec6\u8bf4\u660e\u4efb\u4f55\u90e8\u5206\u5417\uff1f</p>"},{"location":"nacos/nacos-api-code-anlysis/","title":"Nacos api code anlysis","text":"<p>Nacos API \u8c03\u7528\u94fe\u8def\u5206\u6790\u62a5\u544a</p> <p>\u8ba9\u6211\u4e3a\u60a8\u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e2a\u5206\u6790\u62a5\u544a\u7684\u4e3b\u8981\u5185\u5bb9\uff1a</p> <ol> <li>\u670d\u52a1\u6ce8\u518c\u94fe\u8def\uff1a\u5c55\u793a\u4e86\u4ece\u5e94\u7528\u542f\u52a8\u5230\u670d\u52a1\u6ce8\u518c\u5230 Nacos \u7684\u5b8c\u6574\u6d41\u7a0b</li> <li>\u914d\u7f6e\u7ba1\u7406\u94fe\u8def\uff1a\u8bf4\u660e\u4e86\u914d\u7f6e\u7684\u83b7\u53d6\u548c\u76d1\u542c\u673a\u5236</li> <li>\u670d\u52a1\u53d1\u73b0\u94fe\u8def\uff1a\u63cf\u8ff0\u4e86\u670d\u52a1\u67e5\u8be2\u548c\u53d1\u73b0\u7684\u5b9e\u73b0\u65b9\u5f0f</li> <li>\u5065\u5eb7\u68c0\u67e5\u94fe\u8def\uff1a\u5c55\u793a\u4e86\u5065\u5eb7\u68c0\u67e5\u7684\u5b9e\u73b0\u673a\u5236</li> <li>\u9519\u8bef\u5904\u7406\u673a\u5236\uff1a\u5305\u542b\u4e86\u5f02\u5e38\u5904\u7406\u548c\u91cd\u8bd5\u7b56\u7565</li> <li>\u6027\u80fd\u4f18\u5316\uff1a\u8bf4\u660e\u4e86\u7f13\u5b58\u548c\u8fde\u63a5\u6c60\u7684\u4f7f\u7528</li> <li>\u76d1\u63a7\u6307\u6807\uff1a\u63cf\u8ff0\u4e86\u6838\u5fc3\u76d1\u63a7\u6307\u6807\u548c\u5b9e\u73b0\u65b9\u5f0f</li> <li>\u5e94\u7528\u542f\u52a8\u6d41\u7a0b\u5206\u6790</li> <li>\u9519\u8bef\u5904\u7406\u4e0e\u8d44\u6e90\u91ca\u653e</li> <li>\u6027\u80fd\u4f18\u5316\u5efa\u8bae</li> <li>\u76d1\u63a7\u4e0e\u544a\u8b66</li> <li>\u95ee\u9898\u8bca\u65ad\u4e0e\u89e3\u51b3\u65b9\u6848</li> <li>\u4f9d\u8d56\u7ba1\u7406</li> <li>\u90e8\u7f72\u914d\u7f6e</li> <li>\u6027\u80fd\u4f18\u5316\u5efa\u8bae</li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#1","title":"1. \u670d\u52a1\u6ce8\u518c\u94fe\u8def","text":""},{"location":"nacos/nacos-api-code-anlysis/#11","title":"1.1 \u542f\u52a8\u6d41\u7a0b","text":"<pre><code>graph TD\n    A[McpServerV2Application] --&gt; B[NacosMcpRegistryAutoConfiguration]\n    B --&gt; C[NacosMcpRegister]\n    C --&gt; D[NamingService]\n    D --&gt; E[Nacos Server]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#12","title":"1.2 \u8be6\u7ec6\u8c03\u7528\u94fe\u8def","text":"<ol> <li> <p>\u5e94\u7528\u542f\u52a8\u5165\u53e3 <pre><code>@SpringBootApplication\npublic class McpServerV2Application {\n    public static void main(String[] args) {\n        SpringApplication.run(McpServerV2Application.class, args);\n    }\n}\n</code></pre></p> </li> <li> <p>\u81ea\u52a8\u914d\u7f6e\u7c7b\u521d\u59cb\u5316 <pre><code>@Configuration\n@ConditionalOnProperty(prefix = \\\"spring.cloud.nacos.mcp\\\", name = \\\"enabled\\\", havingValue = \\\"true\\\", matchIfMissing = true)\npublic class NacosMcpRegistryAutoConfiguration {\n    @Bean\n    public NacosMcpRegister nacosMcpRegisterAsync() {\n        return new NacosMcpRegister();\n    }\n}\n</code></pre></p> </li> <li> <p>\u670d\u52a1\u6ce8\u518c\u5b9e\u73b0 <pre><code>public class NacosMcpRegister implements ApplicationListener&lt;WebServerInitializedEvent&gt; {\n    @Override\n    public void onApplicationEvent(WebServerInitializedEvent event) {\n        // \u6784\u5efa\u5b9e\u4f8b\u4fe1\u606f\n        Instance instance = buildInstance(event);\n        // \u6ce8\u518c\u5230 Nacos\n        registerInstance(instance);\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#2","title":"2. \u914d\u7f6e\u7ba1\u7406\u94fe\u8def","text":""},{"location":"nacos/nacos-api-code-anlysis/#21","title":"2.1 \u914d\u7f6e\u83b7\u53d6\u6d41\u7a0b","text":"<pre><code>graph TD\n    A[NacosMcpConfigService] --&gt; B[ConfigService]\n    B --&gt; C[Nacos Config API]\n    C --&gt; D[Nacos Server]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#22","title":"2.2 \u8be6\u7ec6\u8c03\u7528\u94fe\u8def","text":"<ol> <li> <p>\u914d\u7f6e\u670d\u52a1\u521d\u59cb\u5316 <pre><code>@Configuration\npublic class NacosMcpConfigAutoConfiguration {\n    @Bean\n    public ConfigService configService() {\n        return NacosFactory.createConfigService(properties);\n    }\n}\n</code></pre></p> </li> <li> <p>\u914d\u7f6e\u76d1\u542c\u5b9e\u73b0 <pre><code>public class NacosMcpConfigService {\n    public void addListener(String dataId, String group, Listener listener) {\n        configService.addListener(dataId, group, listener);\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#3","title":"3. \u670d\u52a1\u53d1\u73b0\u94fe\u8def","text":""},{"location":"nacos/nacos-api-code-anlysis/#31","title":"3.1 \u670d\u52a1\u53d1\u73b0\u6d41\u7a0b","text":"<pre><code>graph TD\n    A[NacosMcpDiscoveryService] --&gt; B[NamingService]\n    B --&gt; C[Nacos Naming API]\n    C --&gt; D[Nacos Server]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#32","title":"3.2 \u8be6\u7ec6\u8c03\u7528\u94fe\u8def","text":"<ol> <li> <p>\u670d\u52a1\u53d1\u73b0\u521d\u59cb\u5316 <pre><code>@Configuration\npublic class NacosMcpDiscoveryAutoConfiguration {\n    @Bean\n    public NamingService namingService() {\n        return NacosFactory.createNamingService(properties);\n    }\n}\n</code></pre></p> </li> <li> <p>\u670d\u52a1\u67e5\u8be2\u5b9e\u73b0 <pre><code>public class NacosMcpDiscoveryService {\n    public List&lt;Instance&gt; getAllInstances(String serviceName) {\n        return namingService.getAllInstances(serviceName);\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#4","title":"4. \u5065\u5eb7\u68c0\u67e5\u94fe\u8def","text":""},{"location":"nacos/nacos-api-code-anlysis/#41","title":"4.1 \u5065\u5eb7\u68c0\u67e5\u6d41\u7a0b","text":"<pre><code>graph TD\n    A[NacosMcpHealthIndicator] --&gt; B[NamingService]\n    B --&gt; C[Nacos Health API]\n    C --&gt; D[Nacos Server]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#42","title":"4.2 \u8be6\u7ec6\u8c03\u7528\u94fe\u8def","text":"<ol> <li>\u5065\u5eb7\u68c0\u67e5\u5b9e\u73b0 <pre><code>@Component\npublic class NacosMcpHealthIndicator implements HealthIndicator {\n    @Override\n    public Health health() {\n        try {\n            namingService.getServerStatus();\n            return Health.up().build();\n        } catch (Exception e) {\n            return Health.down(e).build();\n        }\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#5","title":"5. \u9519\u8bef\u5904\u7406\u673a\u5236","text":""},{"location":"nacos/nacos-api-code-anlysis/#51","title":"5.1 \u5f02\u5e38\u5904\u7406\u6d41\u7a0b","text":"<pre><code>graph TD\n    A[NacosMcpException] --&gt; B[\u5168\u5c40\u5f02\u5e38\u5904\u7406]\n    B --&gt; C[\u65e5\u5fd7\u8bb0\u5f55]\n    B --&gt; D[\u91cd\u8bd5\u673a\u5236]\n    D --&gt; E[\u670d\u52a1\u964d\u7ea7]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#52","title":"5.2 \u91cd\u8bd5\u7b56\u7565","text":"<pre><code>@Configuration\npublic class NacosMcpRetryConfiguration {\n    @Bean\n    public RetryTemplate retryTemplate() {\n        SimpleRetryPolicy retryPolicy = new SimpleRetryPolicy();\n        retryPolicy.setMaxAttempts(3);\n\n        ExponentialBackOffPolicy backOffPolicy = new ExponentialBackOffPolicy();\n        backOffPolicy.setInitialInterval(1000L);\n        backOffPolicy.setMultiplier(2.0);\n\n        RetryTemplate template = new RetryTemplate();\n        template.setRetryPolicy(retryPolicy);\n        template.setBackOffPolicy(backOffPolicy);\n\n        return template;\n    }\n}\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#6","title":"6. \u6027\u80fd\u4f18\u5316","text":""},{"location":"nacos/nacos-api-code-anlysis/#61","title":"6.1 \u7f13\u5b58\u673a\u5236","text":"<ul> <li>\u672c\u5730\u7f13\u5b58\uff1a\u4f7f\u7528 Caffeine \u5b9e\u73b0\u670d\u52a1\u5b9e\u4f8b\u4fe1\u606f\u7684\u672c\u5730\u7f13\u5b58</li> <li>\u914d\u7f6e\u7f13\u5b58\uff1a\u5b9e\u73b0\u914d\u7f6e\u4fe1\u606f\u7684\u672c\u5730\u7f13\u5b58\uff0c\u51cf\u5c11\u5bf9 Nacos \u670d\u52a1\u5668\u7684\u8bf7\u6c42</li> </ul>"},{"location":"nacos/nacos-api-code-anlysis/#62","title":"6.2 \u8fde\u63a5\u6c60\u7ba1\u7406","text":"<ul> <li>\u4f7f\u7528 HTTP \u8fde\u63a5\u6c60\u4f18\u5316\u4e0e Nacos \u670d\u52a1\u5668\u7684\u901a\u4fe1</li> <li>\u5b9e\u73b0\u8fde\u63a5\u6c60\u76d1\u63a7\u548c\u7ba1\u7406</li> </ul>"},{"location":"nacos/nacos-api-code-anlysis/#7","title":"7. \u76d1\u63a7\u6307\u6807","text":""},{"location":"nacos/nacos-api-code-anlysis/#71","title":"7.1 \u6838\u5fc3\u6307\u6807","text":"<ul> <li>\u670d\u52a1\u6ce8\u518c\u6210\u529f\u7387</li> <li>\u914d\u7f6e\u66f4\u65b0\u5ef6\u8fdf</li> <li>\u670d\u52a1\u53d1\u73b0\u54cd\u5e94\u65f6\u95f4</li> <li>\u5065\u5eb7\u68c0\u67e5\u72b6\u6001</li> </ul>"},{"location":"nacos/nacos-api-code-anlysis/#72","title":"7.2 \u76d1\u63a7\u5b9e\u73b0","text":"<pre><code>@Configuration\npublic class NacosMcpMetricsConfiguration {\n    @Bean\n    public MeterRegistry meterRegistry() {\n        return new SimpleMeterRegistry();\n    }\n\n    @Bean\n    public NacosMcpMetrics nacosMcpMetrics(MeterRegistry registry) {\n        return new NacosMcpMetrics(registry);\n    }\n}\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#8","title":"8. \u5e94\u7528\u542f\u52a8\u6d41\u7a0b\u5206\u6790","text":""},{"location":"nacos/nacos-api-code-anlysis/#81","title":"8.1 \u542f\u52a8\u987a\u5e8f","text":"<pre><code>graph TD\n    A[McpServerV2Application.main] --&gt; B[SpringApplication.run]\n    B --&gt; C[ReactiveWebServerApplicationContext.refresh]\n    C --&gt; D[AbstractApplicationContext.refresh]\n    D --&gt; E[finishBeanFactoryInitialization]\n    E --&gt; F[NacosMcpRegistryAutoConfiguration]\n    F --&gt; G[NacosMcpRegister]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#82-bean","title":"8.2 Bean \u521d\u59cb\u5316\u987a\u5e8f","text":"<ol> <li>Spring Context \u521d\u59cb\u5316 <pre><code>// AbstractApplicationContext.refresh() \u6d41\u7a0b\n1. prepareRefresh()\n2. obtainFreshBeanFactory()\n3. prepareBeanFactory()\n4. postProcessBeanFactory()\n5. invokeBeanFactoryPostProcessors()\n6. registerBeanPostProcessors()\n7. initMessageSource()\n8. initApplicationEventMulticaster()\n9. onRefresh()\n10. registerListeners()\n11. finishBeanFactoryInitialization()\n12. finishRefresh()\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#83","title":"8.3 \u5173\u952e\u7ec4\u4ef6\u521d\u59cb\u5316","text":"<ol> <li> <p>WebFlux SSE \u670d\u52a1\u5668\u521d\u59cb\u5316 <pre><code>@Component\npublic class WebFluxSseServerTransportProvider implements ServerTransportProvider {\n    private final Map&lt;String, SseEmitter&gt; activeSessions = new ConcurrentHashMap&lt;&gt;();\n\n    @PostConstruct\n    public void init() {\n        // \u521d\u59cb\u5316 SSE \u670d\u52a1\u5668\u914d\u7f6e\n    }\n\n    public void handleConnection(ServerHttpRequest request, ServerHttpResponse response) {\n        // \u5904\u7406 SSE \u8fde\u63a5\n    }\n}\n</code></pre></p> </li> <li> <p>\u6570\u636e\u5e93\u521d\u59cb\u5316 <pre><code>// schema.sql \u6267\u884c\nCREATE TABLE IF NOT EXISTS person (\n    id BIGINT AUTO_INCREMENT PRIMARY KEY,\n    first_name VARCHAR(50) NOT NULL,\n    last_name VARCHAR(50) NOT NULL,\n    age INTEGER NOT NULL,\n    nationality VARCHAR(50) NOT NULL,\n    gender VARCHAR(10) NOT NULL\n);\n\n// data.sql \u6267\u884c\nINSERT INTO person (first_name, last_name, age, nationality, gender) VALUES\n    ('John', 'Doe', 30, 'American', 'MALE'),\n    // ... \u5176\u4ed6\u6570\u636e ...\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#9","title":"9. \u9519\u8bef\u5904\u7406\u4e0e\u8d44\u6e90\u91ca\u653e","text":""},{"location":"nacos/nacos-api-code-anlysis/#91","title":"9.1 \u4f18\u96c5\u5173\u95ed\u6d41\u7a0b","text":"<pre><code>graph TD\n    A[\u5e94\u7528\u5173\u95ed\u89e6\u53d1] --&gt; B[WebFluxSseServerTransportProvider.shutdown]\n    B --&gt; C[HttpClientBeanHolder.destroy]\n    C --&gt; D[ThreadPoolManager.destroy]\n    D --&gt; E[NotifyCenter.destroy]\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#92","title":"9.2 \u8d44\u6e90\u91ca\u653e\u987a\u5e8f","text":"<ol> <li> <p>SSE \u4f1a\u8bdd\u6e05\u7406 <pre><code>public class WebFluxSseServerTransportProvider {\n    public void shutdown() {\n        log.debug(\\\"Initiating graceful shutdown with {} active sessions\\\", \n                 activeSessions.size());\n        activeSessions.values().forEach(SseEmitter::complete);\n        activeSessions.clear();\n    }\n}\n</code></pre></p> </li> <li> <p>HTTP \u5ba2\u6237\u7aef\u9500\u6bc1 <pre><code>public class HttpClientBeanHolder {\n    public void destroy() {\n        log.info(\\\"[HttpClientBeanHolder] Start destroying common HttpClient\\\");\n        // \u5173\u95ed\u6240\u6709 HTTP \u8fde\u63a5\n        log.info(\\\"[HttpClientBeanHolder] Completed destruction of HttpClient\\\");\n    }\n}\n</code></pre></p> </li> <li> <p>\u7ebf\u7a0b\u6c60\u7ba1\u7406 <pre><code>public class ThreadPoolManager {\n    public void destroy() {\n        log.info(\\\"[ThreadPoolManager] Start destroying ThreadPool\\\");\n        // \u5173\u95ed\u6240\u6709\u7ebf\u7a0b\u6c60\n        log.info(\\\"[ThreadPoolManager] Completed destruction of ThreadPool\\\");\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#93","title":"9.3 \u5e38\u89c1\u9519\u8bef\u5904\u7406","text":"<ol> <li> <p>\u7aef\u53e3\u5360\u7528\u5904\u7406 <pre><code>@Component\npublic class PortInUseHandler {\n    @EventListener(ApplicationFailedEvent.class)\n    public void handlePortInUse(ApplicationFailedEvent event) {\n        Throwable exception = event.getException();\n        if (isPortInUseException(exception)) {\n            log.error(\\\"Port {} is already in use. Please configure a different port.\\\",\n                      getPort(exception));\n            // \u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u5907\u7528\u7aef\u53e3\n            tryAlternativePort();\n        }\n    }\n}\n</code></pre></p> </li> <li> <p>\u7f51\u7edc\u5f02\u5e38\u5904\u7406 <pre><code>@Component\npublic class NetworkExceptionHandler {\n    @Retryable(maxAttempts = 3, backoff = @Backoff(delay = 1000))\n    public void handleNetworkException(NetworkException exception) {\n        log.warn(\\\"Network error occurred: {}, retrying...\\\", exception.getMessage());\n        // \u91cd\u8bd5\u903b\u8f91\n    }\n}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#10","title":"10. \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":""},{"location":"nacos/nacos-api-code-anlysis/#101","title":"10.1 \u8fde\u63a5\u6c60\u4f18\u5316","text":"<ol> <li>HTTP \u5ba2\u6237\u7aef\u8fde\u63a5\u6c60\u914d\u7f6e <pre><code>@Configuration\npublic class HttpClientConfig {\n    @Bean\n    public HttpClient httpClient() {\n        return HttpClient.create()\n            .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)\n            .doOnConnected(conn -&gt; conn\n                .addHandlerLast(new ReadTimeoutHandler(5))\n                .addHandlerLast(new WriteTimeoutHandler(5)))\n            .responseTimeout(Duration.ofSeconds(5));\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#102","title":"10.2 \u7ebf\u7a0b\u6c60\u4f18\u5316","text":"<ol> <li>\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u6c60\u914d\u7f6e <pre><code>@Configuration\npublic class ThreadPoolConfig {\n    @Bean\n    public ThreadPoolExecutor customThreadPool() {\n        return new ThreadPoolExecutor(\n            10, // \u6838\u5fc3\u7ebf\u7a0b\u6570\n            20, // \u6700\u5927\u7ebf\u7a0b\u6570\n            60L, // \u7a7a\u95f2\u7ebf\u7a0b\u5b58\u6d3b\u65f6\u95f4\n            TimeUnit.SECONDS,\n            new LinkedBlockingQueue&lt;&gt;(1000), // \u5de5\u4f5c\u961f\u5217\n            new ThreadFactoryBuilder().setNameFormat(\\\"mcp-pool-%d\\\").build(),\n            new ThreadPoolExecutor.CallerRunsPolicy() // \u62d2\u7edd\u7b56\u7565\n        );\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#103","title":"10.3 \u7f13\u5b58\u4f18\u5316","text":"<ol> <li>\u672c\u5730\u7f13\u5b58\u914d\u7f6e <pre><code>@Configuration\npublic class CacheConfig {\n    @Bean\n    public Cache&lt;String, Instance&gt; instanceCache() {\n        return Caffeine.newBuilder()\n            .expireAfterWrite(Duration.ofMinutes(5))\n            .maximumSize(1000)\n            .build();\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#11_1","title":"11. \u76d1\u63a7\u4e0e\u544a\u8b66","text":""},{"location":"nacos/nacos-api-code-anlysis/#111","title":"11.1 \u5065\u5eb7\u68c0\u67e5\u6307\u6807","text":"<ol> <li>\u670d\u52a1\u5065\u5eb7\u72b6\u6001\u76d1\u63a7 <pre><code>@Component\npublic class McpHealthIndicator implements HealthIndicator {\n    @Override\n    public Health health() {\n        return Health.up()\n            .withDetail(\\\"activeConnections\\\", getActiveConnections())\n            .withDetail(\\\"memoryUsage\\\", getMemoryUsage())\n            .withDetail(\\\"diskSpace\\\", getDiskSpaceUsage())\n            .build();\n    }\n}\n</code></pre></li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#112","title":"11.2 \u6027\u80fd\u6307\u6807\u6536\u96c6","text":"<ol> <li>Micrometer \u6307\u6807\u6536\u96c6 <pre><code>@Component\npublic class McpMetrics {\n    private final MeterRegistry registry;\n\n    public void recordRequestLatency(String endpoint, long latency) {\n        registry.timer(\\\"mcp.request.latency\\\", \n            \\\"endpoint\\\", endpoint).record(latency, TimeUnit.MILLISECONDS);\n    }\n\n    public void incrementErrorCount(String errorType) {\n        registry.counter(\\\"mcp.errors\\\", \n            \\\"type\\\", errorType).increment();\n    }\n}\n```\"}}\n\n\n\n## 12. \u95ee\u9898\u8bca\u65ad\u4e0e\u89e3\u51b3\u65b9\u6848\n\n### 12.1 \u542f\u52a8\u95ee\u9898\u5206\u6790\n\n1. \u7aef\u53e3\u5360\u7528\u95ee\u9898\n```log\nWeb server failed to start. Port 8061 was already in use.\n</code></pre></li> </ol> <p>\u89e3\u51b3\u65b9\u6848\uff1a <pre><code># application.yml\nserver:\n  port: ${SERVER_PORT:8061}  # \u4f7f\u7528\u73af\u5883\u53d8\u91cf\u6216\u4fee\u6539\u4e3a\u53ef\u7528\u7aef\u53e3\n</code></pre></p> <ol> <li>DNS \u89e3\u6790\u95ee\u9898 <pre><code>Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider\n</code></pre></li> </ol> <p>\u89e3\u51b3\u65b9\u6848\uff1a <pre><code>&lt;!-- pom.xml --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.netty&lt;/groupId&gt;\n    &lt;artifactId&gt;netty-resolver-dns-native-macos&lt;/artifactId&gt;\n    &lt;classifier&gt;osx-x86_64&lt;/classifier&gt;\n    &lt;version&gt;${netty.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre></p>"},{"location":"nacos/nacos-api-code-anlysis/#122","title":"12.2 \u6570\u636e\u5e93\u521d\u59cb\u5316\u5206\u6790","text":"<ol> <li>Schema \u521d\u59cb\u5316 <pre><code>Executing SQL script from class path resource [schema.sql] in 16 ms\n</code></pre></li> </ol> <p>\u5173\u952e\u4ee3\u7801\uff1a <pre><code>@Configuration\npublic class R2dbcConfig {\n    @Bean\n    ConnectionFactoryInitializer initializer(ConnectionFactory connectionFactory) {\n        ConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\n        initializer.setConnectionFactory(connectionFactory);\n\n        CompositeDatabasePopulator populator = new CompositeDatabasePopulator();\n        populator.addPopulators(new ResourceDatabasePopulator(new ClassPathResource(\\\"schema.sql\\\")));\n        populator.addPopulators(new ResourceDatabasePopulator(new ClassPathResource(\\\"data.sql\\\")));\n        initializer.setDatabasePopulator(populator);\n\n        return initializer;\n    }\n}\n</code></pre></p>"},{"location":"nacos/nacos-api-code-anlysis/#123","title":"12.3 \u8d44\u6e90\u91ca\u653e\u5206\u6790","text":"<ol> <li>\u4f18\u96c5\u5173\u95ed\u987a\u5e8f <pre><code>1. WebFluxSseServerTransportProvider shutdown\n2. HttpClientBeanHolder destruction\n3. ThreadPoolManager destruction\n4. NotifyCenter destruction\n</code></pre></li> </ol> <p>\u5b9e\u73b0\u4ee3\u7801\uff1a <pre><code>@Component\npublic class GracefulShutdownManager {\n    @PreDestroy\n    public void onShutdown() {\n        // 1. \u5173\u95ed SSE \u8fde\u63a5\n        webFluxSseServerTransportProvider.shutdown();\n\n        // 2. \u5173\u95ed HTTP \u5ba2\u6237\u7aef\n        httpClientBeanHolder.destroy();\n\n        // 3. \u5173\u95ed\u7ebf\u7a0b\u6c60\n        threadPoolManager.destroy();\n\n        // 4. \u5173\u95ed\u901a\u77e5\u4e2d\u5fc3\n        notifyCenter.destroy();\n    }\n}\n</code></pre></p>"},{"location":"nacos/nacos-api-code-anlysis/#13","title":"13. \u4f9d\u8d56\u7ba1\u7406","text":""},{"location":"nacos/nacos-api-code-anlysis/#131","title":"13.1 \u6838\u5fc3\u4f9d\u8d56\u7248\u672c","text":"<pre><code>&lt;properties&gt;\n    &lt;spring-boot.version&gt;3.2.5&lt;/spring-boot.version&gt;\n    &lt;spring-cloud.version&gt;2023.0.0&lt;/spring-cloud.version&gt;\n    &lt;nacos.version&gt;2.3.0&lt;/nacos.version&gt;\n    &lt;netty.version&gt;4.1.107.Final&lt;/netty.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;!-- Spring Boot --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Nacos --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;\n        &lt;artifactId&gt;nacos-client&lt;/artifactId&gt;\n        &lt;version&gt;${nacos.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- R2DBC --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-r2dbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"nacos/nacos-api-code-anlysis/#132","title":"13.2 \u4f9d\u8d56\u51b2\u7a81\u89e3\u51b3","text":"<ol> <li> <p>\u7248\u672c\u7ba1\u7406 <pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre></p> </li> <li> <p>\u6392\u9664\u51b2\u7a81\u4f9d\u8d56 <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-alibaba-nacos-config&lt;/artifactId&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;com.alibaba.nacos&lt;/groupId&gt;\n            &lt;artifactId&gt;nacos-client&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#14","title":"14. \u90e8\u7f72\u914d\u7f6e","text":""},{"location":"nacos/nacos-api-code-anlysis/#141","title":"14.1 \u73af\u5883\u914d\u7f6e","text":"<ol> <li> <p>\u5f00\u53d1\u73af\u5883 <pre><code># application-dev.yml\nspring:\n  r2dbc:\n    url: r2dbc:mysql://localhost:3306/mcp_dev\n    username: dev_user\n    password: dev_pass\n  cloud:\n    nacos:\n      server-addr: localhost:8848\n      username: nacos\n      password: nacos\n</code></pre></p> </li> <li> <p>\u751f\u4ea7\u73af\u5883 <pre><code># application-prod.yml\nspring:\n  r2dbc:\n    url: r2dbc:mysql://${DB_HOST}:${DB_PORT}/${DB_NAME}\n    username: ${DB_USER}\n    password: ${DB_PASS}\n  cloud:\n    nacos:\n      server-addr: ${NACOS_ADDR}\n      username: ${NACOS_USER}\n      password: ${NACOS_PASS}\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#142","title":"14.2 \u76d1\u63a7\u914d\u7f6e","text":"<ol> <li> <p>Actuator \u7aef\u70b9\u914d\u7f6e <pre><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: health,metrics,prometheus\n  endpoint:\n    health:\n      show-details: always\n  metrics:\n    tags:\n      application: ${spring.application.name}\n</code></pre></p> </li> <li> <p>\u65e5\u5fd7\u914d\u7f6e <pre><code>logging:\n  level:\n    root: INFO\n    com.nacos.mcp: DEBUG\n    org.springframework.r2dbc: DEBUG\n  pattern:\n    console: '%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n'\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos-api-code-anlysis/#15","title":"15. \u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":"<ol> <li>\u8fde\u63a5\u6c60\u4f18\u5316</li> <li>\u8c03\u6574 HTTP \u5ba2\u6237\u7aef\u8fde\u63a5\u6c60\u5927\u5c0f</li> <li>\u914d\u7f6e R2DBC \u8fde\u63a5\u6c60\u53c2\u6570</li> <li> <p>\u4f7f\u7528 Netty \u53c2\u6570\u8c03\u4f18</p> </li> <li> <p>\u7f13\u5b58\u7b56\u7565</p> </li> <li>\u5b9e\u73b0\u591a\u7ea7\u7f13\u5b58</li> <li>\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565</li> <li> <p>\u6dfb\u52a0\u7f13\u5b58\u9884\u70ed\u673a\u5236</p> </li> <li> <p>\u7ebf\u7a0b\u6c60\u4f18\u5316</p> </li> <li>\u6839\u636e\u4e1a\u52a1\u573a\u666f\u8c03\u6574\u7ebf\u7a0b\u6c60\u53c2\u6570</li> <li>\u5b9e\u73b0\u7ebf\u7a0b\u6c60\u76d1\u63a7</li> <li>\u6dfb\u52a0\u7ebf\u7a0b\u6c60\u4fdd\u62a4\u673a\u5236\"}}</li> </ol>"},{"location":"nacos/nacos-api-code/","title":"Nacos API \u4e0e\u4ee3\u7801\u5bf9\u5e94\u5173\u7cfb\u5206\u6790","text":"<p>\u672c\u6587\u6863\u5206\u6790 spring-ai-alibaba-mcp \u9879\u76ee\u4e2d Nacos API \u7684\u4f7f\u7528\u60c5\u51b5\u53ca\u5176\u5bf9\u5e94\u7684\u4ee3\u7801\u5b9e\u73b0\u3002</p>"},{"location":"nacos/nacos-api-code/#1-api","title":"1. \u670d\u52a1\u6ce8\u518c API","text":""},{"location":"nacos/nacos-api-code/#api","title":"API \u8c03\u7528","text":"<pre><code>curl -X POST \"127.0.0.1:8848/nacos/v3/client/ns/instance\" \\\n  -d \"serviceName=mcp-server-v2&amp;ip=127.0.0.1&amp;port=3306\"\n</code></pre>"},{"location":"nacos/nacos-api-code/#_1","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<p>\u4e3b\u8981\u5b9e\u73b0\u7c7b\uff1a<code>NacosMcpRegister</code> \u6ce8\u518c\u89e6\u53d1\u70b9\uff1a<code>onApplicationEvent(WebServerInitializedEvent event)</code></p> <pre><code>// NacosMcpRegister.java\nInstance instance = new Instance();\ninstance.setIp(nacosMcpProperties.getIp());\ninstance.setPort(port);\ninstance.setEphemeral(nacosMcpRegistryProperties.isServiceEphemeral());\ninstance.setMetadata(metadata);\nnamingService.registerInstance(\n    this.serverInfo.name() + McpNacosConstant.SERVER_NAME_SUFFIX,\n    nacosMcpRegistryProperties.getServiceGroup(), \n    instance\n);\n</code></pre>"},{"location":"nacos/nacos-api-code/#2-api","title":"2. \u914d\u7f6e\u67e5\u8be2 API","text":""},{"location":"nacos/nacos-api-code/#api_1","title":"API \u8c03\u7528","text":"<pre><code>curl -X GET \"http://localhost:8848/nacos/v2/cs/history/configs?pageNo=1&amp;pageSize=100&amp;namespaceId=public&amp;appName=mcp-server-v2\"\n</code></pre>"},{"location":"nacos/nacos-api-code/#_2","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<p>\u4e3b\u8981\u5b9e\u73b0\u7c7b\uff1a<code>NacosMcpRegister</code></p> <pre><code>// NacosMcpRegister.java\nString content = configService.getConfig(\n    this.serverInfo.name() + McpNacosConstant.SERVER_CONFIG_SUFFIX,\n    McpNacosConstant.SERVER_GROUP, \n    TIME_OUT_MS\n);\n</code></pre>"},{"location":"nacos/nacos-api-code/#3-api","title":"3. \u7248\u672c\u4fe1\u606f\u914d\u7f6e API","text":""},{"location":"nacos/nacos-api-code/#api_2","title":"API \u8c03\u7528","text":"<pre><code>curl -X GET '127.0.0.1:8848/nacos/v3/client/cs/config?dataId=7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-mcp-versions.json&amp;groupName=mcp-server-versions'\n</code></pre>"},{"location":"nacos/nacos-api-code/#_3","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<pre><code>// NacosMcpRegister.java\nServerVersionDetail serverVersionDetail = new ServerVersionDetail();\nserverVersionDetail.setVersion(this.serverInfo.version());\nMcpServerBasicInfo serverBasicInfo = new McpServerBasicInfo();\nserverBasicInfo.setName(this.serverInfo.name());\nserverBasicInfo.setVersionDetail(serverVersionDetail);\n</code></pre>"},{"location":"nacos/nacos-api-code/#4-api","title":"4. \u670d\u52a1\u5668\u914d\u7f6e API","text":""},{"location":"nacos/nacos-api-code/#api_3","title":"API \u8c03\u7528","text":"<pre><code>curl -X GET '127.0.0.1:8848/nacos/v3/client/cs/config?dataId=7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-1.0.1-mcp-server.json&amp;groupName=mcp-server'\n</code></pre>"},{"location":"nacos/nacos-api-code/#_4","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<pre><code>// NacosMcpRegister.java\nMcpServerRemoteServiceConfig remoteServerConfigInfo = new McpServerRemoteServiceConfig();\nString contextPath = this.nacosMcpRegistryProperties.getSseExportContextPath();\nif (StringUtils.isBlank(contextPath)) {\n    contextPath = \"\";\n}\nremoteServerConfigInfo.setExportPath(contextPath + this.mcpServerProperties.getSseEndpoint());\nserverBasicInfo.setRemoteServerConfig(remoteServerConfigInfo);\n</code></pre>"},{"location":"nacos/nacos-api-code/#5-api","title":"5. \u5de5\u5177\u914d\u7f6e API","text":""},{"location":"nacos/nacos-api-code/#api_4","title":"API \u8c03\u7528","text":"<pre><code>curl -X GET '127.0.0.1:8848/nacos/v3/client/cs/config?dataId=7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-1.0.1-mcp-tools.json&amp;groupName=mcp-tools'\n</code></pre>"},{"location":"nacos/nacos-api-code/#_5","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<pre><code>// NacosMcpRegister.java\nif (this.serverCapabilities.tools() != null) {\n    List&lt;McpSchema.Tool&gt; toolsNeedtoRegister = this.tools.stream()\n        .map(McpServerFeatures.AsyncToolSpecification::tool)\n        .toList();\n    mcpToolSpec.setTools(toolsToNacosList);\n}\n</code></pre>"},{"location":"nacos/nacos-api-code/#6-api","title":"6. \u5b9e\u4f8b\u5217\u8868\u67e5\u8be2 API","text":""},{"location":"nacos/nacos-api-code/#api_5","title":"API \u8c03\u7528","text":"<pre><code>curl -X GET \"http://localhost:8848/nacos/v2/ns/instance/list?serviceName=mcp-server-v2&amp;groupName=mcp-server\"\n</code></pre>"},{"location":"nacos/nacos-api-code/#_6","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<p>\u4e3b\u8981\u5b9e\u73b0\u7c7b\uff1a<code>McpServerRegistry</code></p> <pre><code>// McpServerRegistry.java\nList&lt;Instance&gt; instances = namingService.selectInstances(SERVICE_NAME, GROUP_NAME, true);\ninstances.forEach(mcpServerRegistry::registerInstance);\n</code></pre>"},{"location":"nacos/nacos-api-code/#7","title":"7. \u914d\u7f6e\u5c5e\u6027\u5b9a\u4e49","text":"<pre><code>@ConfigurationProperties(prefix = NacosMcpRegistryProperties.CONFIG_PREFIX)\npublic class NacosMcpRegistryProperties {\n    public static final String CONFIG_PREFIX = \"spring.ai.alibaba.mcp.nacos.registry\";\n    String serviceGroup = \"DEFAULT_GROUP\";\n    String serviceName;\n    String sseExportContextPath;\n    boolean serviceRegister = true;\n    boolean serviceEphemeral = true;\n}\n</code></pre>"},{"location":"nacos/nacos-api-code/#8","title":"8. \u81ea\u52a8\u914d\u7f6e\u7c7b","text":"<pre><code>@EnableConfigurationProperties({ \n    NacosMcpRegistryProperties.class, \n    NacosMcpProperties.class,\n    McpServerProperties.class \n})\n@AutoConfiguration(after = McpServerAutoConfiguration.class)\n@ConditionalOnProperty(\n    prefix = McpServerProperties.CONFIG_PREFIX, \n    name = \"enabled\", \n    havingValue = \"true\",\n    matchIfMissing = true\n)\npublic class NacosMcpRegistryAutoConfiguration {\n    // \u914d\u7f6e\u7c7b\u5b9e\u73b0\n}\n</code></pre> <p>\u8fd9\u4e9b API \u548c\u4ee3\u7801\u7684\u5bf9\u5e94\u5173\u7cfb\u663e\u793a\u4e86\u9879\u76ee\u5982\u4f55\u4f7f\u7528 Nacos \u8fdb\u884c\u670d\u52a1\u6ce8\u518c\u3001\u914d\u7f6e\u7ba1\u7406\u548c\u670d\u52a1\u53d1\u73b0\u3002\u6bcf\u4e2a API \u90fd\u6709\u5176\u5bf9\u5e94\u7684\u4ee3\u7801\u5b9e\u73b0\uff0c\u5e76\u4e14\u901a\u8fc7\u914d\u7f6e\u5c5e\u6027\u6765\u63a7\u5236\u5176\u884c\u4e3a\u3002 </p>"},{"location":"nacos/nacos-api/","title":"Nacos api","text":""},{"location":"nacos/nacos-api/#_1","title":"\u6ce8\u518c\u63a5\u53e3","text":"<p>curl -X POST \"127.0.0.1:8848/nacos/v3/client/ns/instance\" -d \"serviceName=mcp-server-v2&amp;ip=127.0.0.1&amp;port=3306\"</p>"},{"location":"nacos/nacos-api/#_2","title":"\u67e5\u8be2\u914d\u7f6e\u4fe1\u606f","text":""},{"location":"nacos/nacos-api/#_3","title":"\u5165\u53c2\uff1a \u547d\u540d\u7a7a\u95f4\uff0c\u548c \u5e94\u7528\u540d","text":""},{"location":"nacos/nacos-api/#dataidappnamegroup","title":"\u51fa\u53c2\uff1a dataId\uff0cappName\uff0cgroup","text":"<p>curl -X GET \"http://localhost:8848/nacos/v2/cs/history/configs?pageNo=1&amp;pageSize=100&amp;namespaceId=public&amp;appName=mcp-server-v2\" -H \"Content-Type: application/x-www-form-urlencoded\" {\"code\":0,\"message\":\"success\",\"data\":[{\"id\":\"0\",\"dataId\":\"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-1.0.1-mcp-tools.json\",\"group\":\"mcp-tools\",\"content\":null,\"md5\":null,\"encryptedDataKey\":null,\"tenant\":\"public\",\"appName\":\"mcp-server-v2\",\"type\":\"json\",\"lastModified\":1752548450169},{\"id\":\"0\",\"dataId\":\"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-mcp-versions.json\",\"group\":\"mcp-server-versions\",\"content\":null,\"md5\":null,\"encryptedDataKey\":null,\"tenant\":\"public\",\"appName\":\"mcp-server-v2\",\"type\":\"json\",\"lastModified\":1752548450173},{\"id\":\"0\",\"dataId\":\"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-1.0.1-mcp-server.json\",\"group\":\"mcp-server\",\"content\":null,\"md5\":null,\"encryptedDataKey\":null,\"tenant\":\"public\",\"appName\":\"mcp-server-v2\",\"type\":\"json\",\"lastModified\":1752548450176},{\"id\":\"0\",\"dataId\":\"be2bb98c-0adc-4927-9756-4f212aeeae53-1.0.1-SNAPSHOT-mcp-tools.json\",\"group\":\"mcp-tools\",\"content\":null,\"md5\":null,\"encryptedDataKey\":null,\"tenant\":\"public\",\"appName\":\"webflux-mcp-server\",\"type\":\"json\",\"lastModified\":1752548951680},{\"id\":\"0\",\"dataId\":\"be2bb98c-0adc-4927-9756-4f212aeeae53-mcp-versions.json\",\"group\":\"mcp-server-versions\",\"content\":null,\"md5\":null,\"encryptedDataKey\":null,\"tenant\":\"public\",\"appName\":\"webflux-mcp-server\",\"type\":\"json\",\"lastModified\":1752548951687},{\"id\":\"0\",\"dataId\":\"be2bb98c-0adc-4927-9756-4f212aeeae53-1.0.1-SNAPSHOT-mcp-server.json\",\"group\":\"mcp-server\",\"content\":null,\"md5\":null,\"encryptedDataKey\":null,\"tenant\":\"public\",\"appName\":\"webflux-mcp-server\",\"type\":\"json\",\"lastModified\":1752548951694}]}</p>"},{"location":"nacos/nacos-api/#dataidgroupnamemcp-server-versions","title":"\u6839\u636edataId\u83b7\u53d6\u5f53\u524d\u53ef\u7528\u7248\u672c\u4fe1\u606f\u7684\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0cgroupName=mcp-server-versions","text":""},{"location":"nacos/nacos-api/#dataidgroupname","title":"\u5165\u53c2\uff1adataId\uff0cgroupName","text":""},{"location":"nacos/nacos-api/#datacontent","title":"\u51fa\u53c2\uff1adata.content","text":""},{"location":"nacos/nacos-api/#version","title":"version\u7ed3\u6784\uff1a","text":"<p>{     \"id\": \"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5\",     \"name\": \"mcp-server-v2\",     \"protocol\": \"mcp-sse\",     \"frontProtocol\": \"mcp-sse\",     \"description\": \"mcp-server-v2\",     \"enabled\": true,     \"capabilities\": [         \"TOOL\"     ],     \"latestPublishedVersion\": \"1.0.1\",     \"versionDetails\": [         {             \"version\": \"1.0.1\",             \"release_date\": \"2025-07-15T03:00:50Z\"         }     ] }</p>"},{"location":"nacos/nacos-api/#_4","title":"\u5b9e\u9645\u65b9\u6cd5\u4e3e\u4f8b","text":""},{"location":"nacos/nacos-api/#_5","title":"\u5b9e\u9645\u65b9\u6cd5\u4e3e\u4f8b","text":"<p>curl -X GET '127.0.0.1:8848/nacos/v3/client/cs/config?dataId=7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-mcp-versions.json&amp;groupName=mcp-server-versions'</p>"},{"location":"nacos/nacos-api/#_6","title":"\u6267\u884c\u7ed3\u679c","text":"<p>{\"code\":0,\"message\":\"success\",\"data\":{\"resultCode\":200,\"errorCode\":0,\"message\":null,\"requestId\":null,\"content\":\"{\\\"id\\\":\\\"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5\\\",\\\"name\\\":\\\"mcp-server-v2\\\",\\\"protocol\\\":\\\"mcp-sse\\\",\\\"frontProtocol\\\":\\\"mcp-sse\\\",\\\"description\\\":\\\"mcp-server-v2\\\",\\\"enabled\\\":true,\\\"capabilities\\\":[\\\"TOOL\\\"],\\\"latestPublishedVersion\\\":\\\"1.0.1\\\",\\\"versionDetails\\\":[{\\\"version\\\":\\\"1.0.1\\\",\\\"release_date\\\":\\\"2025-07-15T03:00:50Z\\\"}]}\",\"encryptedDataKey\":null,\"contentType\":\"json\",\"md5\":\"41963bb16f3b1771bb3a7ef3c89a0b29\",\"lastModified\":1752548450173,\"tag\":null,\"beta\":false,\"success\":true}}</p>"},{"location":"nacos/nacos-api/#dataidgroupnamemcp-server","title":"\u6839\u636edataId\u83b7\u53d6\u5f53\u524d\u53ef\u7528\u7248\u672c\u4fe1\u606f\u7684\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0cgroupName=mcp-server","text":""},{"location":"nacos/nacos-api/#dataidgroupname_1","title":"\u5165\u53c2\uff1adataId\uff0cgroupName","text":""},{"location":"nacos/nacos-api/#datacontenttools","title":"\u51fa\u53c2\uff1adata.content.tools","text":""},{"location":"nacos/nacos-api/#version_1","title":"version\u7ed3\u6784\uff1a","text":"<p>{     \"id\": \"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5\",     \"name\": \"mcp-server-v2\",     \"protocol\": \"mcp-sse\",     \"frontProtocol\": \"mcp-sse\",     \"description\": \"mcp-server-v2\",     \"versionDetail\": {         \"version\": \"1.0.1\",         \"release_date\": \"2025-07-15T03:00:50Z\"     },     \"remoteServerConfig\": {         \"serviceRef\": {             \"namespaceId\": \"public\",             \"groupName\": \"mcp-server\",             \"serviceName\": \"mcp-server-v2\"         },         \"exportPath\": \"/sse\"     },     \"enabled\": true,     \"capabilities\": [         \"TOOL\"     ],     \"toolsDescriptionRef\": \"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-1.0.1-mcp-tools.json\" }</p> <p>curl -X GET '127.0.0.1:8848/nacos/v3/client/cs/config?dataId=7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-1.0.1-mcp-server.json&amp;groupName=mcp-server'</p>"},{"location":"nacos/nacos-api/#_7","title":"\u6267\u884c\u7ed3\u679c","text":"<p>{\"code\":0,\"message\":\"success\",\"data\":{\"resultCode\":200,\"errorCode\":0,\"message\":null,\"requestId\":null,\"content\":\"{\\\"id\\\":\\\"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5\\\",\\\"name\\\":\\\"mcp-server-v2\\\",\\\"protocol\\\":\\\"mcp-sse\\\",\\\"frontProtocol\\\":\\\"mcp-sse\\\",\\\"description\\\":\\\"mcp-server-v2\\\",\\\"versionDetail\\\":{\\\"version\\\":\\\"1.0.1\\\",\\\"release_date\\\":\\\"2025-07-15T03:00:50Z\\\"},\\\"remoteServerConfig\\\":{\\\"serviceRef\\\":{\\\"namespaceId\\\":\\\"public\\\",\\\"groupName\\\":\\\"mcp-server\\\",\\\"serviceName\\\":\\\"mcp-server-v2\\\"},\\\"exportPath\\\":\\\"/sse\\\"},\\\"enabled\\\":true,\\\"capabilities\\\":[\\\"TOOL\\\"],\\\"toolsDescriptionRef\\\":\\\"7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-1.0.1-mcp-tools.json\\\"}\",\"encryptedDataKey\":null,\"contentType\":\"json\",\"md5\":\"0e716166b48199f9a737a765e3f10bca\",\"lastModified\":1752548450176,\"tag\":null,\"beta\":false,\"success\":true}}</p>"},{"location":"nacos/nacos-api/#dataidtoolsgroupnamemcp-tools","title":"\u6839\u636edataId\u83b7\u53d6tools\u7684\u914d\u7f6e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0cgroupName=mcp-tools","text":""},{"location":"nacos/nacos-api/#dataidgroupname_2","title":"\u5165\u53c2\uff1adataId\uff0cgroupName","text":""},{"location":"nacos/nacos-api/#datacontenttools_1","title":"\u51fa\u53c2\uff1adata.content.tools","text":""},{"location":"nacos/nacos-api/#tools","title":"tools\u7ed3\u6784\uff1a","text":"<p>{     \"name\": \"deletePerson\",     \"description\": \"Delete a person from the database\",     \"inputSchema\": {         \"type\": \"object\",         \"properties\": {             \"id\": {                 \"type\": \"integer\",                 \"format\": \"int64\",                 \"description\": \"Person's ID\"             }         },         \"required\": [             \"id\"         ],         \"additionalProperties\": false     } }</p>"},{"location":"nacos/nacos-api/#_8","title":"\u5b9e\u9645\u65b9\u6cd5\u4e3e\u4f8b","text":"<p>curl -X GET '127.0.0.1:8848/nacos/v3/client/cs/config?dataId=7dfbf3c6-fd63-4c49-9c11-cd6e6ed735a5-1.0.1-mcp-tools.json&amp;groupName=mcp-tools'</p>"},{"location":"nacos/nacos-api/#_9","title":"\u6267\u884c\u7ed3\u679c","text":"<p>{\"code\":0,\"message\":\"success\",\"data\":{\"resultCode\":200,\"errorCode\":0,\"message\":null,\"requestId\":null,\"content\":\"{\\\"tools\\\":[{\\\"name\\\":\\\"deletePerson\\\",\\\"description\\\":\\\"Delete a person from the database\\\",\\\"inputSchema\\\":{\\\"type\\\":\\\"object\\\",\\\"properties\\\":{\\\"id\\\":{\\\"type\\\":\\\"integer\\\",\\\"format\\\":\\\"int64\\\",\\\"description\\\":\\\"Person's ID\\\"}},\\\"required\\\":[\\\"id\\\"],\\\"additionalProperties\\\":false}},{\\\"name\\\":\\\"getPersonById\\\",\\\"description\\\":\\\"Get a person by their ID\\\",\\\"inputSchema\\\":{\\\"type\\\":\\\"object\\\",\\\"properties\\\":{\\\"id\\\":{\\\"type\\\":\\\"integer\\\",\\\"format\\\":\\\"int64\\\",\\\"description\\\":\\\"Person's ID\\\"}},\\\"required\\\":[\\\"id\\\"],\\\"additionalProperties\\\":false}},{\\\"name\\\":\\\"getAllPersons\\\",\\\"description\\\":\\\"Get all persons from the database\\\",\\\"inputSchema\\\":{\\\"type\\\":\\\"object\\\",\\\"properties\\\":{},\\\"required\\\":[],\\\"additionalProperties\\\":false}},{\\\"name\\\":\\\"get_system_info\\\",\\\"description\\\":\\\"Get system information\\\",\\\"inputSchema\\\":{\\\"type\\\":\\\"object\\\",\\\"properties\\\":{},\\\"required\\\":[],\\\"additionalProperties\\\":false}},{\\\"name\\\":\\\"list_servers\\\",\\\"description\\\":\\\"List all registered servers\\\",\\\"inputSchema\\\":{\\\"type\\\":\\\"object\\\",\\\"properties\\\":{},\\\"required\\\":[],\\\"additionalProperties\\\":false}},{\\\"name\\\":\\\"addPerson\\\",\\\"description\\\":\\\"Add a new person to the database\\\",\\\"inputSchema\\\":{\\\"type\\\":\\\"object\\\",\\\"properties\\\":{\\\"firstName\\\":{\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"Person's first name\\\"},\\\"lastName\\\":{\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"Person's last name\\\"},\\\"age\\\":{\\\"type\\\":\\\"integer\\\",\\\"format\\\":\\\"int32\\\",\\\"description\\\":\\\"Person's age\\\"},\\\"nationality\\\":{\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"Person's nationality\\\"},\\\"gender\\\":{\\\"type\\\":\\\"string\\\",\\\"description\\\":\\\"Person's gender (MALE, FEMALE, OTHER)\\\"}},\\\"required\\\":[\\\"firstName\\\",\\\"lastName\\\",\\\"age\\\",\\\"nationality\\\",\\\"gender\\\"],\\\"additionalProperties\\\":false}}],\\\"toolsMeta\\\":{}}\",\"encryptedDataKey\":null,\"contentType\":\"json\",\"md5\":\"e955eb18dd115772721583b5c58b0ccc\",\"lastModified\":1752548450169,\"tag\":null,\"beta\":false,\"success\":true}}</p>"},{"location":"nacos/nacos-api/#_10","title":"\u67e5\u8be2\u5b9e\u4f8b\u5217\u8868","text":""},{"location":"nacos/nacos-api/#servicenamegroupname","title":"\u5165\u53c2\uff1a serviceName\uff0cgroupName","text":""},{"location":"nacos/nacos-api/#ip","title":"\u51fa\u53c2\uff1a ip\uff0c\u5065\u5eb7\u5ea6\uff0c\u6743\u91cd\uff0c\u96c6\u7fa4\u8282\u70b9\u7b49","text":"<p>curl -X GET \"http://localhost:8848/nacos/v2/ns/instance/list?serviceName=mcp-server-v2&amp;groupName=mcp-server\" {\"code\":0,\"message\":\"success\",\"data\":{\"name\":\"mcp-server@@mcp-server-v2\",\"groupName\":\"mcp-server\",\"clusters\":\"\",\"cacheMillis\":10000,\"hosts\":[{\"instanceId\":\"192.168.0.103#8062#null#mcp-server@@mcp-server-v2\",\"ip\":\"192.168.0.103\",\"port\":8062,\"weight\":1.0,\"healthy\":true,\"enabled\":true,\"ephemeral\":true,\"clusterName\":\"DEFAULT\",\"serviceName\":\"mcp-server@@mcp-server-v2\",\"metadata\":{},\"ipDeleteTimeout\":30000,\"instanceIdGenerator\":\"simple\",\"instanceHeartBeatTimeOut\":15000,\"instanceHeartBeatInterval\":5000}],\"lastRefTime\":1752552537798,\"checksum\":\"\",\"allIps\":false,\"reachProtectionThreshold\":false,\"valid\":true}}</p>"},{"location":"nacos/nacos-register-json/","title":"Nacos register json","text":"<p>mcp server\u9879\u76ee\u7684\u540d\u79f0\u4e3a webflux-mcp-server</p> <p>nacos\u7684 configurationManagement\u4e2d\u6dfb\u52a0 * webflux-mcp-server-mcp-server.json * webflux-mcp-server-mcp-tools.json</p> <p>webflux-mcp-server-mcp-server.json \u7684\u5185\u5bb9\u5982\u4e0b\uff1a <pre><code>DataID:webflux-mcp-server-mcp-server.json\nGroup:mcp-server\nMD5:dd15549b91f46c6f68f7d381ec5e0760\n{\n  \"protocol\" : \"mcp-sse\",\n  \"name\" : \"webflux-mcp-server\",\n  \"description\" : \"webflux-mcp-server\",\n  \"version\" : \"1.0.0\",\n  \"enabled\" : true,\n  \"remoteServerConfig\" : {\n    \"serviceRef\" : {\n      \"namespaceId\" : \"public\",\n      \"groupName\" : \"mcp-server\",\n      \"serviceName\" : \"webflux-mcp-server-mcp-service\"\n    },\n    \"exportPath\" : \"/sse\"\n  },\n  \"toolsDescriptionRef\" : \"webflux-mcp-server-mcp-tools.json\"\n}\n</code></pre></p> <p>webflux-mcp-server-mcp-tools.json \u7684\u5185\u5bb9\u5982\u4e0b\uff1a <pre><code>DataID:webflux-mcp-server-mcp-tools.json\nGroup:mcp-tools\nMD5:cfbb96a3e88b5f211470be5a88ca61df\n{\n  \"tools\" : [ {\n    \"name\" : \"getCityTimeMethod\",\n    \"description\" : \"Get the time of a specified city.\",\n    \"inputSchema\" : {\n      \"type\" : \"object\",\n      \"properties\" : {\n        \"arg0\" : {\n          \"type\" : \"string\",\n          \"description\" : \"Time zone id, such as Asia/Shanghai\"\n        }\n      },\n      \"required\" : [ \"arg0\" ],\n      \"additionalProperties\" : false\n    }\n  } ],\n  \"toolsMeta\" : {\n    \"getCityTimeMethod\" : {\n      \"enabled\" : true\n    }\n  }\n}\n</code></pre></p> <p>nacos\u7684 serviceManagement \u4e2d\u914d\u7f6e\u5982\u4e0b\uff1a Group: mcp-server \u5143\u6570\u636e: <pre><code>server.md5=dd15549b91f46c6f68f7d381ec5e0760\ntools.names=getCityTimeMethod\n</code></pre></p> <p>TODO: nacos\u7684 mcpServerManagement\u4e3a\u7a7a\uff0c\u4e0d\u77e5\u9053\u914d\u7f6e\u65b9\u6cd5</p> <p>\u6ce8\u518c\u7c7b\u53c2\u8003\uff1a/Users/shine/projects.mcp-router-sse-parent/mcp-gateway-example-jdk17/mcp-server/src/main/java/com/alibaba/cloud/ai/mcp/nacos/registry/NacosMcpRegister.java \u4ee5\u4e0ajson\u4fe1\u606f\u53c2\u8003 /Users/shine/projects.mcp-router-sse-parent/mcp-gateway-example-jdk17/mcp-server/src/main/java/com/alibaba/cloud/ai/mcp/nacos/registry/model/McpServerInfo.java /Users/shine/projects.mcp-router-sse-parent/mcp-gateway-example-jdk17/mcp-server/src/main/java/com/alibaba/cloud/ai/mcp/nacos/registry/model/RemoteServerConfigInfo.java /Users/shine/projects.mcp-router-sse-parent/mcp-gateway-example-jdk17/mcp-server/src/main/java/com/alibaba/cloud/ai/mcp/nacos/registry/model/ServiceRefInfo.java /Users/shine/projects.mcp-router-sse-parent/mcp-gateway-example-jdk17/mcp-server/src/main/java/com/alibaba/cloud/ai/mcp/nacos/registry/model/ToolMetaInfo.java /Users/shine/projects.mcp-router-sse-parent/mcp-gateway-example-jdk17/mcp-server/src/main/java/com/alibaba/cloud/ai/mcp/nacos/model/McpToolsInfo.java</p>"},{"location":"nacos/nacosRegist/","title":"nacosRegist","text":"<p>\u597d\u7684\uff0c\u60a8\u7684\u9700\u6c42\u5206\u4e3a\u56db\u4e2a\u90e8\u5206\uff0c\u4e0b\u9762\u6211\u4f1a\u5206\u6b65\u68b3\u7406\u548c\u5b9e\u73b0\uff1a</p>"},{"location":"nacos/nacosRegist/#1-nacos","title":"1. nacos \u914d\u7f6e\u4fe1\u606f\u7ed3\u6784\u4e0e\u670d\u52a1\u6ce8\u518c\u4fe1\u606f\u68b3\u7406","text":""},{"location":"nacos/nacosRegist/#11-dataidanlysismddataidbodymddataidanlysisdetailmd","title":"1.1 \u914d\u7f6e\u7ed3\u6784\u603b\u7ed3\uff08\u53c2\u8003 dataIdAnlysis.md\u3001dataIdBody.md\u3001dataIdAnlysisDetail.md\uff09","text":"<ul> <li> <p>mcp-server.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>   group: <code>mcp-server</code>   \u5185\u5bb9\uff1a\u670d\u52a1\u4e3b\u914d\u7f6e\u4fe1\u606f\uff0c\u542b name\u3001version\u3001protocol\u3001remoteServerConfig\u3001toolsDescriptionRef \u7b49</p> </li> <li> <p>mcp-tools.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-tools.json</code>   group: <code>mcp-tools</code>   \u5185\u5bb9\uff1a\u670d\u52a1\u4e0b\u6240\u6709\u5de5\u5177\u7684\u63cf\u8ff0\u548c\u5143\u6570\u636e</p> </li> <li> <p>mcp-versions.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-mcp-versions.json</code>   group: <code>mcp-server-versions</code>   \u5185\u5bb9\uff1a\u8be5\u670d\u52a1\u6240\u6709\u5df2\u6ce8\u518c\u7248\u672c\u7684\u7d22\u5f15</p> </li> </ul>"},{"location":"nacos/nacosRegist/#_1","title":"\u5173\u8054\u5173\u7cfb","text":"<ul> <li>\u6ce8\u518c\u670d\u52a1\u65f6\uff0c\u5148\u5199 mcp-server.json\uff0c\u518d\u5199 mcp-tools.json\uff0c\u4e8c\u8005\u901a\u8fc7 toolsDescriptionRef \u5173\u8054</li> <li>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7\u7d22\u5f15</li> </ul>"},{"location":"nacos/nacosRegist/#_2","title":"\u793a\u4f8b","text":"<ul> <li>6eff2b4f-8c15-455e-86a0-302901241482-1.0.1-mcp-server.json</li> <li>6eff2b4f-8c15-455e-86a0-302901241482-1.0.1-mcp-tools.json</li> <li>6eff2b4f-8c15-455e-86a0-302901241482-mcp-versions.json</li> </ul>"},{"location":"nacos/nacosRegist/#2-spring-ai-alibaba-mcp","title":"2. spring-ai-alibaba-mcp \u9879\u76ee\u5185\u90e8\u539f\u7406\u5206\u6790","text":""},{"location":"nacos/nacosRegist/#21","title":"2.1 \u6ce8\u518c\u6d41\u7a0b\uff08\u6e90\u7801\u5206\u6790\uff09","text":"<ul> <li>\u4e3b\u8981\u5728 <code>spring-ai-alibaba-mcp-nacos2</code> \u548c <code>spring-ai-alibaba-mcp-nacos</code> \u6a21\u5757\u5b9e\u73b0</li> <li>\u5173\u952e\u7c7b\u5982 <code>NacosMcpRegister</code>\uff0c\u6ce8\u518c\u65f6\u4f1a\uff1a</li> <li>\u751f\u6210 dataId\uff08\u5982 <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>\uff09</li> <li>\u901a\u8fc7 <code>configService.publishConfig</code> \u5199\u5165 nacos</li> <li>mcp-server.json \u91cc\u7684 <code>toolsDescriptionRef</code> \u5b57\u6bb5\u6307\u5411 mcp-tools.json \u7684 dataId</li> <li>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7</li> </ul>"},{"location":"nacos/nacosRegist/#22","title":"2.2 \u67e5\u8be2\u6d41\u7a0b","text":"<ul> <li>\u67e5\u8be2\u670d\u52a1\u65f6\uff0c\u5148\u67e5 mcp-server.json\uff0c\u83b7\u53d6\u4e3b\u914d\u7f6e\u4fe1\u606f\u548c toolsDescriptionRef</li> <li>\u518d\u6839\u636e toolsDescriptionRef \u67e5 mcp-tools.json\uff0c\u83b7\u53d6\u5de5\u5177\u8be6\u60c5</li> <li>\u7248\u672c\u7ba1\u7406\u901a\u8fc7 mcp-versions.json \u5b9e\u73b0</li> </ul>"},{"location":"nacos/nacosRegist/#3-mcp-router-v3","title":"3. \u67e5\u627e mcp-router-v3 \u9879\u76ee\u4e2d\u7684\u6ce8\u518c\u63a5\u53e3\u548c\u67e5\u8be2\u63a5\u53e3","text":""},{"location":"nacos/nacosRegist/#31","title":"3.1 \u67e5\u627e\u6ce8\u518c\u63a5\u53e3","text":"<ul> <li>\u76ee\u6807\uff1a\u5b9a\u4f4d mcp-router-v3 \u4e2d\u7528\u4e8e\u670d\u52a1\u6ce8\u518c\u7684 HTTP \u63a5\u53e3\uff08\u5982 POST /register\u3001/service/register \u7b49\uff09</li> </ul>"},{"location":"nacos/nacosRegist/#32","title":"3.2 \u67e5\u627e\u67e5\u8be2\u63a5\u53e3","text":"<ul> <li>\u76ee\u6807\uff1a\u5b9a\u4f4d mcp-router-v3 \u4e2d\u7528\u4e8e\u670d\u52a1\u4fe1\u606f\u67e5\u8be2\u7684 HTTP \u63a5\u53e3\uff08\u5982 GET /query\u3001/service/info\u3001/service/list \u7b49\uff09</li> </ul>"},{"location":"nacos/nacosRegist/#4-curl","title":"4. \u751f\u6210 curl \u6d4b\u8bd5\u811a\u672c","text":"<ul> <li>\u6839\u636e\u4e0a\u9762\u67e5\u5230\u7684\u63a5\u53e3\uff0c\u751f\u6210 curl \u547d\u4ee4\u7528\u4e8e\u6ce8\u518c\u548c\u67e5\u8be2\u670d\u52a1</li> </ul>"},{"location":"nacos/nacosRegist/#31-32-curl","title":"\u4e0b\u9762\u6211\u5c06\u4f9d\u6b21\u5b8c\u6210 3.1 \u548c 3.2 \u7684\u63a5\u53e3\u67e5\u627e\uff0c\u5e76\u751f\u6210 curl \u811a\u672c\u3002","text":"<p>Ran tool</p>"},{"location":"nacos/nacosRegist/#1-nacos_1","title":"1. nacos \u914d\u7f6e\u4fe1\u606f\u7ed3\u6784\u4e0e\u670d\u52a1\u6ce8\u518c\u4fe1\u606f\u68b3\u7406","text":""},{"location":"nacos/nacosRegist/#_3","title":"\u7ed3\u6784\u603b\u7ed3","text":"<ul> <li> <p>mcp-server.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>   group: <code>mcp-server</code>   \u5185\u5bb9\uff1a\u670d\u52a1\u4e3b\u914d\u7f6e\u4fe1\u606f\uff0c\u542b name\u3001version\u3001protocol\u3001remoteServerConfig\u3001toolsDescriptionRef \u7b49</p> </li> <li> <p>mcp-tools.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-tools.json</code>   group: <code>mcp-tools</code>   \u5185\u5bb9\uff1a\u670d\u52a1\u4e0b\u6240\u6709\u5de5\u5177\u7684\u63cf\u8ff0\u548c\u5143\u6570\u636e</p> </li> <li> <p>mcp-versions.json   dataId: <code>${uuid}-${\u670d\u52a1\u540d}-mcp-versions.json</code>   group: <code>mcp-server-versions</code>   \u5185\u5bb9\uff1a\u8be5\u670d\u52a1\u6240\u6709\u5df2\u6ce8\u518c\u7248\u672c\u7684\u7d22\u5f15</p> </li> </ul>"},{"location":"nacos/nacosRegist/#_4","title":"\u5173\u8054\u5173\u7cfb","text":"<ul> <li>\u6ce8\u518c\u670d\u52a1\u65f6\uff0c\u5148\u5199 mcp-server.json\uff0c\u518d\u5199 mcp-tools.json\uff0c\u4e8c\u8005\u901a\u8fc7 toolsDescriptionRef \u5173\u8054</li> <li>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7\u7d22\u5f15</li> </ul>"},{"location":"nacos/nacosRegist/#2-spring-ai-alibaba-mcp_1","title":"2. spring-ai-alibaba-mcp \u9879\u76ee\u5185\u90e8\u539f\u7406\u5206\u6790","text":"<ul> <li>\u53c2\u8003 nacos2 \u7248\u672c\uff0c\u6ce8\u518c\u6d41\u7a0b\u4e3a\uff1a</li> <li>\u751f\u6210 dataId\uff08\u5982 <code>${uuid}-${\u670d\u52a1\u540d}-${\u7248\u672c\u53f7}-mcp-server.json</code>\uff09</li> <li>\u901a\u8fc7 <code>configService.publishConfig</code> \u5199\u5165 nacos</li> <li>mcp-server.json \u91cc\u7684 <code>toolsDescriptionRef</code> \u5b57\u6bb5\u6307\u5411 mcp-tools.json \u7684 dataId</li> <li> <p>mcp-versions.json \u7ef4\u62a4\u6240\u6709\u7248\u672c\u53f7</p> </li> <li> <p>\u67e5\u8be2\u6d41\u7a0b\uff1a</p> </li> <li>\u5148\u67e5 mcp-server.json\uff0c\u83b7\u53d6\u4e3b\u914d\u7f6e\u4fe1\u606f\u548c toolsDescriptionRef</li> <li>\u518d\u67e5 mcp-tools.json\uff0c\u83b7\u53d6\u5de5\u5177\u8be6\u60c5</li> <li>\u7248\u672c\u7ba1\u7406\u901a\u8fc7 mcp-versions.json \u5b9e\u73b0</li> </ul>"},{"location":"nacos/nacosRegist/#3-mcp-router-v3_1","title":"3. mcp-router-v3 \u6ce8\u518c\u4e0e\u67e5\u8be2\u63a5\u53e3","text":""},{"location":"nacos/nacosRegist/#31_1","title":"3.1 \u6ce8\u518c\u63a5\u53e3","text":"<ul> <li>\u63a5\u53e3\u8def\u5f84\uff1a<code>POST /mcp/servers/register</code></li> <li>\u8bf7\u6c42\u4f53\uff1a<code>McpServerInfo</code> \u5bf9\u8c61\uff0c\u652f\u6301 name\u3001version\u3001ip\u3001port\u3001protocol\u3001toolsMeta \u7b49\u5b57\u6bb5</li> <li>\u8bf4\u660e\uff1a\u4f1a\u81ea\u52a8\u4f9d\u6b21\u53d1\u5e03 mcp-server.json\u3001mcp-tools.json\u3001mcp-versions.json</li> </ul>"},{"location":"nacos/nacosRegist/#32_1","title":"3.2 \u67e5\u8be2\u63a5\u53e3","text":"<ul> <li>\u83b7\u53d6\u6240\u6709\u5065\u5eb7\u5b9e\u4f8b\uff1a<code>GET /mcp/servers/healthy?serviceName=xxx&amp;serviceGroup=xxx</code></li> <li>\u83b7\u53d6\u6240\u6709\u5b9e\u4f8b\uff1a<code>GET /mcp/servers/instances?serviceName=xxx&amp;serviceGroup=xxx</code></li> <li>\u83b7\u53d6\u5355\u4e2a\u5065\u5eb7\u5b9e\u4f8b\uff1a<code>GET /mcp/servers/select?serviceName=xxx&amp;serviceGroup=xxx</code></li> <li>\u83b7\u53d6\u670d\u52a1\u4e3b\u914d\u7f6e\uff1a<code>GET /mcp/servers/config/{serverName}?version=xxx</code></li> <li>\u83b7\u53d6\u5b8c\u6574\u670d\u52a1\u914d\u7f6e\uff08\u542b\u5de5\u5177\u80fd\u529b\uff09\uff1a<code>GET /mcp/servers/config/full/{serverName}?version=xxx</code></li> <li>\u83b7\u53d6\u670d\u52a1\u6240\u6709\u7248\u672c\u53f7\uff1a<code>GET /mcp/servers/config/versions/{serverName}</code></li> </ul>"},{"location":"nacos/nacosRegist/#4-curl_1","title":"4. curl \u6d4b\u8bd5\u811a\u672c\u793a\u4f8b","text":""},{"location":"nacos/nacosRegist/#41","title":"4.1 \u6ce8\u518c\u670d\u52a1","text":"<pre><code>curl -X POST http://localhost:8052/mcp/servers/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"6eff2b4f-8c15-455e-86a0-302901241482\",\n    \"version\": \"1.0.1\",\n    \"ip\": \"127.0.0.1\",\n    \"port\": 9000,\n    \"protocol\": \"mcp-sse\",\n    \"description\": \"mcp-server-v2 description\",\n    \"serviceGroup\": \"mcp-server\",\n    \"enabled\": true,\n    \"toolsMeta\": {\n      \"enabled\": true,\n      \"labels\": [\"gray\", \"beta\"],\n      \"region\": \"cn-east\",\n      \"capabilities\": [\"TOOL\", \"AI\"],\n      \"tags\": [\"test\", \"prod\"],\n      \"gray\": true,\n      \"env\": \"dev\"\n    }\n  }'\n</code></pre>"},{"location":"nacos/nacosRegist/#42","title":"4.2 \u67e5\u8be2\u5065\u5eb7\u5b9e\u4f8b","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/healthy?serviceName=6eff2b4f-8c15-455e-86a0-302901241482&amp;serviceGroup=mcp-server\"\n</code></pre>"},{"location":"nacos/nacosRegist/#43","title":"4.3 \u67e5\u8be2\u6240\u6709\u5b9e\u4f8b","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/instances?serviceName=6eff2b4f-8c15-455e-86a0-302901241482&amp;serviceGroup=mcp-server\"\n</code></pre>"},{"location":"nacos/nacosRegist/#44","title":"4.4 \u67e5\u8be2\u670d\u52a1\u4e3b\u914d\u7f6e","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/config/6eff2b4f-8c15-455e-86a0-302901241482?version=1.0.1\"\n</code></pre>"},{"location":"nacos/nacosRegist/#45","title":"4.5 \u67e5\u8be2\u5b8c\u6574\u670d\u52a1\u914d\u7f6e\uff08\u542b\u5de5\u5177\u80fd\u529b\uff09","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/config/full/6eff2b4f-8c15-455e-86a0-302901241482?version=1.0.1\"\n</code></pre>"},{"location":"nacos/nacosRegist/#46","title":"4.6 \u67e5\u8be2\u670d\u52a1\u6240\u6709\u7248\u672c\u53f7","text":"<pre><code>curl \"http://localhost:8052/mcp/servers/config/versions/6eff2b4f-8c15-455e-86a0-302901241482\"\n</code></pre>"},{"location":"nacos/nacosRegist/#_5","title":"\u603b\u7ed3","text":"<ul> <li>nacos \u914d\u7f6e\u7ed3\u6784\u548c\u6ce8\u518c\u6d41\u7a0b\u5df2\u68b3\u7406</li> <li>spring-ai-alibaba-mcp \u5185\u90e8\u6ce8\u518c/\u67e5\u8be2\u539f\u7406\u5df2\u5206\u6790</li> <li>mcp-router-v3 \u6ce8\u518c\u4e0e\u67e5\u8be2\u63a5\u53e3\u5df2\u5b9a\u4f4d</li> <li>curl \u6d4b\u8bd5\u811a\u672c\u5df2\u751f\u6210\uff0c\u53ef\u76f4\u63a5\u7528\u4e8e\u63a5\u53e3\u6d4b\u8bd5</li> </ul> <p>\u5982\u9700\u8fdb\u4e00\u6b65\u5206\u6790\u67d0\u4e2a\u5b57\u6bb5\u3001\u6d41\u7a0b\u6216\u751f\u6210\u66f4\u8be6\u7ec6\u7684\u811a\u672c\uff0c\u8bf7\u544a\u77e5\uff01</p>"},{"location":"nacos/nacos_register_flow/","title":"MCP (Model Context Protocol) \u6ce8\u518c\u4e0e\u8c03\u7528\u6d41\u7a0b\u5206\u6790","text":""},{"location":"nacos/nacos_register_flow/#1-mcp-server-nacos","title":"1. MCP Server \u6ce8\u518c\u5230 Nacos","text":""},{"location":"nacos/nacos_register_flow/#11","title":"1.1 \u914d\u7f6e\u7c7b\u548c\u5c5e\u6027\u5b9a\u4e49","text":"<pre><code>spring:\n  ai:\n    mcp:\n      server:\n        enabled: true\n        name: mcp-server\n        version: 0.0.1\n        description: MCP Server Instance\n      nacos:\n        enabled: true\n        server-addr: 127.0.0.1:8848\n        username: nacos\n        password: nacos\n        registry:\n          service-namespace: public\n          service-group: mcp-server\n</code></pre>"},{"location":"nacos/nacos_register_flow/#12","title":"1.2 \u6ce8\u518c\u6d41\u7a0b","text":"<ol> <li>\u81ea\u52a8\u914d\u7f6e\u7c7b\u521d\u59cb\u5316</li> <li><code>NacosMcpRegistryAutoConfiguration</code>: \u8d1f\u8d23\u521b\u5efa MCP Server \u6ce8\u518c\u76f8\u5173\u7684 Bean</li> <li><code>NacosMcpRegistryProperties</code>: Nacos \u6ce8\u518c\u76f8\u5173\u7684\u914d\u7f6e\u5c5e\u6027\u7c7b</li> <li> <p><code>McpServerProperties</code>: MCP Server \u7684\u57fa\u672c\u914d\u7f6e\u5c5e\u6027</p> </li> <li> <p>\u6ce8\u518c\u5b9e\u73b0\u7c7b <code>NacosMcpRegister</code> <pre><code>// 1. \u670d\u52a1\u4fe1\u606f\u6ce8\u518c\nMcpServerInfo mcpServerInfo = new McpServerInfo();\nmcpServerInfo.setName(this.serverInfo.name());\nmcpServerInfo.setVersion(this.serverInfo.version());\nmcpServerInfo.setDescription(serverDescription);\nmcpServerInfo.setEnabled(true);\n\n// 2. \u5de5\u5177\u4fe1\u606f\u6ce8\u518c\nMcpToolsInfo mcpToolsInfo = new McpToolsInfo();\nmcpToolsInfo.setTools(toolsNeedtoRegister);\nmcpToolsInfo.setToolsMeta(this.toolsMeta);\n\n// 3. \u670d\u52a1\u5b9e\u4f8b\u6ce8\u518c\nInstance instance = new Instance();\ninstance.setIp(ip);\ninstance.setPort(port);\ninstance.setHealthy(true);\ninstance.setEnabled(true);\ninstance.setMetadata(metadata);\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos_register_flow/#2-mcp-client-nacos","title":"2. MCP Client \u6ce8\u518c\u5230 Nacos","text":""},{"location":"nacos/nacos_register_flow/#21","title":"2.1 \u914d\u7f6e\u7c7b\u548c\u5c5e\u6027\u5b9a\u4e49","text":"<pre><code>spring:\n  ai:\n    mcp:\n      client:\n        enabled: true\n        name: mcp-client-webflux\n        version: 0.0.1\n        initialized: true\n        request-timeout: 600s\n        nacos-enabled: true\n    alibaba:\n      mcp:\n        nacos:\n          enabled: true\n          server-addr: 127.0.0.1:8848\n          username: nacos\n          password: nacos\n          registry:\n            service-namespace: xxx\n            service-group: mcp-server\n</code></pre>"},{"location":"nacos/nacos_register_flow/#22","title":"2.2 \u6ce8\u518c\u6d41\u7a0b","text":"<ol> <li>\u81ea\u52a8\u914d\u7f6e\u7c7b\u521d\u59cb\u5316</li> <li><code>NacosMcpClientAutoConfiguration</code>: \u8d1f\u8d23\u521b\u5efa MCP Client \u7684\u8d1f\u8f7d\u5747\u8861\u5ba2\u6237\u7aef</li> <li> <p><code>NacosMcpSseClientAutoConfiguration</code>: \u8d1f\u8d23\u521b\u5efa\u57fa\u4e8e SSE \u7684 MCP Client</p> </li> <li> <p>\u5ba2\u6237\u7aef\u5b9e\u73b0 <pre><code>// \u540c\u6b65\u5ba2\u6237\u7aef\nLoadbalancedMcpSyncClient loadbalancedMcpSyncClient = LoadbalancedMcpSyncClient.builder()\n    .serviceName(serviceName)\n    .namingService(namingService)\n    .nacosConfigService(nacosConfigService)\n    .serviceGroup(nacosMcpRegistryProperties.getServiceGroup())\n    .build();\n\n// \u521d\u59cb\u5316\u548c\u8ba2\u9605\nloadbalancedMcpSyncClient.init();\nloadbalancedMcpSyncClient.subscribe();\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos_register_flow/#3-client-server","title":"3. Client \u8c03\u7528 Server \u6d41\u7a0b","text":""},{"location":"nacos/nacos_register_flow/#31","title":"3.1 \u5efa\u7acb\u8fde\u63a5","text":"<ol> <li> <p>\u83b7\u53d6\u670d\u52a1\u5b9e\u4f8b <pre><code>List&lt;Instance&gt; instances = namingService.selectInstances(\n    serviceName + \"-mcp-service\", \n    serviceGroup, \n    true\n);\n</code></pre></p> </li> <li> <p>\u521b\u5efa SSE \u4f20\u8f93\u5c42 <pre><code>String baseUrl = instance.getMetadata().getOrDefault(\"scheme\", \"http\") + \n                \"://\" + instance.getIp() + \":\" + instance.getPort();\n\nWebFluxSseServerTransportProvider transportProvider = new WebFluxSseServerTransportProvider(\n    WebClient.builder()\n        .baseUrl(baseUrl)\n        .build()\n);\n</code></pre></p> </li> </ol>"},{"location":"nacos/nacos_register_flow/#32","title":"3.2 \u8c03\u7528\u6d41\u7a0b","text":"<ol> <li>\u521d\u59cb\u5316\u8fde\u63a5</li> <li>\u5ba2\u6237\u7aef\u901a\u8fc7 SSE \u5efa\u7acb\u957f\u8fde\u63a5</li> <li> <p>\u670d\u52a1\u7aef\u4fdd\u6301\u8fde\u63a5\u5e76\u7b49\u5f85\u5ba2\u6237\u7aef\u8bf7\u6c42</p> </li> <li> <p>\u8bf7\u6c42\u5904\u7406</p> </li> <li>\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u5230\u670d\u52a1\u7aef</li> <li>\u670d\u52a1\u7aef\u5904\u7406\u8bf7\u6c42\u5e76\u8fd4\u56de\u7ed3\u679c</li> <li>\u652f\u6301\u5f02\u6b65\u6d41\u5f0f\u54cd\u5e94</li> </ol>"},{"location":"nacos/nacos_register_flow/#4-nacos","title":"4. \u6ce8\u518c\u5230 Nacos \u7684\u6570\u636e\u683c\u5f0f","text":""},{"location":"nacos/nacos_register_flow/#41","title":"4.1 \u670d\u52a1\u5b9e\u4f8b\u6570\u636e","text":"<pre><code>{\n  \"name\": \"mcp-server\",\n  \"groupName\": \"mcp-server\",\n  \"clusters\": [],\n  \"metadata\": {\n    \"preserved.register.source\": \"SPRING_CLOUD\",\n    \"scheme\": \"http\",\n    \"version\": \"0.0.1\"\n  },\n  \"ip\": \"127.0.0.1\",\n  \"port\": 8080,\n  \"healthy\": true,\n  \"enabled\": true\n}\n</code></pre>"},{"location":"nacos/nacos_register_flow/#42","title":"4.2 \u914d\u7f6e\u6570\u636e","text":"<pre><code>{\n  \"mcpServerInfo\": {\n    \"name\": \"mcp-server\",\n    \"version\": \"0.0.1\",\n    \"description\": \"MCP Server Instance\",\n    \"enabled\": true\n  },\n  \"mcpToolsInfo\": {\n    \"tools\": [...],\n    \"toolsMeta\": {...}\n  }\n}\n</code></pre>"},{"location":"nacos/nacos_register_flow/#5","title":"5. \u5173\u952e\u7c7b\u8bf4\u660e","text":"<ol> <li>Server \u7aef</li> <li><code>NacosMcpRegister</code>: \u8d1f\u8d23\u670d\u52a1\u6ce8\u518c</li> <li><code>McpServerInfo</code>: \u670d\u52a1\u4fe1\u606f\u5b9e\u4f53\u7c7b</li> <li> <p><code>McpToolsInfo</code>: \u5de5\u5177\u4fe1\u606f\u5b9e\u4f53\u7c7b</p> </li> <li> <p>Client \u7aef</p> </li> <li><code>LoadbalancedMcpSyncClient</code>: \u8d1f\u8f7d\u5747\u8861\u5ba2\u6237\u7aef</li> <li><code>WebFluxSseServerTransportProvider</code>: SSE \u4f20\u8f93\u5c42\u5b9e\u73b0</li> <li><code>McpClientConfig</code>: \u5ba2\u6237\u7aef\u914d\u7f6e\u7c7b</li> </ol>"},{"location":"nacos/nacos_register_flow/#6","title":"6. \u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>Server \u548c Client \u90fd\u9700\u8981\u6b63\u786e\u914d\u7f6e Nacos \u7684\u8fde\u63a5\u4fe1\u606f</li> <li>\u786e\u4fdd Nacos \u670d\u52a1\u53ef\u7528\u4e14\u7f51\u7edc\u8fde\u901a</li> <li>SSE \u8fde\u63a5\u9700\u8981\u5904\u7406\u65ad\u7ebf\u91cd\u8fde\u673a\u5236</li> <li>\u670d\u52a1\u6ce8\u518c\u9700\u8981\u8003\u8651\u5065\u5eb7\u68c0\u67e5</li> <li>\u914d\u7f6e\u4fe1\u606f\u53d8\u66f4\u9700\u8981\u53ca\u65f6\u540c\u6b65 </li> </ol>"},{"location":"nacos/testCase/","title":"testCase","text":"<p>curl -X POST http://localhost:8052/mcp/servers/register -H \"Content-Type: application/json\" -d '{\"name\": \"demo-server\",\"version\": \"1.0.0\",\"ip\": \"127.0.0.1\",\"port\": 9000,\"protocol\": \"mcp-sse\",\"description\": \"\u6f14\u793a\u670d\u52a1\",\"enabled\": true,\"serviceGroup\": \"mcp-server\",\"toolsMeta\": {\"enabled\": true,\"labels\": [\"gray\", \"beta\"],\"region\": \"cn-east\",\"capabilities\": [\"TOOL\", \"AI\"],\"tags\": [\"test\", \"prod\"],\"gray\": true,\"env\": \"dev\"}}'</p> <p>curl -X POST \"http://localhost:8052/mcp/servers/register\" \\      -H \"Content-Type: application/json\" \\      -d '{        \"name\": \"test-mcp-server\",        \"version\": \"1.0.1\",        \"ip\": \"127.0.0.1\",        \"port\": 8061,        \"sseEndpoint\": \"/sse\",        \"status\": \"UP\",        \"serviceGroup\": \"mcp-server\",        \"healthy\": true,        \"ephemeral\": true,        \"weight\": 1.0,        \"metadata\": {          \"type\": \"test\",          \"description\": \"Test MCP server for enhanced configuration validation\"        }      }'</p> <p>curl \"http://localhost:8052/mcp/servers/healthy?serviceName=demo-server&amp;serviceGroup=mcp-server\"</p> <p>curl \"http://localhost:8052/mcp/servers/instances?serviceName=demo-server&amp;serviceGroup=mcp-server\"</p> <p>curl \"http://localhost:8052/mcp/servers/select?serviceName=demo-server&amp;serviceGroup=mcp-server\"</p> <p>curl -X DELETE \"http://localhost:8052/mcp/servers/deregister?serviceName=demo-server&amp;serviceGroup=mcp-server\"</p> <p>curl \"http://localhost:8052/mcp/servers/config/demo-server?version=1.0.0\"</p> <p>curl \"http://localhost:8052/mcp/servers/config/full/demo-server?version=1.0.0\"</p> <p>curl \"http://localhost:8052/mcp/servers/config/versions/demo-server\"</p> <p>curl -X POST http://localhost:8052/mcp/servers/config/publish -H \"Content-Type: application/json\" -d '{\"name\": \"demo-server-v2\",\"version\": \"1.0.0\",\"ip\": \"127.0.0.1\",\"port\": 9000,\"protocol\": \"mcp-sse\",\"description\": \"\u6f14\u793a\u670d\u52a1\",\"enabled\": true,\"serviceGroup\": \"mcp-server\"}'</p> <p>curl -X POST http://localhost:8052/mcp/servers/config/tools/publish -H \"Content-Type: application/json\" -d '{\"name\": \"demo-server\",\"version\": \"1.0.0\",\"toolsMeta\": {\"enabled\": true,\"labels\": [\"gray\", \"beta\"],\"region\": \"cn-east\"}}'</p> <p>curl -X POST http://localhost:8052/mcp/servers/config/version/publish -H \"Content-Type: application/json\" -d '{\"name\": \"demo-server\",\"version\": \"1.0.0\"}'</p> <p>curl -s \"http://localhost:8848/nacos/v1/cs/history?search=accurate&amp;dataId=test-server-001-1.0.0-mcp-server.json&amp;group=mcp-server&amp;pageNo=1&amp;pageSize=10\" | python3 -m json.tool 2&gt;/dev/null || curl -s \"http://localhost:8848/nacos/v1/cs/history?search=accurate&amp;dataId=test-server-001-1.0.0-mcp-server.json&amp;group=mcp-server&amp;pageNo=1&amp;pageSize=10\"</p> <p>curl -s \"http://localhost:8848/nacos/v1/cs/configs?pageNo=1&amp;pageSize=10&amp;search=accurate&amp;dataId=test-server-001-1.0.0-mcp-server.json&amp;group=mcp-server\" | python3 -m json.tool 2&gt;/dev/null || curl -s \"http://localhost:8848/nacos/v1/cs/configs?pageNo=1&amp;pageSize=10&amp;search=accurate&amp;dataId=test-server-001-1.0.0-mcp-server.json&amp;group=mcp-server\"</p> <p>appName:</p> <p>curl -X POST 'http://localhost:8848/nacos/v1/cs/configs' -d 'dataId=test-appname-curl&amp;group=mcp-server&amp;content=test-content&amp;appName=mcp-router-v3&amp;srcUser=mcp-router-v3&amp;type=json' &amp;&amp; echo</p> <p>curl -s \"http://localhost:8848/nacos/v1/cs/configs?pageNo=1&amp;pageSize=10&amp;search=accurate&amp;dataId=test-appname-curl&amp;group=mcp-server\" | python3 -m json.tool 2&gt;/dev/null</p> <p>case \u6210\u529f\u4f8b\u5b50 curl -X POST \"http://localhost:8052/mcp/servers/config/publish\" \\   -H \"Content-Type: application/json\" \\   -d '{     \"id\": \"test-success-appname\",     \"name\": \"success-test-mcp-server\",     \"version\": \"1.0.0\",     \"description\": \"\u6210\u529f\u6d4b\u8bd5\u670d\u52a1\u5668\uff0c\u9a8c\u8bc1 appName \u8bbe\u7f6e\",     \"enabled\": true,     \"host\": \"localhost\",     \"port\": 8080,     \"protocol\": \"http\",     \"healthCheckPath\": \"/health\",     \"metadata\": {       \"tools.names\": \"success_test_tool_1,success_test_tool_2\"     }   }'</p> <p>curl -s \"http://localhost:8848/nacos/v1/cs/configs?pageNo=1&amp;pageSize=10&amp;search=accurate&amp;dataId=test-success-appname-1.0.0-mcp-server.json&amp;group=mcp-server\" | python3 -m json.tool 2&gt;/dev/null</p> <p>curl -s \"http://localhost:8848/nacos/v1/cs/history?search=accurate&amp;dataId=test-success-appname-1.0.0-mcp-server.json&amp;group=mcp-server&amp;pageNo=1&amp;pageSize=10\" | python3 -m json.tool 2&gt;/dev/null</p> <p>echo \"=== 13. \u6d4b\u8bd5\u667a\u80fd\u5de5\u5177\u8c03\u7528 - getAllPersons ===\" &amp;&amp; curl -X POST http://localhost:8052/api/v1/tools/call -H \"Content-Type: application/json\" -d '{\"toolName\": \"getAllPersons\", \"arguments\": {}}' | python3 -m json.tool</p>"},{"location":"nacos/uuid/","title":"Uuid","text":"<p>\u597d\u7684\uff0c\u4e0b\u9762\u6211\u7528\u6e90\u7801\u8bc1\u636e\u8be6\u7ec6\u8bf4\u660e\uff1a</p>"},{"location":"nacos/uuid/#1-mcp-serverjson-mcp-toolsjson-mcp-versionsjson-uuid","title":"1. mcp-server.json / mcp-tools.json / mcp-versions.json \u524d\u9762\u7684 UUID \u6765\u6e90","text":""},{"location":"nacos/uuid/#11-dataid","title":"1.1 \u5b98\u65b9 dataId \u751f\u6210\u89c4\u5219","text":"<p>\u4ee5 nacos2 \u7248\u672c\u4e3a\u4f8b\uff0cdataId \u751f\u6210\u5982\u4e0b\uff08\u89c1 <code>McpNacosConstant.java</code> \u548c <code>NacosMcpRegister.java</code>\uff09\uff1a</p> <ul> <li>mcp-server.json: <code>dataId = uuid + \"-\" + version + \"-mcp-server.json\"</code></li> <li>mcp-tools.json: <code>dataId = uuid + \"-\" + version + \"-mcp-tools.json\"</code></li> <li>mcp-versions.json: <code>dataId = uuid + \"-mcp-versions.json\"</code></li> </ul>"},{"location":"nacos/uuid/#12-uuid","title":"1.2 UUID \u5bf9\u5e94\u7684\u5b57\u6bb5","text":""},{"location":"nacos/uuid/#_1","title":"\u4ee3\u7801\u8bc1\u636e","text":"<p>\u5728 <code>spring-ai-alibaba-mcp-nacos2/registry/model/McpServerInfo.java</code> \u53ca\u76f8\u5173\u6ce8\u518c\u903b\u8f91\u4e2d\uff1a</p> <ul> <li><code>McpServerInfo</code> \u6709 <code>name</code> \u5b57\u6bb5\uff08\u670d\u52a1\u540d/\u5e94\u7528\u540d\uff09\uff0c<code>id</code> \u5b57\u6bb5\uff08UUID/\u552f\u4e00\u6807\u8bc6\uff09</li> </ul> <p>\u5728 <code>McpConfigService</code>/<code>NacosMcpRegister</code> \u91cc\uff0cdataId \u751f\u6210\u65f6\u7528\u7684\u662f <code>serverInfo.getName()</code> \u6216 <code>serverInfo.getId()</code>\uff0c\u5177\u4f53\u5982\u4e0b\uff1a</p> <pre><code>// \u4ee5 mcp-router-v3 \u4e3a\u4f8b\nString id = serverInfo.getId() != null ? serverInfo.getId() : java.util.UUID.randomUUID().toString();\nString version = serverInfo.getVersion() != null ? serverInfo.getVersion() : \"1.0.0\";\nString dataId = id + \"-\" + version + McpNacosConstants.SERVER_CONFIG_SUFFIX;\n</code></pre> <ul> <li>\u8fd9\u91cc\u7684 <code>id</code> \u5c31\u662f UUID\uff0c\u6765\u6e90\u4e8e <code>McpServerInfo.id</code> \u5b57\u6bb5\u3002</li> </ul>"},{"location":"nacos/uuid/#_2","title":"\u5b9e\u4f53\u7c7b\u5b57\u6bb5","text":"<ul> <li><code>McpServerInfo</code>\uff08\u6216\u7c7b\u4f3c\u7c7b\uff09\u6709\u5982\u4e0b\u5b57\u6bb5\uff1a</li> <li><code>private String id;</code> // UUID\uff0c\u552f\u4e00\u6807\u8bc6</li> <li><code>private String name;</code> // \u670d\u52a1\u540d/\u5e94\u7528\u540d</li> </ul>"},{"location":"nacos/uuid/#13","title":"1.3 \u7ed3\u8bba","text":"<ul> <li>dataId \u524d\u7684 UUID \u5c31\u662f <code>McpServerInfo</code>\uff08\u6216 <code>McpServerConfig</code>\uff09\u7684 <code>id</code> \u5b57\u6bb5\u3002</li> <li>\u8be5\u5b57\u6bb5\u4e00\u822c\u5728\u670d\u52a1\u6ce8\u518c\u65f6\u751f\u6210\uff08\u5982\u672a\u4f20\u5219\u81ea\u52a8\u751f\u6210\uff09\uff0c\u5e76\u5728\u914d\u7f6e\u3001\u6ce8\u518c\u3001\u67e5\u8be2\u7b49\u6d41\u7a0b\u4e2d\u4fdd\u6301\u4e00\u81f4\u3002</li> </ul>"},{"location":"nacos/uuid/#2","title":"2. \u76f8\u5173\u6e90\u7801\u7247\u6bb5","text":"<p>McpServerInfo.java <pre><code>public class McpServerInfo {\n    private String id;      // UUID\uff0c\u552f\u4e00\u6807\u8bc6\n    private String name;    // \u670d\u52a1\u540d/\u5e94\u7528\u540d\n    private String version; // \u7248\u672c\u53f7\n    // ...\n}\n</code></pre></p> <p>\u914d\u7f6e\u53d1\u5e03\u903b\u8f91\uff08McpConfigService.java\uff09 <pre><code>private McpServerConfig buildServerConfig(McpServerInfo serverInfo) {\n    String id = serverInfo.getId() != null ? serverInfo.getId() : java.util.UUID.randomUUID().toString();\n    String version = serverInfo.getVersion() != null ? serverInfo.getVersion() : \"1.0.0\";\n    String dataId = id + \"-\" + version + McpNacosConstants.SERVER_CONFIG_SUFFIX;\n    // ...\n}\n</code></pre></p>"},{"location":"nacos/uuid/#3","title":"3. \u603b\u7ed3","text":"<ul> <li>mcp-server.json\u3001mcp-tools.json\u3001mcp-versions.json \u524d\u7684 UUID \u5c31\u662f\u670d\u52a1\u6ce8\u518c\u65f6\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u5bf9\u5e94\u5b9e\u4f53\u7c7b\u7684 <code>id</code> \u5b57\u6bb5\uff08\u5982 <code>McpServerInfo.id</code>\uff09\u3002</li> <li>\u670d\u52a1\u540d/\u5e94\u7528\u540d\u7528 <code>name</code> \u5b57\u6bb5\uff0c\u7248\u672c\u53f7\u7528 <code>version</code> \u5b57\u6bb5\u3002</li> <li>dataId \u751f\u6210\u89c4\u5219\u4e25\u683c\u9075\u5faa <code>${id}-${version}-mcp-server.json</code> \u7b49\u683c\u5f0f\u3002</li> </ul> <p>\u5982\u9700\u67e5\u627e\u5177\u4f53\u67d0\u4e2a\u7c7b\u7684\u5b8c\u6574\u5b9a\u4e49\u6216\u67d0\u6bb5\u4ee3\u7801\uff0c\u8bf7\u544a\u77e5\uff01</p>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/","title":"\u9879\u76ee\u6539\u8fdb\u610f\u89c1","text":"<p>\u7ee7\u7eed\u5b8c\u6210 MCP \u9879\u76ee\u6a21\u5757 Nacos \u96c6\u6210\u5bf9\u6bd4\u5206\u6790\u62a5\u544a\uff1a</p>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#_1","title":"\ud83d\udee0\ufe0f \u9700\u8981\u5b8c\u5584\u7684\u5173\u952e\u529f\u80fd","text":""},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#1","title":"1. \u7edf\u4e00\u914d\u7f6e\u7ba1\u7406\u6846\u67b6","text":""},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#_2","title":"\u9700\u8981\u5b9e\u73b0\u7684\u7ec4\u4ef6:","text":"<pre><code>// 1. \u7edf\u4e00\u914d\u7f6e\u5e38\u91cf\npublic class McpNacosConstant {\n    public static final String SERVER_CONFIG_SUFFIX = \"-mcp-server.json\";\n    public static final String TOOLS_CONFIG_SUFFIX = \"-mcp-tools.json\";\n    public static final String SERVER_NAME_SUFFIX = \"-mcp-service\";\n    public static final String SERVER_GROUP = \"mcp-server\";\n    public static final String TOOLS_GROUP = \"mcp-tools\";\n}\n\n// 2. \u914d\u7f6e\u5c5e\u6027\u7c7b\n@ConfigurationProperties(prefix = \"spring.ai.alibaba.mcp.nacos\")\npublic class NacosMcpProperties {\n    private String serverAddr;\n    private String username;\n    private String password;\n    private String namespace;\n    // ... \u5176\u4ed6\u914d\u7f6e\n}\n\n// 3. \u6ce8\u518c\u5c5e\u6027\u7c7b\n@ConfigurationProperties(prefix = \"spring.ai.alibaba.mcp.nacos.registry\")\npublic class NacosMcpRegistryProperties {\n    private String serviceNamespace;\n    private String serviceGroup = \"DEFAULT_GROUP\";\n    private boolean serviceRegister = true;\n    private boolean serviceEphemeral = true;\n    // ... \u5176\u4ed6\u914d\u7f6e\n}\n</code></pre>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#2-mcp-server-v2","title":"2. mcp-server-v2 \u9700\u8981\u5b8c\u5584\u7684\u529f\u80fd","text":""},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#a-nacos","title":"A. \u5b8c\u6574\u7684 Nacos \u6ce8\u518c\u7ec4\u4ef6","text":"<pre><code>@Component\npublic class EnhancedNacosRegistrationConfig {\n\n    private ConfigService configService;\n    private NamingService namingService;\n    private McpToolsInfo toolsInfo;\n\n    // 1. \u5de5\u5177\u914d\u7f6e\u53d1\u5e03\n    private void publishToolsConfig() {\n        String toolsConfigContent = JsonUtils.serialize(toolsInfo);\n        configService.publishConfig(\n            serverName + McpNacosConstant.TOOLS_CONFIG_SUFFIX,\n            McpNacosConstant.TOOLS_GROUP,\n            toolsConfigContent\n        );\n    }\n\n    // 2. \u670d\u52a1\u5668\u914d\u7f6e\u53d1\u5e03\n    private void publishServerConfig() {\n        McpServerInfo serverInfo = createServerInfo();\n        String serverConfigContent = JsonUtils.serialize(serverInfo);\n        configService.publishConfig(\n            serverName + McpNacosConstant.SERVER_CONFIG_SUFFIX,\n            McpNacosConstant.SERVER_GROUP,\n            serverConfigContent\n        );\n    }\n\n    // 3. \u52a8\u6001\u914d\u7f6e\u76d1\u542c\n    private void setupConfigListeners() {\n        configService.addListener(\n            serverName + McpNacosConstant.TOOLS_CONFIG_SUFFIX,\n            McpNacosConstant.TOOLS_GROUP,\n            new Listener() {\n                @Override\n                public void receiveConfigInfo(String configInfo) {\n                    updateToolsConfiguration(configInfo);\n                }\n            }\n        );\n    }\n\n    // 4. MD5 \u6821\u9a8c\u548c\u5143\u6570\u636e\u7ba1\u7406\n    private void registerWithMetadata() {\n        Map&lt;String, String&gt; metadata = new HashMap&lt;&gt;();\n\n        // \u914d\u7f6e MD5 \u6821\u9a8c\n        String serverConfig = getServerConfig();\n        String serverMd5 = MD5Utils.getMd5(serverConfig);\n        metadata.put(\"server.md5\", serverMd5);\n\n        // \u5de5\u5177\u540d\u79f0\u5217\u8868\n        List&lt;String&gt; toolNames = extractToolNames();\n        metadata.put(\"tools.names\", String.join(\",\", toolNames));\n\n        // \u4f20\u8f93\u7c7b\u578b\n        metadata.put(\"transport.type\", \"mcp-sse\");\n\n        // \u6ce8\u518c\u5b9e\u4f8b\n        Instance instance = new Instance();\n        instance.setMetadata(metadata);\n        namingService.registerInstance(serviceName, group, instance);\n    }\n}\n</code></pre>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#b","title":"B. \u5de5\u5177\u52a8\u6001\u7ba1\u7406","text":"<pre><code>@Service\npublic class DynamicToolManager {\n\n    private final Map&lt;String, ToolMetaInfo&gt; toolsMeta = new ConcurrentHashMap&lt;&gt;();\n    private final ConfigService configService;\n\n    // 1. \u5de5\u5177\u914d\u7f6e\u66f4\u65b0\n    public void updateToolsFromNacos(String configContent) {\n        try {\n            McpToolsInfo toolsInfo = JsonUtils.deserialize(configContent, McpToolsInfo.class);\n\n            // \u66f4\u65b0\u5de5\u5177\u5143\u6570\u636e\n            if (!this.toolsMeta.equals(toolsInfo.getToolsMeta())) {\n                this.toolsMeta.clear();\n                this.toolsMeta.putAll(toolsInfo.getToolsMeta());\n\n                // \u901a\u77e5\u5de5\u5177\u5217\u8868\u53d8\u5316\n                notifyToolsListChanged();\n            }\n\n        } catch (Exception e) {\n            logger.error(\"Failed to update tools from Nacos\", e);\n        }\n    }\n\n    // 2. \u5de5\u5177\u63cf\u8ff0\u66f4\u65b0\n    public void updateToolDescription(String toolName, String newDescription) {\n        // \u66f4\u65b0\u672c\u5730\u5de5\u5177\u63cf\u8ff0\n        updateLocalToolDescription(toolName, newDescription);\n\n        // \u53d1\u5e03\u66f4\u65b0\u5230 Nacos\n        publishUpdatedToolsConfig();\n    }\n\n    // 3. \u5de5\u5177\u542f\u7528/\u7981\u7528\n    public void toggleToolEnabled(String toolName, boolean enabled) {\n        ToolMetaInfo meta = toolsMeta.get(toolName);\n        if (meta != null) {\n            meta.setEnabled(enabled);\n            publishUpdatedToolsConfig();\n        }\n    }\n}\n</code></pre>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#3-mcp-router","title":"3. mcp-router \u9700\u8981\u5b8c\u5584\u7684\u529f\u80fd","text":""},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#a","title":"A. \u914d\u7f6e\u4e2d\u5fc3\u96c6\u6210","text":"<pre><code>@Service\npublic class EnhancedMcpServerService {\n\n    private final ConfigService configService;\n    private final NamingService namingService;\n    private final Map&lt;String, McpServerConfig&gt; serverConfigs = new ConcurrentHashMap&lt;&gt;();\n\n    // 1. \u4ece\u914d\u7f6e\u4e2d\u5fc3\u8bfb\u53d6\u670d\u52a1\u5668\u914d\u7f6e\n    public Mono&lt;McpServerConfig&gt; loadServerConfig(String serverName) {\n        return Mono.fromCallable(() -&gt; {\n            String configContent = configService.getConfig(\n                serverName + McpNacosConstant.SERVER_CONFIG_SUFFIX,\n                McpNacosConstant.SERVER_GROUP,\n                3000L\n            );\n\n            if (configContent != null) {\n                return JsonUtils.deserialize(configContent, McpServerConfig.class);\n            }\n            return null;\n        });\n    }\n\n    // 2. \u4ece\u914d\u7f6e\u4e2d\u5fc3\u8bfb\u53d6\u5de5\u5177\u914d\u7f6e\n    public Mono&lt;McpToolsInfo&gt; loadToolsConfig(String serverName) {\n        return Mono.fromCallable(() -&gt; {\n            String configContent = configService.getConfig(\n                serverName + McpNacosConstant.TOOLS_CONFIG_SUFFIX,\n                McpNacosConstant.TOOLS_GROUP,\n                3000L\n            );\n\n            if (configContent != null) {\n                return JsonUtils.deserialize(configContent, McpToolsInfo.class);\n            }\n            return null;\n        });\n    }\n\n    // 3. \u914d\u7f6e\u7f13\u5b58\u7ba1\u7406\n    public Mono&lt;McpServer&gt; getServerWithConfig(String serverName) {\n        return loadServerConfig(serverName)\n            .zipWith(loadToolsConfig(serverName))\n            .map(tuple -&gt; {\n                McpServerConfig config = tuple.getT1();\n                McpToolsInfo toolsInfo = tuple.getT2();\n\n                return buildMcpServerFromConfig(config, toolsInfo);\n            })\n            .cache(Duration.ofMinutes(5)); // \u7f13\u5b585\u5206\u949f\n    }\n\n    // 4. \u914d\u7f6e\u53d8\u5316\u76d1\u542c\n    public void setupConfigListeners() {\n        // \u76d1\u542c\u6240\u6709\u670d\u52a1\u5668\u914d\u7f6e\u53d8\u5316\n        getAllServerNames().forEach(serverName -&gt; {\n            configService.addListener(\n                serverName + McpNacosConstant.SERVER_CONFIG_SUFFIX,\n                McpNacosConstant.SERVER_GROUP,\n                new Listener() {\n                    @Override\n                    public void receiveConfigInfo(String configInfo) {\n                        invalidateServerCache(serverName);\n                        updateServerConfig(serverName, configInfo);\n                    }\n                }\n            );\n        });\n    }\n}\n</code></pre>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#b_1","title":"B. \u667a\u80fd\u8d1f\u8f7d\u5747\u8861","text":"<pre><code>@Component\npublic class SmartLoadBalancer {\n\n    private final Map&lt;String, List&lt;McpAsyncClient&gt;&gt; serverClients = new ConcurrentHashMap&lt;&gt;();\n    private final Map&lt;String, AtomicInteger&gt; roundRobinCounters = new ConcurrentHashMap&lt;&gt;();\n    private final Map&lt;String, Map&lt;String, Integer&gt;&gt; serverWeights = new ConcurrentHashMap&lt;&gt;();\n\n    // 1. \u57fa\u4e8e\u6743\u91cd\u7684\u8d1f\u8f7d\u5747\u8861\n    public McpAsyncClient selectClient(String serverName, String toolName) {\n        List&lt;McpAsyncClient&gt; clients = serverClients.get(serverName);\n        if (clients == null || clients.isEmpty()) {\n            return null;\n        }\n\n        // \u6839\u636e\u5de5\u5177\u7c7b\u578b\u9009\u62e9\u6700\u4f18\u5ba2\u6237\u7aef\n        return selectOptimalClient(clients, toolName);\n    }\n\n    // 2. \u5065\u5eb7\u68c0\u67e5\u96c6\u6210\n    public void performHealthCheck() {\n        serverClients.forEach((serverName, clients) -&gt; {\n            clients.forEach(client -&gt; {\n                client.ping()\n                    .timeout(Duration.ofSeconds(5))\n                    .subscribe(\n                        result -&gt; updateClientHealth(serverName, client, true),\n                        error -&gt; updateClientHealth(serverName, client, false)\n                    );\n            });\n        });\n    }\n\n    // 3. \u52a8\u6001\u6743\u91cd\u8c03\u6574\n    public void adjustWeights(String serverName, String clientId, int weight) {\n        serverWeights.computeIfAbsent(serverName, k -&gt; new ConcurrentHashMap&lt;&gt;())\n                   .put(clientId, weight);\n    }\n}\n</code></pre>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#4-mcp-client","title":"4. mcp-client \u9700\u8981\u5b8c\u5584\u7684\u529f\u80fd","text":""},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#a_1","title":"A. \u8d1f\u8f7d\u5747\u8861\u5ba2\u6237\u7aef","text":"<pre><code>@Component\npublic class LoadBalancedMcpClient {\n\n    private final NamingService namingService;\n    private final ConfigService configService;\n    private final Map&lt;String, List&lt;McpAsyncClient&gt;&gt; serverClients = new ConcurrentHashMap&lt;&gt;();\n\n    // 1. \u670d\u52a1\u53d1\u73b0\u548c\u5ba2\u6237\u7aef\u7ba1\u7406\n    public void initializeClients() {\n        // \u53d1\u73b0\u6240\u6709 MCP \u670d\u52a1\n        List&lt;String&gt; serviceNames = discoverMcpServices();\n\n        serviceNames.forEach(serviceName -&gt; {\n            try {\n                List&lt;Instance&gt; instances = namingService.selectInstances(\n                    serviceName, \"mcp-server\", true);\n\n                List&lt;McpAsyncClient&gt; clients = instances.stream()\n                    .map(this::createClientForInstance)\n                    .filter(Objects::nonNull)\n                    .collect(Collectors.toList());\n\n                serverClients.put(serviceName, clients);\n\n                // \u8ba2\u9605\u670d\u52a1\u53d8\u5316\n                subscribeToServiceChanges(serviceName);\n\n            } catch (Exception e) {\n                logger.error(\"Failed to initialize clients for service: {}\", serviceName, e);\n            }\n        });\n    }\n\n    // 2. \u667a\u80fd\u5de5\u5177\u8c03\u7528\n    public Mono&lt;Object&gt; callTool(String toolName, Map&lt;String, Object&gt; arguments) {\n        return findOptimalServer(toolName)\n            .flatMap(serverName -&gt; {\n                McpAsyncClient client = selectHealthyClient(serverName);\n                if (client != null) {\n                    return callToolWithClient(client, toolName, arguments);\n                }\n                return Mono.error(new RuntimeException(\"No healthy client available for: \" + serverName));\n            });\n    }\n\n    // 3. \u914d\u7f6e\u52a8\u6001\u66f4\u65b0\n    public void setupConfigurationListeners() {\n        // \u76d1\u542c\u5ba2\u6237\u7aef\u914d\u7f6e\u53d8\u5316\n        configService.addListener(\n            \"mcp-client-config.json\",\n            \"mcp-client\",\n            new Listener() {\n                @Override\n                public void receiveConfigInfo(String configInfo) {\n                    updateClientConfiguration(configInfo);\n                }\n            }\n        );\n    }\n\n    // 4. \u6545\u969c\u6062\u590d\u673a\u5236\n    public Mono&lt;Object&gt; callToolWithFallback(String toolName, Map&lt;String, Object&gt; arguments) {\n        return callTool(toolName, arguments)\n            .retryWhen(Retry.backoff(3, Duration.ofSeconds(1))\n                .filter(throwable -&gt; isRetryableError(throwable)))\n            .onErrorResume(throwable -&gt; {\n                logger.warn(\"Tool call failed, trying alternative server\", throwable);\n                return tryAlternativeServer(toolName, arguments);\n            });\n    }\n}\n</code></pre>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#b_2","title":"B. \u8fde\u63a5\u6c60\u7ba1\u7406","text":"<pre><code>@Component\npublic class McpConnectionPool {\n\n    private final Map&lt;String, Queue&lt;McpAsyncClient&gt;&gt; connectionPools = new ConcurrentHashMap&lt;&gt;();\n    private final Map&lt;String, AtomicInteger&gt; poolSizes = new ConcurrentHashMap&lt;&gt;();\n    private final int maxPoolSize = 10;\n    private final int minPoolSize = 2;\n\n    // 1. \u8fde\u63a5\u6c60\u521d\u59cb\u5316\n    public void initializePool(String serverName, List&lt;Instance&gt; instances) {\n        Queue&lt;McpAsyncClient&gt; pool = new ConcurrentLinkedQueue&lt;&gt;();\n\n        // \u521b\u5efa\u6700\u5c0f\u8fde\u63a5\u6570\n        for (int i = 0; i &lt; minPoolSize &amp;&amp; i &lt; instances.size(); i++) {\n            McpAsyncClient client = createClient(instances.get(i));\n            if (client != null) {\n                pool.offer(client);\n            }\n        }\n\n        connectionPools.put(serverName, pool);\n        poolSizes.put(serverName, new AtomicInteger(pool.size()));\n    }\n\n    // 2. \u8fde\u63a5\u83b7\u53d6\u548c\u91ca\u653e\n    public McpAsyncClient borrowConnection(String serverName) {\n        Queue&lt;McpAsyncClient&gt; pool = connectionPools.get(serverName);\n        if (pool != null) {\n            McpAsyncClient client = pool.poll();\n            if (client != null) {\n                poolSizes.get(serverName).decrementAndGet();\n                return client;\n            }\n        }\n\n        // \u5982\u679c\u6c60\u4e2d\u6ca1\u6709\u8fde\u63a5\uff0c\u521b\u5efa\u65b0\u8fde\u63a5\n        return createNewConnection(serverName);\n    }\n\n    public void returnConnection(String serverName, McpAsyncClient client) {\n        Queue&lt;McpAsyncClient&gt; pool = connectionPools.get(serverName);\n        AtomicInteger size = poolSizes.get(serverName);\n\n        if (pool != null &amp;&amp; size.get() &lt; maxPoolSize) {\n            pool.offer(client);\n            size.incrementAndGet();\n        } else {\n            // \u5982\u679c\u6c60\u5df2\u6ee1\uff0c\u5173\u95ed\u8fde\u63a5\n            client.close();\n        }\n    }\n\n    // 3. \u8fde\u63a5\u5065\u5eb7\u68c0\u67e5\n    public void performHealthCheck() {\n        connectionPools.forEach((serverName, pool) -&gt; {\n            pool.removeIf(client -&gt; !isClientHealthy(client));\n        });\n    }\n}\n</code></pre>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#_3","title":"\ud83d\udccb \u5b9e\u65bd\u4f18\u5148\u7ea7\u5efa\u8bae","text":""},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#p0","title":"\u9ad8\u4f18\u5148\u7ea7 (P0)","text":"<ol> <li>\u7edf\u4e00\u914d\u7f6e\u7ba1\u7406\u6846\u67b6 - \u5efa\u7acb\u6807\u51c6\u5316\u914d\u7f6e\u4f53\u7cfb</li> <li>mcp-server-v2 \u5de5\u5177\u914d\u7f6e\u53d1\u5e03 - \u5b9e\u73b0\u5de5\u5177\u5143\u6570\u636e\u7ba1\u7406</li> <li>mcp-router \u914d\u7f6e\u4e2d\u5fc3\u96c6\u6210 - \u652f\u6301\u52a8\u6001\u914d\u7f6e\u8bfb\u53d6</li> <li>\u4f20\u8f93\u7c7b\u578b\u5143\u6570\u636e\u4fee\u590d - \u786e\u4fdd\u6b63\u786e\u7684 transport.type \u8bbe\u7f6e</li> </ol>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#p1","title":"\u4e2d\u4f18\u5148\u7ea7 (P1)","text":"<ol> <li>\u52a8\u6001\u914d\u7f6e\u76d1\u542c - \u5b9e\u73b0\u914d\u7f6e\u70ed\u66f4\u65b0</li> <li>\u8d1f\u8f7d\u5747\u8861\u4f18\u5316 - \u63d0\u5347\u7cfb\u7edf\u6027\u80fd\u548c\u53ef\u9760\u6027</li> <li>\u5065\u5eb7\u68c0\u67e5\u5b8c\u5584 - \u589e\u5f3a\u7cfb\u7edf\u7a33\u5b9a\u6027</li> <li>\u8fde\u63a5\u6c60\u7ba1\u7406 - \u4f18\u5316\u8d44\u6e90\u5229\u7528</li> </ol>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#p2","title":"\u4f4e\u4f18\u5148\u7ea7 (P2)","text":"<ol> <li>\u667a\u80fd\u8def\u7531 - \u57fa\u4e8e\u5de5\u5177\u7c7b\u578b\u7684\u8def\u7531\u4f18\u5316</li> <li>\u76d1\u63a7\u548c\u6307\u6807 - \u5b8c\u5584\u7cfb\u7edf\u53ef\u89c2\u6d4b\u6027</li> <li>\u914d\u7f6e\u7f13\u5b58\u4f18\u5316 - \u63d0\u5347\u914d\u7f6e\u8bfb\u53d6\u6027\u80fd</li> <li>\u6545\u969c\u6062\u590d\u673a\u5236 - \u589e\u5f3a\u7cfb\u7edf\u5bb9\u9519\u80fd\u529b</li> </ol>"},{"location":"nacos/%E9%A1%B9%E7%9B%AE%E6%94%B9%E8%BF%9B%E6%84%8F%E8%A7%81/#_4","title":"\ud83c\udfaf \u603b\u7ed3","text":"<p>\u5f53\u524d <code>mcp-server-v2</code>\u3001<code>mcp-router</code>\u3001<code>mcp-client</code> \u9879\u76ee\u76f8\u6bd4\u53c2\u8003\u9879\u76ee <code>mcp-gateway-example-jdk17</code> \u5728 Nacos \u96c6\u6210\u65b9\u9762\u5b58\u5728\u4ee5\u4e0b\u4e3b\u8981\u5dee\u8ddd\uff1a</p> <ol> <li>\u914d\u7f6e\u7ba1\u7406\u4e0d\u7edf\u4e00 - \u7f3a\u5c11\u6807\u51c6\u5316\u7684\u914d\u7f6e\u7ba1\u7406\u6846\u67b6</li> <li>\u52a8\u6001\u914d\u7f6e\u80fd\u529b\u4e0d\u8db3 - \u7f3a\u5c11\u914d\u7f6e\u70ed\u66f4\u65b0\u548c\u76d1\u542c\u673a\u5236</li> <li>\u8d1f\u8f7d\u5747\u8861\u4e0d\u5b8c\u5584 - \u7f3a\u5c11\u667a\u80fd\u8d1f\u8f7d\u5747\u8861\u548c\u8fde\u63a5\u6c60\u7ba1\u7406</li> <li>\u5143\u6570\u636e\u7ba1\u7406\u4e0d\u5b8c\u6574 - \u7f3a\u5c11\u5de5\u5177\u914d\u7f6e\u53d1\u5e03\u548cMD5\u6821\u9a8c</li> <li>\u670d\u52a1\u53d1\u73b0\u529f\u80fd\u7b80\u5355 - \u7f3a\u5c11\u914d\u7f6e\u4e2d\u5fc3\u96c6\u6210\u548c\u667a\u80fd\u8def\u7531</li> </ol> <p>\u901a\u8fc7\u5b9e\u65bd\u4e0a\u8ff0\u5b8c\u5584\u65b9\u6848\uff0c\u53ef\u4ee5\u663e\u8457\u63d0\u5347\u7cfb\u7edf\u7684\u53ef\u7ef4\u62a4\u6027\u3001\u53ef\u6269\u5c55\u6027\u548c\u7a33\u5b9a\u6027\uff0c\u4f7f\u5176\u8fbe\u5230\u4f01\u4e1a\u7ea7\u5e94\u7528\u7684\u6807\u51c6\u3002</p>"},{"location":"quick-start/getting-started/","title":"\u5feb\u901f\u5f00\u59cb\u6307\u5357","text":"<p>5\u5206\u949f\u4e0a\u624b MCP Router \u9879\u76ee</p>"},{"location":"quick-start/getting-started/#_2","title":"\ud83d\udccb \u524d\u7f6e\u8981\u6c42","text":"<p>\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u7684\u7cfb\u7edf\u5df2\u5b89\u88c5\uff1a</p> <ul> <li>\u2615 Java 17+ - \u4e0b\u8f7d\u5730\u5740</li> <li>\ud83d\udce6 Maven 3.6+ - \u4e0b\u8f7d\u5730\u5740</li> <li>\ud83d\udd11 DeepSeek API Key - \u83b7\u53d6\u5730\u5740</li> </ul>"},{"location":"quick-start/getting-started/#_3","title":"\u9a8c\u8bc1\u5b89\u88c5","text":"<pre><code># \u68c0\u67e5 Java \u7248\u672c\njava -version  # \u5e94\u8be5\u663e\u793a 17 \u6216\u66f4\u9ad8\n\n# \u68c0\u67e5 Maven \u7248\u672c\nmvn -version   # \u5e94\u8be5\u663e\u793a 3.6 \u6216\u66f4\u9ad8\n</code></pre>"},{"location":"quick-start/getting-started/#_4","title":"\ud83d\ude80 \u4e09\u6b65\u5feb\u901f\u542f\u52a8","text":""},{"location":"quick-start/getting-started/#1","title":"\u6b65\u9aa4 1: \u514b\u9686\u9879\u76ee","text":"<pre><code>git clone https://github.com/thefirstwind/mcp-router-sse-parent.git\ncd mcp-router-sse-parent\n</code></pre>"},{"location":"quick-start/getting-started/#2","title":"\u6b65\u9aa4 2: \u6784\u5efa\u9879\u76ee","text":"<pre><code># \u6784\u5efa\u6240\u6709\u6a21\u5757\nmvn clean install -DskipTests\n\n# \u9884\u8ba1\u8017\u65f6: 2-3 \u5206\u949f\n</code></pre>"},{"location":"quick-start/getting-started/#3","title":"\u6b65\u9aa4 3: \u542f\u52a8\u670d\u52a1","text":""},{"location":"quick-start/getting-started/#31-mcp-server","title":"3.1 \u542f\u52a8 MCP Server","text":"<pre><code>cd mcp-server-v6\nmvn spring-boot:run\n</code></pre> <p>\u9a8c\u8bc1: \u8bbf\u95ee http://localhost:8060/actuator/health - \u5e94\u8be5\u770b\u5230: <code>{\"status\":\"UP\"}</code></p>"},{"location":"quick-start/getting-started/#32-mcp-client","title":"3.2 \u542f\u52a8 MCP Client\uff08\u65b0\u7ec8\u7aef\uff09","text":"<pre><code># \u8bbe\u7f6e API Key\nexport DEEPSEEK_API_KEY=your-api-key-here\n\ncd mcp-client\nmvn spring-boot:run\n</code></pre> <p>\u9a8c\u8bc1: \u8bbf\u95ee http://localhost:8080/actuator/health - \u5e94\u8be5\u770b\u5230: <code>{\"status\":\"UP\"}</code></p>"},{"location":"quick-start/getting-started/#_5","title":"\ud83c\udfaf \u7b2c\u4e00\u4e2a\u8bf7\u6c42","text":""},{"location":"quick-start/getting-started/#1_1","title":"\u6d4b\u8bd5 1: \u5217\u51fa\u6240\u6709\u4eba\u5458","text":"<pre><code>curl http://localhost:8080/persons/all\n</code></pre> <p>\u9884\u671f\u8f93\u51fa: <pre><code>[\n  {\n    \"id\": 1,\n    \"name\": \"Albert Einstein\",\n    \"nationality\": \"German\",\n    ...\n  }\n]\n</code></pre></p>"},{"location":"quick-start/getting-started/#2-ai","title":"\u6d4b\u8bd5 2: AI \u81ea\u7136\u8bed\u8a00\u67e5\u8be2","text":"<pre><code>curl -X POST http://localhost:8080/persons/query \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"query\": \"\u544a\u8bc9\u6211\u6570\u636e\u5e93\u4e2d\u6700\u5e74\u957f\u7684\u4eba\u662f\u8c01\uff1f\"}'\n</code></pre> <p>\u9884\u671f\u8f93\u51fa: <pre><code>{\n  \"result\": \"\u6570\u636e\u5e93\u4e2d\u6700\u5e74\u957f\u7684\u4eba\u662f...\",\n  \"toolsUsed\": [\"getPersonById\", \"getAllPersons\"]\n}\n</code></pre></p>"},{"location":"quick-start/getting-started/#_6","title":"\u2705 \u6210\u529f\u6307\u6807","text":"<p>\u5982\u679c\u60a8\u770b\u5230\u4ee5\u4e0b\u5185\u5bb9\uff0c\u8bf4\u660e\u8bbe\u7f6e\u6210\u529f\uff1a</p> <ul> <li> MCP Server \u5728 8060 \u7aef\u53e3\u8fd0\u884c</li> <li> MCP Client \u5728 8080 \u7aef\u53e3\u8fd0\u884c</li> <li> \u80fd\u591f\u5217\u51fa\u6240\u6709\u4eba\u5458</li> <li> AI \u67e5\u8be2\u8fd4\u56de\u6b63\u5e38\u7ed3\u679c</li> </ul>"},{"location":"quick-start/getting-started/#_7","title":"\ud83d\udc1b \u5e38\u89c1\u95ee\u9898","text":""},{"location":"quick-start/getting-started/#q","title":"Q: \u7aef\u53e3\u5df2\u88ab\u5360\u7528","text":"<pre><code># \u67e5\u627e\u5360\u7528\u7aef\u53e3\u7684\u8fdb\u7a0b\nlsof -i :8080  # \u6216 :8060\n\n# \u6740\u6b7b\u8fdb\u7a0b\nkill -9 &lt;PID&gt;\n</code></pre>"},{"location":"quick-start/getting-started/#q-api-key","title":"Q: API Key \u65e0\u6548","text":"<p>\u786e\u4fdd\u8bbe\u7f6e\u4e86\u6b63\u786e\u7684\u73af\u5883\u53d8\u91cf\uff1a</p> <pre><code>echo $DEEPSEEK_API_KEY  # \u5e94\u8be5\u663e\u793a\u60a8\u7684 API key\n</code></pre>"},{"location":"quick-start/getting-started/#q_1","title":"Q: \u6784\u5efa\u5931\u8d25","text":"<p>\u5c1d\u8bd5\u6e05\u7406\u5e76\u91cd\u65b0\u6784\u5efa\uff1a</p> <pre><code>mvn clean\nmvn install -DskipTests -U\n</code></pre>"},{"location":"quick-start/getting-started/#_8","title":"\ud83d\udcda \u4e0b\u4e00\u6b65","text":"<p>\u606d\u559c\uff01\u60a8\u5df2\u7ecf\u6210\u529f\u8fd0\u884c\u4e86 MCP Router \u9879\u76ee\u3002</p> <p>\u63a5\u4e0b\u6765\u60a8\u53ef\u4ee5:</p> <ul> <li>\u4e86\u89e3\u67b6\u6784\u8bbe\u8ba1</li> <li>\u6dfb\u52a0\u7b2c\u4e00\u4e2a MCP Server</li> <li>\u5f00\u53d1 AI Agent</li> <li>\u67e5\u770b API \u53c2\u8003</li> </ul> <p>\u9700\u8981\u5e2e\u52a9\uff1f \u521b\u5efa Issue \u6216\u67e5\u770b \u6545\u969c\u6392\u9664\u6307\u5357</p>"},{"location":"quick-start/quick-start/","title":"Gemini + Spring AI Alibaba \u5feb\u901f\u5f00\u59cb","text":"<p>5 \u5206\u949f\u5feb\u901f\u6574\u5408 Google Gemini \u5230\u60a8\u7684\u9879\u76ee</p>"},{"location":"quick-start/quick-start/#_1","title":"\ud83c\udfaf \u76ee\u6807","text":"<p>\u5728\u73b0\u6709\u7684 <code>mcp-router-sse-parent</code> \u9879\u76ee\u4e2d\uff0c\u5feb\u901f\u6dfb\u52a0 Google Gemini \u652f\u6301\uff0c\u4e0d\u9700\u8981\u7f16\u5199\u5927\u91cf\u4ee3\u7801\u3002</p>"},{"location":"quick-start/quick-start/#3","title":"\u26a1 \u5feb\u901f\u5f00\u59cb\uff083 \u4e2a\u6b65\u9aa4\uff09","text":""},{"location":"quick-start/quick-start/#1-2","title":"\u6b65\u9aa4 1: \u6dfb\u52a0\u4f9d\u8d56\uff082 \u5206\u949f\uff09","text":"<p>\u5728 <code>mcp-client/pom.xml</code> \u4e2d\u6dfb\u52a0\uff1a</p> <pre><code>&lt;!-- Spring AI Vertex AI Gemini --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.ai&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-ai-vertex-ai-gemini-spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0-M4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"quick-start/quick-start/#2-2","title":"\u6b65\u9aa4 2: \u914d\u7f6e\u6587\u4ef6\uff082 \u5206\u949f\uff09","text":"<p>\u5728 <code>mcp-client/src/main/resources/application.yml</code> \u6dfb\u52a0\uff1a</p> <pre><code>spring:\n  ai:\n    vertex:\n      ai:\n        gemini:\n          project-id: ${GCP_PROJECT_ID}\n          location: us-central1\n          chat:\n            model: gemini-3-flash\n            options:\n              temperature: 0.7\n</code></pre> <p>\u521b\u5efa <code>.env</code> \u6587\u4ef6\uff1a</p> <pre><code>GCP_PROJECT_ID=your-gcp-project-id\nGCP_CREDENTIALS_PATH=/path/to/credentials.json\n</code></pre>"},{"location":"quick-start/quick-start/#3-gemini1","title":"\u6b65\u9aa4 3: \u4f7f\u7528 Gemini\uff081 \u5206\u949f\uff09","text":"<p>\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684 Controller\uff1a</p> <pre><code>@RestController\n@RequestMapping(\"/api/gemini\")\npublic class GeminiController {\n\n    @Autowired\n    @Qualifier(\"vertexAiGeminiChatModel\")\n    private ChatModel chatModel;\n\n    @PostMapping(\"/chat\")\n    public String chat(@RequestBody String message) {\n        return ChatClient.create(chatModel)\n                .prompt()\n                .user(message)\n                .call()\n                .content();\n    }\n}\n</code></pre> <p>\u5b8c\u6210\uff01 \ud83c\udf89 \u73b0\u5728\u60a8\u53ef\u4ee5\u8c03\u7528 Gemini API \u4e86\u3002</p>"},{"location":"quick-start/quick-start/#reactagent5","title":"\ud83d\ude80 \u8fdb\u9636\uff1a\u4f7f\u7528 ReactAgent\uff085 \u5206\u949f\uff09","text":"<p>\u5229\u7528\u73b0\u6709\u7684 Spring AI Alibaba <code>ReactAgent</code>\uff1a</p> <pre><code>@Service\npublic class GeminiAgentService {\n\n    private final ReactAgent agent;\n\n    public GeminiAgentService(\n            @Qualifier(\"vertexAiGeminiChatModel\") ChatModel chatModel,\n            List&lt;ToolCallback&gt; tools) {\n\n        this.agent = ReactAgent.builder()\n                .name(\"gemini-agent\")\n                .chatClient(ChatClient.create(chatModel))\n                .tools(tools)  // \u81ea\u52a8\u6ce8\u5165\u6240\u6709 @Tool\n                .maxIterations(10)\n                .build();\n    }\n\n    public String process(String input) {\n        var result = agent.getAndCompileGraph()\n                .invoke(Map.of(\"input\", input));\n        return result.get(\"output\").toString();\n    }\n}\n</code></pre> <p>\u5c31\u8fd9\u4e48\u7b80\u5355\uff01 Agent \u4f1a\u81ea\u52a8\uff1a - \u8c03\u7528 Gemini \u6a21\u578b - \u4f7f\u7528\u60a8\u5b9a\u4e49\u7684 @Tool \u65b9\u6cd5 - \u8fdb\u884c\u591a\u8f6e\u63a8\u7406\uff08\u6700\u591a 10 \u6b21\uff09 - \u8fd4\u56de\u6700\u7ec8\u7ed3\u679c</p>"},{"location":"quick-start/quick-start/#_2","title":"\ud83d\udcca \u6a21\u578b\u9009\u62e9\u6307\u5357","text":"\u6a21\u578b \u7528\u9014 \u6210\u672c \u901f\u5ea6 <code>gemini-3-flash</code> \u65e5\u5e38\u4efb\u52a1\u3001\u5feb\u901f\u54cd\u5e94 \ud83d\udcb0 \u4f4e \u26a1 \u5feb <code>gemini-3-pro</code> \u590d\u6742\u63a8\u7406\u3001\u6df1\u5ea6\u5206\u6790 \ud83d\udcb0\ud83d\udcb0 \u4e2d \ud83d\udc22 \u6162 <code>gemini-2.5-pro-tts</code> \u8bed\u97f3\u751f\u6210 \ud83d\udcb0\ud83d\udcb0 \u4e2d \u26a1 \u5feb <p>\u5efa\u8bae: \u9ed8\u8ba4\u4f7f\u7528 <code>gemini-3-flash</code>\uff0c\u9700\u8981\u66f4\u5f3a\u63a8\u7406\u65f6\u5207\u6362\u5230 <code>gemini-3-pro</code>\u3002</p>"},{"location":"quick-start/quick-start/#_3","title":"\ud83d\udd27 \u591a\u6a21\u578b\u914d\u7f6e","text":"<p>\u5982\u679c\u60a8\u60f3\u540c\u65f6\u4f7f\u7528 Gemini \u548c DeepSeek\uff1a</p> <pre><code>@Configuration\npublic class MultiModelConfig {\n\n    @Bean\n    public ChatClient geminiClient(\n            @Qualifier(\"vertexAiGeminiChatModel\") ChatModel chatModel) {\n        return ChatClient.create(chatModel);\n    }\n\n    @Bean\n    public ChatClient deepseekClient(\n            @Qualifier(\"openAiChatModel\") ChatModel chatModel) {\n        return ChatClient.create(chatModel);\n    }\n\n    @Bean\n    public ModelRouter modelRouter(\n            @Qualifier(\"geminiClient\") ChatClient gemini,\n            @Qualifier(\"deepseekClient\") ChatClient deepseek) {\n\n        return new ModelRouter() {\n            @Override\n            public ChatClient select(String task) {\n                if (task.contains(\"\u590d\u6742\") || task.contains(\"\u5206\u6790\")) {\n                    return gemini;  // \u590d\u6742\u4efb\u52a1\u7528 Gemini\n                }\n                return deepseek;  // \u7b80\u5355\u4efb\u52a1\u7528 DeepSeek\n            }\n        };\n    }\n}\n</code></pre>"},{"location":"quick-start/quick-start/#_4","title":"\ud83d\udee0\ufe0f \u5e38\u89c1\u95ee\u9898","text":""},{"location":"quick-start/quick-start/#q1-gcp","title":"Q1: \u5982\u4f55\u83b7\u53d6 GCP \u51ed\u8bc1\uff1f","text":"<ol> <li>\u8bbf\u95ee Google Cloud Console</li> <li>\u521b\u5efa\u6216\u9009\u62e9\u9879\u76ee</li> <li>\u542f\u7528 Vertex AI API</li> <li>\u521b\u5efa\u670d\u52a1\u8d26\u53f7\u5e76\u4e0b\u8f7d JSON \u5bc6\u94a5</li> </ol>"},{"location":"quick-start/quick-start/#q2-gemini","title":"Q2: \u662f\u5426\u652f\u6301\u5176\u4ed6 Gemini \u529f\u80fd\uff1f","text":"<p>\u662f\u7684\uff01\u5305\u62ec\uff1a - \u6587\u6863\u7406\u89e3\uff08PDF\u3001\u56fe\u7247\uff09 - \u56fe\u50cf\u751f\u6210\uff08Nano Banana\uff09 - \u89c6\u9891\u751f\u6210\uff08Veo 3.1\uff09 - \u8bed\u97f3\u751f\u6210\uff08TTS\uff09</p> <p>\u67e5\u770b <code>GEMINI_INTEGRATION_GUIDE.md</code> \u4e86\u89e3\u8be6\u60c5\u3002</p>"},{"location":"quick-start/quick-start/#q3","title":"Q3: \u5982\u4f55\u5207\u6362\u6a21\u578b\uff1f","text":"<p>\u4fee\u6539 <code>application.yml</code> \u4e2d\u7684 <code>model</code> \u5b57\u6bb5\uff0c\u6216\u5728\u4ee3\u7801\u4e2d\u52a8\u6001\u6307\u5b9a\uff1a</p> <pre><code>ChatClient.create(chatModel)\n        .prompt()\n        .options(ChatOptions.builder()\n                .model(\"gemini-3-pro\")  // \u4e34\u65f6\u5207\u6362\u6a21\u578b\n                .build())\n        .user(message)\n        .call()\n        .content();\n</code></pre>"},{"location":"quick-start/quick-start/#_5","title":"\ud83d\udcda \u4e0b\u4e00\u6b65","text":"<ol> <li>\u2705 \u5b8c\u6210\u5feb\u901f\u5f00\u59cb</li> <li>\ud83d\udcd6 \u9605\u8bfb Gemini \u6574\u5408\u6307\u5357</li> <li>\ud83d\udd0d \u53c2\u8003 Spring AI Alibaba \u6587\u6863</li> <li>\ud83d\udca1 \u67e5\u770b DeepResearch \u548c JManus \u793a\u4f8b</li> <li>\ud83d\ude80 \u6784\u5efa\u60a8\u7684\u81ea\u5b9a\u4e49 Agent</li> </ol>"},{"location":"quick-start/quick-start/#_6","title":"\ud83c\udf81 \u5b8c\u6574\u793a\u4f8b","text":"<p>\u67e5\u770b <code>examples/gemini-quickstart/</code> \u83b7\u53d6\u5b8c\u6574\u53ef\u8fd0\u884c\u793a\u4f8b\u3002</p> <p>\u795d\u60a8\u4f7f\u7528\u6109\u5feb\uff01 \ud83d\ude80</p>"},{"location":"reference/","title":"\u53c2\u8003\u6587\u6863","text":"<p>\u67e5\u8be2\u5177\u4f53\u7684API\u3001\u914d\u7f6e\u548c\u547d\u4ee4\u4fe1\u606f\u3002</p>"},{"location":"reference/#_2","title":"\u53ef\u7528\u53c2\u8003","text":"<ul> <li>API \u53c2\u8003</li> <li>\u914d\u7f6e\u53c2\u8003</li> </ul>"},{"location":"reference/api/","title":"API \u53c2\u8003\u6587\u6863","text":"<p>MCP Router \u9879\u76ee\u5b8c\u6574 API \u53c2\u8003</p>"},{"location":"reference/api/#_1","title":"\ud83d\udcda \u76ee\u5f55","text":"<ol> <li>MCP Client API</li> <li>MCP Router API</li> <li>MCP Server API</li> </ol>"},{"location":"reference/api/#mcp-client-api","title":"MCP Client API","text":"<p>Base URL: <code>http://localhost:8080</code></p>"},{"location":"reference/api/#1","title":"1. \u4eba\u5458\u7ba1\u7406","text":""},{"location":"reference/api/#get-personsall","title":"GET /persons/all","text":"<p>\u83b7\u53d6\u6240\u6709\u4eba\u5458\u5217\u8868</p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl http://localhost:8080/persons/all\n</code></pre></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>[\n  {\n    \"id\": 1,\n    \"name\": \"Albert Einstein\",\n    \"nationality\": \"German\",\n    \"birthYear\": 1879\n  }\n]\n</code></pre></p> <p>\u72b6\u6001\u7801: - <code>200 OK</code> - \u6210\u529f - <code>500 Internal Server Error</code> - \u670d\u52a1\u9519\u8bef</p>"},{"location":"reference/api/#get-personsnationalitynationality","title":"GET /persons/nationality/{nationality}","text":"<p>\u6309\u56fd\u7c4d\u67e5\u627e\u4eba\u5458</p> <p>\u8def\u5f84\u53c2\u6570: - <code>nationality</code> (string, required) - \u56fd\u7c4d</p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl http://localhost:8080/persons/nationality/German\n</code></pre></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>[\n  {\n    \"id\": 1,\n    \"name\": \"Albert Einstein\",\n    \"nationality\": \"German\"\n  }\n]\n</code></pre></p>"},{"location":"reference/api/#get-personscount-by-nationalitynationality","title":"GET /persons/count-by-nationality/{nationality}","text":"<p>\u7edf\u8ba1\u6307\u5b9a\u56fd\u7c4d\u7684\u4eba\u5458\u6570\u91cf</p> <p>\u8def\u5f84\u53c2\u6570: - <code>nationality</code> (string, required) - \u56fd\u7c4d</p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl http://localhost:8080/persons/count-by-nationality/French\n</code></pre></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"nationality\": \"French\",\n  \"count\": 3\n}\n</code></pre></p>"},{"location":"reference/api/#post-personsquery","title":"POST /persons/query","text":"<p>AI \u81ea\u7136\u8bed\u8a00\u67e5\u8be2</p> <p>\u8bf7\u6c42\u4f53: <pre><code>{\n  \"query\": \"Who is the oldest person?\",\n  \"options\": {\n    \"model\": \"deepseek-chat\",\n    \"temperature\": 0.7\n  }\n}\n</code></pre></p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl -X POST http://localhost:8080/persons/query \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"query\": \"\u544a\u8bc9\u6211\u6700\u5e74\u957f\u7684\u4eba\u662f\u8c01\uff1f\"\n  }'\n</code></pre></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"result\": \"\u6570\u636e\u5e93\u4e2d\u6700\u5e74\u957f\u7684\u4eba\u662f...\",\n  \"toolsUsed\": [\"getAllPersons\", \"getPersonById\"],\n  \"model\": \"deepseek-chat\",\n  \"tokensUsed\": 150\n}\n</code></pre></p>"},{"location":"reference/api/#2","title":"2. \u5065\u5eb7\u68c0\u67e5","text":""},{"location":"reference/api/#get-actuatorhealth","title":"GET /actuator/health","text":"<p>\u670d\u52a1\u5065\u5eb7\u72b6\u6001</p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl http://localhost:8080/actuator/health\n</code></pre></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"status\": \"UP\",\n  \"components\": {\n    \"diskSpace\": {\n      \"status\": \"UP\"\n    },\n    \"ping\": {\n      \"status\": \"UP\"\n    }\n  }\n}\n</code></pre></p>"},{"location":"reference/api/#mcp-router-api","title":"MCP Router API","text":"<p>Base URL: <code>http://localhost:8000</code></p>"},{"location":"reference/api/#1_1","title":"1. \u670d\u52a1\u7ba1\u7406","text":""},{"location":"reference/api/#get-mcpservers","title":"GET /mcp/servers","text":"<p>\u5217\u51fa\u6240\u6709\u5df2\u6ce8\u518c\u7684 MCP Server</p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl http://localhost:8000/mcp/servers\n</code></pre></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>[\n  {\n    \"serviceId\": \"mcp-server-v6\",\n    \"host\": \"localhost\",\n    \"port\": 8060,\n    \"healthy\": true,\n    \"tools\": [\n      {\n        \"name\": \"getPersonById\",\n        \"description\": \"Find person by ID\"\n      }\n    ]\n  }\n]\n</code></pre></p>"},{"location":"reference/api/#get-mcpserversserviceid","title":"GET /mcp/servers/{serviceId}","text":"<p>\u83b7\u53d6\u7279\u5b9a\u670d\u52a1\u8be6\u60c5</p> <p>\u8def\u5f84\u53c2\u6570: - <code>serviceId</code> (string, required) - \u670d\u52a1ID</p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl http://localhost:8000/mcp/servers/mcp-server-v6\n</code></pre></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"serviceId\": \"mcp-server-v6\",\n  \"instances\": [\n    {\n      \"instanceId\": \"192.168.1.100:8060\",\n      \"host\": \"192.168.1.100\",\n      \"port\": 8060,\n      \"healthy\": true,\n      \"metadata\": {\n        \"version\": \"1.0.0\",\n        \"tools\": \"getPersonById,getAllPersons\"\n      }\n    }\n  ],\n  \"totalInstances\": 1,\n  \"healthyInstances\": 1\n}\n</code></pre></p>"},{"location":"reference/api/#post-mcpserversserviceidtools","title":"POST /mcp/servers/{serviceId}/tools","text":"<p>\u5217\u51fa\u670d\u52a1\u63d0\u4f9b\u7684\u6240\u6709\u5de5\u5177</p> <p>\u8def\u5f84\u53c2\u6570: - <code>serviceId</code> (string, required) - \u670d\u52a1ID</p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl http://localhost:8000/mcp/servers/mcp-server-v6/tools\n</code></pre></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"serviceId\": \"mcp-server-v6\",\n  \"tools\": [\n    {\n      \"name\": \"getPersonById\",\n      \"description\": \"Find person by ID\",\n      \"inputSchema\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": {\n            \"type\": \"integer\",\n            \"description\": \"Person ID\"\n          }\n        },\n        \"required\": [\"id\"]\n      }\n    }\n  ]\n}\n</code></pre></p>"},{"location":"reference/api/#2_1","title":"2. \u641c\u7d22\u529f\u80fd","text":""},{"location":"reference/api/#get-mcpsearchqquery","title":"GET /mcp/search?q={query}","text":"<p>\u641c\u7d22\u5de5\u5177</p> <p>\u67e5\u8be2\u53c2\u6570: - <code>q</code> (string, required) - \u641c\u7d22\u5173\u952e\u8bcd</p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl \"http://localhost:8000/mcp/search?q=person\"\n</code></pre></p> <p>\u54cd\u5e94\u793a\u4f8b: <pre><code>{\n  \"query\": \"person\",\n  \"results\": [\n    {\n      \"serviceId\": \"mcp-server-v6\",\n      \"tool\": \"getPersonById\",\n      \"score\": 0.95\n    }\n  ]\n}\n</code></pre></p>"},{"location":"reference/api/#mcp-server-api","title":"MCP Server API","text":"<p>Base URL: <code>http://localhost:8060</code></p>"},{"location":"reference/api/#sse-endpoint","title":"SSE Endpoint","text":""},{"location":"reference/api/#get-mcp","title":"GET /mcp","text":"<p>MCP \u534f\u8bae SSE \u8fde\u63a5</p> <p>\u8bf7\u6c42\u793a\u4f8b: <pre><code>curl -N http://localhost:8060/mcp\n</code></pre></p> <p>\u54cd\u5e94: Server-Sent Events \u6d41</p> <p>\u4e8b\u4ef6\u7c7b\u578b: - <code>initialize</code> - \u521d\u59cb\u5316 - <code>tools/list</code> - \u5de5\u5177\u5217\u8868 - <code>tools/call</code> - \u5de5\u5177\u8c03\u7528 - <code>resources/list</code> - \u8d44\u6e90\u5217\u8868</p>"},{"location":"reference/api/#_2","title":"\ud83d\udd10 \u8ba4\u8bc1","text":"<p>\u6240\u6709 API \u652f\u6301\u4ee5\u4e0b\u8ba4\u8bc1\u65b9\u5f0f\uff1a</p>"},{"location":"reference/api/#api-key","title":"API Key (\u63a8\u8350)","text":"<pre><code>curl -H \"X-API-Key: your-api-key\" \\\n  http://localhost:8080/persons/all\n</code></pre>"},{"location":"reference/api/#bearer-token","title":"Bearer Token","text":"<pre><code>curl -H \"Authorization: Bearer your-jwt-token\" \\\n  http://localhost:8080/persons/all\n</code></pre>"},{"location":"reference/api/#_3","title":"\u26a0\ufe0f \u9519\u8bef\u7801","text":"\u72b6\u6001\u7801 \u8bf4\u660e \u793a\u4f8b 200 \u6210\u529f - 400 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef <code>{\"error\": \"Invalid request\"}</code> 401 \u672a\u6388\u6743 <code>{\"error\": \"Unauthorized\"}</code> 404 \u8d44\u6e90\u4e0d\u5b58\u5728 <code>{\"error\": \"Not found\"}</code> 429 \u9650\u6d41 <code>{\"error\": \"Rate limit exceeded\"}</code> 500 \u670d\u52a1\u5668\u9519\u8bef <code>{\"error\": \"Internal error\"}</code> <p>\u901a\u7528\u9519\u8bef\u54cd\u5e94\u683c\u5f0f: <pre><code>{\n  \"error\": \"Error description\",\n  \"code\": \"ERROR_CODE\",\n  \"timestamp\": \"2026-01-28T12:00:00Z\",\n  \"path\": \"/api/endpoint\"\n}\n</code></pre></p>"},{"location":"reference/api/#_4","title":"\ud83d\udcca \u9650\u6d41","text":"<p>API \u9650\u6d41\u7b56\u7565\uff1a</p> <ul> <li>\u9ed8\u8ba4\u9650\u5236: 100 \u8bf7\u6c42/\u79d2</li> <li>Burst: 200 \u8bf7\u6c42</li> <li>\u54cd\u5e94\u5934:   <pre><code>X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1706428800\n</code></pre></li> </ul>"},{"location":"reference/api/#_5","title":"\ud83d\udd04 \u7248\u672c\u63a7\u5236","text":"<p>API \u7248\u672c\u901a\u8fc7 URL \u8def\u5f84\u6216 Header \u6307\u5b9a\uff1a</p>"},{"location":"reference/api/#url","title":"URL \u7248\u672c (\u63a8\u8350)","text":"<pre><code>curl http://localhost:8080/v1/persons/all\ncurl http://localhost:8080/v2/persons/all\n</code></pre>"},{"location":"reference/api/#header","title":"Header \u7248\u672c","text":"<pre><code>curl -H \"API-Version: 1\" \\\n  http://localhost:8080/persons/all\n</code></pre>"},{"location":"reference/api/#_6","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb</li> <li>\u67b6\u6784\u8bbe\u8ba1</li> <li>\u6545\u969c\u6392\u9664</li> </ul> <p>\u9700\u8981\u66f4\u65b0\u6216\u8865\u5145\uff1f \u521b\u5efa Issue</p>"},{"location":"reference/best-practices-traceability/","title":"\u4ee3\u7801\u3001\u6587\u6863\u3001\u6d4b\u8bd5\u5173\u8054\u7ba1\u7406 - \u4e1a\u754c\u6700\u4f73\u5b9e\u8df5","text":"<p>\u57fa\u4e8e Living Documentation\u3001Traceability Matrix\u3001ADR\u3001arc42 \u7b49\u4e1a\u754c\u6807\u51c6</p> <p>\u521b\u5efa\u65e5\u671f: 2026-01-28 \u53c2\u8003\u6765\u6e90: Web\u641c\u7d22\u6574\u7406</p>"},{"location":"reference/best-practices-traceability/#_1","title":"\ud83c\udf1f \u6838\u5fc3\u6982\u5ff5","text":""},{"location":"reference/best-practices-traceability/#1-living-documentation","title":"1. Living Documentation (\u6d3b\u6587\u6863)","text":"<p>\u5b9a\u4e49: \u968f\u4ee3\u7801\u81ea\u52a8\u6f14\u5316\u7684\u6587\u6863\uff0c\u65e0\u9700\u624b\u52a8\u7ef4\u62a4</p> <p>\u6838\u5fc3\u539f\u5219: - \u2705 \u53ef\u9760 - \u4e0e\u4ee3\u7801\u540c\u6e90\u63a7\u5236 - \u2705 \u4f4e\u7ef4\u62a4 - \u901a\u8fc7\u81ea\u52a8\u5316\u51cf\u5c11\u5de5\u4f5c\u91cf - \u2705 \u534f\u4f5c\u6027 - \u4fc3\u8fdb\u56e2\u961f\u77e5\u8bc6\u5171\u4eab - \u2705 \u6d1e\u5bdf\u529b - \u5e2e\u52a9\u7406\u89e3\u7cfb\u7edf\u529f\u80fd</p>"},{"location":"reference/best-practices-traceability/#2-requirements-traceability-matrix-rtm","title":"2. Requirements Traceability Matrix (RTM)","text":"<p>\u5b9a\u4e49: \u9700\u6c42\u3001\u4ee3\u7801\u3001\u6d4b\u8bd5\u7684\u53cc\u5411\u8ffd\u6eaf\u77e9\u9635</p> <p>\u4ef7\u503c: - \u786e\u4fdd\u6240\u6709\u9700\u6c42\u90fd\u6709\u6d4b\u8bd5\u8986\u76d6 - \u8bc6\u522b\u4ee3\u7801\u53d8\u66f4\u5f71\u54cd\u7684\u6d4b\u8bd5\u8303\u56f4 - \u652f\u6301\u56de\u5f52\u6d4b\u8bd5\u81ea\u52a8\u5316</p>"},{"location":"reference/best-practices-traceability/#3-architecture-decision-records-adr","title":"3. Architecture Decision Records (ADR)","text":"<p>\u5b9a\u4e49: \u7b80\u6d01\u7684\u67b6\u6784\u51b3\u7b56\u6587\u6863</p> <p>\u683c\u5f0f: - \u51b3\u7b56\u5185\u5bb9 - \u95ee\u9898\u80cc\u666f - \u8003\u8651\u7684\u66ff\u4ee3\u65b9\u6848 - \u51b3\u7b56\u540e\u679c</p>"},{"location":"reference/best-practices-traceability/#4-arc42","title":"4. arc42","text":"<p>\u5b9a\u4e49: \u6807\u51c6\u5316\u67b6\u6784\u6587\u6863\u6a21\u677f\uff0812\u4e2a\u7ae0\u8282\uff09</p>"},{"location":"reference/best-practices-traceability/#_2","title":"\ud83c\udfaf \u6211\u4eec\u7684\u5b9e\u65bd\u65b9\u6848","text":"<p>\u57fa\u4e8e\u641c\u7d22\u7ed3\u679c\uff0c\u8fd9\u662f\u6539\u8fdb\u540e\u7684\u5b8c\u6574\u65b9\u6848\uff1a</p>"},{"location":"reference/best-practices-traceability/#_3","title":"\ud83d\udcc1 \u76ee\u5f55\u7ed3\u6784","text":"<pre><code>mcp-router-sse-parent/\n\u251c\u2500\u2500 docs/\n\u2502   \u251c\u2500\u2500 features/                    # \u529f\u80fd\u7d22\u5f15\n\u2502   \u2502   \u251c\u2500\u2500 README.md               # \u529f\u80fd\u603b\u7d22\u5f15\n\u2502   \u2502   \u2514\u2500\u2500 streamable-session-management.md  # \u5355\u4e2a\u529f\u80fd\n\u2502   \u251c\u2500\u2500 adr/                        # Architecture Decision Records\n\u2502   \u2502   \u251c\u2500\u2500 README.md\n\u2502   \u2502   \u2514\u2500\u2500 001-streamable-session-dual-transmission.md\n\u2502   \u251c\u2500\u2500 arc42/                      # \u67b6\u6784\u6587\u6863\n\u2502   \u2502   \u251c\u2500\u2500 01-introduction.md\n\u2502   \u2502   \u251c\u2500\u2500 09-architectural-decisions.md  # \u94fe\u63a5\u5230 ADR\n\u2502   \u2502   \u2514\u2500\u2500 ...\n\u2502   \u2514\u2500\u2500 traceability/               # \u8ffd\u6eaf\u77e9\u9635\n\u2502       \u2514\u2500\u2500 streamable-session.md\n\u251c\u2500\u2500 test/\n\u2502   \u251c\u2500\u2500 integration/\n\u2502   \u2502   \u2514\u2500\u2500 streamable/\n\u2502   \u2502       \u251c\u2500\u2500 test_streamable_comprehensive.sh\n\u2502   \u2502       \u2514\u2500\u2500 README.md           # \u6d4b\u8bd5\u8bf4\u660e\uff0c\u94fe\u63a5\u5230\u529f\u80fd\u6587\u6863\n\u2502   \u2514\u2500\u2500 unit/\n\u2514\u2500\u2500 .github/\n    \u2514\u2500\u2500 workflows/\n        \u2514\u2500\u2500 test-streamable-session.yml  # CI\u81ea\u52a8\u6d4b\u8bd5\n</code></pre>"},{"location":"reference/best-practices-traceability/#1-adr","title":"1\ufe0f\u20e3 ADR \u6587\u6863","text":"<p>\u4f4d\u7f6e: <code>docs/adr/001-streamable-session-dual-transmission.md</code></p> <pre><code># ADR-001: Streamable \u534f\u8bae\u53cc\u91cd Session ID \u4f20\u9012\u673a\u5236\n\n## Status\nAccepted (2026-01-28)\n\n## Context\n\u67d0\u4e9b Streamable \u5ba2\u6237\u7aef\uff08\u5982 MCP Inspector\uff09\u672a\u6b63\u786e\u5904\u7406 `Mcp-Session-Id` \u54cd\u5e94\u5934\uff0c\n\u5bfc\u81f4\u65e0\u6cd5\u83b7\u53d6 sessionId\u3002\n\n## Decision\n\u5b9e\u73b0\u53cc\u91cd\u4f20\u9012\u673a\u5236:\n1. \u54cd\u5e94\u5934: `Mcp-Session-Id`\n2. NDJSON \u521d\u59cb\u6d88\u606f: \u5305\u542b sessionId, messageEndpoint, transport\n\n## Consequences\n\n### Positive\n- \u2705 \u517c\u5bb9\u6027\u63d0\u5347\n- \u2705 \u5411\u540e\u517c\u5bb9\n- \u2705 \u589e\u5f3a\u53ef\u89c2\u6d4b\u6027\n\n### Negative\n- \u26a0\ufe0f \u8f7b\u5fae\u6027\u80fd\u5f00\u9500 (~100 bytes)\n- \u26a0\ufe0f \u9700\u8981\u7ef4\u62a4\u4e24\u5957\u4f20\u9012\u673a\u5236\n\n## Code\n- [\u5b9e\u73b0\u4ee3\u7801](../../mcp-router-v3/src/main/java/com/pajk/mcpbridge/core/config/McpRouterServerConfig.java#L329-L362)\n- [\u6d4b\u8bd5\u811a\u672c](../../test/integration/streamable/test_streamable_comprehensive.sh)\n\n## References\n- [MCP Streamable Specification](https://modelcontextprotocol.io/specification/basic/transports#streamable)\n- [\u529f\u80fd\u6587\u6863](../features/streamable-session-management.md)\n</code></pre>"},{"location":"reference/best-practices-traceability/#2","title":"2\ufe0f\u20e3 \u8ffd\u6eaf\u77e9\u9635","text":"<p>\u4f4d\u7f6e: <code>docs/traceability/streamable-session.md</code></p> <pre><code># Streamable Session Management - Traceability Matrix\n\n| Requirement | Code | Test | Documentation | ADR | Status |\n|-------------|------|------|---------------|-----|--------|\n| REQ-001: \u521d\u59cb\u6d88\u606f\u5305\u542b sessionId | [McpRouterServerConfig.java#L348-360](../../mcp-router-v3/src/main/java/com/pajk/mcpbridge/core/config/McpRouterServerConfig.java#L348-L360) | test_streamable_comprehensive.sh:Test#1 | [Feature Doc](../features/streamable-session-management.md) | [ADR-001](../adr/001-streamable-session-dual-transmission.md) | \u2705 |\n| REQ-002: \u54cd\u5e94\u5934\u5305\u542b Mcp-Session-Id | [buildStreamableResponse#L590](../../mcp-router-v3/src/main/java/com/pajk/mcpbridge/core/config/McpRouterServerConfig.java#L590) | test_streamable_comprehensive.sh:Test#2 | [Feature Doc](../features/streamable-session-management.md) | [ADR-001](../adr/001-streamable-session-dual-transmission.md) | \u2705 |\n| REQ-003: SessionId \u89e3\u6790\u65e5\u5fd7\u589e\u5f3a | [resolveSessionId#L871-903](../../mcp-router-v3/src/main/java/com/pajk/mcpbridge/core/config/McpRouterServerConfig.java#L871-L903) | Manual verification | [Feature Doc](../features/streamable-session-management.md) | - | \u2705 |\n| REQ-004: \u652f\u6301\u591a\u79cd Accept \u5934 | [resolveStreamableMediaType#L597](../../mcp-router-v3/src/main/java/com/pajk/mcpbridge/core/config/McpRouterServerConfig.java#L597) | test_streamable_comprehensive.sh:Test#3 | [Feature Doc](../features/streamable-session-management.md) | - | \u2705 |\n| REQ-005: \u7aef\u5230\u7aef\u5de5\u4f5c\u6d41 | [handleStreamable](../../mcp-router-v3/src/main/java/com/pajk/mcpbridge/core/config/McpRouterServerConfig.java#L329) | test_streamable_comprehensive.sh:Test#19 | [Feature Doc](../features/streamable-session-management.md) | [ADR-001](../adr/001-streamable-session-dual-transmission.md) | \u2705 |\n\n## Coverage Analysis\n- Code Coverage: ~95% (\u6838\u5fc3\u8def\u5f84)\n- Test Coverage: 100% (\u5173\u952e\u573a\u666f)\n- Documentation Coverage: 100%\n</code></pre>"},{"location":"reference/best-practices-traceability/#3-cicd","title":"3\ufe0f\u20e3 CI/CD \u96c6\u6210","text":"<p>\u5df2\u5b8c\u6210: <code>.github/workflows/test-streamable-session.yml</code></p> <p>\u529f\u80fd: - \u2705 PR \u81ea\u52a8\u89e6\u53d1\u6d4b\u8bd5 - \u2705 \u6d4b\u8bd5\u5931\u8d25\u81ea\u52a8\u8bc4\u8bba - \u2705 \u8ffd\u6eaf\u5230\u529f\u80fd\u6587\u6863 - \u2705 \u4e0a\u4f20\u6d4b\u8bd5\u62a5\u544a</p>"},{"location":"reference/best-practices-traceability/#4","title":"4\ufe0f\u20e3 \u6d4b\u8bd5\u5373\u6587\u6863","text":"<p>\u539f\u5219: Tests as Specifications</p> <p>\u5b9e\u8df5: <pre><code># \u6d4b\u8bd5\u540d\u79f0\u5373\u4e3a\u89c4\u683c\u8bf4\u660e\ntest_streamable_session_message()  # \u6d4b\u8bd5\uff1aSession \u6d88\u606f\ntest_session_id_headers()           # \u6d4b\u8bd5\uff1aSessionId \u89e3\u6790\ntest_end_to_end_workflow()          # \u6d4b\u8bd5\uff1a\u7aef\u5230\u7aef\u5de5\u4f5c\u6d41\n</code></pre></p> <p>\u6bcf\u4e2a\u6d4b\u8bd5\u90fd\u94fe\u63a5\u56de\u529f\u80fd\u6587\u6863\u548c\u8ffd\u6eaf\u77e9\u9635\u3002</p>"},{"location":"reference/best-practices-traceability/#_4","title":"\ud83d\udd04 \u5de5\u4f5c\u6d41\u7a0b","text":""},{"location":"reference/best-practices-traceability/#_5","title":"\u6dfb\u52a0\u65b0\u529f\u80fd\u65f6","text":"<pre><code>graph TD\n    A[\u9700\u6c42\u5206\u6790] --&gt; B[\u521b\u5efa ADR]\n    B --&gt; C[\u7f16\u5199\u4ee3\u7801]\n    C --&gt; D[\u7f16\u5199\u6d4b\u8bd5]\n    D --&gt; E[\u66f4\u65b0\u529f\u80fd\u6587\u6863]\n    E --&gt; F[\u66f4\u65b0\u8ffd\u6eaf\u77e9\u9635]\n    F --&gt; G[\u63d0\u4ea4 PR]\n    G --&gt; H[CI \u81ea\u52a8\u6d4b\u8bd5]\n    H --&gt; I{\u6d4b\u8bd5\u901a\u8fc7?}\n    I --&gt;|\u662f| J[\u5408\u5e76]\n    I --&gt;|\u5426| C\n</code></pre>"},{"location":"reference/best-practices-traceability/#_6","title":"\u4fee\u6539\u73b0\u6709\u529f\u80fd\u65f6","text":"<pre><code>graph TD\n    A[\u68c0\u67e5\u529f\u80fd\u7d22\u5f15] --&gt; B[\u9605\u8bfb ADR]\n    B --&gt; C[\u67e5\u770b\u8ffd\u6eaf\u77e9\u9635]\n    C --&gt; D[\u8fd0\u884c\u76f8\u5173\u6d4b\u8bd5]\n    D --&gt; E[\u4fee\u6539\u4ee3\u7801]\n    E --&gt; F[\u66f4\u65b0\u6d4b\u8bd5]\n    F --&gt; G[\u66f4\u65b0\u6587\u6863/ADR]\n    G --&gt; H[\u66f4\u65b0\u8ffd\u6eaf\u77e9\u9635]\n    H --&gt; I[CI \u9a8c\u8bc1]\n</code></pre>"},{"location":"reference/best-practices-traceability/#_7","title":"\ud83d\udee0\ufe0f \u63a8\u8350\u5de5\u5177","text":""},{"location":"reference/best-practices-traceability/#_8","title":"\u6d4b\u8bd5\u7ba1\u7406","text":"<ul> <li>TestRail - \u96c6\u6210\u8ffd\u6eaf\u529f\u80fd</li> <li>Jira + Xray - \u9700\u6c42\u7ba1\u7406 + \u6d4b\u8bd5\u7ba1\u7406</li> <li>Azure DevOps - \u5168\u5957 ALM</li> </ul>"},{"location":"reference/best-practices-traceability/#_9","title":"\u6587\u6863\u751f\u6210","text":"<ul> <li>Structurizr - arc42 + C4 Model \u53ef\u89c6\u5316</li> <li>adr-tools - ADR \u7ba1\u7406\u5de5\u5177</li> <li>MkDocs - \u6587\u6863\u7f51\u7ad9\u751f\u6210\uff08\u5df2\u4f7f\u7528\uff09</li> </ul>"},{"location":"reference/best-practices-traceability/#cicd","title":"CI/CD","text":"<ul> <li>GitHub Actions - \u5df2\u96c6\u6210</li> <li>Jenkins - \u4f01\u4e1a\u7ea7\u65b9\u6848</li> </ul>"},{"location":"reference/best-practices-traceability/#_10","title":"\ud83d\udcc8 \u5ea6\u91cf\u6307\u6807","text":""},{"location":"reference/best-practices-traceability/#_11","title":"\u8ffd\u6eaf\u6027","text":"<ul> <li>\u2705 \u9700\u6c42\u8986\u76d6\u7387: 100%</li> <li>\u2705 \u6d4b\u8bd5\u8986\u76d6\u7387: 100%</li> <li>\u2705 \u6587\u6863\u8986\u76d6\u7387: 100%</li> </ul>"},{"location":"reference/best-practices-traceability/#_12","title":"\u81ea\u52a8\u5316","text":"<ul> <li>\u2705 CI \u81ea\u52a8\u6d4b\u8bd5: \u662f</li> <li>\u2705 \u6587\u6863\u81ea\u52a8\u751f\u6210: \u90e8\u5206\uff08MkDocs\uff09</li> <li>\u2705 \u8ffd\u6eaf\u77e9\u9635\u66f4\u65b0: \u624b\u52a8\uff08\u53ef\u6539\u8fdb\uff09</li> </ul>"},{"location":"reference/best-practices-traceability/#_13","title":"\u53ef\u7ef4\u62a4\u6027","text":"<ul> <li>\ud83d\udcdd ADR \u6570\u91cf: 1</li> <li>\ud83d\udcda \u529f\u80fd\u6587\u6863: 1</li> <li>\ud83e\uddea \u81ea\u52a8\u5316\u6d4b\u8bd5: 20+</li> </ul>"},{"location":"reference/best-practices-traceability/#_14","title":"\ud83d\ude80 \u4e0b\u4e00\u6b65\u6539\u8fdb","text":""},{"location":"reference/best-practices-traceability/#1-2","title":"\u77ed\u671f\uff081-2\u5468\uff09","text":"<ul> <li> \u521b\u5efa\u6240\u6709\u5386\u53f2\u51b3\u7b56\u7684 ADR</li> <li> \u5b8c\u5584\u8ffd\u6eaf\u77e9\u9635\uff08\u5176\u4ed6\u529f\u80fd\uff09</li> <li> \u96c6\u6210\u6d4b\u8bd5\u7ba1\u7406\u5de5\u5177</li> </ul>"},{"location":"reference/best-practices-traceability/#1","title":"\u4e2d\u671f\uff081\u4e2a\u6708\uff09","text":"<ul> <li> \u81ea\u52a8\u5316\u8ffd\u6eaf\u77e9\u9635\u751f\u6210\uff08\u4ece\u4ee3\u7801\u6ce8\u91ca\uff09</li> <li> \u5b9e\u73b0\u4ee3\u7801\u2192\u6587\u6863\u94fe\u63a5\u68c0\u67e5</li> <li> \u6dfb\u52a0 arc42 \u5b8c\u6574\u67b6\u6784\u6587\u6863</li> </ul>"},{"location":"reference/best-practices-traceability/#3","title":"\u957f\u671f\uff083\u4e2a\u6708\uff09","text":"<ul> <li> \u5b9e\u73b0 AI \u8f85\u52a9\u6587\u6863\u751f\u6210</li> <li> \u5efa\u7acb\u5ea6\u91cf\u4eea\u8868\u677f</li> <li> \u96c6\u6210\u53ef\u89c6\u5316\u8ffd\u6eaf\u5de5\u5177</li> </ul>"},{"location":"reference/best-practices-traceability/#_15","title":"\ud83d\udcda \u53c2\u8003\u8d44\u6599","text":""},{"location":"reference/best-practices-traceability/#living-documentation","title":"Living Documentation","text":"<ul> <li>bluefruit.co.uk - Living Documentation</li> <li>ministryoftesting.com - Insights</li> </ul>"},{"location":"reference/best-practices-traceability/#traceability-matrix","title":"Traceability Matrix","text":"<ul> <li>TestRail - RTM Guide</li> <li>BrowserStack - Traceability</li> </ul>"},{"location":"reference/best-practices-traceability/#adr-arc42","title":"ADR &amp; arc42","text":"<ul> <li>arc42.org - Official Site</li> <li>github.com/joelparkerhenderson/architecture-decision-record</li> <li>adr.github.io</li> </ul> <p>\u7ef4\u62a4\u8005: \u5f00\u53d1\u56e2\u961f \u6700\u540e\u66f4\u65b0: 2026-01-28 \u7248\u672c: 1.0</p>"},{"location":"traceability/streamable-session/","title":"Streamable Session Management - Traceability Matrix","text":"<p>\u9700\u6c42\u3001\u4ee3\u7801\u3001\u6d4b\u8bd5\u3001\u6587\u6863\u7684\u5b8c\u6574\u8ffd\u6eaf\u5173\u7cfb</p> <p>\u529f\u80fd: Streamable Session \u7ba1\u7406 \u7248\u672c: 1.0 \u6700\u540e\u66f4\u65b0: 2026-01-28</p>"},{"location":"traceability/streamable-session/#_1","title":"\ud83d\udcca \u8ffd\u6eaf\u77e9\u9635","text":"Req ID \u9700\u6c42\u63cf\u8ff0 \u4ee3\u7801\u4f4d\u7f6e \u6d4b\u8bd5 \u6587\u6863 ADR \u72b6\u6001 REQ-SS-001 NDJSON \u6d41\u7684\u7b2c\u4e00\u6761\u6d88\u606f\u5fc5\u987b\u5305\u542b session \u4fe1\u606f McpRouterServerConfig.java#L348-360 Test #1 Feature Doc ADR-001 \u2705 REQ-SS-002 Session \u6d88\u606f\u5fc5\u987b\u5305\u542b sessionId \u5b57\u6bb5 \u540c\u4e0a Test #1 Feature Doc ADR-001 \u2705 REQ-SS-003 Session \u6d88\u606f\u5fc5\u987b\u5305\u542b messageEndpoint \u5b57\u6bb5 \u540c\u4e0a Test #1 Feature Doc ADR-001 \u2705 REQ-SS-004 Session \u6d88\u606f\u5fc5\u987b\u5305\u542b transport \u5b57\u6bb5\u4e14\u503c\u4e3a \"streamable\" \u540c\u4e0a Test #1 Feature Doc ADR-001 \u2705 REQ-SS-005 HTTP \u54cd\u5e94\u5934\u5fc5\u987b\u5305\u542b Mcp-Session-Id buildStreamableResponse Test #2 Feature Doc ADR-001 \u2705 REQ-SS-006 HTTP \u54cd\u5e94\u5934\u5fc5\u987b\u5305\u542b Mcp-Transport \u540c\u4e0a Test #2 Feature Doc ADR-001 \u2705 REQ-SS-007 \u652f\u6301\u591a\u79cd Accept \u5934\u7c7b\u578b resolveStreamableMediaType Test #3 Feature Doc - \u2705 REQ-SS-008 \u6bcf\u884c\u5fc5\u987b\u662f\u6709\u6548\u7684 JSON (NDJSON \u683c\u5f0f) toStreamableJson Test #4 Feature Doc - \u2705 REQ-SS-009 SessionId \u89e3\u6790\u5fc5\u987b\u8bb0\u5f55\u8be6\u7ec6\u65e5\u5fd7 resolveSessionId#L871-903 Manual Log Verification Feature Doc ADR-001 \u2705 REQ-SS-010 SessionId \u53ef\u4ece\u591a\u79cd\u8bf7\u6c42\u5934\u4e2d\u89e3\u6790 resolveSessionId Test #5-10 Feature Doc - \u26a0\ufe0f \u6d4b\u8bd5\u811a\u672c\u95ee\u9898 REQ-SS-011 \u5b8c\u6574\u7aef\u5230\u7aef\u5de5\u4f5c\u6d41\u5fc5\u987b\u6b63\u5e38 handleStreamable Test #19 Feature Doc ADR-001 \u2705 REQ-SS-012 \u652f\u6301\u5e76\u53d1\u8fde\u63a5\u4e14 sessionId \u552f\u4e00 initializeSession Test #20 Feature Doc - \u2705"},{"location":"traceability/streamable-session/#_2","title":"\ud83d\udcc8 \u7edf\u8ba1\u5206\u6790","text":""},{"location":"traceability/streamable-session/#_3","title":"\u8986\u76d6\u7387","text":"<ul> <li>\u9700\u6c42\u603b\u6570: 12</li> <li>\u5df2\u5b9e\u73b0: 12 (100%)</li> <li>\u5df2\u6d4b\u8bd5: 11 (92%) - 1\u4e2a\u6d4b\u8bd5\u811a\u672c\u95ee\u9898</li> <li>\u5df2\u6587\u6863\u5316: 12 (100%)</li> </ul>"},{"location":"traceability/streamable-session/#_4","title":"\u72b6\u6001\u5206\u5e03","text":"<ul> <li>\u2705 \u5b8c\u6210: 11</li> <li>\u26a0\ufe0f \u90e8\u5206\u5b8c\u6210: 1 (\u6d4b\u8bd5\u95ee\u9898)</li> <li>\u274c \u672a\u5b8c\u6210: 0</li> </ul>"},{"location":"traceability/streamable-session/#_5","title":"\u6d4b\u8bd5\u5206\u7c7b","text":"<ul> <li>\u81ea\u52a8\u5316\u6d4b\u8bd5: 11</li> <li>\u624b\u52a8\u9a8c\u8bc1: 1 (\u65e5\u5fd7\u68c0\u67e5)</li> <li>CI \u96c6\u6210: \u2705 \u662f</li> </ul>"},{"location":"traceability/streamable-session/#_6","title":"\ud83d\udd0d \u9700\u6c42\u8be6\u60c5","text":""},{"location":"traceability/streamable-session/#req-ss-001-session","title":"REQ-SS-001: Session \u521d\u59cb\u6d88\u606f","text":"<p>\u4f18\u5148\u7ea7: \ud83d\udd34 \u9ad8 \u7c7b\u522b: \u529f\u80fd\u6027\u9700\u6c42</p> <p>\u63cf\u8ff0: \u5f53\u5ba2\u6237\u7aef\u5efa\u7acb Streamable \u8fde\u63a5\u65f6\uff0c\u670d\u52a1\u5668\u5fc5\u987b\u5728 NDJSON \u6d41\u7684\u7b2c\u4e00\u6761\u6d88\u606f\u4e2d\u53d1\u9001 session \u4fe1\u606f\u3002</p> <p>\u9a8c\u6536\u6807\u51c6: - [x] \u7b2c\u4e00\u6761\u6d88\u606f\u7c7b\u578b\u4e3a \"session\" - [x] \u5305\u542b\u6240\u6709\u5fc5\u9700\u5b57\u6bb5 - [x] \u683c\u5f0f\u7b26\u5408 NDJSON \u89c4\u8303 - [x] \u5728 endpoint \u4e8b\u4ef6\u4e4b\u524d\u53d1\u9001</p> <p>\u6d4b\u8bd5\u65b9\u6cd5: <pre><code>curl -N -H \"Accept: application/x-ndjson\" \\\n  \"http://localhost:8052/mcp/service\" | head -n 1 | jq .\n</code></pre></p> <p>\u9884\u671f\u8f93\u51fa: <pre><code>{\n  \"type\": \"session\",\n  \"sessionId\": \"uuid\",\n  \"messageEndpoint\": \"http://...\",\n  \"transport\": \"streamable\"\n}\n</code></pre></p>"},{"location":"traceability/streamable-session/#req-ss-009-sessionid","title":"REQ-SS-009: SessionId \u89e3\u6790\u65e5\u5fd7","text":"<p>\u4f18\u5148\u7ea7: \ud83d\udfe1 \u4e2d \u7c7b\u522b: \u975e\u529f\u80fd\u6027\u9700\u6c42\uff08\u53ef\u89c2\u6d4b\u6027\uff09</p> <p>\u63cf\u8ff0: \u5f53\u670d\u52a1\u5668\u89e3\u6790 sessionId \u65f6\uff0c\u5fc5\u987b\u8bb0\u5f55\u8be6\u7ec6\u7684\u65e5\u5fd7\uff0c\u5305\u62ec\uff1a - SessionId \u7684\u6765\u6e90\uff08\u8bf7\u6c42\u5934\u540d\u79f0\u6216\u67e5\u8be2\u53c2\u6570\uff09 - \u89e3\u6790\u6210\u529f\u6216\u5931\u8d25\u7684\u4fe1\u606f - \u672a\u627e\u5230 sessionId \u65f6\u7684\u8b66\u544a</p> <p>\u9a8c\u6536\u6807\u51c6: - [x] \u4ece\u8bf7\u6c42\u5934\u89e3\u6790\u65f6\u8bb0\u5f55INFO\u65e5\u5fd7 - [x] \u4ece\u67e5\u8be2\u53c2\u6570\u89e3\u6790\u65f6\u8bb0\u5f55INFO\u65e5\u5fd7 - [x] \u672a\u627e\u5230\u65f6\u8bb0\u5f55WARN\u65e5\u5fd7\u5e76\u63d0\u793a\u6b63\u786e\u4f7f\u7528\u65b9\u5f0f</p> <p>\u6d4b\u8bd5\u65b9\u6cd5: <pre><code># \u542f\u52a8\u670d\u52a1\u5e76\u89c2\u5bdf\u65e5\u5fd7\ncurl -H \"Mcp-Session-Id: test-123\" ... # \u5e94\u770b\u5230 \"\u2705 Resolved sessionId from header\"\ncurl \"...?sessionId=test-456\" ...      # \u5e94\u770b\u5230 \"\u2705 Resolved sessionId from query parameter\"\ncurl ... # \u65e0sessionId                 # \u5e94\u770b\u5230 \"\u26a0\ufe0f No sessionId found\"\n</code></pre></p>"},{"location":"traceability/streamable-session/#_7","title":"\ud83d\udd17 \u4f9d\u8d56\u5173\u7cfb","text":"<pre><code>graph TD\n    REQ001[REQ-SS-001&lt;br/&gt;Session \u521d\u59cb\u6d88\u606f] --&gt; REQ002[REQ-SS-002&lt;br/&gt;sessionId \u5b57\u6bb5]\n    REQ001 --&gt; REQ003[REQ-SS-003&lt;br/&gt;messageEndpoint \u5b57\u6bb5]\n    REQ001 --&gt; REQ004[REQ-SS-004&lt;br/&gt;transport \u5b57\u6bb5]\n\n    REQ005[REQ-SS-005&lt;br/&gt;\u54cd\u5e94\u5934 SessionId] --&gt; REQ011[REQ-SS-011&lt;br/&gt;\u7aef\u5230\u7aef\u5de5\u4f5c\u6d41]\n    REQ001 --&gt; REQ011\n\n    REQ009[REQ-SS-009&lt;br/&gt;\u89e3\u6790\u65e5\u5fd7] --&gt; REQ010[REQ-SS-010&lt;br/&gt;\u591a\u79cd\u5934\u89e3\u6790]\n\n    REQ011 --&gt; REQ012[REQ-SS-012&lt;br/&gt;\u5e76\u53d1\u8fde\u63a5]\n</code></pre>"},{"location":"traceability/streamable-session/#_8","title":"\ud83d\udea6 \u98ce\u9669\u4e0e\u95ee\u9898","text":"ID \u98ce\u9669/\u95ee\u9898 \u5f71\u54cd \u7f13\u89e3\u63aa\u65bd \u72b6\u6001 RISK-001 \u6d4b\u8bd5\u811a\u672c\u4f7f\u7528\u9519\u8bef\u7aef\u70b9 \u4e2d \u4fee\u590d\u6d4b\u8bd5\u811a\u672c\u4f7f\u7528\u6b63\u786e\u8def\u5f84 \ud83d\udea7 \u8fdb\u884c\u4e2d RISK-002 \u54cd\u5e94\u5934\u5927\u5c0f\u5199\u654f\u611f\u6027 \u4f4e \u6d4b\u8bd5\u8986\u76d6\u6240\u6709\u53d8\u4f53 \u2705 \u5df2\u7f13\u89e3 RISK-003 \u6027\u80fd\u5f00\u9500 \u4f4e \u5df2\u9a8c\u8bc1\u53ef\u5ffd\u7565 \u2705 \u5df2\u7f13\u89e3"},{"location":"traceability/streamable-session/#_9","title":"\ud83d\udcdd \u53d8\u66f4\u5386\u53f2","text":"\u65e5\u671f \u7248\u672c \u53d8\u66f4\u5185\u5bb9 \u4f5c\u8005 2026-01-28 1.0 \u521d\u59cb\u7248\u672c AI Assistant"},{"location":"traceability/streamable-session/#_10","title":"\ud83d\udd04 \u7ef4\u62a4\u8bf4\u660e","text":""},{"location":"traceability/streamable-session/#_11","title":"\u66f4\u65b0\u8ffd\u6eaf\u77e9\u9635\u7684\u65f6\u673a","text":"<ul> <li>\u2705 \u6dfb\u52a0\u65b0\u9700\u6c42\u65f6</li> <li>\u2705 \u4fee\u6539\u73b0\u6709\u4ee3\u7801\u65f6</li> <li>\u2705 \u6dfb\u52a0\u6216\u4fee\u6539\u6d4b\u8bd5\u65f6</li> <li>\u2705 \u66f4\u65b0\u6587\u6863\u65f6</li> </ul>"},{"location":"traceability/streamable-session/#_12","title":"\u5de5\u5177\u652f\u6301","text":"<ul> <li>\u624b\u52a8\u7ef4\u62a4: \u5f53\u524d\u65b9\u5f0f</li> <li>\u5efa\u8bae\u5de5\u5177: Jira + Xray, TestRail</li> <li>\u672a\u6765\u81ea\u52a8\u5316: \u4ece\u4ee3\u7801\u6ce8\u91ca\u81ea\u52a8\u751f\u6210</li> </ul> <p>\u7ef4\u62a4\u8005: \u5f00\u53d1\u56e2\u961f \u5ba1\u67e5\u9891\u7387: \u6bcf\u6b21 PR \u6700\u540e\u5ba1\u67e5: 2026-01-28</p>"},{"location":"tutorials/","title":"\u6559\u7a0b","text":"<p>\u6b22\u8fce\u6765\u5230\u6559\u7a0b\u90e8\u5206\uff01\u8fd9\u91cc\u63d0\u4f9b\u5faa\u5e8f\u6e10\u8fdb\u7684\u5b66\u4e60\u6307\u5357\u3002</p>"},{"location":"tutorials/#_2","title":"\u53ef\u7528\u6559\u7a0b","text":"<ul> <li>5\u5206\u949f\u5feb\u901f\u5f00\u59cb</li> <li>\u5f00\u53d1\u73af\u5883\u8bbe\u7f6e</li> </ul>"},{"location":"workflows/","title":"\u5de5\u4f5c\u6d41","text":"<p>\u4e86\u89e3\u9879\u76ee\u7684\u5f00\u53d1\u548c\u90e8\u7f72\u6d41\u7a0b\u3002</p>"},{"location":"workflows/#_2","title":"\u53ef\u7528\u6587\u6863","text":"<ul> <li>\u5f00\u53d1\u5de5\u4f5c\u6d41</li> <li>CI/CD \u6d41\u7a0b</li> <li>GitHub \u8bbe\u7f6e</li> </ul>"},{"location":"workflows/github-setup/","title":"\u2705 GitHub \u5de5\u4f5c\u6d41\u8bbe\u7f6e\u5b8c\u6210\u62a5\u544a","text":"<p>\u9879\u76ee: mcp-router-sse-parent \u5b8c\u6210\u65f6\u95f4: 2026-01-28 \u5de5\u4f5c\u6d41: GitHub Flow + \u591a\u6a21\u5757 CI/CD</p>"},{"location":"workflows/github-setup/#_1","title":"\ud83c\udf89 \u5df2\u5b8c\u6210\u7684\u5de5\u4f5c","text":""},{"location":"workflows/github-setup/#1-github-actions-cicd","title":"1. GitHub Actions CI/CD","text":""},{"location":"workflows/github-setup/#_2","title":"\u6587\u4ef6\u521b\u5efa\u6e05\u5355","text":"<ul> <li>\u2705 <code>.github/workflows/maven-build.yml</code> - \u57fa\u7840 Maven \u6784\u5efa</li> <li>\u2705 <code>.github/workflows/multi-module-build.yml</code> - \u591a\u6a21\u5757\u667a\u80fd\u6784\u5efa</li> </ul>"},{"location":"workflows/github-setup/#_3","title":"\u529f\u80fd\u7279\u6027","text":"\u7279\u6027 maven-build.yml multi-module-build.yml \u81ea\u52a8\u6784\u5efa \u2705 \u2705 \u81ea\u52a8\u6d4b\u8bd5 \u2705 \u2705 \u6d4b\u8bd5\u62a5\u544a \u2705 \u2705 \u53d8\u66f4\u68c0\u6d4b \u274c \u2705 \u667a\u80fd\u68c0\u6d4b \u5e76\u884c\u6784\u5efa \u274c \u2705 \u5e76\u884c \u6784\u5efa\u4ea7\u7269 \u274c \u2705 \u4e0a\u4f20 JAR"},{"location":"workflows/github-setup/#_4","title":"\u89e6\u53d1\u6761\u4ef6","text":"<pre><code>on:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n</code></pre>"},{"location":"workflows/github-setup/#2-github","title":"2. GitHub \u6a21\u677f","text":""},{"location":"workflows/github-setup/#pr","title":"PR \u6a21\u677f","text":"<ul> <li>\u2705 <code>.github/PULL_REQUEST_TEMPLATE.md</code></li> </ul> <p>\u5305\u542b\u5185\u5bb9: - \u6539\u52a8\u63cf\u8ff0 - \u6539\u52a8\u7c7b\u578b\uff08Bug/\u529f\u80fd/\u6587\u6863\u7b49\uff09 - \u76f8\u5173 Issue - \u6d4b\u8bd5\u8bf4\u660e - \u68c0\u67e5\u6e05\u5355</p>"},{"location":"workflows/github-setup/#issue","title":"Issue \u6a21\u677f","text":"<ul> <li>\u2705 <code>.github/ISSUE_TEMPLATE/bug_report.md</code> - Bug \u62a5\u544a</li> <li>\u2705 <code>.github/ISSUE_TEMPLATE/feature_request.md</code> - \u529f\u80fd\u8bf7\u6c42</li> </ul>"},{"location":"workflows/github-setup/#3","title":"3. \u8d21\u732e\u6307\u5357","text":"<ul> <li>\u2705 <code>CONTRIBUTING.md</code> - \u5b8c\u6574\u7684\u8d21\u732e\u6307\u5357</li> </ul> <p>\u5305\u542b\u5185\u5bb9: - GitHub Flow \u5de5\u4f5c\u6d41\u8bf4\u660e - \u5206\u652f\u547d\u540d\u89c4\u8303 - Commit Message \u89c4\u8303 - \u4ee3\u7801\u5ba1\u67e5\u6e05\u5355 - \u672c\u5730\u5f00\u53d1\u73af\u5883\u8bbe\u7f6e - \u5e38\u89c1\u95ee\u9898\u89e3\u7b54</p>"},{"location":"workflows/github-setup/#_5","title":"\ud83d\udcc2 \u65b0\u589e\u6587\u4ef6\u7ed3\u6784","text":"<pre><code>mcp-router-sse-parent/\n\u251c\u2500\u2500 .github/\n\u2502   \u251c\u2500\u2500 workflows/\n\u2502   \u2502   \u251c\u2500\u2500 maven-build.yml           \u2728 \u57fa\u7840 CI/CD\n\u2502   \u2502   \u2514\u2500\u2500 multi-module-build.yml    \u2728 \u591a\u6a21\u5757 CI/CD\n\u2502   \u251c\u2500\u2500 ISSUE_TEMPLATE/\n\u2502   \u2502   \u251c\u2500\u2500 bug_report.md             \u2728 Bug \u62a5\u544a\u6a21\u677f\n\u2502   \u2502   \u2514\u2500\u2500 feature_request.md        \u2728 \u529f\u80fd\u8bf7\u6c42\u6a21\u677f\n\u2502   \u2514\u2500\u2500 PULL_REQUEST_TEMPLATE.md      \u2728 PR \u6a21\u677f\n\u251c\u2500\u2500 CONTRIBUTING.md                    \u2728 \u8d21\u732e\u6307\u5357\n\u251c\u2500\u2500 .agent/workflows/\n\u2502   \u251c\u2500\u2500 add-mcp-server.md             (\u5df2\u521b\u5efa)\n\u2502   \u251c\u2500\u2500 add-agent-workflow.md         (\u5df2\u521b\u5efa)\n\u2502   \u2514\u2500\u2500 review.md                     (\u5df2\u6709)\n\u2514\u2500\u2500 docs/\n    \u251c\u2500\u2500 GITHUB_WORKFLOWS_COMPARISON.md (\u5df2\u521b\u5efa)\n    \u251c\u2500\u2500 WORKFLOWS_SUMMARY.md          (\u5df2\u521b\u5efa)\n    \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"workflows/github-setup/#_6","title":"\ud83d\ude80 \u5982\u4f55\u4f7f\u7528","text":""},{"location":"workflows/github-setup/#1","title":"\u573a\u666f 1: \u63d0\u4ea4\u4ee3\u7801","text":"<pre><code># 1. \u521b\u5efa\u5206\u652f\ngit checkout -b feature/add-new-feature\n\n# 2. \u5f00\u53d1\u548c\u63d0\u4ea4\ngit add .\ngit commit -m \"feat(module): add new feature\"\n\n# 3. \u63a8\u9001\ngit push origin feature/add-new-feature\n\n# 4. \u5728 GitHub \u521b\u5efa PR\n# - PR \u6a21\u677f\u4f1a\u81ea\u52a8\u663e\u793a\n# - \u586b\u5199\u6240\u6709\u5fc5\u8981\u4fe1\u606f\n# - GitHub Actions \u81ea\u52a8\u8fd0\u884c\u6d4b\u8bd5\n\n# 5. \u7b49\u5f85\u5ba1\u67e5\u548c\u5408\u5e76\n</code></pre>"},{"location":"workflows/github-setup/#2-bug","title":"\u573a\u666f 2: \u62a5\u544a Bug","text":"<ol> <li>\u8bbf\u95ee GitHub Issues</li> <li>\u70b9\u51fb \"New Issue\"</li> <li>\u9009\u62e9 \"Bug Report\" \u6a21\u677f</li> <li>\u586b\u5199\u6a21\u677f\u4e2d\u7684\u6240\u6709\u5b57\u6bb5</li> <li>\u63d0\u4ea4 Issue</li> </ol>"},{"location":"workflows/github-setup/#3_1","title":"\u573a\u666f 3: \u63d0\u51fa\u529f\u80fd\u5efa\u8bae","text":"<ol> <li>\u8bbf\u95ee GitHub Issues</li> <li>\u70b9\u51fb \"New Issue\"</li> <li>\u9009\u62e9 \"Feature Request\" \u6a21\u677f</li> <li>\u63cf\u8ff0\u60a8\u7684\u60f3\u6cd5</li> <li>\u63d0\u4ea4 Issue</li> </ol>"},{"location":"workflows/github-setup/#cicd","title":"\ud83d\udcca CI/CD \u5de5\u4f5c\u539f\u7406","text":""},{"location":"workflows/github-setup/#maven-buildyml","title":"maven-build.yml (\u57fa\u7840)","text":"<pre><code>Push \u5230 main/develop \u6216\u521b\u5efa PR\n    \u2193\nCheckout \u4ee3\u7801\n    \u2193\n\u8bbe\u7f6e JDK 17\n    \u2193\nMaven \u6784\u5efa (mvn clean install)\n    \u2193\n\u8fd0\u884c\u6d4b\u8bd5 (mvn test)\n    \u2193\n\u751f\u6210\u6d4b\u8bd5\u62a5\u544a\n    \u2193\n\u2705 \u6216 \u274c\n</code></pre>"},{"location":"workflows/github-setup/#multi-module-buildyml","title":"multi-module-build.yml (\u667a\u80fd)","text":"<pre><code>Push \u5230 main/develop \u6216\u521b\u5efa PR\n    \u2193\n\u68c0\u6d4b\u53d8\u66f4\u7684\u6a21\u5757\n    \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Router \u2502Server3 \u2502Server4 \u2502Server6 \u2502  (\u5e76\u884c)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u2193        \u2193        \u2193        \u2193\n\u53ea\u6784\u5efa\u53d8\u66f4\u7684\u6a21\u5757 (\u8282\u7701\u65f6\u95f4)\n    \u2193\n\u4e0a\u4f20\u6784\u5efa\u4ea7\u7269 (\u5982\u679c\u662f main \u5206\u652f)\n    \u2193\n\u5b8c\u6574\u6784\u5efa\u9a8c\u8bc1\n    \u2193\n\u2705 \u6216 \u274c\n</code></pre> <p>\u4f18\u52bf: - \u26a1 \u66f4\u5feb: \u53ea\u6784\u5efa\u53d8\u66f4\u7684\u6a21\u5757 - \ud83d\udcb0 \u8282\u7701\u8d44\u6e90: \u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u6784\u5efa - \ud83d\udd0d \u7cbe\u51c6\u5b9a\u4f4d: \u5feb\u901f\u53d1\u73b0\u54ea\u4e2a\u6a21\u5757\u6709\u95ee\u9898</p>"},{"location":"workflows/github-setup/#_7","title":"\ud83c\udfaf \u5206\u652f\u548c\u63d0\u4ea4\u89c4\u8303","text":""},{"location":"workflows/github-setup/#_8","title":"\u5206\u652f\u547d\u540d","text":"\u7c7b\u578b \u683c\u5f0f \u793a\u4f8b \u529f\u80fd <code>feature/\u63cf\u8ff0</code> <code>feature/add-gemini-client</code> Bug <code>bugfix/\u63cf\u8ff0</code> <code>bugfix/fix-memory-leak</code> \u70ed\u4fee\u590d <code>hotfix/\u63cf\u8ff0</code> <code>hotfix/security-patch</code> \u6587\u6863 <code>docs/\u63cf\u8ff0</code> <code>docs/update-contributing</code> \u91cd\u6784 <code>refactor/\u63cf\u8ff0</code> <code>refactor/optimize-agent</code>"},{"location":"workflows/github-setup/#commit-message","title":"Commit Message","text":"<pre><code>&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;\n\n&lt;body&gt;\n\n&lt;footer&gt;\n</code></pre> <p>\u793a\u4f8b: <pre><code>feat(mcp-server): add weather query tool\n\n\u6dfb\u52a0\u4e86\u57fa\u4e8e\u9ad8\u5fb7\u5730\u56fe API \u7684\u5929\u6c14\u67e5\u8be2\u5de5\u5177\u3002\n\u652f\u6301\u67e5\u8be2\u5b9e\u65f6\u5929\u6c14\u548c 7 \u5929\u9884\u62a5\u3002\n\nCloses #123\n</code></pre></p> <p>Type: - <code>feat</code>: \u65b0\u529f\u80fd - <code>fix</code>: \u4fee\u590d - <code>docs</code>: \u6587\u6863 - <code>style</code>: \u683c\u5f0f - <code>refactor</code>: \u91cd\u6784 - <code>test</code>: \u6d4b\u8bd5 - <code>chore</code>: \u6784\u5efa/\u5de5\u5177</p>"},{"location":"workflows/github-setup/#_9","title":"\u2705 \u4e0b\u4e00\u6b65\u5efa\u8bae","text":""},{"location":"workflows/github-setup/#_10","title":"\u7acb\u5373\u6267\u884c\uff08\u4eca\u5929\uff09","text":"<ol> <li> <p> \u63a8\u9001\u5230 GitHub <pre><code>git add .\ngit commit -m \"chore: add GitHub workflows and templates\"\ngit push origin main\n</code></pre></p> </li> <li> <p> \u9a8c\u8bc1 GitHub Actions</p> </li> <li>\u8bbf\u95ee GitHub \u4ed3\u5e93</li> <li>\u67e5\u770b \"Actions\" \u6807\u7b7e\u9875</li> <li> <p>\u786e\u8ba4\u5de5\u4f5c\u6d41\u914d\u7f6e\u6b63\u786e</p> </li> <li> <p> \u8bbe\u7f6e\u5206\u652f\u4fdd\u62a4\u89c4\u5219</p> </li> <li>Settings \u2192 Branches</li> <li>Add branch protection rule for <code>main</code></li> <li>\u2705 Require pull request reviews</li> <li>\u2705 Require status checks (GitHub Actions)</li> </ol>"},{"location":"workflows/github-setup/#_11","title":"\u672c\u5468\u6267\u884c","text":"<ol> <li> <p> \u6d4b\u8bd5\u5b8c\u6574\u6d41\u7a0b <pre><code># \u521b\u5efa\u6d4b\u8bd5\u5206\u652f\ngit checkout -b feature/test-workflow\n\n# \u505a\u4e00\u4e9b\u5c0f\u6539\u52a8\necho \"# Test\" &gt;&gt; test.md\ngit add test.md\ngit commit -m \"test: verify GitHub Actions\"\ngit push origin feature/test-workflow\n\n# \u521b\u5efa PR \u5e76\u89c2\u5bdf CI/CD \u8fd0\u884c\n</code></pre></p> </li> <li> <p> \u56e2\u961f\u57f9\u8bad</p> </li> <li>\u5206\u4eab <code>CONTRIBUTING.md</code></li> <li>\u6f14\u793a\u5982\u4f55\u521b\u5efa PR</li> <li> <p>\u89e3\u91ca CI/CD \u6d41\u7a0b</p> </li> <li> <p> \u4f18\u5316\u5de5\u4f5c\u6d41</p> </li> <li>\u6839\u636e\u5b9e\u9645\u8fd0\u884c\u60c5\u51b5\u8c03\u6574</li> <li>\u6dfb\u52a0\u66f4\u591a\u68c0\u67e5\uff08\u5982 lint\u3001\u5b89\u5168\u626b\u63cf\uff09</li> </ol>"},{"location":"workflows/github-setup/#_12","title":"\u672c\u6708\u6267\u884c","text":"<ol> <li> \u6dfb\u52a0\u66f4\u591a\u81ea\u52a8\u5316</li> <li>\u81ea\u52a8\u6807\u7b7e</li> <li>\u81ea\u52a8\u5206\u914d\u5ba1\u67e5\u8005</li> <li> <p>\u81ea\u52a8\u5316 CHANGELOG \u751f\u6210</p> </li> <li> <p> \u76d1\u63a7\u548c\u4f18\u5316</p> </li> <li>\u67e5\u770b Actions \u8fd0\u884c\u65f6\u95f4</li> <li>\u4f18\u5316\u6162\u7684\u6b65\u9aa4</li> <li>\u8c03\u6574\u5e76\u884c\u7b56\u7565</li> </ol>"},{"location":"workflows/github-setup/#_13","title":"\ud83d\udcda \u76f8\u5173\u6587\u6863","text":"\u6587\u6863 \u8def\u5f84 \u8bf4\u660e \u5de5\u4f5c\u6d41\u5bf9\u6bd4 <code>docs/GITHUB_WORKFLOWS_COMPARISON.md</code> \u8be6\u7ec6\u5bf9\u6bd4\u5206\u6790 \u5de5\u4f5c\u6d41\u603b\u7ed3 <code>docs/WORKFLOWS_SUMMARY.md</code> \u5feb\u901f\u53c2\u8003 \u8d21\u732e\u6307\u5357 <code>CONTRIBUTING.md</code> \u5f00\u53d1\u89c4\u8303 MCP Server \u5de5\u4f5c\u6d41 <code>.agent/workflows/add-mcp-server.md</code> \u6dfb\u52a0 MCP Server Agent \u5de5\u4f5c\u6d41 <code>.agent/workflows/add-agent-workflow.md</code> \u5f00\u53d1 Agent"},{"location":"workflows/github-setup/#_14","title":"\ud83c\udf93 \u5b66\u4e60\u8d44\u6e90","text":""},{"location":"workflows/github-setup/#github-actions","title":"GitHub Actions","text":"<ul> <li>\u5b98\u65b9\u6587\u6863</li> <li>Marketplace</li> <li>Awesome Actions</li> </ul>"},{"location":"workflows/github-setup/#github-flow","title":"GitHub Flow","text":"<ul> <li>\u5b98\u65b9\u6307\u5357</li> <li>\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"workflows/github-setup/#conventional-commits","title":"Conventional Commits","text":"<ul> <li>\u5b98\u65b9\u89c4\u8303</li> <li>\u5de5\u5177\u652f\u6301</li> </ul>"},{"location":"workflows/github-setup/#tips-tricks","title":"\ud83d\udca1 Tips &amp; Tricks","text":""},{"location":"workflows/github-setup/#cicd_1","title":"\u52a0\u901f CI/CD","text":"<ol> <li> <p>\u4f7f\u7528\u7f13\u5b58 <pre><code>- uses: actions/setup-java@v4\n  with:\n    cache: maven  # \u2705 \u7f13\u5b58 Maven \u4f9d\u8d56\n</code></pre></p> </li> <li> <p>\u53ea\u5728\u9700\u8981\u65f6\u8fd0\u884c <pre><code>if: github.ref == 'refs/heads/main'  # \u53ea\u5728 main \u5206\u652f\n</code></pre></p> </li> <li> <p>\u5e76\u884c\u6267\u884c <pre><code>strategy:\n  matrix:\n    module: [server1, server2, server3]  # \u5e76\u884c\n</code></pre></p> </li> </ol>"},{"location":"workflows/github-setup/#actions","title":"\u672c\u5730\u6d4b\u8bd5 Actions","text":"<pre><code># \u4f7f\u7528 act \u5de5\u5177\u672c\u5730\u8fd0\u884c GitHub Actions\n# https://github.com/nektos/act\n\n# \u5b89\u88c5\nbrew install act\n\n# \u8fd0\u884c\nact push\n</code></pre>"},{"location":"workflows/github-setup/#actions_1","title":"\u67e5\u770b Actions \u65e5\u5fd7","text":"<pre><code># \u4f7f\u7528 GitHub CLI\ngh run list\ngh run view RUN_ID\ngh run view RUN_ID --log\n</code></pre>"},{"location":"workflows/github-setup/#_15","title":"\u2753 \u5e38\u89c1\u95ee\u9898","text":""},{"location":"workflows/github-setup/#q-github-actions","title":"Q: GitHub Actions \u5931\u8d25\u4e86\u600e\u4e48\u529e\uff1f","text":"<p>A:  1. \u67e5\u770b Actions \u6807\u7b7e\u9875\u7684\u9519\u8bef\u8be6\u60c5 2. \u68c0\u67e5\u65e5\u5fd7\u627e\u5230\u5177\u4f53\u9519\u8bef 3. \u672c\u5730\u91cd\u73b0\u95ee\u9898 4. \u4fee\u590d\u540e\u91cd\u65b0\u63d0\u4ea4</p>"},{"location":"workflows/github-setup/#q-ci","title":"Q: \u5982\u4f55\u8df3\u8fc7 CI\u68c0\u67e5\uff1f","text":"<p>A:  \u5728 commit message \u4e2d\u6dfb\u52a0 <code>[skip ci]</code>: <pre><code>git commit -m \"docs: update README [skip ci]\"\n</code></pre></p>"},{"location":"workflows/github-setup/#q-actions","title":"Q: \u80fd\u5426\u624b\u52a8\u89e6\u53d1 Actions\uff1f","text":"<p>A:  \u6dfb\u52a0 <code>workflow_dispatch</code> \u89e6\u53d1\u5668: <pre><code>on:\n  push:\n  workflow_dispatch:  # \u5141\u8bb8\u624b\u52a8\u89e6\u53d1\n</code></pre></p>"},{"location":"workflows/github-setup/#q","title":"Q: \u5982\u4f55\u6dfb\u52a0\u66f4\u591a\u6784\u5efa\u6b65\u9aa4\uff1f","text":"<p>A:  \u7f16\u8f91 <code>.github/workflows/*.yml</code> \u6587\u4ef6\uff0c\u6dfb\u52a0\u65b0\u7684 steps\u3002</p>"},{"location":"workflows/github-setup/#_16","title":"\ud83c\udf89 \u606d\u559c\uff01","text":"<p>\u60a8\u7684\u9879\u76ee\u73b0\u5728\u62e5\u6709\uff1a</p> <p>\u2705 \u81ea\u52a8\u5316 CI/CD - \u6bcf\u6b21\u63d0\u4ea4\u81ea\u52a8\u6d4b\u8bd5 \u2705 \u6807\u51c6\u5316\u6d41\u7a0b - \u6e05\u6670\u7684\u8d21\u732e\u6307\u5357 \u2705 \u89c4\u8303\u5316\u6a21\u677f - PR \u548c Issue \u6a21\u677f \u2705 \u591a\u6a21\u5757\u652f\u6301 - \u667a\u80fd\u6784\u5efa\u7cfb\u7edf \u2705 \u5b8c\u6574\u6587\u6863 - \u8be6\u5c3d\u7684\u5de5\u4f5c\u6d41\u8bf4\u660e  </p> <p>\u5f00\u59cb\u4f7f\u7528\u60a8\u7684\u65b0\u5de5\u4f5c\u6d41\u5427\uff01 \ud83d\ude80</p> <p>\u6587\u6863\u7248\u672c: 1.0 \u521b\u5efa\u65f6\u95f4: 2026-01-28 \u7ef4\u62a4\u8005: Your Team \u53cd\u9988: \u6b22\u8fce\u901a\u8fc7 Issues \u63d0\u4f9b\u53cd\u9988</p>"},{"location":"workflows/summary/","title":"\u5de5\u4f5c\u6d41\u6574\u5408\u603b\u7ed3","text":"<p>\u4e3a mcp-router-sse-parent \u9879\u76ee\u9009\u62e9\u548c\u5b9e\u65bd\u6807\u51c6\u5316\u5de5\u4f5c\u6d41</p> <p>\u5b8c\u6210\u65f6\u95f4: 2026-01-28</p>"},{"location":"workflows/summary/#_2","title":"\u2705 \u5df2\u5b8c\u6210\u5de5\u4f5c","text":""},{"location":"workflows/summary/#1","title":"1. \u521b\u5efa\u7684\u6587\u6863","text":"\u6587\u6863 \u8def\u5f84 \u8bf4\u660e \u5de5\u4f5c\u6d41\u5bf9\u6bd4\u5206\u6790 <code>docs/GITHUB_WORKFLOWS_COMPARISON.md</code> GitHub \u6210\u719f\u5de5\u4f5c\u6d41\u8be6\u7ec6\u5bf9\u6bd4 \u6dfb\u52a0 MCP Server \u5de5\u4f5c\u6d41 <code>.agent/workflows/add-mcp-server.md</code> \u6807\u51c6\u5316MCP Server\u5f00\u53d1\u6d41\u7a0b \u6dfb\u52a0 Agent \u5de5\u4f5c\u6d41 <code>.agent/workflows/add-agent-workflow.md</code> \u6807\u51c6\u5316AI Agent\u5f00\u53d1\u6d41\u7a0b \u4ee3\u7801\u5ba1\u67e5\u5de5\u4f5c\u6d41 <code>.agent/workflows/review.md</code> \u5df2\u6709\uff0c\u65e0\u9700\u4fee\u6539"},{"location":"workflows/summary/#2","title":"2. \u5bf9\u6bd4\u7684\u5de5\u4f5c\u6d41\u7c7b\u578b","text":""},{"location":"workflows/summary/#_3","title":"\u5206\u652f\u7b56\u7565","text":"<ul> <li>\u2705 Git Flow</li> <li>\u2705 GitHub Flow \u2b50\u2b50\u2b50\u2b50 \u63a8\u8350</li> <li>\u2705 Trunk-Based Development \u2b50\u2b50\u2b50\u2b50\u2b50 \u5f3a\u70c8\u63a8\u8350</li> <li>\u2705 GitLab Flow</li> </ul>"},{"location":"workflows/summary/#cicd","title":"CI/CD \u65b9\u6848","text":"<ul> <li>\u2705 \u57fa\u7840 CI/CD</li> <li>\u2705 \u591a\u6a21\u5757 CI/CD \u2b50\u2b50\u2b50\u2b50\u2b50 \u63a8\u8350\uff08\u9002\u5408\u60a8\u7684\u9879\u76ee\uff09</li> <li>\u2705 \u4f01\u4e1a\u7ea7 CI/CD</li> </ul>"},{"location":"workflows/summary/#agent","title":"Agent \u5f00\u53d1\u6a21\u5f0f","text":"<ul> <li>\u2705 ReactAgent</li> <li>\u2705 StateGraph</li> <li>\u2705 Supervisor Pattern</li> <li>\u2705 LangGraph vs Spring AI Alibaba Graph</li> </ul>"},{"location":"workflows/summary/#_4","title":"\ud83c\udfaf \u6838\u5fc3\u63a8\u8350","text":""},{"location":"workflows/summary/#mcp-router-sse-parent","title":"\u9488\u5bf9\u60a8\u7684\u9879\u76ee\uff08mcp-router-sse-parent\uff09","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         \u63a8\u8350\u7684\u5de5\u4f5c\u6d41\u7ec4\u5408                  \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u5206\u652f\u7b56\u7565: GitHub Flow (\u73b0\u5728)            \u2502\n\u2502          \u2192 Trunk-Based (\u672a\u6765)           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 CI/CD:   \u591a\u6a21\u5757 CI/CD                   \u2502\n\u2502          (\u53d8\u66f4\u68c0\u6d4b + \u5e76\u884c\u6784\u5efa)           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Agent:   Spring AI Alibaba Graph       \u2502\n\u2502          (ReactAgent + StateGraph)      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 \u5de5\u4f5c\u6d41:  \u81ea\u5b9a\u4e49 .agent/workflows/       \u2502\n\u2502          (\u5df2\u521b\u5efa3\u4e2a\u6807\u51c6\u5de5\u4f5c\u6d41)           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"workflows/summary/#_5","title":"\ud83d\udcda \u4f7f\u7528\u6307\u5357","text":""},{"location":"workflows/summary/#1-mcp-server","title":"\u573a\u666f 1: \u6dfb\u52a0\u65b0\u7684 MCP Server","text":"<pre><code># 1. \u67e5\u770b\u5de5\u4f5c\u6d41\u6587\u6863\ncat .agent/workflows/add-mcp-server.md\n\n# 2. \u4f7f\u7528 Antigravity \u6216\u5176\u4ed6 LLM \u6267\u884c\n# \"\u8bf7\u6309\u7167 add-mcp-server \u5de5\u4f5c\u6d41\u6dfb\u52a0\u4e00\u4e2a\u5929\u6c14 MCP Server\"\n\n# 3. \u5de5\u4f5c\u6d41\u4f1a\u6307\u5bfc\u60a8\u5b8c\u6210:\n#    - \u9700\u6c42\u5206\u6790\n#    - \u67b6\u6784\u8bbe\u8ba1\n#    - \u4ee3\u7801\u5b9e\u73b0\n#    - \u6d4b\u8bd5\n#    - \u6587\u6863\n#    - \u4ee3\u7801\u5ba1\u67e5\n#    - \u96c6\u6210\n</code></pre>"},{"location":"workflows/summary/#2-ai-agent","title":"\u573a\u666f 2: \u5f00\u53d1\u65b0\u7684 AI Agent","text":"<pre><code># 1. \u67e5\u770b\u5de5\u4f5c\u6d41\u6587\u6863\ncat .agent/workflows/add-agent-workflow.md\n\n# 2. \u4f7f\u7528 LLM \u6267\u884c\n# \"\u8bf7\u6309\u7167 add-agent-workflow \u521b\u5efa\u4e00\u4e2a\u5929\u6c14\u5206\u6790 Agent\"\n\n# 3. \u5de5\u4f5c\u6d41\u4f1a\u6307\u5bfc\u60a8:\n#    - \u9009\u62e9 Agent \u7c7b\u578b (ReactAgent/StateGraph/Supervisor)\n#    - \u8bbe\u8ba1\u72b6\u6001\u56fe\n#    - \u5b9e\u73b0\u8282\u70b9\n#    - \u6d4b\u8bd5\n#    - \u53ef\u89c6\u5316\n</code></pre>"},{"location":"workflows/summary/#3","title":"\u573a\u666f 3: \u4ee3\u7801\u5ba1\u67e5","text":"<pre><code># \u4f7f\u7528\u73b0\u6709\u7684 review \u5de5\u4f5c\u6d41\n/review path/to/your/file.java\n</code></pre>"},{"location":"workflows/summary/#_6","title":"\ud83d\ude80 \u7acb\u5373\u5f00\u59cb","text":""},{"location":"workflows/summary/#a-github-flow-cicd","title":"\u9009\u9879 A: \u8bbe\u7f6e GitHub Flow + \u57fa\u7840 CI/CD\uff08\u63a8\u8350\u7acb\u5373\u6267\u884c\uff09","text":"<p>\u6b65\u9aa4 1: \u521b\u5efa GitHub Actions \u5de5\u4f5c\u6d41</p> <p>\u521b\u5efa\u6587\u4ef6 <code>.github/workflows/maven.yml</code>:</p> <pre><code>name: Maven Build\n\non:\n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v4\n\n    - name: Set up JDK 17\n      uses: actions/setup-java@v4\n      with:\n        java-version: '17'\n        distribution: 'corretto'\n        cache: maven\n\n    - name: Build with Maven\n      run: mvn -B clean install\n\n    - name: Run Tests\n      run: mvn test\n</code></pre> <p>\u6b65\u9aa4 2: \u8bbe\u7f6e\u5206\u652f\u4fdd\u62a4</p> <p>\u5728 GitHub \u4ed3\u5e93\u8bbe\u7f6e\u4e2d\uff1a - Settings \u2192 Branches \u2192 Add branch protection rule - Branch name pattern: <code>main</code> - \u2705 Require a pull request before merging - \u2705 Require status checks to pass - \u2705 Require branches to be up to date</p> <p>\u6b65\u9aa4 3: \u6587\u6863\u5316\u5206\u652f\u547d\u540d\u89c4\u8303</p> <p>\u521b\u5efa <code>CONTRIBUTING.md</code>: <pre><code>## \u5206\u652f\u547d\u540d\u89c4\u8303\n\n- `feature/*` - \u65b0\u529f\u80fd\n- `bugfix/*` - Bug \u4fee\u590d\n- `docs/*` - \u6587\u6863\u66f4\u65b0\n- `refactor/*` - \u91cd\u6784\n\n\u793a\u4f8b: `feature/add-gemini-integration`\n</code></pre></p>"},{"location":"workflows/summary/#b-cicd","title":"\u9009\u9879 B: \u5e94\u7528\u591a\u6a21\u5757 CI/CD\uff08\u8fdb\u9636\uff09","text":"<p>\u590d\u5236 <code>docs/GITHUB_WORKFLOWS_COMPARISON.md</code> \u4e2d\u7684\"\u65b9\u6848 B\"\u914d\u7f6e\u5373\u53ef\u3002</p>"},{"location":"workflows/summary/#_7","title":"\ud83d\udcd6 \u5173\u952e\u6982\u5ff5\u901f\u67e5","text":""},{"location":"workflows/summary/#1-github-flow","title":"1. GitHub Flow \u6838\u5fc3\u539f\u5219","text":"<pre><code>1. main \u5206\u652f\u6c38\u8fdc\u53ef\u90e8\u7f72\n2. \u4ece main \u521b\u5efa\u63cf\u8ff0\u6027\u5206\u652f\n3. \u5b9a\u671f\u63d0\u4ea4\u5230\u5206\u652f\n4. \u5f00 Pull Request\n5. \u8ba8\u8bba\u548c\u5ba1\u67e5\n6. \u5408\u5e76\u540e\u7acb\u5373\u90e8\u7f72\n</code></pre>"},{"location":"workflows/summary/#2-trunk-based-development","title":"2. Trunk-Based Development \u6838\u5fc3\u8981\u70b9","text":"<pre><code>1. \u77ed\u751f\u547d\u5468\u671f\u5206\u652f (&lt; 1\u5929)\n2. \u9891\u7e41\u96c6\u6210\u5230 main\n3. \u4f7f\u7528 Feature Flags\n4. \u5f3a\u5927\u7684\u81ea\u52a8\u5316\u6d4b\u8bd5\n5. \u5feb\u901f\u53cd\u9988\u5faa\u73af\n</code></pre>"},{"location":"workflows/summary/#3-spring-ai-alibaba-agent","title":"3. Spring AI Alibaba Agent \u6a21\u5f0f","text":"<pre><code>// ReactAgent - \u901a\u7528\u4efb\u52a1\nReactAgent.builder()\n    .chatClient(chatClient)\n    .tools(tools)\n    .build();\n\n// StateGraph - \u590d\u6742\u6d41\u7a0b\nvar graph = new StateGraph();\ngraph.addNode(\"step1\", node1);\ngraph.addEdge(START, \"step1\");\n\n// Supervisor - \u591aAgent\u534f\u4f5c\nSupervisorAgent.builder()\n    .subAgents(List.of(agent1, agent2))\n    .build();\n</code></pre>"},{"location":"workflows/summary/#_8","title":"\ud83c\udf93 \u5b66\u4e60\u8def\u5f84","text":""},{"location":"workflows/summary/#1_1","title":"\u7b2c 1 \u5468: \u719f\u6089\u57fa\u7840","text":"<ul> <li> \u9605\u8bfb <code>docs/GITHUB_WORKFLOWS_COMPARISON.md</code></li> <li> \u7406\u89e3 GitHub Flow</li> <li> \u8bbe\u7f6e\u57fa\u7840 CI/CD</li> <li> \u5b9e\u8df5: \u6dfb\u52a0\u4e00\u4e2a\u7b80\u5355\u529f\u80fd</li> </ul>"},{"location":"workflows/summary/#2-3","title":"\u7b2c 2-3 \u5468: \u5e94\u7528\u5de5\u4f5c\u6d41","text":"<ul> <li> \u4f7f\u7528 <code>add-mcp-server.md</code> \u6dfb\u52a0 MCP Server</li> <li> \u4f7f\u7528 <code>add-agent-workflow.md</code> \u5f00\u53d1 Agent</li> <li> \u4f7f\u7528 <code>review.md</code> \u8fdb\u884c\u4ee3\u7801\u5ba1\u67e5</li> <li> \u5b9e\u8df5: \u5b8c\u6210\u4e00\u4e2a\u5b8c\u6574\u7684\u529f\u80fd\u5f00\u53d1\u5468\u671f</li> </ul>"},{"location":"workflows/summary/#4","title":"\u7b2c 4 \u5468: \u4f18\u5316\u5347\u7ea7","text":"<ul> <li> \u8bc4\u4f30 CI/CD \u6548\u679c</li> <li> \u8003\u8651\u5347\u7ea7\u5230 Trunk-Based</li> <li> \u4f18\u5316\u81ea\u52a8\u5316\u6d41\u7a0b</li> <li> \u56e2\u961f\u5206\u4eab\u6700\u4f73\u5b9e\u8df5</li> </ul>"},{"location":"workflows/summary/#_9","title":"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5\u63d0\u9192","text":""},{"location":"workflows/summary/#do","title":"DO \u2705","text":"<ol> <li>\u5c0f\u6b65\u5feb\u8dd1: \u9891\u7e41\u63d0\u4ea4\uff0c\u5feb\u901f\u96c6\u6210</li> <li>\u81ea\u52a8\u5316\u4f18\u5148: \u80fd\u81ea\u52a8\u5316\u7684\u90fd\u81ea\u52a8\u5316</li> <li>\u6587\u6863\u540c\u6b65: \u4ee3\u7801\u548c\u6587\u6863\u4e00\u8d77\u66f4\u65b0</li> <li>\u53ca\u65f6\u5ba1\u67e5: PR \u5728 24 \u5c0f\u65f6\u5185\u5ba1\u67e5</li> <li>\u6d4b\u8bd5\u5148\u884c: \u5148\u5199\u6d4b\u8bd5\u518d\u5199\u4ee3\u7801</li> </ol>"},{"location":"workflows/summary/#dont","title":"DON'T \u274c","text":"<ol> <li>\u957f\u671f\u5206\u652f: \u907f\u514d\u5206\u652f\u751f\u547d\u5468\u671f &gt; 3 \u5929</li> <li>\u8df3\u8fc7\u6d4b\u8bd5: \u4e0d\u8981\u56e0\u4e3a\u8d76\u65f6\u95f4\u8df3\u8fc7\u6d4b\u8bd5</li> <li>\u5927\u6279\u91cf\u5408\u5e76: \u907f\u514d\u4e00\u6b21\u5408\u5e76 &gt; 500 \u884c\u4ee3\u7801</li> <li>\u5ffd\u7565CI\u5931\u8d25: red != green, \u5fc5\u987b\u4fee\u590d</li> <li>\u624b\u52a8\u90e8\u7f72: \u81ea\u52a8\u5316\u90e8\u7f72\uff0c\u51cf\u5c11\u4eba\u4e3a\u9519\u8bef</li> </ol>"},{"location":"workflows/summary/#_10","title":"\ud83d\udd04 \u5de5\u4f5c\u6d41\u6f14\u8fdb\u8def\u5f84","text":"<pre><code>\u5f53\u524d\u72b6\u6001              \u73b0\u5728\u5f00\u59cb            3\u4e2a\u6708\u540e            6\u4e2a\u6708\u540e\n    \u2502                    \u2502                  \u2502                  \u2502\n    \u25bc                    \u25bc                  \u25bc                  \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 \u624b\u52a8\u6d41\u7a0b\u2502   \u2192     \u2502 GitHub  \u2502   \u2192   \u2502  \u591a\u6a21\u5757  \u2502  \u2192   \u2502  Trunk-  \u2502\n\u2502         \u2502          \u2502  Flow   \u2502        \u2502  CI/CD  \u2502       \u2502  Based   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518          \u2502  +      \u2502        \u2502  +      \u2502       \u2502  +       \u2502\n                     \u2502 \u57fa\u7840CI  \u2502        \u2502 \u5e76\u884c\u6784\u5efa\u2502       \u2502 Feature  \u2502\n                     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502  Flags   \u2502\n                                                          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"workflows/summary/#_11","title":"\ud83d\udcde \u9700\u8981\u5e2e\u52a9\uff1f","text":""},{"location":"workflows/summary/#_12","title":"\u4f7f\u7528\u5de5\u4f5c\u6d41\u65f6","text":"<ol> <li>\u67e5\u770b\u6587\u6863: <code>.agent/workflows/</code> \u4e2d\u7684\u5bf9\u5e94\u5de5\u4f5c\u6d41</li> <li>\u95ee AI: \"\u8bf7\u6309\u7167 XXX \u5de5\u4f5c\u6d41\u6267\u884c...\"</li> <li>\u53c2\u8003\u793a\u4f8b: <code>docs/GITHUB_WORKFLOWS_COMPARISON.md</code> \u4e2d\u7684\u793a\u4f8b</li> </ol>"},{"location":"workflows/summary/#_13","title":"\u9047\u5230\u95ee\u9898\u65f6","text":"<ol> <li>\u68c0\u67e5 CI/CD \u65e5\u5fd7: GitHub Actions \u6807\u7b7e\u9875</li> <li>\u67e5\u770b\u6587\u6863: \u76f8\u5e94\u7684\u5de5\u4f5c\u6d41\u6587\u6863</li> <li>\u641c\u7d22\u95ee\u9898: \u5728\u6587\u6863\u4e2d\u641c\u7d22\u5173\u952e\u8bcd</li> </ol>"},{"location":"workflows/summary/#_14","title":"\u2705 \u4e0b\u4e00\u6b65\u884c\u52a8","text":""},{"location":"workflows/summary/#_15","title":"\u7acb\u5373\u6267\u884c\uff08\u4eca\u5929\uff09","text":"<ol> <li> \u9605\u8bfb <code>GITHUB_WORKFLOWS_COMPARISON.md</code></li> <li> \u7406\u89e3\u63a8\u8350\u7684\u5de5\u4f5c\u6d41\u7ec4\u5408</li> <li> \u51b3\u5b9a\u4ece\u54ea\u4e2a\u9009\u9879\u5f00\u59cb</li> </ol>"},{"location":"workflows/summary/#_16","title":"\u672c\u5468\u6267\u884c","text":"<ol> <li> \u8bbe\u7f6e GitHub Flow \u5206\u652f\u7b56\u7565</li> <li> \u521b\u5efa <code>.github/workflows/maven.yml</code></li> <li> \u6d4b\u8bd5\u4e00\u6b21\u5b8c\u6574\u7684 PR \u6d41\u7a0b</li> </ol>"},{"location":"workflows/summary/#_17","title":"\u672c\u6708\u6267\u884c","text":"<ol> <li> \u4f7f\u7528\u65b0\u5de5\u4f5c\u6d41\u5f00\u53d1 2-3 \u4e2a\u529f\u80fd</li> <li> \u6536\u96c6\u56e2\u961f\u53cd\u9988</li> <li> \u4f18\u5316\u5de5\u4f5c\u6d41\u6587\u6863</li> </ol>"},{"location":"workflows/summary/#_18","title":"\ud83c\udf89 \u603b\u7ed3","text":"<p>\u60a8\u73b0\u5728\u62e5\u6709:</p> <p>\u2705 3 \u4e2a\u6807\u51c6\u5316\u5de5\u4f5c\u6d41 - \u6dfb\u52a0 MCP Server - \u6dfb\u52a0 AI Agent - \u4ee3\u7801\u5ba1\u67e5</p> <p>\u2705 \u5b8c\u6574\u7684\u5bf9\u6bd4\u5206\u6790 - \u5206\u652f\u7b56\u7565 - CI/CD \u65b9\u6848 - Agent \u5f00\u53d1\u6a21\u5f0f</p> <p>\u2705 \u6e05\u6670\u7684\u5b9e\u65bd\u8def\u5f84 - \u7acb\u5373\u5f00\u59cb: GitHub Flow + \u57fa\u7840 CI/CD - \u77ed\u671f\u4f18\u5316: \u591a\u6a21\u5757 CI/CD - \u957f\u671f\u6f14\u8fdb: Trunk-Based</p> <p>\u2705 \u7075\u6d3b\u7684 LLM \u652f\u6301 - \u5de5\u4f5c\u6d41\u4e0e LLM \u65e0\u5173 - Claude / Gemini / GPT-4 \u90fd\u53ef\u4ee5\u4f7f\u7528 - \u6807\u51c6\u5316\u6d41\u7a0b\u4fdd\u8bc1\u4e00\u81f4\u6027</p> <p>\ud83d\ude80 \u5f00\u59cb\u60a8\u7684\u6807\u51c6\u5316\u5f00\u53d1\u4e4b\u65c5\uff01</p> <p>\u65e0\u8bba\u4f7f\u7528\u54ea\u4e2a LLM\uff08Claude\u3001Gemini\u3001GPT-4\u3001DeepSeek\uff09\uff0c\u90fd\u80fd\u6309\u7167\u7edf\u4e00\u7684\u5de5\u4f5c\u6d41\u9ad8\u6548\u5f00\u53d1\u3002</p>"}]}